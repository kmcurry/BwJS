/*                   Bridgeworks(tm) Runtime Engine
                       Trial License Agreement


NOTICE
This is a contract between End User ("You") and Bridgeborn, Inc. ("Bridgeborn, Inc").
Please read the following terms and conditions carefully before installing or
using the Bridgeworks(tm) Runtime Engine ("software").  By installing the software,
You acknowledge that You have read and understood this license agreement and
agree to be bound by its terms and conditions.

I.  Use of the Software
Subject to the terms and conditions set forth in this Agreement,
Bridgeborn, Inc grants to You, and You accept, a limited, non-exclusive
license to use the accompanying computer program in object code form and any
documentation related to the Software, for use in the bundled sample
application.

II.  Intellectual Property
Except as stated elsewhere, this Agreement does not confer upon You any
intellectual property rights in the Software. Use of this product shall be
conducted in accordance with accepted trademark, patent, and copyright
practice. Bridgeworks is covered by U.S. Patent No. 7,681,114.

III.  Copyright
This Software, its code, and all documentation are owned by Bridgeborn, Inc.
Its organization, structure, and code are valuable trade secrets of
Bridgeborn, Inc.  This Software, its code, and all supporting documentation
are protected by U.S. Copyright law and International Treaty provisions.
You may not, in whole or in part, copy, photocopy, reproduce, translate,
adapt, modify, or create derivative works, or reduce to any electronic
medium or machine readable format, this Software, its code, or its
documentation, except as set forth elsewhere in this Agreement, without the
prior written consent of Bridgeborn, Inc.  You also may not reverse engineer,
decompose, disassemble, or otherwise attempt to discover or alter the source
code of the Software.

IV.  Transfer
This Software and its documentation may not be rented, leased, or
sublicensed by You to a third party.  You may, however, transfer all rights
to use the Software to another person or legal entity, subject to the
acceptance by such person or legal entity of all of the terms of this
Agreement.  Except as provided by this Agreement, any attempt to lease,
sublicense, assign, or transfer any of the rights, duties, or obligations
under this Agreement shall be void.


V.  Governing Law and General Provision
This Agreement shall be governed by the laws of the Commonwealth of Virginia.
This Agreement shall not be governed by the United Nations Convention on
Contracts for the International Sale of Goods, the application of which is
expressly excluded.  Should any portion of this Agreement be found void and
unenforceable, it shall not affect the validity of the other portions of
this Agreement, which shall remain valid and enforceable according to its
terms.  You agree that the Software will not be shipped, transported,
transferred, or exported in violation of the United States Export
Administration Act or any other export laws, restrictions, or regulations.
This Agreement may only be modified in writing, signed by an authorized
officer of Bridgeborn, Inc.
*/
function Base(){this.userData="";this.className=""}function Allocator(){}function loadBinaryResource(e){var t=new XMLHttpRequest;t.open("GET",e,false);t.overrideMimeType("text/plain; charset=x-user-defined");t.send();if(t.status!=200){return null}return t.responseText}function loadXMLResource(e){var t=new XMLHttpRequest;t.open("GET",e,false);t.overrideMimeType("text/plain; charset=x-user-defined");t.send();if(t.status!=200){return null}return t.responseText}function loadTextResource(e){var t=new XMLHttpRequest;t.open("GET",e,false);t.overrideMimeType("text/plain; charset=x-user-defined");t.send();if(t.status!=200){return null}return t.responseText}function isLower(e){var t=e.charCodeAt(0);return t>96&&t<123}function isUpper(e){var t=e.charCodeAt(0);return t>64&&t<91}function isSpace(e){if(e==" "||e=="\f"||e=="\n"||e=="\r"||e==" "||e=="")return true;return false}function getObjectClassName(e){if(e&&e.constructor&&e.constructor.toString){var t=e.constructor.toString().match(/function\s*(\w+)/);if(t&&t.length==2){return t[1]}t=e.constructor.toString().split(" ");if(t&&t.length==2){return t[1].substring(0,t[1].length-1)}}return undefined}function formatPath(e){var t=[];var n="";var r="";try{$.ajax({url:e,type:"HEAD",async:false,error:function(){console.debug(e+" does not exist.");var t=document.location.href;n=t.substring(0,t.lastIndexOf("/"))+"/"+bridgeworks.contentDir+"/"+e;console.debug("Trying: "+n);var i=n.lastIndexOf("objects/");if(i==-1)i=n.lastIndexOf("motions/");if(i==-1)i=n.lastIndexOf("envelopes/");if(i==-1)i=n.lastIndexOf("scenes/");r=n.substring(0,i);console.debug("With contentDir: "+r)},success:function(){n=e;var t=n.lastIndexOf("objects/");if(t==-1)t=n.lastIndexOf("motions/");if(t==-1)t=n.lastIndexOf("envelopes/");if(t==-1)t=n.lastIndexOf("scenes/");r=n.substring(0,t);console.debug("File found: "+n)}});t[0]=n;t[1]=r}catch(i){}return t}function isFullPath(e){var t=false;var n=e.length;if(n>=2){if((e[0]=="\\"||e[0]=="/")&&(e[1]=="\\"||e[1]=="/")){t=true}}if(t||e.indexOf(":")>=0){return true}return false}function formFullPath(e,t){var n=new String;if(!e||!t){return null}if(isFullPath(e)){n=e}else{n=t;if(n.length>0){var r=n.charAt(n.length-1);if(r!="/"&&r!="\\"){n+="/"}}if(e[0]=="/"||e[0]=="\\"){n+=e.slice(1)}else{n+=e}}return n}function getFileExtension(e){var t=null;var n=e.lastIndexOf(".");if(n!=-1){var t="";t=e.substr(n+1);return t}return t}function getBrowserName(){var e=new String(navigator.userAgent);if(e.indexOf("Chrome")>=0)return"Chrome";if(e.indexOf("Firefox")>=0)return"Firefox";return undefined}function OutputDebugMsg(e){var t=document.getElementById("DebugOutput").innerHTML;t+="&gt; "+e+"<br>";document.getElementById("DebugOutput").innerHTML=t}function addSlashAfterDriveSpecifier(e){var t=e.indexOf(":");if(t==-1)return e;e=e.slice(0,t+1)+"\\"+e.slice(t+1);return e}function hexStrToULong(e){var t=e.length-1;var n=0;var r=0;var i=0;for(;t>=0;t--,i++){switch(e.charAt(t)){case"0":r=0;break;case"1":r=1;break;case"2":r=2;break;case"3":r=3;break;case"4":r=4;break;case"5":r=5;break;case"6":r=6;break;case"7":r=7;break;case"8":r=8;break;case"9":r=9;break;case"a":case"A":r=10;break;case"b":case"B":r=11;break;case"c":case"C":r=12;break;case"d":case"D":r=13;break;case"e":case"E":r=14;break;case"f":case"F":r=15;break;default:r=0;break}n+=r*Math.pow(16,i)}return n}function Color(e,t,n,r){this.r=e||0;this.g=t||0;this.b=n||0;this.a=r||0}function Pair(e,t){this.first=e;this.second=t}function Rect(e,t,n,r){this.left=e||0;this.top=t||0;this.right=n||0;this.bottom=r||0}function Viewport(){this.x=0;this.y=0;this.width=0;this.height=0;this.equals=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height}}function Stack(e){this.stack=new Array;this.maxLength=0;if(e){this.stack.push(e)}}function Queue(e){this.queue=new Array;this.maxLength=0;if(e){this.queue.push(e)}}function setAttributeBin(e){gAttributeBin=e}function setAttributePairs(e){gAttributePairs=e}function deserializeAttributeContainer(e,t){for(var n=0;n<t.length;n++){var r=e.getAttribute(t[n][0]);if(r){deserializeAttribute(r,t[n][1])}}e.flagDeserializedFromXML()}function deserializeComplexAttribute(e,t){var n=[];for(var r=0;r<t.length;r++){n.push(t[r][1])}if(n.length>0){if(!gAttributeBin){setAttributeValue(e,n)}else{gAttributeBin.push(new Pair(e,n))}}e.flagDeserializedFromXML()}function deserializeAttribute(e,t){if(!gAttributeBin){setAttributeValue(e,t)}else{gAttributeBin.push(new Pair(e,t))}e.flagDeserializedFromXML()}function resolveAttributeContainerReference(e,t,n){if(t.length>0){if(t[0][0]=="ref"){var r=n.find(t[0][1]);if(r){e.synchronize(r,true);return true}}}return false}function resolveComplexAttributeReference(e,t){if(t.length>0){if(t[0][0]=="ref"){return resolvePrimitiveAttributeReference(e,t[0][1])}}return false}function resolvePrimitiveAttributeReference(e,t){return false}function resolveAttributeReference(e,t){if(!gAttributePairs){t.copyValue(e)}else{gAttributePairs.push(new Pair(e,t))}}function isEmpty(e){return e==null||e.length==0}function trim(e,t,n){if(isEmpty(e)){return""}if(t==null){t=true}if(n==null){n=true}var r=0;var i=0;var s=0;var o=0;if(t==true){while(s<e.length&&whitespace.indexOf(e.charAt(s++))!=-1){r++}}if(n==true){o=e.length-1;while(o>=r&&whitespace.indexOf(e.charAt(o--))!=-1){i++}}return e.substring(r,e.length-i)}function __escapeString(e){var t=/&/g;var n=/</g;var r=/>/g;var i=/"/g;var s=/'/g;e=e.replace(t,"&");e=e.replace(n,"&lt;");e=e.replace(r,"&gt;");e=e.replace(i,"&quot;");e=e.replace(s,"&apos;");return e}function __unescapeString(e){var t=/&/g;var n=/&lt;/g;var r=/&gt;/g;var i=/&quot;/g;var s=/&apos;/g;e=e.replace(t,"&");e=e.replace(n,"<");e=e.replace(r,">");e=e.replace(i,'"');e=e.replace(s,"'");return e}function showTagInfo(e){var t;var n;t=trim(xmlTextArray[e]);if(t==""||t==null){t="No text value for this node"}n=trim(xmlCDataArray[e]);if(n==""||n==null){n="No CDATA value for this node"}var r="Text:\n "+t+"\n\n"+"CDATA:\n "+n+"\n\n";if(xmlAttrArray[e]){var s=xmlAttrArray[e];var o="";for(i in s){o+=i+"="+s[i]+"\n"}r+="Attributes:\n "+o}alert(e+"\n\n"+r)}function startParser(){var e=document.getElementById("xmldata").value;var t,n="",r=new SAXDriver;var s=new xmlHandler;r.setDocumentHandler(s);r.setErrorHandler(s);r.setLexicalHandler(s);r.parse(e);var o="\n"+s.getError();xmlTextArray=s.getText_Array();xmlCDataArray=s.getCDATA_Array();xmlAttrArray=s.getAttr_Array();t=s.getPath_Array();for(i=0;i<t.length;i++){n+='<a href="javascript:void(null)" onclick="showTagInfo(\''+t[i]+"')\">"+t[i]+"</a>\n"}if(document.all){document.all.divout.innerHTML="Parsing completed  | Click on the links below for more info:<br><pre>"+n+"</pre>"}else if(document.getElementById){document.getElementById("divout").innerHTML="Parsing completed | Click on the links below for more info:<br><pre>"+n+"</pre>"}else{alert("Requires a DOM compatible browser for this test")}}function Timer(){this.startTime=null;this.stopTime=null}function __getIEVersion(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent;var n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(n.exec(t)!=null)e=parseFloat(RegExp.$1)}return e}function __getOperaVersion(){var e=0;if(window.opera){var t=window.opera.version();e=parseFloat(t)}return e}function __parseBorderWidth(e){var t=0;if(typeof e=="string"&&e!=null&&e!=""){var n=e.indexOf("px");if(n>=0){t=parseInt(e.substring(0,n))}else{t=1}}return t}function __getBorderWidth(e){var t=new Object;t.left=0;t.top=0;t.right=0;t.bottom=0;if(window.getComputedStyle){var n=window.getComputedStyle(e,null);t.left=parseInt(n.borderLeftWidth.slice(0,-2));t.top=parseInt(n.borderTopWidth.slice(0,-2));t.right=parseInt(n.borderRightWidth.slice(0,-2));t.bottom=parseInt(n.borderBottomWidth.slice(0,-2))}else{t.left=__parseBorderWidth(e.style.borderLeftWidth);t.top=__parseBorderWidth(e.style.borderTopWidth);t.right=__parseBorderWidth(e.style.borderRightWidth);t.bottom=__parseBorderWidth(e.style.borderBottomWidth)}return t}function getElementAbsolutePos(e){var t=new Object;t.x=0;t.y=0;if(e!==null){if(e.getBoundingClientRect){var n=document.documentElement;var r=e.getBoundingClientRect();var i=n.scrollLeft;var s=n.scrollTop;t.x=r.left+i;t.y=r.top+s}else{t.x=e.offsetLeft;t.y=e.offsetTop;var o=e.parentNode;var u=null;while(offsetParent!=null){t.x+=offsetParent.offsetLeft;t.y+=offsetParent.offsetTop;var a=offsetParent.tagName.toLowerCase();if(__isIEOld&&a!="table"||(__isFireFoxNew||__isChrome)&&a=="td"){u=kGetBorderWidth(offsetParent);t.x+=u.left;t.y+=u.top}if(offsetParent!=document.body&&offsetParent!=document.documentElement){t.x-=offsetParent.scrollLeft;t.y-=offsetParent.scrollTop}if(!__isIE&&!__isOperaOld||__isIENew){while(offsetParent!=o&&o!==null){t.x-=o.scrollLeft;t.y-=o.scrollTop;if(__isFireFoxOld||__isWebKit){u=kGetBorderWidth(o);t.x+=u.left;t.y+=u.top}o=o.parentNode}}o=offsetParent.parentNode;offsetParent=offsetParent.offsetParent}}}return t}function min3(e,t,n){return Math.min(e,Math.min(t,n))}function max3(e,t,n){return Math.max(e,Math.max(t,n))}function toRadians(e){return e*Math.PI/180}function toDegrees(e){return e*180/Math.PI}function magnitude(e,t,n){return Math.sqrt(e*e+t*t+n*n)}function clamp(e,t,n){if(e<t)return t;if(e>n)return n;return e}function degreeNormalize(e){while(e<0){e+=360}while(e>=360){e-=360}return e}function epsilonEqual(e,t,n){if(Math.abs(e-t)<n){return true}return false}function determinant2x2(e,t,n,r){return e*r-t*n}function determinant3x3(e,t,n,r,i,s,o,u,a){var f=determinant2x2(i,s,u,a);var l=determinant2x2(r,s,o,a);var c=determinant2x2(r,i,o,u);return e*f-t*l+n*c}function determinant4x4(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=determinant3x3(s,o,u,f,l,c,p,d,v);var g=determinant3x3(i,o,u,a,l,c,h,d,v);var y=determinant3x3(i,s,u,a,f,c,h,p,v);var b=determinant3x3(i,s,o,a,f,l,h,p,d);return e*m-t*g+n*y-r*b}function modf(e){var t=e<0?Math.ceil(e):Math.floor(e);var n=e-t;return{integerPart:t,fractionalPart:n}}function XYZtoH(e,t,n){var r=0;if(e==0){if(n>=0){r=0}else{r=Math.PI}}else if(n==0){if(e>=0){r=3*HALFPI}else{r=HALFPI}}else{if(e>0&&n>0){r=TWOPI-Math.atan(e/n)}else if(e<0&&n>0){r=-Math.atan(e/n)}else if(e<0&&n<0){r=HALFPI+Math.atan(n/e)}else{r=3*HALFPI+Math.atan(n/e)}}return r}function XYZtoHP(e,t,n){var r=0;var i=0;if(e==0&&n==0){r=0;if(t!=0){i=t<0?-HALFPI:HALFPI}else{i=0}}else{if(n==0){r=e>0?HALFPI:-HALFPI}else if(n<0){r=-Math.atan(e/n)+Math.PI}else{r=-Math.atan(e/n)}e=Math.sqrt(e*e+n*n);if(e==0){i=t<0?-HALFPI:HALFPI}else{i=Math.atan(t/e)}}return{heading:r,pitch:i}}function rectContainsPoint(e,t,n){if(e>=n.left&&t>=n.top&&e<=n.right&&t<=n.bottom)return true;return false}function Vector2D(e,t){this.x=e||0;this.y=t||0}function Vector3D(e,t,n){this.x=e||0;this.y=t||0;this.z=n||0;this.equals=function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z}}function dotProduct(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function crossProduct(e,t){var n=new Vector3D;n.x=e.y*t.z-e.z*t.y;n.y=e.z*t.x-e.x*t.z;n.z=e.x*t.y-e.y*t.x;return n}function cosineAngleBetween(e,t){var n=magnitude(e.x,e.y,e.z)*magnitude(t.x,t.y,t.z);if(n!=0){var r=dotProduct(e,t)/n;if(r>1)r=1;else if(r<-1)r=-1;return r}return 1}function midpoint(e,t){var n=new Vector3D;n.x=(e.x+t.x)/2;n.y=(e.y+t.y)/2;n.z=(e.z+t.z)/2;return n}function distanceBetween(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)+(e.z-t.z)*(e.z-t.z))}function subtract3D(e,t){var n=new Vector3D(e.x,e.y,e.z);n.subtractVector(t);return n}function Vector4D(e,t,n,r){this.x=e||0;this.y=t||0;this.z=n||0;this.w=r||0}function Matrix4x4(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){this._11=e||1;this._12=t||0;this._13=n||0;this._14=r||0;this._21=i||0;this._22=s||1;this._23=o||0;this._24=u||0;this._31=a||0;this._32=f||0;this._33=l||1;this._34=c||0;this._41=h||0;this._42=p||0;this._43=d||0;this._44=v||1}function MatrixStack(e){Stack.call(this,e)}function Quaternion(){this.w=1;this.x=0;this.y=0;this.z=0}function Line(e,t){this.point=new Vector3D(e.x,e.y,e.z);this.dir=new Vector3D(t.x,t.y,t.z)}function Plane(e,t){this.point=new Vector3D;this.normal=new Vector3D;this.dot=0;if(e&&t){this.point.copy(e);this.normal.copy(t);this.dot=dotProduct(this.point,this.normal)}}function Plane2(e,t,n){var r;if(e&&t&&n){var i=new Vector3D(n.x-t.x,n.y-t.y,n.z-t.z);var s=new Vector3D(e.x-t.x,e.y-t.y,e.z-t.z);r=crossProduct(i,s);r.normalize()}Plane.call(this,e,r)}function pointOnPlane(e,t,n){return Math.abs(dotProduct(e,t.normal)-t.dot)<n?true:false}function pointOnPositiveSideOfPlane(e,t){return dotProduct(e,t.normal)-t.dot>0?true:false}function pointOnNegativeSideOfPlane(e,t){return dotProduct(e,t.normal)-t.dot<0?true:false}function lineIntersectsPlane(e,t){var n=new Vector3D;var r;var i=t.normal.x*e.dir.x+t.normal.y*e.dir.y+t.normal.z*e.dir.z;if(i==0){if(pointOnPlane(e.point,t,FLT_EPSILON)){n.copy(e.point);r=2}r=0}else{var s=t.dot-(t.normal.x*e.point.x+t.normal.y*e.point.y+t.normal.z*e.point.z);var o=s/i;n.x=o*e.dir.x+e.point.x;n.y=o*e.dir.y+e.point.y;n.z=o*e.dir.z+e.point.z;r=1}return{result:r,point:n}}function lineSegmentPlaneIntersection(e,t,n){var r=new Vector3D(t.x-e.x,t.y-e.y,t.z-e.z);var i=e.x;var s=e.y;var o=e.z;var u=r.x;var a=r.y;var f=r.z;var l=n.normal.x*u+n.normal.y*a+n.normal.z*f;if(l==0){if(pointOnPlane(e,n,FLT_EPSILON)){var c=new Vector3D(e);return{count:2,point:c}}return{count:0}}var h=n.dot-(n.normal.x*i+n.normal.y*s+n.normal.z*o);var p=h/l;if(p<0||p>1){return{count:0}}var c=new Vector3D;c.x=p*u+i;c.y=p*a+s;c.z=p*f+o;return{count:1,point:c}}function coplanar(e,t){return(e.normal==t.normal||e.normal==-t.normal)&&pointOnPlane(e.point,t)?true:false}function planesIntersect(e,t){var n=new Vector3D(0,0,0);if(crossProduct(e.normal,t.normal).equals(n)){return false}return true}function distanceBetweenPlanes(e,t){if(coplanar(e,t)){return 0}if(!planesIntersect(e,t)){var n=lineIntersectsPlane(new Line(e.point,e.normal),t);if(n.result){return distanceBetween(e.point,t.point)}else{return 0}}return 0}function ViewVolume(){this.left=null;this.right=null;this.top=null;this.bottom=null;this.near=null;this.far=null}function SIGN3(e){e.x<0?4:0|e.y<0?2:0|e.z<0?1:0}function solveQuadraticEquation(e,t,n){if(e==0){return{count:0}}var r=t*t-4*e*n;if(r<0){return{count:0}}if(r==0){var i=-t/(2*e);return{count:1,root1:i}}r=Math.sqrt(r);var i=(-t+r)/(2*e);var s=(-t-r)/(2*e);return{count:2,root1:i,root2:s}}function rayTriangleIntersection(e,t,n,r,i,s,o){var u=new Vector3D(t.x,t.y,t.z);u.normalize();var a=new Vector3D(r.x-n.x,r.y-n.y,r.z-n.z);var f=new Vector3D(i.x-n.x,i.y-n.y,i.z-n.z);var l=crossProduct(u,f);var c=dotProduct(a,l);if(-EPSILON<c&&c<EPSILON){return{result:false}}if(s&&c>0){return{result:false}}if(o&&c<0){return{result:false}}var h=1/c;var p=new Vector3D(e.x-n.x,e.y-n.y,e.z-n.z);var d=dotProduct(p,l)*h;if(d<0||d>1){return{result:false}}var v=crossProduct(p,a);var m=dotProduct(u,v)*h;if(m<0||d+m>1){return{result:false}}var g=dotProduct(f,v)*h;return{result:true,t:g,u:d,v:m}}function raySphereIntersection(e,t,n,r){var i=new Vector3D(t.x,t.y,t.z);i.normalize();var s=new Vector3D(e.x+i.x,e.y+i.y,e.z+i.z);var o=s.x-e.x;var u=s.y-e.y;var a=s.z-e.z;var f=2*(o*(e.x-n.x)+u*(e.y-n.y)+a*(e.z-n.z));var l=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.x-n.y)+(e.z-n.z)*(e.z-n.z)-r*r;return solveQuadraticEquation(1,f,l)}function triangleContainsPoint(e,t,n,r){var i=SIGN3(crossProduct(subtract3D(e,t),subtract3D(e,r)));var s=SIGN3(crossProduct(subtract3D(t,n),subtract3D(t,r)));var o=SIGN3(crossProduct(subtract3D(n,e),subtract3D(n,r)));if(i==s&&s==o){return true}return false}function triangleOnPositiveSideOfPlane(e,t,n,r){return pointOnPositiveSideOfPlane(e,r)&&pointOnPositiveSideOfPlane(t,r)&&pointOnPositiveSideOfPlane(n,r)}function lineSegmentTriangleIntersection(e,t,n,r,i){var s=lineSegmentPlaneIntersection(e,t,new Plane2(n,r,i));if(s.count==0){return{result:false}}if(s.point.x<min3(n.x,r.x,i.x)||s.point.y<min3(n.y,r.y,i.y)||s.point.z<min3(n.z,r.z,i.z)||s.point.x>max3(n.x,r.x,i.x)||s.point.y>max3(n.y,r.y,i.y)||s.point.z>max3(n.z,r.z,i.z)){return{result:false}}if(triangleContainsPoint(n,r,i,s.point)){return{result:true,point:s.point}}return{result:false}}function planeProject(e,t){return crossProduct(t.normal,crossProduct(e,t.normal))}function distanceBetweenLineSegmentAndPoint(e,t,n){if(e.equals(t)){return distanceBetween(e,n)}var r=magnitude(t.x-e.x,t.y-e.y,t.z-e.z);var i=((n.x-e.x)*(t.x-e.x)+(n.y-e.y)*(t.y-e.y)+(n.z-e.z)*(t.z-e.z))/(r*r);if(i<0){return distanceBetween(e,n)}else if(i>1){return distanceBetween(t,n)}else{return distanceBetween(new Vector3D(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i,e.z+(t.z-e.z)*i),n)}}function enumerateAttributeTypes(){var e=0;for(var t in eAttrType){if(eAttrType[t]==0)eAttrType[t]=e++}}function enumerateAttributeElementTypes(){var e=0;for(var t in eAttrElemType){if(eAttrElemType[t]==0)eAttrElemType[t]=e++}}function AttributeTargetDesc(e,t,n,r,i){this.target=e||null;this.sourceElementIndex=t||-1;this.targetElementIndex=n||-1;this.op=r||eAttrSetOp.Replace;this.converter=i||null}function AttributeSourceDesc(e,t,n,r,i){this.source=e||null;this.sourceElementIndex=t||-1;this.targetElementIndex=n||-1;this.op=r||eAttrSetOp.Replace;this.converter=i||null}function AttributeGetParams(e,t){this.elementIndex=e;this.valueElementIndex=t}function AttributeSetParams(e,t,n,r,i,s){this.elementIndex=e||-1;this.valueElementIndex=t||-1;this.op=n||eAttrSetOp.Replace;this.updateTargets=r!=undefined?r:true;this.alertModifiedCBs=i!=undefined?i:true;this.caller=s!=undefined?s:null}function Attribute(){Base.call(this);this.className="Attribute";this.attrType=eAttrType.Attribute;this.attrElemType=eAttrElemType.Attribute;this.native=true;this.transient=false;this.persistent=false;this.deserialized=false;this.values=[];this.lastValues=[];this.modifiedCBs=[];this.modifiedCBsData=[];this.targets=[];this.sources=[];this.container=null;this.registry=null}function AttributeContainer(){Attribute.call(this);this.className="AttributeContainer";this.attrType=eAttrType.AttributeContainer;this.attrNameMap=[];this.attrModifiedCountMap=[]}function AttributeContainer_AttributeModifiedCB(e,t){for(var n=0;n<t.modifiedCBs.length;n++){t.modifiedCBs[n](t,t.modifiedCBsData[n])}}function AttributeContainer_AttributeModifiedCounterCB(e,t){t.incrementAttributeModificationCount(e)}function AttributeRegistry(){AttributeContainer.call(this);this.className="AttributeRegistry";this.attrType=eAttrType.AttributeRegistry;this.objectCount=0;this.typeRegistry=[];this.nameRegistry=[];this.uniqueAttributes=[]}function AttributeRegistry_AttributeContainerNameModifiedCB(e,t){t.updateName(e.getContainer(),e.getValueDirect().join(""))}function BooleanAttr(e){Attribute.call(this);this.className="BooleanAttr";this.attrType=eAttrType.BooleanAttr;this.setValue(e||false)}function ColorAttr(e,t,n,r){Attribute.call(this);this.className="ColorAttr";this.attrType=eAttrType.ColorAttr;var i=[e||0,t||0,n||0,r||0];this.setValue(i)}function Matrix4x4Attr(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){Attribute.call(this);this.className="Matrix4x4Attr";this.attrType=eAttrType.Matrix4x4Attr;var m=[e||1,t||0,n||0,r||0,i||0,s||1,o||0,u||0,a||0,f||0,l||1,c||0,h||0,p||0,d||0,v||1];this.setValue(m)}function NumberArrayAttr(){Attribute.call(this);this.className="NumberArrayAttr";this.attrType=eAttrType.NumberArrayAttr}function NumberAttr(e){Attribute.call(this);this.className="NumberAttr";this.attrType=eAttrType.NumberAttr;this.setValue(e||0)}function PulseAttr(){BooleanAttr.call(this);this.className="PulseAttr";this.attrType=eAttrType.PulseAttr;this.setTransient(true)}function QuaternionAttr(e,t,n,r){Attribute.call(this);this.className="QuaternionAttr";this.attrType=eAttrType.QuaternionAttr;var i=[e||1,t||0,n||0,r||0];this.setValue(i)}function ReferenceAttr(e){Attribute.call(this);this.className="ReferenceAttr";this.attrType=eAttrType.ReferenceAttr;this.setValue(e||null)}function StringAttr(e){Attribute.call(this);this.className="StringAttr";this.attrType=eAttrType.StringAttr;this.setValue(e||"")}function StringAttrAllocator(){}function TernaryAttr(e){NumberAttr.call(this,e);this.className="TernaryAttr";this.attrType=eAttrType.TernaryAttr}function Vector2DAttr(e,t){Attribute.call(this);this.className="Vector2DAttr";this.attrType=eAttrType.Vector2DAttr;var n=[e||0,t||0];this.setValue(n)}function Vector3DAttr(e,t,n){Attribute.call(this);this.className="Vector3DAttr";this.attrType=eAttrType.Vector3DAttr;var r=[e||0,t||0,n||0];this.setValue(r)}function ViewportAttr(e,t,n,r){Attribute.call(this);this.className="ViewportAttr";this.attrType=eAttrType.ViewportAttr;var i=[e||0,t||0,n||0,r||0];this.setValue(i)}function AttributeVector(e){AttributeContainer.call(this);this.className="AttributeVector";this.attrType=eAttrType.AttributeVector;this.vector=[];this.allocator=e;this.size=new NumberAttr(0);this.baseName=new StringAttr("item");this.appendParsedElements=new BooleanAttr(false);this.elementModified=new PulseAttr;this.size.addModifiedCB(AttributeVector_SizeModifiedCB,this);this.baseName.addModifiedCB(AttributeVector_BaseNameModifiedCB,this);this.registerAttribute(this.size,"size");this.registerAttribute(this.baseName,"baseName");this.registerAttribute(this.appendParsedElements,"appendParsedElements");this.registerAttribute(this.elementModified,"elementModified")}function AttributeVector_SizeModifiedCB(e,t){t.sizeModified()}function AttributeVector_BaseNameModifiedCB(e,t){}function StyleAttr(){AttributeContainer.call(this);this.className="StyleAttr";this.attrType=eAttrType.StyleAttr;this.setOp=new NumberAttr(eAttrSetOp.Replace);this.styleUrl=new StringAttr;this.styleUrl.addModifiedCB(StyleAttr_StyleUrlModifiedCB,this);this.registerAttribute(this.setOp,"setOp");this.registerAttribute(this.styleUrl,"styleUrl")}function StyleAttr_StyleUrlModifiedCB(e,t){t.styleUrlModified()}function StylesAttr(){AttributeVector.call(this);this.className="StylesAttr";this.attrType=eAttrType.StylesAttr;this.registeredCBs=[];this.registeredCBsData=[];this.enabled=new BooleanAttr(true);this.registerAttribute(this.enabled,"enabled")}function StyleMapAttr(){AttributeContainer.call(this);this.className="StyleMapAttr";this.attrType=eAttrType.StyleMapAttr;this.eventType=eEventType.Unknown;this.targetContainer=null;this.event=new StringAttr;this.styles=new StylesAttr;this.styleUrl=new StringAttr;this.target=new StringAttr;this.event.addModifiedCB(StyleMapAttr_EventModifiedCB,this);this.styleUrl.addModifiedCB(StyleMapAttr_styleUrlModifiedCB,this);this.target.addModifiedCB(StyleMapAttr_TargetModifiedCB,this);this.registerAttribute(this.event,"event");this.registerAttribute(this.styleUrl,"styleUrl");this.registerAttribute(this.target,"target")}function StyleMapAttr_EventModifiedCB(e,t){t.eventModified()}function StyleMapAttr_styleUrlModifiedCB(e,t){t.styleUrlModified()}function StyleMapAttr_TargetModifiedCB(e,t){t.targetModified()}function StyleMapAttrAllocator(){}function StylesMapAttr(){AttributeVector.call(this,new StyleMapAttrAllocator);this.className="StylesMapAttr";this.attrType=eAttrType.StylesMapAttr;this.stylesEnabledMap=[];this.size.addModifiedCB(StylesMapAttr_SizeModifiedCB,this);this.appendParsedElements.setValueDirect(true)}function StylesMapAttr_SizeModifiedCB(e,t){t.StylesMapAttr_SizeModified()}function KeyframeAttr(){AttributeContainer.call(this);this.className="KeyframeAttr";this.attrType=eAttrType.KeyframeAttr;this.time=new NumberAttr;this.value=new NumberAttr;this.shape=new NumberAttr;this.params=new AttributeVector;for(var e=0;e<6;e++){this.params.push_back(new NumberAttr(0))}this.registerAttribute(this.time,"time");this.registerAttribute(this.value,"value");this.registerAttribute(this.shape,"shape");this.registerAttribute(this.params,"params");this.getTime=function(){return this.time.getValueDirect()};this.getValue=function(){return this.value.getValueDirect()};this.getShape=function(){return this.shape.getValueDirect()};this.getParams=function(e){return this.params.getAt(e).getValueDirect()}}function KeyframesAttr(){AttributeVector.call(this);this.className="KeyframesAttr";this.attrType=eAttrType.KeyframesAttr}function BBoxAttr(){AttributeContainer.call(this);this.className="BBoxAttr";this.attrType=eAttrType.BBoxAttr;this.min=new Vector3DAttr;this.max=new Vector3DAttr;this.registerAttribute(this.min,"min");this.registerAttribute(this.max,"max")}function ImageAttr(){AttributeContainer.call(this);this.className="ImageAttr";this.attrType=eAttrType.ImageAttr;this.width=new NumberAttr(0);this.height=new NumberAttr(0);this.byteAlignment=new NumberAttr(0);this.pixelFormat=new NumberAttr(ePixelFormat.Unknown);this.pixels=new NumberArrayAttr;this.registerAttribute(this.width,"width");this.registerAttribute(this.height,"height");this.registerAttribute(this.byteAlignment,"byteAlignment");this.registerAttribute(this.pixelFormat,"pixelFormat");this.registerAttribute(this.pixels,"pixels")}function RectAttr(){AttributeContainer.call(this);this.className="RectAttr";this.attrType=eAttrType.RectAttr;this.left=new NumberAttr(0);this.top=new NumberAttr(0);this.right=new NumberAttr(0);this.bottom=new NumberAttr(0);this.registerAttribute(this.left,"left");this.registerAttribute(this.top,"top");this.registerAttribute(this.right,"right");this.registerAttribute(this.bottom,"bottom")}function FontStyleAttr(){StyleAttr.call(this);this.className="FontStyleAttr";this.attrType=eAttrType.FontStyleAttr;this.antialiasType=new NumberAttr(eImageAntialiasOp.EightPass);this.borderColor=new ColorAttr(0,0,0,1);this.borderWidth=new NumberAttr(2);this.color=new ColorAttr(1,1,1,1);this.effects=new StringAttr;this.font=new StringAttr("Arial");this.opacity=new NumberAttr(1);this.size=new NumberAttr(18);this.style=new StringAttr("Bold");this.registerAttribute(this.antialiasType,"antialiasType");this.registerAttribute(this.borderColor,"borderColor");this.registerAttribute(this.borderWidth,"borderWidth");this.registerAttribute(this.color,"color");this.registerAttribute(this.effects,"effects");this.registerAttribute(this.font,"font");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.size,"size");this.registerAttribute(this.style,"style")}function LabelStyleAttr(){StyleAttr.call(this);this.className="LabelStyleAttr";this.attrType=eAttrType.LabelStyleAttr;this.angle=new NumberAttr(0);this.backgroundColor=new ColorAttr(0,0,0,1);this.backgroundOpacity=new NumberAttr(0);this.fontStyle=new FontStyleAttr;this.format=new StringAttr("left");this.height=new NumberAttr(0);this.offset=new Vector2DAttr(0,0);this.padding=new NumberAttr(0);this.scale=new Vector3DAttr(1,1,1);this.textAlign=new StringAttr("middleRight");this.width=new NumberAttr(0);this.registerAttribute(this.angle,"angle");this.registerAttribute(this.backgroundColor,"backgroundColor");this.registerAttribute(this.backgroundOpacity,"backgroundOpacity");this.registerAttribute(this.fontStyle,"fontStyle");this.registerAttribute(this.format,"format");this.registerAttribute(this.height,"height");this.registerAttribute(this.offset,"offset");this.registerAttribute(this.padding,"padding");this.registerAttribute(this.scale,"scale");this.registerAttribute(this.textAlign,"textAlign");this.registerAttribute(this.width,"width")}function IconStyleAttr(){StyleAttr.call(this);this.className="IconStyleAttr";this.attrType=eAttrType.IconStyleAttr;this.alphaUrl=new StringAttr("");this.color=new ColorAttr(1,1,1,1);this.opacity=new NumberAttr(1);this.scale=new Vector3DAttr(1,1,1);this.url=new StringAttr("");this.registerAttribute(this.alphaUrl,"alphaUrl");this.registerAttribute(this.color,"color");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.scale,"scale");this.registerAttribute(this.url,"url")}function HTMLLabelStyleAttr(){StyleAttr.call(this);this.className="HTMLLabelStyleAttr";this.attrType=eAttrType.HTMLLabelStyleAttr;this.bgColor=new ColorAttr(1,1,1,1);this.height=new NumberAttr(0);this.html=new StringAttr;this.left=new NumberAttr(0);this.top=new NumberAttr(0);this.url=new StringAttr;this.width=new NumberAttr(0);this.registerAttribute(this.bgColor,"bgColor");this.registerAttribute(this.height,"height");this.registerAttribute(this.html,"html");this.registerAttribute(this.html,"userData");this.registerAttribute(this.left,"left");this.registerAttribute(this.top,"top");this.registerAttribute(this.url,"url");this.registerAttribute(this.width,"width")}function BalloonTipLabelStyleAttr(){StyleAttr.call(this);this.className="BalloonTipLabelStyleAttr";this.attrType=eAttrType.BalloonTipLabelStyleAttr;this.balloonOffset=new NumberAttr(100);this.bgColor=new ColorAttr(1,1,1,1);this.displayMode=new StringAttr("default");this.htmlLabelStyle=new HTMLLabelStyleAttr;this.text=new StringAttr;this.textColor=new ColorAttr(0,0,0,1);this.registerAttribute(this.balloonOffset,"balloonOffset");this.registerAttribute(this.bgColor,"bgColor");this.registerAttribute(this.displayMode,"displayMode");this.registerAttribute(this.htmlLabelStyle,"htmlLabelStyle");this.registerAttribute(this.text,"text");this.registerAttribute(this.textColor,"textColor")}function RenderableElementStyleAttr(){StyleAttr.call(this);this.className="RenderableElementStyleAttr";this.attrType=eAttrType.RenderableElementStyleAttr;this.hasFocus=new TernaryAttr(0);this.selected=new TernaryAttr(0);this.registerAttribute(this.hasFocus,"hasFocus");this.registerAttribute(this.selected,"selected")}function PlaneAttr(){AttributeContainer.call(this);this.className="PlaneAttr";this.attrType=eAttrType.PlaneAttr;this.point=new Vector3DAttr(0,0,0);this.normal=new Vector3DAttr(0,0,1);this.dot=new NumberAttr(0);this.registerAttribute(this.point,"point");this.registerAttribute(this.normal,"normal");this.registerAttribute(this.dot,"dot")}function ViewVolumeAttr(){AttributeContainer.call(this);this.className="ViewVolumeAttr";this.attrType=eAttrType.ViewVolumeAttr;this.left=new PlaneAttr;this.right=new PlaneAttr;this.top=new PlaneAttr;this.bottom=new PlaneAttr;this.near=new PlaneAttr;this.far=new PlaneAttr;this.registerAttribute(this.left,"left");this.registerAttribute(this.right,"right");this.registerAttribute(this.top,"top");this.registerAttribute(this.bottom,"bottom");this.registerAttribute(this.near,"near");this.registerAttribute(this.far,"far")}function SphereAttr(){AttributeContainer.call(this);this.className="SphereAttr";this.attrType=eAttrType.SphereAttr;this.sphere=new Sphere;this.center=new Vector3DAttr(0,0,0);this.radius=new NumberAttr(0);this.center.addModifiedCB(SphereAttr_CenterModifiedCB,this);this.radius.addModifiedCB(SphereAttr_RadiusModifiedCB,this);this.registerAttribute(this.center,"center");this.registerAttribute(this.radius,"radius")}function SphereAttr_CenterModifiedCB(e,t){t.sphere.center=e.getValueDirect()}function SphereAttr_RadiusModifiedCB(e,t){t.sphere.radius=e.getValueDirect()}function PhysicalPropertiesAttr(){AttributeContainer.call(this);this.className="PhysicalPropertiesAttr";this.attrType=eAttrType.PhysicalPropertiesAttr;this.mass=new NumberAttr(0);this.radius=new NumberAttr(0);this.registerAttribute(this.mass,"mass");this.registerAttribute(this.radius,"radius")}function setAttributeValue(e,t){switch(e.attrType){case eAttrType.BooleanAttr:{if(t=="false"||t=="0")e.setValueDirect(false);else e.setValueDirect(true)}break;case eAttrType.ColorAttr:case eAttrType.Matrix4x4Attr:case eAttrType.NumberArrayAttr:case eAttrType.Vector2DAttr:case eAttrType.Vector3DAttr:case eAttrType.ViewportAttr:{for(var n=0;n<t.length;n++){t[n]=parseFloat(t[n])}e.setValue(t)}break;case eAttrType.NumberAttr:{e.setValueDirect(parseFloat(t))}break;default:{e.setValue(t)}break}}function Agent(){AttributeContainer.call(this);this.className="Agent";this.running=false;this.name=new StringAttr("");this.enabled=new BooleanAttr(true);this.registerAttribute(this.name,"name");this.registerAttribute(this.enabled,"enabled")}function RayIntersectRecord(){this.distance=Infinity;this.pointModel=new Vector3D;this.pointWorld=new Vector3D;this.pointView=new Vector3D;this.triIndex=0}function RayIntersectParams(e,t,n,r,i,s,o,u,a){this.rayOrigin=e||new Vector3D;this.rayDir=t||new Vector3D;this.nearDistance=n||0;this.farDistance=r||0;this.worldMatrix=i||new Matrix4x4;this.viewMatrix=s||new Matrix4x4;this.worldViewMatrix=this.worldMatrix.multiply(this.viewMatrix);this.scale=o||0;this.doubleSided=u||false;this.clipPlanes=a||new Array;this.intersects=false;this.intersectRecord=new RayIntersectRecord}function Triangle(e,t,n,r,i,s,o,u,a){this.v0=new Vector3D(e,t,n);this.v1=new Vector3D(r,i,s);this.v2=new Vector3D(o,u,a)}function Sphere(){this.center=new Vector3D;this.radius=0;this.xcenter=new Vector3D;this.xradius=0}function Region(e,t,n,r,i,s){this.min=new Vector3D(e,t,n);this.max=new Vector3D(r,i,s);this.xpos=new Plane;this.xneg=new Plane;this.ypos=new Plane;this.yneg=new Plane;this.zpos=new Plane;this.zneg=new Plane;this.xpos_ypos_zpos=new Plane;this.xpos_ypos_zneg=new Plane;this.xpos_yneg_zpos=new Plane;this.xpos_yneg_zneg=new Plane;this.xneg_ypos_zpos=new Plane;this.xneg_ypos_zneg=new Plane;this.xneg_yneg_zpos=new Plane;this.xneg_yneg_zneg=new Plane;this.setPlanes()}function SphereTreeNode(){this.sphere=new Sphere;this.level=0;this.parent=null;this.children=[];this.triIndices=[]}function SphereHitRec(){this.target=null;this.testList=[]}function BoundingTree(){this.root=null;this.min=new Vector3D;this.max=new Vector3D;this.tris=[];this.visited=[]}function SphereTree(){BoundingTree.call(this)}function Octree(){SphereTree.call(this)}function rayPick(e,t,n,r,i,s,o,u,a,f){var l=new RayIntersectParams(t,n,r,i,s,o,u,a,f);e.rayIntersectsTree(l);if(l.intersects==true){return l.intersectRecord}return null}function Context(){this.clear()}function RenderContextMethodDesc(e,t){this.method=e;this.params=t}function DisplayListObj(e){this.renderContext=e;this.displayList=[]}function DL_ADD_METHOD_DESC(e,t,n){if(e){e.addMethodDesc(new RenderContextMethodDesc(t,n))}}function LightDesc(){this.type="";this.validMembersMask=0;this.position=new Vector3D;this.direction=new Vector3D;this.ambient=new Color;this.diffuse=new Color;this.specular=new Color;this.constantAttenuation=0;this.linearAttenuation=0;this.quadraticAttenuation=0;this.range=0;this.outerConeDegrees=0;this.innerConeDegrees=0;this.coneFalloff=0}function MaterialDesc(){this.validMembersMask=0;this.ambient=new Color;this.diffuse=new Color;this.specular=new Color;this.emissive=new Color;this.glossiness=0;this.copy=function(e){if(e){this.validMembersMask=e.validMembersMask;this.ambient.copy(e.ambient);this.diffuse.copy(e.diffuse);this.specular.copy(e.specular);this.emissive.copy(e.emissive);this.glossiness=e.glossiness}}}function RenderContext(e,t){this.valid=false;this.canvas=e;this.background=t;this.projectionMatrixStack=new MatrixStack(new Matrix4x4);this.modelViewMatrixStack=new MatrixStack(new Matrix4x4);this.matrixMode=RC_MODELVIEW;this.frontMaterial=new MaterialDesc;this.displayListObj=null;this.getDisplayList=function(){return this.displayListObj};this.setDisplayList=function(e){this.displayListObj=e};this.getFrontMaterial=function(){var e=new MaterialDesc;e.copy(this.frontMaterial);return e};this.setBackgroundImage=function(e,t,n){if(this.background){this.background.src=e;this.background.width=t;this.background.height=n}};this.setMatrixMode=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetMatrixMode,[e]);this.matrixMode=e};this.pushMatrix=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.PushMatrix,null);switch(this.matrixMode){case RC_MODELVIEW:{this.modelViewMatrixStack.push()}break;case RC_PROJECTION:{this.projectionMatrixStack.push()}break}};this.popMatrix=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.PopMatrix,null);switch(this.matrixMode){case RC_MODELVIEW:{this.modelViewMatrixStack.pop()}break;case RC_PROJECTION:{this.projectionMatrixStack.pop()}break}};this.loadMatrix=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.LoadMatrix,[e]);switch(this.matrixMode){case RC_MODELVIEW:{this.modelViewMatrixStack.loadMatrix(e)}break;case RC_PROJECTION:{this.projectionMatrixStack.loadMatrix(e)}break}};this.leftMultMatrix=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.LeftMultMatrix,[e]);switch(this.matrixMode){case RC_MODELVIEW:{this.modelViewMatrixStack.leftMultiply(e)}break;case RC_PROJECTION:{this.projectionMatrixStack.leftMultiply(e)}break}};this.rightMultMatrix=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.RightMultMatrix,[e]);switch(this.matrixMode){case RC_MODELVIEW:{this.modelViewMatrixStack.rightMultiply(e)}break;case RC_PROJECTION:{this.projectionMatrixStack.rightMultiply(e)}break}};this.setEnabled=function(e,t){if(t){this.enable(e)}else{this.disable(e)}}}function newRenderContext(e,t,n){var r=null;switch(e){case"webgl":{r=new webglRC(t,n)}break}return r.valid?r:null}function RenderStateRec(){this.projMatrix=new Matrix4x4;this.worldViewMatrix=new Matrix4x4;this.lightIndices=[];this.lightStates=[];this.lightMatrices=[];this.lightingEnabled=false;this.materialDesc=new MaterialDesc;this.fogEnabled=false;this.clipPlaneIndices=[];this.clipPlanes=[];this.clipPlaneMatrices=[];this.zBufferEnabled=false;this.zBufferWriteEnabled=false}function RenderState(e){this.renderContext=e;this.stateStack=new Stack;this.push=function(e){var t=this.getState(e);this.stateStack.push(t)};this.pop=function(e){if(this.stateStack.empty())return;var t=this.stateStack.top();this.setState(e,t);this.stateStack.pop()};this.getState=function(e){var t=new RenderStateRec;if(e&RENDERSTATE_TRANSFORM_BIT){t.projMatrix=this.renderContext.projectionMatrixStack.top();t.worldViewMatrix=this.renderContext.modelViewMatrixStack.top()}if(e&RENDERSTATE_LIGHTING_BIT){t.lightIndices=this.renderContext.getEnabledLights();for(var n=0;n<t.lightIndices.length;n++){var r=this.renderContext.getLight(t.lightIndices[n]);t.lightStates[n]=r.desc;t.lightMatrices[n]=r.matrix}t.lightingEnabled=this.renderContext.enabled(eRenderMode.Lighting)}if(e&RENDERSTATE_MATERIAL_BIT){t.materialDesc=this.renderContext.getFrontMaterial()}if(e&RENDERSTATE_FOG_BIT){}if(e&RENDERSTATE_CLIP_PLANE_BIT){}if(e&RENDERSTATE_ZBUFFER_BIT){t.zBufferEnabled=this.renderContext.enabled(eRenderMode.DepthTest);t.zBufferWriteEnabled=this.renderContext.enabled(eRenderMode.DepthBufferWrite)}return t};this.setState=function(e,t){if(e&RENDERSTATE_TRANSFORM_BIT){this.renderContext.projectionMatrixStack.loadMatrix(t.projMatrix);this.renderContext.applyProjectionTransform();this.renderContext.modelViewMatrixStack.loadMatrix(t.worldViewMatrix);this.renderContext.applyModelViewTransform()}if(e&RENDERSTATE_LIGHTING_BIT){for(var n=0;n<t.lightIndices.length;n++){this.renderContext.modelViewMatrixStack.push(t.lightMatrices[n]);this.renderContext.setLight(t.lightIndices[n],t.lightStates[n]);this.renderContext.modelViewMatrixStack.pop()}this.renderContext.setEnabledLights(t.lightIndices);if(t.lightingEnabled){this.renderContext.enable(eRenderMode.Lighting)}else{this.renderContext.disable(eRenderMode.Lighting)}}if(e&RENDERSTATE_MATERIAL_BIT){this.renderContext.setFrontMaterial(t.materialDesc)}if(e&RENDERSTATE_FOG_BIT){}if(e&RENDERSTATE_CLIP_PLANE_BIT){}if(e&RENDERSTATE_ZBUFFER_BIT){if(t.zBufferEnabled){this.renderContext.enable(eRenderMode.DepthTest)}else{this.renderContext.disable(eRenderMode.depthTest)}if(t.zBufferWriteEnabled){this.renderContext.enable(eRenderMode.DepthBufferWrite)}else{this.renderContext.disable(eRenderMode.DepthBufferWrite)}}}}function VertexBuffer(){this.vertices=new Array;this.normals=new Array;this.colors=new Array;this.vertexCount=0;this.numVerticesPerPrimitive=0}function TextureObject(){}function gl_LightSourceParameters(){var e;var t;var n;var r;var i;var s;var o;var u;var a;var f;var l}function gl_MaterialParameters(){var e;var t;var n;var r;var i}function webglRC(e,t){RenderContext.call(this,e,t);var n=getWebGLContext(e,false);if(!n)return;n.clearColor(0,0,0,t?0:1);n.clearDepth(1);n.clearStencil(0);n.enable(n.DEPTH_TEST);n.depthFunc(n.LEQUAL);n.disable(n.STENCIL_TEST);n.frontFace(n.CW);n.viewport(0,0,e.width,e.height);n.enable(n.CULL_FACE);n.cullFace(n.BACK);var r=getShaders(n,eShaderType.VertexLighting);if(!r.vertex||!r.fragment)return;var i=getProgram(n,r.vertex,r.fragment);if(!i)return;this.valid=true;var s=[];var o=[];var u=[];this.applyModelViewTransform=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.ApplyModelViewTransform,null);n.uniformMatrix4fv(i.modelViewMatrix,false,new Float32Array(this.modelViewMatrixStack.top().flatten()));var e=new Matrix4x4;e.loadMatrix(this.modelViewMatrixStack.top());e.invert();e.transpose();n.uniformMatrix4fv(i.normalMatrix,false,new Float32Array(e.flatten()))};this.applyProjectionTransform=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.ApplyProjectionTransform,null);n.uniformMatrix4fv(i.projectionMatrix,false,new Float32Array(this.projectionMatrixStack.top().flatten()))};this.clear=function(e){e=e||RC_COLOR_BUFFER_BIT|RC_DEPTH_BUFFER_BIT;if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.Clear,[e]);n.clear((e&RC_COLOR_BUFFER_BIT?n.COLOR_BUFFER_BIT:0)|(e&RC_DEPTH_BUFFER_BIT?n.DEPTH_BUFFER_BIT:0)|(e&RC_STENCIL_BUFFER_BIT?n.STENCIL_BUFFER_BIT:0))};this.clearColor=function(e,t,r,i){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.ClearColor,[e,t,r,i]);n.clearColor(e,t,r,i)};this.clearDepth=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.ClearDepth,[e]);n.clearDepth(e)};this.clearStencil=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.ClearStencil,[e]);n.clearStencil(e)};this.createVertexBuffer=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.CreateVertexBuffer,[e]);return new webglVB(this,n,i,e)};this.createTextureObject=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.CreateTextureObject,null);return new webglTO(this,n,i)};this.disable=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.Disable,[e]);switch(e){case eRenderMode.AlphaBlend:n.disable(n.BLEND);break;case eRenderMode.CullBackFace:n.disable(n.CULL_FACE);break;case eRenderMode.DepthBufferWrite:n.depthMask(false);break;case eRenderMode.DepthTest:n.disable(n.DEPTH_TEST);break;case eRenderMode.Lighting:n.uniform1i(i.lightingEnabled,false);break;case eRenderMode.StencilTest:n.disable(n.STENCIL_TEST);break}};this.enable=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.Enable,[e]);switch(e){case eRenderMode.AlphaBlend:n.enable(n.BLEND);break;case eRenderMode.CullBackFace:n.enable(n.CULL_FACE);break;case eRenderMode.DepthBufferWrite:n.depthMask(true);break;case eRenderMode.DepthTest:n.enable(n.DEPTH_TEST);break;case eRenderMode.Lighting:n.uniform1i(i.lightingEnabled,true);break;case eRenderMode.StencilTest:n.enable(n.STENCIL_TEST);break}};this.enabled=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.Enabled,[e]);var t=false;switch(e){case eRenderMode.AlphaBlend:t=n.getParameter(n.BLEND);break;case eRenderMode.CullBackFace:t=n.getParameter(n.CULL_FACE);break;case eRenderMode.DepthBufferWrite:t=n.getParameter(n.DEPTH_WRITEMASK);break;case eRenderMode.DepthTest:t=n.getParameter(n.DEPTH_TEST);break;case eRenderMode.Lighting:t=n.getUniform(i,i.lightingEnabled);break;case eRenderMode.StencilTest:t=n.getParameter(n.STENCIL_TEST);break}return t};this.enableLight=function(e,t){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.EnableLight,[e,t]);n.uniform1i(i.lightSource[e].enabled,t);u[e]=t};this.enableTextureStage=function(e,t){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.EnableTextureStage,[e,t]);n.uniform1i(i.textureStageEnabled[e],t)};this.finish=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.Finish,null);n.finish()};this.getEnabledLights=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.GetEnabledLights,null);var e=[];for(var t=0;t<u.length;t++){if(u[t]){e.push(t)}}return e};this.getGlobalIllumination=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.GetGlobalIllumination,null);var e=n.getUniform(i,i.globalAmbientLight);return{r:e[0],g:e[1],b:e[2],a:e[3]}};this.getLight=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.GetLight,[e]);return{desc:s[e],matrix:o[e]}};this.getMaxLightCount=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.GetMaxLightCount,null);return gl_MaxLights};this.getMaxTextureStages=function(){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.GetMaxTextureStages,null);return gl_MaxTextureStages};this.perspectiveMatrixLH=function(e,t,n,r,i,s){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.PerspectiveMatrixLH,[e,t,n,r,i,s]);var o=new Matrix4x4;var u=(t+e)/(t-e);var a=(n+r)/(n-r);var f=(s+i)/(s-i);var l=2*s*i/(s-i);o._11=2*i/(t-e);o._13=u;o._22=2*i/(n-r);o._23=a;o._33=f;o._34=1;o._43=-l;o._44=0;return o};this.orthographicMatrixLH=function(e,t,n,r,i,s){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.OrthographicMatrixLH,[e,t,n,r,i,s]);var o=new Matrix4x4;o._11=2/(t-e);o._22=2/(n-r);o._33=-2/(s-i);o._41=-((t+e)/(t-e));o._42=-((n+r)/(n-r));o._43=-((s+i)/(s-i))/2;return o};this.readFrameBuffer=function(e,t,r,i){var s=new Uint8Array(r*i*4);n.readPixels(e,t,r,i,n.RGBA,n.UNSIGNED_BYTE,s);return s};this.setBlendColor=function(e,t,r,i){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetBlendColor,[e,t,r,i]);n.blendColor(e,t,r,i)};this.setBlendFactor=function(e,t){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetBlendFactor,[e,t]);var r;switch(e){case RC_ZERO:r=n.ZERO;break;case RC_ONE:r=n.ONE;break;case RC_SRC_COLOR:r=n.SRC_COLOR;break;case RC_SRC_ALPHA:r=n.SRC_ALPHA;break;case RC_ONE_MINUS_SRC_COLOR:r=n.ONE_MINUS_SRC_COLOR;break;case RC_ONE_MINUS_SRC_ALPHA:r=n.ONE_MINUS_SRC_ALPHA;break;case RC_DEST_COLOR:r=n.DEST_COLOR;break;case RC_DEST_ALPHA:r=n.DEST_ALPHA;break;case RC_ONE_MINUS_DEST_COLOR:r=n.ONE_MINUS_DEST_COLOR;break;case RC_ONE_MINUS_DEST_ALPHA:r=n.ONE_MINUS_DEST_ALPHA;break}var i;switch(t){case RC_ZERO:i=n.ZERO;break;case RC_ONE:i=n.ONE;break;case RC_SRC_COLOR:i=n.SRC_COLOR;break;case RC_SRC_ALPHA:i=n.SRC_ALPHA;break;case RC_ONE_MINUS_SRC_COLOR:i=n.ONE_MINUS_SRC_COLOR;break;case RC_ONE_MINUS_SRC_ALPHA:i=n.ONE_MINUS_SRC_ALPHA;break;case RC_DEST_COLOR:i=n.DEST_COLOR;break;case RC_DEST_ALPHA:i=n.DEST_ALPHA;break;case RC_ONE_MINUS_DEST_COLOR:i=n.ONE_MINUS_DEST_COLOR;break;case RC_ONE_MINUS_DEST_ALPHA:i=n.ONE_MINUS_DEST_ALPHA;break}n.blendFunc(r,i)};this.setDepthFunc=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetDepthFunc,[e]);var t;switch(e){case eDepthFunc.Never:t=n.NEVER;break;case eDepthFunc.Less:t=n.LESS;break;case eDepthFunc.LessEqual:t=n.LEQUAL;break;case eDepthFunc.Equal:t=n.EQUAL;break;case eDepthFunc.NotEqual:t=n.NOTEQUAL;break;case eDepthFunc.GreaterEqual:t=n.GEQUAL;break;case eDepthFunc.Greater:t=n.GREATER;break;case eDepthFunc.Always:t=n.ALWAYS;break}n.depthFunc(t)};this.setEnabledLights=function(e){if(this.displayListObj)if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetEnabledLights,[e]);for(var t=0;t<u.length;t++){if(u[t]){this.enableLight(t,false)}}for(var t=0;t<e.length;t++){this.enableLight(e[t],true)}};this.setFrontMaterial=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetFrontMaterial,[e]);if(e.validMembersMask&MATERIALDESC_AMBIENT_BIT){n.uniform4fv(i.frontMaterial.ambient,new Float32Array(e.ambient.v()));this.frontMaterial.ambient=e.ambient}if(e.validMembersMask&MATERIALDESC_DIFFUSE_BIT){n.uniform4fv(i.frontMaterial.diffuse,new Float32Array(e.diffuse.v()));this.frontMaterial.diffuse=e.diffuse}if(e.validMembersMask&MATERIALDESC_SPECULAR_BIT){n.uniform4fv(i.frontMaterial.specular,new Float32Array(e.specular.v()));this.frontMaterial.specular=e.specular}if(e.validMembersMask&MATERIALDESC_EMISSIVE_BIT){this.frontMaterial.emissive=e.emissive}if(e.validMembersMask&MATERIALDESC_GLOSSINESS_BIT){n.uniform1f(i.frontMaterial.shininess,clamp(e.glossiness*128,5,128));this.frontMaterial.glossiness=e.glossiness}this.frontMaterial.validMembersMask|=e.validMembersMask};this.setGlobalIllumination=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetGlobalIllumination,[e]);var t=[e.r,e.g,e.b,e.a];n.uniform4fv(i.globalAmbientLight,new Float32Array(t))};this.setLight=function(e,t){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetLight,[e,t]);var r=this.modelViewMatrixStack.top();if(t.validMembersMask&LIGHTDESC_POSITION_BIT){var u=r.transformw(t.position.x,t.position.y,t.position.z,1);var a=[u.x,u.y,u.z,u.w];n.uniform4fv(i.lightSource[e].position,new Float32Array(a))}if(t.validMembersMask&LIGHTDESC_DIRECTION_BIT){var f=r.transform(t.direction.x,t.direction.y,t.direction.z,0);var a=[f.x,f.y,f.z,0];switch(t.type){case"directional":{a[0]*=-1;a[1]*=-1;a[2]*=-1;n.uniform4fv(i.lightSource[e].position,new Float32Array(a))}break;case"spot":{n.uniform4fv(i.lightSource[e].spotDirection,new Float32Array(a))}break}}if(t.validMembersMask&LIGHTDESC_AMBIENT_BIT){n.uniform4fv(i.lightSource[e].ambient,new Float32Array(t.ambient.v()))}if(t.validMembersMask&LIGHTDESC_DIFFUSE_BIT){n.uniform4fv(i.lightSource[e].diffuse,new Float32Array(t.diffuse.v()))}if(t.validMembersMask&LIGHTDESC_SPECULAR_BIT){n.uniform4fv(i.lightSource[e].specular,new Float32Array(t.specular.v()))}if(t.validMembersMask&LIGHTDESC_CONSTANT_ATT_BIT){n.uniform1f(i.lightSource[e].constantAttenuation,t.constantAttenuation)}if(t.validMembersMask&LIGHTDESC_LINEAR_ATT_BIT){n.uniform1f(i.lightSource[e].linearAttenuation,t.linearAttenuation)}if(t.validMembersMask&LIGHTDESC_QUADRATIC_ATT_BIT){n.uniform1f(i.lightSource[e].quadraticAttenuation,t.quadraticAttenuation)}if(t.validMembersMask&LIGHTDESC_RANGE_BIT){}if(t.validMembersMask&LIGHTDESC_OUTER_CONE_DEG_BIT){var l=t.outerConeDegrees;if(l>90){l=180}n.uniform1f(i.lightSource[e].spotCutoff,l);n.uniform1f(i.lightSource[e].spotExponent,0)}if(t.validMembersMask&LIGHTDESC_INNER_CONE_DEG_BIT){}if(t.validMembersMask&LIGHTDESC_CONE_FALLOFF_BIT){}s[e]=t;o[e]=r};this.setShadeModel=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetShadeModel,[e])};this.setStencilFunc=function(e,t,r){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetStencilFunc,[e,t,r]);var i;switch(e){case eDepthFunc.Never:i=n.NEVER;break;case eDepthFunc.Less:i=n.LESS;break;case eDepthFunc.LessEqual:i=n.LEQUAL;break;case eDepthFunc.Equal:i=n.EQUAL;break;case eDepthFunc.NotEqual:i=n.NOTEQUAL;break;case eDepthFunc.GreaterEqual:i=n.GEQUAL;break;case eDepthFunc.Greater:i=n.GREATER;break;case eDepthFunc.Always:i=n.ALWAYS;break}n.stencilFunc(i,t,r)};this.setStencilMask=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetStencilMask,[e]);n.stencilMask(e)};this.setStencilOp=function(e,t,r){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetStencilOp,[e,t,r]);var i;switch(e){case eStencilOp.Keep:i=n.KEEP;break;case eStencilOp.Replace:i=n.REPLACE;break;case eStencilOp.Increment:i=n.INCR;break;case eStencilOp.Decrement:i=n.DECR;break;case eStencilOp.Invert:i=n.INVERT;break;case eStencilOp.Zero:i=n.ZERO;break}switch(t){case eStencilOp.Keep:gl_ZFail=n.KEEP;break;case eStencilOp.Replace:gl_ZFail=n.REPLACE;break;case eStencilOp.Increment:gl_ZFail=n.INCR;break;case eStencilOp.Decrement:gl_ZFail=n.DECR;break;case eStencilOp.Invert:gl_ZFail=n.INVERT;break;case eStencilOp.Zero:gl_ZFail=n.ZERO;break}switch(r){case eStencilOp.Keep:gl_ZPass=n.KEEP;break;case eStencilOp.Replace:gl_ZPass=n.REPLACE;break;case eStencilOp.Increment:gl_ZPass=n.INCR;break;case eStencilOp.Decrement:gl_ZPass=n.DECR;break;case eStencilOp.Invert:gl_ZPass=n.INVERT;break;case eStencilOp.Zero:gl_ZPass=n.ZERO;break}n.stencilOp(i,gl_ZFail,gl_ZPass)};this.setTextureBlendFactor=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetTextureBlendFactor,[e]);var t=[this.frontMaterial.diffuse.r,this.frontMaterial.diffuse.g,this.frontMaterial.diffuse.b,e];n.uniform4fv(i.frontMaterial.diffuse,new Float32Array(t))};this.setTextureBlendOp=function(e){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetTextureBlendOp,[e]);n.uniform1i(i.textureBlendOp,e)};this.setTextureColorMask=function(e,t,r,s){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetTextureColorMask,[e,t,r,s]);var o=[e,t,r,s];n.uniform4fv(i.textureColorMask,new Float32Array(o))};this.setViewport=function(e,t,r,i){if(this.displayListObj)DL_ADD_METHOD_DESC(this.displayListObj,eRenderContextMethod.SetViewport,[e,t,r,i]);n.viewport(e,t,r,i)}}function getWebGLContext(e,t){var n=null;try{if(t){n=WebGLDebugUtils.makeDebugContext(e.getContext("experimental-webgl",{stencil:true,antialias:false,preserveDrawingBuffer:true}))}else{n=e.getContext("webgl",{stencil:true,antialias:true,preserveDrawingBuffer:true})||e.getContext("experimental-webgl",{stencil:true,antialias:true,preserveDrawingBuffer:true})}}catch(r){}if(!n){var i=document.createElement("div");i.innerHTML="This demo requires a WebGL-enabled browser.";var s=e.parentNode;s.replaceChild(i,e)}var o=n.getParameter(n.STENCIL_BITS);return n}function getProgram(e,t,n){var r=e.createProgram();if(!r)return null;e.attachShader(r,t);e.attachShader(r,n);e.linkProgram(r);if(!e.getProgramParameter(r,e.LINK_STATUS)){alert(e.getProgramInfoLog(r));return null}e.useProgram(r);r.vertexPositionAttribute=e.getAttribLocation(r,"aVertexPosition");e.enableVertexAttribArray(r.vertexPositionAttribute);r.vertexNormalAttribute=e.getAttribLocation(r,"aVertexNormal");e.enableVertexAttribArray(r.vertexNormalAttribute);r.vertexColorAttribute=e.getAttribLocation(r,"aVertexColor");e.enableVertexAttribArray(r.vertexColorAttribute);r.textureCoordAttribute=new Array(gl_MaxTextureStages);for(var i=0;i<gl_MaxTextureStages;i++){r.textureCoordAttribute[i]=e.getAttribLocation(r,"aTextureCoord"+i);e.enableVertexAttribArray(r.textureCoordAttribute[i])}r.projectionMatrix=e.getUniformLocation(r,"uProjectionMatrix");r.modelViewMatrix=e.getUniformLocation(r,"uModelViewMatrix");r.normalMatrix=e.getUniformLocation(r,"uNormalMatrix");r.globalAmbientLight=e.getUniformLocation(r,"uGlobalAmbientLight");r.lightSource=new Array(gl_MaxLights);for(var i=0;i<gl_MaxLights;i++){r.lightSource[i]=new gl_LightSourceParameters;r.lightSource[i].enabled=e.getUniformLocation(r,"uLightSource_enabled["+i+"]");r.lightSource[i].ambient=e.getUniformLocation(r,"uLightSource_ambient["+i+"]");r.lightSource[i].diffuse=e.getUniformLocation(r,"uLightSource_diffuse["+i+"]");r.lightSource[i].specular=e.getUniformLocation(r,"uLightSource_specular["+i+"]");r.lightSource[i].position=e.getUniformLocation(r,"uLightSource_position["+i+"]");r.lightSource[i].spotDirection=e.getUniformLocation(r,"uLightSource_spotDirection["+i+"]");r.lightSource[i].spotExponent=e.getUniformLocation(r,"uLightSource_spotExponent["+i+"]");r.lightSource[i].spotCutoff=e.getUniformLocation(r,"uLightSource_spotCutoff["+i+"]");r.lightSource[i].constantAttenuation=e.getUniformLocation(r,"uLightSource_constantAttenuation["+i+"]");r.lightSource[i].linearAttenuation=e.getUniformLocation(r,"uLightSource_linearAttenuation["+i+"]");r.lightSource[i].quadraticAttenuation=e.getUniformLocation(r,"uLightSource_quadraticAttenuation["+i+"]");e.uniform1i(r.lightSource[i].enabled,0)}r.frontMaterial=new gl_MaterialParameters;r.frontMaterial.ambient=e.getUniformLocation(r,"uFrontMaterial_ambient");r.frontMaterial.diffuse=e.getUniformLocation(r,"uFrontMaterial_diffuse");r.frontMaterial.specular=e.getUniformLocation(r,"uFrontMaterial_specular");r.frontMaterial.emission=e.getUniformLocation(r,"uFrontMaterial_emission");r.frontMaterial.shininess=e.getUniformLocation(r,"uFrontMaterial_shininess");r.textureSamplerColor=new Array(gl_MaxTextureStages);r.textureSamplerAlpha=new Array(gl_MaxTextureStages);r.textureStageEnabled=new Array(gl_MaxTextureStages);for(var i=0;i<gl_MaxTextureStages;i++){r.textureSamplerColor[i]=e.getUniformLocation(r,"uTextureSamplerColor["+i+"]");r.textureSamplerAlpha[i]=e.getUniformLocation(r,"uTextureSamplerAlpha["+i+"]");r.textureStageEnabled[i]=e.getUniformLocation(r,"uTextureStageEnabled["+i+"]")}r.textureBlendOp=e.getUniformLocation(r,"uTextureBlendOp");r.textureColorMask=e.getUniformLocation(r,"uTextureColorMask");var s=[2,2,2,2];e.uniform4fv(r.textureColorMask,new Float32Array(s));r.lightingEnabled=e.getUniformLocation(r,"uLightingEnabled");r.texturesEnabled=e.getUniformLocation(r,"uTexturesEnabled");e.uniform1i(r.lightingEnabled,1);e.uniform1i(r.texturesEnabled,1);e.uniform1i(r.textureStageEnabled[0],0);e.uniform1i(r.textureStageEnabled[1],0);return r}function webglVB_uvb(e,t){this.buffer=e;this.coords=t}function webglVB(e,t,n,r){VertexBuffer.call(this);this.numVerticesPerPrimitive=r;var e=e;var t=t;var n=n;var i=t.createBuffer();var s=null;var o=null;var u=t.createBuffer();var a=new Array(gl_MaxTextureStages);var f=t.createBuffer();var l=[];var c=0;this.setPrimitiveType=function(n){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetPrimitiveType,[this,n]);switch(n){case RC_POINTS:c=t.POINTS;break;case RC_LINES:c=t.LINES;break;case RC_LINE_LOOP:c=t.LINE_LOOP;break;case RC_LINE_STRIP:c=t.LINE_STRIP;break;case RC_TRIANGLES:c=t.TRIANGLES;break;case RC_TRIANGLE_STRIP:c=t.TRIANGLE_STRIP;break;case RC_TRIANGLE_FAN:c=t.TRIANGLE_FAN;break}};this.setVertices=function(n){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetVertices,[this,n]);if(n.length){t.bindBuffer(t.ARRAY_BUFFER,i);t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW);this.vertexCount=n.length/this.numVerticesPerPrimitive;t.bindBuffer(t.ARRAY_BUFFER,u);t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.vertexCount*4),t.STATIC_DRAW);t.bindBuffer(t.ARRAY_BUFFER,f);t.bufferData(t.ARRAY_BUFFER,new Float32Array(new Array(this.vertexCount*2)),t.STATIC_DRAW)}this.vertices=n};this.setNormals=function(n){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetNormals,[this,n]);if(n.length){if(s==null){s=t.createBuffer()}t.bindBuffer(t.ARRAY_BUFFER,s);t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)}this.normals=n};this.setColors=function(n){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetColors,[this,n]);if(n.length){if(o==null){o=t.createBuffer()}t.bindBuffer(t.ARRAY_BUFFER,o);t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)}this.colors=n};this.setUVCoords=function(n,r){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetUVCoords,[this,n,r]);l[n]=new webglVB_uvb(t.createBuffer(),r.slice());for(var i=1;i<l[n].coords.length;i+=2){l[n].coords[i]=1-l[n].coords[i]}};this.setTextureStage=function(r,i,s,o,u,f){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_SetTextureStage,[this,r,i,s,o,u,f]);switch(r){case 0:t.activeTexture(t.TEXTURE0);break;case 1:t.activeTexture(t.TEXTURE1);break}t.bindTexture(t.TEXTURE_2D,i.texture);t.uniform1i(n.textureSamplerColor[r],r);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,s);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,o);if(l[i]){t.bindBuffer(t.ARRAY_BUFFER,l[i].buffer);t.bufferData(t.ARRAY_BUFFER,new Float32Array(l[i].coords),t.STATIC_DRAW);a[r]=l[i].buffer}};this.draw=function(){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.VB_Draw,[this]);if(this.vertices.length){t.bindBuffer(t.ARRAY_BUFFER,i);t.vertexAttribPointer(n.vertexPositionAttribute,this.numVerticesPerPrimitive,t.FLOAT,false,0,0);if(s){t.bindBuffer(t.ARRAY_BUFFER,s);t.vertexAttribPointer(n.vertexNormalAttribute,3,t.FLOAT,false,0,0)}if(o)t.bindBuffer(t.ARRAY_BUFFER,o);else t.bindBuffer(t.ARRAY_BUFFER,u);t.vertexAttribPointer(n.vertexColorAttribute,4,t.FLOAT,false,0,0);for(var r=0;r<gl_MaxTextureStages;r++){if(a[r])t.bindBuffer(t.ARRAY_BUFFER,a[r]);else t.bindBuffer(t.ARRAY_BUFFER,f);t.vertexAttribPointer(n.textureCoordAttribute[r],2,t.FLOAT,false,0,0)}t.drawArrays(c,0,this.vertexCount)}}}function webglTO(e,t,n){TextureObject.call(this);var e=e;var t=t;var n=n;this.texture=t.createTexture();this.setImage=function(n,r,i){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.TO_SetImage,[this,n,r,i]);var s;switch(r){case ePixelFormat.R8G8B8:case ePixelFormat.B8G8R8:case ePixelFormat.X8G8R8:s=t.RGB;break;case ePixelFormat.R8G8B8A8:case ePixelFormat.B8G8R8A8:case ePixelFormat.A8R8G8B8:case ePixelFormat.A8B8G8R8:case ePixelFormat.X8X8X8X8:s=t.RGBA;break;case ePixelFormat.A8:s=t.ALPHA;break;default:return;break}var o;switch(i){case eImageFormat.RGB:o=t.RGB;break;case eImageFormat.RGBA:o=t.RGBA;break;case eImageFormat.Alpha:o=t.ALPHA;break;case eImageFormat.Luminance:o=t.LUMINANCE;break;case eImageFormat.Luminance_Alpha:o=t.LUMINANCE_ALPHA;break;default:return;break}if(!isPowerOfTwo(n.width)||!isPowerOfTwo(n.height)){var u=document.createElement("canvas");u.width=nextHighestPowerOfTwo(n.width);u.height=nextHighestPowerOfTwo(n.height);var a=u.getContext("2d");a.drawImage(n,0,0,n.width,n.height,0,0,u.width,u.height);n=u}t.bindTexture(t.TEXTURE_2D,this.texture);t.texImage2D(t.TEXTURE_2D,0,s,o,t.UNSIGNED_BYTE,n);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.generateMipmap(t.TEXTURE_2D);t.bindTexture(t.TEXTURE_2D,null)};this.setImageData=function(n,r,i,s,o){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.TO_SetImageData,[this,n,r,i,s,o]);var u;switch(i){case ePixelFormat.R8G8B8:case ePixelFormat.B8G8R8:case ePixelFormat.X8G8R8:u=t.RGB;break;case ePixelFormat.R8G8B8A8:case ePixelFormat.B8G8R8A8:case ePixelFormat.A8R8G8B8:case ePixelFormat.A8B8G8R8:case ePixelFormat.X8X8X8X8:u=t.RGBA;break;case ePixelFormat.A8:u=t.ALPHA;break;default:return;break}var a;switch(s){case eImageFormat.RGB:a=t.RGB;break;case eImageFormat.RGBA:a=t.RGBA;break;case eImageFormat.Alpha:a=t.ALPHA;break;case eImageFormat.Luminance:a=t.LUMINANCE;break;case eImageFormat.Luminance_Alpha:a=t.LUMINANCE_ALPHA;break;default:return;break}t.bindTexture(t.TEXTURE_2D,this.texture);t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,a,t.UNSIGNED_BYTE,new Uint8Array(o));t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.generateMipmap(t.TEXTURE_2D);t.bindTexture(t.TEXTURE_2D,null)};this.setImageWithCanvas=function(e){var n=e;if(!isPowerOfTwo(e.width)||!isPowerOfTwo(e.height)){n=document.createElement("canvas");n.width=nextHighestPowerOfTwo(e.width);n.height=nextHighestPowerOfTwo(e.height);var r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height)}t.bindTexture(t.TEXTURE_2D,this.texture);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.generateMipmap(t.TEXTURE_2D);t.bindTexture(t.TEXTURE_2D,null)};this.setVideo=function(n){if(e.displayListObj)DL_ADD_METHOD_DESC(e.displayListObj,eRenderContextMethod.TO_SetVideo,[this,n]);t.bindTexture(t.TEXTURE_2D,this.texture);switch(getBrowserName()){case"Chrome":case"Firefox":t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);break;default:t.texImage2D(t.TEXTURE_2D,0,n,false);break}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST);t.bindTexture(t.TEXTURE_2D,null)}}function isPowerOfTwo(e){return(e&e-1)==0}function nextHighestPowerOfTwo(e){--e;for(var t=1;t<32;t<<=1){e=e|e>>t}return e+1}function getShaders(e,t){var n=null;var r=null;switch(t){case eShaderType.VertexLighting:{n=["#ifdef GL_ES","precision highp float;","#endif","","vec4 gAmbient;","vec4 gDiffuse;","vec4 gSpecular;","","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec4 aVertexColor;","attribute vec2 aTextureCoord0;","attribute vec2 aTextureCoord1;","","uniform mat4 uProjectionMatrix;","uniform mat4 uModelViewMatrix;","uniform mat4 uNormalMatrix;","","uniform vec4 uGlobalAmbientLight;","","uniform int uLightSource_enabled["+gl_MaxLights+"];","uniform vec4 uLightSource_ambient["+gl_MaxLights+"];","uniform vec4 uLightSource_diffuse["+gl_MaxLights+"];","uniform vec4 uLightSource_specular["+gl_MaxLights+"];","uniform vec4 uLightSource_position["+gl_MaxLights+"];","uniform vec4 uLightSource_halfVector["+gl_MaxLights+"];","uniform vec4 uLightSource_spotDirection["+gl_MaxLights+"];","uniform float uLightSource_spotExponent["+gl_MaxLights+"];","uniform float uLightSource_spotCutoff["+gl_MaxLights+"];","uniform float uLightSource_spotCosCutoff["+gl_MaxLights+"];","uniform float uLightSource_constantAttenuation["+gl_MaxLights+"];","uniform float uLightSource_linearAttenuation["+gl_MaxLights+"];","uniform float uLightSource_quadraticAttenuation["+gl_MaxLights+"];","","uniform vec4 uFrontMaterial_ambient;","uniform vec4 uFrontMaterial_diffuse;","uniform vec4 uFrontMaterial_specular;","uniform vec4 uFrontMaterial_emission;","uniform float uFrontMaterial_shininess;","","uniform int uLightingEnabled;","","varying vec4 vLightingFactor;","varying vec2 vTextureCoord["+gl_MaxTextureStages+"];","","void directionalLight(vec4 position, vec4 ambient, vec4 diffuse, vec4 specular, vec3 normal, vec3 halfVector)","{","   vec3 lightDir;","   float nDotL;","   float nDotHV;","   float pf;","","   lightDir = normalize(vec3(position));","","   nDotL = max(dot(normal, lightDir), 0.0);","   if (nDotL == 0.0)","   {","       pf = 0.0;","   }","   else","   {","       nDotHV = max(0.0, dot(normal, halfVector));","       pf = pow(nDotHV, uFrontMaterial_shininess);","   }","","   gAmbient  += ambient * uFrontMaterial_ambient;","   gDiffuse  += diffuse * uFrontMaterial_diffuse * nDotL;","   gSpecular += specular * uFrontMaterial_specular * pf;","}","","void pointLight(vec4 position, float constantAttenuation, float linearAttenuation, float quadraticAttenuation,","                vec4 ambient, vec4 diffuse, vec4 specular, vec3 normal, vec3 eye, vec3 vPosition)","{","   float nDotL;","   float nDotHV;","   float pf;","   float attenuation;","   float d;","   vec3  L;","   vec3  halfVector;","","","   L = vec3(position) - vPosition;","","","   d = length(L);","","","   L = normalize(L);","","","   attenuation = 1.0 / (constantAttenuation +","      linearAttenuation * d +","      quadraticAttenuation * d * d);","","   nDotL = max(0.0, dot(normal, L));","   nDotHV = max(0.0, dot(normal, normalize(L + eye)));","","   if (nDotL == 0.0)","   {","       pf = 0.0;","   }","   else","   {","       pf = pow(nDotHV, uFrontMaterial_shininess);","   }","","   gAmbient  += ambient * uFrontMaterial_ambient * attenuation;","   gDiffuse  += diffuse * uFrontMaterial_diffuse * nDotL * attenuation;","   gSpecular += specular * uFrontMaterial_specular * pf * attenuation;","}","","void main()","{","   vec4 vertexPosition;","   vec4 transformedNormal;","   vec4 viewPosition;","   vec4 viewDirection;","","   vertexPosition = uModelViewMatrix * vec4(aVertexPosition, 1);","","   if (uLightingEnabled != 0)","   {","       transformedNormal = normalize(uNormalMatrix * vec4(aVertexNormal, 0));","       viewPosition = uModelViewMatrix * vec4(0, 0, 0, 1);","       viewDirection = normalize(-viewPosition);","       gAmbient = vec4(0, 0, 0, 0);","       gDiffuse = vec4(0, 0, 0, 0);","       gSpecular = vec4(0, 0, 0, 0);","","       for (int i=0; i < "+gl_MaxLights+"; i++)","       {","           if (uLightSource_enabled[i] != 0)","           {","               if (uLightSource_position[i][3] == 0.0)","               {","                   directionalLight(uLightSource_position[i], uLightSource_ambient[i],","                       uLightSource_diffuse[i], uLightSource_specular[i],","                       normalize(vec3(transformedNormal)),","                       normalize(vec3(viewDirection) + vec3(uLightSource_position[i])));","               }","               else if (uLightSource_spotCutoff[i] > 90.0)","               {","                   pointLight(uLightSource_position[i], uLightSource_constantAttenuation[i],","                       uLightSource_linearAttenuation[i], uLightSource_quadraticAttenuation[i],","                       uLightSource_ambient[i], uLightSource_diffuse[i], uLightSource_specular[i],","                       normalize(vec3(transformedNormal)),","                       vec3(viewDirection), vec3(vertexPosition));","               }","               else","               {","               }","           }","       }","","       vLightingFactor  = uGlobalAmbientLight * uFrontMaterial_ambient;","       vLightingFactor += gAmbient + gDiffuse + gSpecular;","       vLightingFactor.a = uFrontMaterial_ambient.a / 3.0 + ","                           uFrontMaterial_diffuse.a / 3.0 + ","                           uFrontMaterial_specular.a / 3.0;","   }","   else","   {","       vLightingFactor = aVertexColor;","   }","","   vTextureCoord[0] = aTextureCoord0;","   vTextureCoord[1] = aTextureCoord1;","   gl_Position = uProjectionMatrix * vertexPosition;","}"].join("\n");r=["#ifdef GL_ES","precision highp float;","#endif","","uniform int uTexturesEnabled;","uniform int uTextureStageEnabled["+gl_MaxTextureStages+"];","uniform sampler2D uTextureSamplerColor["+gl_MaxTextureStages+"];","uniform sampler2D uTextureSamplerAlpha["+gl_MaxTextureStages+"];","uniform int uTextureBlendOp;","uniform vec4 uTextureColorMask;","","varying vec4 vLightingFactor;","varying vec2 vTextureCoord["+gl_MaxTextureStages+"];","","void main()","{","   vec4 fragmentColor;","   vec4 fragmentColor1;","   vec4 fragmentColor2;","   if (uTexturesEnabled == 1 && uTextureStageEnabled[0] == 1 && uTextureStageEnabled[1] == 0)","   {","       fragmentColor = texture2D(uTextureSamplerColor[0], vec2(vTextureCoord[0].s, vTextureCoord[0].t));","       if (fragmentColor.r == uTextureColorMask.r && fragmentColor.g == uTextureColorMask.g && fragmentColor.b == uTextureColorMask.b && fragmentColor.a == uTextureColorMask.a) discard;","       if (uTextureBlendOp == "+RC_MODULATE+")","       {","           if (fragmentColor.a == 0.0) discard;","           else gl_FragColor = fragmentColor * vLightingFactor;","       }","       else if (uTextureBlendOp == "+RC_REPLACE+")","       {","           gl_FragColor = fragmentColor;","       }","       else","       {","           gl_FragColor = vLightingFactor;","       }","   }","   else if (uTexturesEnabled == 1 && uTextureStageEnabled[0] == 1 && uTextureStageEnabled[1] == 1)","   {","       fragmentColor1 = texture2D(uTextureSamplerColor[0], vec2(vTextureCoord[0].s, vTextureCoord[0].t));","       fragmentColor2 = texture2D(uTextureSamplerColor[1], vec2(vTextureCoord[1].s, vTextureCoord[1].t));","       if (uTextureBlendOp == "+RC_MODULATE+")","       {","           fragmentColor1.a = fragmentColor2.a;","           if (fragmentColor1.a == 0.0) discard;","           else gl_FragColor = fragmentColor1 * vLightingFactor;","       }","       else if (uTextureBlendOp == "+RC_REPLACE+")","       {","           gl_FragColor = fragmentColor1 * fragmentColor2;","       }","       else","       {","           gl_FragColor = vLightingFactor;","       }","   }","   else","   {","       gl_FragColor = vLightingFactor;","   }","}"].join("\n")}break;case eShaderType.FragmentLighting:{n=["attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec4 aVertexColor;","attribute vec2 aTextureCoord0;","attribute vec2 aTextureCoord1;","","uniform mat4 uProjectionMatrix;","uniform mat4 uModelViewMatrix;","uniform mat4 uNormalMatrix;","","varying vec4 vVertexPosition;","varying vec4 vTransformedNormal;","varying vec4 vVertexColor;","varying vec4 vViewPosition;","varying vec4 vViewDirection;","varying vec2 vTextureCoord["+gl_MaxTextureStages+"];","","void main()","{","   vVertexPosition = uModelViewMatrix * vec4(aVertexPosition, 1);","   vTransformedNormal = normalize(uNormalMatrix * vec4(aVertexNormal, 0));","   vVertexColor = aVertexColor;","   vViewPosition = uModelViewMatrix * vec4(0, 0, 0, 1);","   vViewDirection = normalize(-vViewPosition);","   vTextureCoord[0] = aTextureCoord0;","   vTextureCoord[1] = aTextureCoord1;","   gl_Position = uProjectionMatrix * vVertexPosition;","}"].join("\n");r=["#ifdef GL_ES","precision highp float;","#endif","","vec4 gAmbient;","vec4 gDiffuse;","vec4 gSpecular;","","uniform vec4 uGlobalAmbientLight;","","","uniform int uLightSource_enabled["+gl_MaxLights+"];","uniform vec4 uLightSource_ambient["+gl_MaxLights+"];","uniform vec4 uLightSource_diffuse["+gl_MaxLights+"];","uniform vec4 uLightSource_specular["+gl_MaxLights+"];","uniform vec4 uLightSource_position["+gl_MaxLights+"];","uniform vec4 uLightSource_halfVector["+gl_MaxLights+"];","uniform vec4 uLightSource_spotDirection["+gl_MaxLights+"];","uniform float uLightSource_spotExponent["+gl_MaxLights+"];","uniform float uLightSource_spotCutoff["+gl_MaxLights+"];","uniform float uLightSource_spotCosCutoff["+gl_MaxLights+"];","uniform float uLightSource_constantAttenuation["+gl_MaxLights+"];","uniform float uLightSource_linearAttenuation["+gl_MaxLights+"];","uniform float uLightSource_quadraticAttenuation["+gl_MaxLights+"];","","uniform vec4 uFrontMaterial_ambient;","uniform vec4 uFrontMaterial_diffuse;","uniform vec4 uFrontMaterial_specular;","uniform vec4 uFrontMaterial_emission;","uniform float uFrontMaterial_shininess;","","uniform int uLightingEnabled;","uniform int uTexturesEnabled;","uniform int uTextureStageEnabled["+gl_MaxTextureStages+"];","uniform sampler2D uTextureSamplerColor["+gl_MaxTextureStages+"];","uniform sampler2D uTextureSamplerAlpha["+gl_MaxTextureStages+"];","uniform int uTextureBlendOp;","uniform vec4 uTextureColorMask;","","varying vec4 vVertexPosition;","varying vec4 vTransformedNormal;","varying vec4 vVertexColor;","varying vec4 vViewPosition;","varying vec4 vViewDirection;","varying vec2 vTextureCoord["+gl_MaxTextureStages+"];","","void directionalLight(vec4 position, vec4 ambient, vec4 diffuse, vec4 specular, vec3 normal, vec3 halfVector)","{","   vec3 lightDir;","   float nDotL;","   float nDotHV;","   float pf;","","   lightDir = normalize(vec3(position));","","   nDotL = max(dot(normal, lightDir), 0.0);","   if (nDotL == 0.0)","   {","       pf = 0.0;","   }","   else","   {","       nDotHV = max(0.0, dot(normal, halfVector));","       pf = pow(nDotHV, uFrontMaterial_shininess);","   }","","   gAmbient  += ambient * uFrontMaterial_ambient;","   gDiffuse  += diffuse * uFrontMaterial_diffuse * nDotL;","   gSpecular += specular * uFrontMaterial_specular * pf;","}","","void pointLight(vec4 position, float constantAttenuation, float linearAttenuation, float quadraticAttenuation,","                vec4 ambient, vec4 diffuse, vec4 specular, vec3 normal, vec3 eye, vec3 vPosition)","{","   float nDotL;","   float nDotHV;","   float pf;","   float attenuation;","   float d;","   vec3  L;","   vec3  halfVector;","","","   L = vec3(position) - vPosition;","","","   d = length(L);","","","   L = normalize(L);","","","   attenuation = 1.0 / (constantAttenuation +","      linearAttenuation * d +","      quadraticAttenuation * d * d);","","   nDotL = max(0.0, dot(normal, L));","   nDotHV = max(0.0, dot(normal, normalize(L + eye)));","","   if (nDotL == 0.0)","   {","       pf = 0.0;","   }","   else","   {","       pf = pow(nDotHV, uFrontMaterial_shininess);","   }","","   gAmbient  += ambient * uFrontMaterial_ambient * attenuation;","   gDiffuse  += diffuse * uFrontMaterial_diffuse * nDotL * attenuation;","   gSpecular += specular * uFrontMaterial_specular * pf * attenuation;","}","","void main()","{","   vec4 lightingFactor;","   if (uLightingEnabled != 0)","   {","       gAmbient = vec4(0, 0, 0, 0);","       gDiffuse = vec4(0, 0, 0, 0);","       gSpecular = vec4(0, 0, 0, 0);","","       for (int i=0; i < "+gl_MaxLights+"; i++)","       {","           if (uLightSource_enabled[i] != 0)","           {","               if (uLightSource_position[i][3] == 0.0)","               {","                   directionalLight(uLightSource_position[i], uLightSource_ambient[i],","                       uLightSource_diffuse[i], uLightSource_specular[i],","                       normalize(vec3(vTransformedNormal)),","                       normalize(vec3(vViewDirection) + vec3(uLightSource_position[i])));","               }","               else if (uLightSource_spotCutoff[i] > 90.0)","               {","                   pointLight(uLightSource_position[i], uLightSource_constantAttenuation[i],","                       uLightSource_linearAttenuation[i], uLightSource_quadraticAttenuation[i],","                       uLightSource_ambient[i], uLightSource_diffuse[i], uLightSource_specular[i],","                       normalize(vec3(vTransformedNormal)),","                       vec3(vViewDirection), vec3(vVertexPosition));","               }","               else","               {","               }","           }","       }","","       lightingFactor  = uGlobalAmbientLight * uFrontMaterial_ambient;","       lightingFactor += gAmbient + gDiffuse + gSpecular;","       lightingFactor.a  = uFrontMaterial_ambient.a / 3.0 + ","                           uFrontMaterial_diffuse.a / 3.0 + ","                           uFrontMaterial_specular.a / 3.0;","   }","   else","   {","       lightingFactor = vVertexColor;","   }","","   vec4 fragmentColor;","   vec4 fragmentColor1;","   vec4 fragmentColor2;","   if (uTexturesEnabled == 1 && uTextureStageEnabled[0] == 1 && uTextureStageEnabled[1] == 0)","   {","       fragmentColor = texture2D(uTextureSamplerColor[0], vec2(vTextureCoord[0].s, vTextureCoord[0].t));","       if (fragmentColor.r == uTextureColorMask.r && fragmentColor.g == uTextureColorMask.g && fragmentColor.b == uTextureColorMask.b && fragmentColor.a == uTextureColorMask.a) discard;","       if (uTextureBlendOp == "+RC_MODULATE+")","       {","           if (fragmentColor.a == 0.0) discard;","           else gl_FragColor = fragmentColor * lightingFactor;","       }","       else if (uTextureBlendOp == "+RC_REPLACE+")","       {","           gl_FragColor = fragmentColor;","       }","       else","       {","           gl_FragColor = lightingFactor;","       }","   }","   else if (uTexturesEnabled == 1 && uTextureStageEnabled[0] == 1 && uTextureStageEnabled[1] == 1)","   {","       fragmentColor1 = texture2D(uTextureSamplerColor[0], vec2(vTextureCoord[0].s, vTextureCoord[0].t));","       fragmentColor2 = texture2D(uTextureSamplerColor[1], vec2(vTextureCoord[1].s, vTextureCoord[1].t));","       if (uTextureBlendOp == "+RC_MODULATE+")","       {","           fragmentColor1.a = fragmentColor2.a;","           if (fragmentColor1.a == 0.0) discard;","           else gl_FragColor = fragmentColor1 * lightingFactor;","       }","       else if (uTextureBlendOp == "+RC_REPLACE+")","       {","           gl_FragColor = fragmentColor1 * fragmentColor2;","       }","       else","       {","           gl_FragColor = lightingFactor;","       }","   }","   else","   {","       gl_FragColor = lightingFactor;","   }","}"].join("\n")}break;default:return{vertex:null,fragment:null};break}var i=e.createShader(e.VERTEX_SHADER);if(i){e.shaderSource(i,n);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){alert(e.getShaderInfoLog(i))}}var s=e.createShader(e.FRAGMENT_SHADER);if(s){e.shaderSource(s,r);e.compileShader(s);if(!e.getShaderParameter(s,e.COMPILE_STATUS)){alert(e.getShaderInfoLog(s))}}return{vertex:i,fragment:s}}function ContentHandler(){AttributeContainer.call(this);this.className="ContentHandler";this.contentDirectory=new StringAttr("");this.url=new StringAttr("");this.registerAttribute(this.contentDirectory,"contentDirectory");this.registerAttribute(this.url,"url")}function ContentBuilder(){AttributeContainer.call(this);this.className="ContentBuilder";this.factory=null;this.cameras=[];this.lights=[];this.models=[];this.evaluators=[];this.layer=0;this.invertAlpha=new BooleanAttr(false);this.registerAttribute(this.invertAlpha,"invertAlpha")}function BinaryParser(e,t){this.stream=e;this.bigEndian=t;this.readUInt8=function(){return this.decodeInt(8,false)};this.readUInt16=function(){return this.decodeInt(16,false)};this.readUInt32=function(){return this.decodeInt(32,false)};this.readInt8=function(){return this.decodeInt(8,true)};this.readInt16=function(){return this.decodeInt(16,true)};this.readInt32=function(){return this.decodeInt(32,true)};this.readFloat32=function(){return this.decodeFloat32()};var n=0;this.decodeInt=function(e,t){var r=0;var i=e/8;var s=0;for(var o=0;o<i;o++){s=this.bigEndian?this.stream.charCodeAt(n+o):this.stream.charCodeAt(n+(i-o-1));for(var u=7;u>=0;u--){r=r*2+(1<<u&s?1:0)}}if(t){max=Math.pow(2,e);r=r>=max/2?r-max:r}n+=i;return r};this.decodeFloat32=function(){var e=0;var t=4;var r=new Array(t);for(var i=0;i<t;i++){this.bigEndian?r[i]=this.stream.charCodeAt(n+i):r[i]=this.stream.charCodeAt(n+(t-i-1))}var s=r[0]&128;var o=0;for(var u=6;u>=0;u--){o=o*2+(1<<u&r[0]?1:0)}o=o*2+(128&r[1]?1:0);var a=0;for(var f=6;f>=0;f--){a=a*2+(1<<f&r[1]?1:0)}for(var i=2;i<=3;i++){for(var f=7;f>=0;f--){a=a*2+(1<<f&r[i]?1:0)}}var l=o-127;var c=1;var h=1;for(var f=23;f>=0;f--){c=c+(1<<f&a?h:0);h/=2}e=c*Math.pow(2,l)*(s?-1:1);n+=t;return e}}function TextParser(e){this.stream=e;var t=0;this.readCharacter=function(){if(t>=this.stream.length)return null;return this.stream[t++]};this.readToken=function(){var e;var n="";if(t>=this.stream.length)return null;do{e=this.stream[t++]}while(t<=this.stream.length&&isSpace(e));do{n+=e;e=this.stream[t++]}while(t<=this.stream.length&&!isSpace(e));return n.length>0?n:null};this.readLine=function(){var e="";if(t>=this.stream.length)return null;while(t<this.stream.length&&this.stream[t]!="\n"){e+=this.stream[t++]}t++;return e};this.readLineTokens=function(){var e;var t=0;var n="";var r=[];var i=this.readLine();if(i==null)return null;while(t<i.length){do{e=i[t++]}while(t<=i.length&&isSpace(e));do{n+=e;e=i[t++]}while(t<=i.length&&!isSpace(e));r.push(n);n=""}return r}}function XMLParser(e,t,n){this.factory=e;this.registry=t;this.contentDir=n;this.attributeStack=new Stack;this.collectionCountStack=new Stack}function Serializer(){AttributeContainer.call(this);this.className="Serializer";this.pbMixed=null;this.bMixed=false;this.DOM=null;this.RootElement=null;this.elementStack=new Stack;this.format=new StringAttr("xml");this.serializeMinimum=new BooleanAttr(false);this.serializeChildren=new BooleanAttr(false);this.registerAttribute(this.format,"format");this.registerAttribute(this.serializeMinimum,"serializeMinimum");this.registerAttribute(this.serializeChildren,"serializeChildren")}function BytesPerPixel(e){switch(e){case ePixelFormat.R8G8B8:case ePixelFormat.B8G8R8:case ePixelFormat.X8X8X8:return 3;case ePixelFormat.R8G8B8A8:case ePixelFormat.B8G8R8A8:case ePixelFormat.A8R8G8B8:case ePixelFormat.A8B8G8R8:case ePixelFormat.X8X8X8X8:return 4;case ePixelFormat.A8:return 1;default:return 0}}function TPixel(e,t,n,r){var i=e||0;var s=t||0;var o=n||0;var u=r||0}function ScaleImage(e,t,n,r,i,s,o,u,a){if(e!=ePixelFormat.R8G8B8A8){return false}var f=document.createElement("canvas");f.width=t;f.height=n;var l=f.getContext("2d");var c=l.createImageData(t,n);var h=0;for(var p=0;p<n;p++){for(var d=0;d<t;d++){for(var v=0;v<4;v++,h++){c.data[h]=i[h]}}}l.putImageData(c,0,0);var m=document.createElement("canvas");m.width=s;m.height=o;var g=m.getContext("2d");g.drawImage(f,0,0,f.width,f.height,0,0,m.width,m.height);var y=g.getImageData(0,0,s,o);h=0;for(var p=0;p<o;p++){for(var d=0;d<s;d++){for(var v=0;v<4;v++,h++){a[h]=y.data[h]}}}return true}function MediaPlayback(e,t){this.container=e;this.onload=t;this.url=null;this.video=false;this.ready=false;this.alphaPlayback=null;this.frameRetrieved=false;this.htmlImageElement=null;this.imageWidth=0;this.imageHeight=0;this.imagePitch=0;this.imagePixels=null}function MediaPlayback_OnImageLoad(){this.container.onImageLoad()}function TextureArray(e){this.textures=new Array(eTextureType.EnumCount);for(var t=0;t<this.textures.length;t++){if(e){this.textures[t]=e.textures[t].slice()}else{this.textures[t]=[]}}}function StyleMgr(){AttributeContainer.call(this);this.className="StyleMgr"}function GraphMgr(){AttributeContainer.call(this);this.className="GraphMgr";this.renderContext=null;this.renderState=null;this.lightIndex=0;this.material=null;this.dissolve=null;this.balloonTipLabel=null;this.drawTextures=true;this.textureArrayStack=new Stack(new TextureArray);this.projectionTextureArrayStack=new Stack(new TextureArray);this.labelIndex=1;this.balloonTipLabelIndex=1;this.styleMgr=new StyleMgr;this.name=new StringAttr("GraphMgr");this.registerAttribute(this.name,"name")}function Node(){AttributeContainer.call(this);this.className="Node";this.attrType=eAttrType.Node;this.children=[];this.parents=[];this.modificationCount=0;this.thisModified=false;this.childModified=false;this.childrenModified=[];this.name=new StringAttr("");this.enabled=new BooleanAttr(true);this.orphan=new BooleanAttr(false);this.registerAttribute(this.name,"name");this.registerAttribute(this.enabled,"enabled");this.registerAttribute(this.orphan,"orphan")}function SGNode(){Node.call(this);this.className="SGNode";this.graphMgr=null;this.recordDisplayList=false;this.disableDisplayLists=false;this.displayListObj=null;this.enableDisplayList=new BooleanAttr(false);this.autoDisplayList=new BooleanAttr(false);this.updateDisplayList=new PulseAttr;this.registerAttribute(this.enableDisplayList,"enableDisplayList");this.registerAttribute(this.autoDisplayList,"autoDisplayList");this.registerAttribute(this.updateDisplayList,"updateDisplayList")}function SGNode_EnableDisplayListModifiedCB(e,t){t.enableDisplayListModified()}function SGNode_AutoDisplayListModifiedCB(e,t){}function SGNode_UpdateDisplayListModifiedCB(e,t){t.disableDisplayLists=true}function RenderableElement(){SGNode.call(this);this.className="RenderableElement";this.attrType=eAttrType.RenderableElement;this.bbox=new BBoxAttr;this.renderSequenceSlot=new NumberAttr(0);this.hasFocus=new TernaryAttr(0);this.selected=new TernaryAttr(0);this.styles=new StylesAttr;this.stylesMap=new StylesMapAttr;this.renderableElementStyle=new RenderableElementStyleAttr;this.renderedSlot=new NumberAttr(0);this.registerAttribute(this.bbox,"bbox");this.registerAttribute(this.renderSequenceSlot,"renderSequenceSlot");this.registerAttribute(this.hasFocus,"hasFocus");this.registerAttribute(this.selected,"selected");this.registerAttribute(this.styles,"styles");this.registerAttribute(this.stylesMap,"stylesMap");this.registerAttribute(this.renderableElementStyle,"renderableElementStyle");this.registerAttribute(this.renderedSlot,"renderedSlot")}function ParentableMotionElement(){RenderableElement.call(this);this.className="ParentableMotionElement";this.attrType=eAttrType.ParentableMotionElement;this.translationMatrix=new Matrix4x4;this.rotationQuat=new Quaternion;this.rotationMatrix=new Matrix4x4;this.scaleMatrix=new Matrix4x4;this.pivotMatrix=new Matrix4x4;this.sectorTranslationMatrix=new Matrix4x4;this.stackMatrix=new Matrix4x4;this.transformSimple=new Matrix4x4;this.transformCompound=new Matrix4x4;this.sectorTransformSimple=new Matrix4x4;this.sectorTransformCompound=new Matrix4x4;this.updatePosition=false;this.updateRotation=false;this.updateQuaternion=false;this.updateScale=false;this.updatePivot=false;this.updateSectorPosition=false;this.updateInheritance=false;this.inheritsPosition=true;this.inheritsRotation=true;this.inheritsScale=true;this.inheritsPivot=true;this.nonZeroVelocity=false;this.motionParent=null;this.motionChildren=[];this.position=new Vector3DAttr(0,0,0);this.rotation=new Vector3DAttr(0,0,0);this.quaternion=new QuaternionAttr(1,0,0,0);this.scale=new Vector3DAttr(1,1,1);this.pivot=new Vector3DAttr(0,0,0);this.center=new Vector3DAttr(0,0,0);this.worldCenter=new Vector3DAttr(0,0,0);this.worldPosition=new Vector3DAttr(0,0,0);this.worldRotation=new Vector3DAttr(0,0,0);this.worldScale=new Vector3DAttr(1,1,1);this.screenPosition=new Vector3DAttr(0,0,0);this.sectorOrigin=new Vector3DAttr(0,0,0);this.sectorPosition=new Vector3DAttr(0,0,0);this.sectorWorldCenter=new Vector3DAttr(0,0,0);this.sectorWorldPosition=new Vector3DAttr(0,0,0);this.panVelocity=new Vector3DAttr(0,0,0);this.linearVelocity=new Vector3DAttr(0,0,0);this.linearVelocity_affectPosition_Y=new BooleanAttr(true);this.angularVelocity=new Vector3DAttr(0,0,0);this.scalarVelocity=new Vector3DAttr(0,0,0);this.worldTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.sectorWorldTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.parent=new StringAttr("");this.inheritPosition_X=new BooleanAttr(true);this.inheritPosition_Y=new BooleanAttr(true);this.inheritPosition_Z=new BooleanAttr(true);this.inheritRotation_X=new BooleanAttr(true);this.inheritRotation_Y=new BooleanAttr(true);this.inheritRotation_Z=new BooleanAttr(true);this.inheritScale_X=new BooleanAttr(true);this.inheritScale_Y=new BooleanAttr(true);this.inheritScale_Z=new BooleanAttr(true);this.inheritPivot_X=new BooleanAttr(true);this.inheritPivot_Y=new BooleanAttr(true);this.inheritPivot_Z=new BooleanAttr(true);this.transformModified=new PulseAttr;this.position.addModifiedCB(ParentableMotionElement_PositionModifiedCB,this);this.rotation.addModifiedCB(ParentableMotionElement_RotationModifiedCB,this);this.quaternion.addModifiedCB(ParentableMotionElement_QuaternionModifiedCB,this);this.scale.addModifiedCB(ParentableMotionElement_ScaleModifiedCB,this);this.pivot.addModifiedCB(ParentableMotionElement_PivotModifiedCB,this);this.sectorOrigin.addModifiedCB(ParentableMotionElement_SectorOriginModifiedCB,this);this.sectorPosition.addModifiedCB(ParentableMotionElement_SectorPositionModifiedCB,this);this.parent.addModifiedCB(ParentableMotionElement_ParentModifiedCB,this);this.inheritPosition_X.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritPosition_Y.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritPosition_Z.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritRotation_X.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritRotation_Y.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritRotation_Z.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritScale_X.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritScale_Y.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritScale_Z.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritPivot_X.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritPivot_Y.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.inheritPivot_Z.addModifiedCB(ParentableMotionElement_InheritanceModifiedCB,this);this.panVelocity.addModifiedCB(ParentableMotionElement_VelocityModifiedCB,this);this.linearVelocity.addModifiedCB(ParentableMotionElement_VelocityModifiedCB,this);this.angularVelocity.addModifiedCB(ParentableMotionElement_VelocityModifiedCB,this);this.scalarVelocity.addModifiedCB(ParentableMotionElement_VelocityModifiedCB,this);this.registerAttribute(this.position,"position");this.registerAttribute(this.rotation,"rotation");this.registerAttribute(this.quaternion,"quaternion");this.registerAttribute(this.scale,"scale");this.registerAttribute(this.pivot,"pivot");this.registerAttribute(this.center,"center");this.registerAttribute(this.worldCenter,"worldCenter");this.registerAttribute(this.worldPosition,"worldPosition");this.registerAttribute(this.worldRotation,"worldRotation");this.registerAttribute(this.worldScale,"worldScale");this.registerAttribute(this.screenPosition,"screenPosition");this.registerAttribute(this.sectorOrigin,"sectorOrigin");this.registerAttribute(this.sectorPosition,"sectorPosition");this.registerAttribute(this.sectorWorldCenter,"sectorWorldCenter");this.registerAttribute(this.sectorWorldPosition,"sectorWorldPosition");this.registerAttribute(this.worldTransform,"worldTransform");this.registerAttribute(this.sectorWorldTransform,"sectorWorldTransform");this.registerAttribute(this.panVelocity,"panVelocity");this.registerAttribute(this.linearVelocity,"linearVelocity");this.registerAttribute(this.linearVelocity_affectPosition_Y,"linearVelocity_affectPosition_Y");this.registerAttribute(this.angularVelocity,"angularVelocity");this.registerAttribute(this.scalarVelocity,"scalarVelocity");this.registerAttribute(this.parent,"parent");this.registerAttribute(this.inheritPosition_X,"inheritPosition_X");this.registerAttribute(this.inheritPosition_Y,"inheritPosition_Y");this.registerAttribute(this.inheritPosition_Z,"inheritPosition_Z");this.registerAttribute(this.inheritRotation_X,"inheritRotation_X");this.registerAttribute(this.inheritRotation_Y,"inheritRotation_Y");this.registerAttribute(this.inheritRotation_Z,"inheritRotation_Z");this.registerAttribute(this.inheritScale_X,"inheritScale_X");this.registerAttribute(this.inheritScale_Y,"inheritScale_Y");this.registerAttribute(this.inheritScale_Z,"inheritScale_Z");this.registerAttribute(this.inheritPivot_X,"inheritPivot_X");this.registerAttribute(this.inheritPivot_X,"inheritPivot_Y");this.registerAttribute(this.inheritPivot_X,"inheritPivot_Z");this.registerAttribute(this.transformModified,"transformModified")}function ParentableMotionElement_PositionModifiedCB(e,t){t.updatePosition=true;t.synchronizeSectorPosition();t.incrementModificationCount()}function ParentableMotionElement_RotationModifiedCB(e,t){t.updateRotation=true;t.incrementModificationCount()}function ParentableMotionElement_QuaternionModifiedCB(e,t){t.updateQuaternion=true;t.incrementModificationCount()}function ParentableMotionElement_ScaleModifiedCB(e,t){t.updateScale=true;t.incrementModificationCount()}function ParentableMotionElement_PivotModifiedCB(e,t){t.updatePivot=true;t.incrementModificationCount()}function ParentableMotionElement_SectorOriginModifiedCB(e,t){t.synchronizeSectorPosition();t.incrementModificationCount()}function ParentableMotionElement_SectorPositionModifiedCB(e,t){t.updateSectorPosition=true;t.synchronizePosition();t.incrementModificationCount()}function ParentableMotionElement_ParentModifiedCB(e,t){t.setMotionParent(t.registry.find(e.getValueDirect().join("")))}function ParentableMotionElement_VelocityModifiedCB(e,t){t.velocityModified();t.incrementModificationCount()}function ParentableMotionElement_InheritanceModifiedCB(e,t){t.updateInheritance=true;t.incrementModificationCount()}function DirectiveParams(){this.directive=null;this.path=null;this.pathIndex=0;this.currentNodePath=new Stack;this.userData=null}function Directive(){AttributeContainer.call(this);this.className="Directive";this.attrType=eAttrType.Directive;this.name=new StringAttr("");this.enabled=new BooleanAttr(true);this.rootNode=new ReferenceAttr(null);this.registerAttribute(this.name,"name");this.registerAttribute(this.enabled,"enabled");this.registerAttribute(this.rootNode,"rootNode")}function SGDirective(){Directive.call(this);this.className="SGDirective";this.graphMgr=null}function UpdateParams(){DirectiveParams.call(this);this.pass=0;this.timeIncrement=0;this.visited=[];this.nextPass=[];this.displayListObj=null;this.disableDisplayLists=false}function UpdateDirective(){SGDirective.call(this);this.className="UpdateDirective";this.attrType=eAttrType.UpdateDirective;this.name.setValueDirect("UpdateDirective");this.timeIncrement=new NumberAttr(0);this.registerAttribute(this.timeIncrement,"timeIncrement")}function Camera(){ParentableMotionElement.call(this);this.className="Camera";this.attrType=eAttrType.Camera;this.projectionMatrix=new Matrix4x4;this.viewport=new Viewport;this.updateNearDistance=false;this.updateFarDistance=false;this.updateClipPlanes=true;this.near=0;this.far=0;this.nearDistance=new NumberAttr(0);this.farDistance=new NumberAttr(0);this.viewVolume=new ViewVolumeAttr;this.sectorOriginUpdatesEnabled=new BooleanAttr(false);this.nearDistance.addModifiedCB(Camera_NearDistanceModifiedCB,this);this.farDistance.addModifiedCB(Camera_FarDistanceModifiedCB,this);this.registerAttribute(this.nearDistance,"nearDistance");this.registerAttribute(this.farDistance,"farDistance");this.registerAttribute(this.viewVolume,"viewVolume")}function Camera_NearDistanceModifiedCB(e,t){t.updateNearDistance=true;t.incrementModificationCount()}function Camera_FarDistanceModifiedCB(e,t){t.updateFarDistance=true;t.incrementModificationCount()}function OrthographicCamera(){Camera.call(this);this.className="OrthographicCamera";this.attrType=eAttrType.OrthographicCamera;this.updateWidth=false;this.width=new NumberAttr(2);this.width.addModifiedCB(OrthographicCamera_WidthModifiedCB,this);this.registerAttribute(this.width,"width")}function OrthographicCamera_WidthModifiedCB(e,t){t.updateWidth=true;t.incrementModificationCount()}function PerspectiveCamera(){Camera.call(this);this.className="PerspectiveCamera";this.attrType=eAttrType.PerspectiveCamera;this.updateZoom=false;this.fovyRadians=0;this.left=0;this.right=0;this.top=0;this.bottom=0;this.zoom=new NumberAttr(0);this.zoom.addModifiedCB(PerspectiveCamera_ZoomModifiedCB,this);this.registerAttribute(this.zoom,"zoom")}function PerspectiveCamera_ZoomModifiedCB(e,t){t.updateZoom=true;t.incrementModificationCount()}function Light(){ParentableMotionElement.call(this);this.className="Light";this.attrType=eAttrType.Light;this.updateAmbient=true;this.updateDiffuse=true;this.updateSpecular=true;this.updateConstantAttenuation=true;this.updateLinearAttenuation=true;this.updateQuadraticAttenuation=true;this.lightDesc=new LightDesc;this.lightDesc.validMembersMask=0;this.lightIndex=0;this.setLightDesc=false;this.ambient=new ColorAttr(0,0,0,1);this.diffuse=new ColorAttr(1,1,1,1);this.specular=new ColorAttr(1,1,1,1);this.constantAttenuation=new NumberAttr(1);this.linearAttenuation=new NumberAttr(0);this.quadraticAttenuation=new NumberAttr(0);this.shadowCaster=new BooleanAttr(false);this.ambient.addModifiedCB(Light_AmbientModifiedCB,this);this.diffuse.addModifiedCB(Light_DiffuseModifiedCB,this);this.specular.addModifiedCB(Light_SpecularModifiedCB,this);this.constantAttenuation.addModifiedCB(Light_ConstantAttenuationModifiedCB,this);this.linearAttenuation.addModifiedCB(Light_LinearAttenuationModifiedCB,this);this.quadraticAttenuation.addModifiedCB(Light_QuadraticAttenuationModifiedCB,this);this.registerAttribute(this.ambient,"ambient");this.registerAttribute(this.diffuse,"diffuse");this.registerAttribute(this.specular,"specular");this.registerAttribute(this.constantAttenuation,"constantAttenuation");this.registerAttribute(this.linearAttenuation,"linearAttenuation");this.registerAttribute(this.quadraticAttenuation,"quadraticAttenuation");this.registerAttribute(this.shadowCaster,"shadowCaster")}function Light_AmbientModifiedCB(e,t){t.updateAmbient=true;t.incrementModificationCount()}function Light_DiffuseModifiedCB(e,t){t.updateDiffuse=true;t.incrementModificationCount()}function Light_SpecularModifiedCB(e,t){t.updateSpecular=true;t.incrementModificationCount()}function Light_ConstantAttenuationModifiedCB(e,t){t.updateConstantAttenuation=true;t.incrementModificationCount()}function Light_LinearAttenuationModifiedCB(e,t){t.updateLinearAttenuation=true;t.incrementModificationCount()}function Light_QuadraticAttenuationModifiedCB(e,t){t.updateQuadraticAttenuation=true;t.incrementModificationCount()}function DirectionalLight(){Light.call(this);this.className="DirectionalLight";this.attrType=eAttrType.DirectionalLight;this.lightDesc.type="directional"}function PointLight(){Light.call(this);this.className="PointLight";this.attrType=eAttrType.PointLight;this.lightDesc.type="point";this.updateRange=false;this.range=new NumberAttr;this.range.addModifiedCB(PointLight_RangeModifiedCB,this);this.registerAttribute(this.range,"range")}function PointLight_RangeModifiedCB(e,t){t.updateRange=true;t.incrementModificationCount()}function GlobalIllumination(){SGNode.call(this);this.className="GlobalIllumination";this.attrType=eAttrType.GlobalIllumination;this.updateAmbient=true;this.setGlobalIllumination=false;this.ambient=new ColorAttr(0,0,0,1);this.ambient.addModifiedCB(GlobalIllumination_AmbientModifiedCB,this);this.registerAttribute(this.ambient,"ambient")}function GlobalIllumination_AmbientModifiedCB(e,t){t.updateAmbient=true;t.incrementModificationCount()}function Group(){SGNode.call(this);this.className="Group";this.attrType=eAttrType.Group;this.proxyChildAttrs=new BooleanAttr(false);this.proxyChildAttrs.addModifiedCB(Group_ProxyChildAttrsModifiedCB,this);this.registerAttribute(this.proxyChildAttrs,"proxyChildAttrs");this.enableDisplayList.addModifiedCB(Group_EnableDisplayListModifiedCB,this);this.autoDisplayList.setValueDirect(true);this.autoDisplayList.addModifiedCB(Group_AutoDisplayListModifiedCB,this)}function Group_ProxyChildAttrsModifiedCB(e,t){t.proxyChildAttrsModified()}function Group_ProxiedAttrModifiedCB(e,t){t.group.proxiedAttrModified(t.proxiedNodeTypeString,e,t.proxiedAttrName)}function Group_EnableDisplayListModifiedCB(e,t){var n=e.getValueDirect()}function Group_AutoDisplayListModifiedCB(e,t){var n=e.getValueDirect();if(!n&&t){if(t.enableDisplayList.getValueDirect()==true){t.enableDisplayList.setValueDirect(e.getValueDirect())}}}function Group_ChildAutoDisplayListModifiedCB(e,t){t.childAutoDisplayListModified()}function Isolator(){Group.call(this);this.className="Isolator";this.attrType=eAttrType.Isolator;this.updateIsolateTransforms=true;this.updateIsolateLights=true;this.updateIsolateMaterials=true;this.updateIsolateTextures=true;this.updateIsolateFog=true;this.updateIsolateClipPlanes=true;this.isolateTransforms=new BooleanAttr(false);this.isolateLights=new BooleanAttr(false);this.isolateMaterials=new BooleanAttr(false);this.isolateTextures=new BooleanAttr(false);this.isolateDissolves=new BooleanAttr(false);this.isolateGlobalIlluminations=new BooleanAttr(false);this.isolateLightModels=new BooleanAttr(false);this.isolateFog=new BooleanAttr(false);this.isolateClipPlanes=new BooleanAttr(false);this.isolateRenderModes=new BooleanAttr(false);this.isolateTransforms.addModifiedCB(Isolator_IsolateTransformsModifiedCB,this);this.isolateLights.addModifiedCB(Isolator_IsolateLightsModifiedCB,this);this.isolateMaterials.addModifiedCB(Isolator_IsolateMaterialsModifiedCB,this);this.isolateTextures.addModifiedCB(Isolator_IsolateTexturesModifiedCB,this);this.isolateFog.addModifiedCB(Isolator_IsolateFogModifiedCB,this);this.isolateClipPlanes.addModifiedCB(Isolator_IsolateClipPlanesModifiedCB,this);this.registerAttribute(this.isolateTransforms,"isolateTransforms");this.registerAttribute(this.isolateLights,"isolateLights");this.registerAttribute(this.isolateMaterials,"isolateMaterials");this.registerAttribute(this.isolateTextures,"isolateTextures");this.registerAttribute(this.isolateDissolves,"isolateDissolves");this.registerAttribute(this.isolateGlobalIlluminations,"isolateGlobalIlluminations");this.registerAttribute(this.isolateLightModels,"isolateLightModels");this.registerAttribute(this.isolateFog,"isolateFog");this.registerAttribute(this.isolateClipPlanes,"isolateClipPlanes");this.registerAttribute(this.isolateRenderModes,"isolateRenderModes")}function Isolator_IsolateTransformsModifiedCB(e,t){t.updateIsolateTransforms=true;t.incrementModificationCount()}function Isolator_IsolateLightsModifiedCB(e,t){t.updateIsolateLights=true;t.incrementModificationCount()}function Isolator_IsolateMaterialsModifiedCB(e,t){t.updateIsolateMaterials=true;t.incrementModificationCount()}function Isolator_IsolateTexturesModifiedCB(e,t){t.updateIsolateTextures=true;t.incrementModificationCount()}function Isolator_IsolateFogModifiedCB(e,t){t.updateIsolateFog=true;t.incrementModificationCount()}function Isolator_IsolateClipPlanesModifiedCB(e,t){t.updateIsolateClipPlanes=true;t.incrementModificationCount()}function Selector(){Group.call(this);this.className="Selector";this.attrType=eAttrType.Selector;this.selectee=new NumberAttr(0);this.registerAttribute(this.selectee,"selectee")}function Dissolve(){SGNode.call(this);this.className="Dissolve";this.attrType=eAttrType.Dissolve;this.lastDissolve=0;this.dissolve=new NumberAttr(0);this.dissolve.addModifiedCB(Dissolve_DissolveModifiedCB,this);this.registerAttribute(this.dissolve,"dissolve")}function Dissolve_DissolveModifiedCB(e,t){t.incrementModificationCount()}function RenderParams(){DirectiveParams.call(this);this.viewport=new Viewport;this.projMatrix=new Matrix4x4;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.dissolve=0;this.opacity=1;this.distanceSortAgent=null;this.drawTextures=true;this.displayListObj=null;this.disableDisplayLists=false;this.resetDisplayLists=false}function RenderDirective(){SGDirective.call(this);this.className="RenderDirective";this.attrType=eAttrType.RenderDirective;this.name.setValueDirect("RenderDirective");this.backgroundImageSet=false;this.viewport=new ViewportAttr;this.backgroundColor=new ColorAttr(1,1,1,1);this.backgroundImageFilename=new StringAttr("");this.foregroundImageFilename=new StringAttr("");this.foregroundAlphaFilename=new StringAttr("");this.foregroundFadeEnabled=new BooleanAttr(false);this.texturesEnabled=new BooleanAttr(true);this.timeIncrement=new NumberAttr(0);this.highlightType=new NumberAttr(eHighlightType.None);this.viewport.addModifiedCB(RenderDirective_ViewportModifiedCB,this);this.backgroundColor.addModifiedCB(RenderDirective_BackgroundColorModifiedCB,this);this.backgroundImageFilename.addModifiedCB(RenderDirective_BackgroundImageFilenameModifiedCB,this);this.registerAttribute(this.viewport,"viewport");this.registerAttribute(this.backgroundColor,"backgroundColor");this.registerAttribute(this.backgroundImageFilename,"backgroundImageFilename");this.registerAttribute(this.foregroundImageFilename,"foregroundImageFilename");this.registerAttribute(this.foregroundAlphaFilename,"foregroundAlphaFilename");this.registerAttribute(this.foregroundFadeEnabled,"foregroundFadeEnabled");this.registerAttribute(this.texturesEnabled,"texturesEnabled");this.registerAttribute(this.timeIncrement,"timeIncrement");this.registerAttribute(this.highlightType,"highlightType");this.updateDirective=new UpdateDirective;this.timeIncrement.addTarget(this.updateDirective.getAttribute("timeIncrement"));this.resetDisplayLists=false;this.distanceSortAgent=new DistanceSortAgent;this.collideDirective=new CollideDirective;this.highlightDirective=new HighlightDirective;this.highlightType.addTarget(this.highlightDirective.getAttribute("highlightType"));this.backgroundScreen=new Isolator;this.backgroundScreen.isolateTextures.setValueDirect(true);this.backgroundTexture=new MediaTexture;this.backgroundScreen.addChild(this.backgroundTexture);this.backgroundScreenRect=new ScreenRect;this.backgroundScreenRect.setTexture(this.backgroundTexture);this.backgroundScreen.addChild(this.backgroundScreenRect)}function RenderDirective_ViewportModifiedCB(e,t){var n=t.viewport.getValueDirect();var r=t.backgroundImageFilename.getValueDirect().join("");t.graphMgr.renderContext.setBackgroundImage(r,n.width,n.height)}function RenderDirective_BackgroundColorModifiedCB(e,t){t.backgroundColorModified()}function RenderDirective_BackgroundImageFilenameModifiedCB(e,t){var n=t.viewport.getValueDirect();var r=formatPath(t.backgroundImageFilename.getValueDirect().join(""));t.backgroundImageFilename.removeModifiedCB(RenderDirective_BackgroundImageFilenameModifiedCB,t);t.backgroundImageFilename.setValueDirect(r[0]);t.backgroundImageFilename.addModifiedCB(RenderDirective_BackgroundImageFilenameModifiedCB,t);t.backgroundTexture.imageFilename.setValueDirect(r[0]);t.backgroundImageSet=true}function RayPickParams(){DirectiveParams.call(this);this.camera=null;this.currentCamera=null;this.viewport=new Viewport;this.clickPoint=new Vector2D;this.rayOrigin=new Vector3D;this.rayDir=new Vector3D;this.nearDistance=0;this.farDistance=0;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.sectorOrigin=new Vector3D;this.doubleSided=false;this.opacity=0;this.dissolve=0;this.clipPlanes=[]}function RayPickRecord(e,t,n){this.path=e.copy();this.intersectRecord=t;this.camera=n}function RayPickDirective(){SGDirective.call(this);this.className="RayPickDirective";this.attrType=eAttrType.RayPickDirective;this.name.setValueDirect("RayPickDirective");this.picked=[];this.viewport=new ViewportAttr;this.camera=new ReferenceAttr(null);this.clickPoint=new Vector2DAttr;this.registerAttribute(this.viewport,"viewport");this.registerAttribute(this.camera,"camera");this.registerAttribute(this.clickPoint,"clickPoint")}function BBoxParams(){DirectiveParams.call(this);this.viewSpace=false;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.minPoint=new Vector3D;this.maxPoint=new Vector3D;this.minMaxSet=false}function BBoxDirective(){SGDirective.call(this);this.className="BBoxDirective";this.attrType=eAttrType.BBoxDirective;this.min=new Vector3D;this.max=new Vector3D;this.name.setValueDirect("BBoxDirective");this.viewSpace=new BooleanAttr(false);this.viewTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.registerAttribute(this.viewSpace,"viewSpace");this.registerAttribute(this.viewTransform,"viewTransform")}function Geometry(){RenderableElement.call(this);this.className="Geometry";this.attrType=eAttrType.Geometry;this.boundingTree=new Octree;this.updateBoundingTree=false;this.selectable=new BooleanAttr(true);this.cullable=new BooleanAttr(true);this.show=new BooleanAttr(true);this.approximationLevels=new NumberAttr(1);this.sortPolygons=new BooleanAttr(false);this.flipPolygons=new BooleanAttr(false);this.shadowCaster=new BooleanAttr(false);this.shadowTarget=new BooleanAttr(true);this.highlight=new BooleanAttr(false);this.selectable.addModifiedCB(Geometry_SelectableModifiedCB,this);this.show.addModifiedCB(Geometry_ShowModifiedCB,this);this.approximationLevels.addModifiedCB(Geometry_ApproximationLevelsModifiedCB,this);this.registerAttribute(this.selectable,"selectable");this.registerAttribute(this.cullable,"cullable");this.registerAttribute(this.show,"show");this.registerAttribute(this.approximationLevels,"approximationLevels");this.registerAttribute(this.sortPolygons,"sortPolygons");this.registerAttribute(this.flipPolygons,"flipPolygons");this.registerAttribute(this.shadowCaster,"shadowCaster");this.registerAttribute(this.shadowTarget,"shadowTarget");this.registerAttribute(this.highlight,"highlight")}function Geometry_SelectableModifiedCB(e,t){}function Geometry_ShowModifiedCB(e,t){t.incrementModificationCount()}function Geometry_ApproximationLevelsModifiedCB(e,t){t.updateBoundingTree=true;t.incrementModificationCount()}function VertexGeometry(){Geometry.call(this);this.className="VertexGeometry";this.attrType=eAttrType.VertexGeometry;this.updateVertices=false;this.updateColors=false;this.updateUVCoords=[];this.uvCoords=[];this.vertexBuffer=null;this.vertices=new NumberArrayAttr;this.colors=new NumberArrayAttr;this.vertices.addModifiedCB(VertexGeometry_VerticesModifiedCB,this);this.colors.addModifiedCB(VertexGeometry_ColorsModifiedCB,this);this.registerAttribute(this.vertices,"vertices");this.registerAttribute(this.colors,"colors")}function VertexGeometry_VerticesModifiedCB(e,t){t.updateVertices=true;t.incrementModificationCount()}function VertexGeometry_ColorsModifiedCB(e,t){t.updateColors=true;t.incrementModificationCount()}function VertexGeometry_UVCoordsModifiedCB(e,t){t.updateUVCoords.push(e);t.incrementModificationCount()}function TriList(){VertexGeometry.call(this);this.className="TriList";this.attrType=eAttrType.TriList;this.primitiveType=RC_TRIANGLES;this.updateNormals=false;this.normals=new NumberArrayAttr;this.vertices.addModifiedCB(TriList_NormalsModifiedCB,this);this.normals.addModifiedCB(TriList_NormalsModifiedCB,this);this.registerAttribute(this.normals,"normals")}function TriList_NormalsModifiedCB(e,t){t.updateNormals=true;t.incrementModificationCount()}function Material(){SGNode.call(this);this.className="Material";this.attrType=eAttrType.Material;this.updateColor=false;this.updateAmbientLevel=false;this.updateDiffuseLevel=false;this.updateSpecularLevel=false;this.updateEmissiveLevel=false;this.updateAmbient=true;this.updateDiffuse=true;this.updateSpecular=true;this.updateEmissive=true;this.updateGlossiness=true;this.updateOpacity=true;this.lastOpacity=0;this.lastDoubleSided=false;this.materialDesc=new MaterialDesc;this.materialDesc.validMembersMask=MATERIALDESC_ALL_BITS;this.color=new ColorAttr(1,1,1,1);this.ambientLevel=new NumberAttr(1);this.diffuseLevel=new NumberAttr(1);this.specularLevel=new NumberAttr(1);this.emissiveLevel=new NumberAttr(0);this.ambient=new ColorAttr(.2,.2,.2,1);this.diffuse=new ColorAttr(.8,.8,.8,1);this.specular=new ColorAttr(0,0,0,1);this.emissive=new ColorAttr(0,0,0,1);this.glossiness=new NumberAttr(0);this.opacity=new NumberAttr(1);this.doubleSided=new BooleanAttr(false);this.color.addModifiedCB(Material_ColorModifiedCB,this);this.ambientLevel.addModifiedCB(Material_AmbientLevelModifiedCB,this);this.diffuseLevel.addModifiedCB(Material_DiffuseLevelModifiedCB,this);this.specularLevel.addModifiedCB(Material_SpecularLevelModifiedCB,this);this.emissiveLevel.addModifiedCB(Material_EmissiveLevelModifiedCB,this);this.ambient.addModifiedCB(Material_AmbientModifiedCB,this);this.diffuse.addModifiedCB(Material_DiffuseModifiedCB,this);this.specular.addModifiedCB(Material_SpecularModifiedCB,this);this.emissive.addModifiedCB(Material_EmissiveModifiedCB,this);this.glossiness.addModifiedCB(Material_GlossinessModifiedCB,this);this.opacity.addModifiedCB(Material_OpacityModifiedCB,this);this.doubleSided.addModifiedCB(Material_DoubleSidedModifiedCB,this);this.registerAttribute(this.color,"color");this.registerAttribute(this.ambientLevel,"ambientLevel");this.registerAttribute(this.diffuseLevel,"diffuseLevel");this.registerAttribute(this.specularLevel,"specularLevel");this.registerAttribute(this.emissiveLevel,"emissiveLevel");this.registerAttribute(this.ambient,"ambient");this.registerAttribute(this.diffuse,"diffuse");this.registerAttribute(this.specular,"specular");this.registerAttribute(this.emissive,"emissive");this.registerAttribute(this.glossiness,"glossiness");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.doubleSided,"doubleSided")}function Material_ColorModifiedCB(e,t){t.updateColor=true;t.incrementModificationCount()}function Material_AmbientLevelModifiedCB(e,t){t.updateAmbientLevel=true;t.incrementModificationCount()}function Material_DiffuseLevelModifiedCB(e,t){t.updateDiffuseLevel=true;t.incrementModificationCount()}function Material_SpecularLevelModifiedCB(e,t){t.updateSpecularLevel=true;t.incrementModificationCount()}function Material_EmissiveLevelModifiedCB(e,t){t.updateEmissiveLevel=true;t.incrementModificationCount()}function Material_AmbientModifiedCB(e,t){t.updateAmbient=true;t.incrementModificationCount()}function Material_DiffuseModifiedCB(e,t){t.updateDiffuse=true;t.incrementModificationCount()}function Material_SpecularModifiedCB(e,t){t.updateSpecular=true;t.incrementModificationCount()}function Material_EmissiveModifiedCB(e,t){t.updateEmissive=true;t.incrementModificationCount()}function Material_GlossinessModifiedCB(e,t){t.updateGlosiness=true;t.incrementModificationCount()}function Material_OpacityModifiedCB(e,t){t.updateOpacity=true;t.incrementModificationCount()}function Material_DoubleSidedModifiedCB(e,t){t.incrementModificationCount()}function Surface(){Isolator.call(this);this.className="Surface";this.attrType=eAttrType.Surface;this.color=new ColorAttr(1,1,1,1);this.ambientLevel=new NumberAttr(1);this.diffuseLevel=new NumberAttr(1);this.specularLevel=new NumberAttr(1);this.emissiveLevel=new NumberAttr(0);this.ambient=new ColorAttr(.8,.8,.8,1);this.diffuse=new ColorAttr(.2,.2,.2,1);this.specular=new ColorAttr(0,0,0,1);this.emissive=new ColorAttr(0,0,0,1);this.glossiness=new NumberAttr(0);this.opacity=new NumberAttr(1);this.doubleSided=new BooleanAttr(false);this.texturesEnabled=new BooleanAttr(true);this.colorTexturesPresent=new BooleanAttr(true);this.diffuseTexturesPresent=new BooleanAttr(true);this.luminosityTexturesPresent=new BooleanAttr(true);this.specularityTexturesPresent=new BooleanAttr(true);this.transparencyTexturesPresent=new BooleanAttr(true);this.numColorTextures=new NumberAttr(0);this.numDiffuseTextures=new NumberAttr(0);this.numLuminosityTextures=new NumberAttr(0);this.numSpecularityTextures=new NumberAttr(0);this.numTransparencyTextures=new NumberAttr(0);this.colorTexturesPresent.addModifiedCB(Surface_TexturesPresentModifiedCB,this);this.diffuseTexturesPresent.addModifiedCB(Surface_TexturesPresentModifiedCB,this);this.luminosityTexturesPresent.addModifiedCB(Surface_TexturesPresentModifiedCB,this);this.specularityTexturesPresent.addModifiedCB(Surface_TexturesPresentModifiedCB,this);this.transparencyTexturesPresent.addModifiedCB(Surface_TexturesPresentModifiedCB,this);this.registerAttribute(this.color,"color");this.registerAttribute(this.ambientLevel,"ambientLevel");this.registerAttribute(this.diffuseLevel,"diffuseLevel");this.registerAttribute(this.specularLevel,"specularLevel");this.registerAttribute(this.emissiveLevel,"emissiveLevel");this.registerAttribute(this.ambient,"ambient");this.registerAttribute(this.diffuse,"diffuse");this.registerAttribute(this.specular,"specular");this.registerAttribute(this.emissive,"emissive");this.registerAttribute(this.glossiness,"glossiness");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.doubleSided,"doubleSided");this.registerAttribute(this.texturesEnabled,"texturesEnabled");this.registerAttribute(this.colorTexturesPresent,"colorTexturesPresent");this.registerAttribute(this.diffuseTexturesPresent,"diffuseTexturesPresent");this.registerAttribute(this.luminosityTexturesPresent,"luminosityTexturesPresent");this.registerAttribute(this.specularityTexturesPresent,"specularityTexturesPresent");this.registerAttribute(this.transparencyTexturesPresent,"transparencyTexturesPresent");this.registerAttribute(this.numColorTextures,"numColorTextures");this.registerAttribute(this.numDiffuseTextures,"numDiffuseTextures");this.registerAttribute(this.numLuminosityTextures,"numLuminosityTextures");this.registerAttribute(this.numSpecularityTextures,"numSpecularityTextures");this.registerAttribute(this.numTransparencyTextures,"numTransparencyTextures");this.isolateTextures.setValueDirect(true);this.materialNode=new Material;this.materialNode.getAttribute("name").setValueDirect("Material");this.addChild(this.materialNode);this.colorTexturesNode=new Group;this.colorTexturesNode.getAttribute("name").setValueDirect("Color Textures");this.addChild(this.colorTexturesNode);this.diffuseTexturesNode=new Group;this.diffuseTexturesNode.getAttribute("name").setValueDirect("Diffuse Textures");this.addChild(this.diffuseTexturesNode);this.luminosityTexturesNode=new Group;this.luminosityTexturesNode.getAttribute("name").setValueDirect("Luminosity Textures");this.addChild(this.luminosityTexturesNode);this.specularityTexturesNode=new Group;this.specularityTexturesNode.getAttribute("name").setValueDirect("Specularity Textures");this.addChild(this.specularityTexturesNode);this.transparencyTexturesNode=new Group;this.transparencyTexturesNode.getAttribute("name").setValueDirect("Transparency Textures");this.addChild(this.transparencyTexturesNode);this.connectMaterialAttributes(this.materialNode)}function Surface_TexturesPresentModifiedCB(e,t){}function Model(){ParentableMotionElement.call(this);this.className="Model";this.attrType=eAttrType.Model;this.geometry=[];this.geometryIndices=[];this.geometryBBoxesMap=[];this.geometryAttrConnections=[];this.surfaceAttrConnections=[];this.boundingTree=new Octree;this.updateBoundingTree=false;this.bones=[];this.url=new StringAttr("");this.layer=new NumberAttr(0);this.selectable=new BooleanAttr(true);this.moveable=new BooleanAttr(true);this.cullable=new BooleanAttr(true);this.show=new BooleanAttr(true);this.approximationLevels=new NumberAttr(2);this.showApproximationLevel=new NumberAttr(-1);this.sortPolygons=new BooleanAttr(false);this.flipPolygons=new BooleanAttr(false);this.shadowCaster=new BooleanAttr(false);this.shadowTarget=new BooleanAttr(true);this.indexedGeometry=new BooleanAttr(true);this.enableSharing=new BooleanAttr(true);this.vertices=new NumberArrayAttr;this.dissolve=new NumberAttr(0);this.color=new ColorAttr(1,1,1,1);this.ambientLevel=new NumberAttr(1);this.diffuseLevel=new NumberAttr(1);this.specularLevel=new NumberAttr(1);this.emissiveLevel=new NumberAttr(0);this.ambient=new ColorAttr(.8,.8,.8,1);this.diffuse=new ColorAttr(.2,.2,.2,1);this.specular=new ColorAttr(0,0,0,1);this.emissive=new ColorAttr(0,0,0,1);this.glossiness=new NumberAttr(0);this.opacity=new NumberAttr(1);this.textureOpacity=new NumberAttr(1);this.doubleSided=new BooleanAttr(false);this.texturesEnabled=new BooleanAttr(true);this.pivotAboutGeometricCenter=new BooleanAttr(true);this.screenScaleEnabled=new BooleanAttr(false);this.screenScalePixels=new Vector3DAttr(0,0,0);this.detectCollision=new BooleanAttr(false);this.collisionDetected=new BooleanAttr(false);this.collisionList=new AttributeVector;this.obstructionDetected=new BooleanAttr(false);this.obstructionList=new AttributeVector;this.highlight=new BooleanAttr(false);this.highlightColor=new ColorAttr(1,1,0,1);this.highlightWidth=new NumberAttr(5);this.disableOnDissolve=new BooleanAttr(true);this.socketConnectors=new SocketConnectors;this.plugConnectors=new PlugConnectors;this.physicalProperties=new PhysicalPropertiesAttr;this.show.addTarget(this.enabled);this.selectable.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.cullable.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.show.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.approximationLevels.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.sortPolygons.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.sortPolygons.addModifiedCB(Model_SortPolygonsModifiedCB,this);this.flipPolygons.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.shadowCaster.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.shadowTarget.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.renderSequenceSlot.addModifiedCB(Model_GeometryAttrModifiedCB,this);this.renderSequenceSlot.addModifiedCB(Model_RenderSequenceSlotModifiedCB,this);this.dissolve.addModifiedCB(Model_DissolveModifiedCB,this);this.color.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.ambientLevel.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.diffuseLevel.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.specularLevel.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.emissiveLevel.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.ambient.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.diffuse.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.specular.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.emissive.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.glossiness.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.opacity.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.opacity.addModifiedCB(Model_OpacityModifiedCB,this);this.textureOpacity.addModifiedCB(Model_TextureOpacityModifiedCB,this);this.doubleSided.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.texturesEnabled.addModifiedCB(Model_SurfaceAttrModifiedCB,this);this.detectCollision.addModifiedCB(Model_DetectCollisionModifiedCB,this);this.collisionDetected.addModifiedCB(Model_CollisionDetectedModifiedCB,this);this.vertices.addModifiedCB(Model_VerticesModifiedCB,this);this.registerAttribute(this.url,"url");this.registerAttribute(this.layer,"layer");this.registerAttribute(this.selectable,"selectable");this.registerAttribute(this.moveable,"moveable");this.registerAttribute(this.cullable,"cullable");this.registerAttribute(this.show,"show");this.registerAttribute(this.approximationLevels,"approximationLevels");this.registerAttribute(this.showApproximationLevel,"showApproximationLevel");this.registerAttribute(this.sortPolygons,"sortPolygons");this.registerAttribute(this.flipPolygons,"flipPolygons");this.registerAttribute(this.shadowCaster,"shadowCaster");this.registerAttribute(this.shadowTarget,"shadowTarget");this.registerAttribute(this.indexedGeometry,"indexedGeometry");this.registerAttribute(this.enableSharing,"enableSharing");this.registerAttribute(this.vertices,"vertices");this.registerAttribute(this.dissolve,"dissolve");this.registerAttribute(this.color,"color");this.registerAttribute(this.ambientLevel,"ambientLevel");this.registerAttribute(this.diffuseLevel,"diffuseLevel");this.registerAttribute(this.specularLevel,"specularLevel");this.registerAttribute(this.emissiveLevel,"emissiveLevel");this.registerAttribute(this.ambient,"ambient");this.registerAttribute(this.diffuse,"diffuse");this.registerAttribute(this.specular,"specular");this.registerAttribute(this.emissive,"emissive");this.registerAttribute(this.glossiness,"glossiness");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.textureOpacity,"textureOpacity");this.registerAttribute(this.doubleSided,"doubleSided");this.registerAttribute(this.texturesEnabled,"texturesEnabled");this.registerAttribute(this.pivotAboutGeometricCenter,"pivotAboutGeometricCenter");this.registerAttribute(this.screenScaleEnabled,"screenScaleEnabled");this.registerAttribute(this.screenScalePixels,"screenScalePixels");this.registerAttribute(this.detectCollision,"detectCollision");this.registerAttribute(this.collisionDetected,"collisionDetected");this.registerAttribute(this.collisionList,"collisionList");this.registerAttribute(this.obstructionDetected,"obstructionDetected");this.registerAttribute(this.obstructionList,"obstructionList");this.registerAttribute(this.highlight,"highlight");this.registerAttribute(this.highlightColor,"highlightColor");this.registerAttribute(this.highlightWidth,"highlightWidth");this.registerAttribute(this.disableOnDissolve,"disableOnDissolve");this.registerAttribute(this.socketConnectors,"socketConnectors");this.registerAttribute(this.plugConnectors,"plugConnectors");this.registerAttribute(this.physicalProperties,"physicalProperties");this.isolatorNode=new Isolator;this.isolatorNode.getAttribute("name").setValueDirect("Isolator");this.isolatorNode.getAttribute("isolateDissolves").setValueDirect(true);this.addChild(this.isolatorNode);this.dissolveNode=new Dissolve;this.dissolveNode.getAttribute("name").setValueDirect("Dissolve");this.addChild(this.dissolveNode);this.dissolve.addTarget(this.dissolveNode.getAttribute("dissolve"));this.surfacesNode=new Group;this.surfacesNode.getAttribute("name").setValueDirect("Surfaces");this.addChild(this.surfacesNode);this.autoDisplayList.setValueDirect(true);this.autoDisplayList.addModifiedCB(Model_AutoDisplayListModifiedCB,this)}function Model_AutoDisplayListModifiedCB(e,t){t.autoDisplayListModified()}function Model_SortPolygonsModifiedCB(e,t){}function Model_RenderSequenceSlotModifiedCB(e,t){var n=e.getValueDirect();if(n>0){t.autoDisplayList.setValueDirect(false);t.enableDisplayList.setValueDirect(false)}}function Model_DissolveModifiedCB(e,t){var n=e.getValueDirect();if(n>0){t.autoDisplayList.setValueDirect(false);t.enableDisplayList.setValueDirect(false)}}function Model_OpacityModifiedCB(e,t){var n=e.getValueDirect();if(n<1){t.autoDisplayList.setValueDirect(false);t.enableDisplayList.setValueDirect(false)}}function Model_TextureOpacityModifiedCB(e,t){}function Model_Surface_NumTransparencyTexturesModifiedCB(e,t){var n=e.getValueDirect();if(n>0){t.autoDisplayList.setValueDirect(false);t.enableDisplayList.setValueDirect(false)}}function Model_GeometryBBoxModifiedCB(e,t){t.updateGeometryBBox(e.getContainer().getContainer())}function Model_SurfaceAttrModifiedCB(e,t){}function Model_GeometryAttrModifiedCB(e,t){}function Model_DetectCollisionModifiedCB(e,t){var n=e.getValueDirect();if(n){t.autoDisplayList.setValueDirect(false);t.enableDisplayList.setValueDirect(false)}}function Model_CollisionDetectedModifiedCB(e,t){}function Model_VerticesModifiedCB(e,t){}function Texture(){ParentableMotionElement.call(this);this.className="Texture";this.attrType=eAttrType.Texture;this.updateImage=false;this.updateMipmappingEnabled=false;this.setImage=false;this.imageSet=false;this.textureObj=null;this.pitch=0;this.image=new ImageAttr;this.opacity=new NumberAttr(1);this.textureType=new NumberAttr(eTextureType.Color);this.widthWrap=new NumberAttr(eTextureWrap.None);this.heightWrap=new NumberAttr(eTextureWrap.None);this.mipmappingEnabled=new BooleanAttr(false);this.blendOp=new NumberAttr(RC_MODULATE);this.image.setTransient(true);this.image.getAttribute("width").addModifiedCB(Texture_ImageModifiedCB,this);this.image.getAttribute("height").addModifiedCB(Texture_ImageModifiedCB,this);this.image.getAttribute("byteAlignment").addModifiedCB(Texture_ImageModifiedCB,this);this.image.getAttribute("pixelFormat").addModifiedCB(Texture_ImageModifiedCB,this);this.image.getAttribute("pixels").addModifiedCB(Texture_ImagePixelsModifiedCB,this);this.textureType.addModifiedCB(Texture_TextureTypeModifiedCB,this);this.opacity.addModifiedCB(Texture_OpacityModifiedCB,this);this.widthWrap.addModifiedCB(Texture_WrapModifiedCB,this);this.heightWrap.addModifiedCB(Texture_WrapModifiedCB,this);this.mipmappingEnabled.addModifiedCB(Texture_MipmappingEnabledModifiedCB,this);this.registerAttribute(this.image,"image");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.textureType,"textureType");this.registerAttribute(this.widthWrap,"widthWrap");this.registerAttribute(this.heightWrap,"heightWrap");this.registerAttribute(this.mipmappingEnabled,"mipmappingEnabled");this.registerAttribute(this.blendOp,"blendOp")}function Texture_ImageModifiedCB(e,t){t.updateImage=true;t.incrementModificationCount()}function Texture_ImagePixelsModifiedCB(e,t){t.updateImage=true;t.incrementModificationCount()}function Texture_OpacityModifiedCB(e,t){t.incrementModificationCount()}function Texture_TextureTypeModifiedCB(e,t){switch(e.getValueDirect()){case eTextureType.Color:op=RC_MODULATE;break;case eTextureType.Diffuse:case eTextureType.Luminosity:case eTextureType.Specularity:op=RC_REPLACE;break;case eTextureType.Transparency:op=RC_MODULATE;break;default:return}t.blendOp.setValueDirect(op);t.incrementModificationCount()}function Texture_WrapModifiedCB(e,t){t.incrementModificationCount()}function Texture_MipmappingEnabledModifiedCB(e,t){t.updateMipmappingEnabled=true;t.incrementModificationCount()}function MediaTexture(){Texture.call(this);this.className="MediaTexture";this.attrType=eAttrType.MediaTexture;this.updateImageFilename=false;this.updateAlphaFilename=false;this.updateNegateImage=false;this.updateNegateAlpha=false;this.imagePlayback=null;this.alphaPlayback=null;this.pixelMap=ePixelMap.Default;this.forceImageUpdate=false;this.imageFilename=new StringAttr("");this.alphaFilename=new StringAttr("");this.negateImage=new BooleanAttr(false);this.negateAlpha=new BooleanAttr(false);this.frame=new NumberAttr(-1);this.frameRetrieved=new NumberAttr(-1);this.imageFilename.addModifiedCB(MediaTexture_ImageFilenameModifiedCB,this);this.alphaFilename.addModifiedCB(MediaTexture_AlphaFilenameModifiedCB,this);this.negateImage.addModifiedCB(MediaTexture_NegateImageModifiedCB,this);this.negateAlpha.addModifiedCB(MediaTexture_NegateAlphaModifiedCB,this);this.registerAttribute(this.imageFilename,"imageFilename");this.registerAttribute(this.alphaFilename,"alphaFilename");this.registerAttribute(this.negateImage,"negateImage");this.registerAttribute(this.negateAlpha,"negateAlpha");this.registerAttribute(this.frame,"frame");this.registerAttribute(this.frameRetrieved,"frameRetrieved")}function MediaTexture_OnImageLoad(){this.container.onImageLoad()}function MediaTexture_OnAlphaLoad(){this.container.onAlphaLoad()}function MediaTexture_OnVideoLoad(){alert("MediaTexture_OnVideoLoad");this.container.onVideoLoad()}function MediaTexture_ImageFilenameModifiedCB(e,t){t.updateImageFilename=true;t.incrementModificationCount()}function MediaTexture_AlphaFilenameModifiedCB(e,t){t.updateAlphaFilename=true;t.incrementModificationCount()}function MediaTexture_NegateImageModifiedCB(e,t){t.updateNegateImage=true;t.incrementModificationCount()}function MediaTexture_NegateAlphaModifiedCB(e,t){t.updateNegateAlpha=true;t.incrementModificationCount()}function Evaluator(){Node.call(this);this.className="Evaluator";this.attrType=eAttrType.Evaluator;this.expired=new BooleanAttr(false);this.registerAttribute(this.expired,"expired");this.registerAttribute(this.enabled,"evaluate")}function SceneInspector(){Evaluator.call(this);this.className="SceneInspector";this.attrType=eAttrType.SceneInspector;this.camera=null;this.viewPosition=new Vector3DAttr(0,0,0);this.viewRotation=new Vector3DAttr(0,0,0);this.translationDelta=new Vector3DAttr(0,0,0);this.panDelta=new Vector3DAttr(0,0,0);this.trackDelta=new Vector3DAttr(0,0,0);this.rotationDelta=new Vector3DAttr(0,0,0);this.viewRelativeXAxisRotation=new BooleanAttr(false);this.viewRelativeYAxisRotation=new BooleanAttr(false);this.viewRelativeZAxisRotation=new BooleanAttr(false);this.pivotDistance=new NumberAttr(0);this.pivotPointWorld=new Vector3DAttr(0,0,0);this.resultPosition=new Vector3DAttr(0,0,0);this.resultRotation=new Vector3DAttr(0,0,0);this.upVector=new Vector3DAttr(0,0,0);this.rightVector=new Vector3DAttr(0,0,0);this.forwardVector=new Vector3DAttr(0,0,0);this.affectPosition_X=new BooleanAttr(true);this.affectPosition_Y=new BooleanAttr(true);this.affectPosition_Z=new BooleanAttr(true);this.affectRotation_X=new BooleanAttr(true);this.affectRotation_Y=new BooleanAttr(true);this.affectRotation_Z=new BooleanAttr(true);this.registerAttribute(this.viewPosition,"viewPosition");this.registerAttribute(this.viewRotation,"viewRotation");this.registerAttribute(this.translationDelta,"translationDelta");this.registerAttribute(this.panDelta,"panDelta");this.registerAttribute(this.trackDelta,"trackDelta");this.registerAttribute(this.rotationDelta,"rotationDelta");this.registerAttribute(this.viewRelativeXAxisRotation,"viewRelativeXAxisRotation");this.registerAttribute(this.viewRelativeYAxisRotation,"viewRelativeYAxisRotation");this.registerAttribute(this.viewRelativeZAxisRotation,"viewRelativeZAxisRotation");this.registerAttribute(this.pivotDistance,"pivotDistance");this.registerAttribute(this.pivotPointWorld,"pivotPointWorld");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.resultRotation,"resultRotation");this.registerAttribute(this.upVector,"upVector");this.registerAttribute(this.rightVector,"rightVector");this.registerAttribute(this.forwardVector,"forwardVector");this.registerAttribute(this.affectPosition_X,"affectPosition_X");this.registerAttribute(this.affectPosition_Y,"affectPosition_Y");this.registerAttribute(this.affectPosition_Z,"affectPosition_Z");this.registerAttribute(this.affectRotation_X,"affectRotation_X");this.registerAttribute(this.affectRotation_Y,"affectRotation_Y");this.registerAttribute(this.affectRotation_Z,"affectRotation_Z")}function ArcballInspector(){Evaluator.call(this);this.className="ArcballInspector";this.attrType=eAttrType.ArcballInspector;this.sphereCenter=new Vector3DAttr(0,0,0);this.sphereRadius=new NumberAttr(0);this.mouseDown=new Vector2DAttr(0,0);this.mouseNow=new Vector2DAttr(0,0);this.quatAtMouseDown=new QuaternionAttr(1,0,0,0);this.viewport=new ViewportAttr(0,0,0,0);this.worldTransform=new Matrix4x4Attr;this.viewTransform=new Matrix4x4Attr;this.constrainToAxis=new BooleanAttr(false);this.constraintAxis=new Vector3DAttr(0,0,0);this.resultQuat=new QuaternionAttr(1,0,0,0);this.registerAttribute(this.sphereCenter,"sphereCenter");this.registerAttribute(this.sphereRadius,"sphereRadius");this.registerAttribute(this.mouseDown,"mouseDown");this.registerAttribute(this.mouseNow,"mouseNow");this.registerAttribute(this.quatAtMouseDown,"quatAtMouseDown");this.registerAttribute(this.viewport,"viewport");this.registerAttribute(this.worldTransform,"worldTransform");this.registerAttribute(this.viewTransform,"viewTransform");this.registerAttribute(this.constrainToAxis,"constrainToAxis");this.registerAttribute(this.constraintAxis,"constraintAxis");this.registerAttribute(this.resultQuat,"resultQuat")}function ArcballInspector_ViewTransformModifiedCB(e,t){}function EndState(){this.initialized=false;this.startKeyIts=[];this.endKeyIts=[];this.startTime=-FLT_MAX;this.endTime=FLT_MAX}function KeyframeInterpolator(){Evaluator.call(this);this.className="KeyframeInterpolator";this.attrType=eAttrType.KeyframeInterpolator;this.lastTime=0;this.evaluated=false;this.endState=new EndState;this.time=new NumberAttr(0);this.channels=new AttributeVector;this.startKeys=new AttributeVector;this.endKeys=new AttributeVector;this.preBehaviors=new AttributeVector;this.postBehaviors=new AttributeVector;this.resultValues=new AttributeVector;this.time.addModifiedCB(KeyframeInterpolator_TimeModifiedCB,this);this.registerAttribute(this.time,"time");this.registerAttribute(this.channels,"channels");this.registerAttribute(this.startKeys,"startKeys");this.registerAttribute(this.endKeys,"endKeys");this.registerAttribute(this.preBehaviors,"preBehaviors");this.registerAttribute(this.postBehaviors,"postBehaviors");this.registerAttribute(this.resultValues,"resultValues")}function KeyframeInterpolator_TimeModifiedCB(e,t){t.timeModified()}function KeyframeInterpolator_EndStateModifiedCB(e,t){t.updateEndState()}function BBoxLocator(){Evaluator.call(this);this.className="BBoxLocator";this.attrType=eAttrType.BBoxLocator;this.viewPosition=new Vector3DAttr(0,0,0);this.viewTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.viewVolume=new ViewVolumeAttr;this.viewport=new ViewportAttr(0,0,0,0);this.nearDistance=new NumberAttr(0);this.bbox=new BBoxAttr;this.bboxView=new BBoxAttr;this.closeness=new NumberAttr(.5);this.resultPosition=new Vector3DAttr(0,0,0);this.resultWidth=new NumberAttr(0);this.resultFarDistance=new NumberAttr(0);this.resultPivotDistance=new NumberAttr(0);this.registerAttribute(this.viewPosition,"viewPosition");this.registerAttribute(this.viewTransform,"viewTransform");this.registerAttribute(this.viewVolume,"viewVolume");this.registerAttribute(this.viewport,"viewport");this.registerAttribute(this.nearDistance,"nearDistance");this.registerAttribute(this.bbox,"bbox");this.registerAttribute(this.bboxView,"bboxView");this.registerAttribute(this.closeness,"closeness");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.resultWidth,"resultWidth");this.registerAttribute(this.resultFarDistance,"resultFarDistance");this.registerAttribute(this.resultPivotDistance,"resultPivotDistance")}function worldUnitsPerPixelPersp(e,t,n){var r=2*Math.atan2(1,t);var i=2*Math.atan(e.width/e.height*Math.tan(r/2));var s=Math.tan(i/2)*n*2;var o=Math.tan(r/2)*n*2;var u=s/e.width;var a=o/e.height;return{x:u,y:a}}function worldUnitsPerPixelOrtho(e,t){var n=t*(e.height/e.width);var r=t/e.width;var i=n/e.height;return{x:r,y:i}}function toScreenSpace(e,t,n,r){var i=t.transformw(e.x,e.y,e.z,1);i=n.transformw(i.x,i.y,i.z,i.w);if(i.w==0){return{x:-Infinity,y:-Infinity,z:-Infinity}}i.x/=i.w;i.y/=i.w;i.x=r.x+r.width-(-i.x+1)*r.width/2;i.y=r.y+r.height-(i.y+1)*r.height/2;i.z=0;return{x:i.x,y:i.y,z:i.z}}function RasterComponent(){ParentableMotionElement.call(this);this.className="RasterComponent";this.attrType=eAttrType.RasterComponent;this.rcEventListener=null;this.opacity=new NumberAttr(1);this.anchor=new Vector2DAttr(0,0);this.origin=new StringAttr("bottomLeft");this.show=new BooleanAttr(true);this.selectable=new BooleanAttr(true);this.cullable=new BooleanAttr(true);this.clampToViewport=new BooleanAttr(false);this.rasterPosition=new Vector3DAttr;this.inspectionOffset=new Vector3DAttr;this.componentRect=new RectAttr;this.screenRect=new RectAttr;this.stylesMap.size.addModifiedCB(RasterComponent_StylesMapSizeModifiedCB,this);this.show.addModifiedCB(RasterComponent_ShowModifiedCB,this);this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.anchor,"anchor");this.registerAttribute(this.origin,"origin");this.registerAttribute(this.show,"show");this.registerAttribute(this.selectable,"selectable");this.registerAttribute(this.cullable,"cullable");this.registerAttribute(this.rasterPosition,"rasterPosition");this.registerAttribute(this.inspectionOffset,"inspectionOffset");this.registerAttribute(this.clampToViewport,"clampToViewport");this.registerAttribute(this.componentRect,"componentRect");this.registerAttribute(this.screenRect,"screenRect");this.renderSequenceSlot.setValueDirect(65535)}function RasterComponent_StylesMapSizeModifiedCB(e,t){t.stylesMapSizeModified()}function RasterComponent_StylesMapElementEventModifiedCB(e,t){t.stylesMapElementEventModified(e.getValueDirect().join(""))}function RasterComponent_ShowModifiedCB(e,t){t.showModified()}function Label(){RasterComponent.call(this);this.className="Label";this.attrType=eAttrType.Label;this.iconRect=new Rect(0,0,0,0);this.labelRect=new Rect(0,0,0,0);this.text=new StringAttr("");this.description=new StringAttr("");this.depthShadingEnabled=new BooleanAttr(true);this.labelStyle=new LabelStyleAttr;this.iconStyle=new IconStyleAttr;this.balloonTipLabelStyle=new BalloonTipLabelStyleAttr;this.text.addModifiedCB(Label_TextModifiedCB,this);this.description.addModifiedCB(Label_DescriptionModifiedCB,this);this.labelStyle.backgroundColor.addModifiedCB(Label_LabelStyleBackgroundColorModifiedCB,this);this.labelStyle.backgroundOpacity.addModifiedCB(Label_LabelStyleBackgroundOpacityModifiedCB,this);this.labelStyle.fontStyle.borderColor.addModifiedCB(Label_LabelStyleFontBorderModifiedCB,this);this.labelStyle.fontStyle.borderWidth.addModifiedCB(Label_LabelStyleFontBorderModifiedCB,this);this.labelStyle.fontStyle.color.addModifiedCB(Label_LabelStyleFontStyleColorModifiedCB,this);this.labelStyle.fontStyle.font.addModifiedCB(Label_LabelStyleFontStyleFontModifiedCB,this);this.labelStyle.fontStyle.opacity.addModifiedCB(Label_LabelStyleFontStyleOpacityModifiedCB,this);this.labelStyle.fontStyle.size.addModifiedCB(Label_LabelStyleFontStyleSizeModifiedCB,this);this.labelStyle.fontStyle.style.addModifiedCB(Label_LabelStyleFontStyleStyleModifiedCB,this);this.labelStyle.format.addModifiedCB(Label_LabelStyleFormatModifiedCB,this);this.labelStyle.padding.addModifiedCB(Label_LabelStylePaddingModifiedCB,this);this.iconStyle.url.addModifiedCB(Label_IconStyleUrlModifiedCB,this);this.balloonTipLabelStyle.addModifiedCB(Label_BalloonTipLabelStyleModifiedCB,this);this.registerAttribute(this.text,"text");this.registerAttribute(this.description,"description");this.registerAttribute(this.depthShadingEnabled,"depthShadingEnabled");this.registerAttribute(this.labelStyle,"labelStyle");this.registerAttribute(this.iconStyle,"iconStyle");this.registerAttribute(this.balloonTipLabelStyle,"balloonTipLabelStyle");this.styles.registerStyle(this.iconStyle,"iconStyle");this.styles.registerStyle(this.labelStyle,"labelStyle");this.styles.registerStyle(this.balloonTipLabelStyle,"balloonTipLabelStyle")}function CreateHTMLLabel(e,t,n){var r=null;var i=null;var s=null;var o=null;if(bridgeworks.rasterComponents){r=document.createElement("div");if(r){r.setAttribute("id",e);i=document.createElement("span");if(i){i.setAttribute("id",t);i.setAttribute("class","labelText");i.style.visibility="hidden";i.style.position="absolute";i.style.zIndex=3;i.onmousedown=function(){};i.onmouseup=function(){};i.onmousemove=function(){};i.onselectstart=new Function("return false");r.appendChild(i)}o=document.createElement("div");if(o){o.setAttribute("id",n);o.style.position="absolute";o.style.zIndex=3;s=document.createElement("img");if(s){s.setAttribute("class","labelIcon");s.style.visibility="hidden";s.src="BwContent/images/1x1.png";s.onmouseup=function(){};s.onmousemove=function(){};s.onmousedown=function(){return false};o.appendChild(s)}r.appendChild(o)}bridgeworks.rasterComponents.appendChild(r)}}return{div:r,label:i,iconDiv:o,iconImg:s}}function Label_TextModifiedCB(e,t){t.htmlLabel.innerHTML=e.getValueDirect().join("")}function Label_DescriptionModifiedCB(e,t){var n=e.getValueDirect().join("");if(n.length>0){var r=t.balloonTipLabelStyle.htmlLabelStyle.width.getValueDirect();var i=t.balloonTipLabelStyle.htmlLabelStyle.height.getValueDirect();if(r==0||i==0){var s=t.registry.find("ViewportMgr");if(r==0)r=s.getAttribute("width").getValueDirect()*.5;if(i==0)i=s.getAttribute("height").getValueDirect()*.5}var o="#"+t.iconId;n="<div class='gmap' style='"+"width:"+(r+12)+"px;"+"height:12px;'>"+"<a href='javascript:void($(\""+o+"\").btOff());'><img src='libs/jquery/bt/close.gif' alt='close' width='12' height='12' class='gmap-close' /></a> "+"</div>"+"<div style='"+"width:"+(r+12)+"px;"+"height:"+i+"px;"+"overflow:auto;'>"+n+"</div>";var u=t.balloonTipLabelStyle.bgColor.getValueDirect();var a="rgba("+u.r*255+","+u.g*255+","+u.b*255+","+u.a*255+")";$(o).bt(n,{trigger:"click",width:r+12+"px",height:i+12+"px",shrinkToFit:r==0&&i==0?true:false,centerPointX:.9,spikeLength:t.balloonTipLabelStyle.balloonOffset.getValueDirect(),spikeGirth:30,padding:15,cornerRadius:25,fill:a,strokeStyle:"#ABABAB",strokeWidth:1,shadow:true,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:8,shadowColor:"rgba(0,0,0,.9)",shadowOverlap:false,noShadowOpts:{strokeStyle:"#999",strokeWidth:2}})}else{var o="#"+t.iconId;$(o).bt("",{trigger:"click"})}}function Label_LabelStyleBackgroundColorModifiedCB(e,t){var n=e.getValueDirect();n.a*=e.getContainer().getAttribute("backgroundOpacity").getValueDirect();t.htmlLabel.style.backgroundColor="rgba("+n.r*255+","+n.g*255+","+n.b*255+","+n.a+")"}function Label_LabelStyleBackgroundOpacityModifiedCB(e,t){Label_LabelStyleBackgroundColorModifiedCB(t.labelStyle.backgroundColor,t)}function Label_LabelStyleFontBorderModifiedCB(e,t){t.labelStyleFontBorderModified()}function Label_LabelStyleFontStyleColorModifiedCB(e,t){var n=e.getValueDirect();n.a*=e.getContainer().getAttribute("opacity").getValueDirect();t.htmlLabel.style.color="rgba("+n.r*255+","+n.g*255+","+n.b*255+","+n.a+")"}function Label_LabelStyleFontStyleFontModifiedCB(e,t){t.htmlLabel.style.fontFamily=e.getValueDirect().join("")}function Label_LabelStyleFontStyleOpacityModifiedCB(e,t){Label_LabelStyleFontStyleColorModifiedCB(t.labelStyle.fontStyle.color,t);Label_LabelStyleFontBorderModifiedCB(null,t)}function Label_LabelStyleFontStyleSizeModifiedCB(e,t){t.htmlLabel.style.fontSize=e.getValueDirect()+"pt"}function Label_LabelStyleFontStyleStyleModifiedCB(e,t){switch(e.getValueDirect().join("")){case"Bold":t.htmlLabel.style.fontWeight="bold";break;case"Heavy":t.htmlLabel.style.fontWeight="bolder";break;case"Normal":t.htmlLabel.style.fontWeight="normal";break;case"Thin":t.htmlLabel.style.fontWeight="lighter";break}}function Label_LabelStyleFormatModifiedCB(e,t){var n=e.getValueDirect().join("")}function Label_LabelStylePaddingModifiedCB(e,t){var n=e.getValueDirect()+"px";t.htmlLabel.style.paddingLeft=n;t.htmlLabel.style.paddingRight=n;t.htmlLabel.style.paddingTop=n;t.htmlLabel.style.paddingBottom=n}function Label_IconStyleUrlModifiedCB(e,t){var n=e.getValueDirect().join("");switch(n){case"":break;default:t.htmlIconImg.src=document.location.href+"/../BwContent/"+n;break}}function Label_BalloonTipLabelStyleModifiedCB(e,t){Label_DescriptionModifiedCB(t.description,t)}function BalloonTipLabel(){RasterComponent.call(this);this.className="BallonTipLabel";this.attrType=eAttrType.BalloonTipLabel;this.qtip=null;this.qtip_api=null;this.labelRect=new Rect(0,0,0,0);this.balloonTipLabelStyle=new BalloonTipLabelStyleAttr;this.labelWidth=new NumberAttr(0);this.labelHeight=new NumberAttr(0);this.balloonTipLabelStyle.bgColor.addModifiedCB(BalloonTipLabel_balloonTipLabelStyleBgColorModifiedCB,this);this.balloonTipLabelStyle.htmlLabelStyle.addModifiedCB(BalloonTipLabel_BalloonTipLabelStyleHTMLLabelStyleModifiedCB,this);this.balloonTipLabelStyle.displayMode.addModifiedCB(BalloonTipLabel_balloonTipLabelStyleDisplayModeModifiedCB,this);this.show.addModifiedCB(BalloonTipLabel_showModifiedCB,this);this.renderSequenceSlot.addModifiedCB(BalloonTipLabel_renderSequenceSlotModifiedCB,this);this.registerAttribute(this.balloonTipLabelStyle,"balloonTipLabelStyle");this.registerAttribute(this.labelWidth,"labelWidth");this.registerAttribute(this.labelHeight,"labelHeight");this.styles.registerStyle(this.balloonTipLabelStyle,"balloonTipLabelStyle")}function CreateHTMLBalloonTipLabel(e){var t=null;if(bridgeworks.rasterComponents){t=document.createElement("a");if(t){t.setAttribute("id",e);t.style.visibility="hidden";t.style.position="absolute";bridgeworks.rasterComponents.appendChild(t)}}var e="a[id="+e+"]";var n=$(e).qtip({style:{classes:"qtip-bootstrap qtip-rounded qtip-shadow qtip-close"},content:{text:"",button:true},hide:{event:false}});return{label:t,qtip:n}}function BalloonTipLabel_balloonTipLabelStyleModifiedCB(e,t){t.balloonTipLabelStyleModified()}function BalloonTipLabel_balloonTipLabelStyleBgColorModifiedCB(e,t){}function BalloonTipLabel_balloonTipLabelStyleDisplayModeModifiedCB(e,t){t.balloonTipLabelStyleDisplayModeModified(e.getValueDirect().join(""))}function BalloonTipLabel_BalloonTipLabelStyleHTMLLabelStyleModifiedCB(e,t){t.balloonTipLabelStyleHtmlLabelStyleModified()}function BalloonTipLabel_HTMLLabel_PageDimensionsModifiedCB(e,t){}function BalloonTipLabel_showModifiedCB(e,t){t.showModified(e.getValueDirect())}function BalloonTipLabel_renderSequenceSlotModifiedCB(e,t){}function LineList(){VertexGeometry.call(this);this.className="LineList";this.attrType=eAttrType.LineList;this.width=1}function PointList(){VertexGeometry.call(this);this.className="PointList";this.attrType=eAttrType.PointList;this.width=1}function range(e,t,n){var r,i=n-t;if(i==0){return{value:t,i:0}}r=e-i*Math.floor((e-t)/i);return{value:r,i:-Math.floor((r-e)/i+(r>e?.5:-.5))}}function hermite(e){var t,n;t=e*e;n=e*t;var r=3*t-n-n;var i=1-r;var s=n-t;var o=s-t+e;return{h1:i,h2:r,h3:o,h4:s}}function bezier(e,t,n,r,i){var s,o,u,a,f;a=i*i;f=a*i;u=3*(t-e);o=3*(n-t)-u;s=r-e-u-o;return s*f+o*a+u*i+e}function bez2_time(e,t,n,r,i,s,o){var u,a;a=s+(o-s)*.5;u=bezier(e,t,n,r,a);if(Math.abs(i-u)>1e-4){if(u>i)o=a;else s=a;return bez2_time(e,t,n,r,i,s,o)}else return a}function bez2(e,t,n){var r,i,s,o=0,u=1;if(e.getShape()==eKeyframeShape_Bezier2D)r=e.getTime()+e.getParams(2);else r=e.getTime()+(t.getTime()-e.getTime())/3;s=bez2_time(e.getTime(),r,t.getTime()+t.getParams(0),t.getTime(),n,o,u);if(e.getShape()==eKeyframeShape_Bezier2D)i=e.getValue()+e.getParams(3);else i=e.getValue()+e.getParams(1)/3;return bezier(e.getValue(),i,t.getParams(1)+t.getValue(),t.getValue(),s)}function outgoing(e,t,n,r){var i,s,o,u,a;switch(t.getShape()){case eKeyframeShape.TCB:i=(1-t.getParams(0))*(1+t.getParams(1))*(1+t.getParams(2));s=(1-t.getParams(0))*(1-t.getParams(1))*(1-t.getParams(2));o=n.getValue()-t.getValue();if(t!=r){u=(n.getTime()-t.getTime())/(n.getTime()-e.prev(t).getTime());a=u*(i*(t.getValue()-e.prev(t).getValue())+s*o)}else a=s*o;break;case eKeyframeShape.Linear:o=n.getValue()-t.getValue();if(t!=r){u=(n.getTime()-t.getTime())/(n.getTime()-e.prev(t).getTime());a=u*(t.getValue()-e.prev(t).getValue()+o)}else a=o;break;case eKeyframeShape.Bezier1D:a=t.getParams(1);if(t!=r)a*=(n.getTime()-t.getTime())/(n.getTime()-e.prev(t).getTime());break;case eKeyframeShape.Bezier2D:a=t.getParams(3)*(n.getTime()-t.getTime());if(Math.abs(t.getParams(2))>1e-5)a/=t.getParams(2);else a*=1e5;break;case eKeyframeShape.Stepped:default:a=0;break}return a}function incoming(e,t,n,r){var i,s,o,u,a;switch(n.getShape()){case eKeyframeShape.Linear:o=n.getValue()-t.getValue();if(n!=r){u=(n.getTime()-t.getTime())/(e.next(n).getTime()-t.getTime());a=u*(e.next(n).getValue()-n.getValue()+o)}else a=o;break;case eKeyframeShape.TCB:i=(1-n.getParams(0))*(1-n.getParams(1))*(1+n.getParams(2));s=(1-n.getParams(0))*(1+n.getParams(1))*(1-n.getParams(2));o=n.getValue()-t.getValue();if(n!=r){u=(n.getTime()-t.getTime())/(e.next(n).getTime()-t.getTime());a=u*(s*(e.next(n).getValue()-n.getValue())+i*o)}else a=i*o;break;case eKeyframeShape.Bezier1D:a=n.getParams(0);if(n!=r)a*=(n.getTime()-t.getTime())/(e.next(n).getTime()-t.getTime());break;return a;case eKeyframeShape.Bezier2D:a=n.getParams(1)*(n.getTime()-t.getTime());if(Math.abs(n.getParams(0))>1e-5)a/=n.getParams(0);else a*=1e5;break;case eKeyframeShape.Stepped:default:a=0;break}return a}function interpolate(e,t,n,r,i,s){if(t.length==0){return 0}if(t.length==1){return n.getValue()}var o=0;var u=0;var a=0;var f=0;var l;if(e<n.getTime()){switch(i){case eEndBehavior.Reset:return 0;case eEndBehavior.Constant:return n.getValue();case eEndBehavior.Repeat:l=range(e,n.getTime(),r.getTime());e=l.value;break;case eEndBehavior.Oscillate:l=range(e,n.getTime(),r.getTime());e=l.value;o=l.i;if(o%2){e=r.getTime()-n.getTime()-e}break;case eEndBehavior.OffsetRepeat:l=range(e,n.getTime(),r.getTime());e=l.value;o=l.i;f=o*(r.getValue()-n.getValue());break;case eEndBehavior.Linear:a=outgoing(t,n,t.next(n),n)/(t.next(n).getTime()-n.getTime());return a*(e-n.getTime())+n.getValue()}}else if(e>r.getTime()){switch(s){case eEndBehavior.Reset:return 0;case eEndBehavior.Constant:return r.getValue();case eEndBehavior.Repeat:l=range(e,n.getTime(),r.getTime());e=l.value;break;case eEndBehavior.Oscillate:l=range(e,n.getTime(),r.getTime());e=l.value;o=l.i;if(o%2){e=r.getTime()-n.getTime()-e}break;case eEndBehavior.OffsetRepeat:l=range(e,n.getTime(),r.getTime());e=l.value;o=l.i;f=o*(r.getValue()-n.getValue());break;case eEndBehavior.Linear:u=incoming(t,t.prev(r),r,r)/(r.getTime()-t.prev(r).getTime());return u*(e-r.getTime())+r.getValue()}}var c=n;while(t.next(c)&&e>t.next(c).getTime()){c=t.next(c)}var h=t.next(c);if(e==c.getTime()){return c.getValue()+f}else if(e==h.getTime()){return h.getValue()+f}var p=(e-c.getTime())/(h.getTime()-c.getTime());switch(h.getShape()){case eKeyframeShape.TCB:case eKeyframeShape.Bezier1D:{a=outgoing(t,c,h,n);u=incoming(t,c,h,r);var l=hermite(p);return l.h1*c.getValue()+l.h2*h.getValue()+l.h3*a+l.h4*u+f};case eKeyframeShape.Bezier2D:return bez2(c,h,e)+f;case eKeyframeShape.Linear:return c.getValue()+p*(h.getValue()-c.getValue())+f;case eKeyframeShape.Stepped:return c.getValue()+f;default:return 0}}function StateRec(){this.material=null;this.renderStateRec=null;this.cullBackFace=false;this.textures=null;this.projectionTextures=null;this.globalIllumination=new Color}function GetCurrentState(e){var t=new StateRec;t.material=e.getCurrentMaterial();t.renderStateRec=e.renderState.getState(RENDERSTATE_ALL_BITS);t.cullBackFace=e.renderContext.enabled(eRenderMode.CullBackFace);t.textures=e.textureArrayStack.top();t.projectionTextures=e.projectionTextureArrayStack.top();t.globalIllumination.copy(e.renderContext.getGlobalIllumination());return t}function SetCurrentState(e,t){e.setCurrentMaterial(t.material);e.renderState.setState(RENDERSTATE_ALL_BITS,t.renderStateRec);if(t.cullBackFace){e.renderContext.enable(eRenderMode.CullBackFace)}else{e.renderContext.disable(eRenderMode.CullBackFace)}e.textureArrayStack.load(t.textures);e.projectionTextureArrayStack.load(t.projectionTextures);e.renderContext.setGlobalIllumination(t.globalIllumination)}function DistanceSortRec(e,t,n){this.distance=e||0;this.geometry=t||null;this.dissolve=n||0;this.stateRec=null}function DistanceSortAgent(){Agent.call(this);this.className="DistanceSortAgent";this.graphMgr=null;this.sortRecs=[]}function DistanceSortAgent_CompareSortRecs(e,t){return t.distance-e.distance}function MapProjectionCalculator(){Evaluator.call(this);this.className="MapProjectionCalculator";this.attrType=eAttrType.MapProjectionCalculator;this.unitsMultiplier=1;this.positionCalculators=[];this.geoPositionCalculators=[];this.mapProjection=new StringAttr("equalArc");this.elevationModel=new StringAttr;this.center2D=new Vector2DAttr(0,0);this.units=new StringAttr("kilometers");this.geoPosition=new Vector3DAttr(0,0,0);this.pointWorld=new Vector3DAttr;this.resultPosition=new Vector3DAttr;this.resultGeoPosition=new Vector3DAttr;this.units.addModifiedCB(MapProjectionCalculator_UnitsModifiedCB,this);this.pointWorld.addModifiedCB(MapProjectionCalculator_PointWorldModifiedCB,this);this.registerAttribute(this.mapProjection,"mapProjection");this.registerAttribute(this.elevationModel,"elevationModel");this.registerAttribute(this.center2D,"center2d");this.registerAttribute(this.units,"units");this.registerAttribute(this.geoPosition,"geoPosition");this.registerAttribute(this.geoPosition,"position");this.registerAttribute(this.pointWorld,"pointWorld");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.resultGeoPosition,"resultGeoPosition");this.registerAttribute(this.resultGeoPosition,"resultGeoLocation");this.positionCalculators["equalArc"]=ComputeEqualArc3DPosition;this.geoPositionCalculators["equalArc"]=ComputeEqualArcGeoPosition;this.units.setValueDirect("meters")}function MapProjectionCalculator_UnitsModifiedCB(e,t){switch(e.getValueDirect().join("")){case"kilometers":{t.unitsMultiplier=1}break;case"meters":{t.unitsMultiplier=1e3}break}}function MapProjectionCalculator_PointWorldModifiedCB(e,t){}function ComputeEqualArc3DPosition(e,t,n,r,i,s){if(n>90||n<-90||e>180||e<-180){return undefined}var o=(e-r)*EQ_ARC_ONE_DEG_LON_KM*s;var u=t;var a=(n-i)*EQ_ARC_ONE_DEG_LAT_KM*s;return{x:o,y:u,z:a}}function ComputeEqualArcGeoPosition(e,t,n,r,i,s){var o=e/s/EQ_ARC_ONE_DEG_LON_KM+r;var u=t;var a=n/s/EQ_ARC_ONE_DEG_LAT_KM+i;return{lon:o,alt:u,lat:a}}function NullObject(){ParentableMotionElement.call(this);this.className="NullObject";this.attrType=eAttrType.NullObject}function Transform(){SGNode.call(this);this.className="Transform";this.attrType=eAttrType.Transform;this.matrix=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.matrixTransform=this.matrix.getValueDirect();this.updateMatrix=true;this.matrix.addModifiedCB(Transform_MatrixModifiedCB,this);this.registerAttribute(this.matrix,"matrix")}function Transform_MatrixModifiedCB(e,t){t.updateMatrix=true;t.incrementModificationCount()}function QuaternionRotate(){Transform.call(this);this.className="QuaternionRotate";this.attrType=eAttrType.QuaternionRotate;this.rotationQuat=new QuaternionAttr(1,0,0,0);this.rotation=new Vector3DAttr(0,0,0);this.updateRotationQuat=true;this.rotationQuat.addModifiedCB(QuaternionRotate_RotationQuatModifiedCB,this);this.registerAttribute(this.rotationQuat,"rotationQuat");this.registerAttribute(this.rotation,"rotation")}function QuaternionRotate_RotationQuatModifiedCB(e,t){t.updateRotationQuat=true;t.incrementModificationCount()}function Rotate(){Transform.call(this);this.className="Rotate";this.attrType=eAttrType.Rotate;this.rotation=new Vector3DAttr(0,0,0);this.updateRotation=true;this.rotation.addModifiedCB(Rotate_RotationModifiedCB,this);this.registerAttribute(this.rotation,"rotation")}function Rotate_RotationModifiedCB(e,t){t.updateRotation=true;t.incrementModificationCount()}function Scale(){Transform.call(this);this.className="Scale";this.attrType=eAttrType.Scale;this.scale=new Vector3DAttr(1,1,1);this.updateScale=true;this.scale.addModifiedCB(Scale_ScaleModifiedCB,this);this.registerAttribute(this.scale,"scale")}function Scale_ScaleModifiedCB(e,t){t.updateScale=true;t.incrementModificationCount()}function Translate(){Transform.call(this);this.className="Translate";this.attrType=eAttrType.Translate;this.translation=new Vector3DAttr(0,0,0);this.updateTranslation=true;this.translation.addModifiedCB(Translate_TranslationModifiedCB,this);this.registerAttribute(this.translation,"translation")}function Translate_TranslationModifiedCB(e,t){t.updateTranslation=true;t.incrementModificationCount()}function MultiTargetObserver(){Evaluator.call(this);this.className="MultiTargetObserver";this.attrType=eAttrType.MultiTargetObserver;this.targetPosition=[];this.targets=new NumberAttr(0);this.position=new Vector3DAttr(0,0,0);this.distanceFromFirstTarget=new NumberAttr(0);this.affectPitch=new BooleanAttr(true);this.affectHeading=new BooleanAttr(true);this.resultPosition=new Vector3DAttr(0,0,0);this.resultPitch=new NumberAttr(0);this.resultHeading=new NumberAttr(0);this.registerAttribute(this.targets,"targets");this.registerAttribute(this.position,"position");this.registerAttribute(this.distanceFromFirstTarget,"distanceFromFirstTarget");this.registerAttribute(this.affectPitch,"affectPitch");this.registerAttribute(this.affectHeading,"affectHeading");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.resultPitch,"resultPitch");this.registerAttribute(this.resultHeading,"resultHeading")}function SerializeParams(){DirectiveParams.call(this);this.serialized=null}function SerializeDirective(){SGDirective.call(this);this.className="SerializeDirective";this.attrType=eAttrType.SerializeDirective;this.serialized=null}function CollideParams(){DirectiveParams.call(this);this.viewSpace=false;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.detectCollisions=new Array}function CollideRec(e,t,n){this.model=e;this.tree=t;this.worldMatrix=new Matrix4x4;this.worldMatrix.loadMatrix(n)}function CollideDirective(){SGDirective.call(this);this.className="CollideDirective";this.attrType=eAttrType.CollideDirective;this.name.setValueDirect("CollideDirective")}function HighlightTarget(){this.projMatrix=new Matrix4x4;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.camera=null;this.viewport=new Viewport;this.geometries=new Array;this.center=new Vector3D;this.highlightColor_r=0;this.highlightColor_g=0;this.highlightColor_b=0;this.highlightColor_a=0;this.highlightWidth=0}function HighlightParams(){DirectiveParams.call(this);this.projMatrix=new Matrix4x4;this.viewMatrix=new Matrix4x4;this.worldMatrix=new Matrix4x4;this.camera=null;this.viewport=new Viewport;this.targets=new Array}function HighlightDirective(){SGDirective.call(this);this.className="HighlightDirective";this.attrType=eAttrType.HighlightDirective;this.vertexBuffer=null;this.name.setValueDirect("HighlightDirective");this.highlightType=new NumberAttr(eHighlightType.None);this.highlightColor=new ColorAttr(1,1,0,1);this.highlightWidth=new NumberAttr(5);this.highlightColor.addModifiedCB(HighlightDirective_HighlightColorModifiedCB,this);this.registerAttribute(this.highlightType,"highlightType");this.registerAttribute(this.highlightColor,"highlightColor");this.registerAttribute(this.highlightWidth,"highlightWidth")}function HighlightDirective_HighlightColorModifiedCB(e,t){t.highlightColorModified()}function ObjectMotionDesc(){this.validMembersMask=OBJECTMOTION_ALL_BITS;this.panVelocity=new Vector3D(0,0,0);this.linearVelocity=new Vector3D(0,0,0);this.angularVelocity=new Vector3D(0,0,0);this.scalarVelocity=new Vector3D(0,0,0);this.duration=0;this.stopOnCollision=true}function ObjectMover(){Evaluator.call(this);this.className="ObjectMover";this.attrType=eAttrType.ObjectMover;this.targetObject=null;this.motionQueue=new Queue;this.activeMotion=null;this.activeDuration=0;this.lastCollisionDetected=false;this.target=new StringAttr("");this.timeIncrement=new NumberAttr(0);this.linearSpeed=new NumberAttr(0);this.angularSpeed=new NumberAttr(0);this.panVelocity=new Vector3DAttr;this.linearVelocity=new Vector3DAttr;this.angularVelocity=new Vector3DAttr;this.scalarVelocity=new Vector3DAttr;this.enabled.addModifiedCB(ObjectMover_EnabledModifiedCB,this);this.target.addModifiedCB(ObjectMover_TargetModifiedCB,this);this.registerAttribute(this.target,"target");this.registerAttribute(this.timeIncrement,"timeIncrement");this.registerAttribute(this.linearSpeed,"linearSpeed");this.registerAttribute(this.angularSpeed,"angularSpeed")}function ObjectMover_EnabledModifiedCB(e,t){var n=e.getValueDirect();if(!n){t.motionQueue.clear();t.panVelocity.setValueDirect(0,0,0);t.linearVelocity.setValueDirect(0,0,0);t.angularVelocity.setValueDirect(0,0,0);t.scalarVelocity.setValueDirect(0,0,0)}}function ObjectMover_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.connectTarget(r)}}function ObjectMover_TargetCollisionDetectedModifiedCB(e,t){var n=e.getValueDirect();var r=e.getContainer().getAttribute("collisionList");t.collisionDetected(r);t.lastCollisionDetected=r.Size()>0?true:false}function ObjectMover_TargetObstructionDetectedModifiedCB(e,t){var n=e.getValueDirect();var r=e.getContainer().getAttribute("obstructionList");t.obstructionDetected(r)}function AnimalMover(){ObjectMover.call(this);this.className="AnimalMover";this.attrType=eAttrType.AnimalMover;this.linearDirection=null}function WalkSimulator(){SceneInspector.call(this);this.className="WalkSimulator";this.attrType=eAttrType.WalkSimulator;this.sceneInspector_pivotDistanceValue=0;this.selector_computePivotDistanceValue=0;this.groundPlane=new PlaneAttr;this.linearDelta=new Vector3DAttr(0,0,0);this.angularDelta=new Vector3DAttr(0,0,0);this.linearSensitivity=new Vector3DAttr(1,1,1);this.angularSensitivity=new Vector3DAttr(1,1,1);this.resultLinear=new Vector3DAttr;this.resultAngular=new Vector3DAttr;this.enabled.addModifiedCB(WalkSimulator_EnabledModifiedCB,this);this.linearDelta.addModifiedCB(WalkSimulator_LinearDeltaModifiedCB,this);this.angularDelta.addModifiedCB(WalkSimulator_AngularDeltaModifiedCB,this);this.registerAttribute(this.groundPlane,"groundPlane");this.registerAttribute(this.linearDelta,"linearDelta");this.registerAttribute(this.angularDelta,"angularDelta");this.registerAttribute(this.linearSensitivity,"linearSensitivity");this.registerAttribute(this.angularSensitivity,"angularSensitivity");this.registerAttribute(this.resultLinear,"resultLinear");this.registerAttribute(this.resultAngular,"resultAngular");this.viewRelativeXAxisRotation.setValueDirect(true);this.viewRelativeYAxisRotation.setValueDirect(true);this.viewRelativeZAxisRotation.setValueDirect(true);this.groundPlane.normal.setValueDirect(0,1,0)}function WalkSimulator_EnabledModifiedCB(e,t){t.enabledModified()}function WalkSimulator_LinearDeltaModifiedCB(e,t){{t.evaluate()}}function WalkSimulator_AngularDeltaModifiedCB(e,t){{t.evaluate()}}function Cube(){TriList.call(this);this.className="Cube";this.attrType=eAttrType.Cube;this.updateTriList=true;this.transform=new Matrix4x4;this.updateTransform=false;this.materialNode=new Material;this.updateMaterial=false;this.color=new ColorAttr(1,1,1,1);this.opacity=new NumberAttr(1);this.position=new Vector3DAttr(0,0,0);this.rotation=new Vector3DAttr(0,0,0);this.scale=new Vector3DAttr(1,1,1);this.color.addModifiedCB(Cube_MaterialModifiedCB,this);this.opacity.addModifiedCB(Cube_MaterialModifiedCB,this);this.position.addModifiedCB(Cube_PositionModifiedCB,this);this.rotation.addModifiedCB(Cube_RotationModifiedCB,this);this.scale.addModifiedCB(Cube_ScaleModifiedCB,this);this.registerAttribute(this.color,"color");this.registerAttribute(this.opacity,"opacity");this.registerAttribute(this.position,"position");this.registerAttribute(this.rotation,"rotation");this.registerAttribute(this.scale,"scale");var e=[-.25,-.25,.25,-.25,.25,.25,-.25,.25,-.25,-.25,-.25,-.25,-.25,-.25,.25,-.25,.25,-.25,.25,-.25,-.25,.25,-.25,.25,-.25,-.25,.25,-.25,-.25,-.25,.25,-.25,-.25,-.25,-.25,.25,.25,-.25,-.25,-.25,.25,-.25,.25,.25,-.25,.25,-.25,-.25,-.25,-.25,-.25,-.25,.25,-.25,.25,-.25,.25,.25,.25,-.25,.25,.25,.25,.25,-.25,-.25,.25,.25,-.25,.25,-.25,.25,.25,.25,-.25,-.25,.25,.25,.25,.25,.25,.25,.25,-.25,-.25,.25,-.25,-.25,.25,.25,.25,-.25,.25,.25,.25,.25,-.25,.25,.25,-.25,-.25,.25,.25,-.25,.25,-.25,.25,.25];var t=[-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1];this.vertices.setValue(e);this.normals.setValue(t);this.color.addTarget(this.materialNode.getAttribute("color"));this.opacity.addTarget(this.materialNode.getAttribute("opacity"))}function Cube_PositionModifiedCB(e,t){t.updateTransform=true}function Cube_RotationModifiedCB(e,t){t.updateTransform=true}function Cube_ScaleModifiedCB(e,t){t.updateTransform=true}function Cube_MaterialModifiedCB(e,t){t.updateMaterial=true}function ScreenRect(){TriList.call(this);this.className="ScreenRect";this.attrType=eAttrType.ScreenRect;this.primitiveType=RC_TRIANGLE_STRIP;this.textureColorMask=new ColorAttr(0,0,0,1);this.registerAttribute(this.textureColorMask,"textureColorMask");var e=[-1,-1,1,-1,1,1,1,-1,1,1,1,1];var t=[0,0,-1,0,0,-1,0,0,-1,0,0,-1];var n=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];this.vertices.setValueDirect(e);this.normals.setValueDirect(t);this.colors.setValueDirect(n)}function MorphEffector(){Evaluator.call(this);this.className="MorphEffector";this.attrType=eAttrType.MorphEffector;this.morphAmt=new NumberAttr(0);this.morphIncr=new NumberAttr(0);this.sourceVertices=new NumberArrayAttr;this.targetVertices=new NumberArrayAttr;this.resultVertices=new NumberArrayAttr;this.registerAttribute(this.morphAmt,"morphAmt");this.registerAttribute(this.morphIncr,"morphIncr");this.registerAttribute(this.sourceVertices,"sourceVertices");this.registerAttribute(this.targetVertices,"targetVertices");this.registerAttribute(this.resultVertices,"resultVertices")}function Bone(){AttributeContainer.call(this);this.className="Bone";this.attrType=eAttrType.Bone;this.parent=null;this.children=[];this.translationMatrix=new Matrix4x4;this.rotationMatrix=new Matrix4x4;this.rotationQuat=new Quaternion;this.scaleMatrix=new Matrix4x4;this.pivotMatrix=new Matrix4x4;this.matrix=new Matrix4x4;this.restMatrix=new Matrix4x4;this.restMatrixInv=new Matrix4x4;this.parentMatrix=new Matrix4x4;this.boneMatrix=new Matrix4x4;this.updatePosition=false;this.updateRotation=false;this.updateScale=false;this.updatePivot=false;this.updateRestPosition=false;this.updateRestRotation=false;this.updateRestLength=false;this.updateFalloffType=false;this.updateParentTransform=false;this.updateParentRestTransform=false;this.name=new StringAttr("");this.position=new Vector3DAttr(0,0,0);this.rotation=new Vector3DAttr(0,0,0);this.scale=new Vector3DAttr(1,1,1);this.pivot=new Vector3DAttr(0,0,0);this.restPosition=new Vector3DAttr(0,0,0);this.restRotation=new Vector3DAttr(0,0,0);this.restLength=new NumberAttr(0);this.strength=new NumberAttr(0);this.falloffType=new NumberAttr(eBoneFalloffType.InverseDistance);this.scaleBoneStrength=new BooleanAttr(false);this.transform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.parentTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.restTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.parentRestTransform=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.position.addModifiedCB(Bone_PositionModifiedCB,this);this.rotation.addModifiedCB(Bone_RotationModifiedCB,this);this.scale.addModifiedCB(Bone_ScaleModifiedCB,this);this.pivot.addModifiedCB(Bone_PivotModifiedCB,this);this.restPosition.addModifiedCB(Bone_RestPositionModifiedCB,this);this.restRotation.addModifiedCB(Bone_RestRotationModifiedCB,this);this.restLength.addModifiedCB(Bone_RestLengthModifiedCB,this);this.falloffType.addModifiedCB(Bone_FalloffTypeModifiedCB,this);this.parentTransform.addModifiedCB(Bone_ParentTransformModifiedCB,this);this.parentRestTransform.addModifiedCB(Bone_ParentRestTransformModifiedCB,this);this.registerAttribute(this.name,"name");this.registerAttribute(this.position,"position");this.registerAttribute(this.rotation,"rotation");this.registerAttribute(this.scale,"scale");this.registerAttribute(this.pivot,"pivot");this.registerAttribute(this.restPosition,"restPosition");this.registerAttribute(this.restRotation,"restRotation");this.registerAttribute(this.restLength,"restLength");this.registerAttribute(this.strength,"strength");this.registerAttribute(this.falloffType,"falloffType");this.registerAttribute(this.scaleBoneStrength,"scaleBoneStrength")}function Bone_PositionModifiedCB(e,t){t.updatePosition=true}function Bone_RotationModifiedCB(e,t){t.updateRotation=true}function Bone_ScaleModifiedCB(e,t){t.updateScale=true}function Bone_PivotModifiedCB(e,t){t.updatePivot=true}function Bone_RestPositionModifiedCB(e,t){t.updateRestPosition=true}function Bone_RestRotationModifiedCB(e,t){t.updateRestRotation=true}function Bone_RestLengthModifiedCB(e,t){t.updateRestLength=true}function Bone_FalloffTypeModifiedCB(e,t){t.updateFalloffType=true}function Bone_ParentTransformModifiedCB(e,t){t.updateParentTransform=true}function Bone_ParentRestTransformModifiedCB(e,t){t.updateParentRestTransform=true}function BoneEffector(){Evaluator.call(this);this.className="BoneEffector";this.attrType=eAttrType.BoneEffector;this.bones=[];this.verticesArray=[];this.normalsArray=[];this.resultVerticesArray=[];this.resultNormalsArray=[];this.boneFalloffValuesMap=[];this.falloffSums=[];this.updateVertices=false;this.updateNormals=false;this.vertices=new NumberArrayAttr;this.normals=new NumberArrayAttr;this.resultVertices=new NumberArrayAttr;this.resultNormals=new NumberArrayAttr;this.vertices.addModifiedCB(BoneEffector_VerticesModifiedCB,this);this.normals.addModifiedCB(BoneEffector_NormalsModifiedCB,this);this.registerAttribute(this.vertices,"vertices");this.registerAttribute(this.normals,"normals");this.registerAttribute(this.resultVertices,"resultVertices");this.registerAttribute(this.resultNormals,"resultNormals")}function BoneEffector_VerticesModifiedCB(e,t){t.updateVertices=true}function BoneEffector_NormalsModifiedCB(e,t){t.updateNormals=true}function SnapConnector(){AttributeContainer.call(this);this.className="SnapConnector";this.attrType=eAttrType.SnapConnector;this.type=new StringAttr("");this.normal=new Vector3DAttr(0,0,0);this.connected=new BooleanAttr(false);this.registerAttribute(this.type,"type");this.registerAttribute(this.normal,"normal");this.registerAttribute(this.connected,"connected")}function SocketConnector(){SnapConnector.call(this);this.className="SocketConnector";this.attrType=eAttrType.SocketConnector;this.slot1=new SphereAttr;this.slot2=new SphereAttr;this.registerAttribute(this.slot1,"slot1");this.registerAttribute(this.slot2,"slot2")}function PlugConnector(){SnapConnector.call(this);this.className="PlugConnector";this.attrType=eAttrType.PlugConnector;this.pin1=new SphereAttr;this.pin2=new SphereAttr;this.registerAttribute(this.pin1,"pin1");this.registerAttribute(this.pin2,"pin2")}function SocketConnectors(){AttributeVector.call(this,new SocketConnectorAllocator);this.className="SocketConnectors";this.attrType=eAttrType.SocketConnectors;this.appendParsedElements.setValueDirect(true)}function SocketConnectorAllocator(){}function PlugConnectors(){AttributeVector.call(this,new PlugConnectorAllocator);this.className="PlugConnectors";this.attrType=eAttrType.PlugConnectors;this.appendParsedElements.setValueDirect(true)}function PlugConnectorAllocator(){}function PhysicsSimulator(){Evaluator.call(this);this.className="PhysicsSimulator";this.attrType=eAttrType.PhysicsSimulator;this.world=null;this.physicsBodies=[];this.physicsShapes=[];this.bodyAdded=[];this.bodyModels=[];this.updateWorld=false;this.updateBodies=false;this.timeIncrement=new NumberAttr(0);this.gravity=new Vector3DAttr(0,-9.8,0);this.bodies=new AttributeVector(new StringAttrAllocator);this.bodies.getAttribute("appendParsedElements").setValueDirect(true);this.gravity.addModifiedCB(PhysicsSimulator_GravityModifiedCB,this);this.bodies.addModifiedCB(PhysicsSimulator_BodiesModifiedCB,this);this.registerAttribute(this.timeIncrement,"timeIncrement");this.registerAttribute(this.gravity,"gravity");this.registerAttribute(this.bodies,"bodies");this.initPhysics()}function PhysicsSimulator_GravityModifiedCB(e,t){t.updateWorld=true}function PhysicsSimulator_BodiesModifiedCB(e,t){t.updateBodies=true}function PhysicsSimulator_ModelScaleModifiedCB(e,t){t.updatePhysicsShape(e.getContainer())}function PhysicsSimulator_ModelParentModifiedCB(e,t){t.updateBodies=true}function getEventTypeByName(e){var t=eEventNameMap[e];if(t==undefined){if(e.indexOf("VK")!=-1){var n=e;var r="";var i=e.indexOf(".");if(i!=-1){n=e.substring(0,i);r=e.substring(i+1)}var s=eKeyCodeMap[n];if(s){switch(r){case"Down":t=eEventType.KeyDown_First+s;break;case"Up":default:t=eEventType.KeyUp_First+s;break}}}}return t}function Event(e,t,n){AttributeContainer.call(this);this.className="Event";this.type=e||eEventType.Unknown;this.time=t||0;this.userData=n||null}function InputEvent(e,t,n,r,i,s){Event.call(this,e,t,s);this.className="InputEvent";this.inputId=n||0;this.modifiers=r||0;this.state=i||0}function MouseEvent(e,t,n,r,i,s,o,u){InputEvent.call(this,e,t,n,r,i,u);this.className="MouseEvent";this.x=s||0;this.y=o||0}function KeyboardEvent(e,t,n,r,i,s){InputEvent.call(this,e,t,n,r,i,s);this.className="KeyboardEvent"}function MouseEventState(){this.leftButtonDown=false;this.middleButtonDown=false;this.rightButtonDown=false}function EventAdapter(){AttributeContainer.call(this);this.className="EventAdapter";this.mouseState=new MouseEventState;this.name=new StringAttr("EventAdapter");this.registerAttribute(this.name,"name")}function EventListener(){Agent.call(this);this.className="EventListener";this.events=[];this.listen=new BooleanAttr(true);this.trigger=new StringAttr("");this.numResponses=new NumberAttr(1);this.event=new StringAttr("");this.event.addModifiedCB(EventListener_EventModifiedCB,this);this.registerAttribute(this.listen,"listen");this.registerAttribute(this.trigger,"trigger");this.registerAttribute(this.numResponses,"numResponses");this.registerAttribute(this.event,"event")}function EventListener_EventModifiedCB(e,t){var n=getEventTypeByName(e.getValueDirect().join(""));{t.addEventType(n)}}function EventMgr(){AttributeContainer.call(this);this.className="EventMgr";this.listeners=[];this.name=new StringAttr("EventMgr");this.registerAttribute(this.name,"name")}function DeviceHandler(){EventListener.call(this);this.className="DeviceHandler";this.attrType=eAttrType.DeviceHandler;this.inputMessage=new NumberAttr(0);this.inputId=new NumberAttr(0);this.inputModifier=new NumberAttr(0);this.inputState=new NumberAttr(0);this.prevInputState=new NumberAttr(0);this.output=new StringAttr("");this.registerAttribute(this.inputMessage,"inputMessage");this.registerAttribute(this.inputId,"inputId");this.registerAttribute(this.inputModifier,"inputModifier");this.registerAttribute(this.inputState,"inputState");this.registerAttribute(this.prevInputState,"prevInputState");this.registerAttribute(this.output,"output");this.numResponses.setValueDirect(-1)}function MouseHandler(){DeviceHandler.call(this);this.className="MouseHandler";this.attrType=eAttrType.MouseHandler;this.name.setValueDirect("MouseHandler");this.lastX=0;this.lastY=0;this.x=new NumberAttr(0);this.y=new NumberAttr(0);this.deltaX=new NumberAttr(0);this.deltaY=new NumberAttr(0);this.delta=new Vector2DAttr(0,0);this.registerAttribute(this.x,"deviceX");this.registerAttribute(this.y,"deviceY");this.registerAttribute(this.deltaX,"deltaX");this.registerAttribute(this.deltaY,"deltaY");this.registerAttribute(this.delta,"delta");this.addEventType(eEventType.MouseMove);this.addEventType(eEventType.MouseLeftDown)}function KeyboardHandler(){DeviceHandler.call(this);this.className="KeyboardHandler";this.attrType=eAttrType.KeyboardHandler;this.name.setValueDirect("KeyboardHandler");this.keyString=new StringAttr;this.registerAttribute(this.keyString,"keyString")}function Command(){EventListener.call(this);this.className="Command";this.attrType=eAttrType.Command;this.borrowedAttributes=[];this.attributeValuePairs=[];this.attributeRefPairs=[];this.target=new StringAttr("");this.registerAttribute(this.target,"target")}function SetCommand(){Command.call(this);this.className="Set";this.attrType=eAttrType.Set;this.target.addModifiedCB(SetCommand_TargetModifiedCB,this)}function SetCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=n.split(",");t.targets.length=0;for(var i=0;i<r.length;i++){var s=t.registry.find(r[i]);if(s){t.registerTargetAttributes(s,r[i])}}setAttributeBin(t.attributeValuePairs)}function ConnectionDesc(){this.sourceContainer=null;this.targetContainer=null;this.sourceAttribute=null;this.targetAttribute=null;this.sourceAttributeName="";this.targetAttributeName="";this.sourceIndex=-1;this.targetIndex=-1}function registerConnectionHelper(e,t,n){gConnectionHelpers[e]=new Pair(t,n)}function ConnectAttributesCommand(){Command.call(this);this.className="ConnectAttributes";this.attrType=eAttrType.ConnectAttributes;this.connections=new Stack;this.connectionHelper=new Pair(null,null);this.sourceContainer=new StringAttr("");this.targetContainer=new StringAttr("");this.sourceAttribute=new StringAttr("");this.targetAttribute=new StringAttr("");this.source=new StringAttr("");this.negate=new BooleanAttr(false);this.persist=new BooleanAttr(true);this.connectionType=new StringAttr("");this.source.addTarget(this.sourceAttribute);this.target.addTarget(this.targetAttribute);this.sourceContainer.addModifiedCB(ConnectAttributesCommand_SourceContainerModifiedCB,this);this.targetContainer.addModifiedCB(ConnectAttributesCommand_TargetContainerModifiedCB,this);this.sourceAttribute.addModifiedCB(ConnectAttributesCommand_SourceAttributeModifiedCB,this);this.targetAttribute.addModifiedCB(ConnectAttributesCommand_TargetAttributeModifiedCB,this);this.connectionType.addModifiedCB(ConnectAttributesCommand_ConnectionTypeModifiedCB,this);this.negate.addModifiedCB(ConnectAttributesCommand_NegateModifiedCB,this);this.registerAttribute(this.sourceContainer,"sourceContainer");this.registerAttribute(this.sourceContainer,"sourceEvaluator");this.registerAttribute(this.targetContainer,"targetContainer");this.registerAttribute(this.sourceAttribute,"sourceAttribute");this.registerAttribute(this.sourceAttribute,"sourceOutput");this.registerAttribute(this.targetAttribute,"targetAttribute");this.registerAttribute(this.source,"source");this.registerAttribute(this.negate,"negate");this.registerAttribute(this.persist,"persist");this.registerAttribute(this.connectionType,"connectionType")}function ConnectAttributesCommand_SourceContainerModifiedCB(e,t){if(t.connections.length()==0){t.connections.push(new ConnectionDesc)}var n=t.connections.top();n.sourceContainer=t.registry.find(e.getValueDirect().join(""))}function ConnectAttributesCommand_TargetContainerModifiedCB(e,t){if(t.connections.length()==0){t.connections.push(new ConnectionDesc)}var n=t.connections.top();n.targetContainer=t.registry.find(e.getValueDirect().join(""))}function ConnectAttributesCommand_SourceAttributeModifiedCB(e,t){var n=null;var r=-1;if(t.connections.length()==0){t.connections.push(new ConnectionDesc)}var i=t.connections.top();if(i.sourceContainer){var s=e.getValueDirect().join("").split(":");n=i.sourceContainer.getAttribute(s[0]);if(s.length>1){r=s[1]}}else{n=t.registry.find(e.getValueDirect().join(""));if(n){i.sourceContainer=n.getContainer();if(!i.sourceContainer)i.sourceContainer=n}}i.sourceAttribute=n;i.sourceAttributeName=e.getValueDirect().join("");i.sourceIndex=r;if(i.sourceAttribute&&i.targetAttribute){t.connections.push(new ConnectionDesc);t.connections.top().sourceContainer=i.sourceContainer;t.connections.top().targetContainer=i.targetContainer}}function ConnectAttributesCommand_TargetAttributeModifiedCB(e,t){var n=null;var r=-1;if(t.connections.length()==0){t.connections.push(new ConnectionDesc)}var i=t.connections.top();if(i.targetContainer){var s=e.getValueDirect().join("").split(":");n=i.targetContainer.getAttribute(s[0]);if(s.length>1){r=s[1]}}else{n=t.registry.find(e.getValueDirect().join(""));if(n){i.targetContainer=n.getContainer();if(!i.targetContainer)i.targetContainer=n}}i.targetAttribute=n;i.targetAttributeName=e.getValueDirect().join("");i.targetIndex=r;if(i.sourceAttribute&&i.targetAttribute){t.connections.push(new ConnectionDesc);t.connections.top().sourceContainer=i.sourceContainer;t.connections.top().targetContainer=i.targetContainer}}function ConnectAttributesCommand_ConnectionTypeModifiedCB(e,t){var n=gConnectionHelpers[e.getValueDirect().join("")];if(n){t.connectionHelper.first=n.first;t.connectionHelper.second=n.second}}function ConnectAttributesCommand_NegateModifiedCB(e,t){var n=e.getValueDirect();if(n){t.className="DisconnectAttributes";t.attrType=eAttrType.DisconnectAttributes}else{t.className="ConnectAttributes";t.attrType=eAttrType.ConnectAttributes}}function AutoInterpolateCommand(){Command.call(this);this.className="AutoInterpolate";this.attrType=eAttrType.AutoInterpolate;this.kfi=null;this.numValueChannels=0;this.numReferenceChannels=0;this.numChannels=0;this.shape=new NumberAttr(eKeyframeShape.Linear);this.duration=new NumberAttr(1);this.preBehavior=new NumberAttr(eEndBehavior.Constant);this.postBehavior=new NumberAttr(eEndBehavior.Constant);this.renderAndRelease=new BooleanAttr(true);this.target.addModifiedCB(AutoInterpolateCommand_TargetModifiedCB,this);this.registerAttribute(this.shape,"shape");this.registerAttribute(this.duration,"duration");this.registerAttribute(this.preBehavior,"preBehavior");this.registerAttribute(this.postBehavior,"postBehavior");this.registerAttribute(this.renderAndRelease,"renderAndRelease")}function AutoInterpolateCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=n.split(",");t.targets.length=0;for(var i=0;i<r.length;i++){var s=t.registry.find(r[i]);if(s){t.registerTargetAttributes(s,r[i])}}setAttributeBin(t.attributeValuePairs);setAttributePairs(t.attributeRefPairs)}function MotionInterpolateCommand(){AutoInterpolateCommand.call(this);this.className="MotionInterpolateCommand";this.startPosition=new Vector3DAttr;this.endPosition=new Vector3DAttr;this.resultPosition=new Vector3DAttr;this.positionControl=new Vector3DAttr;this.easeIn=new BooleanAttr(true);this.easeOut=new BooleanAttr(true);this.midPosition=new Vector3DAttr;this.registerAttribute(this.startPosition,"startPosition");this.registerAttribute(this.endPosition,"endPosition");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.positionControl,"positionControl");this.registerAttribute(this.easeIn,"easeIn");this.registerAttribute(this.easeOut,"easeOut")}function MotionInterpolateCommand_ResultPositionModifiedCB(e,t){var n=e.getValueDirect();OutputDebugMsg("x: "+n.x+" y: "+n.y+" z: "+n.z+"\n")}function LocateCommand(){Command.call(this);this.className="LocateCommand";this.attrType=eAttrType.Locate;this.targetNode=null;this.directive=new BBoxDirective;this.locator=new BBoxLocator;this.inspector=null;this.duration=new NumberAttr(1);this.transition=new BooleanAttr(true);this.updateClipPlanes=new BooleanAttr(false);this.shape=new NumberAttr(eKeyframeShape.TCB);this.easeIn=new BooleanAttr(true);this.easeOut=new BooleanAttr(true);this.resultPosition=new Vector3DAttr;this.resultFarDistance=new NumberAttr;this.resultWidth=new NumberAttr;this.target.addModifiedCB(LocateCommand_TargetModifiedCB,this);this.registerAttribute(this.duration,"duration");this.registerAttribute(this.transition,"transition");this.registerAttribute(this.updateClipPlanes,"updateClipPlanes");this.registerAttribute(this.shape,"shape");this.registerAttribute(this.easeIn,"easeIn");this.registerAttribute(this.easeOut,"easeOut");this.registerAttribute(this.resultPosition,"resultPosition");this.registerAttribute(this.resultFarDistance,"resultFarDistance");this.registerAttribute(this.resultWidth,"resultWidth");this.registerAttribute(this.locator.getAttribute("closeness"),"closeness");this.registerAttribute(this.locator.getAttribute("resultPivotDistance"),"resultPivotDistance")}function LocateCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.targetNode=r;t.inspector=t.registry.find("SceneInspector")}else{console.debug("TODO: "+arguments.callee.name)}}function PlayCommand(){Command.call(this);this.className="Play";this.attrType=eAttrType.Play;this.evaluators=[];this.negate=new BooleanAttr(false);this.registerAttribute(this.negate,"negate");this.target.addModifiedCB(PlayCommand_TargetModifiedCB,this);this.negate.addModifiedCB(PlayCommand_NegateModifiedCB,this)}function PlayCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=n.split(",");t.targets.length=0;for(var i=0;i<r.length;i++){var s=t.registry.find(r[i]);if(s){t.evaluators[i]=s}}}function PlayCommand_NegateModifiedCB(e,t){var n=e.getValueDirect();if(n){t.className="Pause";t.attrType=eAttrType.Pause}else{t.className="Play";t.attrType=eAttrType.Play}}function RemoveCommand(){Command.call(this);this.className="RemoveCommand";this.attrType=eAttrType.Remove;this.targetAttribute=null;this.target.addModifiedCB(RemoveCommand_TargetModifiedCB,this)}function RemoveCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");t.targetAttribute=t.registry.find(n)}function StopCommand(){Command.call(this);this.className="Stop";this.attrType=eAttrType.Stop;this.evaluators=[];this.target.addModifiedCB(StopCommand_TargetModifiedCB,this)}function StopCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=n.split(",");t.targets.length=0;for(var i=0;i<r.length;i++){var s=t.registry.find(r[i]);if(s){t.evaluators[i]=s}}}function CommandSequence(){Command.call(this);this.className="CommandSequence";this.attrType=eAttrType.CommandSequence;this.sequence=[]}function CommandMgr(){AttributeContainer.call(this);this.className="CommandMgr";this.commandSeqStack=new Stack;this.name=new StringAttr("CommandMgr");this.registerAttribute(this.name,"name")}function CommandMgr_CommandTriggerModifiedCB(e,t){this.createCommandTrigger(e,t)}function AttributeTrigger(e,t,n,r,i,s){this.input=e;this.trigger=t;this.target=n;this.lastValues=[];this.input.getValue(this.lastValues);this.attrType=eAttrType.AttributeTrigger;this.item=r;this.not=i;this.executionCount=s;this.input.addModifiedCB(AttributeTrigger_InputModifiedCB,this);var o=this.input.getLength();if(o==1){this.item=0}}function AttributeTrigger_InputModifiedCB(e,t){t.execute()}function BwRegistry(){AttributeRegistry.call(this);this.className="BwRegistry";this.attrType=eAttrType.AttributeRegistry;this.rootPtr=new ReferenceAttr(null);this.subtreePtr=new ReferenceAttr(null);this.sgPointer=new StringAttr("");this.maxAnimationTimeInSecs=new NumberAttr(0);this.rootPtr.addModifiedCB(BwRegistry_RootPtrModifiedCB,this);this.sgPointer.addModifiedCB(BwRegistry_SgPointerModifiedCB,this);this.registerAttribute(this.rootPtr,"rootPtr");this.registerAttribute(this.subtreePtr,"subtreePtr");this.registerAttribute(this.sgPointer,"sgPointer");this.registerAttribute(this.maxAnimationTimeInSecs,"maxAnimationTimeInSecs");this.registerByName(this,"NodeMgr");this.registerByName(this,"EvaluatorMgr")}function BwRegistry_RootPtrModifiedCB(e,t){var n=e.getValueDirect()}function BwRegistry_SgPointerModifiedCB(e,t){t.sgPointerModified()}function BwSceneInspector(){SceneInspector.call(this);this.className="BwSceneInspector";this.attrType=eAttrType.SceneInspector;this.viewport=new Viewport;this.worldUnitsPerPixel=new Vector2D;this.clickPosWorld=new Vector3D;this.last_d3=0;this.translationSensitivity=new Vector3DAttr(1,1,1);this.panSensitivity=new Vector3DAttr(1,1,1);this.trackSensitivity=new Vector3DAttr(1,1,1);this.rotationSensitivity=new Vector3DAttr(1,1,1);this.zoomSensitivity=new NumberAttr(1);this.invertedTranslationDelta=new Vector3DAttr(0,0,0);this.invertedPanDelta=new Vector3DAttr(0,0,0);this.invertedTrackDelta=new Vector3DAttr(0,0,0);this.invertedRotationDelta=new Vector3DAttr(0,0,0);this.zoomDelta=new NumberAttr(0);this.invertedZoomDelta=new NumberAttr(0);this.selectionOccurred=new BooleanAttr(false);this.viewRelativeTranslationDelta=new Vector3DAttr(0,0,0);this.translationDelta.addModifiedCB(BwSceneInspector_TranslationDeltaModifiedCB,this);this.panDelta.addModifiedCB(BwSceneInspector_PanDeltaModifiedCB,this);this.trackDelta.addModifiedCB(BwSceneInspector_TrackDeltaModifiedCB,this);this.rotationDelta.addModifiedCB(BwSceneInspector_RotationDeltaModifiedCB,this);this.invertedTranslationDelta.addModifiedCB(BwSceneInspector_InvertedTranslationDeltaModifiedCB,this);this.invertedPanDelta.addModifiedCB(BwSceneInspector_InvertedPanDeltaModifiedCB,this);this.invertedTrackDelta.addModifiedCB(BwSceneInspector_InvertedTrackDeltaModifiedCB,this);this.invertedRotationDelta.addModifiedCB(BwSceneInspector_InvertedRotationDeltaModifiedCB,this);this.zoomDelta.addModifiedCB(BwSceneInspector_ZoomDeltaModifiedCB,this);this.invertedZoomDelta.addModifiedCB(BwSceneInspector_InvertedZoomDeltaModifiedCB,this);this.selectionOccurred.addModifiedCB(BwSceneInspector_SelectionOccurredCB,this);this.viewRelativeTranslationDelta.addModifiedCB(BwSceneInspector_TrackDeltaModifiedCB,this);this.registerAttribute(this.translationSensitivity,"translationSensitivity");this.registerAttribute(this.panSensitivity,"panSensitivity");this.registerAttribute(this.trackSensitivity,"trackSensitivity");this.registerAttribute(this.rotationSensitivity,"rotationSensitivity");this.registerAttribute(this.zoomSensitivity,"zoomSensitivity");this.registerAttribute(this.invertedTranslationDelta,"invertedTranslationDelta");this.registerAttribute(this.invertedPanDelta,"invertedPanDelta");this.registerAttribute(this.invertedTrackDelta,"invertedTrackDelta");this.registerAttribute(this.invertedRotationDelta,"invertedRotationDelta");this.registerAttribute(this.zoomDelta,"zoomDelta");this.registerAttribute(this.invertedZoomDelta,"invertedZoomDelta");this.registerAttribute(this.selectionOccurred,"selectionOccurred");this.registerAttribute(this.viewRelativeTranslationDelta,"viewRelativeTranslationDelta");this.orphan.setValueDirect(true);this.enabled.addModifiedCB(BwSceneInspector_EnabledModifiedCB,this)}function BwSceneInspector_TranslationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.translate(e.getValueDirect())}}function BwSceneInspector_PanDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.pan(e.getValueDirect())}}function BwSceneInspector_TrackDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.track(e.getValueDirect())}}function BwSceneInspector_RotationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.rotate(e.getValueDirect())}}function BwSceneInspector_InvertedTranslationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){var r=e.getValueDirect();r.x*=-1;r.y*=-1;r.z*=-1;t.translate(r);if(r.x!=0||r.y!=0||r.z!=0)alert("rotate")}}function BwSceneInspector_InvertedPanDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){var r=e.getValueDirect();r.x*=-1;r.y*=-1;r.z*=-1;t.pan(r)}}function BwSceneInspector_InvertedTrackDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){var r=e.getValueDirect();r.x*=-1;r.y*=-1;r.z*=-1;t.track(r)}}function BwSceneInspector_InvertedRotationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){var r=e.getValueDirect();r.x*=-1;r.y*=-1;r.z*=-1;t.rotate(r)}}function BwSceneInspector_ZoomDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.zoom(e.getValueDirect())}}function BwSceneInspector_InvertedZoomDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.zoom(e.getValueDirect()*-1)}}function BwSceneInspector_SelectionOccurredCB(e,t){var n=t.registry.find("Selector");if(n){if(n.selections.viewports.length>0){t.viewport.loadViewport(n.selections.viewports[0])}t.clickPosWorld.copy(n.getAttribute("pointWorld").getValueDirect());var r=n.getAttribute("pointView").getValueDirect();t.getWorldUnitsPerPixel(r.z)}}function BwSceneInspector_EnabledModifiedCB(e,t){var n=e.getValueDirect()}function ObjectInspector(){ArcballInspector.call(this);this.className="ObjectInspector";this.attrType=eAttrType.ObjectInspector;this.camera=null;this.selectedObjects=[];this.pointView=new Vector3DAttr(1,1,1);this.translationDelta=new Vector3DAttr(0,0,0);this.rotationDelta=new Vector3DAttr(0,0,0);this.translationNow=new Vector3DAttr(0,0,0);this.rotationNow=new Vector3DAttr(0,0,0);this.selectionOccurred=new BooleanAttr(false);this.selectionCleared=new BooleanAttr(false);this.translationDelta.addModifiedCB(ObjectInspector_TranslationDeltaModifiedCB,this);this.rotationDelta.addModifiedCB(ObjectInspector_RotationDeltaModifiedCB,this);this.translationNow.addModifiedCB(ObjectInspector_TranslationNowModifiedCB,this);this.rotationNow.addModifiedCB(ObjectInspector_RotationNowModifiedCB,this);this.selectionOccurred.addModifiedCB(ObjectInspector_SelectionOccurredCB,this);this.selectionCleared.addModifiedCB(ObjectInspector_SelectionClearedCB,this);this.registerAttribute(this.pointView,"pointView");this.registerAttribute(this.translationDelta,"translationDelta");this.registerAttribute(this.rotationDelta,"rotationDelta");this.registerAttribute(this.translationNow,"translationNow");this.registerAttribute(this.rotationNow,"rotationNow");this.registerAttribute(this.selectionOccurred,"selectionOccurred");this.registerAttribute(this.selectionCleared,"selectionCleared");this.orphan.setValueDirect(true);this.enabled.addModifiedCB(ObjectInspector_EnabledModifiedCB,this)}function ObjectInspector_TranslationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.translationDeltaModified()}}function ObjectInspector_RotationDeltaModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.rotationDeltaModified()}}function ObjectInspector_TranslationNowModifiedCB(e,t){}function ObjectInspector_RotationNowModifiedCB(e,t){var n=t.enabled.getValueDirect();if(n){t.rotationNowModified()}}function ObjectInspector_SelectionOccurredCB(e,t){var n=t.enabled.getValueDirect();if(n){t.runSelectionOccurred()}}function ObjectInspector_SelectionClearedCB(e,t){t.runSelectionCleared()}function ObjectInspector_EnabledModifiedCB(e,t){console.debug("ObjectInspector.enable modified: "+t.enabled.getValueDirect().toString())}function ConnectionMgr(){AttributeContainer.call(this);this.className="ConnectionMgr";this.name=new StringAttr("ConnectionMgr");this.registerAttribute(this.name,"name");registerConnectionHelper("DisconnectAllTargets",null,ConnectionMgr.prototype.disconnectAllTargets);registerConnectionHelper("dissolve",ConnectionMgr.prototype.connectDissolve,ConnectionMgr.prototype.disconnectDissolve);registerConnectionHelper("walkSimulation",ConnectionMgr.prototype.connectWalkSimulation,ConnectionMgr.prototype.disconnectWalkSimulation)}function RenderAgent(e){Agent.call(this);this.className="RenderAgent";this.bridgeworks=e;this.name.setValueDirect("RenderAgent");this.timer=new Timer;this.frameRate=new NumberAttr(0);this.desiredFrameRate=new NumberAttr(30);this.timeIncrement=new NumberAttr(0);this.globalTimeInSecs=new NumberAttr(0);this.elapsedTimeInSecs=new NumberAttr(0);this.desiredFrameRate.addModifiedCB(RenderAgent_DesiredFrameRateModified,this);this.globalTimeInSecs.addModifiedCB(RenderAgent_GlobalTimeInSecsModified,this);this.registerAttribute(this.frameRate,"frameRate");this.registerAttribute(this.desiredFrameRate,"desiredFrameRate");this.registerAttribute(this.timeIncrement,"timeIncrement");this.registerAttribute(this.globalTimeInSecs,"globalTimeInSecs");this.registerAttribute(this.elapsedTimeInSecs,"elapsedTimeInSecs")}function RenderAgent_DesiredFrameRateModified(e,t){}function RenderAgent_GlobalTimeInSecsModified(e,t){var n=t.registry.find("RenderAgent");n.globalTimeInSecsModified()}function RenderController(e){AttributeContainer.call(this);this.className="RenderController";this.playState=ePlayState.Pause;this.renderAgent=e.renderAgent}function Selections(){this.viewports=[];this.cameras=[];this.lights=[];this.models=[];this.surfaces=[];this.labels=[];this.clear=function(){this.viewports=[];this.cameras=[];this.lights=[];this.models=[];this.surfaces=[];this.labels=[]}}function SelectionListener(){EventListener.call(this);this.className="SelectionListener";this.name.setValueDirect("Selector");this.rayPick=null;this.selections=new Selections;this.selected=null;this.selectionOccurred=new PulseAttr;this.selectionCleared=new PulseAttr;this.pointView=new Vector3DAttr;this.pointWorld=new Vector3DAttr;this.pointObject=new Vector3DAttr;this.pointGeo=new Vector3DAttr;this.triIndex=new NumberAttr;this.distance=new NumberAttr;this.distanceFromScreenCenter=new NumberAttr;this.computePivotDistance=new BooleanAttr(true);this.selectedName=new StringAttr;this.selectedElement=new NumberAttr(-1);this.lastSelectedName=new StringAttr;this.pointWorld.addModifiedCB(SelectionListener_PointWorldModifiedCB,this);this.registerAttribute(this.selectionOccurred,"selectionOccurred");this.registerAttribute(this.selectionCleared,"selectionCleared");this.registerAttribute(this.pointView,"pointView");this.registerAttribute(this.pointWorld,"pointWorld");this.registerAttribute(this.pointObject,"pointObject");this.registerAttribute(this.pointGeo,"pointGeo");this.registerAttribute(this.triIndex,"triIndex");this.registerAttribute(this.distance,"distance");this.registerAttribute(this.distanceFromScreenCenter,"distanceFromScreenCenter");this.registerAttribute(this.computePivotDistance,"computePivotDistance");this.registerAttribute(this.selectedName,"selectedName");this.registerAttribute(this.lastSelectedName,"lastSelectedName");this.numResponses.setValueDirect(-1)}function SelectionListener_ClickPointModifiedCB(e,t){t.clickPointModified()}function SelectionListener_PointWorldModifiedCB(e,t){}function ViewportLayout(){AttributeContainer.call(this);this.className="ViewportLayout";this.name=new StringAttr("ViewportLayout");this.width=new NumberAttr(0);this.height=new NumberAttr(0);this.registerAttribute(this.name,"name");this.registerAttribute(this.width,"width");this.registerAttribute(this.height,"height")}function GridLayout(){ViewportLayout.call(this);this.className="GridLayout";this.name.setValueDirect("GridLayout");this.rows=new NumberAttr(1);this.cols=new NumberAttr(1);this.registerAttribute(this.rows,"rows");this.registerAttribute(this.cols,"cols")}function ViewportMgr(){AttributeContainer.call(this);this.className="ViewportMgr";this.name=new StringAttr("ViewportMgr");this.cursor=new StringAttr("Arrow");this.width=new NumberAttr(0);this.height=new NumberAttr(0);this.layout=new ReferenceAttr(null);this.cursor.addModifiedCB(ViewportMgr_CursorModifiedCB,this);this.width.addModifiedCB(ViewportMgr_WidthModifiedCB,this);this.height.addModifiedCB(ViewportMgr_HeightModifiedCB,this);this.layout.addModifiedCB(ViewportMgr_LayoutModifiedCB,this);this.registerAttribute(this.name,"name");this.registerAttribute(this.cursor,"cursor");this.registerAttribute(this.width,"width");this.registerAttribute(this.height,"height");this.registerAttribute(this.layout,"layout")}function ViewportMgr_CursorModifiedCB(e,t){}function ViewportMgr_WidthModifiedCB(e,t){var n=t.layout.getValueDirect();if(n){n.getAttribute("width").setValueDirect(e.getValueDirect())}}function ViewportMgr_HeightModifiedCB(e,t){var n=t.layout.getValueDirect();if(n){n.getAttribute("height").setValueDirect(e.getValueDirect())}}function ViewportMgr_LayoutModifiedCB(e,t){var n=e.getValueDirect();if(n){n.getAttribute("width").setValueDirect(t.width.getValueDirect());n.getAttribute("height").setValueDirect(t.height.getValueDirect())}}function RasterComponentEventListener(){EventListener.call(this);this.className="RasterComponentEventListener";this.rcs=[];this.rcsSelectionState=[];this.rcListenMap=[];this.rcEventMap=[];this.styleMgr=null;this.selectionEvent=new InputEvent(eEventType.Unknown,0,4294967295,0,eEventType.Key_Up);this.name.setValueDirect("RasterComponentEventListener");this.numResponses.setValueDirect(-1)}function addInspectionGroup(e,t){var n=getInspectionGroup(e);if(n)return;var r=new Group;r.setGraphMgr(t.graphMgr);var i=new Translate;i.setGraphMgr(t.graphMgr);var s=new Scale;s.setGraphMgr(t.graphMgr);var o=new QuaternionRotate;o.setGraphMgr(t.graphMgr);var u=new Translate;u.setGraphMgr(t.graphMgr);var a=new Scale;a.setGraphMgr(t.graphMgr);o.addModifiedCB(Util_InspectionGroup_RotationQuatModifiedCB,null);r.name.setValueDirect("InspectionGroup");i.name.setValueDirect("Translate");s.name.setValueDirect("ScaleInverse");o.name.setValueDirect("Quaternion");u.name.setValueDirect("TranslateBack");a.name.setValueDirect("Scale");r.addChild(i);r.addChild(s);r.addChild(o);r.addChild(a);r.addChild(u);var f=e.getChild(0);if(f){f.insertChild(r,0)}e.registerAttribute(i.translation,"inspectionGroup_translate");e.registerAttribute(s.scale,"inspectionGroup_scaleInverse");e.registerAttribute(o.rotationQuat,"inspectionGroup_rotationQuat");e.registerAttribute(o.enabled,"inspectionGroup_rotationEnabled");e.registerAttribute(a.scale,"inspectionGroup_scale");e.registerAttribute(u.translation,"inspectionGroup_translateBack");i.translation.setContainer(e);s.scale.setContainer(e);o.rotationQuat.setContainer(e);o.enabled.setContainer(e);a.scale.setContainer(e);u.translation.setContainer(e);return}function deleteInspectionGroup(e){var t=getInspectionGroup(e);if(t){t.getChild(0).getAttribute("translation").setContainer(t.getChild(0));t.getChild(1).getAttribute("scale").setContainer(t.getChild(1));t.getChild(2).getAttribute("rotationQuat").setContainer(t.getChild(2));t.getChild(2).getAttribute("enabled").setContainer(t.getChild(2));t.getChild(3).getAttribute("scale").setContainer(t.getChild(3));t.getChild(4).getAttribute("translation").setContainer(t.getChild(4));e.unregisterAttribute(e.getAttribute("inspectionGroup_translate"));e.unregisterAttribute(e.getAttribute("inspectionGroup_scaleInverse"));e.unregisterAttribute(e.getAttribute("inspectionGroup_rotationQuat"));e.unregisterAttribute(e.getAttribute("inspectionGroup_rotationEnabled"));e.unregisterAttribute(e.getAttribute("inspectionGroup_scale"));e.unregisterAttribute(e.getAttribute("inspectionGroup_translateBack"));e.removeChild(t)}return}function getInspectionGroup(e){var t=null;var n=e.getChild(0);if(n){t=n.getNamedChild("InspectionGroup")}return t}function setInspectionGroupActivationState(e,t){var n=getInspectionGroup(e);if(n){var r=n.getChild(2);if(r){r.enabled.setValueDirect(t);if(!t){var i=new Quaternion;i.loadIdentity();var s=r.rotationQuat;s.setValueDirect(i)}}var o=e.getAttribute("position");if(t){if(!(e in g_objPosMap)){g_objPosMap[e]=o.getValueDirect()}}else{var u=g_objPosMap[e];o.setValueDirect(u)}}return}function setInspectionGroupContainer(e){var t=getInspectionGroup(e);if(t){e.unregisterAttribute(e.getAttribute("inspectionGroup_translate"));e.unregisterAttribute(e.getAttribute("inspectionGroup_scaleInverse"));e.unregisterAttribute(e.getAttribute("inspectionGroup_rotationQuat"));e.unregisterAttribute(e.getAttribute("inspectionGroup_rotationEnabled"));e.unregisterAttribute(e.getAttribute("inspectionGroup_scale"));e.unregisterAttribute(e.getAttribute("inspectionGroup_translateBack"));e.registerAttribute(t.getChild(0).getAttribute("translation"),"inspectionGroup_translate");e.registerAttribute(t.getChild(1).getAttribute("scale"),"inspectionGroup_scaleInverse");e.registerAttribute(t.getChild(2).getAttribute("rotationQuat"),"inspectionGroup_rotationQuat");e.registerAttribute(t.getChild(2).getAttribute("enabled"),"inspectionGroup_rotationEnabled");e.registerAttribute(t.getChild(3).getAttribute("scale"),"inspectionGroup_scale");e.registerAttribute(t.getChild(4).getAttribute("translation"),"inspectionGroup_translateBack");t.getChild(0).getAttribute("translation").setContainer(e);t.getChild(1).getAttribute("scale").setContainer(e);t.getChild(2).getAttribute("rotationQuat").setContainer(e);t.getChild(2).getAttribute("enabled").setContainer(e);t.getChild(3).getAttribute("scale").setContainer(e);t.getChild(4).getAttribute("translation").setContainer(e)}return}function zeroInspectionGroup(e){var t=getInspectionGroup(e);if(t){var n=t.getChild(2);if(n){var r=new Quaternion;r.loadIdentity();var i=n.rotationQuat;i.setValueDirect(r)}}return}function clearObjectPositionMap(){g_objPosMap={};return}function Util_InspectionGroup_RotationQuatModifiedCB(e,t){}function SerializeCommand(){Command.call(this);this.className="Serialize";this.attrType=eAttrType.Serialize;this.targetAttribute=null;this.target.addModifiedCB(SerializeCommand_TargetModifiedCB,this);this.directive=null;this.serialized=""}function SerializeCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");t.targetAttribute=t.registry.find(n)}function ScreenCaptureCommand(){Command.call(this);this.className="ScreenCapture";this.attrType=eAttrType.ScreenCapture;this.canvasId=new StringAttr;this.registerAttribute(this.canvasId,"canvasId");this.numResponses.setValueDirect(0)}function ExportCommand(){Command.call(this);this.className="Export";this.attrType=eAttrType.Export;this.targetNode=null;this.url=new StringAttr;this.target.addModifiedCB(ExportCommand_TargetModifiedCB,this);this.registerAttribute(this.url,"url")}function ExportCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.targetNode=r}}function MorphCommand(){Command.call(this);this.className="Morph";this.attrType=eAttrType.Morph;this.sourceModel=null;this.targetModel=null;this.source=new StringAttr("");this.morphIncr=new NumberAttr(.1);this.source.addModifiedCB(MorphCommand_SourceModifiedCB,this);this.target.addModifiedCB(MorphCommand_TargetModifiedCB,this);this.registerAttribute(this.source,"source");this.registerAttribute(this.morphIncr,"morphIncr")}function MorphCommand_SourceModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.sourceModel=r}}function MorphCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.targetModel=r}}function SnapToCommand(){Command.call(this);this.className="SnapTo";this.attrType=eAttrType.SnapTo;this.plugModel=null;this.socketModel=null;this.socket=new StringAttr("");this.plug=new StringAttr("");this.slot=new NumberAttr(0);this.socketConnector=new SocketConnector;this.plugConnector=new PlugConnector;this.socketWorldMatrix=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.plugWorldMatrix=new Matrix4x4Attr(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);this.target.addModifiedCB(SnapToCommand_TargetModifiedCB,this);this.socket.addModifiedCB(SnapToCommand_TargetModifiedCB,this);this.plug.addModifiedCB(SnapToCommand_PlugModifiedCB,this);this.registerAttribute(this.socket,"socket");this.registerAttribute(this.plug,"plug");this.registerAttribute(this.slot,"slot");this.registerAttribute(this.socketConnector,"socketConnector");this.registerAttribute(this.plugConnector,"plugConnector");this.registerAttribute(this.socketWorldMatrix,"socketWorldMatrix");this.registerAttribute(this.plugWorldMatrix,"plugWorldMatrix");this.target.addTarget(this.socket,null,null,false)}function SnapToCommand_TargetModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.socketModel=r}}function SnapToCommand_PlugModifiedCB(e,t){var n=e.getValueDirect().join("");var r=t.registry.find(n);if(r){t.plugModel=r}}function LWO2BlockData(){this.type="";this.ordinal="";this.channel=0;this.enable=1;this.opacityType=7;this.opacity=1;this.opacityEnvelope=0;this.negative=0;this.center=new Vector3D;this.size=new Vector3D;this.coordSys=0;this.projMode=0;this.axis=0;this.imageIndex=0;this.widthWrap=1;this.heightWrap=1;this.widthWrapAmt=0;this.heightWrapAmt=0;this.uvMapName=""}function LWO2SurfaceData(){this.name="";this.source="";this.color=new Vector3D;this.diffuseLevel=1;this.specularLevel=0;this.luminosityLevel=0;this.transparencyLevel=0;this.glossiness=.4;this.doubleSided=false;this.smoothingAngle=0;this.blocks=[];this.addBlock=function(){this.blocks.push(new LWO2BlockData)};this.currentBlock=function(){return this.blocks.length>0?this.blocks[this.blocks.length-1]:null}}function LWO2ClipData(){this.type=0;this.negative=0;var e="";var t="";this.setPlatformNeutralFilename=function(n){t=n;e=n;if(e.indexOf(":")>=0){var r=new Array;r=e.split(":");e=r[0]+":"+"/"+r[1]}};this.setFilename=function(n){e=n;t=n;var r=e.indexOf(":");if(r>=0){if(e.charAt(r+1)!="/"&&e.charAt(r+1)!="\\"){var i=new Array;i=e.split(":");e=i[0]+":"+"/"+i[1]}}r=t.indexOf(":");if(r>=0){if(t.charAt(r+1)=="/"||t.charAt(r+1)=="\\"){var i=new Array;i=t.split(":");t=i[0]+":"+i[1].substr(1,i[1].length)}}this.getPlatformNeutralFilename=function(){return t};this.getFilename=function(){return e}}}function LWO2EnvelopeData(){this.userFormat=0;this.type=0;this.preBehavior=0;this.postBehavior=0;this.keyframes=[];this.currentKyframe=function(){return this.keyframes.length>0?this.keyframes[this.keyframes.length-1]:null}}function LWO2VMAPData(){this.vertex=0;this.u=0;this.v=0}function LWO2VMADData(){this.poly=0;this.vertex=0;this.u=0;this.v=0}function LWO2PTAGData(){this.poly=0;this.tag=0}function LWO2LayerData(){this.number=0;this.name="";this.pnts=[];this.pols=[];this.ptagsSURF=[];this.vmapsTXUV=[];this.vmadsTXUV=[];this.ptagsSURFMaxIndex=0;this.pivot=new Vector3D;this.getVmap=function(e,t){switch(e){case"TXUV":return this.vmapsTXUV[t];break;default:return null}};this.putVmap=function(e,t,n){switch(e){case"TXUV":if(this.vmapsTXUV[t]==undefined)this.vmapsTXUV[t]=[];this.vmapsTXUV[t].push(n);break}};this.getVmad=function(e,t){switch(e){case"TXUV":return this.vmadsTXUV[t];break;default:return null}};this.putVmad=function(e,t,n){switch(e){case"TXUV":if(this.vmadsTXUV[t]==undefined)this.vmadsTXUV[t]=[];this.vmadsTXUV[t].push(n);break}};this.putPtag=function(e){this.ptagsSURF.push(e)}}function LWO2Data(){this.name="";this.contentDir="";this.layers=[];this.tags=[];this.surfaces=[];this.clips=[];this.envelopes=[];this.subChunkContext="";this.evaluators=[];var e=null;var t=null;var n=null;this.addLayer=function(e){var t=new LWO2LayerData;t.number=e;if(this.layers.length<=e){this.layers.length=e+1}this.layers[e]=t;n=t};this.currentLayer=function(){return n};this.addSurface=function(e,t){var n=new LWO2SurfaceData;n.name=e;n.source=t;this.surfaces.push(n)};this.currentSurface=function(){return this.surfaces.length>0?this.surfaces[this.surfaces.length-1]:null};this.getSurface=function(e){for(var t=0;t<this.surfaces.length;t++){if(this.surfaces[t].name==e){return this.surfaces[t]}}return null};this.addClip=function(t){var n=new LWO2ClipData;if(this.clips.length<=t){this.clips.length=t+1}this.clips[t]=n;e=n};this.currentClip=function(){return e};this.addEnvelope=function(e){var n=new LWO2EnvelopeData;this.envelopes[e]=n;t=n};this.currentEnvelope=function(){return t}}function LWObjectHandler(){ContentHandler.call(this);this.className="LWObjectHandler";this.lwo2DataHandlers=[];this.lwo2DataHandlersData=[]}function LWObjectBuilder(){ContentBuilder.call(this);this.className="LWObjectBuilder";this.graphMgr=null;this.indexGeometry=new BooleanAttr(true);this.registerAttribute(this.indexGeometry,"indexGeometry")}function LWObjectBuilder_ObjectHandler(e,t){t.allocateModel(e)}function LWObjectBuilder_CompareVmapEntries(e,t){if(e.vertex<t.vertex)return-1;if(e.vertex>t.vertex)return 1;return 0}function LWObjectBuilder_CompareVmadEntries(e,t){if(e.poly<t.poly)return-1;if(e.poly>t.poly)return 1;return 0}function LWSceneHandler(){ContentHandler.call(this);this.className="LWSceneHandler";this.tokenHandlers=[];this.tokenHandlersData=[]}function TLWSCSceneData(){var e=0;var t=0;var n=0;var r=0;var i="";var s="";var o="";var u=false;var a=0;var f=.25}function TLWSCv3LightDesc(){this.name="";this.type=0;this.colorR=0;this.colorG=0;this.colorB=0;this.intensity=0;this.range=0;this.coneAngle=0;this.edgeAngle=0;this.motion=null;this.parentItem=0}function LWSceneBuilder(){ContentBuilder.call(this);this.className="LWSceneBuilder";this.root=null;this.sgRoot=null;this.evaluatorsGroup=null;this.camerasSelector=null;this.lightsGroup=null;this.modelsGroup=null;this.renderDirective=null;this.boneFalloffType=eBoneFalloffType.InverseDistance;this.parsingBgImage=false;this.parsingFgImage=false;this.parsingFgAlphaImage=false;this.imagePath="";this.currElement=null;this.currChannel=0;this.sceneData=new TLWSCSceneData;this.ambientLightDesc=new TLWSCv3LightDesc;this.globalLightDesc=new TLWSCv3LightDesc;this.lightDescs=[];this.parentItems=[];this.bones=[];this.objectBones=[];this.indexGeometry=new BooleanAttr(true);this.registerAttribute(this.indexGeometry,"indexGeometry");this.ambientLightDesc.colorR=1;this.ambientLightDesc.colorG=1;this.ambientLightDesc.colorB=1;this.ambientLightDesc.intensity=.05;this.globalLightDesc.intensity=1}function LWSceneBuilder_TokenHandler(e,t){t.handleToken(e[0],e.slice(1))}function AttributeFactory(){AttributeContainer.call(this);this.className="AttributeFactory";this.attrType=eAttrType.AttributeFactory;this.newResourceProcs=[];this.configureProcs=[];this.finalizeProcs=[];this.registry=null;this.graphMgr=null;this.name=new StringAttr("AttributeFactory");this.registerAttribute(this.name,"name");this.initializeNewResourceMap();this.initializeConfigureMap();this.initializeFinalizeMap()}function newAttribute(e,t){var n=null;switch(e){case"BalloonTipLabelStyleAttr":n=new BalloonTipLabelStyleAttr;break;case"BBoxAttr":n=new BBoxAttr;break;case"BooleanAttr":n=new BooleanAttr;break;case"ColorAttr":n=new ColorAttr;break;case"FontStyleAttr":n=new FontStyleAttr;break;case"IconStyleAttr":n=new IconStyleAttr;break;case"ImageAttr":n=new ImageAttr;break;case"KeyframeAttr":n=new KeyframeAttr;break;case"KeyframesAttr":n=new KeyframesAttr;break;case"LabelStyleAttr":n=new LabelStyleAttr;break;case"HTMLLabelStyleAttr":n=new HTMLLabelStyleAttr;break;case"NumberArrayAttr":n=new NumberArrayAttr;break;case"NumberAttr":n=new NumberAttr;break;case"Matrix4x4Attr":n=new Matrix4x4Attr;break;case"PlaneAttr":n=new PlaneAttr;break;case"PulseAttr":n=new PulseAttr;break;case"QuaternionAttr":n=new QuaternionAttr;break;case"RectAttr":n=new RectAttr;break;case"ReferenceAttr":n=new ReferenceAttr;break;case"StringAttr":n=new StringAttr;break;case"StyleAttr":n=new StyleAttr;break;case"StylesAttr":n=new StylesAttr;break;case"StyleMapAttr":n=new StyleMapAttr;break;case"StylesMapAttr":n=new StylesMapAttr;break;case"Vector2DAttr":n=new Vector2DAttr;break;case"Vector3DAttr":n=new Vector3DAttr;break;case"ViewportAttr":n=new ViewportAttr;break;case"ViewVolumeAttr":n=new ViewVolumeAttr;break;case"RenderableElementStyleAttr":n=new RenderableElementStyleAttr;break;case"Serializer":n=new Serializer;break;case"Bone":n=new Bone;break}return n}function newSGNode(e,t){var n=null;switch(e){case"DirectionalLight":n=new DirectionalLight;registerParentableAttributes(n,t);break;case"GlobalIllumination":n=new GlobalIllumination;break;case"Group":n=new Group;break;case"Isolator":n=new Isolator;break;case"Label":n=new Label;break;case"HTMLLabel":n=new HTMLLabel;break;case"BalloonTipLabel":n=new BalloonTipLabel;break;case"LineList":n=new LineList;break;case"MediaTexture":n=new MediaTexture;break;case"OrthographicCamera":n=new OrthographicCamera;registerParentableAttributes(n,t);break;case"PerspectiveCamera":n=new PerspectiveCamera;registerParentableAttributes(n,t);break;case"PointLight":n=new PointLight;registerParentableAttributes(n,t);break;case"PointList":n=new PointList;break;case"QuaternionRotate":n=new QuaternionRotate;break;case"Rotate":n=new Rotate;break;case"Scale":n=new Scale;break;case"Selector":n=new Selector;break;case"Surface":n=new Surface;break;case"Transform":n=new Transform;break;case"Translate":n=new Translate;break;case"TriList":n=new TriList;break;case"NullObject":n=new NullObject;registerParentableAttributes(n,t);break;case"Cube":n=new Cube;break;case"Material":n=new Material;break;case"ScreenRect":n=new ScreenRect;break}if(n){n.setGraphMgr(t.graphMgr)}return n}function newSGDirective(e,t){var n=null;switch(e){case"BBoxDirective":n=new BBoxDirective;break;case"RayPickDirective":n=new RayPickDirective;break;case"RenderDirective":n=new RenderDirective;break;case"SerializeDirective":n=new SerializeDirective;break;case"UpdateDirective":n=new UpdateDirective;break;case"CollideDirective":n=new CollideDirective;break;case"HighlightDirective":n=new HighlightDirective;break}if(n){n.setGraphMgr(t.graphMgr)}return n}function newModel(e,t){var n=new Model;n.setGraphMgr(t.graphMgr);registerParentableAttributes(n,t);return n}function newBBoxLocator(e,t){var n=new BBoxLocator;registerEvaluatorAttributes(n,t);return n}function newKeyframeInterpolator(e,t){var n=new KeyframeInterpolator;registerEvaluatorAttributes(n,t);return n}function newMapProjectionCalculator(e,t){var n=new MapProjectionCalculator;registerEvaluatorAttributes(n,t);return n}function newObjectInspector(e,t){var n=new ObjectInspector;registerEvaluatorAttributes(n,t);var r=t.registry.find("Selector");if(r){r.getAttribute("selectionOccurred").addTarget(n.getAttribute("selectionOccurred"),eAttrSetOp.Replace,null,false);r.getAttribute("selectionCleared").addTarget(n.getAttribute("selectionCleared"),eAttrSetOp.Replace,null,false);r.getAttribute("pointView").addTarget(n.getAttribute("pointView"),eAttrSetOp.Replace,null,false)}return n}function newSceneInspector(e,t){var n=new BwSceneInspector;registerEvaluatorAttributes(n,t);var r=t.registry.find("Selector");if(r){r.getAttribute("selectionOccurred").addTarget(n.getAttribute("selectionOccurred"),eAttrSetOp.Replace,null,false);r.getAttribute("distanceFromScreenCenter").addTarget(n.getAttribute("pivotDistance"),eAttrSetOp.Replace,null,false)}return n}function newTargetObserver(e,t){var n=new BwTargetObserver;registerEvaluatorAttributes(n,t);return n}function newAnimalMover(e,t){var n=new AnimalMover;registerEvaluatorAttributes(n,t);return n}function newWalkSimulator(e,t){var n=new WalkSimulator;registerEvaluatorAttributes(n,t);return n}function newMorphEffector(e,t){var n=new MorphEffector;registerEvaluatorAttributes(n,t);return n}function newBoneEffector(e,t){var n=new BoneEffector;registerEvaluatorAttributes(n,t);return n}function newPhysicsSimulator(e,t){var n=new PhysicsSimulator;registerEvaluatorAttributes(n,t);return n}function newCommand(e,t){var n=null;switch(e){case"AppendNode":n=new AppendNodeCommand;break;case"AutoInterpolate":n=new AutoInterpolateCommand;break;case"CommandSequence":n=new CommandSequence;break;case"ConnectAttributes":n=new ConnectAttributesCommand;break;case"ConnectOutputs":n=new ConnectAttributesCommand;break;case"DisconnectAttributes":n=new ConnectAttributesCommand;n.getAttribute("negate").setValueDirect(true);break;case"DisconnectOutputs":n=new ConnectAttributesCommand;n.getAttribute("negate").setValueDirect(true);break;case"Export":n=new ExportCommand;break;case"Locate":n=new LocateCommand;break;case"MotionInterpolate":n=new MotionInterpolateCommand;break;case"Pause":n=new PlayCommand;n.getAttribute("negate").setValueDirect(true);break;case"Play":n=new PlayCommand;break;case"Remove":n=new RemoveCommand;break;case"ScreenCapture":n=new ScreenCaptureCommand;break;case"Serialize":n=new SerializeCommand;break;case"Set":n=new SetCommand;break;case"Stop":n=new StopCommand;break;case"Morph":n=new MorphCommand;break;case"SnapTo":n=new SnapToCommand;break}if(e=="CommandSequence"){var r=t.registry.find("CommandMgr");if(r){r.pushCommandSequence(n)}}return n}function newDeviceHandler(e,t){var n=null;switch(e){case"MouseHandler":n=new MouseHandler;break;case"KeyboardHandler":n=new KeyboardHandler;break}return n}function configureModel(e,t){console.debug("TODO: "+arguments.callee.name)}function configureDirective(e,t){var n=new StringAttr("");n.addModifiedCB(AttributeFactory_DirectiveRootModifiedCB,t);e.registerAttribute(n,"root");var r=t.registry.getAttribute("rootPtr").getValueDirect();if(r){n.setValueDirect(r.getAttribute("name").getValueDirect().join(""))}}function finalizeModel(e,t){console.debug("TODO: remove LWO assumption");var n=e.getAttribute("url").getValueDirect();if(n){n=n.join("");var r=formatPath(n);console.debug("path: "+r[0]);console.debug("content dir: "+r[1]);var i=new LWObjectHandler;i.getAttribute("contentDirectory").setValueDirect(r[1]);var s=new LWObjectBuilder;s.setRegistry(t.registry);s.models.push(e);s.layer=e.getAttribute("layer").getValueDirect();s.visitHandler(i);i.parseFileStream(r[0])}addInspectionGroup(e,t)}function finalizeDirective(e,t){}function finalizeCommand(e,t){e.finalize();var n=t.registry.find("CommandMgr");if(n){if(e.className=="CommandSequence"){n.popCommandSequence()}n.addCommand(e)}}function finalizeDeviceHandler(e,t){var n=t.registry.find("EventMgr");if(n){var r=e.getEventTypes();for(var i=0;i<r.length;i++){n.addListener(r[i],e)}}}function finalizeEvaluator(e,t){console.debug("TODO: "+arguments.callee.name);switch(e.className){case"KeyframeInterpolator":var n=e.getAttribute("url").getValueDirect();if(n){n=n.join("");var r=formatPath(n);var i=new LWSceneHandler;i.getAttribute("contentDirectory").setValueDirect(r[1]);var s=new LWSceneBuilder;s.setRegistry(t.registry);s.evaluators.push(e);s.visitHandler(i);i.parseFileStream(r[0])}AttributeFactory_EvaluatorTargetConnectionTypeModifiedCB(e.getAttribute("targetConnectionType"),t);break}}function registerEvaluatorAttributes(e,t){if(!e.getAttribute("url")){var n=new StringAttr("");e.registerAttribute(n,"url")}if(!e.getAttribute("target")){var r=new StringAttr("");e.registerAttribute(r,"target")}if(!e.getAttribute("renderAndRelease")){var i=new BooleanAttr(false);e.registerAttribute(i,"renderAndRelease")}if(!e.getAttribute("targetConnectionType")){var s=new StringAttr("transform");s.addModifiedCB(AttributeFactory_EvaluatorTargetConnectionTypeModifiedCB,t);e.registerAttribute(s,"targetConnectionType")}}function registerParentableAttributes(e,t){if(!e.getAttribute("label")){var n=new StringAttr("");e.registerAttribute(n,"label");n.addModifiedCB(AttributeFactory_ParentableLabelModifiedCB,t)}if(!e.getAttribute("geoPosition")){var r=new Vector3DAttr;e.registerAttribute(r,"geoPosition");r.addModifiedCB(AttributeFactory_ParentableGeoPositionModifiedCB,t)}if(!e.getAttribute("altitude")){var i=new NumberAttr;e.registerAttribute(i,"altitude")}if(!e.getAttribute("latitude")){var s=new NumberAttr;e.registerAttribute(s,"latitude")}if(!e.getAttribute("longitude")){var o=new NumberAttr;e.registerAttribute(o,"longitude")}e.getAttribute("worldCenter").addModifiedCB(AttributeFactory_ParentableWorldPositionModifiedCB,t)}function getSceneGraph(){return this.sceneGraph}function AttributeFactory_DirectiveRootModifiedCB(e,t){var n=e.getContainer();var r=t.registry.getByName(e.getValueDirect().join(""));if(r){n.getAttribute("rootNode").setValueDirect(r[0])}}function AttributeFactory_ParentableLabelModifiedCB(e,t){console.debug("TODO: "+arguments.callee.name)}function AttributeFactory_ParentableGeoPositionModifiedCB(e,t){var n=e.getContainer();if(n){var r=t.registry.getByName("ConnectionMgr");if(r&&r.length){var i=r[0];var s=t.registry.getByType(eAttrType.MapProjectionCalculator);if(s&&s.length){var o=s[0];o.getAttribute("geoPosition").copyValue(e);i.connectMapProjectionCalculator(o,n);i.disconnectMapProjectionCalculator(o,n)}}}}function AttributeFactory_ParentableWorldPositionModifiedCB(e,t){}function AttributeFactory_EvaluatorTargetConnectionTypeModifiedCB(e,t){var n=e.getContainer();if(n){var r=new ConnectAttributesCommand;r.setRegistry(t.registry);r.getAttribute("sourceContainer").copyValue(n.getAttribute("name"));r.getAttribute("targetContainer").copyValue(n.getAttribute("target"));r.getAttribute("connectionType").copyValue(e);r.execute()}}function Bridgeworks(e,t,n){AttributeContainer.call(this);this.className="Bridgeworks";this.renderContext=newRenderContext("webgl",e,t);if(!this.renderContext)return;n=n==null?"BwContent":n;this.canvas=e;this.contentDir=n;this.graphMgr=new GraphMgr;this.graphMgr.setRenderContext(this.renderContext);this.styleMgr=new StyleMgr;this.registry=new BwRegistry;this.factory=new AttributeFactory;this.parser=new XMLParser(this.factory,this.registry,this.contentDir);this.eventAdapter=new EventAdapter;this.eventMgr=new EventMgr;this.commandMgr=new CommandMgr;this.connectionMgr=new ConnectionMgr;this.viewportMgr=new ViewportMgr;this.selector=new SelectionListener;this.rayPick=new RayPickDirective;this.renderAgent=new RenderAgent(this);this.renderController=new RenderController(this);this.layout=new GridLayout;this.mapProjectionCalculator=new MapProjectionCalculator;this.rasterComponentEventListener=new RasterComponentEventListener;this.graphMgr.setRegistry(this.registry);this.factory.setRegistry(this.registry);this.eventAdapter.setRegistry(this.registry);this.eventMgr.setRegistry(this.registry);this.commandMgr.setRegistry(this.registry);this.connectionMgr.setRegistry(this.registry);this.viewportMgr.setRegistry(this.registry);this.selector.setRegistry(this.registry);this.renderAgent.setRegistry(this.registry);this.layout.setRegistry(this.registry);this.mapProjectionCalculator.setRegistry(this.registry);this.rasterComponentEventListener.setRegistry(this.registry);this.factory.setGraphMgr(this.graphMgr);this.selector.setRayPick(this.rayPick);this.rasterComponentEventListener.setStyleMgr(this.styleMgr);this.rasterComponents=null;this.name=new StringAttr("Bridgeworks");this.onLoad=new StringAttr;this.onLoad.addModifiedCB(Bridgeworks_OnLoadModifiedCB,this);this.registerAttribute(this.name,"name");this.registerAttribute(this.onLoad,"onLoad");this.viewportMgr.getAttribute("width").setValueDirect(this.canvas.width);this.viewportMgr.getAttribute("height").setValueDirect(this.canvas.height);this.viewportMgr.getAttribute("layout").setValueDirect(this.layout);enumerateAttributeTypes();enumerateAttributeElementTypes();console.debug("TODO: "+arguments.callee.name);this.initRegistry();this.initEventListeners();this.viewportMgr.initLayout()}function Bridgeworks_OnLoadModifiedCB(e,t){t.onLoadModified()}Base.prototype.destroy=function(){delete this};var message="";var imgeData="";var cimageData="";var serializedScene="";Allocator.prototype.allocate=function(){return null};Color.prototype.v=function(){var e=[this.r,this.g,this.b,this.a];return e};Color.prototype.load=function(e,t,n,r){this.r=e;this.g=t;this.b=n;this.a=r};Color.prototype.copy=function(e){if(e){this.r=e.r;this.g=e.g;this.b=e.b;this.a=e.a}};Rect.prototype.load=function(e,t,n,r){this.left=e;this.top=t;this.right=n;this.bottom=r};Rect.prototype.loadRect=function(e){this.left=e.left;this.top=e.top;this.right=e.right;this.bottom=e.bottom};Viewport.prototype.load=function(e,t,n,r){this.x=e;this.y=t;this.width=n;this.height=r};Viewport.prototype.loadViewport=function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height};Viewport.prototype.containsPoint=function(e,t){if(e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height)return true;return false};Stack.prototype.push=function(e){if(this.maxLength>0&&this.stack.length>=this.maxLength){this.pop()}this.stack.push(e)};Stack.prototype.pop=function(){if(this.stack.length>0){this.stack.pop()}};Stack.prototype.load=function(e){this.pop();this.push(e)};Stack.prototype.top=function(){if(this.stack.length>0){return this.stack[this.stack.length-1]}return null};Stack.prototype.getAt=function(e){if(this.stack.length>e){return this.stack[e]}return null};Stack.prototype.length=function(){return this.stack.length};Stack.prototype.empty=function(){return this.stack.length==0};Stack.prototype.clear=function(){this.stack.length=0};Stack.prototype.copy=function(){return this.stack.slice()};Queue.prototype.push=function(e){if(this.maxLength>0&&this.queue.length>=this.maxLength){this.pop()}this.queue.push(e)};Queue.prototype.pop=function(){if(this.queue.length>0){this.queue.shift()}};Queue.prototype.load=function(e){this.pop();this.push(e)};Queue.prototype.front=function(){if(this.queue.length>0){return this.queue[0]}return null};Queue.prototype.getAt=function(e){if(this.queue.length>e){return this.queue[e]}return null};Queue.prototype.length=function(){return this.queue.length};Queue.prototype.empty=function(){return this.queue.length==0};Queue.prototype.clear=function(){this.queue.length=0};Queue.prototype.copy=function(){return this.queue.slice()};var gAttributeBin=null;var gAttributePairs=null;var whitespace="\n\r  ";XMLP=function(e){e=SAXStrings.replace(e,null,null,"\r\n","\n");e=SAXStrings.replace(e,null,null,"\r","\n");this.m_xml=e;this.m_iP=0;this.m_iState=XMLP._STATE_PROLOG;this.m_stack=new saxStack;this._clearAttributes()};XMLP._NONE=0;XMLP._ELM_B=1;XMLP._ELM_E=2;XMLP._ELM_EMP=3;XMLP._ATT=4;XMLP._TEXT=5;XMLP._ENTITY=6;XMLP._PI=7;XMLP._CDATA=8;XMLP._COMMENT=9;XMLP._DTD=10;XMLP._ERROR=11;XMLP._CONT_XML=0;XMLP._CONT_ALT=1;XMLP._ATT_NAME=0;XMLP._ATT_VAL=1;XMLP._STATE_PROLOG=1;XMLP._STATE_DOCUMENT=2;XMLP._STATE_MISC=3;XMLP._errs=new Array;XMLP._errs[XMLP.ERR_CLOSE_PI=0]="PI: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_DTD=1]="DTD: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_COMMENT=2]="Comment: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_CDATA=3]="CDATA: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ELM=4]="Element: missing closing sequence";XMLP._errs[XMLP.ERR_CLOSE_ENTITY=5]="Entity: missing closing sequence";XMLP._errs[XMLP.ERR_PI_TARGET=6]="PI: target is required";XMLP._errs[XMLP.ERR_ELM_EMPTY=7]="Element: cannot be both empty and closing";XMLP._errs[XMLP.ERR_ELM_NAME=8]='Element: name must immediatly follow "<"';XMLP._errs[XMLP.ERR_ELM_LT_NAME=9]='Element: "<" not allowed in element names';XMLP._errs[XMLP.ERR_ATT_VALUES=10]="Attribute: values are required and must be in quotes";XMLP._errs[XMLP.ERR_ATT_LT_NAME=11]='Element: "<" not allowed in attribute names';XMLP._errs[XMLP.ERR_ATT_LT_VALUE=12]='Attribute: "<" not allowed in attribute values';XMLP._errs[XMLP.ERR_ATT_DUP=13]="Attribute: duplicate attributes not allowed";XMLP._errs[XMLP.ERR_ENTITY_UNKNOWN=14]="Entity: unknown entity";XMLP._errs[XMLP.ERR_INFINITELOOP=15]="Infininte loop";XMLP._errs[XMLP.ERR_DOC_STRUCTURE=16]="Document: only comments, processing instructions, or whitespace allowed outside of document element";XMLP._errs[XMLP.ERR_ELM_NESTING=17]="Element: must be nested correctly";XMLP.prototype._addAttribute=function(e,t){this.m_atts[this.m_atts.length]=new Array(e,t)};XMLP.prototype._checkStructure=function(e){if(XMLP._STATE_PROLOG==this.m_iState){if(XMLP._TEXT==e||XMLP._ENTITY==e){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}if(XMLP._ELM_B==e||XMLP._ELM_EMP==e){this.m_iState=XMLP._STATE_DOCUMENT}}if(XMLP._STATE_DOCUMENT==this.m_iState){if(XMLP._ELM_B==e||XMLP._ELM_EMP==e){this.m_stack.push(this.getName())}if(XMLP._ELM_E==e||XMLP._ELM_EMP==e){var t=this.m_stack.pop();if(t==null||t!=this.getName()){return this._setErr(XMLP.ERR_ELM_NESTING)}}if(this.m_stack.count()==0){this.m_iState=XMLP._STATE_MISC;return e}}if(XMLP._STATE_MISC==this.m_iState){if(XMLP._ELM_B==e||XMLP._ELM_E==e||XMLP._ELM_EMP==e||XMLP.EVT_DTD==e){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}if(XMLP._TEXT==e||XMLP._ENTITY==e){if(SAXStrings.indexOfNonWhitespace(this.getContent(),this.getContentBegin(),this.getContentEnd())!=-1){return this._setErr(XMLP.ERR_DOC_STRUCTURE)}}}return e};XMLP.prototype._clearAttributes=function(){this.m_atts=new Array};XMLP.prototype._findAttributeIndex=function(e){for(var t=0;t<this.m_atts.length;t++){if(this.m_atts[t][XMLP._ATT_NAME]==e){return t}}return-1};XMLP.prototype.getAttributeCount=function(){return this.m_atts?this.m_atts.length:0};XMLP.prototype.getAttributeName=function(e){return e<0||e>=this.m_atts.length?null:this.m_atts[e][XMLP._ATT_NAME]};XMLP.prototype.getAttributeValue=function(e){return e<0||e>=this.m_atts.length?null:__unescapeString(this.m_atts[e][XMLP._ATT_VAL])};XMLP.prototype.getAttributeValueByName=function(e){return this.getAttributeValue(this._findAttributeIndex(e))};XMLP.prototype.getColumnNumber=function(){return SAXStrings.getColumnNumber(this.m_xml,this.m_iP)};XMLP.prototype.getContent=function(){return this.m_cSrc==XMLP._CONT_XML?this.m_xml:this.m_cAlt};XMLP.prototype.getContentBegin=function(){return this.m_cB};XMLP.prototype.getContentEnd=function(){return this.m_cE};XMLP.prototype.getLineNumber=function(){return SAXStrings.getLineNumber(this.m_xml,this.m_iP)};XMLP.prototype.getName=function(){return this.m_name};XMLP.prototype.next=function(){return this._checkStructure(this._parse())};XMLP.prototype._parse=function(){if(this.m_iP==this.m_xml.length){return XMLP._NONE}if(this.m_iP==this.m_xml.indexOf("<?",this.m_iP)){return this._parsePI(this.m_iP+2)}else if(this.m_iP==this.m_xml.indexOf("<!DOCTYPE",this.m_iP)){return this._parseDTD(this.m_iP+9)}else if(this.m_iP==this.m_xml.indexOf("<!--",this.m_iP)){return this._parseComment(this.m_iP+4)}else if(this.m_iP==this.m_xml.indexOf("<![CDATA[",this.m_iP)){return this._parseCDATA(this.m_iP+9)}else if(this.m_iP==this.m_xml.indexOf("<",this.m_iP)){return this._parseElement(this.m_iP+1)}else if(this.m_iP==this.m_xml.indexOf("&",this.m_iP)){return this._parseEntity(this.m_iP+1)}else{return this._parseText(this.m_iP)}};XMLP.prototype._parseAttribute=function(e,t){var n,r,i,s,o;var u,a,f;this.m_cAlt="";n=SAXStrings.indexOfNonWhitespace(this.m_xml,e,t);if(n==-1||n>=t){return n}i=this.m_xml.indexOf("=",n);if(i==-1||i>t){return this._setErr(XMLP.ERR_ATT_VALUES)}r=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,n,i);s=SAXStrings.indexOfNonWhitespace(this.m_xml,i+1,t);if(s==-1||s>t){return this._setErr(XMLP.ERR_ATT_VALUES)}u=this.m_xml.charAt(s);if(SAXStrings.QUOTES.indexOf(u)==-1){return this._setErr(XMLP.ERR_ATT_VALUES)}o=this.m_xml.indexOf(u,s+1);if(o==-1||o>t){return this._setErr(XMLP.ERR_ATT_VALUES)}a=this.m_xml.substring(n,r+1);f=this.m_xml.substring(s+1,o);if(a.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_NAME)}if(f.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ATT_LT_VALUE)}f=SAXStrings.replace(f,null,null,"\n"," ");f=SAXStrings.replace(f,null,null," "," ");iRet=this._replaceEntities(f);if(iRet==XMLP._ERROR){return iRet}f=this.m_cAlt;if(this._findAttributeIndex(a)==-1){this._addAttribute(a,f)}else{return this._setErr(XMLP.ERR_ATT_DUP)}this.m_iP=o+2;return XMLP._ATT};XMLP.prototype._parseCDATA=function(e){var t=this.m_xml.indexOf("]]>",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_CDATA)}this._setContent(XMLP._CONT_XML,e,t);this.m_iP=t+3;return XMLP._CDATA};XMLP.prototype._parseComment=function(e){var t=this.m_xml.indexOf("-"+"->",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_COMMENT)}this._setContent(XMLP._CONT_XML,e,t);this.m_iP=t+3;return XMLP._COMMENT};XMLP.prototype._parseDTD=function(e){var t,n,r,i;t=this.m_xml.indexOf(">",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}r=this.m_xml.indexOf("[",e);n=r!=-1&&r<t?"]>":">";while(true){if(t==i){return this._setErr(XMLP.ERR_INFINITELOOP)}i=t;t=this.m_xml.indexOf(n,e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_DTD)}if(this.m_xml.substring(t-1,t+2)!="]]>"){break}}this.m_iP=t+n.length;return XMLP._DTD};XMLP.prototype._parseElement=function(e){var t,n,r,i;var s,o,u;n=t=this.m_xml.indexOf(">",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_ELM)}if(this.m_xml.charAt(e)=="/"){s=XMLP._ELM_E;e++}else{s=XMLP._ELM_B}if(this.m_xml.charAt(t-1)=="/"){if(s==XMLP._ELM_E){return this._setErr(XMLP.ERR_ELM_EMPTY)}s=XMLP._ELM_EMP;n--}n=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,e,n);if(t-e!=1){if(SAXStrings.indexOfNonWhitespace(this.m_xml,e,n)!=e){return this._setErr(XMLP.ERR_ELM_NAME)}}this._clearAttributes();r=SAXStrings.indexOfWhitespace(this.m_xml,e,n);if(r==-1){r=n+1}else{this.m_iP=r;while(this.m_iP<n){if(this.m_iP==u)return this._setErr(XMLP.ERR_INFINITELOOP);u=this.m_iP;i=this._parseAttribute(this.m_iP,n);if(i==XMLP._ERROR)return i}}o=this.m_xml.substring(e,r);if(o.indexOf("<")!=-1){return this._setErr(XMLP.ERR_ELM_LT_NAME)}this.m_name=o;this.m_iP=t+1;return s};XMLP.prototype._parseEntity=function(e){var t=this.m_xml.indexOf(";",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}this.m_iP=t+1;return this._replaceEntity(this.m_xml,e,t)};XMLP.prototype._parsePI=function(e){var t,n,r,i,s;t=this.m_xml.indexOf("?>",e);if(t==-1){return this._setErr(XMLP.ERR_CLOSE_PI)}n=SAXStrings.indexOfNonWhitespace(this.m_xml,e,t);if(n==-1){return this._setErr(XMLP.ERR_PI_TARGET)}r=SAXStrings.indexOfWhitespace(this.m_xml,n,t);if(r==-1){r=t}i=SAXStrings.indexOfNonWhitespace(this.m_xml,r,t);if(i==-1){i=t}s=SAXStrings.lastIndexOfNonWhitespace(this.m_xml,i,t);if(s==-1){s=t-1}this.m_name=this.m_xml.substring(n,r);this._setContent(XMLP._CONT_XML,i,s+1);this.m_iP=t+2;return XMLP._PI};XMLP.prototype._parseText=function(e){var t,n;t=this.m_xml.indexOf("<",e);if(t==-1){t=this.m_xml.length}n=this.m_xml.indexOf("&",e);if(n!=-1&&n<=t){t=n}this._setContent(XMLP._CONT_XML,e,t);this.m_iP=t;return XMLP._TEXT};XMLP.prototype._replaceEntities=function(e,t,n){if(SAXStrings.isEmpty(e))return"";t=t||0;n=n||e.length;var r,i,s="";r=e.indexOf("&",t);i=t;while(r>0&&r<n){s+=e.substring(i,r);i=e.indexOf(";",r)+1;if(i==0||i>n){return this._setErr(XMLP.ERR_CLOSE_ENTITY)}iRet=this._replaceEntity(e,r+1,i-1);if(iRet==XMLP._ERROR){return iRet}s+=this.m_cAlt;r=e.indexOf("&",i)}if(i!=n){s+=e.substring(i,n)}this._setContent(XMLP._CONT_ALT,s);return XMLP._ENTITY};XMLP.prototype._replaceEntity=function(e,t,n){if(SAXStrings.isEmpty(e))return-1;t=t||0;n=n||e.length;switch(e.substring(t,n)){case"amp":strEnt="&";break;case"lt":strEnt="<";break;case"gt":strEnt=">";break;case"apos":strEnt="'";break;case"quot":strEnt='"';break;default:if(e.charAt(t)=="#"){strEnt=String.fromCharCode(parseInt(e.substring(t+1,n)))}else{return this._setErr(XMLP.ERR_ENTITY_UNKNOWN)}break}this._setContent(XMLP._CONT_ALT,strEnt);return XMLP._ENTITY};XMLP.prototype._setContent=function(e){var t=arguments;if(XMLP._CONT_XML==e){this.m_cAlt=null;this.m_cB=t[1];this.m_cE=t[2]}else{this.m_cAlt=t[1];this.m_cB=0;this.m_cE=t[1].length}this.m_cSrc=e};XMLP.prototype._setErr=function(e){var t=XMLP._errs[e];this.m_cAlt=t;this.m_cB=0;this.m_cE=t.length;this.m_cSrc=XMLP._CONT_ALT;return XMLP._ERROR};SAXDriver=function(){this.m_hndDoc=null;this.m_hndErr=null;this.m_hndLex=null};SAXDriver.DOC_B=1;SAXDriver.DOC_E=2;SAXDriver.ELM_B=3;SAXDriver.ELM_E=4;SAXDriver.CHARS=5;SAXDriver.PI=6;SAXDriver.CD_B=7;SAXDriver.CD_E=8;SAXDriver.CMNT=9;SAXDriver.DTD_B=10;SAXDriver.DTD_E=11;SAXDriver.prototype.parse=function(e){var t=new XMLP(e);if(this.m_hndDoc&&this.m_hndDoc.setDocumentLocator){this.m_hndDoc.setDocumentLocator(this)}this.m_parser=t;this.m_bErr=false;if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_B)}this._parseLoop();if(!this.m_bErr){this._fireEvent(SAXDriver.DOC_E)}this.m_xml=null;this.m_iP=0};SAXDriver.prototype.setDocumentHandler=function(e){this.m_hndDoc=e};SAXDriver.prototype.setErrorHandler=function(e){this.m_hndErr=e};SAXDriver.prototype.setLexicalHandler=function(e){this.m_hndLex=e};SAXDriver.prototype.getColumnNumber=function(){return this.m_parser.getColumnNumber()};SAXDriver.prototype.getLineNumber=function(){return this.m_parser.getLineNumber()};SAXDriver.prototype.getMessage=function(){return this.m_strErrMsg};SAXDriver.prototype.getPublicId=function(){return null};SAXDriver.prototype.getSystemId=function(){return null};SAXDriver.prototype.getLength=function(){return this.m_parser.getAttributeCount()};SAXDriver.prototype.getName=function(e){return this.m_parser.getAttributeName(e)};SAXDriver.prototype.getValue=function(e){return this.m_parser.getAttributeValue(e)};SAXDriver.prototype.getValueByName=function(e){return this.m_parser.getAttributeValueByName(e)};SAXDriver.prototype._fireError=function(e){this.m_strErrMsg=e;this.m_bErr=true;if(this.m_hndErr&&this.m_hndErr.fatalError){this.m_hndErr.fatalError(this)}};SAXDriver.prototype._fireEvent=function(e){var t,n,r=arguments,i=r.length-1;if(this.m_bErr)return;if(SAXDriver.DOC_B==e){n="startDocument";t=this.m_hndDoc}else if(SAXDriver.DOC_E==e){n="endDocument";t=this.m_hndDoc}else if(SAXDriver.ELM_B==e){n="startElement";t=this.m_hndDoc}else if(SAXDriver.ELM_E==e){n="endElement";t=this.m_hndDoc}else if(SAXDriver.CHARS==e){n="characters";t=this.m_hndDoc}else if(SAXDriver.PI==e){n="processingInstruction";t=this.m_hndDoc}else if(SAXDriver.CD_B==e){n="startCDATA";t=this.m_hndLex}else if(SAXDriver.CD_E==e){n="endCDATA";t=this.m_hndLex}else if(SAXDriver.CMNT==e){n="comment";t=this.m_hndLex}if(t&&t[n]){if(0==i){t[n]()}else if(1==i){t[n](r[1])}else if(2==i){t[n](r[1],r[2])}else if(3==i){t[n](r[1],r[2],r[3])}}};SAXDriver.prototype._parseLoop=function(e){var t,e;e=this.m_parser;while(!this.m_bErr){t=e.next();if(t==XMLP._ELM_B){this._fireEvent(SAXDriver.ELM_B,e.getName(),this)}else if(t==XMLP._ELM_E){this._fireEvent(SAXDriver.ELM_E,e.getName())}else if(t==XMLP._ELM_EMP){this._fireEvent(SAXDriver.ELM_B,e.getName(),this);this._fireEvent(SAXDriver.ELM_E,e.getName())}else if(t==XMLP._TEXT){this._fireEvent(SAXDriver.CHARS,e.getContent(),e.getContentBegin(),e.getContentEnd()-e.getContentBegin())}else if(t==XMLP._ENTITY){this._fireEvent(SAXDriver.CHARS,e.getContent(),e.getContentBegin(),e.getContentEnd()-e.getContentBegin())}else if(t==XMLP._PI){this._fireEvent(SAXDriver.PI,e.getName(),e.getContent().substring(e.getContentBegin(),e.getContentEnd()))}else if(t==XMLP._CDATA){this._fireEvent(SAXDriver.CD_B);this._fireEvent(SAXDriver.CHARS,e.getContent(),e.getContentBegin(),e.getContentEnd()-e.getContentBegin());this._fireEvent(SAXDriver.CD_E)}else if(t==XMLP._COMMENT){this._fireEvent(SAXDriver.CMNT,e.getContent(),e.getContentBegin(),e.getContentEnd()-e.getContentBegin())}else if(t==XMLP._DTD){}else if(t==XMLP._ERROR){this._fireError(e.getContent())}else if(t==XMLP._NONE){return}}};SAXStrings=function(){};SAXStrings.WHITESPACE="     \n\r";SAXStrings.QUOTES="\"'";SAXStrings.getColumnNumber=function(e,t){if(SAXStrings.isEmpty(e)){return-1}t=t||e.length;var n=e.substring(0,t).split("\n");var r=n[n.length-1];n.length--;var i=n.join("\n").length;return t-i};SAXStrings.getLineNumber=function(e,t){if(SAXStrings.isEmpty(e)){return-1}t=t||e.length;return e.substring(0,t).split("\n").length};SAXStrings.indexOfNonWhitespace=function(e,t,n){if(SAXStrings.isEmpty(e)){return-1}t=t||0;n=n||e.length;for(var r=t;r<n;r++){if(SAXStrings.WHITESPACE.indexOf(e.charAt(r))==-1){return r}}return-1};SAXStrings.indexOfWhitespace=function(e,t,n){if(SAXStrings.isEmpty(e)){return-1}t=t||0;n=n||e.length;for(var r=t;r<n;r++){if(SAXStrings.WHITESPACE.indexOf(e.charAt(r))!=-1){return r}}return-1};SAXStrings.isEmpty=function(e){return e==null||e.length==0};SAXStrings.lastIndexOfNonWhitespace=function(e,t,n){if(SAXStrings.isEmpty(e)){return-1}t=t||0;n=n||e.length;for(var r=n-1;r>=t;r--){if(SAXStrings.WHITESPACE.indexOf(e.charAt(r))==-1){return r}}return-1};SAXStrings.replace=function(e,t,n,r,i){if(SAXStrings.isEmpty(e)){return""}t=t||0;n=n||e.length;return e.substring(t,n).split(r).join(i)};saxStack=function(){this.m_arr=new Array};saxStack.prototype.clear=function(){this.m_arr=new Array};saxStack.prototype.count=function(){return this.m_arr.length};saxStack.prototype.destroy=function(){this.m_arr=null};saxStack.prototype.peek=function(){if(this.m_arr.length==0){return null}return this.m_arr[this.m_arr.length-1]};saxStack.prototype.pop=function(){if(this.m_arr.length==0){return null}var e=this.m_arr[this.m_arr.length-1];this.m_arr.length--;return e};saxStack.prototype.push=function(e){this.m_arr[this.m_arr.length]=e};var xmlTextArray;var xmlCDataArray;var xmlAttrArray;xmlHandler=function(){this.m_strError="";this.m_treePath=[];this.m_xPath=[""];this.m_text=[""];this.m_cdata=[""];this.m_attr=[""];this.m_pi=[""];this.cdata=false};xmlHandler.prototype.characters=function(e,t,n){var r=e.substr(t,n);if(r=="\n")return null;if(this.m_treePath.length>0){if(this.cdata==false){if(!this.m_text[this.m_xPath.join("/")]){this.m_text[this.m_xPath.join("/")]=""}this.m_text[this.m_xPath.join("/")]+=r}else{if(!this.m_cdata[this.m_xPath.join("/")]){this.m_cdata[this.m_xPath.join("/")]=""}this.m_cdata[this.m_xPath.join("/")]+=r}}};xmlHandler.prototype.comment=function(e,t,n){var r=e.substr(t,n)};xmlHandler.prototype.endCDATA=function(){this.cdata=false};xmlHandler.prototype.endDocument=function(){};xmlHandler.prototype.endElement=function(e){this.m_xPath=this.m_xPath.slice(0,-1)};xmlHandler.prototype.error=function(e){this.m_strError+="Error:"+e.getMessage()+"\n"};xmlHandler.prototype.fatalError=function(e){this.m_strError+="fatal error:"+e.getMessage()+"\n"};xmlHandler.prototype.getAttr_Array=function(){return this.m_attr};xmlHandler.prototype.getCDATA_Array=function(){return this.m_cdata};xmlHandler.prototype.getError=function(){return this.m_strError};xmlHandler.prototype.getPath_Array=function(){return this.m_treePath};xmlHandler.prototype.getText_Array=function(){return this.m_text};xmlHandler.prototype.processingInstruction=function(e,t){};xmlHandler.prototype.setDocumentLocator=function(e){this.m_locator=e};xmlHandler.prototype.startCDATA=function(){this.cdata=true};xmlHandler.prototype.startDocument=function(){};xmlHandler.prototype.startElement=function(e,t){alert(e);var n,r=t.getLength();this.m_xPath[this.m_xPath.length]=e;n=this.m_xPath.join("/");this.m_treePath[this.m_treePath.length]=n;if(r){var s=[];for(i=0;i<r;i++){s[t.getName(i)]=t.getValue(i)}this.m_attr[this.m_xPath.join("/")]=s}};xmlHandler.prototype.warning=function(e){this.m_strError+="Warning:"+e.getMessage()+"\n"};Timer.prototype.start=function(){var e=new Date;this.startTime=e.getTime()};Timer.prototype.stop=function(){var e=new Date;this.stopTime=e.getTime()};Timer.prototype.getTime=function(){if(this.startTime&&this.stopTime){return(this.stopTime-this.startTime)/1e3}return 0};var __userAgent=navigator.userAgent;var __isIE=navigator.appVersion.match(/MSIE/)!=null;var __IEVersion=__getIEVersion();var __isIENew=__isIE&&__IEVersion>=8;var __isIEOld=__isIE&&!__isIENew;var __isFireFox=__userAgent.match(/firefox/i)!=null;var __isFireFoxOld=__isFireFox&&(__userAgent.match(/firefox\/2./i)!=null||__userAgent.match(/firefox\/1./i)!=null);var __isFireFoxNew=__isFireFox&&!__isFireFoxOld;var __isWebKit=navigator.appVersion.match(/WebKit/)!=null;var __isChrome=navigator.appVersion.match(/Chrome/)!=null;var __isOpera=window.opera!=null;var __operaVersion=__getOperaVersion();var __isOperaOld=__isOpera&&__operaVersion<10;var eEndBehavior={Reset:0,Constant:1,Repeat:2,Oscillate:3,OffsetRepeat:4,Linear:5};var eImageAntialiasOp={None:0,TwoPass:1,FourPass:2,EightPass:3,EnumCount:4};var eKeyframeShape={Linear:0,Stepped:1,TCB:2,Bezier1D:3,Bezier2D:4,Hermite:5};var eTextureType={Color:0,Diffuse:1,Luminosity:2,Reflection:3,Specularity:4,Transparency:5,Clip:6,Bump:7,EnumCount:8};var eTextureWrap={None:0,Clamp:1,Repeat:2,Mirror:3,EnumCount:4};var eHighlightType={None:0,FourPass:1,EightPass:2};var eBoneFalloffType={InverseDistance:0,InverseDistance_2:1,InverseDistance_4:2,InverseDistance_8:3,InverseDistance_16:4};var FLT_EPSILON=1.192092896e-7;var FLT_MAX=3.402823466e38;var TWOPI=Math.PI*2;var HALFPI=Math.PI/2;var QUARTERPI=Math.PI/4;Vector2D.prototype.v=function(){var e=[this.x,this.y];return e};Vector2D.prototype.load=function(e,t){this.x=e;this.y=t};Vector2D.prototype.copy=function(e){if(e){this.x=e.x;this.y=e.y}};Vector3D.prototype.alert=function(){var e="x: "+this.x+"\n";e+="y: "+this.y+"\n";e+="z: "+this.z+"\n";alert(e)};Vector3D.prototype.v=function(){var e=[this.x,this.y,this.z];return e};Vector3D.prototype.load=function(e,t,n){this.x=e;this.y=t;this.z=n};Vector3D.prototype.copy=function(e){if(e){this.x=e.x;this.y=e.y;this.z=e.z}};Vector3D.prototype.multiplyScalar=function(e){this.x*=e;this.y*=e;this.z*=e};Vector3D.prototype.multiplyVector=function(e){this.x*=e.x;this.y*=e.y;this.z*=e.z};Vector3D.prototype.addVector=function(e){this.x+=e.x;this.y+=e.y;this.z+=e.z};Vector3D.prototype.subtractVector=function(e){this.x-=e.x;this.y-=e.y;this.z-=e.z};Vector3D.prototype.normalize=function(){var e=magnitude(this.x,this.y,this.z);if(e!=0){this.x/=e;this.y/=e;this.z/=e}};Vector4D.prototype.v=function(){var e=[this.x,this.y,this.z,this.w];return e};Vector4D.prototype.load=function(e,t,n,r){if(Vector4D){this.x=e;this.y=t;this.z=n;this.w=r}};Vector4D.prototype.copy=function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w};Matrix4x4.prototype.alert=function(){alert([[this._11,this._12,this._13,this._14].join(" "),[this._21,this._22,this._23,this._24].join(" "),[this._31,this._32,this._33,this._34].join(" "),[this._41,this._42,this._43,this._44].join(" ")].join("\n"))};Matrix4x4.prototype.flatten=function(){var e=[this._11,this._12,this._13,this._14,this._21,this._22,this._23,this._24,this._31,this._32,this._33,this._34,this._41,this._42,this._43,this._44];return e};Matrix4x4.prototype.getAt=function(e,t){switch(e){case 0:{switch(t){case 0:return this._11;case 1:return this._12;case 2:return this._13;case 3:return this._14}}break;case 1:{switch(t){case 0:return this._21;case 1:return this._22;case 2:return this._23;case 3:return this._24}}break;case 2:{switch(t){case 0:return this._31;case 1:return this._32;case 2:return this._33;case 3:return this._34}}break;case 3:{switch(t){case 0:return this._41;case 1:return this._42;case 2:return this._43;case 3:return this._44}}break}};Matrix4x4.prototype.setAt=function(e,t,n){switch(e){case 0:{switch(t){case 0:this._11=n;break;case 1:this._12=n;break;case 2:this._13=n;break;case 3:this._14=n;break}}break;case 1:{switch(t){case 0:this._21=n;break;case 1:this._22=n;break;case 2:this._23=n;break;case 3:this._24=n;break}}break;case 2:{switch(t){case 0:this._31=n;break;case 1:this._32=n;break;case 2:this._33=n;break;case 3:this._34=n;break}}break;case 3:{switch(t){case 0:this._41=n;break;case 1:this._42=n;break;case 2:this._43=n;break;case 3:this._44=n;break}}break}};Matrix4x4.prototype.load=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){this._11=e;this._12=t;this._13=n;this._14=r;this._21=i;this._22=s;this._23=o;this._24=u;this._31=a;this._32=f;this._33=l;this._34=c;this._41=h;this._42=p;this._43=d;this._44=v};Matrix4x4.prototype.loadMatrix=function(e){this._11=e._11;this._12=e._12;this._13=e._13;this._14=e._14;this._21=e._21;this._22=e._22;this._23=e._23;this._24=e._24;this._31=e._31;this._32=e._32;this._33=e._33;this._34=e._34;this._41=e._41;this._42=e._42;this._43=e._43;this._44=e._44};Matrix4x4.prototype.loadArray=function(e){this._11=e[0];this._12=e[1];this._13=e[2];this._14=e[3];this._21=e[4];this._22=e[5];this._23=e[6];this._24=e[7];this._31=e[8];this._32=e[9];this._33=e[10];this._34=e[11];this._41=e[12];this._42=e[13];this._43=e[14];this._44=e[15]};Matrix4x4.prototype.loadIdentity=function(){this._11=1;this._12=0;this._13=0;this._14=0;this._21=0;this._22=1;this._23=0;this._24=0;this._31=0;this._32=0;this._33=1;this._34=0;this._41=0;this._42=0;this._43=0;this._44=1};Matrix4x4.prototype.loadTranslation=function(e,t,n){this.loadIdentity();this._41=e;this._42=t;this._43=n};Matrix4x4.prototype.loadRotation=function(e,t,n,r){var i=new Matrix4x4;var s=new Matrix4x4;var o=Math.sqrt(t*t+n*n);if(o!=0){var u=t/o;var a=n/o;i._22=a;i._23=u;i._32=-u;i._33=a;s._22=a;s._23=-u;s._32=u;s._33=a}var f=new Matrix4x4;var l=new Matrix4x4;var c=magnitude(e,t,n);if(c!=0){var h=o/c;var p=e/c;f._11=h;f._13=p;f._31=-p;f._33=h;l._11=h;l._13=-p;l._31=p;l._33=h}var d=new Matrix4x4;var v=Math.cos(toRadians(r));var m=Math.sin(toRadians(r));d._11=v;d._12=m;d._21=-m;d._22=v;var g=i.multiply(f.multiply(d.multiply(l.multiply(s))));this.loadMatrix(g)};Matrix4x4.prototype.loadXAxisRotation=function(e){this.loadIdentity();var t=Math.cos(toRadians(e));var n=Math.sin(toRadians(e));this._22=t;this._23=n;this._32=-n;this._33=t};Matrix4x4.prototype.loadYAxisRotation=function(e){this.loadIdentity();var t=Math.cos(toRadians(e));var n=Math.sin(toRadians(e));this._11=t;this._13=-n;this._31=n;this._33=t};Matrix4x4.prototype.loadZAxisRotation=function(e){this.loadIdentity();var t=Math.cos(toRadians(e));var n=Math.sin(toRadians(e));this._11=t;this._12=n;this._21=-n;this._22=t};Matrix4x4.prototype.loadXYZAxisRotation=function(e,t,n){var r=new Matrix4x4;var i=new Matrix4x4;var s=new Matrix4x4;r.loadXAxisRotation(e);i.loadYAxisRotation(t);s.loadZAxisRotation(n);var o=i.multiply(r.multiply(s));this.loadMatrix(o)};Matrix4x4.prototype.getRotationAngles=function(){var e,t,n;e=Math.asin(clamp(this._23,-1,1));var r=Math.cos(e);if(!epsilonEqual(r,0,FLT_EPSILON)){t=Math.atan2(-this._13/r,this._33/r);n=Math.atan2(-this._21/r,this._22/r)}else{var i=new Matrix4x4;i.loadXAxisRotation(toDegrees(e));i.transpose();i.loadMatrix(i.multiply(this));t=0;n=Math.atan2(-i._21,i._22)}return{x:toDegrees(e),y:toDegrees(t),z:toDegrees(n)}};Matrix4x4.prototype.loadScale=function(e,t,n){this.loadIdentity();this._11=e;this._22=t;this._33=n};Matrix4x4.prototype.getScalingFactors=function(){var e,t;e=this.transform(1,0,0,0);t=this.transform(2,0,0,0);var n=magnitude(t.x,t.y,t.z)-magnitude(e.x,e.y,e.z);e=this.transform(0,1,0,0);t=this.transform(0,2,0,0);var r=magnitude(t.x,t.y,t.z)-magnitude(e.x,e.y,e.z);e=this.transform(0,0,1,0);t=this.transform(0,0,2,0);var i=magnitude(t.x,t.y,t.z)-magnitude(e.x,e.y,e.z);return{x:n,y:r,z:i}};Matrix4x4.prototype.multiply=function(e){var t=new Matrix4x4;if(!e){return null}t.load(this._11*e._11+this._12*e._21+this._13*e._31+this._14*e._41,this._11*e._12+this._12*e._22+this._13*e._32+this._14*e._42,this._11*e._13+this._12*e._23+this._13*e._33+this._14*e._43,this._11*e._14+this._12*e._24+this._13*e._34+this._14*e._44,this._21*e._11+this._22*e._21+this._23*e._31+this._24*e._41,this._21*e._12+this._22*e._22+this._23*e._32+this._24*e._42,this._21*e._13+this._22*e._23+this._23*e._33+this._24*e._43,this._21*e._14+this._22*e._24+this._23*e._34+this._24*e._44,this._31*e._11+this._32*e._21+this._33*e._31+this._34*e._41,this._31*e._12+this._32*e._22+this._33*e._32+this._34*e._42,this._31*e._13+this._32*e._23+this._33*e._33+this._34*e._43,this._31*e._14+this._32*e._24+this._33*e._34+this._34*e._44,this._41*e._11+this._42*e._21+this._43*e._31+this._44*e._41,this._41*e._12+this._42*e._22+this._43*e._32+this._44*e._42,this._41*e._13+this._42*e._23+this._43*e._33+this._44*e._43,this._41*e._14+this._42*e._24+this._43*e._34+this._44*e._44);return t};Matrix4x4.prototype.leftMultiply=function(e){var t=e.multiply(this);return t};Matrix4x4.prototype.transpose=function(){var e=new Matrix4x4;e.loadMatrix(this);this._11=e._11;this._12=e._21;this._13=e._31;this._14=e._41;this._21=e._12;this._22=e._22;this._23=e._32;this._24=e._42;this._31=e._13;this._32=e._23;this._33=e._33;this._34=e._43;this._41=e._14;this._42=e._24;this._43=e._34;this._44=e._44};Matrix4x4.prototype.invert=function(){var e=determinant4x4(this._11,this._12,this._13,this._14,this._21,this._22,this._23,this._24,this._31,this._32,this._33,this._34,this._41,this._42,this._43,this._44);if(e==0){return}var t=new Matrix4x4;var n,r,i,s,o;for(n=0;n<4;n++){for(r=0;r<4;r++){var u=[];for(i=0,o=0;i<4;i++){if(i==n)continue;for(s=0;s<4;s++){if(s==r)continue;u[o++]=this.getAt(i,s)}}t.setAt(n,r,determinant3x3(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8])/e*(n+r&1?-1:1))}}t.transpose();this.loadMatrix(t)};Matrix4x4.prototype.transform=function(e,t,n,r){var i,s,o;if(r==0){i=this._11*e+this._21*t+this._31*n;s=this._12*e+this._22*t+this._32*n;o=this._13*e+this._23*t+this._33*n}else if(r==1){i=this._11*e+this._21*t+this._31*n+this._41;s=this._12*e+this._22*t+this._32*n+this._42;o=this._13*e+this._23*t+this._33*n+this._43}else{i=this._11*e+this._21*t+this._31*n+this._41*r;s=this._12*e+this._22*t+this._32*n+this._42*r;o=this._13*e+this._23*t+this._33*n+this._43*r}return{x:i,y:s,z:o}};Matrix4x4.prototype.transformw=function(e,t,n,r){var i,s,o,u;if(r==0){i=this._11*e+this._21*t+this._31*n;s=this._12*e+this._22*t+this._32*n;o=this._13*e+this._23*t+this._33*n;u=this._14*e+this._24*t+this._34*n}else if(r==1){i=this._11*e+this._21*t+this._31*n+this._41;s=this._12*e+this._22*t+this._32*n+this._42;o=this._13*e+this._23*t+this._33*n+this._43;u=this._14*e+this._24*t+this._34*n+this._44}else{i=this._11*e+this._21*t+this._31*n+this._41*r;s=this._12*e+this._22*t+this._32*n+this._42*r;o=this._13*e+this._23*t+this._33*n+this._43*r;u=this._14*e+this._24*t+this._34*n+this._44*r}return{x:i,y:s,z:o,w:u}};Matrix4x4.prototype.transformVector3D=function(e,t){return this.transform(e.x,e.y,e.z,t)};MatrixStack.prototype=new Stack;MatrixStack.prototype.constructor=MatrixStack;MatrixStack.prototype.push=function(e){if(e){this.stack.push(e)}else{this.stack.push(this.top())}};MatrixStack.prototype.loadMatrix=function(e){this.load(e)};MatrixStack.prototype.leftMultiply=function(e){var t=e.multiply(this.top());this.pop();Stack.prototype.push.call(this,t)};MatrixStack.prototype.rightMultiply=function(e){var t=this.top().multiply(e);this.pop();Stack.prototype.push.call(this,t)};Quaternion.prototype.load=function(e,t,n,r){this.w=e;this.x=t;this.y=n;this.z=r};Quaternion.prototype.loadQuaternion=function(e){this.w=e.w;this.x=e.x;this.y=e.y;this.z=e.z};Quaternion.prototype.loadArray=function(e){this.w=e[0];this.x=e[1];this.y=e[2];this.z=e[3]};Quaternion.prototype.loadIdentity=function(){this.w=1;this.x=0;this.y=0;this.z=0};Quaternion.prototype.magnitude=function(){return Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z)};Quaternion.prototype.normalize=function(){var e=this.magnitude();this.w/=e;this.x/=e;this.y/=e;this.z/=e};Quaternion.prototype.loadRotation=function(e,t,n,r){var i=toRadians(r)/2;var s=Math.sin(i);var o=Math.cos(i);this.w=o;this.x=e*s;this.y=t*s;this.z=n*s;this.normalize()};Quaternion.prototype.loadXAxisRotation=function(e){var t=toRadians(e)/2;this.w=Math.cos(t);this.x=Math.sin(t);this.y=0;this.z=0};Quaternion.prototype.loadYAxisRotation=function(e){var t=toRadians(e)/2;this.w=Math.cos(t);this.x=0;this.y=Math.sin(t);this.z=0};Quaternion.prototype.loadZAxisRotation=function(e){var t=toRadians(e)/2;this.w=Math.cos(t);this.x=0;this.y=0;this.z=Math.sin(t)};Quaternion.prototype.loadXYZAxisRotation=function(e,t,n){var r=toRadians(e)/2;var i=toRadians(t)/2;var s=toRadians(n)/2;var o=new Quaternion;o.load(Math.cos(r),Math.sin(r),0,0);var u=new Quaternion;u.load(Math.cos(i),0,Math.sin(i),0);var a=new Quaternion;a.load(Math.cos(s),0,0,Math.sin(s));var f=u.multiply(o.multiply(a));this.loadQuaternion(f)};Quaternion.prototype.multiply=function(e){var t=new Quaternion;t.load(this.w*e.w-this.x*e.x-this.y*e.y-this.z*e.z,this.w*e.x+this.x*e.w+this.y*e.z-this.z*e.y,this.w*e.y+this.y*e.w+this.z*e.x-this.x*e.z,this.w*e.z+this.z*e.w+this.x*e.y-this.y*e.x);return t};Quaternion.prototype.getMatrix=function(){var e=new Matrix4x4;var t=this.x+this.x;var n=this.y+this.y;var r=this.z+this.z;var i=this.x*t;var s=this.x*n;var o=this.x*r;var u=this.y*n;var a=this.y*r;var f=this.z*r;var l=this.w*t;var c=this.w*n;var h=this.w*r;e._11=1-(u+f);e._21=s-h;e._31=o+c;e._41=0;e._12=s+h;e._22=1-(i+f);e._32=a-l;e._42=0;e._13=o-c;e._23=a+l;e._33=1-(i+u);e._43=0;e._14=0;e._24=0;e._34=0;e._44=1;return e};Plane2.prototype=new Plane;Plane2.prototype.constructor=Plane2;ViewVolume.prototype.setPerspective=function(e,t,n,r){var i=n*Math.tan(.5*e);var s=i*t;var o=new Vector3D(-s,i,n);var u=new Vector3D(s,i,n);var a=new Vector3D(-s,-i,n);var f=new Vector3D(s,-i,n);i=r*Math.tan(.5*e);s=i*t;var l=new Vector3D(-s,i,r);var c=new Vector3D(s,i,r);var h=new Vector3D(-s,-i,r);var p=new Vector3D(s,-i,r);this.left=new Plane2(o,a,h);this.right=new Plane2(f,u,c);this.top=new Plane2(o,l,c);this.bottom=new Plane2(a,f,p);this.near=new Plane2(a,o,u);this.far=new Plane2(p,c,l)};ViewVolume.prototype.setOrthographic=function(e,t,n,r,i,s){var o=new Vector3D(e,n,i);var u=new Vector3D(t,n,i);var a=new Vector3D(e,r,i);var f=new Vector3D(t,r,i);var l=new Vector3D(e,n,s);var c=new Vector3D(t,n,s);var h=new Vector3D(e,r,s);var p=new Vector3D(t,r,s);this.left=new Plane2(h,l,o);this.right=new Plane2(f,u,c);this.top=new Plane2(o,l,c);this.bottom=new Plane2(p,h,a);this.near=new Plane2(a,o,u);this.far=new Plane2(p,c,l)};var EPSILON=1e-8;var eAttrType={Unknown:-1,Attribute:0,AttributeContainer:1,AttributeVector:2,AttributeFactory:3,AttributeRegistry:4,BalloonTipLabelStyleAttr:5,BBoxAttr:6,BooleanAttr:7,ColorAttr:8,FontStyleAttr:9,IconStyleAttr:10,ImageAttr:11,KeyframeAttr:12,KeyframesAttr:13,LabelStyleAttr:14,HTMLLabelStyleAttr:15,NumberArrayAttr:16,NumberAttr:17,Matrix4x4Attr:18,PlaneAttr:19,PulseAttr:20,RectAttr:21,ReferenceAttr:22,StringAttr:23,StyleAttr:24,StylesAttr:25,StyleMapAttr:26,StylesMapAttr:27,Vector2DAttr:28,Vector3DAttr:29,ViewportAttr:30,ViewVolumeAttr:31,RenderableElementStyleAttr:32,Bone:33,SnapConnector:34,SnapConnectors:35,SocketConnector:36,PlugConnector:37,SphereAttr:38,PhysicalPropertiesAttr:39,Node:1e3,ParentableMotionElement:1001,Camera:1002,PerspectiveCamera:1003,OrthographicCamera:1004,Light:1005,DirectionalLight:1006,PointLight:1007,SpotLight:1008,GlobalIllumination:1009,Material:1010,Texture:1011,RenderableElement:1012,Geometry:1013,VertexGeoemtry:1014,TriList:1015,Group:1016,Isolator:1017,Dissolve:1018,Transform:1019,QuaternionRotate:1020,Scale:1021,Rotate:1022,Translate:1023,Model:1024,Surface:1025,MediaTexture:1026,NullObject:1027,Label:1028,HTMLLabel:1029,BalloonTipLabel:1030,PathTrace:1031,Cube:1032,Bone:1033,Selector:1034,ScreenRect:1035,Evaluator:1100,SceneInspector:1101,KeyframeInterpolator:1102,BBoxLocator:1103,ArcballInspector:1104,MapProjectionCalculator:1105,ObjectInspector:1106,MultiTargetObserver:1107,ObjectMover:1108,AnimalMover:1109,WalkSimulator:1110,MorphEffector:1111,BoneEffector:1112,PhysicsSimulator:1113,Evaluator_End:1199,Node_End:1999,Directive:2e3,UpdateDirective:2001,RenderDirective:2002,RayPickDirective:2003,BBoxDirective:2004,SerializeDirective:2005,CollideDirective:2006,HighlightDirective:2007,Directive_End:2999,Command:3e3,CommandSequence:3001,AppendNode:3002,AttributeTrigger:3003,AutoInterpolate:3004,Locate:3005,Play:3006,Pause:3007,Remove:3008,ScreenCapture:3009,Serialize:3010,Set:3011,Stop:3012,ConnectAttributes:3013,DisconnectAttributes:3014,Export:3015,Morph:3016,SnapTo:3017,Command_End:3999,DeviceHandler:4e3,MouseHandler:4001,KeyboardHandler:4002,DeviceHandler_End:4999,UserDefined:5e3};var eAttrElemType={Unknown:-1,Attribute:0,Int:1,UnsignedInt:2,Char:3,UnsignedChar:4,Float:5,Double:6,UserDefined:100};var eAttrSetOp={Replace:0,Add:1,Subtract:2,Multiply:3,Divide:4,Append:5,AND:6,OR:7,XOR:8,NAND:9,NOR:10};Attribute.prototype=new Base;Attribute.prototype.constructor=Attribute;Attribute.prototype.destroy=function(){this.removeAllSources();this.removeAllTargets();Base.prototype.destroy.call(this)};Attribute.prototype.clone=function(){return null};Attribute.prototype.getValue=function(e,t){var n=t?t.elementIndex:-1;if(n<0){if(this.values==null){e[0]=null}else if(this.values.length==undefined){e[0]=this.values}else{for(var r=0;r<this.values.length;r++){e[r]=this.values[r]}}}else{var i=Math.max(0,t?t.valueElementIndex:0);e[i]=this.values[n]}};Attribute.prototype.setValue=function(e,t){this.lastValues=this.values.slice();var n=t?t.elementIndex:-1;var r=t?t.op:eAttrSetOp.Replace;if(n<0){if(e==null){this.values[0]=null}else if(e.length==undefined){switch(r){case eAttrSetOp.Add:this.values[0]+=e;break;case eAttrSetOp.Replace:this.values[0]=e;break;case eAttrSetOp.AND:this.values[0]&=e;break;default:alert("unsupported operation passed to Attribute::setValue");break}}else{for(var i=0;i<e.length;i++){switch(r){case eAttrSetOp.Add:this.values[i]+=e[i];break;case eAttrSetOp.Replace:this.values[i]=e[i];break;case eAttrSetOp.AND:this.values[i]&=e[i];break;default:alert("unsupported operation passed to Attribute::setValue");break}}}}else{if(e==null){this.values[n]=null}else if(e.length==undefined){this.values[n]=e}else{var s=Math.max(0,t?t.valueElementIndex:0);this.values[n]=e[s]}}var o=t?t.alertModifiedCBs:true;if(o){for(var i=0;i<this.modifiedCBs.length;i++){this.modifiedCBs[i](this,this.modifiedCBsData[i])}}var u=t?t.updateTargets:true;if(u){var a=t?t.caller:null;for(var i=0;i<this.targets.length;i++){var f=this.targets[i];if(a==f.target)continue;var t=new AttributeSetParams(f.targetElementIndex,f.sourceElementIndex,f.op,true,true,this);f.target.setValue(this.values,t)}}};Attribute.prototype.revertValues=function(){this.setValue(this.lastValues,null)};Attribute.prototype.getElement=function(e){if(this.values.length>e){return this.values[e]}return undefined};Attribute.prototype.setElement=function(e,t,n,r){console.debug("TODO: "+arguments.callee.name)};Attribute.prototype.getLength=function(){if(this.values.length==undefined){return this.values==undefined?0:1}return this.values.length};Attribute.prototype.setLength=function(e){this.values.length=e};Attribute.prototype.addModifiedCB=function(e,t){this.modifiedCBs.push(e);this.modifiedCBsData.push(t)};Attribute.prototype.removeModifiedCB=function(e,t){this.modifiedCBs.splice(this.modifiedCBs.indexOf(e),1);this.modifiedCBsData.splice(this.modifiedCBsData.indexOf(t),1)};Attribute.prototype.addTarget=function(e,t,n,r){if(t==undefined)t=eAttrSetOp.Replace;if(n==undefined)n=null;if(r==undefined)r=true;this.addElementTarget(e,-1,-1,t,n,r)};Attribute.prototype.addSource=function(e,t,n,r){e.addTarget(this,t,n,r)};Attribute.prototype.removeTarget=function(e){this.removeElementTarget(e,-1,-1)};Attribute.prototype.removeSource=function(e){e.removeTarget(this)};Attribute.prototype.removeAllTargets=function(){while(this.targets.length>0){this.removeElementTarget(this.targets[0].target,this.targets[0].sourceElementIndex,this.targets[0].targetElementIndex)}};Attribute.prototype.removeAllSources=function(){while(this.sources.length>0){this.sources[0].source.removeElementTarget(this,this.sources[0].sourceElementIndex,this.sources[0].targetElementIndex)}};Attribute.prototype.addElementTarget=function(e,t,n,r,i,s){if(e){if(t==undefined)t=-1;if(n==undefined)n=-1;if(r==undefined)r=eAttrSetOp.Replace;if(i==undefined)i=null;if(s==undefined)s=true;this.createTarget(new AttributeTargetDesc(e,t,n,r,i));e.createSource(new AttributeSourceDesc(this,t,n,r,i));if(s){var o=new AttributeSetParams(n,t,r,true,true);e.setValue(this.values,o)}}};Attribute.prototype.addElementSource=function(e,t,n,r,i,s){e.addElementTarget(this,t,n,r,i,s)};Attribute.prototype.removeElementTarget=function(e,t,n){if(e){this.deleteTarget(new AttributeTargetDesc(e,t,n));e.deleteSource(new AttributeSourceDesc(this,t,n))}};Attribute.prototype.removeElementSource=function(e,t,n){e.removeElementTarget(this,t,n)};Attribute.prototype.createTarget=function(e){this.targets.push(e)};Attribute.prototype.createSource=function(e){this.sources.push(e)};Attribute.prototype.deleteTarget=function(e){for(var t=0;t<this.targets.length;t++){var n=this.targets[t];if(n.target==e.target&&n.sourceElementIndex==e.sourceElementIndex&&n.targetElementIndex==e.targetElementIndex){this.targets.splice(t,1);break}}};Attribute.prototype.deleteSource=function(e){for(var t=0;t<this.sources.length;t++){var n=this.sources[t];if(n.source==e.source&&n.sourceElementIndex==e.sourceElementIndex&&n.targetElementIndex==e.targetElementIndex){this.sources.splice(t,1);break}}};Attribute.prototype.copyValue=function(e,t){e.addTarget(this,t);e.removeTarget(this)};Attribute.prototype.isContainer=function(){return false};Attribute.prototype.isCollection=function(){return false};Attribute.prototype.isNode=function(){return false};Attribute.prototype.getContainer=function(){return this.container};Attribute.prototype.setContainer=function(e){this.container=e};Attribute.prototype.setNative=function(e){this.native=e};Attribute.prototype.isNative=function(){return this.native};Attribute.prototype.setTransient=function(e){this.transient=e};Attribute.prototype.isTransient=function(){return this.transient};Attribute.prototype.setPersistent=function(e){this.persistent=e};Attribute.prototype.isPersistent=function(){return this.persistent};Attribute.prototype.getRegistry=function(){return this.registry};Attribute.prototype.setRegistry=function(e){this.registry=e};Attribute.prototype.onRegister=function(e){};Attribute.prototype.onUnregister=function(e){};Attribute.prototype.flagDeserializedFromXML=function(){this.deserialized=true;if(this.attrContainer){this.attrContainer.flagDeserializedFromXML()}};Attribute.prototype.isDeserializedFromXML=function(){return this.deserialized};AttributeContainer.prototype=new Attribute;AttributeContainer.prototype.constructor=AttributeContainer;AttributeContainer.prototype.destroy=function(){for(var e in this.attrNameMap){for(var t=0;t<this.attrNameMap[e].length;t++){var n=this.attrNameMap[e][t];if(n.getContainer()==this){n.destroy()}}}Attribute.prototype.destroy.call(this)};AttributeContainer.prototype.isContainer=function(){return true};AttributeContainer.prototype.registerAttribute=function(e,t){if(!e)return;if(this.attrNameMap[t]==undefined){this.attrNameMap[t]=new Array}this.attrNameMap[t].push(e);this.attrModifiedCountMap.push(new Pair(e,0));if(!e.getContainer()){e.setContainer(this)}e.addModifiedCB(AttributeContainer_AttributeModifiedCB,this);e.addModifiedCB(AttributeContainer_AttributeModifiedCounterCB,this)};AttributeContainer.prototype.unregisterAttribute=function(e){if(!e)return;for(var t in this.attrNameMap){for(var n=0;n<this.attrNameMap[t].length;n++){if(this.attrNameMap[t][n]==e){e.removeModifiedCB(AttributeContainer_AttributeModifiedCB,this);e.removeModifiedCB(AttributeContainer_AttributeModifiedCounterCB,this);delete this.attrNameMap[t][n];this.attrNameMap[t].splice(n,1);break}}}};AttributeContainer.prototype.getAttribute=function(e){if(this.attrNameMap[e]==undefined){return null}return this.attrNameMap[e][0]};AttributeContainer.prototype.getAttributeAt=function(e){var t=0;for(var n in this.attrNameMap){for(var r=0;r<this.attrNameMap[n].length;r++){if(t==e){return this.attrNameMap[n][r]}t++}}return null};AttributeContainer.prototype.getAttributeName=function(e){var t=0;for(var n in this.attrNameMap){for(var r=0;r<this.attrNameMap[n].length;r++){if(this.attrNameMap[n][r]==e){return n}t++}}return null};AttributeContainer.prototype.getAttributeNameAt=function(e){var t=0;for(var n in this.attrNameMap){for(var r=0;r<this.attrNameMap[n].length;r++){if(t==e){return n}t++}}return null};AttributeContainer.prototype.getAttributeCount=function(){var e=0;for(var t in this.attrNameMap)e+=this.attrNameMap[t].length;return e};AttributeContainer.prototype.getAttributeModificationCount=function(e){for(var t in this.attrModifiedCountMap){if(this.attrModifiedCountMap[t].first==e){return this.attrModifiedCountMap[t].second}}return undefined};AttributeContainer.prototype.incrementAttributeModificationCount=function(e){for(var t in this.attrModifiedCountMap){if(this.attrModifiedCountMap[t].first==e){this.attrModifiedCountMap[t].second++;break}}};AttributeContainer.prototype.addTarget=function(e,t,n,r){if(e){if(t==undefined)t=null;if(n==undefined)n=null;if(r==undefined)r=true;var i=Math.max(this.getAttributeCount(),e.getAttributeCount());if(i==0){return}var s=null;var o=null;for(var u=0;u<i;u++){s=this.getAttributeAt(u);o=e.getAttribute(this.getAttributeNameAt(u));if(!s||!o){continue}s.addTarget(o,t,n,r)}}};AttributeContainer.prototype.removeTarget=function(e){if(e){var t=Math.max(this.getAttributeCount(),e.getAttributeCount());if(t==0){return}var n=null;var r=null;for(var i=0;i<t;i++){n=this.getAttributeAt(i);r=e.getAttribute(this.getAttributeNameAt(i));if(!n||!r){continue}n.removeTarget(r)}}};AttributeContainer.prototype.synchronize=function(e,t){if(t==undefined)t=true;for(var n in e.attrNameMap){for(var r=0;r<e.attrNameMap.length;r++){var i=this.attrNameMap[n][r];if(!i){i=e.attrNameMap[n].clone();if(!i)continue;i.setContainer(this);this.registerAttribute(i,n)}if(i&&t){i.copyValue(e.attrNameMap[n])}}}};AttributeRegistry.prototype=new AttributeContainer;AttributeRegistry.prototype.constructor=AttributeRegistry;AttributeRegistry.prototype.addUnique=function(e){for(var t=0;t<this.uniqueAttributes.length;t++){if(this.uniqueAttributes[t]==e)return}this.uniqueAttributes.push(e)};AttributeRegistry.prototype.removeUnique=function(e){for(var t=0;t<this.uniqueAttributes.length;t++){if(this.uniqueAttributes[t]==e){this.uniqueAttributes.splice(t,1);return}}};AttributeRegistry.prototype.registerByType=function(e,t){if(this.typeRegistry[t]==undefined){this.typeRegistry[t]=new Array}this.typeRegistry[t].push(e)};AttributeRegistry.prototype.registerByName=function(e,t){if(t.length==0){t="unnamed"}if(this.nameRegistry[t]==undefined){this.nameRegistry[t]=new Array}this.nameRegistry[t].push(e)};AttributeRegistry.prototype.register=function(e){this.registerByType(e,e.attrType);if(e.isContainer()){var t=e.getAttribute("name")||e.getAttribute("id");if(t){this.registerByName(e,t.getValueDirect().join(""));t.addModifiedCB(AttributeRegistry_AttributeContainerNameModifiedCB,this)}}this.addUnique(e);this.objectCount++;e.onRegister(this)};AttributeRegistry.prototype.unregisterByType=function(e,t){if(this.typeRegistry[t]){this.typeRegistry[t].splice(this.typeRegistry[t].indexOf(e),1)}};AttributeRegistry.prototype.unregisterByName=function(e,t){if(t.length==0){t="unnamed"}if(this.nameRegistry[t]){this.nameRegistry[t].splice(this.nameRegistry[t].indexOf(e),1)}};AttributeRegistry.prototype.unregister=function(e){this.unregisterByType(e,e.attrType);if(e.isContainer()){var t=e.getAttribute("name")||e.getAttribute("id");if(t){this.unregisterByName(e,t.getValueDirect().join(""));t.removeModifiedCB(AttributeRegistry_AttributeContainerNameModifiedCB,this)}}this.removeUnique(e);this.objectCount--;e.onUnregister(this)};AttributeRegistry.prototype.getByType=function(e){switch(e){case eAttrType.Camera:{var t=[];var n=this.getByType(eAttrType.PerspectiveCamera);if(n){for(var r=0;r<n.length;r++){t.push(n[r])}}var i=this.getByType(eAttrType.OrthographicCamera);if(i){for(var r=0;r<i.length;r++){t.push(i[r])}}return t}break;case eAttrType.Evaluator:{var t=[];for(var s=eAttrType.Evaluator+1;s!=eAttrType.Evaluator_End;s++){var o=this.getByType(s);if(o){for(var r=0;r<o.length;r++){t.push(o[r])}}}return t}break;default:{return this.typeRegistry[e]}break}};AttributeRegistry.prototype.getByName=function(e){return this.nameRegistry[e]};AttributeRegistry.prototype.updateName=function(e,t){for(var n in this.nameRegistry){for(var r=0;r<this.nameRegistry[n].length;r++){if(this.nameRegistry[n][r]==e){this.nameRegistry[n].splice(r,1);this.registerByName(e,t);return}}}};AttributeRegistry.prototype.clear=function(){for(var e in this.typeRegistry){this.typeRegistry[e]=[]}this.typeRegistry=[];for(var e in this.nameRegistry){this.nameRegistry[e]=[]}this.nameRegistry=[];this.uniqueAttributes=[];this.objectCount=0};AttributeRegistry.prototype.getObjectCount=function(){return this.uniqueAttributes.length};AttributeRegistry.prototype.getObject=function(e){if(e<this.uniqueAttributes.length){return this.uniqueAttributes[e]}return null};BooleanAttr.prototype=new Attribute;BooleanAttr.prototype.constructor=BooleanAttr;BooleanAttr.prototype.clone=function(){var e=new BooleanAttr;e.setValue(this.values);return e};BooleanAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return e[0]};BooleanAttr.prototype.setValueDirect=function(e,t){var n=[e];this.setValue(e,t)};ColorAttr.prototype=new Attribute;ColorAttr.prototype.constructor=ColorAttr;ColorAttr.prototype.clone=function(){var e=new ColorAttr;e.setValue(this.values);return e};ColorAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return{r:e[0],g:e[1],b:e[2],a:e[3]}};ColorAttr.prototype.setValueDirect=function(e,t,n,r,i){var s=[e,t,n,r];this.setValue(s,i)};Matrix4x4Attr.prototype=new Attribute;Matrix4x4Attr.prototype.constructor=Matrix4x4Attr;Matrix4x4Attr.prototype.clone=function(){var e=new Matrix4x4Attr;e.setValue(this.values);return e};Matrix4x4Attr.prototype.getValueDirect=function(){var e=[];this.getValue(e);var t=new Matrix4x4;t.loadArray(e);return t};Matrix4x4Attr.prototype.setValueDirect=function(e,t){var n=[e._11,e._12,e._13,e._14,e._21,e._22,e._23,e._24,e._31,e._32,e._33,e._34,e._41,e._42,e._43,e._44];this.setValue(n,t)};NumberArrayAttr.prototype=new Attribute;NumberArrayAttr.prototype.constructor=NumberArrayAttr;NumberArrayAttr.prototype.clone=function(){var e=new NumberArrayAttr;e.setValue(this.values);return e};NumberArrayAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return e};NumberArrayAttr.prototype.setValueDirect=function(e,t){this.setValue(e,t)};NumberAttr.prototype=new Attribute;NumberAttr.prototype.constructor=NumberAttr;NumberAttr.prototype.clone=function(){var e=new NumberAttr;e.setValue(this.values);return e};NumberAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return e[0]};NumberAttr.prototype.setValueDirect=function(e,t){var n=[e];this.setValue(n,t)};PulseAttr.prototype=new BooleanAttr;PulseAttr.prototype.constructor=PulseAttr;PulseAttr.prototype.clone=function(){var e=new PulseAttr;e.setValue(this.values);return e};PulseAttr.prototype.pulse=function(){this.setValueDirect(true);this.setValueDirect(false)};QuaternionAttr.prototype=new Attribute;QuaternionAttr.prototype.constructor=QuaternionAttr;QuaternionAttr.prototype.clone=function(){var e=new QuaternionAttr;e.setValue(this.values);return e};QuaternionAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);var t=new Quaternion;t.loadArray(e);return t};QuaternionAttr.prototype.setValueDirect=function(e,t){var n=[e.w,e.x,e.y,e.z];this.setValue(n,t)};ReferenceAttr.prototype=new Attribute;ReferenceAttr.prototype.constructor=ReferenceAttr;ReferenceAttr.prototype.clone=function(){var e=new ReferenceAttr;e.setValue(this.values);return e};ReferenceAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return e[0]};ReferenceAttr.prototype.setValueDirect=function(e,t){var n=[e];this.setValue(e,t)};StringAttr.prototype=new Attribute;StringAttr.prototype.constructor=StringAttr;StringAttr.prototype.clone=function(){var e=new StringAttr;e.setValue(this.values);return e};StringAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return e};StringAttr.prototype.setValueDirect=function(e,t){this.setValue(e,t)};StringAttr.prototype.setValue=function(e,t){this.values=[];Attribute.prototype.setValue.call(this,e,t)};StringAttrAllocator.prototype=new Allocator;StringAttrAllocator.prototype.constructor=StringAttrAllocator;StringAttrAllocator.prototype.allocate=function(){return new StringAttr};TernaryAttr.prototype=new NumberAttr;TernaryAttr.prototype.constructor=TernaryAttr;TernaryAttr.prototype.clone=function(){var e=new TernaryAttr;e.setValue(this.values);return e};Vector2DAttr.prototype=new Attribute;Vector2DAttr.prototype.constructor=Vector2DAttr;Vector2DAttr.prototype.clone=function(){var e=new Vector2DAttr;e.setValue(this.values);return e};Vector2DAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return{x:e[0],y:e[1]}};Vector2DAttr.prototype.setValueDirect=function(e,t,n){var r=[e,t];this.setValue(r,n)};Vector3DAttr.prototype=new Attribute;Vector3DAttr.prototype.constructor=Vector3DAttr;Vector3DAttr.prototype.clone=function(){var e=new Vector3DAttr;e.setValue(this.values);return e};Vector3DAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return{x:e[0],y:e[1],z:e[2]}};Vector3DAttr.prototype.setValueDirect=function(e,t,n,r){var i=[e,t,n];this.setValue(i,r)};Vector3DAttr.prototype.isZero=function(){var e=[];this.getValue(e);return e[0]==0&&e[1]==0&&e[2]==0?true:false};ViewportAttr.prototype=new Attribute;ViewportAttr.prototype.constructor=ViewportAttr;ViewportAttr.prototype.clone=function(){var e=new ViewportAttr;e.setValue(this.values);return e};ViewportAttr.prototype.getValueDirect=function(){var e=[];this.getValue(e);return{x:e[0],y:e[1],width:e[2],height:e[3]}};ViewportAttr.prototype.setValueDirect=function(e,t,n,r,i){var s=[e,t,n,r];this.setValue(s,i)};AttributeVector.prototype=new AttributeContainer;AttributeVector.prototype.constructor=AttributeVector;AttributeVector.prototype.allocatesElements=function(){return this.allocator?true:false};AttributeVector.prototype.push_back=function(e){this.addElement(this.vector.length,e);this.size.setValueDirect(this.vector.length)};AttributeVector.prototype.resize=function(e){this.size.setValueDirect(e)};AttributeVector.prototype.clear=function(){this.resize(0)};AttributeVector.prototype.getAt=function(e){if(this.vector.length>e){return this.vector[e]}return null};AttributeVector.prototype.setAt=function(e,t){if(this.vector.length>e){this.vector[e]=t}};AttributeVector.prototype.prev=function(e){for(var t=0;t<this.vector.length;t++){if(this.vector[t]==e){if(t>0)return this.vector[t-1];break}}return null};AttributeVector.prototype.next=function(e){for(var t=0;t<this.vector.length;t++){if(this.vector[t]==e){if(t<this.vector.length-1)return this.vector[t+1];break}}return null};AttributeVector.prototype.addElement=function(e,t){this.vector.splice(e,0,t)};AttributeVector.prototype.removeElement=function(e){this.vector.splice(e,1)};AttributeVector.prototype.Size=function(){return this.size.getValueDirect()};AttributeVector.prototype.AppendParsedElements=function(){return this.appendParsedElements.getValueDirect()};AttributeVector.prototype.setElementName=function(e,t){this.unregisterAttribute(e);this.registerAttribute(e,t);console.debug("TODO: add to element name map")};AttributeVector.prototype.synchronize=function(e,t){AttributeContainer.prototype.synchronize.call(this,e,t);this.clear();for(var n=0;n<e.vector.length;n++){this.push_back(e.vector[n])}};AttributeVector.prototype.isCollection=function(){return true};AttributeVector.prototype.sizeModified=function(){var e=this.vector.length;var t=this.size.getValueDirect();var n,r;if(t>e){n=e;r=n+(t-e);for(var i=n;i<r;i++){this.addElement(i,this.allocator?this.allocator.allocate():null)}}else if(t<e){n=e;r=n-(e-t);for(var i=n-1;i>=r;i--){this.removeElement(i)}}};StyleAttr.prototype=new AttributeContainer;StyleAttr.prototype.constructor=StyleAttr;StyleAttr.prototype.updateStyle=function(e){};StyleAttr.prototype.styleUrlModified=function(){var e=this.styleUrl.getValueDirect().join("");if(this.registry){this.updateStyle(this.registry.find(e))}};StylesAttr.prototype=new AttributeVector;StylesAttr.prototype.constructor=StylesAttr;StylesAttr.prototype.updateStyle=function(e){var t=this.enabled.getValueDirect();if(!t){return}for(var n=0;n<e.Size();n++){for(var r=0;r<this.Size();r++){if(this.vector[r].attrType==e.vector[n].attrType){this.vector[r].updateStyle(e.vector[n]);break}}}};StylesAttr.prototype.registerStyle=function(e,t){this.push_back(e);this.setElementName(e,t);this.alertRegisteredCBs(e,true)};StylesAttr.prototype.unregisterStyle=function(e){for(var t in this.vector){if(this.vector[t]==e){this.alertRegisteredCBs(e,false);delete this.vector[t];break}}};StylesAttr.prototype.addRegisteredCB=function(e,t){this.registeredCBs.push(e);this.registeredCBsData.push(t)};StylesAttr.prototype.alertRegisteredCBs=function(e,t){for(var n=0;n<this.registeredCBs.length;n++){this.registeredCBs[n](e,this.registeredCBs[n])}};StylesAttr.prototype.push_back=function(e){AttributeVector.prototype.push_back.call(this,e);this.alertRegisteredCBs(e,true)};StylesAttr.prototype.getStyle=function(e){for(var t=0;t<this.Size();t++){if(this.vector[t].attrType==e){return this.vector[t]}}return undefined};StyleMapAttr.prototype=new AttributeContainer;StyleMapAttr.prototype.constructor=StyleMapAttr;StyleMapAttr.prototype.getStyles=function(e){var t=null;var n=null;if(this.eventType==e){t=this.styles;n=this.targetContainer}return{styles:t,target:n}};StyleMapAttr.prototype.setStyles=function(e){this.styles=e};StyleMapAttr.prototype.setTargetContainer=function(e){this.targetContainer=e};StyleMapAttr.prototype.eventModified=function(){var e=this.event.getValueDirect().join("");this.eventType=eEventNameMap[e]};StyleMapAttr.prototype.styleUrlModified=function(){var e=this.styleUrl.getValueDirect();if(e[0]=="#"){e.splice(0,1)}e=e.join("");var t=this.registry.find(e);if(t){this.styles=t}};StyleMapAttr.prototype.targetModified=function(){var e=this.target.getValueDirect().join("");this.targetContainer=this.registry.find(e)};StyleMapAttrAllocator.prototype=new Allocator;StyleMapAttrAllocator.prototype.constructor=StyleMapAttrAllocator;StyleMapAttrAllocator.prototype.allocate=function(){return new StyleMapAttr};StylesMapAttr.prototype=new AttributeVector;StylesMapAttr.prototype.constructor=StylesMapAttr;StylesMapAttr.prototype.getStyles=function(e){var t=null;var n=false;var r=null;for(var i=0;i<this.Size();i++){var s=this.vector[i].getStyles(e);if(s.styles){t=s.styles;r=s.target;if(this.stylesEnabledMap[s.styles]){n=this.stylesEnabledMap[s.styles]}}}return{styles:t,target:r,enabled:n}};StylesMapAttr.prototype.StylesMapAttr_SizeModified=function(){for(var e=0;e<this.Size();e++){if(!this.vector[e].registry){this.vector[e].setRegistry(this.registry)}if(!this.stylesEnabledMap[this.vector[e].styles]){this.stylesEnabledMap[this.vector[e].styles]=new BooleanAttr(true)}}};KeyframeAttr.prototype=new AttributeContainer;KeyframeAttr.prototype.constructor=KeyframeAttr;KeyframesAttr.prototype=new AttributeVector;KeyframesAttr.prototype.constructor=KeyframesAttr;BBoxAttr.prototype=new AttributeContainer;BBoxAttr.prototype.constructor=BBoxAttr;BBoxAttr.prototype.setValueDirect=function(e,t){this.min.setValueDirect(e.x,e.y,e.z);this.max.setValueDirect(t.x,t.y,t.z)};ImageAttr.prototype=new AttributeContainer;ImageAttr.prototype.constructor=ImageAttr;RectAttr.prototype=new AttributeContainer;RectAttr.prototype.constructor=RectAttr;RectAttr.prototype.getValueDirect=function(){var e=new Rect;e.left=this.left.getValueDirect();e.top=this.top.getValueDirect();e.right=this.right.getValueDirect();e.bottom=this.bottom.getValueDirect();return e};RectAttr.prototype.setValueDirect=function(e){this.left.setValueDirect(e.left);this.top.setValueDirect(e.top);this.right.setValueDirect(e.right);this.bottom.setValueDirect(e.bottom)};RectAttr.prototype.containsPoint=function(e,t){if(e>=this.left.getValueDirect()&&t>=this.top.getValueDirect()&&e<=this.right.getValueDirect()&&t<=this.bottom.getValueDirect())return true;return false};FontStyleAttr.prototype=new StyleAttr;FontStyleAttr.prototype.constructor=FontStyleAttr;FontStyleAttr.prototype.updateStyle=function(e){var t=e.setOp.getValueDirect();if(e.getAttributeModificationCount(e.antialiasType)){this.antialiasType.copyValue(e.antialiasType,t)}if(e.getAttributeModificationCount(e.borderColor)){this.borderColor.copyValue(e.borderColor,t)}if(e.getAttributeModificationCount(e.borderWidth)){this.borderWidth.copyValue(e.borderWidth,t)}if(e.getAttributeModificationCount(e.color)){this.color.copyValue(e.color,t)}if(e.getAttributeModificationCount(e.effects)){this.effects.copyValue(e.effects,t)}if(e.getAttributeModificationCount(e.font)){this.font.copyValue(e.font,t)}if(e.getAttributeModificationCount(e.opacity)){this.opacity.copyValue(e.opacity,t)}if(e.getAttributeModificationCount(e.size)){this.size.copyValue(e.size,t)}if(e.getAttributeModificationCount(e.style)){this.style.copyValue(e.style,t)}};LabelStyleAttr.prototype=new StyleAttr;LabelStyleAttr.prototype.constructor=LabelStyleAttr;LabelStyleAttr.prototype.updateStyle=function(e){var t=e.setOp.getValueDirect();if(e.getAttributeModificationCount(e.angle)){this.angle.copyValue(e.angle,t)}if(e.getAttributeModificationCount(e.backgroundColor)){this.backgroundColor.copyValue(e.backgroundColor,t)}if(e.getAttributeModificationCount(e.backgroundOpacity)){this.backgroundOpacity.copyValue(e.backgroundOpacity,t)}this.fontStyle.updateStyle(e.fontStyle);if(e.getAttributeModificationCount(e.format)){this.format.copyValue(e.format,t)}if(e.getAttributeModificationCount(e.height)){this.height.copyValue(e.height,t)}if(e.getAttributeModificationCount(e.offset)){this.offset.copyValue(e.offset,t)}if(e.getAttributeModificationCount(e.padding)){this.padding.copyValue(e.padding,t)}if(e.getAttributeModificationCount(e.scale)){this.scale.copyValue(e.scale,t)}if(e.getAttributeModificationCount(e.textAlign)){this.textAlign.copyValue(e.textAlign,t)}if(e.getAttributeModificationCount(e.width)){this.width.copyValue(e.width,t)}};IconStyleAttr.prototype=new StyleAttr;IconStyleAttr.prototype.constructor=IconStyleAttr;IconStyleAttr.prototype.updateStyle=function(e){var t=e.setOp.getValueDirect();if(e.getAttributeModificationCount(e.alphaUrl)){this.alphaUrl.copyValue(e.alphaUrl,t)}if(e.getAttributeModificationCount(e.color)){this.color.copyValue(e.color,t)}if(e.getAttributeModificationCount(e.opacity)){this.opacity.copyValue(e.opacity,t)}if(e.getAttributeModificationCount(e.scale)){this.scale.copyValue(e.scale,t)}if(e.getAttributeModificationCount(e.url)){this.url.copyValue(e.url,t)}};HTMLLabelStyleAttr.prototype=new StyleAttr;HTMLLabelStyleAttr.prototype.constructor=HTMLLabelStyleAttr;BalloonTipLabelStyleAttr.prototype=new StyleAttr;BalloonTipLabelStyleAttr.prototype.constructor=BalloonTipLabelStyleAttr;BalloonTipLabelStyleAttr.prototype.updateStyle=function(e){var t=e.setOp.getValueDirect();if(e.getAttributeModificationCount(e.balloonOffset)){this.balloonOffset.copyValue(e.balloonOffset,t)}if(e.getAttributeModificationCount(e.bgColor)){this.bgColor.copyValue(e.bgColor,t)}if(e.getAttributeModificationCount(e.displayMode)){this.displayMode.copyValue(e.displayMode,t)}this.htmlLabelStyle.updateStyle(e.htmlLabelStyle);if(e.getAttributeModificationCount(e.text)){this.text.copyValue(e.text,t)}if(e.getAttributeModificationCount(e.textColor)){this.textColor.copyValue(e.textColor,t)}};RenderableElementStyleAttr.prototype=new StyleAttr;RenderableElementStyleAttr.prototype.constructor=RenderableElementStyleAttr;RenderableElementStyleAttr.prototype.updateStyle=function(e){var t=e.setOp.getValueDirect();if(e.getAttributeModificationCount(e.hasFocus)){this.hasFocus.copyValue(e.hasFocus,t)}if(e.getAttributeModificationCount(e.selected)){this.selected.copyValue(e.selected,t)}};PlaneAttr.prototype=new AttributeContainer;PlaneAttr.prototype.constructor=PlaneAttr;PlaneAttr.prototype.getValueDirect=function(){var e=this.point.getValueDirect();var t=this.normal.getValueDirect();var n=new Plane(new Vector3D(e.x,e.y,e.z),new Vector3D(t.x,t.y,t.z));return n};PlaneAttr.prototype.setValueDirect=function(e){this.point.setValueDirect(e.point.x,e.point.y,e.point.z);this.normal.setValueDirect(e.normal.x,e.normal.y,e.normal.z);this.dot.setValueDirect(e.dot)};ViewVolumeAttr.prototype=new AttributeContainer;ViewVolumeAttr.prototype.constructor=ViewVolumeAttr;ViewVolumeAttr.prototype.setValueDirect=function(e,t,n,r,i,s){this.left.setValueDirect(e);this.right.setValueDirect(t);this.top.setValueDirect(n);this.bottom.setValueDirect(r);this.near.setValueDirect(i);this.far.setValueDirect(s)};SphereAttr.prototype=new AttributeContainer;SphereAttr.prototype.constructor=SphereAttr;PhysicalPropertiesAttr.prototype=new AttributeContainer;PhysicalPropertiesAttr.prototype.constructor=PhysicalPropertiesAttr;Agent.prototype=new AttributeContainer;Agent.prototype.constructor=Agent;Agent.prototype.start=function(){this.running=true};Agent.prototype.stop=function(){this.running=false};Agent.prototype.pause=function(){this.running=false};Sphere.prototype.setTransform=function(e){var t=e.transform(this.center.x,this.center.y,this.center.z,1);this.xcenter.x=t.x;this.xcenter.y=t.y;this.xcenter.z=t.z;var n=e.getScalingFactors();this.xradius=this.radius*max3(n.x,n.y,n.z)};Sphere.prototype.intersects=function(e){var t=distanceBetween(this.xcenter,e.xcenter);var n=this.xradius+e.xradius;if(t<n)return true;return false};Region.prototype.setPlanes=function(){this.xpos=new Plane(this.max,new Vector3D(1,0,0));this.xneg=new Plane(this.min,new Vector3D(-1,0,0));this.ypos=new Plane(this.max,new Vector3D(0,1,0));this.yneg=new Plane(this.min,new Vector3D(0,-1,0));this.zpos=new Plane(this.max,new Vector3D(0,0,1));this.zneg=new Plane(this.min,new Vector3D(0,0,-1));var e=new Vector3D(this.max.x,this.max.y,this.max.z);var t=new Vector3D(this.max.x,this.max.y,this.min.z);var n=new Vector3D(this.max.x,this.min.y,this.max.z);var r=new Vector3D(this.max.x,this.min.y,this.min.z);var i=new Vector3D(this.min.x,this.max.y,this.max.z);var s=new Vector3D(this.min.x,this.max.y,this.min.z);var o=new Vector3D(this.min.x,this.min.y,this.max.z);var u=new Vector3D(this.min.x,this.min.y,this.min.z);this.xpos_ypos_zpos=new Plane(e,e-u);this.xpos_ypos_zneg=new Plane(t,t-o);this.xpos_yneg_zpos=new Plane(n,n-s);this.xpos_yneg_zneg=new Plane(r,r-i);this.xneg_ypos_zpos=new Plane(i,i-r);this.xneg_ypos_zneg=new Plane(s,s-n);this.xneg_yneg_zpos=new Plane(o,o-t);this.xneg_yneg_zneg=new Plane(u,u-e)};Region.prototype.containsGeometry=function(e,t){var n=[];for(var r=0;r<t.length;r++){if(this.containsTriangle(e[t[r]])){n.push(t[r])}}return n};Region.prototype.containsTriangle=function(e){var t=new Array(3);t[0]=e.v0;t[1]=e.v1;t[2]=e.v2;for(var n=0;n<3;n++){if(t[n].x>=this.min.x&&t[n].y>=this.min.y&&t[n].z>=this.min.z&&t[n].x<=this.max.x&&t[n].y<=this.max.y&&t[n].z<=this.max.z){return true}}if(triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.ypos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.yneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.zpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.zneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xpos_ypos_zpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xpos_ypos_zneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xpos_yneg_zpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xpos_yneg_zneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xneg_ypos_zpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xneg_ypos_zneg)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xneg_yneg_zpos)||triangleOnPositiveSideOfPlane(t[0],t[1],t[2],this.xneg_yneg_zneg)){return false}var r;for(var n=0;n<3;n++){var i=t[n];var s=t[(n+1)%3];r=lineSegmentPlaneIntersection(i,s,this.xpos);if(r.count>0){if(r.point.y>=this.min.y&&r.point.y<=this.max.y&&r.point.z>=this.min.z&&r.point.z<=this.max.z){return true}}r=lineSegmentPlaneIntersection(i,s,this.xneg);if(r.count>0){if(r.point.y>=this.min.y&&r.point.y<=this.max.y&&r.point.z>=this.min.z&&r.point.z<=this.max.z){return true}}r=lineSegmentPlaneIntersection(i,s,this.ypos);if(r.count>0){if(r.point.x>=this.min.x&&r.point.x<=this.max.x&&r.point.z>=this.min.z&&r.point.z<=this.max.z){return true}}r=lineSegmentPlaneIntersection(i,s,this.yneg);if(r.count>0){if(r.point.x>=this.min.x&&r.point.x<=this.max.x&&r.point.z>=this.min.z&&r.point.z<=this.max.z){return true}}r=lineSegmentPlaneIntersection(i,s,this.zpos);if(r.count>0){if(r.point.x>=this.min.x&&r.point.x<=this.max.x&&r.point.y>=this.min.y&&r.point.y<=this.max.y){return true}}r=lineSegmentPlaneIntersection(i,s,this.zneg);if(r.count>0){if(r.point.x>=this.min.x&&r.point.x<=this.max.x&&r.point.y>=this.min.y&&r.point.y<=this.max.y){return true}}}r=lineSegmentTriangleIntersection(this.min,this.max,t[0],t[1],t[2]);if(r.count>0)return true;r=lineSegmentTriangleIntersection(new Vector3D(this.min.x,this.max.y,this.min.z),new Vector3D(this.max.x,this.min.y,this.max.z),t[0],t[1],t[2]);if(r.count>0)return true;r=lineSegmentTriangleIntersection(new Vector3D(this.max.x,this.min.y,this.min.z),new Vector3D(this.min.x,this.max.y,this.max.z),t[0],t[1],t[2]);if(r.count>0)return true;r=lineSegmentTriangleIntersection(new Vector3D(this.min.x,this.min.y,this.max.z),new Vector3D(this.max.x,this.max.y,this.min.z),t[0],t[1],t[2]);if(r.count>0)return true;return false};SphereTreeNode.prototype.isLeaf=function(){return this.children.length==0?true:false};SphereTreeNode.prototype.addChild=function(e){this.children.push(e);e.parent=this};SphereTreeNode.prototype.intersects=function(e){return this.sphere.intersects(e.sphere)};BoundingTree.prototype.setTriangles=function(e,t,n){this.tris=e.slice();this.min.copy(t);this.max.copy(n)};BoundingTree.prototype.setTransform=function(e){};SphereTree.prototype=new BoundingTree;SphereTree.prototype.constructor=SphereTree;SphereTree.prototype.setTransform=function(e){if(this.root)this.transformNode(e,this.root)};SphereTree.prototype.transformNode=function(e,t){t.sphere.setTransform(e);for(var n=0;n<t.children.length;n++){this.transformNode(e,t.children[n])}};SphereTree.prototype.collides=function(e){if(!this.root||!e.root){return false}if(this.nodesCollide(this.root,e.root)){if(this.root.isLeaf()&&e.root.isLeaf()){return true}var t=new SphereHitRec;var n=[];if(e.root.isLeaf()){t.target=e.root;t.testList=this.root.children}else{t.target=this.root;t.testList=e.root.children}n.push(t);return this.testSphereHits(n)}return false};SphereTree.prototype.obstructs=function(e,t){if(!this.root||!e.root){return 0}var n=e.root.sphere.xcenter;var r=new Vector3D(n.x+t.x,n.y+t.y,n.z+t.z);var i=e.root.sphere.xradius;var s=distanceBetweenLineSegmentAndPoint(n,r,this.root.sphere.xcenter);if(s<this.root.sphere.xradius+i){return s}return 0};SphereTree.prototype.nodesCollide=function(e,t){return e.intersects(t)};SphereTree.prototype.testSphereHits=function(e){while(e.length>0){if(this.testSphereHit(e[0],e)){return true}e.splice(0,1)}return false};SphereTree.prototype.testSphereHit=function(e,t){for(var n=0;n<e.testList.length;n++){if(this.nodesCollide(e.target,e.testList[n])){var r=new SphereHitRec;r.target=e.testList[n];if(e.target.isLeaf()){r.testList.push(e.target)}else{r.testList=e.target.children}t.push(r);if(e.target.isLeaf()&&e.testList[n].isLeaf()){return true}}}return false};SphereTree.prototype.rayIntersectsTree=function(e){if(this.root){this.visited.length=this.tris.length;for(var t=0;t<this.visited.length;t++){this.visited[t]=false}return this.rayIntersectsTreeNode(this.root,e)}return false};SphereTree.prototype.rayIntersectsTreeNode=function(e,t){if(e.children.length>0){if(this.rayIntersectsSphere(e,t)==false){return false}var n=false;for(var r=0;r<e.children.length;r++){if(this.rayIntersectsTreeNode(e.children[r],t)==true){n=true}}if(n){return true}else{return false}}else{return this.rayIntersectsTriangleList(e.triIndices,t)}};SphereTree.prototype.rayIntersectsSphere=function(e,t){var n=t.worldViewMatrix.transform(e.sphere.center.x,e.sphere.center.y,e.sphere.center.z,1);var r=e.sphere.radius*max3(t.scale.x,t.scale.y,t.scale.z);var i=raySphereIntersection(t.rayOrigin,t.rayDir,n,r);switch(i.count){case 2:if(i.root1<=0&&i.root2<=0){return false}break;case 1:if(i.root1<=0){return false}break;case 0:default:return false}return true};SphereTree.prototype.rayIntersectsTriangleList=function(e,t){var n,r,i;for(var s=0;s<e.length;s++){var o=e[s];if(this.visited[o]==true){continue}var u=this.tris[o];var a=t.worldViewMatrix.transform(u.v0.x,u.v0.y,u.v0.z,1);var f=t.worldViewMatrix.transform(u.v1.x,u.v1.y,u.v1.z,1);var l=t.worldViewMatrix.transform(u.v2.x,u.v2.y,u.v2.z,1);var c=rayTriangleIntersection(t.rayOrigin,t.rayDir,a,f,l,false,t.doubleSided?false:true);if(c.result){if(c.t>=t.nearDistance&&c.t<=t.farDistance&&c.t<t.intersectRecord.distance){var h=new Vector3D(u.v0.x*(1-c.u-c.v)+u.v1.x*c.u+u.v2.x*c.v,u.v0.y*(1-c.u-c.v)+u.v1.y*c.u+u.v2.y*c.v,u.v0.z*(1-c.u-c.v)+u.v1.z*c.u+u.v2.z*c.v);var p=t.worldMatrix.transform(h.x,h.y,h.z,1);var d=t.worldViewMatrix.transform(h.x,h.y,h.z,1);for(var v=0;v<t.clipPlanes.length;v++){if(pointOnNegativeSideOfPlane(p,t.clipPlanes[v])){this.visited[o]=true;break}}if(this.visited[o]){continue}t.intersectRecord.distance=c.t;t.intersectRecord.pointModel.copy(h);t.intersectRecord.pointWorld.copy(p);t.intersectRecord.pointView.copy(d);t.intersectRecord.triIndex=o;t.intersects=true}}this.visited[o]=true}return t.intersects};Octree.prototype=new SphereTree;Octree.prototype.constructor=Octree;Octree.prototype.buildTree=function(e){if(e<0)return;var t=new SphereTreeNode;t.sphere.center.copy(midpoint(this.min,this.max));t.sphere.xcenter.copy(t.sphere.center);t.sphere.radius=distanceBetween(t.sphere.center,this.max);t.sphere.xradius=t.sphere.radius;t.triIndices.length=this.tris.length;for(var n=0;n<this.tris.length;n++){t.triIndices[n]=n}if(e>0){this.buildTreeLevels(e,this.min,this.max,t,t.triIndices)}this.root=t};Octree.prototype.buildTreeLevels=function(e,t,n,r,i){if(r.level==e){return}var s=new Vector3D(t.x+(n.x-t.x)/2,t.y+(n.y-t.y)/2,t.z+(n.z-t.z)/2);var o=new Array(8);o[0]=new Region(t.x,t.y,t.z,s.x,s.y,s.z);o[1]=new Region(s.x,t.y,t.z,n.x,s.y,s.z);o[2]=new Region(t.x,t.y,s.z,s.x,s.y,n.z);o[3]=new Region(s.x,t.y,s.z,n.x,s.y,n.z);o[4]=new Region(t.x,s.y,t.z,s.x,n.y,s.z);o[5]=new Region(s.x,s.y,t.z,n.x,n.y,s.z);o[6]=new Region(t.x,s.y,s.z,s.x,n.y,n.z);o[7]=new Region(s.x,s.y,s.z,n.x,n.y,n.z);for(var u=0;u<8;u++){var a=o[u].containsGeometry(this.tris,i);if(a.length>0){var f=new SphereTreeNode;f.level=r.level+1;f.sphere.center.copy(midpoint(o[u].min,o[u].max));f.sphere.xcenter.copy(f.sphere.center);f.sphere.radius=distanceBetween(f.sphere.center,o[u].max);f.sphere.xradius=f.sphere.radius;f.triIndices=a.slice();r.addChild(f);this.buildTreeLevels(e,o[u].min,o[u].max,f,f.triIndices)}}};Context.prototype.clear=function(){this.container=null;this.attribute=null;this.item=0;this.containerName="";this.attributeName=""};var eRenderContextMethod={Unknown:0,ApplyModelViewTransform:1,ApplyProjectionTransform:2,Clear:3,ClearColor:4,ClearDepth:5,ClearStencil:6,CreateVertexBuffer:7,CreateTextureObject:8,Disable:9,Enable:10,Enabled:11,EnableLight:12,EnableTextureStage:13,Finish:14,GetEnabledLights:15,GetGlobalIllumination:16,GetLight:17,GetMaxLightCount:18,GetMaxTextureStages:19,PerspectiveMatrixLH:20,OrthographicMatrixLH:21,SetBlendColor:22,SetBlendFactor:23,SetDepthFunc:24,SetEnabledLights:25,SetFrontMaterial:26,SetGlobalIllumination:27,SetLight:28,SetShadeModel:29,SetStencilFunc:30,SetStencilMask:31,SetStencilOp:32,SetTextureBlendFactor:33,SetTextureBlendOp:34,SetTextureColorMask:35,SetViewport:36,VB_SetPrimitiveType:37,VB_SetVertices:38,VB_SetNormals:39,VB_SetColors:40,VB_SetUVCoords:41,VB_SetTextureStage:42,VB_Draw:43,TO_SetImage:44,TO_SetImageData:45,TO_SetVideo:46,SetMatrixMode:47,PushMatrix:48,PopMatrix:49,LoadMatrix:50,LeftMultMatrix:51,RightMultMatrix:52};DisplayListObj.prototype.record_begin=function(){this.clear();this.renderContext.setDisplayList(this)};DisplayListObj.prototype.record_end=function(){this.renderContext.setDisplayList(null)};DisplayListObj.prototype.play=function(){for(var e=0;e<this.displayList.length;e++){this.invokeMethod(this.displayList[e])}};DisplayListObj.prototype.addMethodDesc=function(e){this.displayList.push(e)};DisplayListObj.prototype.clear=function(){this.displayList=[]};DisplayListObj.prototype.invokeMethod=function(e){switch(e.method){case eRenderContextMethod.ApplyModelViewTransform:{this.renderContext.applyModelViewTransform()}break;case eRenderContextMethod.ApplyProjectionTransform:{this.renderContext.applyProjectionTransform()}break;case eRenderContextMethod.Clear:{return this.renderContext.clear(e.params[0])}break;case eRenderContextMethod.ClearColor:{this.renderContext.clearColor(e.params[0],e.params[1],e.params[2],e.params[3])}break;case eRenderContextMethod.ClearDepth:{this.renderContext.clearDepth(e.params[0])}break;case eRenderContextMethod.ClearStencil:{this.renderContext.clearStencil(e.params[0])}break;case eRenderContextMethod.CreateVertexBuffer:{return this.renderContext.createVertexBuffer(e.params[0])}break;case eRenderContextMethod.CreateTextureObject:{this.renderContext.createTextureObject()}break;case eRenderContextMethod.Disable:{this.renderContext.disable(e.params[0])}break;case eRenderContextMethod.Enable:{this.renderContext.enable(e.params[0])}break;case eRenderContextMethod.Enabled:{return this.renderContext.enabled(e.params[0])}break;case eRenderContextMethod.EnableLight:{this.renderContext.enableLight(e.params[0],e.params[1])}break;case eRenderContextMethod.EnableTextureStage:{this.renderContext.enableTextureStage(e.params[0],e.params[1])}break;case eRenderContextMethod.Finish:{this.renderContext.finish()}break;case eRenderContextMethod.GetEnabledLights:{return this.renderContext.getEnabledLights()}break;case eRenderContextMethod.GetGlobalIllumination:{return this.renderContext.getGlobalIllumination()}break;case eRenderContextMethod.GetLight:{return this.renderContext.getLight(e.params[0])}break;case eRenderContextMethod.GetMaxLightCount:{return this.renderContext.getMaxLightCount()}break;case eRenderContextMethod.getMaxTextureStages:{return this.renderContext.getMaxTextureStages()}break;case eRenderContextMethod.PerspectiveMatrixLH:{this.renderContext.perspectiveMatrixLH(e.params[0],e.params[1],e.params[2],e.params[3],e.params[4],e.params[5])}break;case eRenderContextMethod.OrthographicMatrixLH:{this.renderContext.orthographicMatrixLH(e.params[0],e.params[1],e.params[2],e.params[3],e.params[4],e.params[5])}break;case eRenderContextMethod.SetBlendColor:{this.renderContext.setBlendColor(e.params[0],e.params[1],e.params[2],e.params[3])}break;case eRenderContextMethod.SetBlendFactor:{this.renderContext.setBlendFactor(e.params[0],e.params[1])}break;case eRenderContextMethod.SetDepthFunc:{this.renderContext.setDepthFunc(e.params[0])}break;case eRenderContextMethod.SetEnabledLights:{this.renderContext.setEnabledLights(e.params[0])}break;case eRenderContextMethod.SetFrontMaterial:{this.renderContext.setFrontMaterial(e.params[0])}break;case eRenderContextMethod.SetGlobalIllumination:{this.renderContext.setGlobalIllumination(e.params[0])}break;case eRenderContextMethod.SetLight:{this.renderContext.setLight(e.params[0],e.params[1])}break;case eRenderContextMethod.SetShadeModel:{this.renderContext.setShadeModel(e.params[0])}break;case eRenderContextMethod.SetStencilFunc:{this.renderContext.setStencilFunc(e.params[0],e.params[1],e.params[2])}break;case eRenderContextMethod.SetStencilMask:{this.renderContext.setStencilMask(e.params[0])}break;case eRenderContextMethod.SetStencilOp:{this.renderContext.setStencilOp(e.params[0],e.params[1],e.params[2])}break;case eRenderContextMethod.SetTextureBlendFactor:{this.renderContext.setTextureBlendFactor(e.params[0])}break;case eRenderContextMethod.SetTextureBlendOp:{this.renderContext.setTextureBlendOp(e.params[0])}break;case eRenderContextMethod.SetTextureColorMask:{this.renderContext.setTextureColorMask(e.params[0],e.params[1],e.params[2],e.params[3])}break;case eRenderContextMethod.SetViewport:{this.renderContext.setViewport(e.params[0],e.params[1],e.params[2],e.params[3])}break;case eRenderContextMethod.VB_SetPrimitiveType:{e.params[0].setPrimitiveType(e.params[1])}break;case eRenderContextMethod.VB_SetVertices:{e.params[0].setVertices(e.params[1])}break;case eRenderContextMethod.VB_SetNormals:{e.params[0].setNormals(e.params[1])}break;case eRenderContextMethod.VB_SetColors:{e.params[0].setColors(e.params[1])}break;case eRenderContextMethod.VB_SetUVCoords:{e.params[0].setUVCoords(e.params[1],e.params[2])}break;case eRenderContextMethod.VB_SetTextureStage:{e.params[0].setTextureStage(e.params[1],e.params[2],e.params[3],e.params[4],e.params[5],e.params[6])}break;case eRenderContextMethod.VB_Draw:{e.params[0].draw()}break;case eRenderContextMethod.TO_SetImage:{e.params[0].setImage(e.params[1],e.params[2],e.params[3])}break;case eRenderContextMethod.TO_SetImageData:{e.params[0].setImageData(e.params[1],e.params[2],e.params[3],e.params[4],e.params[5])}break;case eRenderContextMethod.TO_SetVideo:{e.params[0].setVideo(e.params[1])}break;case eRenderContextMethod.SetMatrixMode:{this.renderContext.setMatrixMode(e.params[0])}break;case eRenderContextMethod.PushMatrix:{this.renderContext.pushMatrix()}break;case eRenderContextMethod.PopMatrix:{this.renderContext.popMatrix()}break;case eRenderContextMethod.LoadMatrix:{this.renderContext.loadMatrix(e.params[0])}break;case eRenderContextMethod.LeftMultMatrix:{this.renderContext.leftMultMatrix(e.params[0])}break;case eRenderContextMethod.RightMultMatrix:{this.renderContext.rightMultMatrix(e.params[0])}break}};var eRenderMode={AlphaBlend:1,CullBackFace:2,DepthTest:3,DepthBufferWrite:4,Lighting:5,NormalizeNormals:6,Fog:7,StencilTest:8,PolygonOffset_Fill:9,PolygonOffset_Line:10,PolygonOffset_Point:11};var eDepthFunc={Never:1,Less:2,LessEqual:3,Equal:4,NotEqual:5,GreaterEqual:6,Greater:7,Always:8};var eStencilFunc={Never:1,Less:2,LessEqual:3,Equal:4,NotEqual:5,GreaterEqual:6,Greater:7,Always:8};var eStencilOp={Keep:0,Replace:1,Increment:2,Decrement:3,Invert:4,Zero:5};var eShadeModel={Flat:1,Gouraud:2};var RC_BLEND=1;var RC_CULL_FACE=2884;var LIGHTDESC_POSITION_BIT=1;var LIGHTDESC_DIRECTION_BIT=2;var LIGHTDESC_AMBIENT_BIT=4;var LIGHTDESC_DIFFUSE_BIT=8;var LIGHTDESC_SPECULAR_BIT=16;var LIGHTDESC_CONSTANT_ATT_BIT=32;var LIGHTDESC_LINEAR_ATT_BIT=64;var LIGHTDESC_QUADRATIC_ATT_BIT=128;var LIGHTDESC_RANGE_BIT=256;var LIGHTDESC_OUTER_CONE_DEG_BIT=512;var LIGHTDESC_INNER_CONE_DEG_BIT=1024;var LIGHTDESC_CONE_FALLOFF_BIT=2048;var MATERIALDESC_AMBIENT_BIT=1;var MATERIALDESC_DIFFUSE_BIT=2;var MATERIALDESC_SPECULAR_BIT=4;var MATERIALDESC_EMISSIVE_BIT=8;var MATERIALDESC_GLOSSINESS_BIT=16;var MATERIALDESC_ALL_BITS=31;var RC_COLOR_BUFFER_BIT=1;var RC_DEPTH_BUFFER_BIT=2;var RC_STENCIL_BUFFER_BIT=4;var RC_ZERO=1;var RC_ONE=2;var RC_SRC_COLOR=4;var RC_SRC_ALPHA=8;var RC_ONE_MINUS_SRC_COLOR=16;var RC_ONE_MINUS_SRC_ALPHA=32;var RC_DEST_COLOR=64;var RC_DEST_ALPHA=128;var RC_ONE_MINUS_DEST_COLOR=256;var RC_ONE_MINUS_DEST_ALPHA=512;var RC_MODULATE=1;var RC_REPLACE=2;var RC_BLEND=4;var RC_DECAL=8;var eTextureCoordSrc={VertexUVs:1,ViewSpaceVertexPosition:2,ViewSpaceReflectionVector:3};var RC_REPEAT=10497;var RC_CLAMP_TO_EDGE=33071;var RC_MIRRORED_REPEAT=33648;var RC_MODELVIEW=1;var RC_PROJECTION=2;var RC_TEXTURE=4;var RENDERSTATE_TRANSFORM_BIT=1;var RENDERSTATE_LIGHTING_BIT=2;var RENDERSTATE_MATERIAL_BIT=4;var RENDERSTATE_FOG_BIT=8;var RENDERSTATE_CLIP_PLANE_BIT=16;var RENDERSTATE_ZBUFFER_BIT=32;var RENDERSTATE_ALL_BITS=63;var RC_POINTS=0;var RC_LINES=1;var RC_LINE_LOOP=2;var RC_LINE_STRIP=3;var RC_TRIANGLES=4;var RC_TRIANGLE_STRIP=5;var RC_TRIANGLE_FAN=6;WebGLDebugUtils=function(){function r(e){if(n==null){n={};for(var t in e){if(typeof e[t]=="number"){n[e[t]]=t}}}}function i(){if(n==null){throw"WebGLDebugUtils.init(ctx) not called"}}function s(e){i();return n[e]!==undefined}function o(e){i();var t=n[e];return t!==undefined?t:"*UNKNOWN WebGL ENUM"}function u(e,n,r){var i=t[e];if(i!==undefined){if(i[n]){return o(r)}}return r.toString()}function a(t,n){function s(e,t){return function(){var r=e[t].apply(e,arguments);var s=e.getError();if(s!=0){i[s]=true;n(s,t,arguments)}return r}}r(t);n=n||function(t,n,r){var i="";for(var s=0;s<r.length;++s){i+=(s==0?"":", ")+u(n,s,r[s])}e("WebGL error "+o(t)+" in "+n+"("+i+")")};var i={};var a={};for(var f in t){if(typeof t[f]=="function"){a[f]=s(t,f)}else{a[f]=t[f]}}a.getError=function(){for(var e in i){if(i[e]){i[e]=false;return e}}return t.NO_ERROR};return a}var e=function(e){if(window.console&&window.console.log){window.console.log(e)}};var t={enable:{0:true},disable:{0:true},getParameter:{0:true},drawArrays:{0:true},drawElements:{0:true,2:true},createShader:{0:true},getShaderParameter:{1:true},getProgramParameter:{1:true},getVertexAttrib:{1:true},vertexAttribPointer:{2:true},bindTexture:{0:true},activeTexture:{0:true},getTexParameter:{0:true,1:true},texParameterf:{0:true,1:true},texParameteri:{0:true,1:true,2:true},texImage2D:{0:true,2:true,6:true,7:true},texSubImage2D:{0:true,6:true,7:true},copyTexImage2D:{0:true,2:true},copyTexSubImage2D:{0:true},generateMipmap:{0:true},bindBuffer:{0:true},bufferData:{0:true,2:true},bufferSubData:{0:true},getBufferParameter:{0:true,1:true},pixelStorei:{0:true,1:true},readPixels:{4:true,5:true},bindRenderbuffer:{0:true},bindFramebuffer:{0:true},checkFramebufferStatus:{0:true},framebufferRenderbuffer:{0:true,1:true,2:true},framebufferTexture2D:{0:true,1:true,2:true},getFramebufferAttachmentParameter:{0:true,1:true,2:true},getRenderbufferParameter:{0:true,1:true},renderbufferStorage:{0:true,1:true},clear:{0:true},depthFunc:{0:true},blendFunc:{0:true,1:true},blendFuncSeparate:{0:true,1:true,2:true,3:true},blendEquation:{0:true},blendEquationSeparate:{0:true,1:true},stencilFunc:{0:true},stencilFuncSeparate:{0:true,1:true},stencilMaskSeparate:{0:true},stencilOp:{0:true,1:true,2:true},stencilOpSeparate:{0:true,1:true,2:true,3:true},cullFace:{0:true},frontFace:{0:true}};var n=null;return{init:r,mightBeEnum:s,glEnumToString:o,glFunctionArgToString:u,makeDebugContext:a}}();var gl_MaxLights=8;var gl_MaxTextureStages=2;webglRC.prototype=new RenderContext;webglRC.prototype.constructor=webglRC;webglVB.prototype=new VertexBuffer;webglVB.prototype.constructor=webglVB;webglTO.prototype=new TextureObject;webglTO.prototype.constructor=webglTO;var eShaderType={VertexLighting:0,FragmentLighting:1};ContentHandler.prototype=new AttributeContainer;ContentHandler.prototype.constructor=ContentHandler;ContentHandler.prototype.parseFileStream=function(e){};ContentHandler.prototype.matchesType=function(e){};ContentBuilder.prototype=new AttributeContainer;ContentBuilder.prototype.constructor=ContentBuilder;ContentBuilder.prototype.setRegistry=function(e){AttributeContainer.prototype.setRegistry.call(this,e);this.factory=this.registry.find("AttributeFactory")};ContentBuilder.prototype.visitHandler=function(e){};ContentBuilder.prototype.finalize=function(){};ContentBuilder.prototype.matchesType=function(e){};XMLParser.prototype.parse=function(e){parser=new SAXDriver;parser.setDocumentHandler(this);parser.setErrorHandler(this);parser.setLexicalHandler(this);parser.parse(e)};XMLParser.prototype.processingInstruction=function(e,t){switch(e){case"bw":{console.debug("TODO: "+e.toString())}break;case"bwinclude":{var n=new String(t);var r=this.parseTokenValue(n,'url="','"');if(r){console.debug("Processing Instruction for: "+r);var i=getFileExtension(r);switch(i){case"xml":{var s=loadXMLResource(this.contentDir+"/"+r);this.parse(s)}break;case"lws":{var o=formatPath(r);console.debug("Include instruction for path: "+o[0]);console.debug("Include content dir: "+o[1]);var u=new LWSceneHandler;u.getAttribute("contentDirectory").setValueDirect(o[1]);var a=new LWSceneBuilder;a.setRegistry(this.factory.registry);a.visitHandler(u);u.parseFileStream(o[0])}break}}}break}};XMLParser.prototype.startElement=function(e,t){if(isUpper(e[0])){this.parseAttributeContainer(e,t)}else{this.parseComplexAttribute(e,t)}};XMLParser.prototype.endElement=function(e){if(isUpper(e[0])){this.parseAttributeContainer(e)}else{this.parseComplexAttribute(e)}};XMLParser.prototype.startCDATA=function(){};XMLParser.prototype.endCDATA=function(){};XMLParser.prototype.characters=function(e,t,n){var r="";for(var i=0;i<n;i++){r+=e[t+i]}if(r.length&&!isSpace(r[0])){var s=this.attributeStack.top();if(s){deserializeAttribute(s,r)}}};XMLParser.prototype.error=function(e){alert("Error: "+e.getMessage())};XMLParser.prototype.fatalError=function(e){alert("Fatal Error: "+e.getMessage())};XMLParser.prototype.parseAttributeContainer=function(e,t){if(t){var n=this.factory.create(e);if(!n){this.attributeStack.push(null);return}n.flagDeserializedFromXML();if(!resolveAttributeContainerReference(n,t.m_parser.m_atts,this.registry)){deserializeAttributeContainer(n,t.m_parser.m_atts)}this.registry.registerResource(n);var r=this.attributeStack.top();if(r&&r.isCollection()){if(!r.allocatesElements()){r.push_back(n);r.setElementName(n,e);var i=this.collectionCountStack.top();i++;this.collectionCountStack.pop();this.collectionCountStack.push(i)}else{r.setElementName(r.getAt(r.Size()-1),e)}}this.attributeStack.push(n);if(n.isCollection()){this.collectionCountStack.push(0)}}else{var n=this.attributeStack.top();this.attributeStack.pop();if(n&&n.isCollection()){this.collectionCountStack.pop()}if(n){this.factory.finalize(e,n);this.registry.finalizeResource(n)}}};XMLParser.prototype.parseComplexAttribute=function(e,t){if(t){var n=this.attributeStack.top();if(!n)return;var r=n.getAttribute(e);if(!r){if(n.isCollection()){var i=this.collectionCountStack.top();i++;var s=n.Size();if(n.AppendParsedElements()){n.resize(s+1);i=s}else if(s<=i){n.resize(i+1)}r=n.getAt(i)}else{this.attributeStack.push(n);return}}this.attributeStack.push(r);if(r&&r.isContainer()){if(!resolveAttributeContainerReference(r,t.m_parser.m_atts,this.registry)){deserializeAttributeContainer(r,t.m_parser.m_atts)}if(r.isCollection()){this.collectionCountStack.push(0)}}else if(r){if(!resolveComplexAttributeReference(r,t.m_parser.m_atts)){deserializeComplexAttribute(r,t.m_parser.m_atts)}}}else{this.attributeStack.pop();if(n&&n.isCollection()){this.collectionCountStack.pop()}}};XMLParser.prototype.parsePrimitiveAttribute=function(){};XMLParser.prototype.parseTokenValue=function(e,t,n){var r=e.indexOf(t);if(r==-1){return undefined}r+=t.length;var i=e.indexOf(n,r);if(i==-1){return undefined}return e.substring(r,i)};Serializer.prototype=new AttributeContainer;Serializer.prototype.constructor=Serializer;Serializer.prototype.serialize=function(e,t,n,r){this.RootElement=null;this.DOM=document.implementation.createDocument("","__InitialRoot",null);if(this.DOM){if(this.RootElement){this.DOM.removeChild(this.RootElement);this.RootElement=null;this.mixedModifiedCB(attr,data)}if(e){this.serializeAttribute(e,t,n)}else{this.serializeAttribute(r,0,"")}}};Serializer.prototype.serializeAttribute=function(e,t,n){if(e){if(e.isTransient()){return}if(this.serializeMinimum.getValueDirect()==true&&!e.isDeserializedFromXML()){return}if(e.attrType==eAttrType.Model){var r=e;this.serializeModel(r)}else if(e.attrType==eAttrType.PerspectiveCamera){var i=e;this.serializeAttributeContainer(i)}else if(e.attrType>eAttrType.Command&&e.attrType<eAttrType.Command_End){var s=e;this.serializeCommand(s)}else if(e.isContainer()){var i=e;this.serializeAttributeContainer(i)}else if(n&&this.DOM){var o=e.attrType;var u=null;var a=null;var f=null;var l=null;var c;var h;var p;var d=e.getLength();if(n){var v=0;while(true){v=n.indexOf("(");if(v==-1)break;n.replace(v,1,"_x0028")}while(true){v=n.indexOf(")");if(v==-1)break;n.replace(v,1,"_x0029")}var m=n;if(m){u=this.DOM.createElement(m);if(u){var g;g=this.getAttributeStringValue(e,t);if(g=="")return;if(t>=0||d==1||o==eAttrType.StringAttr){var y="<![CDATA[";var b="]]>";var w=0;var E=g.indexOf(b);if(w!=-1&&E!=-1){w+=y.length;g=g.substr(w,g.length-w-b.length);var S=null;m=g;if(m){S=this.DOM.createCDATASection(m)}u.appendChild(S)}else{u.textContent=g}}else{var x;var T=0;var N=0;for(var C=0;C<d;++C){c="item"+C.toString();N=C==d-1?g.length:g.indexOf(",",T);x=g.substr(T,N-T);T=N+1;if(this.bMixed){a=this.DOM.createElement(c);a.textValue=x;u.appendChild(a)}else{f=this.DOM.createAttribute(c);f.value=x;u.setAttributeNode(f)}}}this.pushElement(u);this.popElement()}}}}}};Serializer.prototype.serializeAttributeReference=function(e,t){if(e&&t&&this.DOM){var n=null;var r=null;var i=null;var s=null;var o=null;n=e.getContainer();if(n){var u=n.getAttributeName(e);if(u){r=this.DOM.createElement(u)}}if(r){if(r.attributes.length>0){i=this.DOM.createAttribute("ref");if(i){var a="";var f="";var l=null;n=t.getContainer();if(n){a=n.getAttributeName(t);if(l=n.getAttribute("name")){var c;f=l.getValueDirect().join("");f+="/";f+=a;a=f}}i.textContent=a;s.setNamedItem(i,o)}}this.pushElement(r);this.popElement()}}};Serializer.prototype.serializeModel=function(e){var t=null;var n=null;if(this.DOM){t="ModelRoot";if(t){n=this.DOM.createElement(t);if(n){this.pushElement(n)}}}if(e){this.serializeAttributeContainer(e);var r=null;if(r=getInspectionGroup(e)){var i=e;var s=r.getChild(2).getAttribute("rotationQuat");var o;var u=i.getAttribute("name");o=u.getValueDirect().join("");var a=null;var f=this.registry.find("AttributeFactory");a=f.create("Set");if(a){a.getAttribute("target").setValueDirect(o);a.getAttribute("target").flagDeserializedFromXML();var l=[];s.getValue(l);a.attributeValuePairs.push(new Pair(s,l));this.serializeCommand(a);setAttributeBin(null);setAttributePairs(null)}}}if(n){this.popElement()}};Serializer.prototype.serializeCommand=function(e){var t;if(e&&this.DOM){var n=null;var r=e.className;if(r=="Serialize")return;var i=r;if(i){n=this.DOM.createElement(i);if(n){this.pushElement(n);var t;var s=null;var o=null;var u=e.getAttributeCount();for(t=0;t<u;++t){s=e.getAttributeAt(t);o=e.getAttributeName(s);if(!e.isBorrowed(s)&&o!="sourceContainer"&&o!="sourceEvaluator"&&o!="sourceAttribute"&&o!="sourceOutput"&&o!="source"&&o!="targetContainer"&&o!="targetAttribute"&&o!="target"){this.serializeAttribute(s,-1,o)}}s=e.getAttribute("sourceContainer");if(s){this.serializeAttribute(s,-1,"sourceContainer")}s=e.getAttribute("targetContainer");if(s){this.serializeAttribute(s,-1,"targetContainer")}var a=[];var f=[];for(t=0;t<u;++t){var l=e.getAttributeAt(t);var c=e.getAttributeName(l);if(c=="sourceAttribute"){a.push(l)}else if(c=="targetAttribute"){f.push(l)}}for(t=0;t<a.length&&t<f.length;t++){this.serializeAttribute(a[t],-1,"sourceAttribute");this.serializeAttribute(f[t],-1,"targetAttribute")}if(f.length==0){s=e.getAttribute("target");if(s){this.serializeAttribute(s,-1,"target")}}var h;var p;for(t=0;t<u;++t){s=e.getAttributeAt(t);var c=e.getAttributeName(s);var d=e.isBorrowedAndValueModified(s);if(d.borrowed){var v=newAttribute(s.className);if(v){setAttributeValue(v,d.value);v.flagDeserializedFromXML();this.serializeAttribute(v,-1,c)}}else{var d=e.isBorrowedAndReferenceModified(s);if(d.borrowed){this.serializeAttributeReference(s,d.reference)}}}this.popElement()}}}};Serializer.prototype.serializeAttributeContainer=function(e){if(e&&this.DOM){var t=null;var n=e.className;if(n=="BwSceneInspector"){n="SceneInspector"}var r=n;if(r){t=this.DOM.createElement(r);if(t){this.pushElement(t);var i=null;var s=null;var o=e.getAttributeCount();for(var u=0;u<o;++u){i=e.getAttributeAt(u);var a=e.getAttributeName(i);if(i.isNative()==true){this.serializeAttribute(i,-1,a)}}if(this.serializeChildren.getValueDirect()){this.doSerializeChildren(e)}for(var u=0;u<o;++u){i=e.getAttributeAt(u);if(e.getAttributeModificationCount(i)==0)continue;var a=e.getAttributeName(i);if(i.isNative()==false){this.serializeAttribute(i,-1,a)}}this.popElement()}}}};Serializer.prototype.serializeAttributeCollection=function(e){if(e&&this.DOM){var t=null;var n=e.className;var r=n;if(r){t=this.DOM.createElement(r);if(t){this.pushElement(t);var i=e;{var s;var o=i.baseName.getValueDirect().join("");var u=i.length;for(var a=0;a<u;a++){s=o[0];s+="[";s+=a.toString();s+="]";this.serializeAttribute(i[a],0,s)}}this.popElement()}}}};Serializer.prototype.doSerializeChildren=function(e){if(e.attrType<eAttrType.Node||e.attrType>eAttrType.Node_End){return}for(var t=0;t<e.getChildCount();t++){this.serializeAttribute(e.getChild(t),0,null)}};Serializer.prototype.pushElement=function(e){this.elementStack.push(e);if(this.RootElement){this.RootElement.appendChild(e)}else{this.DOM.replaceChild(e,this.DOM.documentElement)}this.RootElement=e};Serializer.prototype.popElement=function(){this.elementStack.pop();if(this.elementStack.length()>0){this.RootElement=this.elementStack.top()}};Serializer.prototype.getAttributeStringValue=function(e,t){strValue="";var n=e.attrType;var r=-1;switch(n){case eAttrType.NumberAttr:{var i=e.getValueDirect();strValue=i.toString()}break;case eAttrType.BooleanAttr:{var s=e.getValueDirect();if(s==true){strValue="true"}else{strValue="false"}}break;case eAttrType.StringAttr:{var o=e.getLength();strValue=e.getValueDirect().join("")}break;case eAttrType.ColorAttr:case eAttrType.Vector2DAttr:case eAttrType.Vector3DAttr:case eAttrType.Matrix4x4Attr:case eAttrType.QuaternionAttr:{var u=[];e.getValue(u);if(t==-1){for(var i=0;i<u.length;++i){strValue+=u[i].toString();if(i<u.length-1){strValue+=","}}}else{strValue+=u[t].toString()}}break;case eAttrType.NumberArrayAttr:case eAttrType.ViewportAttr:{var a=[];e.getValue(a);if(t==-1){for(var i=0;i<a.length;++i){strValue+=a[i].toString();if(i<a.length-1){strValue+=","}}}else{strValue+=a[t].toString()}}break;default:{}break}return strValue};Serializer.prototype.mixedModifiedCB=function(e,t){var n=[];e.getValue(n);var r=t;if(r!=4294967295){r.bMixed=n[0]}};var ePixelFormat={Unknown:-1,R8G8B8:0,B8G8R8:1,X8X8X8:2,R8G8B8A8:3,B8G8R8A8:4,A8R8G8B8:5,A8B8G8R8:6,X8X8X8X8:7,A8:8};var ePixelMap={Default:0,RGBToAlpha:1};var eImageFormat={Unknown:-1,RGB:0,RGBA:1,Alpha:2,Luminance:3,Luminance_Alpha:4};var FRAME_FILTER_SCALE_FRAME_BIT=1;var FRAME_FILTER_INVERT_FRAME_BIT=2;var FRAME_FILTER_NEGATE_COLOR_BIT=4;var FRAME_FILTER_NEGATE_ALPHA_BIT=8;var FRAME_FILTER_ALPHA_ONOFF_BIT=16;MediaPlayback.prototype.loadImage=function(e){this.ready=false;this.frameRetrieved=false;this.htmlImageElement=null;this.imageWidth=0;this.imageHeight=0;this.imagePitch=0;this.imagePixels=null;var t=getFileExtension(e);switch(t){case"avi":case"mpg":case"ogg":{this.htmlImageElement=document.createElement("video");this.htmlImageElement.container=this;this.htmlImageElement.controls="controls";this.htmlImageElement.src="http://localhost/bwjs/BwContent/images/Bear.ogg";this.video=true;this.onVideoLoad()}break;default:{this.htmlImageElement=new Image;this.htmlImageElement.container=this;this.htmlImageElement.onload=MediaPlayback_OnImageLoad;this.htmlImageElement.src=e}break}this.url=e};MediaPlayback.prototype.onImageLoad=function(){var e=this.htmlImageElement;this.imageWidth=e.width;this.imageHeight=e.height;this.imagePitch=e.width*4;var t=document.createElement("canvas");var n=t.getContext("2d");t.width=e.width;t.height=e.height;n.drawImage(e,0,0);var r=n.getImageData(0,0,e.width,e.height);this.imagePixels=r.data;this.ready=true;if(this.onload){this.onload.call(this)}};MediaPlayback.prototype.onVideoLoad=function(){this.ready=true};MediaPlayback.prototype.getFrameDimensions=function(){return{width:this.imageWidth,height:this.imageHeight,pitch:this.imagePitch}};MediaPlayback.prototype.getPixelFormat=function(){return ePixelFormat.R8G8B8A8};MediaPlayback.prototype.getPixelByteAlignment=function(){return 4};MediaPlayback.prototype.getBytesPerPixel=function(){return BytesPerPixel(this.getPixelFormat())};MediaPlayback.prototype.getFramePixels=function(e,t){if(!this.ready||this.imageWidth==0||this.imageHeight==0||!this.imagePixels){return undefined}e.length=this.imagePixels.length;for(var n=0;n<this.imagePixels.length;n++){e[n]=this.imagePixels[n]}return-1};MediaPlayback.prototype.newFrameDataAvailable=function(){return this.ready&&!this.frameRetrieved};MediaPlayback.prototype.getFrameData=function(e,t,n,r,i,s,o,u){if(!this.ready||this.imageWidth==0||this.imageHeight==0||!this.imagePixels){return undefined}if(e==0||t==0||n<e||r==ePixelFormat.Unknown||!i){return undefined}var a=-1;var f=s&FRAME_FILTER_SCALE_FRAME_BIT?true:false;var l=s&FRAME_FILTER_INVERT_FRAME_BIT?true:false;var c=s&FRAME_FILTER_NEGATE_COLOR_BIT?true:false;var h=s&FRAME_FILTER_NEGATE_ALPHA_BIT?true:false;var p=s&FRAME_FILTER_ALPHA_ONOFF_BIT?true:false;var d=this.getFrameDimensions();var v=d.width;var m=d.height;var g=d.pitch;var y=this.getPixelFormat();if(y!=ePixelFormat.R8G8B8A8){return undefined}var b=[];var w=this.getFramePixels(b,u);if(w==undefined){return undefined}if(f&&(e!=v||t!=m)){var E=this.getBytesPerPixel();g=e*E;g+=(4-g%4)%4;var S=[];if(!ScaleImage(y,v,m,this.getPixelByteAlignment(),b,e,t,4,S)){return undefined}b=S;v=e;m=t}if(!this.alphaPlayback&&!c&&!l&&g==n&&m==t&&y==r){for(var x=0;x<i.length;x++){i[x]=b[x]}this.frameRetrieved=true;return a}var T=0;var N=0;var C=0;var k;var L=null;if(this.alphaChannel){d=this.alphaChannel.getFrameDimensions();T=d.width;N=d.height;C=d.pitch;k=this.alphaChannel.getPixelFormat();if(k!=ePixelFormat.R8G8B8A8){return undefined}var A=[];var O=this.alphaChannel.getFramePixels(A,w);if(O!=undefined){if(T!=v||N!=m){var M=this.alphaChannel.getBytesPerPixel();C=v*M;C+=(4-C%4)%4;var _=[];if(ScaleImage(k,T,N,this.alphaChannel.getPixelByteAlignment(),L,v,m,4,_)){L=_;T=v;N=m}}else{L=A}}}var D=Math.min(e,v);var P=Math.min(t,m);var H=0,B=0,j=0,F=0;switch(r){case ePixelFormat.R8G8B8:H=0;B=1;j=2;break;case ePixelFormat.B8G8R8:H=2;B=1;j=0;break;case ePixelFormat.R8G8B8A8:H=0;B=1;j=2;F=3;break;case ePixelFormat.B8G8R8A8:H=2;B=1;j=0;F=3;break;case ePixelFormat.A8R8G8B8:H=1;B=2;j=3;F=0;break;case ePixelFormat.A8B8G8R8:H=3;B=2;j=1;F=0;break}var I=0,q=0,R=0;if(l){I+=g*(P-1);if(L){q+=C*(P-1)}}var U=new TPixel(0,0,0,255);var z=new TPixel(0,0,0,255);for(var W=0;W<P;W++){for(var X=0;X<D;X++){U.red=b[I];U.green=b[I+1];U.blue=b[I+2];U.alpha=b[I+3];I+=4;if(c){U.red=255-U.red;U.green=255-U.green;U.blue=255-U.blue;U.alpha=255-U.alpha}if(L){z.red=L[q];z.green=L[q+1];z.blue=L[q+2];z.alpha=L[q+3];q+=4}if(h){z.red=255-z.red;z.green=255-z.green;z.blue=255-z.blue;z.alpha=255-z.alpha}switch(r){case ePixelFormat.R8G8B8:case ePixelFormat.B8G8R8:i[R+H]=U.red;i[R+B]=U.green;i[R+j]=U.blue;R+=3;break;case ePixelFormat.R8G8B8A8:case ePixelFormat.B8G8R8A8:case ePixelFormat.A8R8G8B8:case ePixelFormat.A8B8G8R8:switch(o){case ePixelMap.RGBToAlpha:i[R+H]=0;i[R+B]=255;i[R+j]=0;if(L){i[R+F]=(U.red+U.green+U.blue)/3&(z.red+z.green+z.blue)/3}else{i[R+F]=(U.red+U.green+U.blue)/3}if(p){i[R+F]=i[R+F]<=127?0:255}R+=4;break;case ePixelMap.Default:default:i[R+H]=U.red;i[R+B]=U.green;i[R+j]=U.blue;if(L){i[R+F]=(z.red+z.green+z.blue)/3}else{i[R+F]=U.alpha}if(p){i[R+F]=i[R+F]<=127?0:255}R+=4;break}break;case ePixelFormat.A8:if(L){i[R]=(z.red+z.green+z.blue)/3}else{i[R]=(U.red+U.green+U.blue)/3}if(p){i[R]=i[R]<=127?0:255}R+=1;break}}if(l)I-=2*g;if(L){if(l)q-=2*C}}this.frameRetrieved=true;return a};MediaPlayback.prototype.setAlphaChannel=function(e){this.alphaPlayback=e};StyleMgr.prototype=new AttributeContainer;StyleMgr.prototype.constructor=StyleMgr;StyleMgr.prototype.eventPerformed=function(e,t){var n=t.stylesMap.getStyles(e.type);if(n.styles&&n.enabled){this.applyStyle(n.styles,n.target?n.target:t)}};StyleMgr.prototype.applyStyle=function(e,t){t.styles.updateStyle(e)};GraphMgr.prototype=new AttributeContainer;GraphMgr.prototype.constructor=GraphMgr;GraphMgr.prototype.setRenderContext=function(e){this.renderContext=e;this.renderState=new RenderState(e)};GraphMgr.prototype.getAvailableLightIndex=function(){return this.lightIndex++};GraphMgr.prototype.getCurrentMaterial=function(){return this.material};GraphMgr.prototype.setCurrentMaterial=function(e){this.material=e};GraphMgr.prototype.getCurrentDissolve=function(){return this.dissolve};GraphMgr.prototype.setCurrentDissolve=function(e){this.dissolve=e};GraphMgr.prototype.getCurrentBalloonTipLabel=function(){return this.balloonTipLabel};GraphMgr.prototype.setCurrentBalloonTipLabel=function(e){this.balloonTipLabel=e};GraphMgr.prototype.getDrawTextures=function(){return this.drawTextures};GraphMgr.prototype.setDrawTextures=function(e){this.drawTextures=e};GraphMgr.prototype.getNextLabelIndex=function(){return this.labelIndex++};GraphMgr.prototype.getNextBalloonTipLabelIndex=function(){return this.balloonTipLabelIndex++};GraphMgr.prototype.reset=function(){this.lightIndex=0;this.labelIndex=1;this.balloonTipLabelIndex=1;this.setCurrentDissolve(null);this.setCurrentMaterial(null);this.setCurrentBalloonTipLabel(null);this.setDrawTextures(true);this.collisions=new Array;for(var e=0;e<gl_MaxLights;e++){this.renderContext.enableLight(e,false)}};Node.prototype=new AttributeContainer;Node.prototype.constructor=Node;Node.prototype.copyNode=function(e,t,n,r){var i=false;if(!e){if(!(e=new Node)){return-1}i=true}e.synchronize(this,false);n.push(this);r.push(this);if(t){var s;for(var o in this.children){s=o-this.children.start();var u=null;if(!o.getCreatedByParent()){if(o.copyNode(u,t,n,r)){if(i){}return-1}if(e.getChildCount()>s){e.insertChild(u,s)}else{e.addChild(u)}o.postCloneChild(u,n,r)}else{u=e.getChild(o-this.children.start());if(o.copyNode(u,t,n,r)){if(i){}return-1}}}}this.postClone(e,n,r)};Node.prototype.searchTree=function(e,t,n,r,i,s,o,u,a){var f=[];var l=[];if(!f.push(e))return;if(!l.push(t))return;this.searchesTree(f,l,n,r,i,s,o,u,a)};Node.prototype.searchesTree=function(e,t,n,r,i,s,o,u,a){var f=false;var l=false;var c=false;if(n){for(var h=0;h<e.size();h++){if(!(this.name==e[h])){l=true;break}}}if(r){for(var h=0;h<t.size();h++){if(this.attrType==t[h]){c=true;break}}}if(n&&r){f=l&&c}else if(n){f=l}else{f=c}if(f){if(!a.push(this))return}if(this==u){return}if(i){for(var h=0;h<this.parents.size();h++){if(this.parents[h]!=o){this.parents[h].searchesTree(e,t,n,r,i,this,null,u,a)}}}for(var h=0;h<this.children.size();h++){if(this.children[h]!=s){this.children[h].searchesTree(e,t,n,r,false,null,null,u,a)}}};Node.prototype.setCreatedByParent=function(e){this.createdByParent=e};Node.prototype.getCreatedByParent=function(){return this.createdByParent};Node.prototype.isNode=function(){return true};Node.prototype.addChild=function(e){this.children.push(e);this.incrementModificationCount();e.addParent(this)};Node.prototype.insertChild=function(e,t){this.children.splice(t,0,e);this.incrementModificationCount();e.addParent(this)};Node.prototype.removeChild=function(e){this.children.splice(this.children.indexOf(e),1);this.incrementModificationCount();e.removeParent(this)};Node.prototype.replaceChild=function(e,t){this.children.splice(this.children.indexOf(e),1,t);e.removeParent(this);t.addParent(this)};Node.prototype.getChild=function(e){if(this.children.length>e){return this.children[e]}return null};Node.prototype.getNamedChild=function(e){for(var t=0;t<this.children.length;t++){if(this.children[t].name.getValueDirect().join("")==e){return this.children[t]}}return null};Node.prototype.getChildCount=function(){return this.children.length};Node.prototype.getParent=function(e){if(this.parents.length>e){return this.parents[e]}return null};Node.prototype.getParentCount=function(){return this.parents.length};Node.prototype.addParent=function(e){this.parents.push(e)};Node.prototype.removeParent=function(e){this.parents.splice(this.parents.indexOf(e),1)};Node.prototype.update=function(e,t){if(!this.thisModified&&!this.childModified){this.setChildModified(false,false);e.visited.push(this);return}e.visited.push(this);if(t){for(var n=0;n<this.children.length;n++){this.children[n].update(e,t)}}this.childModified=this.isChildModified()};Node.prototype.apply=function(e,t,n){switch(e){case"serialize":{var r=new Context;r.attribute=this;var i=this.registry.find("AttributeFactory");var s=i.create("Serializer");var o=new XMLSerializer;s.getAttribute("format").setValueDirect("xml");s.getAttribute("serializeMinimum").setValueDirect(true);s.getAttribute("serializeChildren").setValueDirect(true);s.serialize(r.attribute,r.item,r.attributeName,r.container);var u=o.serializeToString(s.DOM);if(u!="<__InitialRoot/>"){t.serialized+=u}n=false}break}if(n){if(t.path){if(t.path.length>t.pathIndex){for(var a=0;a<this.children.length;a++){var f=t.path[t.pathIndex];if(this.children[a]==f){t.pathIndex++;this.children[a].apply(e,t,n)}}}}else{for(var a=0;a<this.children.length;a++){this.children[a].apply(e,t,n)}}}};Node.prototype.applyNode=function(e,t,n,r){e.apply(t,n,r)};Node.prototype.setModified=function(){this.thisModified=true;this.setChildModified(true,true)};Node.prototype.incrementModificationCount=function(){this.modificationCount++;this.setModified()};Node.prototype.setChildModified=function(e,t){var n=null;for(var r=0;r<this.parents.length;r++){n=this.parents[r];if(n){n.childrenModified[this.name.getValueDirect().join("")]=e;n.childModified=e?true:n.isChildModified();if(t)n.setChildModified(e,t)}}};Node.prototype.isChildModified=function(){for(var e in this.childrenModified){if(this.childrenModified[e]==true)return true}return false};Node.prototype.onRemove=function(){for(var e=0;e<this.children.length;e++){this.children[e].onRemove()}};SGNode.prototype=new Node;SGNode.prototype.constructor=SGNode;SGNode.prototype.setGraphMgr=function(e){this.graphMgr=e};SGNode.prototype.update=function(e,t){if(!this.enabled.getValueDirect()&&!this.thisModified){return}if(!this.thisModified&&!this.childModified&&this.enableDisplayList.getValueDirect()==false&&this.autoDisplayList.getValueDirect()==false){this.setChildModified(false,false);e.visited.push(this);return}e.visited.push(this);var n=false;if(this.thisModified){n=true;this.thisModified=false}if(this.childModified){n=true}if(this.disableDisplayLists){e.disableDisplayLists=true;this.disableDisplayLists=false}if(n){this.enableDisplayList.setValueDirect(false);this.recordDisplayList=true}if(this.autoDisplayList.getValueDirect()&&!n){this.enableDisplayList.setValueDirect(true)}if(e.displayListObj||e.disableDisplayLists){this.enableDisplayList.setValueDirect(false)}if(this.enableDisplayList.getValueDirect()){if(!this.displayListObj){this.createDisplayList();this.recordDisplayList=true}if(!this.recordDisplayList){t=false}e.displayListObj=this.displayListObj}if(t){for(var r=0;r<this.children.length;r++){this.children[r].update(e,t)}}if(e.displayListObj==this.displayListObj){e.displayListObj=null}this.childModified=this.isChildModified()};SGNode.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){return}var i=false;switch(e){case"render":{if(t.resetDisplayLists){this.recordDisplayList=true}i=this.enableDisplayList.getValueDirect()&&this.displayListObj&&!t.displayListObj&&!t.disableDisplayLists;if(i&&0){t.displayListObj=this.displayListObj;if(this.recordDisplayList){this.displayListObj.record_begin()}else{this.displayListObj.play();n=false}}}break;case"rayPick":{t.currentNodePath.push(this)}break;default:{Node.prototype.apply.call(this,e,t,n);return}break}if(n){if(t.path){if(t.path.length>t.pathIndex){for(var s=0;s<this.children.length;s++){var o=t.path[t.pathIndex];if(this.children[s]==o){t.pathIndex++;this.children[s].apply(e,t,n)}}}}else{for(var s=0;s<this.children.length;s++){this.children[s].apply(e,t,n)}}}switch(e){case"render":{if(i){if(this.recordDisplayList){this.displayListObj.record_end();this.recordDisplayList=false}t.displayListObj=null}}break;case"rayPick":{t.currentNodePath.pop()}break}};SGNode.prototype.isRecordingDisplayList=function(){if(this.graphMgr.renderContext.getDisplayList()){return true}return false};SGNode.prototype.createDisplayList=function(){this.displayListObj=new DisplayListObj(this.graphMgr.renderContext)};SGNode.prototype.deleteDisplayList=function(){this.displayListObj=null};SGNode.prototype.enableDisplayListModified=function(){};RenderableElement.prototype=new SGNode;RenderableElement.prototype.constructor=RenderableElement;RenderableElement.prototype.setRegistry=function(e){this.stylesMap.setRegistry(e);SGNode.prototype.setRegistry.call(this,e)};RenderableElement.prototype.update=function(e,t){SGNode.prototype.update.call(this,e,t)};RenderableElement.prototype.apply=function(e,t,n){SGNode.prototype.apply.call(this,e,t,n)};ParentableMotionElement.prototype=new RenderableElement;ParentableMotionElement.prototype.constructor=ParentableMotionElement;ParentableMotionElement.prototype.getTransform=function(){var e=new Matrix4x4;e.loadMatrix(this.transformCompound);return e};ParentableMotionElement.prototype.getSectorTransform=function(){var e=new Matrix4x4;e.loadMatrix(this.sectorTransformCompound);return e};ParentableMotionElement.prototype.update=function(e,t){if(this.nonZeroVelocity){this.updateVelocityMotion(e.timeIncrement)}if(this.updateInheritance){this.updateInheritance=false;this.inheritsPosition=this.inheritPosition_X.getValueDirect()&&this.inheritPosition_Y.getValueDirect()&&this.inheritPosition_Z.getValueDirect();this.inheritsRotation=this.inheritRotation_X.getValueDirect()&&this.inheritRotation_Y.getValueDirect()&&this.inheritRotation_Z.getValueDirect();this.inheritsScale=this.inheritScale_X.getValueDirect()&&this.inheritScale_Y.getValueDirect()&&this.inheritScale_Z.getValueDirect();this.inheritsPivot=this.inheritPivot_X.getValueDirect()&&this.inheritPivot_Y.getValueDirect()&&this.inheritPivot_Z.getValueDirect()}var n=this.updateSimpleTransform();if(n){this.incrementModificationCount()}if(this.motionParent){this.motionParent.update(e,false)}this.updateCompoundTransform();this.updateWorldMotionInfo();RenderableElement.prototype.update.call(this,e,t)};ParentableMotionElement.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){RenderableElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=toScreenSpace(this.sectorWorldPosition.getValueDirect(),t.viewMatrix,t.projMatrix,t.viewport);this.screenPosition.setValueDirect(i.x,i.y,i.z)}break}RenderableElement.prototype.apply.call(this,e,t,n)};ParentableMotionElement.prototype.updateChildDisplayLists=function(){};ParentableMotionElement.prototype.applyTransform=function(){this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.leftMultMatrix(this.sectorTransformCompound);this.graphMgr.renderContext.applyModelViewTransform()};ParentableMotionElement.prototype.updateVelocityMotion=function(e){var t=this.panVelocity.getValueDirect();var n=this.linearVelocity.getValueDirect();if(t.x!=0||t.y!=0||t.z!=0||n.x!=0||n.y!=0||n.z!=0){var r=this.position.getValueDirect();var i=this.getDirectionVectors();var s=this.linearVelocity_affectPosition_Y.getValueDirect();r.x=r.x+i.right.x*t.x*e+i.up.x*t.y*e+i.forward.x*t.z*e+n.x*e;if(s){r.y=r.y+i.right.y*t.x*e+i.up.y*t.y*e+i.forward.y*t.z*e+n.y*e}r.z=r.z+i.right.z*t.x*e+i.up.z*t.y*e+i.forward.z*t.z*e+n.z*e;this.position.setValueDirect(r.x,r.y,r.z)}var o=this.angularVelocity.getValueDirect();if(o.x!=0||o.y!=0||o.z!=0){var u=this.rotation.getValueDirect();u.x=u.x+o.x*e;u.y=u.y+o.y*e;u.z=u.z+o.z*e;this.rotation.setValueDirect(u.x,u.y,u.z)}var a=this.scalarVelocity.getValueDirect();if(a.x!=0||a.y!=0||a.z!=0){var f=this.scale.getValueDirect();f.x=f.x+a.x*e;f.y=f.y+a.y*e;f.z=f.z+a.z*e;this.scale.setValueDirect(f.x,f.y,f.z)}};ParentableMotionElement.prototype.updateSimpleTransform=function(){var e=false;if(this.updatePosition||this.updateRotation||this.updateScale||this.updatePivot){var t;if(this.updatePosition){this.updatePosition=false;t=this.position.getValueDirect();this.translationMatrix.loadTranslation(t.x,t.y,t.z);e=true}if(this.updateRotation){this.updateRotation=false;t=this.rotation.getValueDirect();this.rotationQuat.loadXYZAxisRotation(t.x,t.y,t.z);this.rotationMatrix=this.rotationQuat.getMatrix();e=true}if(this.updateQuaternion){this.updateQuaternion=false;t=this.quaternion.getValueDirect();this.rotationQuat.load(t.w,t.x,t.y,t.z);this.rotationMatrix=this.rotationQuat.getMatrix();e=true}if(this.updateScale){this.updateScale=false;t=this.scale.getValueDirect();this.scaleMatrix.loadScale(t.x,t.y,t.z);e=true}if(this.updatePivot){this.updatePivot=false;t=this.pivot.getValueDirect();this.pivotMatrix.loadTranslation(-t.x,-t.y,-t.z);e=true}if(this.updateSectorPosition){this.updateSectorPosition=false;t=this.sectorPosition.getValueDirect();this.sectorTranslationMatrix.loadTranslation(t.x,t.y,t.z);e=true}if(e){this.transformModified.pulse();var n=new Matrix4x4;n.loadMatrix(this.pivotMatrix.multiply(this.scaleMatrix.multiply(this.rotationMatrix)));this.transformSimple.loadMatrix(n.multiply(this.translationMatrix));this.sectorTransformSimple.loadMatrix(n.multiply(this.sectorTranslationMatrix));this.updateChildDisplayLists()}}return e};ParentableMotionElement.prototype.updateCompoundTransform=function(){this.transformCompound.loadMatrix(this.transformSimple);this.sectorTransformCompound.loadMatrix(this.sectorTransformSimple);if(this.motionParent){var e=new Matrix4x4;var t=getInspectionGroup(this.motionParent);if(t){var n=t.getChild(2);e=n.getAttribute("matrix").getValueDirect()}if(this.inheritsPosition&&this.inheritsRotation&&this.inheritsScale&&this.inheritsPivot){this.transformCompound.loadMatrix(this.transformCompound.multiply(e.multiply(this.motionParent.transformCompound)));this.sectorTransformCompound.loadMatrix(this.sectorTransformCompound.multiply(e.multiply(this.motionParent.sectorTransformCompound)))}else{}}};ParentableMotionElement.prototype.updateWorldMotionInfo=function(){this.worldTransform.setValueDirect(this.transformCompound);this.sectorWorldTransform.setValueDirect(this.sectorTransformCompound);this.updateWorldCenter();this.updateWorldPosition();this.updateWorldRotation();this.updateWorldScale()};ParentableMotionElement.prototype.updateWorldCenter=function(){var e=this.center.getValueDirect();e=this.transformCompound.transform(e.x,e.y,e.z,1);this.worldCenter.setValueDirect(e.x,e.y,e.z);e=this.center.getValueDirect();e=this.sectorTransformCompound.transform(e.x,e.y,e.z,1);this.sectorWorldCenter.setValueDirect(e.x,e.y,e.z)};ParentableMotionElement.prototype.updateWorldPosition=function(){var e=this.transformCompound.transform(0,0,0,1);this.worldPosition.setValueDirect(e.x,e.y,e.z);e=this.sectorTransformCompound.transform(0,0,0,1);this.sectorWorldPosition.setValueDirect(e.x,e.y,e.z)};ParentableMotionElement.prototype.updateWorldRotation=function(){var e=this.transformCompound.getRotationAngles();this.worldRotation.setValueDirect(e.x,e.y,e.z)};ParentableMotionElement.prototype.updateWorldScale=function(){var e=this.transformCompound.getScalingFactors();this.worldScale.setValueDirect(e.x,e.y,e.z)};ParentableMotionElement.prototype.synchronizePosition=function(){var e=new Vector3D;if(this.motionParent){e.x=0;e.y=0;e.z=0}else{e=this.sectorOrigin.getValueDirect()}var t=this.sectorPosition.getValueDirect();var n=new Vector3D;n.x=e.x+t.x;n.y=e.y+t.y;n.z=e.z+t.z;this.position.removeModifiedCB(ParentableMotionElement_PositionModifiedCB,this);this.position.setValueDirect(n.x,n.y,n.z);this.position.addModifiedCB(ParentableMotionElement_PositionModifiedCB,this);this.updatePosition=true};ParentableMotionElement.prototype.synchronizeSectorPosition=function(){var e=new Vector3D;if(this.motionParent){e.x=0;e.y=0;e.z=0}else{e=this.sectorOrigin.getValueDirect()}var t=this.position.getValueDirect();var n=new Vector3D;n.x=t.x-e.x;n.y=t.y-e.y;n.z=t.z-e.z;this.sectorPosition.removeModifiedCB(ParentableMotionElement_SectorPositionModifiedCB,this);this.sectorPosition.setValueDirect(n.x,n.y,n.z);this.sectorPosition.addModifiedCB(ParentableMotionElement_SectorPositionModifiedCB,this);this.updateSectorPosition=true};ParentableMotionElement.prototype.getDirectionVectors=function(){var e=this.sectorTransformCompound.transform(0,1,0,0);var t=this.sectorTransformCompound.transform(1,0,0,0);var n=this.sectorTransformCompound.transform(0,0,1,0);return{up:e,right:t,forward:n}};ParentableMotionElement.prototype.setMotionParent=function(e){if(e==this)return;if(this.motionParent){for(var t=0;t<this.motionParent.motionChildren.length;t++){if(this.motionParent.motionChildren[t]==this){this.motionParent.motionChildren.splice(t,1);break}}}this.motionParent=e;if(e){e.motionChildren.push(this);this.parent.removeModifiedCB(ParentableMotionElement_ParentModifiedCB,this);this.parent.copyValue(e.name);this.parent.addModifiedCB(ParentableMotionElement_ParentModifiedCB,this)}this.synchronizeSectorPosition()};ParentableMotionElement.prototype.velocityModified=function(){if(this.panVelocity.isZero()&&this.linearVelocity.isZero()&&this.angularVelocity.isZero()&&this.scalarVelocity.isZero()){this.nonZeroVelocity=false}else{this.nonZeroVelocity=true}};Directive.prototype=new AttributeContainer;Directive.prototype.constructor=Directive;SGDirective.prototype=new Directive;SGDirective.prototype.constructor=SGDirective;SGDirective.prototype.setGraphMgr=function(e){this.graphMgr=e};UpdateParams.prototype=new DirectiveParams;UpdateParams.prototype.constructor=UpdateParams();UpdateDirective.prototype=new SGDirective;UpdateDirective.prototype.constructor=UpdateDirective;UpdateDirective.prototype.execute=function(e,t){e=e||this.rootNode.getValueDirect();t.timeIncrement=this.timeIncrement.getValueDirect();e.update(t,true);while(t.nextPass.length>0){t.pass++;var n=[];for(var r=0;r<t.nextPass.length;r++){n[r]=t.nextPass[r]}t.nextPass.length=0;for(var r=0;r<n.length;r++){n[r].update(t,false)}}return t.visited};Camera.prototype=new ParentableMotionElement;Camera.prototype.constructor=Camera;Camera.prototype.update=function(e,t){if(this.updateNearDistance){this.updateNearDistance=false;this.near=this.nearDistance.getValueDirect();this.updateClipPlanes=true}if(this.updateFarDistance){this.updateFarDistance=false;this.far=this.farDistance.getValueDirect();this.updateClipPlanes=true}ParentableMotionElement.prototype.update.call(this,e,t)};Camera.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){ParentableMotionElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{this.applyTransform();t.projMatrix.loadMatrix(this.projectionMatrix);t.viewMatrix.loadMatrix(this.sectorTransformCompound);t.viewMatrix.invert()}break;case"rayPick":{if(!t.camera||t.camera==this){var i=this.getViewSpaceRay(t.viewport,t.clickPoint);t.rayOrigin=i.origin;t.rayDir=i.direction;t.currentCamera=this;t.nearDistance=this.nearDistance.getValueDirect();t.farDistance=this.farDistance.getValueDirect();t.viewMatrix.loadMatrix(this.sectorTransformCompound);t.viewMatrix.invert()}}break;case"bbox":{t.viewMatrix.loadMatrix(this.sectorTransformCompound);t.viewMatrix.invert()}break;case"collide":{t.viewMatrix.loadMatrix(this.sectorTransformCompound);t.viewMatrix.invert()}break;case"highlight":{t.projMatrix.loadMatrix(this.projectionMatrix);t.viewMatrix.loadMatrix(this.transformCompound);t.viewMatrix.invert();t.camera=this;t.viewport=this.viewport}break}ParentableMotionElement.prototype.apply.call(this,e,t,n)};Camera.prototype.applyTransform=function(){var e=new Matrix4x4;e.loadMatrix(this.sectorTransformCompound);e.invert();this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.loadMatrix(e);this.graphMgr.renderContext.applyModelViewTransform()};OrthographicCamera.prototype=new Camera;OrthographicCamera.prototype.constructor=OrthographicCamera;OrthographicCamera.prototype.update=function(e,t){if(this.updateWidth){this.updateWidth=false;this.updateClipPlanes=true}Camera.prototype.update.call(this,e,t)};OrthographicCamera.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Camera.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{if(!this.viewport.equals(t.viewport)){this.viewport=t.viewport;this.updateClipPlanes=true}if(this.updateClipPlanes){this.updateClipPlanes=false;this.setClipPlanes()}this.applyOrthographicTransform()}break}Camera.prototype.apply.call(this,e,t,n)};OrthographicCamera.prototype.setClipPlanes=function(){var e=this.width.getValueDirect();var t=e*this.viewport.height/this.viewport.width;this.top=t/2;this.bottom=-this.top;this.right=e/2;this.left=-this.right;this.projectionMatrix.loadMatrix(this.graphMgr.renderContext.orthographicMatrixLH(this.left,this.right,this.top,this.bottom,this.near,this.far));var n=new ViewVolume;n.setOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far);this.viewVolume.setValueDirect(n.left,n.right,n.top,n.bottom,n.near,n.far)};OrthographicCamera.prototype.applyOrthographicTransform=function(){this.graphMgr.renderContext.projectionMatrixStack.top().loadMatrix(this.projectionMatrix);this.graphMgr.renderContext.applyProjectionTransform()};OrthographicCamera.prototype.getViewSpaceRay=function(e,t){var n=(t.x-e.x)/e.width*2-1;var r=-((t.y-e.y)/e.height*2-1);var i=(this.right-this.left)/2;var s=(this.top-this.bottom)/2;var o=new Vector3D(n*i,r*s,this.near);var u=new Vector3D(0,0,1);return{origin:o,direction:u}};PerspectiveCamera.prototype=new Camera;PerspectiveCamera.prototype.constructor=PerspectiveCamera;PerspectiveCamera.prototype.update=function(e,t){if(this.updateZoom){this.updateZoom=false;this.fovyRadians=2*Math.atan2(1,this.zoom.getValueDirect());this.updateClipPlanes=true}Camera.prototype.update.call(this,e,t)};PerspectiveCamera.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Camera.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{if(!this.viewport.equals(t.viewport)){this.viewport=t.viewport;this.updateClipPlanes=true}if(this.updateClipPlanes){this.updateClipPlanes=false;this.setClipPlanes()}this.applyPerspectiveTransform()}break}Camera.prototype.apply.call(this,e,t,n)};PerspectiveCamera.prototype.setClipPlanes=function(){this.top=Math.tan(this.fovyRadians/2)*this.near;this.bottom=-this.top;this.right=this.top*(this.viewport.width/this.viewport.height);this.left=-this.right;this.projectionMatrix.loadMatrix(this.graphMgr.renderContext.perspectiveMatrixLH(this.left,this.right,this.top,this.bottom,this.near,this.far));var e=new ViewVolume;e.setPerspective(this.fovyRadians,this.viewport.width/this.viewport.height,this.near,this.far);this.viewVolume.setValueDirect(e.left,e.right,e.top,e.bottom,e.near,e.far)};PerspectiveCamera.prototype.applyPerspectiveTransform=function(){this.graphMgr.renderContext.projectionMatrixStack.top().loadMatrix(this.projectionMatrix);this.graphMgr.renderContext.applyProjectionTransform()};PerspectiveCamera.prototype.getViewSpaceRay=function(e,t){var n=(t.x-e.x)/e.width*2-1;var r=-((t.y-e.y)/e.height*2-1);var i=this.fovyRadians;var s=2*Math.atan(e.width/e.height*Math.tan(i/2));var o=Math.tan(s/2)*this.far;var u=Math.tan(i/2)*this.far;var a=new Vector3D(0,0,0);var f=new Vector3D(n*o,r*u,this.far);return{origin:a,direction:f}};Light.prototype=new ParentableMotionElement;Light.prototype.constructor=Light;Light.prototype.setGraphMgr=function(e){this.lightIndex=e.getAvailableLightIndex();ParentableMotionElement.prototype.setGraphMgr.call(this,e)};Light.prototype.update=function(e,t){if(this.updateAmbient){this.updateAmbient=false;this.lightDesc.ambient.copy(this.ambient.getValueDirect());this.lightDesc.validMembersMask|=LIGHTDESC_AMBIENT_BIT}if(this.updateDiffuse){this.updateDiffuse=false;this.lightDesc.diffuse.copy(this.diffuse.getValueDirect());this.lightDesc.validMembersMask|=LIGHTDESC_DIFFUSE_BIT}if(this.updateSpecular){this.updateSpecular=false;this.lightDesc.specular.copy(this.specular.getValueDirect());this.lightDesc.validMembersMask|=LIGHTDESC_SPECULAR_BIT}if(this.updateConstantAttenuation){this.updateConstantAttenuation=false;this.lightDesc.constantAttenuation=this.constantAttenuation.getValueDirect();this.lightDesc.validMembersMask|=LIGHTDESC_CONSTANT_ATT_BIT}if(this.updateLinearAttenuation){this.updateLinearAttenuation=false;this.lightDesc.linearAttenuation=this.linearAttenuation.getValueDirect();this.lightDesc.validMembersMask|=LIGHTDESC_LINEAR_ATT_BIT}if(this.updateQuadraticAttenuation){this.updateQuadraticAttenuation=false;this.lightDesc.quadraticAttenuation=this.quadraticAttenuation.getValueDirect();this.lightDesc.validMembersMask|=LIGHTDESC_QUADRATIC_ATT_BIT}if(this.lightDesc.validMembersMask){this.setLightDesc=true}this.setModified();ParentableMotionElement.prototype.update.call(this,e,t)};Light.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){switch(e){case"render":{this.setLightEnabled()}break}ParentableMotionElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{if(this.setLightDesc){this.setLightDesc=false;this.applyLightDesc()}this.setLightEnabled()}break}ParentableMotionElement.prototype.apply.call(this,e,t,n)};Light.prototype.applyLightDesc=function(){this.graphMgr.renderContext.setLight(this.lightIndex,this.lightDesc)};Light.prototype.setLightEnabled=function(){this.graphMgr.renderContext.enableLight(this.lightIndex,this.enabled.getValueDirect()?1:0)};Light.prototype.onRemove=function(){this.graphMgr.renderContext.enableLight(this.lightIndex,0);ParentableMotionElement.prototype.onRemove.call(this)};DirectionalLight.prototype=new Light;DirectionalLight.prototype.constructor=DirectionalLight;DirectionalLight.prototype.update=function(e,t){this.validMembersMask=0;Light.prototype.update.call(this,e,t)};DirectionalLight.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Light.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=this.sectorTransformCompound.transform(0,0,1,0);this.lightDesc.direction.copy(i);this.lightDesc.validMembersMask|=LIGHTDESC_DIRECTION_BIT;this.setLightDesc=true}break}Light.prototype.apply.call(this,e,t,n)};PointLight.prototype=new Light;PointLight.prototype.constructor=PointLight;PointLight.prototype.update=function(e,t){this.validMembersMask=0;if(this.updateRange){this.updateRange=false;this.lightDesc.range=this.range.getValueDirect();this.lightDesc.validMembersMask|=LIGHTDESC_RANGE_BIT}Light.prototype.update.call(this,e,t)};PointLight.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Light.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=this.sectorTransformCompound.transform(0,0,0,1);this.lightDesc.position.copy(i);this.lightDesc.validMembersMask|=LIGHTDESC_POSITION_BIT;this.lightDesc.outerConeDegrees=180;this.lightDesc.validMembersMask|=LIGHTDESC_OUTER_CONE_DEG_BIT;this.setLightDesc=true}break}Light.prototype.apply.call(this,e,t,n)};GlobalIllumination.prototype=new SGNode;GlobalIllumination.prototype.constructor=GlobalIllumination;GlobalIllumination.prototype.update=function(e,t){if(this.updateAmbient){this.updateAmbient=false;this.setGlobalIllumination=true}SGNode.prototype.update.call(this,e,t)};GlobalIllumination.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){ParentableMotionElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{if(this.setGlobalIllumination){this.setGlobalIllumination=false;this.applyGlobalIllumination()}}break}SGNode.prototype.apply.call(this,e,t,n)};GlobalIllumination.prototype.applyGlobalIllumination=function(){this.graphMgr.renderContext.setGlobalIllumination(this.ambient.getValueDirect())};GlobalIllumination.prototype.onRemove=function(){var e=new Color(0,0,0,0);this.graphMgr.renderContext.setGlobalIllumination(e);SGNode.prototype.onRemove.call(this)};Group.prototype=new SGNode;Group.prototype.constructor=Group;Group.prototype.addChild=function(e){if(this.proxyChildAttrs.getValueDirect()==true){this.proxyAttributes(e)}var t=e.getAttribute("autoDisplayList");if(t){t.addTarget(this.autoDisplayList,eAttrSetOp.AND);t.addModifiedCB(Group_ChildAutoDisplayListModifiedCB,this)}else{this.autoDisplayList.setValueDirect(false)}SGNode.prototype.addChild.call(this,e)};Group.prototype.insertChild=function(e,t){if(this.proxyChildAttrs.getValueDirect()==true){this.proxyAttributes(e)}var n=e.getAttribute("autoDisplayList");if(n){n.addTarget(this.autoDisplayList,eAttrSetOp.AND);n.addModifiedCB(Group_ChildAutoDisplayListModifiedCB,this)}else{this.autoDisplayList.setValueDirect(false)}SGNode.prototype.insertChild.call(this,e,t)};Group.prototype.removeChild=function(e){if(this.proxyChildAttrs.getValueDirect()==true){this.synchronizeProxiedAttributes()}var t=e.getAttribute("autoDisplayList");if(t){t.removeTarget(this.autoDisplayList,eAttrSetOp.AND);t.removeModifiedCB(Group_ChildAutoDisplayListModifiedCB,this)}return SGNode.prototype.removeChild.call(this,e)};Group.prototype.replaceChild=function(e,t){if(this.proxyChildAttrs.getValueDirect()==true){this.proxyAttributes(e);this.synchronizeProxiedAttributes()}var n=t.getAttribute("autoDisplayList");if(n){n.removeTarget(this.autoDisplayList,eAttrSetOp.AND);n.removeModifiedCB(Group_ChildAutoDisplayListModifiedCB,this)}n=e.getAttribute("autoDisplayList");if(n){n.addTarget(this.autoDisplayList,eAttrSetOp.AND);n.addModifiedCB(Group_ChildAutoDisplayListModifiedCB,this)}else{this.autoDisplayList.setValueDirect(false)}return SGNode.prototype.replaceChild.call(this,e,t)};Group.prototype.update=function(e,t){SGNode.prototype.update.call(this,e,t)};Group.prototype.apply=function(e,t,n){SGNode.prototype.apply.call(this,e,t,n)};Group.prototype.proxyChildAttrsModified=function(){};Group.prototype.childAutoDisplayListModified=function(){var e=true;for(var t=0;t<this.children.length;t++){childAutoDL=this.children[t].getAttribute("autoDisplayList");if(childAutoDL){e&=childAutoDL.getValueDirect();if(!e){break}}}this.autoDisplayList.setValueDirect(e)};Isolator.prototype=new Group;Isolator.prototype.constructor=Isolator;Isolator.prototype.update=function(e,t){Group.prototype.update.call(this,e,t)};Isolator.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Group.prototype.apply.call(this,e,t,n);return}var i=this.isolateTransforms.getValueDirect();var s=this.isolateTextures.getValueDirect();var o=this.isolateDissolves.getValueDirect();var u=this.isolateClipPlanes.getValueDirect();var a=0;var f=null;var l=null;var c=null;var h=null;switch(e){case"render":{this.pushIsolatedStates();if(i){l=t.projMatrix;c=t.viewMatrix;h=t.worldMatrix;this.graphMgr.renderContext.setMatrixMode(RC_PROJECTION);this.graphMgr.renderContext.pushMatrix();this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.pushMatrix()}if(s){this.graphMgr.textureArrayStack.push(new TextureArray(this.graphMgr.textureArrayStack.top()))}}break;case"rayPick":{if(o){a=t.dissolve;f=this.graphMgr.getCurrentDissolve()}if(i){}if(u){}}break;case"bbox":{if(i){h=t.worldMatrix}}break;case"collide":{if(i){h=t.worldMatrix}}break;case"highlight":{if(i){h=t.worldMatrix}}break}Group.prototype.apply.call(this,e,t,n);switch(e){case"render":{this.popIsolatedStates();if(i){t.projMatrix=l;t.viewMatrix=c;t.worldMatrix=h;this.graphMgr.renderContext.setMatrixMode(RC_PROJECTION);this.graphMgr.renderContext.popMatrix();this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.popMatrix()}if(s){this.graphMgr.textureArrayStack.pop()}}break;case"rayPick":{if(o){t.dissolve=a;this.graphMgr.setCurrentDissolve(f)}if(i){}if(u){}}break;case"bbox":{if(i){t.worldMatrix=h}}break;case"collide":{if(i){t.worldMatrix=h}}break;case"highlight":{if(i){t.worldMatrix=h}}break}};Isolator.prototype.pushIsolatedStates=function(){};Isolator.prototype.popIsolatedStates=function(){};Selector.prototype=new Group;Selector.prototype.constructor=Selector;Selector.prototype.update=function(e,t){var n=this.selectee.getValueDirect();if(t&&this.children.length>n){this.children[n].update(e,t);return}Group.prototype.update.call(this,e,t)};Selector.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Group.prototype.apply.call(this,e,t,n);return}var i=this.selectee.getValueDirect();if(n&&this.children.length>i){this.children[i].apply(e,t,n);return}Group.prototype.apply.call(this,e,t,n)};Dissolve.prototype=new SGNode;Dissolve.prototype.constructor=Dissolve;Dissolve.prototype.update=function(e,t){SGNode.prototype.update.call(this,e,t)};Dissolve.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Group.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=this.dissolve.getValueDirect();this.lastDissolve=i;t.dissolve=i}break;case"rayPick":{t.dissolve=this.lastDissolve}break}SGNode.prototype.apply.call(this,e,t,n)};RenderParams.prototype=new DirectiveParams;RenderParams.prototype.constructor=RenderParams();RenderDirective.prototype=new SGDirective;RenderDirective.prototype.constructor=RenderDirective;RenderDirective.prototype.setRegistry=function(e){this.distanceSortAgent.setRegistry(e);this.updateDirective.setRegistry(e);this.collideDirective.setRegistry(e);this.highlightDirective.setRegistry(e);this.backgroundScreen.setRegistry(e);this.backgroundTexture.setRegistry(e);this.backgroundScreenRect.setRegistry(e);SGDirective.prototype.setRegistry.call(this,e)};RenderDirective.prototype.setGraphMgr=function(e){this.distanceSortAgent.setGraphMgr(e);this.updateDirective.setGraphMgr(e);this.collideDirective.setGraphMgr(e);this.highlightDirective.setGraphMgr(e);this.backgroundScreen.setGraphMgr(e);this.backgroundTexture.setGraphMgr(e);this.backgroundScreenRect.setGraphMgr(e);SGDirective.prototype.setGraphMgr.call(this,e)};RenderDirective.prototype.execute=function(e){this.drawBackground();e=e||this.rootNode.getValueDirect();var t=new UpdateParams;t.directive=this.updateDirective;t.disableDisplayLists=this.resetDisplayLists;var n=this.updateDirective.execute(e,t);t=new CollideParams;t.directive=this.collideDirective;this.collideDirective.execute(e,t);t=new RenderParams;t.directive=this;t.path=null;t.pathIndex=1;t.viewport.loadViewport(this.viewport.getValueDirect());t.distanceSortAgent=this.distanceSortAgent;t.drawTextures=this.texturesEnabled.getValueDirect();if(this.resetDisplayLists){t.resetDisplayLists=true;this.resetDisplayLists=false}n[0].apply("render",t,true);if(!this.distanceSortAgent.isEmpty()){this.distanceSortAgent.sort();this.distanceSortAgent.draw();this.distanceSortAgent.clear()}this.drawHighlights(e)};RenderDirective.prototype.drawBackground=function(){if(!this.backgroundImageSet)return;var e=new UpdateParams;e.directive=this.updateDirective;var t=this.updateDirective.execute(this.backgroundScreen,e);e=new RenderParams;e.directive=this;e.path=null;e.pathIndex=1;e.viewport.loadViewport(this.viewport.getValueDirect());t[0].apply("render",e,true)};RenderDirective.prototype.drawHighlights=function(e){switch(this.highlightType.getValueDirect()){case eHighlightType.FourPass:case eHighlightType.EightPass:this.highlightDirective.execute(e);break;case eHighlightType.None:default:break}};RenderDirective.prototype.backgroundColorModified=function(){var e=this.backgroundColor.getValueDirect();this.graphMgr.renderContext.clearColor(e.r,e.g,e.b,e.a)};RayPickParams.prototype=new DirectiveParams;RayPickParams.prototype.constructor=RayPickParams();RayPickDirective.prototype=new SGDirective;RayPickDirective.prototype.constructor=RayPickDirective;RayPickDirective.prototype.execute=function(e){e=e||this.rootNode.getValueDirect();this.picked.length=0;var t=new RayPickParams;t.directive=this;t.camera=this.camera.getValueDirect();t.viewport.loadViewport(this.viewport.getValueDirect());t.clickPoint.copy(this.clickPoint.getValueDirect());e.apply("rayPick",t,true)};RayPickDirective.prototype.addPickRecord=function(e){for(var t=0;t<this.picked.length;t++){if(this.picked[t].intersectRecord.distance>e.intersectRecord.distance){break}}this.picked.splice(t,0,e)};BBoxParams.prototype=new DirectiveParams;BBoxParams.prototype.constructor=BBoxParams();BBoxDirective.prototype=new SGDirective;BBoxDirective.prototype.constructor=BBoxDirective;BBoxDirective.prototype.execute=function(e){e=e||this.rootNode.getValueDirect();var t=new BBoxParams;t.viewSpace=this.viewSpace.getValueDirect();var n=this.viewTransform.getValueDirect();t.viewMatrix.load(n._11,n._12,n._13,n._14,n._21,n._22,n._23,n._24,n._31,n._32,n._33,n._34,n._41,n._42,n._43,n._44);e.apply("bbox",t,true);this.min=t.minPoint;this.max=t.maxPoint};BBoxDirective.prototype.getBounds=function(){return{min:this.min,max:this.max}};Geometry.prototype=new RenderableElement;Geometry.prototype.constructor=Geometry;Geometry.prototype.update=function(e,t){if(this.updateBoundingTree){this.updateBoundingTree=false;this.buildBoundingTree()}RenderableElement.prototype.update.call(this,e,t)};Geometry.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){RenderableElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=true;var s=t.dissolve;var o=t.opacity;if(s==1){i=false}else if(s>0||o<1||this.graphMgr.textureArrayStack.top().textures[eTextureType.Transparency].length>0||this.graphMgr.projectionTextureArrayStack.top().textures[eTextureType.Transparency].length>0){var u=this.getBBox();t.distanceSortAgent.addGeometry(this,u.min,u.max,s);i=false}if(i){this.draw(s)}}break;case"rayPick":{if(this.selectable.getValueDirect()==true&&t.opacity>0&&t.dissolve<1){var a=t.worldMatrix.multiply(t.viewMatrix);var f=a.getScalingFactors();var l=rayPick(this.boundingTree,t.rayOrigin,t.rayDir,t.nearDistance,t.farDistance,t.worldMatrix,t.viewMatrix,max3(f.x,f.y,f.z),t.doubleSided,t.clipPlanes);if(l){t.currentNodePath.push(this);t.directive.addPickRecord(new RayPickRecord(t.currentNodePath,l,t.camera));t.currentNodePath.pop()}}}break;case"bbox":{var u=this.getBBox();var c=new Matrix4x4;c.loadMatrix(t.worldMatrix);if(t.viewSpace){c.loadMatrix(c.multiply(t.viewMatrix))}var h=c.transform(u.min.x,u.min.y,u.min.z,1);var p=c.transform(u.max.x,u.max.y,u.max.z,1);if(t.minMaxSet){t.minPoint.x=Math.min(t.minPoint.x,Math.min(h.x,p.x));t.minPoint.y=Math.min(t.minPoint.y,Math.min(h.y,p.y));t.minPoint.z=Math.min(t.minPoint.z,Math.min(h.z,p.z));t.maxPoint.x=Math.max(t.maxPoint.x,Math.max(h.x,p.x));t.maxPoint.y=Math.max(t.maxPoint.y,Math.max(h.y,p.y));t.maxPoint.z=Math.max(t.maxPoint.z,Math.max(h.z,p.z))}else{t.minPoint.x=Math.min(h.x,p.x);t.minPoint.y=Math.min(h.y,p.y);t.minPoint.z=Math.min(h.z,p.z);t.maxPoint.x=Math.max(h.x,p.x);t.maxPoint.y=Math.max(h.y,p.y);t.maxPoint.z=Math.max(h.z,p.z);t.minMaxSet=true}}break;case"highlight":{if(this.highlight.getValueDirect()){if(t.targets.length>0){t.targets[t.targets.length-1].geometries.push(this)}}}break}RenderableElement.prototype.apply.call(this,e,t,n)};Geometry.prototype.draw=function(e){};Geometry.prototype.drawPrimitives=function(){};Geometry.prototype.getBBox=function(){return{min:this.bbox.min.getValueDirect(),max:this.bbox.max.getValueDirect()}};Geometry.prototype.getTriangles=function(){return new Array};VertexGeometry.prototype=new Geometry;VertexGeometry.prototype.constructor=VertexGeometry;VertexGeometry.prototype.postCloneChild=function(e,t,n){var r;var i;var s;for(r=0;r<t.length();r++){i=t.stack[r];if(i.getAttribute()==eAttrType.Texture){if(!s.push(i))return}}var o;for(r=0;r<n.length();r++){i=n.stack[r];if(i.getAttribute()==eAttrType.Texture){if(!o.push(i))return}}var u=new NumberArrayAttr;for(r=0;r<s.size()&&r<o.size();r++){u=this.findUVCoords(s[r]);if(u){var a=new NumberArrayAttr;a=e.getUVCoords(o[r]);a.copyValue(u)}}};VertexGeometry.prototype.getUVCoords=function(e){for(var t=0;t<this.uvCoords.length;t++){if(this.uvCoords[t].first==e)return this.uvCoords[t].second}var n=new NumberArrayAttr;n.addModifiedCB(VertexGeometry_UVCoordsModifiedCB,this);this.uvCoords.push(new Pair(e,n));return n};VertexGeometry.prototype.findUVCoords=function(e){if(!e){return null}for(var t=0;t<this.uvCoords.length;t++){if(this.uvCoords[t].first==e)return this.uvCoords[t].second}return null};VertexGeometry.prototype.update=function(e,t){if(this.updateVertices){this.updateVertices=false;this.vertexBuffer.setVertices(this.vertices.getValueDirect());this.updateBoundingTree=true;this.calculateBBox()}if(this.updateColors){this.updateColors=false;this.vertexBuffer.setColors(this.colors.getValueDirect())}if(this.updateUVCoords.length){for(var n=0;n<this.updateUVCoords.length;n++){for(var r=0;r<this.uvCoords.length;r++){if(this.uvCoords[r].second==this.updateUVCoords[n]){this.vertexBuffer.setUVCoords(this.uvCoords[r].first.textureObj,this.uvCoords[r].second.getValueDirect());break}}}this.updateUVCoords.length=0}Geometry.prototype.update.call(this,e,t)};VertexGeometry.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Geometry.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{}break}Geometry.prototype.apply.call(this,e,t,n)};VertexGeometry.prototype.drawTextured=function(e){var t=null;var n=null;this.graphMgr.renderContext.enable(eRenderMode.AlphaBlend);this.graphMgr.renderContext.setBlendFactor(RC_SRC_ALPHA,RC_ONE_MINUS_SRC_ALPHA);var r=this.graphMgr.renderContext.getMaxTextureStages();var i=this.graphMgr.textureArrayStack.top();var s=1;var o=1;var u=1;var a=1;var f=this.graphMgr.getCurrentMaterial();if(f){s=f.getAttribute("ambientLevel").getValueDirect();o=f.getAttribute("diffuseLevel").getValueDirect();u=f.getAttribute("specularLevel").getValueDirect();a=f.getAttribute("emissiveLevel").getValueDirect()}var l=this.graphMgr.renderContext.getFrontMaterial();this.graphMgr.renderState.push(RENDERSTATE_MATERIAL_BIT);if(e>0){l.ambient.a*=1-e;l.diffuse.a*=1-e;l.specular.a*=1-e;l.emissive.a*=1-e;this.graphMgr.renderContext.setFrontMaterial(l)}if(i.textures[eTextureType.Transparency].length){var c=i.textures[eTextureType.Transparency][0];var h=this.getUVCoords(c);if(h&&h.getLength()>0){this.setTextureStage(0,eTextureType.Transparency,c,c.transformCompound);t=c}if(r>1){this.graphMgr.renderContext.enableTextureStage(1,0);n=null}}if(i.textures[eTextureType.Color].length){this.setBlendingMaterial(i.textures[eTextureType.Color][0].getAttribute("opacity").getValueDirect(),s,o,u,a)}this.graphMgr.renderContext.setTextureBlendFactor(l.diffuse.a*(1-e));if(i.textures[eTextureType.Color].length==0||i.textures[eTextureType.Color][0].getAttribute("opacity").getValueDirect()<1){this.vertexBuffer.draw()}if(t){this.graphMgr.renderContext.enableTextureStage(0,0);t=null}if(n){this.graphMgr.renderContext.enableTextureStage(1,0);n=null}for(var p=0;p<i.textures[eTextureType.Color].length;p++){var c=i.textures[eTextureType.Color][p];var h=this.getUVCoords(c);if(h&&h.getLength()>0){this.setTextureStage(0,eTextureType.Color,c,c.transformCompound);t=c;this.setBlendingMaterial(c.getAttribute("opacity").getValueDirect(),s,o,u,a);this.graphMgr.renderContext.setTextureBlendFactor(l.diffuse.a*(1-e)*c.getAttribute("opacity").getValueDirect())}if(r>1){if(i.textures[eTextureType.Transparency].length){c=i.textures[eTextureType.Transparency][0];h=this.getUVCoords(c);if(h&&h.getLength()>0){this.setTextureStage(1,eTextureType.Transparency,c,c.transformCompound);n=c}}}this.vertexBuffer.draw();if(t){this.graphMgr.renderContext.enableTextureStage(0,0);t=null}if(n){this.graphMgr.renderContext.enableTextureStage(1,0);n=null}}this.graphMgr.renderContext.enableTextureStage(0,0);this.graphMgr.renderContext.enableTextureStage(1,0);this.graphMgr.renderContext.disable(eRenderMode.AlphaBlend);this.graphMgr.renderState.pop(RENDERSTATE_MATERIAL_BIT)};VertexGeometry.prototype.drawPrimitives=function(){this.vertexBuffer.draw()};VertexGeometry.prototype.setTextureStage=function(e,t,n,r,i,s){r=r||new Matrix4x4;i=i||eTextureCoordSrc.VertexUVs;s=s||new Matrix4x4;this.graphMgr.renderContext.enableTextureStage(e,1);var o=n.getAttribute("widthWrap").getValueDirect();var u=n.getAttribute("heightWrap").getValueDirect();var a,f;switch(o){case eTextureWrap.Clamp:a=RC_CLAMP_TO_EDGE;break;case eTextureWrap.Repeat:default:a=RC_REPEAT;break}switch(u){case eTextureWrap.Clamp:f=RC_CLAMP_TO_EDGE;break;case eTextureWrap.Repeat:default:f=RC_REPEAT;break}this.vertexBuffer.setTextureStage(e,n.textureObj,a,f,i,s);this.graphMgr.renderContext.setTextureBlendOp(n.blendOp.getValueDirect())};VertexGeometry.prototype.setBlendingMaterial=function(e,t,n,r,i){var s=this.graphMgr.renderContext.getFrontMaterial();var o=e*t;var u=e*n;var a=e*r;var f=e*i;s.ambient.r=o+s.ambient.r*(1-e);s.ambient.g=o+s.ambient.g*(1-e);s.ambient.b=o+s.ambient.b*(1-e);s.diffuse.r=u+s.diffuse.r*(1-e);s.diffuse.g=u+s.diffuse.g*(1-e);s.diffuse.b=u+s.diffuse.b*(1-e);s.specular.r=0;s.specular.g=0;s.specular.b=0;s.glossiness=1;s.emissive.r=f+s.emissive.r*(1-e);s.emissive.g=f+s.emissive.g*(1-e);s.emissive.b=f+s.emissive.b*(1-e);s.validMembersMask=MATERIALDESC_ALL_BITS;this.graphMgr.renderContext.setFrontMaterial(s)};VertexGeometry.prototype.setSpecularMaterial=function(e,t){var n=new MaterialDesc;n.validMembersMask=MATERIALDESC_ALL_BITS;n.specular=e;n.glossiness=t;this.graphMgr.renderContext.setFrontMaterial(n);this.graphMgr.renderContext.setBlendFactor(RC_ONE_MINUS_SRC_ALPHA,RC_ONE)};VertexGeometry.prototype.calculateBBox=function(){var e=this.vertices.getValueDirect();if(e.length<3)return;var t=new Vector3D(e[0],e[1],e[2]);var n=new Vector3D(e[0],e[1],e[2]);for(var r=3;r<e.length;r+=3){t.x=Math.min(t.x,e[r]);t.y=Math.min(t.y,e[r+1]);t.z=Math.min(t.z,e[r+2]);n.x=Math.max(n.x,e[r]);n.y=Math.max(n.y,e[r+1]);n.z=Math.max(n.z,e[r+2])}this.bbox.getAttribute("min").setValueDirect(t.x,t.y,t.z);this.bbox.getAttribute("max").setValueDirect(n.x,n.y,n.z)};TriList.prototype=new VertexGeometry;TriList.prototype.constructor=TriList;TriList.prototype.update=function(e,t){if(!this.vertexBuffer){this.vertexBuffer=this.graphMgr.renderContext.createVertexBuffer(3);this.vertexBuffer.setPrimitiveType(this.primitiveType)}if(this.updateNormals){this.updateNormals=false;this.vertexBuffer.setNormals(this.normals.getValueDirect())}VertexGeometry.prototype.update.call(this,e,t)};TriList.prototype.apply=function(e,t,n){VertexGeometry.prototype.apply.call(this,e,t,n)};TriList.prototype.draw=function(e){this.drawTextured(e)};TriList.prototype.buildBoundingTree=function(){var e=this.bbox.getAttribute("min").getValueDirect();var t=this.bbox.getAttribute("max").getValueDirect();this.boundingTree.setTriangles(this.getTriangles(),e,t);this.boundingTree.buildTree(this.approximationLevels.getValueDirect())};TriList.prototype.getTriangles=function(){var e=this.vertices.getValueDirect();var t=[];for(var n=0,r=0;r+8<e.length;n++,r+=9){t.push(new Triangle(e[r],e[r+1],e[r+2],e[r+3],e[r+4],e[r+5],e[r+6],e[r+7],e[r+8]))}return t};Material.prototype=new SGNode;Material.prototype.constructor=Material;Material.prototype.update=function(e,t){if(this.updateColor){this.updateColor=false;this.updateAmbientLevel=true;this.updateDiffuseLevel=true;this.updateSpecularLevel=true;this.updateEmissiveLevel=true}if(this.updateAmbientLevel||this.updateDiffuseLevel||this.updateSpecularLevel||this.updateEmissiveLevel){var n=this.color.getValueDirect();if(this.updateAmbientLevel){this.updateAmbientLevel=false;var r=this.ambientLevel.getValueDirect();this.ambient.setValueDirect(n.r*r,n.g*r,n.b*r,n.a)}if(this.updateDiffuseLevel){this.updateDiffuseLevel=false;var r=this.diffuseLevel.getValueDirect();this.diffuse.setValueDirect(n.r*r,n.g*r,n.b*r,n.a)}if(this.updateSpecularLevel){this.updateSpecularLevel=false;var r=this.specularLevel.getValueDirect();this.specular.setValueDirect(n.r*r,n.g*r,n.b*r,n.a)}if(this.updateEmissiveLevel){this.updateEmissiveLevel=false;var r=this.emissiveLevel.getValueDirect();this.emissive.setValueDirect(n.r*r,n.g*r,n.b*r,n.a)}}var i=this.opacity.getValueDirect();var s=false;if(this.updateOpacity){this.updateOpacity=false;this.lastOpacity=i;s=true}if(this.updateAmbient||s){this.updateAmbient=false;this.materialDesc.ambient.copy(this.ambient.getValueDirect());this.materialDesc.ambient.a*=i}if(this.updateDiffuse||s){this.updateDiffuse=false;this.materialDesc.diffuse.copy(this.diffuse.getValueDirect());this.materialDesc.diffuse.a*=i}if(this.updateSpecular||s){this.updateSpecular=false;this.materialDesc.specular.copy(this.specular.getValueDirect());this.materialDesc.specular.a*=i}if(this.updateEmissive||s){this.updateEmissive=false;this.materialDesc.emissive.copy(this.emissive.getValueDirect());this.materialDesc.emissive.a*=i}if(this.updateGlossiness||s){this.updateGlossiness=false;this.materialDesc.glossiness=this.glossiness.getValueDirect()}SGNode.prototype.update.call(this,e,t)};Material.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){SGNode.prototype.apply.call(this,e,t,n);return}this.graphMgr.setCurrentMaterial(this);switch(e){case"render":{t.opacity=this.lastOpacity;this.applyMaterialDesc()}break;case"rayPick":{t.doubleSided=this.lastDoubleSided;t.opacity=this.lastOpacity}break}SGNode.prototype.apply.call(this,e,t,n)};Material.prototype.applyMaterialDesc=function(){this.graphMgr.renderContext.setFrontMaterial(this.materialDesc);var e=this.doubleSided.getValueDirect();this.lastDoubleSided=e;if(e){this.graphMgr.renderContext.disable(eRenderMode.CullBackFace)}else{this.graphMgr.renderContext.enable(eRenderMode.CullBackFace)}};Surface.prototype=new Isolator;Surface.prototype.constructor=Surface;Surface.prototype.setGraphMgr=function(e){this.materialNode.setGraphMgr(e);this.colorTexturesNode.setGraphMgr(e);this.diffuseTexturesNode.setGraphMgr(e);this.luminosityTexturesNode.setGraphMgr(e);this.specularityTexturesNode.setGraphMgr(e);this.transparencyTexturesNode.setGraphMgr(e);Isolator.prototype.setGraphMgr.call(this,e)};Surface.prototype.update=function(e,t){Isolator.prototype.update.call(this,e,t)};Surface.prototype.apply=function(e,t,n){Isolator.prototype.apply.call(this,e,t,n)};Surface.prototype.connectMaterialAttributes=function(e){this.connectMaterialAttribute(e,this.color,"color");this.connectMaterialAttribute(e,this.ambientLevel,"ambientLevel");this.connectMaterialAttribute(e,this.diffuseLevel,"diffuseLevel");this.connectMaterialAttribute(e,this.specularLevel,"specularLevel");this.connectMaterialAttribute(e,this.emissiveLevel,"emissiveLevel");this.connectMaterialAttribute(e,this.ambient,"ambient");this.connectMaterialAttribute(e,this.diffuse,"diffuse");this.connectMaterialAttribute(e,this.specular,"specular");this.connectMaterialAttribute(e,this.emissive,"emissive");this.connectMaterialAttribute(e,this.glossiness,"glossiness");this.connectMaterialAttribute(e,this.opacity,"opacity");this.connectMaterialAttribute(e,this.doubleSided,"doubleSided")};Surface.prototype.connectMaterialAttribute=function(e,t,n){var r=this.getAttributeModificationCount(t)>0?true:false;t.addTarget(e.getAttribute(n),eAttrSetOp.Replace,null,r)};Surface.prototype.addTexture=function(e){this.colorTexturesNode.addChild(e)};Model.prototype=new ParentableMotionElement;Model.prototype.constructor=Model;Model.prototype.copyModel=function(e,t,n,r){var i=false;if(!e){if(!(e=new Model)){return-1}i=true}if(this.copyNode(e,t,n,r)){return-1}};Model.prototype.initializeSurfaceAttrConnectionsMap=function(){this.surfaceAttrConnections.push(new Pair(this.color,false));this.surfaceAttrConnections.push(new Pair(this.ambientLevel,false));this.surfaceAttrConnections.push(new Pair(this.diffuseLevel,false));this.surfaceAttrConnections.push(new Pair(this.specularLevel,false));this.surfaceAttrConnections.push(new Pair(this.emissiveLevel,false));this.surfaceAttrConnections.push(new Pair(this.ambient,false));this.surfaceAttrConnections.push(new Pair(this.diffuse,false));this.surfaceAttrConnections.push(new Pair(this.specular,false));this.surfaceAttrConnections.push(new Pair(this.emissive,false));this.surfaceAttrConnections.push(new Pair(this.glossiness,false));this.surfaceAttrConnections.push(new Pair(this.opacity,false));this.surfaceAttrConnections.push(new Pair(this.doubleSided,false));this.surfaceAttrConnections.push(new Pair(this.texturesEnabled,false));this.surfaceAttrConnections.push(new Pair(this.renderSequenceSlot,false))};Model.prototype.initializeGeometryAttrConnectionsMap=function(){this.geometryAttrConnections.push(new Pair(this.selectable,false));this.geometryAttrConnections.push(new Pair(this.cullable,false));this.geometryAttrConnections.push(new Pair(this.show,false));this.geometryAttrConnections.push(new Pair(this.approximationLevels,false));this.geometryAttrConnections.push(new Pair(this.showApproximationLevel,false));this.geometryAttrConnections.push(new Pair(this.sortPolygons,false));this.geometryAttrConnections.push(new Pair(this.flipPolygons,false));this.geometryAttrConnections.push(new Pair(this.intersector,false));this.geometryAttrConnections.push(new Pair(this.intersectee,false));this.geometryAttrConnections.push(new Pair(this.stationary,false));this.geometryAttrConnections.push(new Pair(this.shadowCaster,false));this.geometryAttrConnections.push(new Pair(this.shadowTarget,false))};Model.prototype.clearSurfaceAttrConnectionMap=function(){this.surfaceAttrConnections=[];this.initializeSurfaceAttrConnectionsMap()};Model.prototype.clearGeometryAttrConnectionsMap=function(){this.geometryAttrConnections=[];this.initializeGeometryAttrConnectionsMap()};Model.prototype.setGraphMgr=function(e){this.isolatorNode.setGraphMgr(e);this.dissolveNode.setGraphMgr(e);this.surfacesNode.setGraphMgr(e);ParentableMotionElement.prototype.setGraphMgr.call(this,e)};Model.prototype.update=function(e,t){if(this.updateBoundingTree){this.updateBoundingTree=false;this.buildBoundingTree()}ParentableMotionElement.prototype.update.call(this,e,t)};Model.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){ParentableMotionElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{var i=this.show.getValueDirect();if(!i){ParentableMotionElement.prototype.apply.call(this,e,t,n);return}this.pushMatrix();this.applyTransform();ParentableMotionElement.prototype.apply.call(this,e,t,n);this.popMatrix()}break;case"rayPick":{var s=new Matrix4x4;s.loadMatrix(t.worldMatrix);var o=new Vector3D(t.sectorOrigin.x,t.sectorOrigin.y,t.sectorOrigin.z);t.worldMatrix=t.worldMatrix.multiply(this.sectorTransformCompound);t.sectorOrigin.load(this.sectorOrigin.getValueDirect());ParentableMotionElement.prototype.apply.call(this,e,t,n);t.worldMatrix.loadMatrix(s);t.sectorOrigin.copy(o)}break;case"bbox":{var s=new Matrix4x4;s.loadMatrix(t.worldMatrix);t.worldMatrix.loadMatrix(this.sectorTransformCompound.multiply(t.worldMatrix));ParentableMotionElement.prototype.apply.call(this,e,t,n);t.worldMatrix.loadMatrix(s)}break;case"collide":{var s=new Matrix4x4;s.loadMatrix(t.worldMatrix);t.worldMatrix=t.worldMatrix.multiply(this.sectorTransformCompound);ParentableMotionElement.prototype.apply.call(this,e,t,n);if(this.detectCollision.getValueDirect()){this.boundingTree.setTransform(t.worldMatrix);t.detectCollisions[this.name.getValueDirect().join("")]=new CollideRec(this,this.boundingTree,t.worldMatrix);this.collisionDetected.setValueDirect(false)}t.worldMatrix.loadMatrix(s)}break;case"highlight":{if(this.highlight.getValueDirect()){var u=new HighlightTarget;u.projMatrix=t.projMatrix;u.viewMatrix=t.viewMatrix;u.worldMatrix=this.sectorTransformCompound.multiply(t.worldMatrix);u.camera=t.camera;u.viewport=t.viewport;u.center=this.center.getValueDirect();var a=this.highlightColor.getValueDirect();u.highlightColor_r=a.r;u.highlightColor_g=a.g;u.highlightColor_b=a.b;u.highlightColor_a=a.a;u.highlightWidth=this.highlightWidth.getValueDirect();t.targets.push(u);ParentableMotionElement.prototype.apply.call(this,e,t,n)}}break;default:{ParentableMotionElement.prototype.apply.call(this,e,t,n)}break}};Model.prototype.pushMatrix=function(){this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.pushMatrix()};Model.prototype.popMatrix=function(){this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.popMatrix();this.graphMgr.renderContext.applyModelViewTransform()};Model.prototype.addSurface=function(e){this.surfacesNode.addChild(e);this.registerAttribute(e,e.getAttribute("name").getValueDirect().join(""));this.connectSurfaceAttributes(e)};Model.prototype.addGeometry=function(e,t,n){n.addChild(e);this.connectGeometryAttributes(e);this.addGeometryBBox(e);this.geometry.push(e);this.geometryIndices.push(t);this.updateBoundingTree=true};Model.prototype.connectSurfaceAttributes=function(e){this.connectSurfaceAttribute(e,this.color,"color");this.connectSurfaceAttribute(e,this.ambientLevel,"ambientLevel");this.connectSurfaceAttribute(e,this.diffuseLevel,"diffuseLevel");this.connectSurfaceAttribute(e,this.specularLevel,"specularLevel");this.connectSurfaceAttribute(e,this.emissiveLevel,"emissiveLevel");this.connectSurfaceAttribute(e,this.ambient,"ambient");this.connectSurfaceAttribute(e,this.diffuse,"diffuse");this.connectSurfaceAttribute(e,this.specular,"specular");this.connectSurfaceAttribute(e,this.emissive,"emissive");this.connectSurfaceAttribute(e,this.glossiness,"glossiness");this.connectSurfaceAttribute(e,this.opacity,"opacity");this.connectSurfaceAttribute(e,this.doubleSided,"doubleSided");this.connectSurfaceAttribute(e,this.texturesEnabled,"texturesEnabled");this.connectSurfaceAttribute(e,this.enabled,"enabled")};Model.prototype.connectSurfaceAttribute=function(e,t,n){var r=this.getAttributeModificationCount(t)>0?true:false;t.addTarget(e.getAttribute(n),eAttrSetOp.Replace,null,r)};Model.prototype.connectGeometryAttributes=function(e){this.connectGeometryAttribute(e,this.name,"name");this.connectGeometryAttribute(e,this.selectable,"selectable");this.connectGeometryAttribute(e,this.cullable,"cullable");this.connectGeometryAttribute(e,this.show,"show");this.connectGeometryAttribute(e,this.approximationLevels,"approximationLevels");this.connectGeometryAttribute(e,this.sortPolygons,"sortPolygons");this.connectGeometryAttribute(e,this.flipPolygons,"flipPolygons");this.connectGeometryAttribute(e,this.shadowCaster,"shadowCaster");this.connectGeometryAttribute(e,this.shadowTarget,"shadowTarget");this.connectGeometryAttribute(e,this.renderSequenceSlot,"renderSequenceSlot");this.connectGeometryAttribute(e,this.highlight,"highlight")};Model.prototype.connectGeometryAttribute=function(e,t,n){var r=this.getAttributeModificationCount(t)>0?true:false;t.addTarget(e.getAttribute(n),eAttrSetOp.Replace,null,r)};Model.prototype.addGeometryBBox=function(e){if(e==null||e==undefined)return;e.bbox.min.addModifiedCB(Model_GeometryBBoxModifiedCB,this);e.bbox.max.addModifiedCB(Model_GeometryBBoxModifiedCB,this);this.updateGeometryBBox(e)};Model.prototype.updateGeometryBBox=function(e){if(e==null||e==undefined)return;var t=e.bbox.min.getValueDirect();var n=e.bbox.max.getValueDirect();this.geometryBBoxesMap.push(new Pair(t,n));this.updateBBox()};Model.prototype.updateBBox=function(){var e=new Vector3D;var t=new Vector3D;var n=true;for(var r in this.geometryBBoxesMap){if(n){e.x=this.geometryBBoxesMap[r].first.x;e.y=this.geometryBBoxesMap[r].first.y;e.z=this.geometryBBoxesMap[r].first.z;t.x=this.geometryBBoxesMap[r].second.x;t.y=this.geometryBBoxesMap[r].second.y;t.z=this.geometryBBoxesMap[r].second.z;n=false;continue}e.x=Math.min(e.x,this.geometryBBoxesMap[r].first.x);e.y=Math.min(e.y,this.geometryBBoxesMap[r].first.y);e.z=Math.min(e.z,this.geometryBBoxesMap[r].first.z);t.x=Math.max(t.x,this.geometryBBoxesMap[r].second.x);t.y=Math.max(t.y,this.geometryBBoxesMap[r].second.y);t.z=Math.max(t.z,this.geometryBBoxesMap[r].second.z)}this.bbox.min.setValueDirect(e.x,e.y,e.z);this.bbox.max.setValueDirect(t.x,t.y,t.z);var i=new Vector3D((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2);this.center.setValueDirect(i.x,i.y,i.z);this.updateBoundingTree=true};Model.prototype.buildBoundingTree=function(){var e=[];for(var t=0;t<this.geometry.length;t++){e=e.concat(this.geometry[t].getTriangles())}this.boundingTree=new Octree;this.boundingTree.setTriangles(e,this.bbox.min.getValueDirect(),this.bbox.max.getValueDirect());this.boundingTree.buildTree(this.approximationLevels.getValueDirect())};Model.prototype.autoDisplayListModified=function(){};Texture.prototype=new ParentableMotionElement;Texture.prototype.constructor=Texture;Texture.prototype.setGraphMgr=function(e){this.textureObj=e.renderContext.createTextureObject();ParentableMotionElement.prototype.setGraphMgr.call(this,e)};Texture.prototype.update=function(e,t){if(this.updateImage){this.updateImage=false;this.setImage=true}if(this.updateMipmappingEnabled){if(this.imageSet){this.setImage=true;this.updateMipmappingEnabled=false}}if(this.setImage){this.setImage=!this.SetImage()}if(this.updatePosition||this.updateRotation||this.updateScale){ParentableMotionElement.prototype.update.call(this,e,t)}else{SGNode.prototype.update.call(this,e,t)}};Texture.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){ParentableMotionElement.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{if(this.imageSet){var i=t.drawTextures&&this.graphMgr.getDrawTextures();if(i){var s=this.graphMgr.textureArrayStack.top().textures;var o=this.textureType.getValueDirect();if(s[o]){s[o].push(this)}}}}break}ParentableMotionElement.prototype.apply.call(this,e,t,n)};Texture.prototype.SetImage=function(){var e=this.image.width.getValueDirect();var t=this.image.height.getValueDirect();var n=this.image.pixelFormat.getValueDirect();var r=this.image.pixels.getValueDirect();if(e==0||t==0||n==ePixelFormat.Unknown||r==null){return false}var i;switch(this.textureType.getValueDirect()){case eTextureType.Diffuse:case eTextureType.Luminosity:case eTextureType.Specularity:case eTextureType.Transparency:i=eImageFormat.Alpha;break;case eTextureType.Color:default:i=eImageFormat.RGBA;break}this.textureObj.setImageData(e,t,n,i,r);this.imageSet=true;return true};MediaTexture.prototype=new Texture;MediaTexture.prototype.constructor=MediaTexture;MediaTexture.prototype.setGraphMgr=function(e){Texture.prototype.setGraphMgr.call(this,e)};MediaTexture.prototype.update=function(e,t){if(this.updateImageFilename||this.updateAlphaFilename){this.updateImageFilename=false;this.updateAlphaFilename=false;this.frame.setValueDirect(-1);this.loadMedia()}if(this.updateTextureType){this.updateTextureType=false;this.setImageSize();this.forceImageUpdate=true}if(this.updateNegateImage){this.updateNegateImage=false;this.forceImageUpdate=true}if(this.updateNegateAlpha){this.updateNegateAlpha=false;this.forceImageUpdate=true}if(this.enabled.getValueDirect()){this.updateMediaTextureImage()}Texture.prototype.update.call(this,e,t)};MediaTexture.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){Texture.prototype.apply.call(this,e,t,n);return}Texture.prototype.apply.call(this,e,t,n)};MediaTexture.prototype.loadMedia=function(){var e=this.imageFilename.getValueDirect().join("");if(e&&e!=""&&!this.imagePlayback||this.imagePlayback&&this.imagePlayback.url!=e){this.imagePlayback=new MediaPlayback(this,MediaTexture_OnImageLoad);this.imagePlayback.container=this;this.imagePlayback.loadImage(e)}else if(e==""){}var t=this.alphaFilename.getValueDirect().join("");if(t&&t!=""&&!this.alphaPlayback||this.alphaPlayback&&this.alphaPlayback.url!=t){this.alphaPlayback=new MediaPlayback(this,MediaTexture_OnAlphaLoad);this.alphaPlayback.container=this;this.alphaPlayback.loadImage(t);if(this.imagePlayback){this.imagePlayback.setAlphaChannel(this.alphaPlayback)}}else if(t==""){}this.incrementModificationCount()};MediaTexture.prototype.setImageSize=function(){if(this.textureType.getValueDirect()==eTextureType.Color&&!this.alphaPlayback){return}if(!this.imagePlayback){return}var e=this.imagePlayback.getFrameDimensions();var t=nextHighestPowerOfTwo(e.width);var n=nextHighestPowerOfTwo(e.height);var r;switch(this.textureType.getValueDirect()){case eTextureType.Diffuse:case eTextureType.Luminosity:case eTextureType.Specularity:case eTextureType.Transparency:case eTextureType.Clip:r=ePixelFormat.A8;this.pixelMap=ePixelMap.RGBToAlpha;break;case eTextureType.Color:default:r=this.imagePlayback.getPixelFormat();this.pixelMap=ePixelMap.Default;break}if(this.alphaPlayback){switch(r){case ePixelFormat.R8G8B8:r=ePixelFormat.R8G8B8A8;break;case ePixelFormat.B8G8R8:r=ePixelFormat.B8G8R8A8;break}}var i=this.imagePlayback.getPixelByteAlignment();this.pitch=t*BytesPerPixel(r);this.pitch+=(i-this.pitch%i)%i;this.image.width.setValueDirect(t);this.image.height.setValueDirect(n);this.image.pixelFormat.setValueDirect(r);this.image.byteAlignment.setValueDirect(i);this.image.pixels.setLength(n*this.pitch)};MediaTexture.prototype.updateMediaTextureImage=function(){if(this.textureType.getValueDirect()==eTextureType.Color&&!this.alphaPlayback){return}if(this.imagePlayback&&this.imagePlayback.ready&&(this.imagePlayback.newFrameDataAvailable()||this.alphaPlayback&&this.alphaPlayback.newFrameDataAvailable()||this.forceImageUpdate)){var e=this.image.width.getValueDirect();var t=this.image.height.getValueDirect();var n=this.image.pixelFormat.getValueDirect();var r=FRAME_FILTER_SCALE_FRAME_BIT;if(this.negateImage.getValueDirect()){r|=FRAME_FILTER_NEGATE_COLOR_BIT}if(this.negateAlpha.getValueDirect()){r|=FRAME_FILTER_NEGATE_ALPHA_BIT}var i=this.imagePlayback.getFrameData(e,t,this.pitch,n,this.image.pixels.values,r,this.pixelMap,this.frame.getValueDirect());this.frameRetrieved.setValueDirect(i);this.forceImageUpdate=false}this.incrementModificationCount()};MediaTexture.prototype.onImageLoad=function(){if(this.textureType.getValueDirect()==eTextureType.Color&&!this.alphaPlayback){this.textureObj.setImage(this.imagePlayback.htmlImageElement,ePixelFormat.R8G8B8A8,eImageFormat.RGBA);this.imageSet=true;this.incrementModificationCount();return}this.setImageSize()};MediaTexture.prototype.onAlphaLoad=function(){};MediaTexture.prototype.onVideoLoad=function(){this.textureObj.setVideo(this.htmlImageElement);this.textureObj.negate=this.negateImage.getValueDirect();this.imageSet=true};Evaluator.prototype=new Node;Evaluator.prototype.constructor=Evaluator;Evaluator.prototype.evaluate=function(){};Evaluator.prototype.update=function(e,t){var n=this.enabled.getValueDirect();var r=this.expired.getValueDirect();if(n&&!r){this.evaluate()}Node.prototype.update.call(this,e,t)};SceneInspector.prototype=new Evaluator;SceneInspector.prototype.constructor=SceneInspector;SceneInspector.prototype.setCamera=function(e){this.camera=e};SceneInspector.prototype.getCamera=function(){return this.camera};SceneInspector.prototype.evaluate=function(){var e=this.enabled.getValueDirect();if(!e){return}var t=this.viewPosition.getValueDirect();var n=this.viewRotation.getValueDirect();var r=this.translationDelta.getValueDirect();var i=this.panDelta.getValueDirect();var s=this.trackDelta.getValueDirect();var o=this.rotationDelta.getValueDirect();var u=this.viewRelativeXAxisRotation.getValueDirect();var a=this.viewRelativeYAxisRotation.getValueDirect();var f=this.viewRelativeZAxisRotation.getValueDirect();var l=this.pivotDistance.getValueDirect();var c=new Matrix4x4;c.loadTranslation(-t.x,-t.y,-t.z);var h=new Matrix4x4;h.loadXYZAxisRotation(-n.x,-n.y,-n.z);var p=c.multiply(h);var d=this.transformDirectionVector(0,1,0,p);var v=this.transformDirectionVector(1,0,0,p);var m=this.transformDirectionVector(0,0,1,p);var g=new Matrix4x4;var y=new Matrix4x4;var b=new Matrix4x4;if(u){g.loadRotation(v.x,v.y,v.z,-o.x)}else{g.loadXAxisRotation(-o.x)}if(a){y.loadRotation(d.x,d.y,d.z,-o.y)}else{y.loadYAxisRotation(-o.y)}if(f){b.loadRotation(m.x,m.y,m.z,-o.z)}else{b.loadXAxisRotation(-o.z)}var w=y.multiply(g.multiply(b));var E=new Matrix4x4;E.loadTranslation(r.x,-r.y,-r.z);if(i.x!=0||i.y!=0||i.z!=0||s.x!=0||s.y!=0||s.z!=0){var S=this.upVector.getValueDirect();var x=this.rightVector.getValueDirect();var T=this.forwardVector.getValueDirect();if(S.x==0&&S.y==0&&S.z==0)S=d;if(x.x==0&&x.y==0&&x.z==0)x=v;if(T.x==0&&T.y==0&&T.z==0)T=m;var N=S;var C=x;var k=T;var L=new Matrix4x4;L.loadTranslation(C.x*i.x+N.x*-i.y+k.x*-i.z,C.y*i.x+N.y*-i.y+k.y*-i.z,C.z*i.x+N.z*-i.y+k.z*-i.z);E=E.multiply(L);var A=new Matrix4x4;var O=new Matrix4x4;var M=false;var _=Math.abs(n.y);var D=Math.abs(n.x);var P=Math.abs(n.z);if(n.z>=90&&n.z<=270){M=true}else if(n.z<=-90&&n.z>=-270){M=true}else{if(n.x<=-45||n.x>=45&&n.x<=90){M=true}}var H=k;O.loadRotation(C.x,C.y,C.z,n.x);k=this.transformDirectionVector(k.x,k.y,k.z,O);var B=toDegrees(Math.acos(cosineAngleBetween(H,k)));O.loadRotation(C.x,C.y,C.z,90);N=this.transformDirectionVector(N.x,N.y,N.z,O);A.loadTranslation(C.x*s.x+N.x*-s.y+k.x*-s.z,C.y*s.x+N.y*-s.y+0,C.z*s.x+N.z*-s.y+k.z*-s.z);E=E.multiply(A)}var j=new Matrix4x4;j.loadMatrix(p);j.invert();var F=new Vector3D;F.load(j._41,j._42,j._43);var I=new Vector3D;I.load(F.x+m.x*l,F.y+m.y*l,F.z+m.z*l);this.pivotPointWorld.setValueDirect(I.x,I.y,I.z);var q=new Matrix4x4;var R=new Matrix4x4;q.loadTranslation(-I.x,-I.y,-I.z);R.loadTranslation(I.x,I.y,I.z);var U=E.multiply(q.multiply(w.multiply(R.multiply(p))));var z=U.getRotationAngles();var W=new Vector3D;W.load(U._41,U._42,U._43);U.transpose();W=U.transform(W.x,W.y,W.z,0);this.resultPosition.setValueDirect(this.affectPosition_X.getValueDirect()?-W.x:t.x,this.affectPosition_Y.getValueDirect()?-W.y:t.y,this.affectPosition_Z.getValueDirect()?-W.z:t.z);this.resultRotation.setValueDirect(this.affectRotation_X.getValueDirect()?-z.x:n.x,this.affectRotation_Y.getValueDirect()?-z.y:n.y,this.affectRotation_Z.getValueDirect()?-z.z:n.z)};SceneInspector.prototype.transformDirectionVector=function(e,t,n,r){var i=new Matrix4x4;i.loadMatrix(r);i.transpose();return i.transform(e,t,n,0)};ArcballInspector.prototype=new Evaluator;ArcballInspector.prototype.constructor=ArcballInspector;ArcballInspector.prototype.evaluate=function(){if(!this.enabled.getValueDirect()){return}var e=this.sphereCenter.getValueDirect();var t=this.sphereRadius.getValueDirect();var n=this.mouseDown.getValueDirect();var r=this.mouseNow.getValueDirect();var i=this.quatAtMouseDown.getValueDirect();var s=this.viewport;var o=this.worldTransform.getValueDirect();var u=this.viewTransform.getValueDirect();o.invert();u=u.multiply(o);var a=this.constrainToAxis.getValueDirect();e.x=2*(e.x-s.x)/s.width-1;e.y=2*(s.height-e.y-s.y)/s.height-1;n.x=2*(n.x-s.x)/s.width-1;n.y=2*(s.height-n.y-s.y)/s.height-1;r.x=2*(r.x-s.x)/s.width-1;r.y=2*(s.height-r.y-s.y)/s.height-1;var f,l;if(!a){f=this.getSpherePoint(n,e,t);l=this.getSpherePoint(r,e,t)}else{var c=this.constraintAxis.getValueDirect();f=this.getSpherePointAboutAxis(n,e,t,c);l=this.getSpherePointAboutAxis(r,e,t,c)}var h=u.transform(f.x,f.y,f.z,0);var p=u.transform(l.x,l.y,l.z,0);f.x=h.x;f.y=h.y;f.z=h.z;l.x=p.x;l.y=p.y;l.z=p.z;f.normalize();l.normalize();var d=this.getQuatFromSpherePoints(f,l);d=d.multiply(i);this.resultQuat.setValueDirect(d)};ArcballInspector.prototype.getSpherePoint=function(e,t,n){var r=new Vector3D;r.x=(e.x-t.x)/n;r.y=(e.y-t.y)/n;var i=r.x*r.x+r.y*r.y;if(i>1){var s=1/Math.sqrt(i);r.x*=s;r.y*=s;r.z=0}else{r.z=-Math.sqrt(1-i)}return r};ArcballInspector.prototype.getSpherePointAboutAxis=function(e,t,n,r){point=this.getSpherePoint(e,t,n);var i=dotProduct(point,r);r.multiplyScalar(i);var s=new Vector3D(point.x,point.y,point.z);s.subtractVector(r);var o=magnitude(s.x,s.y,s.z);point=null;if(o>0){var u=1/Math.sqrt(o);if(s.z<0){s.x=-s.x;s.y=-s.y;s.z=-s.z}point=s.multiplyScalar(u)}else if(r.z==1){point=new Vector3D(1,0,0)}else{point.normalize()}};ArcballInspector.prototype.getQuatFromSpherePoints=function(e,t){var n=new Quaternion;n.x=e.y*t.z-e.z*t.y;n.y=e.z*t.x-e.x*t.z;n.z=e.x*t.y-e.y*t.x;n.w=e.x*t.x+e.y*t.y+e.z*t.z;return n};KeyframeInterpolator.prototype=new Evaluator;KeyframeInterpolator.prototype.constructor=KeyframeInterpolator;KeyframeInterpolator.prototype.setNumChannels=function(e){this.channels.resize(0);this.startKeys.resize(0);this.endKeys.resize(0);this.preBehaviors.resize(0);this.postBehaviors.resize(0);this.resultValues.resize(0);for(var t=0;t<e;t++){this.channels.push_back(new KeyframesAttr);this.startKeys.push_back(new NumberAttr(-1));this.endKeys.push_back(new NumberAttr(-1));this.preBehaviors.push_back(new NumberAttr(eEndBehavior.Reset));this.postBehaviors.push_back(new NumberAttr(eEndBehavior.Reset));this.resultValues.push_back(new NumberAttr(0))}};KeyframeInterpolator.prototype.evaluate=function(){if(!this.endState.initialized){this.updateEndState();this.endState.initialized=true}var e=this.time.getValueDirect();var t,n;var r,i;for(var s=0;s<this.channels.vector.length;s++){var o=this.channels.getAt(s);if(o.vector.length==0)continue;t=this.endState.startKeyIts[s];n=this.endState.endKeyIts[s];r=this.preBehaviors.getAt(s).getValueDirect();i=this.postBehaviors.getAt(s).getValueDirect();var u=interpolate(e,o,t,n,r,i);this.resultValues.getAt(s).setValueDirect(u)}this.lastTime=e;this.evaluated=true};KeyframeInterpolator.prototype.timeModified=function(){this.updateExpired()};KeyframeInterpolator.prototype.updateExpired=function(){this.expired.setValueDirect(false);var e=false;var t=this.time.getValueDirect();var n=0;var r=null;var i=this.channels.vector.length;for(var s=0;s<i;s++){r=this.postBehaviors.getAt(s);if(r){n=r.getValueDirect()}if(n!=eEndBehavior.Constant){e=true;break}}if(!e&&(t<this.endState.startTime||t>this.endState.endTime)){this.expired.setValueDirect(true)}};KeyframeInterpolator.prototype.updateEndState=function(){var e=-1;var t=-1;var n=FLT_MAX;var r=-FLT_MAX;var i=-1,s=-1;var o=null;var u=this.channels.vector.length;this.startKeys.resize(u);this.endKeys.resize(u);for(var a=0;a<u;a++){o=this.channels.getAt(a);i=this.startKeys.vector.length>a?this.startKeys.getAt(a).getValueDirect():-1;s=this.endKeys.vector.length>a?this.endKeys.getAt(a).getValueDirect():-1;if(s<i){s=i}this.endState.startKeyIts[a]=o.getAt(0);this.endState.endKeyIts[a]=o.getAt(o.vector.length-1);if(!this.endState.startKeyIts[a]||!this.endState.endKeyIts[a])continue;if(i>=0&&i<o.vector.length){this.endState.startKeyIts[a]=o.getAt(i)}if(s>=0&&s<o.vector.length){this.endState.endKeyIts[a]=o.getAt(s)}e=this.endState.startKeyIts[a].getTime();t=this.endState.endKeyIts[a].getTime();n=e<n?e:n;r=t>=r?t:r}this.endState.startTime=n;this.endState.endTime=r};BBoxLocator.prototype=new Evaluator;BBoxLocator.prototype.constructor=BBoxLocator;BBoxLocator.prototype.evaluate=function(){var e=this.viewPosition.getValueDirect();var t=this.viewTransform.getValueDirect();var n=this.viewVolume.left.getValueDirect();var r=this.viewVolume.right.getValueDirect();var i=this.viewVolume.top.getValueDirect();var s=this.viewVolume.bottom.getValueDirect();var o=this.viewVolume.near.getValueDirect();var u=this.viewVolume.far.getValueDirect();var a=this.viewport.getValueDirect();var f=this.bbox.min.getValueDirect();var l=this.bbox.max.getValueDirect();var c=this.closeness.getValueDirect();if(c!=0){var h=l.x-f.x;var p=l.y-f.y;h+=h*c;p+=p*c;if(a.width/a.height<h/p){h=(h-(l.x-f.x))/2;f.x-=h;l.x+=h}else{p=(p-(l.y-f.y))/2;f.y-=p;l.y+=p}}var d=new Array(8);d[0]=new Vector3D(f.x,f.y,f.z);d[1]=new Vector3D(f.x,f.y,l.z);d[2]=new Vector3D(f.x,l.y,f.z);d[3]=new Vector3D(f.x,l.y,l.z);d[4]=new Vector3D(l.x,f.y,f.z);d[5]=new Vector3D(l.x,f.y,l.z);d[6]=new Vector3D(l.x,l.y,f.z);d[7]=new Vector3D(l.x,l.y,l.z);var v=new Vector3D((f.x+l.x)/2,(f.y+l.y)/2,(f.z+l.z)/2);var m=new Vector3D;m.copy(t.transform(0,0,1,0));m.normalize();var g=0;var y;var b=planesIntersect(n,r);if(b){var w=new Array(5);w[0]=this.getPlane(n.point,v,n.normal,t);w[1]=this.getPlane(r.point,v,r.normal,t);w[2]=this.getPlane(i.point,v,i.normal,t);w[3]=this.getPlane(s.point,v,s.normal,t);w[4]=this.getPlane(o.point,v,o.normal,t);for(var E=0;E<8;E++){for(var S=0;S<5;S++){if(pointOnPositiveSideOfPlane(d[E],w[S])){var x=this.distanceFromPlane(d[E],m,w[S]);if(x.intersection){g=Math.max(g,x.distance)}}}}y=new Vector3D(v.x,v.y,v.z);m.multiplyScalar(g);y.subtractVector(m)}else{y=new Vector3D(v.x,v.y,v.z);g=magnitude(e.x,e.y,e.z);m.multiplyScalar(g);y.subtractVector(m);var T=this.bboxView.min.getValueDirect();var N=this.bboxView.max.getValueDirect();var C=distanceBetweenPlanes(r,n);var k=distanceBetweenPlanes(i,s);var L=C/k;var A=Math.abs(N.x-T.x);var O=Math.abs(N.y-T.y);if(A>O){C=A;k=C/L;if(k<O){k=O;C=k*L}}else{k=O;C=k*L;if(C<A){C=A}}this.resultWidth.setValueDirect(C)}this.resultPosition.setValueDirect(y.x,y.y,y.z);g=0;for(var E=0;E<8;E++){var M=t.transform(d[E].x,d[E].y,d[E].z,1);g=Math.max(g,distanceBetween(d[E],y))}this.resultFarDistance.setValueDirect(this.nearDistance.getValueDirect()+g);g=distanceBetween(y,new Vector3D(v.x,v.y,v.z));this.resultPivotDistance.setValueDirect(g)};BBoxLocator.prototype.getPlane=function(e,t,n,r){var i=r.transformVector3D(e,0);i.x+=t.x;i.y+=t.y;i.z+=t.z;var s=r.transformVector3D(n,0);var o=new Plane(new Vector3D(i.x,i.y,i.z),new Vector3D(s.x,s.y,s.z));return o};BBoxLocator.prototype.distanceFromPlane=function(e,t,n){var r=new Line(e,t);var i;var s=lineIntersectsPlane(r,n);switch(s.result){case 0:i=FLT_MAX;break;case 1:i=distanceBetween(e,s.point);break;case 2:default:i=0;break}return{intersection:s.result,distance:i}};RasterComponent.prototype=new ParentableMotionElement;RasterComponent.prototype.constructor=RasterComponent;RasterComponent.prototype.setRegistry=function(e){var t=e.find("Bridgeworks");if(t){this.rcEventListener=t.rasterComponentEventListener;if(this.rcEventListener){this.rcEventListener.registerComponent(this);this.rcEventListener.Listen(this)}}ParentableMotionElement.prototype.setRegistry.call(this,e)};RasterComponent.prototype.isSelected=function(e,t){var n=this.show.getValueDirect();if(n){if(this.screenRect.containsPoint(e,t)){return true}}return false};RasterComponent.prototype.stylesMapSizeModified=function(){var e=this.stylesMap.Size();for(var t=0;t<e;t++){var n=this.stylesMap.getAt(t);if(n){n.event.removeModifiedCB(RasterComponent_StylesMapElementEventModifiedCB,this);n.event.addModifiedCB(RasterComponent_StylesMapElementEventModifiedCB,this);RasterComponent_StylesMapElementEventModifiedCB(n.event,this)}}};RasterComponent.prototype.stylesMapElementEventModified=function(e){this.rcEventListener.listenEvent(this,eEventNameMap[e])};RasterComponent.prototype.showModified=function(){};Label.prototype=new RasterComponent;Label.prototype.constructor=Label;Label.prototype.setGraphMgr=function(e){RasterComponent.prototype.setGraphMgr.call(this,e);this.id="Label"+this.graphMgr.getNextLabelIndex();this.labelId=this.id+"_label";this.iconId=this.id+"_icon";var t=CreateHTMLLabel(this.id,this.labelId,this.iconId);this.htmlLabel=t.label;this.htmlIconImg=t.iconImg;this.htmlIconDiv=t.iconDiv;this.htmlIconImg.baseWidth=0;this.htmlIconImg.baseHeight=0;Label_LabelStyleBackgroundColorModifiedCB(this.labelStyle.backgroundColor,this);Label_LabelStyleBackgroundOpacityModifiedCB(this.labelStyle.backgroundOpacity,this);Label_LabelStyleFontBorderModifiedCB(null,this);Label_LabelStyleFontStyleColorModifiedCB(this.labelStyle.fontStyle.color,this);Label_LabelStyleFontStyleFontModifiedCB(this.labelStyle.fontStyle.font,this);Label_LabelStyleFontStyleOpacityModifiedCB(this.labelStyle.fontStyle.opacity,this);Label_LabelStyleFontStyleSizeModifiedCB(this.labelStyle.fontStyle.size,this);Label_LabelStyleFontStyleStyleModifiedCB(this.labelStyle.fontStyle.style,this);Label_LabelStyleFormatModifiedCB(this.labelStyle.format,this);Label_LabelStylePaddingModifiedCB(this.labelStyle.padding,this);Label_IconStyleUrlModifiedCB(this.iconStyle.url,this)};Label.prototype.update=function(e,t){this.updateIconScale();RasterComponent.prototype.update.call(this,e,t)};Label.prototype.updateIconScale=function(){var e=this.iconStyle.scale.getValueDirect();if(this.htmlIconImg.baseWidth==0){this.htmlIconImg.baseWidth=this.htmlIconImg.offsetWidth;this.htmlIconImg.baseHeight=this.htmlIconImg.offsetHeight}if(this.htmlIconImg.baseWidth){this.htmlIconImg.width=this.htmlIconImg.baseWidth*e.x;this.htmlIconImg.height=this.htmlIconImg.baseHeight*e.y}};Label.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){RasterComponent.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{this.draw(t.viewport)}break;case"rayPick":{if(this.selectable.getValueDirect()==true&&this.show.getValueDirect()==true){if(this.isSelected(t.clickPoint.x,t.clickPoint.y)){var i=new RayIntersectRecord;i.distance=0;t.currentNodePath.push(this);t.directive.addPickRecord(new RayPickRecord(t.currentNodePath,i,t.camera));t.currentNodePath.pop()}}}break}RasterComponent.prototype.apply.call(this,e,t,n)};Label.prototype.draw=function(e){var t=this.registry.find("Bridgeworks");if(this.show.getValueDirect()==false){this.htmlLabel.style.visibility="hidden";this.htmlIconImg.style.visibility="hidden";return}this.htmlLabel.style.visibility="visible";this.htmlIconImg.style.visibility="visible";if(this.labelStyle.fontStyle.opacity.getValueDirect()==0){this.htmlLabel.style.visibility="hidden"}var n=this.iconStyle.color.getValueDirect();if(n.a==0||this.iconStyle.opacity.getValueDirect()==0){this.htmlIconImg.style.visibility="hidden"}var r=this.getRenderingPositions();var i=this.htmlLabel.offsetWidth;var s=this.htmlLabel.offsetHeight;var o=this.htmlIconImg.offsetWidth;var u=this.htmlIconImg.offsetHeight;if(r.labelX<0||r.labelY<0||r.labelX+i>t.canvas.width||r.labelY+s>t.canvas.height){this.htmlLabel.style.visibility="hidden"}if(r.iconX<0||r.iconY<0||r.iconX+o>t.canvas.width||r.iconY+u>t.canvas.height){this.htmlIconImg.style.visibility="hidden"}if(this.htmlLabel.style.visibility=="visible"){this.htmlLabel.style.left=t.canvas.offsetLeft+r.labelX;this.htmlLabel.style.top=t.canvas.offsetTop+r.labelY;this.labelRect.load(t.canvas.offsetLeft+r.labelX,t.canvas.offsetTop+r.labelY,this.labelRect.left+i,this.labelRect.top+s)}else{this.labelRect.load(0,0,0,0)}if(this.htmlIconImg.style.visibility=="visible"){this.htmlIconDiv.style.left=t.canvas.offsetLeft+r.iconX;this.htmlIconDiv.style.top=t.canvas.offsetTop+r.iconY;this.iconRect.load(t.canvas.offsetLeft+r.iconX,t.canvas.offsetTop+r.iconY,this.iconRect.left+o,this.iconRect.top+u)}else{this.iconRect.load(0,0,0,0)}var a=new Rect(0,0,0,0);if(this.htmlLabel.style.visibility=="visible"&&this.htmlIconImg.style.visibility=="visible"){a.left=Math.min(this.labelRect.left,this.iconRect.left);a.top=Math.min(this.labelRect.top,this.iconRect.top);a.right=Math.max(this.labelRect.right,this.iconRect.right);a.bottom=Math.max(this.labelRect.bottom,this.iconRect.bottom)}else if(this.htmlLabel.style.visibility=="visible"){a.loadRect(this.labelRect)}else if(this.htmlIconImg.style.visibility=="visible"){a.loadRect(this.iconRect)}this.screenRect.setValueDirect(a)};Label.prototype.getRenderingPositions=function(){var e=0;var t=0;var n=0;var r=0;var i=this.screenPosition.getValueDirect();var s=this.anchor.getValueDirect();var o=this.labelStyle.offset.getValueDirect();if(this.htmlIconImg.offsetWidth>0&&this.htmlLabel.offsetWidth>0){var u=this.htmlLabel.offsetWidth;var a=this.htmlLabel.offsetHeight;var f=this.htmlIconImg.offsetWidth;var l=this.htmlIconImg.offsetHeight;if(this.origin.getValueDirect().join("")=="bottomLeft"){s.y=l-s.y}n=i.x-s.x;r=i.y-s.y;e=n+o.x;t=r+o.y;switch(this.labelStyle.textAlign.getValueDirect().join("")){case"topLeft":e-=u;t-=a/2;break;case"middleLeft":e-=u;t+=l/2-a/2;break;case"bottomLeft":e-=u;t+=l-a/2;break;case"topCenter":e+=f/2-u/2;t-=a;break;case"middleCenter":e+=f/2-u/2;t+=l/2-a/2;break;case"bottomCenter":e+=f/2-u/2;t+=l;break;case"topRight":e+=f;t-=a/2;break;case"bottomRight":e+=f;t+=l-a/2;break;case"middleRight":default:e+=f;t+=l/2-a/2;break}}else if(this.htmlLabel.offsetWidth>0){var u=this.htmlLabel.offsetWidth;var a=this.htmlLabel.offsetHeight;e=i.x+s.x+o.x;t=i.y-s.y+o.y;switch(this.labelStyle.textAlign.getValueDirect().join("")){case"topLeft":e-=u;t-=a;break;case"middleLeft":e-=u;t-=a/2;break;case"bottomLeft":e-=u;break;case"topCenter":e-=u/2;t-=a;break;case"middleCenter":e-=u/2;t-=a/2;break;case"bottomCenter":e-=u/2;break;case"topRight":t-=a;break;case"bottomRight":break;case"middleRight":default:t-=a/2;break}}else{var f=this.htmlIconImg.offsetWidth;var l=this.htmlIconImg.offsetHeight;s.y=l-s.y;n=i.x-s.x;r=i.y-s.y}return{labelX:e,labelY:t,iconX:n,iconY:r}};Label.prototype.eventPerformed=function(e){if(!this.show.getValueDirect()){return false}var t=this.isSelected(e.x,e.y);return t};Label.prototype.labelStyleFontBorderModified=function(){var e=this.labelStyle.fontStyle.borderColor.getValueDirect();e.a*=this.labelStyle.fontStyle.opacity.getValueDirect();var t=this.labelStyle.fontStyle.borderWidth.getValueDirect();var n="";for(var r=0;r<e.a;r+=.2){if(r>0)n+=", ";n+="rgba("+e.r*255+","+e.g*255+","+e.b*255+","+e.a+")"+" 0px 0px "+t*2+"px"}this.htmlLabel.style.textShadow=n};BalloonTipLabel.prototype=new RasterComponent;BalloonTipLabel.prototype.constructor=BalloonTipLabel;BalloonTipLabel.prototype.setGraphMgr=function(e){RasterComponent.prototype.setGraphMgr.call(this,e);this.id="BalloonTipLabel"+this.graphMgr.getNextBalloonTipLabelIndex();var t=CreateHTMLBalloonTipLabel(this.id);this.htmlBalloonTipLabel=t.label;this.qtip=t.qtip;this.qtip_api=$("a[id="+this.id+"]").qtip("api")};BalloonTipLabel.prototype.update=function(e,t){if(e.userData){var n=e.userData;if(this.show.getValueDirect()){this.updateLabel=false}}RasterComponent.prototype.update.call(this,e,t)};BalloonTipLabel.prototype.apply=function(e,t,n){var r=this.enabled.getValueDirect();if(!r){RasterComponent.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{this.draw(t.viewport)}break}RasterComponent.prototype.apply.call(this,e,t,n)};BalloonTipLabel.prototype.updateLabel=function(e){};BalloonTipLabel.prototype.updateLabelDimensions=function(e){};BalloonTipLabel.prototype.updateShowStates=function(){};BalloonTipLabel.prototype.draw=function(){if(!this.show.getValueDirect()){if(this.graphMgr.getCurrentBalloonTipLabel()==this){this.graphMgr.setCurrentBalloonTipLabel(null)}return}this.graphMgr.setCurrentBalloonTipLabel(this);var e=this.registry.find("Bridgeworks");var t=this.getRenderingPositions();var n=this.htmlBalloonTipLabel.offsetWidth;var r=this.htmlBalloonTipLabel.offsetHeight;{this.htmlBalloonTipLabel.style.left=e.canvas.offsetLeft+t.labelX;this.htmlBalloonTipLabel.style.top=e.canvas.offsetTop+t.labelY;this.labelRect.load(e.canvas.offsetLeft+t.labelX,e.canvas.offsetTop+t.labelY,this.labelRect.left+n,this.labelRect.top+r);if(this.qtip_api){this.qtip_api.reposition(null,false)}}var i=new Rect(0,0,0,0);{i.loadRect(this.labelRect)}this.screenRect.setValueDirect(i)};BalloonTipLabel.prototype.getRenderingPositions=function(){var e=0;var t=0;var n=this.screenPosition.getValueDirect();var r=this.anchor.getValueDirect();e=n.x+r.x;t=n.y-r.y;return{labelX:e,labelY:t}};BalloonTipLabel.prototype.eventPerformed=function(e){if(!this.show.getValueDirect()){return false}var t=this.isSelected(e.x,e.y);return t};BalloonTipLabel.prototype.balloonTipLabelStyleModified=function(e){};BalloonTipLabel.prototype.balloonTipLabelStyleBgColorModified=function(){};BalloonTipLabel.prototype.balloonTipLabelStyleDisplayModeModified=function(e){switch(e){case"default":{this.show.setValueDirect(true,false)}break;case"hide":{if(this.motionParent&&this.motionParent.getAttribute("hasFocus").getValueDirect()>0){this.hasFocus.setValueDirect(1)}else{this.show.setValueDirect(false,false)}}break}this.incrementModificationCount()};BalloonTipLabel.prototype.balloonTipLabelStyleHtmlLabelStyleModified=function(){var e=this.balloonTipLabelStyle.htmlLabelStyle.html.getValueDirect().join("");if(this.qtip_api){this.qtip_api.set("content.text",e)}this.incrementModificationCount()};BalloonTipLabel.prototype.renderSequenceSlotModified=function(){};BalloonTipLabel.prototype.showModified=function(e){if(this.qtip_api){if(e){this.qtip_api.show()}else{this.qtip_api.hide()}}};LineList.prototype=new VertexGeometry;LineList.prototype.constructor=LineList;LineList.prototype.update=function(e,t){if(!this.vertexBuffer){this.vertexBuffer=this.graphMgr.renderContext.createVertexBuffer(3);this.vertexBuffer.setPrimitiveType(RC_LINES)}VertexGeometry.prototype.update.call(this,e,t)};LineList.prototype.apply=function(e,t,n){VertexGeometry.prototype.apply.call(this,e,t,n)};LineList.prototype.draw=function(e){this.vertexBuffer.draw()};LineList.prototype.buildBoundingTree=function(){};PointList.prototype=new VertexGeometry;PointList.prototype.constructor=PointList;PointList.prototype.update=function(e,t){if(!this.vertexBuffer){this.vertexBuffer=this.graphMgr.renderContext.createVertexBuffer(3);this.vertexBuffer.setPrimitiveType(RC_POINTS)}VertexGeometry.prototype.update.call(this,e,t)};PointList.prototype.apply=function(e,t,n){VertexGeometry.prototype.apply.call(this,e,t,n)};PointList.prototype.draw=function(e){this.vertexBuffer.draw()};PointList.prototype.buildBoundingTree=function(){};DistanceSortAgent.prototype=new Agent;DistanceSortAgent.prototype.constructor=DistanceSortAgent;DistanceSortAgent.prototype.setGraphMgr=function(e){this.graphMgr=e};DistanceSortAgent.prototype.isEmpty=function(){return this.sortRecs.length==0};DistanceSortAgent.prototype.addGeometry=function(e,t,n,r){var i=new DistanceSortRec;i.geometry=e;i.dissolve=r;i.stateRec=GetCurrentState(this.graphMgr);var s=new Matrix4x4;s.loadMatrix(this.graphMgr.renderContext.modelViewMatrixStack.top());i.distance=FLT_MAX;var o;for(var u=0;u<8;u++){switch(u){case 0:o=new Vector3D(n.x,n.y,n.z);break;case 1:o=new Vector3D(n.x,n.y,t.z);break;case 2:o=new Vector3D(n.x,t.y,n.z);break;case 3:o=new Vector3D(n.x,t.y,t.z);break;case 4:o=new Vector3D(t.x,n.y,n.z);break;case 5:o=new Vector3D(t.x,n.y,t.z);break;case 6:o=new Vector3D(t.x,t.y,n.z);break;case 7:o=new Vector3D(t.x,t.y,t.z);break}o=s.transform(o.x,o.y,o.z,1);i.distance=Math.min(o.z,i.distance)}this.sortRecs.push(i)};DistanceSortAgent.prototype.clear=function(){this.sortRecs.length=0};DistanceSortAgent.prototype.sort=function(){this.sortRecs.sort(DistanceSortAgent_CompareSortRecs)};DistanceSortAgent.prototype.draw=function(){if(this.sortRecs.length==0){return}var e=GetCurrentState(this.graphMgr);for(var t=0;t<this.sortRecs.length;t++){SetCurrentState(this.graphMgr,this.sortRecs[t].stateRec);this.sortRecs[t].geometry.draw(this.sortRecs[t].dissolve);this.graphMgr.renderState.setState(RENDERSTATE_CLIP_PLANE_BIT,e.renderStateRec)}this.graphMgr.renderContext.enable(eRenderMode.DepthBufferWrite);SetCurrentState(this.graphMgr,e)};var EARTH_RADIUS_KM_EQ=6378;var EARTH_RADIUS_KM_P=6377;var UTM_ZONE_WIDTH_KM=667.956;var EQ_ARC_WIDTH_KM=40075.16;var EQ_ARC_HEIGHT_KM=40008;var EQ_ARC_ONE_DEG_LAT_KM=EQ_ARC_HEIGHT_KM/360;var EQ_ARC_ONE_DEG_LON_KM=EQ_ARC_WIDTH_KM/360;var EQ_ARC_WIDTH_MI=24902;var EQ_ARC_HEIGHT_MI=24900;var EQ_ARC_ONE_DEG_LAT_MI=EQ_ARC_HEIGHT_MI/360;var EQ_ARC_ONE_DEG_LON_MI=EQ_ARC_WIDTH_MI/360;MapProjectionCalculator.prototype=new Evaluator;MapProjectionCalculator.prototype.constructor=MapProjectionCalculator;MapProjectionCalculator.prototype.evaluate=function(){var e=this.geoPosition.getValueDirect();var t=this.computePosition(e.x,e.y,e.z);this.resultPosition.setValueDirect(t.x,t.y,t.z);var n=this.computeGeoPosition(t.x,t.y,t.z);this.resultGeoPosition.setValueDirect(n.x,n.y,n.z)};MapProjectionCalculator.prototype.computePosition=function(e,t,n){var r=undefined;var i=this.mapProjection.getValueDirect().join("");var s=this.positionCalculators[i];if(s){var o=this.center2D.getValueDirect();r=s(e,t,n,o.x,o.y,this.unitsMultiplier)}return r};MapProjectionCalculator.prototype.computeGeoPosition=function(e,t,n){var r=undefined;var i=this.mapProjection.getValueDirect().join("");var s=this.geoPositionCalculators[i];if(s){var o=this.center2D.getValueDirect();r=s(e,t,n,o.x,o.y,this.unitsMultiplier)}return r};NullObject.prototype=new ParentableMotionElement;NullObject.prototype.constructor=NullObject;Transform.prototype=new SGNode;Transform.prototype.constructor=Transform;Transform.prototype.clone=function(e){this.matrix=e.matrix.clone();this.updateMatrix=e.updateMatrix};Transform.prototype.update=function(e,t){if(this.updateMatrix){this.updateMatrix=false;this.matrixTransform=this.matrix.getValueDirect()}SGNode.prototype.update.call(this,e,t)};Transform.prototype.apply=function(e,t,n){if(!this.enabled.getValueDirect()){SGNode.prototype.apply.call(this,e,t,n);return}switch(e){case"render":{t.worldMatrix=this.matrixTransform.multiply(t.worldMatrix);this.applyTransform()}break;case"rayPick":case"bbox":case"collide":{t.worldMatrix=this.matrixTransform.multiply(t.worldMatrix)}break;case"highlight":{t.worldMatrix=this.matrixTransform.multiply(t.worldMatrix);if(t.targets.length>0){t.targets[t.targets.length-1].worldMatrix=this.matrixTransform.multiply(t.targets[t.targets.length-1].worldMatrix)}}break;default:break}SGNode.prototype.apply.call(this,e,t,n)};Transform.prototype.applyTransform=function(){this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.leftMultMatrix(this.matrixTransform);this.graphMgr.renderContext.applyModelViewTransform()};QuaternionRotate.prototype=new Transform;QuaternionRotate.prototype.constructor=QuaternionRotate;QuaternionRotate.prototype.update=function(e,t){if(this.updateRotationQuat){this.updateRotationQuat=false;var n=this.rotationQuat.getValueDirect();var r=n.getMatrix();this.matrix.setValueDirect(r);var i=r.getRotationAngles();this.rotation.setValueDirect(i.x,i.y,i.z)}Transform.prototype.update.call(this,e,t)};QuaternionRotate.prototype.apply=function(e,t,n){if(!this.enabled.getValueDirect()){Transform.prototype.apply.call(this,e,t,n);return}Transform.prototype.apply.call(this,e,t,n)};Rotate.prototype=new Transform;Rotate.prototype.constructor=Rotate;Rotate.prototype.update=function(e,t){if(this.updateRotation){this.updateRotation=false;var n=this.rotation.getValueDirect();var r=new Matrix4x4;r.loadXYZAxisRotation(n.x,n.y,n.z);this.matrix.setValueDirect(r)}Transform.prototype.update.call(this,e,t)};Rotate.prototype.apply=function(e,t,n){if(!this.enabled.getValueDirect()){Transform.prototype.apply.call(this,e,t,n);return}Transform.prototype.apply.call(this,e,t,n)};Scale.prototype=new Transform;Scale.prototype.constructor=Scale;Scale.prototype.update=function(e,t){if(this.updateScale){this.updateScale=false;var n=this.scale.getValueDirect();var r=new Matrix4x4;r.loadScale(n.x,n.y,n.z);this.matrix.setValueDirect(r)}Transform.prototype.update.call(this,e,t)};Scale.prototype.apply=function(e,t,n){if(!this.enabled.getValueDirect()){Transform.prototype.apply.call(this,e,t,n);return}Transform.prototype.apply.call(this,e,t,n)};Translate.prototype=new Transform;Translate.prototype.constructor=Translate;Translate.prototype.update=function(e,t){if(this.updateTranslation){this.updateTranslation=false;var n=this.translation.getValueDirect();var r=new Matrix4x4;r.loadTranslation(n.x,n.y,n.z);this.matrix.setValueDirect(r)}Transform.prototype.update.call(this,e,t)};Translate.prototype.apply=function(e,t,n){if(!this.enabled.getValueDirect()){Transform.prototype.apply.call(this,e,t,n);return}Transform.prototype.apply.call(this,e,t,n)};MultiTargetObserver.prototype=new Evaluator;MultiTargetObserver.prototype.constructor=MultiTargetObserver;MultiTargetObserver.prototype.setNumberOfTargets=function(e){var t=this.targets.getValueDirect();if(t>0){for(var n=0;n<t;n++){this.unregisterAttribute(this.targetPosition[n])}}this.targets.setValueDirect(e);if(e>0){this.targetPosition.length=e;for(var n=0;n<e;n++){this.targetPosition[n]=new Vector3DAttr(0,0,0);this.registerAttribute(this.targetPosition[n],"targetPosition"+n)}}};MultiTargetObserver.prototype.evaluate=function(){if(!this.enabled.getValueDirect()){return}if(this.targets.getValueDirect()==0){return}var e=this.getObserverAndTargetPositions();var t=e.observer;var n=e.target;var r=new Vector3D(n.x-t.x,n.y-t.y,n.z-t.z);var i,s;var o=XYZtoHP(r.x,r.y,r.z);var i=o.heading;var s=o.pitch;var u=0;if(this.affectPitch.getValueDirect()==true){u=-toDegrees(s)}var a=0;if(this.affectHeading.getValueDirect()==true){a=-toDegrees(i)}var f=[t.x,t.y,t.z];this.resultPosition.setValue(f);if(this.affectPitch.getValueDirect()==true){this.resultPitch.setValueDirect(u)}if(this.affectHeading.getValueDirect()==true){this.resultHeading.setValueDirect(a)}};MultiTargetObserver.prototype.getObserverAndTargetPositions=function(){var e,t;switch(this.targets.getValueDirect()){case 0:{e=new Vector3D(0,0,0);t=new Vector3D(0,0,0)}break;case 1:{e=this.position.getValueDirect();t=this.targetPosition[0].getValueDirect()}break;case 2:{var n=this.targetPosition[0].getValueDirect();var r=this.targetPosition[1].getValueDirect();var i=this.distanceFromFirstTarget.getValueDirect();var s=Normalize(n-r);e=s*i+n;if(i==0){t=n-s}else{t=n}}break;default:{e=new Vector3D(0,0,0);t=Vector3D(0,0,0)}break}return{observer:e,target:t}};SerializeParams.prototype=new DirectiveParams;SerializeParams.prototype.constructor=SerializeParams();SerializeDirective.prototype=new SGDirective;SerializeDirective.prototype.constructor=SerializeDirective;SerializeDirective.prototype.execute=function(e){if(!e){return}this.serialized=null;var t=new SerializeParams;t.serialized=new String;e.apply("serialize",t,true);this.serialized=t.serialized;return};var MAX_SEE_AHEAD=2;CollideParams.prototype=new DirectiveParams;CollideParams.prototype.constructor=CollideParams();CollideDirective.prototype=new SGDirective;CollideDirective.prototype.constructor=CollideDirective;CollideDirective.prototype.execute=function(e){e=e||this.rootNode.getValueDirect();var t=new CollideParams;e.apply("collide",t,true);this.detectCollisions(t.detectCollisions);this.detectObstructions(t.detectCollisions);this.detectSnapConnections(t.detectCollisions)};CollideDirective.prototype.detectCollisions=function(e){var t=[];var n=[];var r=[];for(var i in e){t.push(e[i].model);n.push(e[i].tree);r.push(false);e[i].model.getAttribute("collisionList").clear()}for(var i=0;i<n.length;i++){for(var s=i+1;s<n.length;s++){if(n[i].collides(n[s])){t[i].getAttribute("collisionList").push_back(t[s]);t[s].getAttribute("collisionList").push_back(t[i]);r[i]=r[s]=true}}}for(var i=0;i<r.length;i++){t[i].getAttribute("collisionDetected").setValueDirect(r[i])}};CollideDirective.prototype.detectObstructions=function(e){var t=[];var n=[];var r=[];for(var i in e){t.push(e[i].model);n.push(e[i].tree);r.push(false);e[i].model.getAttribute("obstructionList").clear()}var s=0;var o=FLT_MAX;for(var i=0;i<n.length;i++){var u=t[i].getDirectionVectors();u.forward.x*=MAX_SEE_AHEAD;u.forward.y*=MAX_SEE_AHEAD;u.forward.z*=MAX_SEE_AHEAD;for(var a=0;a<n.length;a++){if(i==a)continue;if((s=n[a].obstructs(n[i],u.forward))>0&&s<o){t[i].getAttribute("obstructionList").clear();t[i].getAttribute("obstructionList").push_back(t[a]);r[i]=true;o=s}}}for(var i=0;i<r.length;i++){t[i].getAttribute("obstructionDetected").setValueDirect(r[i])}};CollideDirective.prototype.detectSnapConnections=function(e){var t=[];var n=[];for(var r in e){var i=e[r].model.getAttribute("socketConnectors");for(var s=0;s<i.Size();s++){var o=i.getAt(s);if(o.getAttribute("connected").getValueDirect()==false){t.push(new Pair(o,e[r]))}}var u=e[r].model.getAttribute("plugConnectors");for(var s=0;s<u.Size();s++){var a=u.getAt(s);if(a.getAttribute("connected").getValueDirect()==false){n.push(new Pair(a,e[r]))}}}for(var r=0;r<n.length;r++){var f=n[r].first.getAttribute("type").getValueDirect().join("");for(var s=0;s<t.length;s++){var l=t[s].first.getAttribute("type").getValueDirect().join("");if(f!=l)continue;var c=n[r].first.collides(t[s].first,n[r].second.worldMatrix,t[s].second.worldMatrix);if(c>0){var h=this.registry.find("AttributeFactory");var p=h.create("SnapTo");p.getAttribute("target").copyValue(t[s].second.model.getAttribute("name"));p.getAttribute("plug").copyValue(n[r].second.model.getAttribute("name"));p.getAttribute("socketConnector").copyValue(t[s].first);p.getAttribute("plugConnector").copyValue(n[r].first);p.getAttribute("socketWorldMatrix").setValueDirect(t[s].second.worldMatrix);p.getAttribute("plugWorldMatrix").setValueDirect(n[r].second.worldMatrix);p.getAttribute("slot").setValueDirect(c);p.execute();n[r].first.getAttribute("connected").setValueDirect(true);t[s].first.getAttribute("connected").setValueDirect(true);n[r].second.model.getAttribute("moveable").setValueDirect(false)}}}};HighlightParams.prototype=new DirectiveParams;HighlightParams.prototype.constructor=HighlightParams();HighlightDirective.prototype=new SGDirective;HighlightDirective.prototype.constructor=HighlightDirective;HighlightDirective.prototype.setGraphMgr=function(e){SGDirective.prototype.setGraphMgr.call(this,e);this.initHighlightSquareVB()};HighlightDirective.prototype.execute=function(e){e=e||this.rootNode.getValueDirect();var t=new HighlightParams;e.apply("highlight",t,true);this.drawHighlights(t)};HighlightDirective.prototype.drawHighlights=function(e){if(e.targets.length==0){return}var t=this.graphMgr.renderContext;if(!t){return}var n=this.highlightType.getValueDirect();var r,i,s;for(var o=0;o<e.targets.length;o++){var u=e.targets[o];var a=u.camera.getDirectionVectors();r=a.up;i=a.right;s=a.forward;var f=u.worldMatrix.getScalingFactors();var l=max3(f.x,f.y,f.z);var c=this.getWorldUnitsPerPixel(u.center,u.worldMatrix,u.viewMatrix,u.camera,u.viewport)/l;var h=u.highlightWidth*c;t.clearStencil(0);t.clear(RC_STENCIL_BUFFER_BIT);var p;for(var d=0;d<u.geometries.length;d++){switch(n){case eHighlightType.FourPass:{for(var v=0;v<4;v++){p=this.getWorldViewMatrix(n,h,v,r,i,s,u.worldMatrix,u.viewMatrix);this.configureStencil_Target(t,u.geometries[d],u.projMatrix,p,eStencilOp.Increment)}}break;case eHighlightType.EightPass:{for(var v=0;v<8;v++){p=this.getWorldViewMatrix(n,h,v,r,i,s,u.worldMatrix,u.viewMatrix);this.configureStencil_Target(t,u.geometries[d],u.projMatrix,p,eStencilOp.Increment)}}break}}p=u.worldMatrix.multiply(u.viewMatrix);for(var d=0;d<u.geometries.length;d++){this.configureStencil_Target(t,u.geometries[d],u.projMatrix,p,eStencilOp.Zero)}this.highlightColor.setValueDirect(u.highlightColor_r,u.highlightColor_g,u.highlightColor_b,u.highlightColor_a);this.renderHighlightSquare(e,t)}};HighlightDirective.prototype.getWorldUnitsPerPixel=function(e,t,n,r,i){var s=t.multiply(n);var o=s.transform(e.x,e.y,e.z,1);var u=new Vector2D;switch(r.attrType){case eAttrType.PerspectiveCamera:{var a=r.getAttribute("zoom").getValueDirect();u=worldUnitsPerPixelPersp(i,a,o.z)}break;case eAttrType.OrthographicCamera:{var f=r.getAttribute("width").getValueDirect();u=worldUnitsPerPixelOrtho(i,f)}break;default:break}return Math.max(u.x,u.y)};HighlightDirective.prototype.getWorldViewMatrix=function(e,t,n,r,i,s,o,u){var a=0;switch(e){case eHighlightType.FourPass:a=90;break;case eHighlightType.EightPass:a=45;break}var f=new Matrix4x4;f.loadZAxisRotation(a*n);var l=f.transform(1,0,0,0);l.x*=t;l.y*=t;l.z*=t;var c=new Matrix4x4;c.loadTranslation(i.x*l.x+r.x*l.y,i.y*l.x+r.y*l.y,i.z*l.x+r.z*l.y);return c.multiply(o.multiply(u))};HighlightDirective.prototype.configureStencil_Target=function(e,t,n,r,i){var s=e.enabled(eRenderMode.DepthBufferWrite);var o=e.enabled(eRenderMode.StencilTest);var u=e.enabled(eRenderMode.AlphaBlend);e.setEnabled(eRenderMode.DepthBufferWrite,false);e.setEnabled(eRenderMode.StencilTest,true);e.setDepthFunc(eDepthFunc.LessEqual);e.setShadeModel(eShadeModel.Flat);e.setStencilFunc(eStencilFunc.Always,0,255);e.setStencilMask(255);e.setStencilOp(eStencilOp.Keep,i,i);e.setEnabled(eRenderMode.AlphaBlend,true);e.setBlendFactor(RC_ZERO,RC_ONE);e.setMatrixMode(RC_PROJECTION);e.pushMatrix();e.loadMatrix(n);e.applyProjectionTransform();e.setMatrixMode(RC_MODELVIEW);e.pushMatrix();e.loadMatrix(r);e.applyModelViewTransform();t.drawPrimitives();e.setMatrixMode(RC_PROJECTION);e.popMatrix();e.setMatrixMode(RC_MODELVIEW);e.popMatrix();e.setEnabled(eRenderMode.DepthBufferWrite,s);e.setEnabled(eRenderMode.StencilTest,o);e.setDepthFunc(eDepthFunc.LessEqual);e.setShadeModel(eShadeModel.Gouraud);e.setEnabled(eRenderMode.AlphaBlend,u)};HighlightDirective.prototype.renderHighlightSquare=function(e,t){var n=t.enabled(eRenderMode.DepthTest);var r=t.enabled(eRenderMode.StencilTest);var i=t.enabled(eRenderMode.AlphaBlend);var s=t.enabled(eRenderMode.Lighting);t.setDepthFunc(eDepthFunc.LessEqual);t.setEnabled(eRenderMode.DepthTest,false);t.setEnabled(eRenderMode.StencilTest,true);t.setEnabled(eRenderMode.AlphaBlend,true);t.setEnabled(eRenderMode.Lighting,false);t.setBlendFactor(RC_SRC_ALPHA,RC_ONE_MINUS_SRC_ALPHA);t.setStencilFunc(eStencilFunc.LessEqual,1,255);t.setStencilOp(eStencilOp.Keep,eStencilOp.Keep,eStencilOp.Keep);var o=new Matrix4x4;o.loadIdentity();t.setMatrixMode(RC_PROJECTION);t.pushMatrix();t.loadMatrix(o);t.applyProjectionTransform();t.setMatrixMode(RC_MODELVIEW);t.pushMatrix();t.loadMatrix(o);t.applyModelViewTransform();this.vertexBuffer.draw();t.popMatrix();t.setMatrixMode(RC_PROJECTION);t.popMatrix();t.setDepthFunc(eDepthFunc.LessEqual);t.setEnabled(eRenderMode.DepthTest,n);t.setEnabled(eRenderMode.StencilTest,r);t.setEnabled(eRenderMode.AlphaBlend,i);t.setEnabled(eRenderMode.Lighting,s);t.setMatrixMode(RC_MODELVIEW)};HighlightDirective.prototype.initHighlightSquareVB=function(){this.vertexBuffer=this.graphMgr.renderContext.createVertexBuffer(3);this.vertexBuffer.setPrimitiveType(RC_TRIANGLE_STRIP);var e=[-1,-1,1,-1,1,1,1,-1,1,1,1,1];var t=[0,0,-1,0,0,-1,0,0,-1,0,0,-1];var n=this.highlightColor.getValueDirect();var r=[n.r,n.g,n.b,n.a,n.r,n.g,n.b,n.a,n.r,n.g,n.b,n.a,n.r,n.g,n.b,n.a];this.vertexBuffer.setVertices(e);this.vertexBuffer.setNormals(t);this.vertexBuffer.setColors(r)};HighlightDirective.prototype.highlightColorModified=function(){if(this.vertexBuffer){var e=this.highlightColor.getValueDirect();var t=[e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a];this.vertexBuffer.setColors(t)}};var OBJECTMOTION_PAN_BIT=1;var OBJECTMOTION_LINEAR_BIT=2;var OBJECTMOTION_ANGULAR_BIT=4;var OBJECTMOTION_SCALAR_BIT=8;var OBJECTMOTION_ALL_BITS=15;ObjectMotionDesc.prototype.assign=function(e){this.validMembersMask=e.validMembersMask;this.panVelocity=e.panVelocity;this.linearVelocity=e.linearVelocity;this.angularVelocity=e.angularVelocity;this.scalarVelocity=e.scalarVelocity;this.duration=e.duration};ObjectMover.prototype=new Evaluator;ObjectMover.prototype.constructor=ObjectMover;ObjectMover.prototype.onUnregister=function(){this.motionQueue.clear();this.panVelocity.setValueDirect(0,0,0);this.linearVelocity.setValueDirect(0,0,0);this.angularVelocity.setValueDirect(0,0,0);this.scalarVelocity.setValueDirect(0,0,0)};ObjectMover.prototype.evaluate=function(){var e=this.timeIncrement.getValueDirect();this.updateActiveMotion(e);this.setMotion(this.activeMotion)};ObjectMover.prototype.setMotion=function(e){if(e.validMembersMask&OBJECTMOTION_PAN_BIT){this.panVelocity.setValueDirect(e.panVelocity.x,e.panVelocity.y,e.panVelocity.z)}if(e.validMembersMask&OBJECTMOTION_LINEAR_BIT){this.linearVelocity.setValueDirect(e.linearVelocity.x,e.linearVelocity.y,e.linearVelocity.z)}if(e.validMembersMask&OBJECTMOTION_ANGULAR_BIT){this.angularVelocity.setValueDirect(e.angularVelocity.x,e.angularVelocity.y,e.angularVelocity.z)}if(e.validMembersMask&OBJECTMOTION_SCALAR_BIT){this.scalarVelocity.setValueDirect(e.scalarVelocity.x,e.scalarVelocity.y,e.scalarVelocity.z)}};ObjectMover.prototype.updateActiveMotion=function(e){if(!this.activeMotion||this.activeDuration>=this.activeMotion.duration){this.activeDuration=0;this.activeMotion=this.motionQueue.front()||new ObjectMotionDesc;this.motionQueue.pop()}this.activeDuration+=e};ObjectMover.prototype.connectTarget=function(e){this.panVelocity.removeAllTargets();this.linearVelocity.removeAllTargets();this.angularVelocity.removeAllTargets();this.scalarVelocity.removeAllTargets();if(e){this.panVelocity.addTarget(e.getAttribute("panVelocity"));this.linearVelocity.addTarget(e.getAttribute("linearVelocity"));this.angularVelocity.addTarget(e.getAttribute("angularVelocity"));this.scalarVelocity.addTarget(e.getAttribute("scalarVelocity"));e.getAttribute("collisionDetected").addModifiedCB(ObjectMover_TargetCollisionDetectedModifiedCB,this);e.getAttribute("obstructionDetected").addModifiedCB(ObjectMover_TargetObstructionDetectedModifiedCB,this)}this.targetObject=e};ObjectMover.prototype.collisionDetected=function(e){};ObjectMover.prototype.obstructionDetected=function(e){};var ANIMALMOVER_MAX_QUEUE_LENGTH=2;AnimalMover.prototype=new ObjectMover;AnimalMover.prototype.constructor=AnimalMover;AnimalMover.prototype.evaluate=function(){if(this.motionQueue.length()==0){var e=Math.random();var t=e<.5?-1:1;var n=new ObjectMotionDesc;n.duration=5*e;n.angularVelocity=new Vector3D(0,this.angularSpeed.getValueDirect()*e*t,0);n.panVelocity=new Vector3D(0,0,this.linearSpeed.getValueDirect());this.motionQueue.push(n)}ObjectMover.prototype.evaluate.call(this)};AnimalMover.prototype.collisionDetected=function(e){};AnimalMover.prototype.obstructionDetected=function(e){if(e.Size()>0){this.motionQueue.clear();this.activeMotion=null;var t=this.targetObject.getDirectionVectors();var n=this.targetObject.getAttribute("sectorPosition").getValueDirect();var r=new Vector3D(t.forward.x,t.forward.y,t.forward.z);var i=e.getAt(0).getAttribute("sectorPosition").getValueDirect();var s=toDegrees(Math.acos(cosineAngleBetween(t.forward,new Vector3D(i.x-n.x,i.y-n.y,i.z-n.z))));if(s==0){i.x+=.1;i.z+=.1}var o=distanceBetween(n,i);var u=new Vector3D(t.forward.x*o-i.x,t.forward.y*o-i.y,t.forward.z*o-i.z);u.normalize();r.addVector(u);r.normalize();r.multiplyScalar(this.linearSpeed.getValueDirect());this.linearDirection=r;var a=cosineAngleBetween(t.forward,this.linearDirection);s=toDegrees(Math.acos(a));if(s>0){if(a<0)s=-s;var f=this.targetObject.getAttribute("rotation").getValueDirect();var l=new ObjectMotionDesc;l.angularVelocity=new Vector3D(0,s,0);l.duration=s/this.angularSpeed.getValueDirect();this.motionQueue.push(l)}}else{}};WalkSimulator.prototype=new SceneInspector;WalkSimulator.prototype.constructor=WalkSimulator;WalkSimulator.prototype.evaluate=function(){var e=this.enabled.getValueDirect();if(!e){return}var t=this.linearDelta.getValueDirect();t.x*=-1;var n=this.linearSensitivity.getValueDirect();var r=this.angularDelta.getValueDirect();var i=this.angularSensitivity.getValueDirect();var s=new Vector3D(t.x,t.y,t.z);s.multiplyVector(n);var o=new Vector3D(r.x,r.y,r.z);o.multiplyVector(i);if(s.x!=0||s.y!=0||s.z!=0||o.x!=0||o.y!=0||o.z!=0){this.panDelta.setValueDirect(s.x,s.y,s.z);this.rotationDelta.setValueDirect(o.x,o.y,o.z);{var u=this.viewPosition.getValueDirect();var a=this.viewRotation.getValueDirect();var f=this.groundPlane.getValueDirect();var l=new Matrix4x4;l.loadTranslation(-u.x,-u.y,-u.z);var c=new Matrix4x4;c.loadXYZAxisRotation(-a.x,-a.y,-a.z);var h=l.multiply(c);this.upVector.setValueDirect(f.normal.x,f.normal.y,f.normal.z);var p=this.transformDirectionVector(0,0,1,h);var d=planeProject(p,f);var v=new Vector3D(d.x,d.y,d.z);v.normalize();this.forwardVector.setValueDirect(v.x,v.y,v.z);var m=new Matrix4x4;m.loadYAxisRotation(90);p=m.transform(v.x,v.y,v.z,0);this.rightVector.setValueDirect(p.x,p.y,p.z)}SceneInspector.prototype.evaluate.call(this)}};WalkSimulator.prototype.enabledModified=function(){var e=this.enabled.getValueDirect();if(e){this.enableSceneInspectionState();this.affectRotation_Z.setValueDirect(false)}else if(this.lastEnabled){this.restoreSceneInspectionState();this.affectRotation_Z.setValueDirect(true);this.upVector.setValueDirect(0,0,0,false);this.rightVector.setValueDirect(0,0,0,false);this.forwardVector.setValueDirect(0,0,0,false)}this.lastEnabled=e};WalkSimulator.prototype.enableSceneInspectionState=function(){var e=this.registry.find("SceneInspector");if(e){e.enabled.setValueDirect(true);this.sceneInspector_pivotDistanceValue=e.pivotDistance.getValueDirect();e.pivotDistance.setValueDirect(0)}var t=this.registry.find("Selector");if(t){this.selector_computePivotDistanceValue=t.computePivotDistance.getValueDirect();t.computePivotDistance.setValueDirect(false)}};WalkSimulator.prototype.restoreSceneInspectionState=function(){var e=this.registry.find("SceneInspector");if(e){e.pivotDistance.setValueDirect(this.sceneInspector_pivotDistanceValue)}var t=this.registry.find("Selector");if(t){t.computePivotDistance.setValueDirect(this.selector_computePivotDistanceValue)}};Cube.prototype=new TriList;Cube.prototype.constructor=Cube;Cube.prototype.setGraphMgr=function(e){TriList.prototype.setGraphMgr.call(this,e);this.materialNode.setGraphMgr(e)};Cube.prototype.update=function(e,t){if(this.updateTransform){this.updateTransform=false;var n=this.position.getValueDirect();var r=new Matrix4x4;r.loadTranslation(n.x,n.y,n.z);var i=this.rotation.getValueDirect();var s=new Matrix4x4;s.loadXYZAxisRotation(i.x,i.y,i.z);var o=this.scale.getValueDirect();var u=new Matrix4x4;u.loadScale(o.x,o.y,o.z);this.transform.loadMatrix(u.multiply(s.multiply(r)))}if(this.updateMaterial){this.updateMaterial=false;this.materialNode.update(e,t)}if(this.updateTriList){this.updateTriList=false;TriList.prototype.update.call(this,e,t)}};Cube.prototype.apply=function(e,t,n){var r=this.show.getValueDirect();var i=this.enabled.getValueDirect();if(!r||!i){return}switch(e){case"render":{this.materialNode.apply(e,t,n);this.draw(t.dissolve)}break}};Cube.prototype.draw=function(e){this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.pushMatrix();this.graphMgr.renderContext.leftMultMatrix(this.transform);this.graphMgr.renderContext.applyModelViewTransform();this.vertexBuffer.draw();this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.popMatrix();this.graphMgr.renderContext.applyModelViewTransform()};ScreenRect.prototype=new TriList;ScreenRect.prototype.constructor=ScreenRect;ScreenRect.prototype.update=function(e,t){TriList.prototype.update.call(this,e,t)};ScreenRect.prototype.draw=function(e){var t=new Matrix4x4;this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.pushMatrix();this.graphMgr.renderContext.loadMatrix(t);this.graphMgr.renderContext.applyModelViewTransform();this.graphMgr.renderContext.setMatrixMode(RC_PROJECTION);this.graphMgr.renderContext.pushMatrix();this.graphMgr.renderContext.loadMatrix(t);this.graphMgr.renderContext.applyProjectionTransform();this.graphMgr.renderContext.disable(eRenderMode.DepthTest);this.graphMgr.renderContext.disable(eRenderMode.DepthBufferWrite);this.graphMgr.renderContext.disable(eRenderMode.Lighting);var n=this.textureColorMask.getValueDirect();this.graphMgr.renderContext.setTextureColorMask(n.r,n.g,n.b,n.a);TriList.prototype.draw.call(this,e);this.graphMgr.renderContext.popMatrix();this.graphMgr.renderContext.applyProjectionTransform();this.graphMgr.renderContext.setMatrixMode(RC_MODELVIEW);this.graphMgr.renderContext.popMatrix();this.graphMgr.renderContext.applyModelViewTransform();this.graphMgr.renderContext.enable(eRenderMode.DepthTest);this.graphMgr.renderContext.enable(eRenderMode.DepthBufferWrite);this.graphMgr.renderContext.enable(eRenderMode.Lighting);this.graphMgr.renderContext.setTextureColorMask(2,2,2,2)};ScreenRect.prototype.setTexture=function(e){var t=[0,0,0,1,1,0,1,1];var n=this.getUVCoords(e);n.setValueDirect(t)};MorphEffector.prototype=new Evaluator;MorphEffector.prototype.constructor=MorphEffector;MorphEffector.prototype.evaluate=function(){var e=this.morphAmt.getValueDirect();var t=this.morphIncr.getValueDirect();e+=t;e=clamp(e,0,1);this.morphAmt.setValueDirect(e);var n=this.sourceVertices.getValueDirect();var r=this.targetVertices.getValueDirect();var i=[];var s=Math.min(n.length,r.length);i.length=s;for(var o=0;o<s;o++){i[o]=(r[o]-n[o])*e+n[o]}this.resultVertices.setValue(i)};Bone.prototype=new AttributeContainer;Bone.prototype.constructor=Bone;Bone.prototype.addChild=function(e){if(!e||e.parent){return false}e.parent=this;this.transform.addTarget(e.parentTransform);this.restTransform.addTarget(e.parentRestTransform);this.children.push(e);return true};Bone.prototype.removeChild=function(e){if(!e){return false}for(var t=0;t<this.children.length;t++){if(this.children[t]==e){e.parent=null;this.transform.removeTarget(e.parentTransform);this.restTransform.removeTarget(e.parentRestTransform);var n=new Matrix4x4;n.loadIdentity();e.parentTransform.setValueDirect(n);e.parentRestTransform.setValueDirect(n);this.children.splice(t,1);return true}}return false};Bone.prototype.getChild=function(e){if(e>=this.children.length){return null}return this.children[e]};Bone.prototype.getChildCount=function(){return this.children.length};Bone.prototype.getParent=function(){return this.parent};Bone.prototype.getScaledStrength=function(){var e=this.strength.getValueDirect();if(this.scaleBoneStrength.getValueDirect()){e*=this.restLength.getValueDirect()}return e};Bone.prototype.calculateFalloffValues=function(e){var t=this.restMatrix.transform(0,0,0,1);var n=this.restMatrix.transform(0,0,1,0);var r=this.restLength.getValueDirect();var i=new Vector3D(t.x,t.y,t.z);var s=new Vector3D(t.x+n.x*r,t.y+n.y*r,t.z+n.z*r);var o=e.length/3;var u=this.falloffType.getValueDirect();var a=[];a.length=o;for(var f=0,l=0;f<o;f++,l+=3){var c=distanceBetweenLineSegmentAndPoint(i,s,new Vector3D(e[l],e[l+1],e[l+2]));switch(u){case eBoneFalloffType.InverseDistance:a[f]=1/c;break;case eBoneFalloffType.InverseDistance_2:a[f]=1/(c*c);break;case eBoneFalloffType.InverseDistance_4:a[f]=1/(c*c*c*c);break;case eBoneFalloffType.InverseDistance_8:a[f]=1/(c*c*c*c*c*c*c*c);break;case eBoneFalloffType.InverseDistance_16:a[f]=1/(c*c*c*c*c*c*c*c*c*c*c*c*c*c*c*c);break}a[f]*=this.getScaledStrength()}return a};Bone.prototype.update=function(){var e=false;if(this.updatePosition||this.updateRotation||this.updateScale||this.updatePivot||this.updateParentTransform){if(this.updatePosition){this.updatePosition=false;var t=this.position.getValueDirect();this.translationMatrix.loadTranslation(t.x,t.y,t.z)}if(this.updateRotation){this.updateRotation=false;var n=this.rotation.getValueDirect();this.rotationQuat.loadXYZAxisRotation(n.x,n.y,n.z);this.rotationMatrix=this.rotationQuat.getMatrix()}if(this.updateScale){this.updateScale=false;var r=this.scale.getValueDirect();this.scaleMatrix.loadScale(r.x,r.y,r.z)}if(this.updatePivot){this.updatePivot=false;var i=this.pivot.getValueDirect();this.pivotMatrix.loadTranslation(-i.x,-i.y,-i.z)}if(this.updateParentTransform){this.updateParentTransform=false;this.parentMatrix=this.parentTransform.getValueDirect()}this.matrix=this.pivotMatrix.multiply(this.scaleMatrix.multiply(this.rotationMatrix.multiply(this.translationMatrix.multiply(this.parentMatrix))));this.transform.setValueDirect(this.matrix);e=true}if(this.updateRestPosition||this.updateRestRotation||this.updateParentRestTransform){this.updateRestPosition=false;this.updateRestRotation=false;this.updateParentRestTransform=false;var s=this.restPosition.getValueDirect();var o=new Matrix4x4;o.loadTranslation(s.x,s.y,s.z);var u=this.restRotation.getValueDirect();var a=new Quaternion;a.loadXYZAxisRotation(u.x,u.y,u.z);var f=a.getMatrix();var l=this.parentRestTransform.getValueDirect();this.restMatrix=f.multiply(o.multiply(l));this.restMatrixInv=new Matrix4x4;this.restMatrixInv.loadMatrix(this.restMatrix);this.restMatrixInv.invert();this.restTransform.setValueDirect(this.restMatrix);e=true}if(this.updateRestLength){this.updateRestLength=false}if(e){this.boneMatrix=this.restMatrixInv.multiply(this.matrix)}};BoneEffector.prototype=new Evaluator;BoneEffector.prototype.constructor=BoneEffector;BoneEffector.prototype.evaluate=function(){this.update();for(var e=0;e<this.bones.length;e++){this.updateBones(this.bones[e])}for(var e=0;e<this.bones.length;e++){this.evaluateBones(this.bones[e],e==0?true:false)}this.resultVertices.setValueDirect(this.resultVerticesArray);this.resultNormals.setValueDirect(this.resultNormalsArray)};BoneEffector.prototype.addBoneHierarchy=function(e){if(!e){return false}this.bones.push(e);if(this.verticesArray.length>0){this.calculateFalloffValues()}return true};BoneEffector.prototype.update=function(){if(this.updateVertices){this.updateVertices=false;this.verticesArray=this.vertices.getValueDirect();this.resultVerticesArray.length=this.verticesArray.length;this.calculateFalloffValues()}if(this.updateNormals){this.updateNormals=false;this.normalsArray=this.normals.getValueDirect();this.resultNormalsArray.length=this.normalsArray.length}};BoneEffector.prototype.calculateFalloffValues=function(){this.boneFalloffValuesMap=[];for(var e=0;e<this.bones.length;e++){this.updateBones(this.bones[e]);this.calculateBoneFalloffValues(this.bones[e])}this.sumFalloffValues()};BoneEffector.prototype.calculateBoneFalloffValues=function(e){if(!e||this.verticesArray.length==0){return}var t=e.calculateFalloffValues(this.verticesArray);this.boneFalloffValuesMap.push(new Pair(e,t));for(var n=0;n<e.getChildCount();n++){var r=e.getChild(n);if(!r){continue}this.calculateBoneFalloffValues(r)}};BoneEffector.prototype.sumFalloffValues=function(){if(this.verticesArray.length==0){return}var e=this.verticesArray.length/3;this.falloffSums.length=e;for(var t=0;t<e;t++)this.falloffSums[t]=0;for(var t=0;t<this.boneFalloffValuesMap.length;t++){var n=this.boneFalloffValuesMap[t].second;for(var r=0;r<e;r++){this.falloffSums[r]+=n[r]}}for(var t=0;t<this.boneFalloffValuesMap.length;t++){var n=this.boneFalloffValuesMap[t].second;for(var r=0;r<e;r++){if(this.falloffSums[r]!=0){n[r]/=this.falloffSums[r]}else{n[r]=0}}}};BoneEffector.prototype.updateBones=function(e){if(!e){return}e.update();for(var t=0;t<e.getChildCount();t++){var n=e.getChild(t);if(!n){continue}this.updateBones(n)}};BoneEffector.prototype.evaluateBones=function(e,t){if(!e){return}var n=null;for(var r=0;r<this.boneFalloffValuesMap.length;r++){if(this.boneFalloffValuesMap[r].first==e){n=this.boneFalloffValuesMap[r].second;break}}var i=e.boneMatrix;var s=this.verticesArray.length/3;for(var r=0,o=0;r<s;r++,o+=3){if(n[r]>0){var u=i.transform(this.verticesArray[o],this.verticesArray[o+1],this.verticesArray[o+2],1);if(t){this.resultVerticesArray[o]=u.x*n[r];this.resultVerticesArray[o+1]=u.y*n[r];this.resultVerticesArray[o+2]=u.z*n[r]}else{this.resultVerticesArray[o]+=u.x*n[r];this.resultVerticesArray[o+1]+=u.y*n[r];this.resultVerticesArray[o+2]+=u.z*n[r]}}else{this.resultVerticesArray[o]=this.verticesArray[o];this.resultVerticesArray[o+1]=this.verticesArray[o+1];this.resultVerticesArray[o+2]=this.verticesArray[o+2]}}var a=this.normalsArray.length/3;for(var r=0,o=0;r<a;r++,o+=3){if(n[r]>0){var u=i.transform(this.normalsArray[o],this.normalsArray[o+1],this.normalsArray[o+2],0);if(t){this.resultNormalsArray[o]=u.x*n[r];this.resultNormalsArray[o+1]=u.y*n[r];this.resultNormalsArray[o+2]=u.z*n[r]}else{this.resultNormalsArray[o]+=u.x*n[r];this.resultNormalsArray[o+1]+=u.y*n[r];this.resultNormalsArray[o+2]+=u.z*n[r]}}else{this.resultNormalsArray[o]=this.normalsArray[o];this.resultNormalsArray[o+1]=this.normalsArray[o+1];this.resultNormalsArray[o+2]=this.normalsArray[o+2]}}for(var r=0;r<e.getChildCount();r++){var f=e.getChild(r);if(!f){continue}this.evaluateBones(f)}};SnapConnector.prototype=new AttributeContainer;SnapConnector.prototype.constructor=SnapConnector;SocketConnector.prototype=new SnapConnector;SocketConnector.prototype.constructor=SocketConnector;PlugConnector.prototype=new SnapConnector;PlugConnector.prototype.constructor=PlugConnector;PlugConnector.prototype.collides=function(e,t,n){this.pin1.sphere.setTransform(t);e.slot1.sphere.setTransform(n);if(this.pin1.sphere.intersects(e.slot1.sphere)){return 1}this.pin2.sphere.setTransform(t);e.slot2.sphere.setTransform(n);if(this.pin2.sphere.intersects(e.slot2.sphere)){return 2}return 0};SocketConnectors.prototype=new AttributeVector;SocketConnectors.prototype.constructor=SocketConnectors;SocketConnectorAllocator.prototype=new Allocator;SocketConnectorAllocator.prototype.constructor=SocketConnectorAllocator;SocketConnectorAllocator.prototype.allocate=function(){return new SocketConnector};PlugConnectors.prototype=new AttributeVector;PlugConnectors.prototype.constructor=PlugConnectors;PlugConnectorAllocator.prototype=new Allocator;PlugConnectorAllocator.prototype.constructor=PlugConnectorAllocator;PlugConnectorAllocator.prototype.allocate=function(){return new PlugConnector};PhysicsSimulator.prototype=new Evaluator;PhysicsSimulator.prototype.constructor=PhysicsSimulator;PhysicsSimulator.prototype.evaluate=function(){if(this.updateWorld){this.updateWorld=false;this.initPhysics()}if(this.updateBodies){this.updateBodies=false;this.updatePhysicsBodies()}for(var e=0;e<this.bodyModels.length;e++){switch(this.isSelected(this.bodyModels[e])){case 0:{if(!this.bodyAdded[e]){this.restorePhysicsBody(e);this.bodyAdded[e]=true}}break;case 1:{if(this.bodyAdded[e]){this.world.removeRigidBody(this.physicsBodies[e]);this.bodyAdded[e]=false}}break}}var t=this.timeIncrement.getValueDirect();this.world.stepSimulation(t,10);var n=new Ammo.btTransform;for(var e=0;e<this.physicsBodies.length;e++){if(!this.bodyAdded[e])continue;this.physicsBodies[e].getMotionState().getWorldTransform(n);var r=n.getOrigin();var i=new Vector3D(r.x(),r.y(),r.z());var s=n.getRotation();var o=new Quaternion;o.load(s.w(),s.x(),s.y(),s.z());this.bodyModels[e].getAttribute("sectorPosition").setValueDirect(i.x,i.y,i.z);this.bodyModels[e].getAttribute("quaternion").setValueDirect(o)}};PhysicsSimulator.prototype.isSelected=function(e){var t=e.getAttribute("selected").getValueDirect();if(!t){for(var n=0;n<e.motionChildren.length&&!t;n++){t=this.isSelected(e.motionChildren[n])}}return t};PhysicsSimulator.prototype.updatePhysicsBodies=function(){for(var e=0;e<this.bodyModels.length;e++){this.bodyModels[e].getAttribute("scale").removeModifiedCB(PhysicsSimulator_ModelScaleModifiedCB,this);this.bodyModels[e].getAttribute("parent").removeModifiedCB(PhysicsSimulator_ModelParentModifiedCB,this)}this.initPhysics();this.physicsBodies=[];this.physicsShapes=[];this.bodyAdded=[];this.bodyModels=[];for(var e=0;e<this.bodies.Size();e++){var t=this.registry.find(this.bodies.getAt(e).getValueDirect().join(""));if(!t)continue;t.getAttribute("scale").addModifiedCB(PhysicsSimulator_ModelScaleModifiedCB,this);t.getAttribute("parent").addModifiedCB(PhysicsSimulator_ModelParentModifiedCB,this);if(t.motionParent)continue;var n=this.getCompoundShape(t);var r=t.getAttribute("physicalProperties");var i=r.getAttribute("mass").getValueDirect();var s=new Ammo.btTransform;s.setIdentity();var o=t.getAttribute("sectorPosition").getValueDirect();if(i==0){o.y-=.075}s.setOrigin(new Ammo.btVector3(o.x,o.y,o.z));var u=t.getAttribute("rotation").getValueDirect();var a=new Quaternion;a.loadXYZAxisRotation(u.x,u.y,u.z);s.setRotation(new Ammo.btQuaternion(a.x,a.y,a.z,a.w));var f=i!=0;var l=new Ammo.btVector3(0,0,0);if(f){n.calculateLocalInertia(i,l)}var c=new Ammo.btDefaultMotionState(s);var h=new Ammo.btRigidBodyConstructionInfo(i,c,n,l);var p=new Ammo.btRigidBody(h);this.world.addRigidBody(p);if(f){this.bodyModels.push(t);this.physicsShapes.push(n);this.physicsBodies.push(p);this.bodyAdded.push(true)}}};PhysicsSimulator.prototype.getCompoundShape=function(e){var t=new Ammo.btCompoundShape;this.addCollisionShape(e,e.getAttribute("scale").getValueDirect(),t);return t};PhysicsSimulator.prototype.addCollisionShape=function(e,t,n){var r=this.getCollisionShape(e,t);var i=new Ammo.btTransform;i.setIdentity();n.addChildShape(i,r);for(var s=0;s<e.motionChildren.length;s++){var o=e.motionChildren[s];var u=o.getAttribute("scale").getValueDirect();u.x*=t.x;u.y*=t.y;u.z*=t.z;this.addCollisionShape(o,u,n)}};PhysicsSimulator.prototype.getCollisionShape=function(e,t){var n=new Matrix4x4;n.loadScale(t.x,t.y,t.z);var r=new Matrix4x4;var i=new Matrix4x4;var s=new Matrix4x4;if(e.motionParent){var o=e.getAttribute("sectorPosition").getValueDirect();r.loadTranslation(o.x,o.y,o.z);var u=e.getAttribute("rotation").getValueDirect();i.loadXYZAxisRotation(u.x,u.y,u.z);var a=e.getAttribute("pivot").getValueDirect();s.loadTranslation(-a.x,-a.y,-a.z)}var f=new Matrix4x4;f.loadMatrix(n.leftMultiply(s.multiply(i.multiply(r))));var l=new Ammo.btConvexHullShape;var c=e.getAttribute("vertices").getValueDirect();for(var h=0;h<c.length;h+=3){var p=f.transform(c[h],c[h+1],c[h+2],1);l.addPoint(new Ammo.btVector3(p.x,p.y,p.z))}return l};PhysicsSimulator.prototype.updatePhysicsShape=function(e){var t=-1;for(var n=0;n<this.bodyModels.length;n++){if(this.bodyModels[n]==e){t=n;break}}if(t==-1)return;var r=this.getCompoundShape(e);var i=e.getAttribute("physicalProperties");var s=i.getAttribute("mass").getValueDirect();var o=s!=0;var u=new Ammo.btVector3(0,0,0);if(o){r.calculateLocalInertia(s,u)}var a=this.physicsBodies[t].getMotionState();var f=new Ammo.btRigidBodyConstructionInfo(s,a,r,u);var l=new Ammo.btRigidBody(f);this.world.removeRigidBody(this.physicsBodies[t]);this.world.addRigidBody(l);this.physicsBodies[t]=l;this.physicsShapes[t]=r};PhysicsSimulator.prototype.restorePhysicsBody=function(e){var t=this.bodyModels[e];var n=this.physicsShapes[e];var r=new Ammo.btTransform;r.setIdentity();var i=t.getAttribute("sectorPosition").getValueDirect();r.setOrigin(new Ammo.btVector3(i.x,i.y,i.z));var s=getInspectionGroup(t);if(s){var o=s.getChild(2).getAttribute("rotationQuat").getValueDirect();var u=new Quaternion;u.load(o.w,o.x,o.y,o.z);var a=t.getAttribute("quaternion").getValueDirect();var f=new Quaternion;f.load(a.w,a.x,a.y,a.z);var l=f.multiply(u);r.setRotation(new Ammo.btQuaternion(l.x,l.y,l.z,l.w));s.getChild(2).getAttribute("rotationQuat").setValueDirect(new Quaternion)}var c=t.getAttribute("physicalProperties");var h=c.getAttribute("mass").getValueDirect();var p=h!=0;var d=new Ammo.btVector3(0,0,0);if(p){n.calculateLocalInertia(h,d)}var v=new Ammo.btDefaultMotionState(r);var m=new Ammo.btRigidBodyConstructionInfo(h,v,n,d);var g=new Ammo.btRigidBody(m);this.world.addRigidBody(g);this.physicsBodies[e]=g};PhysicsSimulator.prototype.initPhysics=function(){var e=new Ammo.btDefaultCollisionConfiguration;var t=new Ammo.btCollisionDispatcher(e);var n=new Ammo.btDbvtBroadphase;var r=new Ammo.btSequentialImpulseConstraintSolver;this.world=new Ammo.btDiscreteDynamicsWorld(t,n,r,e);var i=this.gravity.getValueDirect();this.world.setGravity(new Ammo.btVector3(i.x,i.y,i.z))};var eEventType={Unknown:-1,Render_First:0,RenderBegin:1,RenderEnd:2,Render_End:9,Mouse_First:100,MouseMove:101,MouseDown:102,MouseLeftDown:103,MouseMiddleDown:104,MouseRightDown:105,MouseAllDown:106,MouseBothDown:107,MouseWheelDown:108,MouseUp:109,MouseLeftUp:110,MouseRightUp:111,MouseMiddleUp:112,MouseWheelUp:113,MouseLeftClick:114,MouseMiddleClick:115,MouseRightClick:116,MouseLeftDblClick:117,MouseMiddleDblClick:118,MouseRightDblClick:119,MouseDrag:120,MouseWheelForward:121,MouseWheelBackward:122,MouseHover:123,MouseLeave:124,MouseOver:125,MouseOut:126,Mouse_Last:199,Key_First:200,KeyDown_First:201,KeyDown_Last:500,KeyUp_First:501,KeyUp_Last:798,Key_Last:799,Element_First:800,ElementSelected:801,ElementUnselected:802,ElementFocus:803,ElementBlur:804,Element_Last:899,UserDefined:2e3};var eEventNameMap={MButton1:eEventType.MouseLeftDown,"MButton1.Down":eEventType.MouseLeftDown,MButton2:eEventType.MouseMiddleDown,"MButton2.Down":eEventType.MouseMiddleDown,MButton3:eEventType.MouseRightDown,"MButton3.Down":eEventType.MouseRightDown,"MButton1+MButton2.Down":eEventType.MouseBothDown,"MButton2+MButton3.Down":eEventType.MouseBothDown,"MButton1+MButton3.Down":eEventType.MouseBothDown,"MButton1.Click":eEventType.MouseLeftClick,"MButton1.DoubleClick":eEventType.MouseLeftDblClick,"MButton1.Up":eEventType.MouseLeftUp,"MButton2.Click":eEventType.MouseMiddleClick,"MButton2.DoubleClick":eEventType.MouseMiddleDblClick,"MButton2.Up":eEventType.MouseMiddleUp,"MButton3.Click":eEventType.MouseRightClick,"MButton3.DoubleClick":eEventType.MouseRightDblClick,"MButton3.Up":eEventType.MouseRightUp,MWheel:eEventType.MouseWheelDown,"MWheel.Down":eEventType.MouseWheelDown,"MWheel.Click":eEventType.MouseWheelUp,"MWheel.Up":eEventType.MouseWheelUp,"Mouse.Move":eEventType.MouseMove,"Mouse.Hover":eEventType.MouseHover,"Mouse.Leave":eEventType.MouseLeave,"Mouse.Over":eEventType.MouseOver,"Mouse.Out":eEventType.MouseOut,"Element.Selected":eEventType.ElementSelected,"Element.Unselected":eEventType.ElementUnselected,"Element.Focus":eEventType.ElementFocus,"Element.Blur":eEventType.ElementBlur};var eKeyCodeMap={VK_BACK:8,VK_TAB:9,VK_ENTER:13,VK_SHIFT:16,VK_CONTROL:17,VK_ALT:18,VK_PAUSE:19,VK_CAPITAL:20,VK_ESCAPE:27,VK_PAGEUP:33,VK_PAGEDOWN:34,VK_END:35,VK_HOME:36,VK_LEFT:37,VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_INSERT:45,VK_DELETE:46,VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_A:65,VK_B:66,VK_C:67,VK_D:68,VK_E:69,VK_F:70,VK_G:71,VK_H:72,VK_I:73,VK_J:74,VK_K:75,VK_L:76,VK_M:77,VK_N:78,VK_O:79,VK_P:80,VK_Q:81,VK_R:82,VK_S:83,VK_T:84,VK_U:85,VK_V:86,VK_W:87,VK_X:88,VK_Y:89,VK_Z:90,VK_COMMA:189,VK_PERIOD:190,VK_SLASH:191};Event.prototype=new AttributeContainer;Event.prototype.constructor=Event;Event.prototype.synchronize=function(e){this.type=e.type;this.time=e.time;this.userData=e.userData};InputEvent.prototype=new Event;InputEvent.prototype.constructor=InputEvent;InputEvent.prototype.synchronize=function(e){this.inputId=e.inputId;this.modifiers=e.modifiers;this.state=e.state;Event.prototype.synchronize.call(this,e)};var MOUSEEVENT_LEFT_BUTTON=1;var MOUSEEVENT_MIDDLE_BUTTON=2;var MOUSEEVENT_RIGHT_BUTTON=4;MouseEvent.prototype=new InputEvent;MouseEvent.prototype.constructor=MouseEvent;KeyboardEvent.prototype=new InputEvent;KeyboardEvent.prototype.constructor=KeyboardEvent;EventAdapter.prototype=new AttributeContainer;EventAdapter.prototype.constructor=EventAdapter;EventAdapter.prototype.createKeyboardEvent=function(e,t){var n=new Date;var r=eEventType.Unknown;var i=n.getTime();var s=e.keyCode;var o=0;var u=0;var t=t||e.type;switch(t){case"keydown":{r=eEventType.KeyDown_First+s}break;case"keypress":{r=eEventType.KeyDown_First+s-32}break;case"keyup":{r=eEventType.KeyUp_First+s}break}var a=new KeyboardEvent(r,i,s,o,u);return a};EventAdapter.prototype.createMouseEvent=function(e){var t=new Date;var n=eEventType.Unknown;var r=t.getTime();var i=0;var s=0;var o=0;var u=e.canvasX;var a=e.canvasY;switch(e.type){case"click":{switch(e.button){case 0:n=eEventType.MouseLeftClick;break;case 1:n=eEventType.MouseMiddleDown;break;case 2:n=eEventType.MouseRightClick;break}}break;case"dblclick":{switch(e.button){case 0:n=eEventType.MouseLeftDblClick;break;case 1:n=eEventType.MouseMiddleDblClick;break;case 2:n=eEventType.MouseRightDblClick;break}}break;case"mousedown":{switch(e.button){case 0:{if(this.mouseState.rightButtonDown){n=eEventType.MouseBothDown}else{n=eEventType.MouseLeftDown}this.mouseState.leftButtonDown=true}break;case 1:{n=eEventType.MouseMiddleDown;this.mouseState.middleButtonDown=true}break;case 2:{if(this.mouseState.leftButtonDown){n=eEventType.MouseBothDown}else{n=eEventType.MouseRightDown}this.mouseState.rightButtonDown=true}break}}break;case"mouseup":{switch(e.button){case 0:{n=eEventType.MouseLeftUp;this.mouseState.leftButtonDown=false}break;case 1:{n=eEventType.MouseMiddleUp;this.mouseState.middleButtonDown=false}break;case 2:{n=eEventType.MouseRightUp;this.mouseState.rightButtonDown=false}break}}break;case"mousemove":{n=eEventType.MouseMove}break;default:{n=eEventType.UserDefined}break}if(this.mouseState.leftButtonDown)i|=MOUSEEVENT_LEFT_BUTTON;if(this.mouseState.middleButtonDown)i|=MOUSEEVENT_MIDDLE_BUTTON;if(this.mouseState.rightButtonDown)i|=MOUSEEVENT_RIGHT_BUTTON;var f=new MouseEvent(n,r,i,s,o,u,a);return f};EventListener.prototype=new Agent;EventListener.prototype.constructor=EventListener;EventListener.prototype.addEventType=function(e){this.events.push(e);var t=this.event.getValueDirect().join("");var n=new StringAttr(t);n.flagDeserializedFromXML();this.events.push(n);this.registerAttribute(n,"event")};EventListener.prototype.getEventTypes=function(){return this.events};EventListener.prototype.eventPerformed=function(e){var t=this.numResponses.getValueDirect();if(t>0){this.numResponses.setValueDirect(t-1)}};EventListener.prototype.getTrigger=function(){this.trigger};EventListener.prototype.setTrigger=function(e){if(e){this.trigger=e}};EventMgr.prototype=new AttributeContainer;EventMgr.prototype.constructor=EventMgr;EventMgr.prototype.addListener=function(e,t){if(this.listeners[e]==undefined){this.listeners[e]=[]}if(this.listeners[e].indexOf(t)==-1){this.listeners[e].push(t)}};EventMgr.prototype.removeListener=function(e,t){if(this.listeners[e]){this.listeners[e].splice(this.listeners[e].indexOf(t),1)}};EventMgr.prototype.processEvent=function(e){var t=e.type;var n=[];if(this.listeners[t]){for(var r=0;r<this.listeners[t].length;r++){this.listeners[t][r].eventPerformed(e);var i=this.listeners[t][r].getAttribute("numResponses");if(i&&i.getValueDirect()==0){n.push(this.listeners[t][r])}}}for(var r=0;r<n.length;r++){this.removeListener(t,n[r]);this.registry.unregister(n[r])}};EventMgr.prototype.clearEvents=function(){this.listeners.length=0};DeviceHandler.prototype=new EventListener;DeviceHandler.prototype.constructor=DeviceHandler;DeviceHandler.prototype.eventPerformed=function(e){this.inputMessage.setValueDirect(e.type);this.inputId.setValueDirect(e.inputId);this.inputState.setValueDirect(e.state);this.inputModifier.setValueDirect(e.modifiers)};MouseHandler.prototype=new DeviceHandler;MouseHandler.prototype.constructor=MouseHandler;MouseHandler.prototype.eventPerformed=function(e){var t=e.x;var n=e.y;switch(e.type){case eEventType.MouseMove:{}break;default:{this.lastX=t;this.lastY=n}break}this.x.setValueDirect(t);this.y.setValueDirect(n);this.deltaX.setValueDirect(this.lastX-t);this.deltaY.setValueDirect(this.lastY-n);this.delta.setValueDirect(this.lastX-t,this.lastY-n);this.lastX=t;this.lastY=n;DeviceHandler.prototype.eventPerformed.call(this,e);this.deltaX.setValueDirect(0);this.deltaY.setValueDirect(0);this.delta.setValueDirect(0,0)};KeyboardHandler.prototype=new DeviceHandler;KeyboardHandler.prototype.constructor=KeyboardHandler;KeyboardHandler.prototype.eventPerformed=function(e){};Command.prototype=new EventListener;Command.prototype.constructor=Command;Command.prototype.finalize=function(){};Command.prototype.eventPerformed=function(e){if(this.listen.getValueDirect()==true){this.execute()}EventListener.prototype.eventPerformed.call(this,e)};Command.prototype.isBorrowed=function(e){for(var t=0;t<this.borrowedAttributes.length;t++){if(e==this.borrowedAttributes[t]){return true}}return false};Command.prototype.isBorrowedAndValueModified=function(e){if(this.isBorrowed(e)){for(var t=0;t<this.attributeValuePairs.length;t++){if(e==this.attributeValuePairs[t].first){return{borrowed:true,value:this.attributeValuePairs[t].second}}}}return{borrowed:false,value:null}};Command.prototype.isBorrowedAndReferenceModified=function(e){if(this.isBorrowed(e)){for(var t=0;t<this.attributeRefPairs.length;t++){if(e==this.attributeRefPairs[t].second){return{borrowed:true,reference:this.attributeRefPairs[t].first}}}}return{borrowed:false,reference:null}};SetCommand.prototype=new Command;SetCommand.prototype.constructor=SetCommand;SetCommand.prototype.execute=function(){this.applyAttributeValues()};SetCommand.prototype.applyAttributeValues=function(){for(var e=0;e<this.attributeValuePairs.length;e++){setAttributeValue(this.attributeValuePairs[e].first,this.attributeValuePairs[e].second)}};SetCommand.prototype.registerTargetAttributes=function(e,t){var n;var r;var i=e.getAttributeCount();for(var s=0;s<i;s++){var o=e.getAttributeAt(s);var u=e.getAttributeNameAt(s);if((r=this.getAttribute(u))!=null){sName=t+"_";sName+=u}else{sName=u}this.registerAttribute(o,sName);this.borrowedAttributes.push(o)}};var gConnectionHelpers=[];ConnectAttributesCommand.prototype=new Command;ConnectAttributesCommand.prototype.constructor=ConnectAttributesCommand;ConnectAttributesCommand.prototype.finalize=function(){for(var e=0;e<this.connections.length()-2;e++){var t=this.connections.getAt(e);if(t.sourceAttribute&&t.targetAttribute){var n=new StringAttr(t.sourceAttributeName);n.flagDeserializedFromXML();this.registerAttribute(n,"sourceAttribute");var r=new StringAttr(t.targetAttributeName);r.flagDeserializedFromXML();this.registerAttribute(r,"targetAttribute")}}Command.prototype.finalize.call(this)};ConnectAttributesCommand.prototype.eventPerformed=function(e){Command.prototype.eventPerformed.call(this,e)};ConnectAttributesCommand.prototype.execute=function(){var e=this.connections.top();var t=this.persist.getValueDirect();var n=null;if(e.sourceContainer&&e.sourceContainer.attrType>=eAttrType.Evaluator&&e.sourceContainer.attrType<=eAttrType.Evaluator_End){n=e.sourceContainer}if(this.negate.getValueDirect()==false){if(this.connectionHelper.first){this.connectionHelper.first(e.sourceContainer,e.targetContainer);if(!t&&this.connectionHelper.second){if(n)n.evalute();this.connectionHelper.second(e.sourceContainer,e.targetContainer)}}else{this.addOrRemoveTargets(true);if(!t){if(n)n.evalute();this.addOrRemoveTargets(false)}}}else{if(this.connectionHelper.second){var e=this.connections.top();this.connectionHelper.second(e.sourceContainer,e.targetContainer);if(n)n.evalute()}else{this.addOrRemoveTargets(false);if(n)n.evalute()}}};ConnectAttributesCommand.prototype.addOrRemoveTargets=function(e){for(var t=0;t<this.connections.length();t++){var n=this.connections.getAt(t);if(n.sourceAttribute&&n.targetAttribute){n.sourceAttribute.removeElementTarget(n.targetAttribute,n.sourceIndex,n.targetIndex);if(e){n.sourceAttribute.addElementTarget(n.targetAttribute,n.sourceIndex,n.targetIndex)}var r=n.sourceAttribute.getContainer();if(r){var i=r.getAttribute("screenPosition");if(i&&i==n.sourceAttribute){var s=r.getAttribute("autoDisplayList");if(s){s.setValueDirect(false)}var o=r.getAttribute("enableDisplayList");if(o){o.setValueDirect(false)}}}}}};AutoInterpolateCommand.prototype=new Command;AutoInterpolateCommand.prototype.constructor=AutoInterpolateCommand;AutoInterpolateCommand.prototype.execute=function(){this.buildMotion();if(this.kfi){this.kfi.getAttribute("time").setValueDirect(0);this.kfi.getAttribute("enabled").setValueDirect(true)}};AutoInterpolateCommand.prototype.buildMotion=function(){var e=this.registry.find("AttributeFactory");this.kfi=e.create("KeyframeInterpolator");if(!this.kfi){return}this.kfi.getAttribute("enabled").setValueDirect(false);this.kfi.getAttribute("renderAndRelease").copyValue(this.renderAndRelease);for(var t=0;t<this.attributeValuePairs.length;t++){this.numValueChannels+=this.attributeValuePairs[t].first.getLength()}for(var t=0;t<this.attributeRefPairs.length;t++){this.numReferenceChannels+=this.attributeRefPairs[t].first.getLength()}this.numChannels=this.numValueChannels+this.numReferenceChannels;this.kfi.setNumChannels(this.numChannels);var n=this.preBehavior.getValueDirect();var r=this.postBehavior.getValueDirect();for(var t=0;t<this.numChannels;t++){this.kfi.getAttribute("preBehaviors").getAt(t).setValueDirect(n);this.kfi.getAttribute("postBehaviors").getAt(t).setValueDirect(r)}this.applyAttributeValues();this.applyAttributeRefs()};AutoInterpolateCommand.prototype.applyAttributeValues=function(){var e,t,n;for(e=0,n=0;n<this.attributeValuePairs.length;n++){var r=this.attributeValuePairs[n].first;var i=this.attributeValuePairs[n].second;for(t=0;t<r.getLength();t++){var s=this.kfi.getAttribute("channels").getAt(e+t);var o=new KeyframeAttr;var u=new KeyframeAttr;o.getAttribute("time").setValueDirect(0);u.getAttribute("time").setValueDirect(this.duration.getValueDirect());o.getAttribute("shape").setValueDirect(this.shape.getValueDirect());u.getAttribute("shape").setValueDirect(this.shape.getValueDirect());var a=parseFloat(r.getElement(t));var f=parseFloat(r.getLength()>1?i[t]:i);if(this.isAttributeRotational(r)){var l=this.shortestPath(a,f);a=l.start;f=l.end}o.getAttribute("value").setValueDirect(a);u.getAttribute("value").setValueDirect(f);s.push_back(o);s.push_back(u);this.kfi.getAttribute("resultValues").getAt(e+t).addElementTarget(r,0,t)}e+=t}};AutoInterpolateCommand.prototype.applyAttributeRefs=function(){var e,t,n;for(e=0,n=0;n<this.attributeRefPairs.length;n++){var r=this.attributeRefPairs[n].first;var i=this.attributeRefPairs[n].second;for(t=0;t<i.getLength();t++){var s=this.kfi.getAttribute("channels").getAt(e+t);var o=new KeyframeAttr;var u=new KeyframeAttr;o.getAttribute("time").setValueDirect(0);u.getAttribute("time").setValueDirect(this.duration.getValueDirect());o.getAttribute("shape").setValueDirect(this.shape.getValueDirect());u.getAttribute("shape").setValueDirect(this.shape.getValueDirect());var a=parseFloat(i.getElement(t));var f=parseFloat(r.getElement(t));if(this.isAttributeRotational(i)){var l=this.shortestPath(a,f);a=l.start;f=l.end}o.getAttribute("value").setValueDirect(a);u.getAttribute("value").setValueDirect(f);s.push_back(o);s.push_back(u);this.kfi.getAttribute("resultValues").getAt(e+t).addElementTarget(i,0,t)}e+=t}};AutoInterpolateCommand.prototype.registerTargetAttributes=function(e,t){var n;var r;var i=e.getAttributeCount();for(var s=0;s<i;s++){var o=e.getAttributeAt(s);var u=e.getAttributeNameAt(s);if((r=this.getAttribute(u))!=null){sName=t+"_";sName+=u}else{sName=u}this.registerAttribute(o,sName);this.borrowedAttributes.push(o)}};AutoInterpolateCommand.prototype.isAttributeRotational=function(e){var t=e.getContainer();if(t){var n=t.getAttributeName(e);if(n){if(n=="rotation"||n=="angle"){return true}}}return false};AutoInterpolateCommand.prototype.shortestPath=function(e,t){var n=degreeNormalize(e);var r=degreeNormalize(t);var i=r-n;if(i<=180&&i>=-180){return{start:e,end:t}}var s=0;if(i>180){s=360-i}else{s=360+i}e=n;if(r>n){t=n-s}else{t=n+s}return{start:e,end:t}};MotionInterpolateCommand.prototype=new AutoInterpolateCommand;MotionInterpolateCommand.prototype.constructor=MotionInterpolateCommand;MotionInterpolateCommand.prototype.execute=function(){AutoInterpolateCommand.prototype.execute.call(this)};MotionInterpolateCommand.prototype.buildMotion=function(){var e=this.registry.find("AttributeFactory");this.kfi=e.create("KeyframeInterpolator");if(!this.kfi){return}this.kfi.getAttribute("enabled").setValueDirect(false);this.kfi.getAttribute("renderAndRelease").copyValue(this.renderAndRelease);this.numChannels=3;this.kfi.setNumChannels(this.numChannels);var t=this.preBehavior.getValueDirect();var n=this.postBehavior.getValueDirect();for(var r=0;r<this.numChannels;r++){this.kfi.getAttribute("preBehaviors").getAt(r).setValueDirect(t);this.kfi.getAttribute("postBehaviors").getAt(r).setValueDirect(n)}this.setKeyframes()};MotionInterpolateCommand.prototype.setKeyframes=function(){var e=this.startPosition.getValueDirect();var t=this.endPosition.getValueDirect();var n=distanceBetween(e,t);var r=new Vector3D;r.copy(this.positionControl.getValueDirect());r.normalize();var i=new Vector3D((e.x+t.x)/2+r.x*(n/2),(e.y+t.y)/2+r.y*(n/2),(e.z+t.z)/2+r.z*(n/2));this.midPosition.setValueDirect(i.x,i.y,i.z);var s=this.easeIn.getValueDirect();var o=this.easeOut.getValueDirect();var u=this.shape.getValueDirect();var a=this.duration.getValueDirect();for(var f=0;f<this.numChannels;f++){var l=this.kfi.getAttribute("channels").getAt(f);var c=new KeyframeAttr;var h=new KeyframeAttr;var p=new KeyframeAttr;c.getAttribute("time").setValueDirect(0);h.getAttribute("time").setValueDirect(a*.5);p.getAttribute("time").setValueDirect(a);c.getAttribute("shape").setValueDirect(u);h.getAttribute("shape").setValueDirect(u);p.getAttribute("shape").setValueDirect(u);c.getAttribute("value").setValueDirect(this.startPosition.getElement(f));h.getAttribute("value").setValueDirect(this.midPosition.getElement(f));p.getAttribute("value").setValueDirect(this.endPosition.getElement(f));l.push_back(c);l.push_back(h);l.push_back(p);this.kfi.getAttribute("resultValues").getAt(f).addElementTarget(this.resultPosition,0,f)}};LocateCommand.prototype=new Command;LocateCommand.prototype.constructor=LocateCommand;LocateCommand.prototype.execute=function(){if(this.targetNode){this.locate()}};LocateCommand.prototype.locate=function(){var e=this.registry.find("Selector");var t=this.registry.find("ViewportMgr");var n=e.getAttribute("clickPoint").getValueDirect();var r=t.getViewportAtScreenXY(n.x,n.y);var i=r.camera;var s=r.viewport;this.directive.execute(this.targetNode);var o=this.directive.getBounds();this.locator.getAttribute("bbox").setValueDirect(o.min,o.max);var u=r.camera.getTransform();u.invert();this.directive.getAttribute("viewTransform").setValueDirect(u);this.directive.getAttribute("viewSpace").setValueDirect(true);this.directive.execute(this.targetNode);o=this.directive.getBounds();this.locator.getAttribute("bboxView").setValueDirect(o.min,o.max);this.locator.getAttribute("viewport").setValueDirect(s.x,s.y,s.width,s.height);var a=this.locator.getAttribute("nearDistance");var f=this.locator.getAttribute("viewVolume");var l=this.locator.getAttribute("viewPosition");var c=this.locator.getAttribute("viewTransform");var h=this.locator.getAttribute("resultPosition");var p=this.locator.getAttribute("resultWidth");var d=this.locator.getAttribute("resultFarDistance");var v=this.locator.getAttribute("resultPivotDistance");var m=null;var g=this.updateClipPlanes.getValueDirect();var y=this.transition.getValueDirect();if(this.inspector){m=this.inspector.getAttribute("pivotDistance")}if(v&&m){v.addTarget(m)}cameraNear=i.getAttribute("nearDistance");cameraFar=i.getAttribute("farDistance");cameraWidth=i.getAttribute("width");cameraVolume=i.getAttribute("viewVolume");cameraPosition=i.getAttribute("sectorPosition");cameraWorldPosition=i.getAttribute("sectorWorldPosition");cameraWorldTransform=i.getAttribute("sectorWorldTransform");cameraNear.addTarget(a);cameraVolume.addTarget(f);cameraWorldPosition.addTarget(l);cameraWorldTransform.addTarget(c);if(y==false){h.addTarget(cameraPosition);p.addTarget(cameraWidth);if(g){d.addTarget(cameraFar)}this.locator.evaluate();h.removeTarget(cameraPosition);p.removeTarget(cameraWidth);d.removeTarget(cameraFar)}else{h.addTarget(this.resultPosition);p.addTarget(this.resultWidth);if(g){d.addTarget(this.resultFarDistance)}this.locator.evaluate();h.removeTarget(this.resultPosition);p.removeTarget(this.resultWidth);d.removeTarget(this.resultFarDistance);switch(this.shape.getValueDirect()){case eKeyframeShape.Stepped:case eKeyframeShape.TCB:case eKeyframeShape.Bezier1D:case eKeyframeShape.Bezier2D:{var b=this.registry.find("AttributeFactory");var w=b.create("MotionInterpolate");w.getAttribute("shape").copyValue(this.shape);w.getAttribute("easeIn").copyValue(this.easeIn);w.getAttribute("easeOut").copyValue(this.easeOut);w.getAttribute("startPosition").copyValue(cameraPosition);w.getAttribute("endPosition").copyValue(this.resultPosition);w.getAttribute("resultPosition").addTarget(cameraPosition,eAttrSetOp.Replace,null,false);var E=i.getDirectionVectors();w.getAttribute("positionControl").setValueDirect(-E.forward.x,-E.forward.y,-E.forward.z)}break;case eKeyframeShape.Linear:default:{var b=this.registry.find("AttributeFactory");var w=b.create("AutoInterpolate");w.attributeRefPairs.push(new Pair(this.resultPosition,cameraPosition))}break}if(g){if(cameraWidth)w.attributeRefPairs.push(new Pair(this.resultWidth,cameraWidth));if(cameraFar)w.attributeRefPairs.push(new Pair(this.resultFarDistance,cameraFar))}w.target=i;w.getAttribute("duration").copyValue(this.duration);w.execute();this.registry.unregister(w)}if(v&&m){v.removeTarget(m)}};PlayCommand.prototype=new Command;PlayCommand.prototype.constructor=PlayCommand;PlayCommand.prototype.execute=function(){var e=this.registry.find("RenderAgent");if(e){if(this.evaluators.length<1){if(this.negate.getValueDirect()==false){e.setEvaluatorsPlayState(ePlayState.Play)}else{e.setEvaluatorsPlayState(ePlayState.Pause)}}else{for(var t=0;t<this.evaluators.length;t++){if(this.negate.getValueDirect()==false){e.setEvaluatorPlayState(evaluators[t],ePlayState.Play)}else{e.setEvaluatorPlayState(evaluators[t],ePlayState.Pause)}}}}};RemoveCommand.prototype=new Command;RemoveCommand.prototype.constructor=RemoveCommand;RemoveCommand.prototype.execute=function(){if(this.targetAttribute){if(this.targetAttribute.isNode()){var e=0;var t=null;while(t=this.targetAttribute.getParent(e++)){t.removeChild(this.targetAttribute)}this.removeChildren(this.targetAttribute);this.targetAttribute.onRemove()}this.registry.unregister(this.targetAttribute);this.targetAttribute.destroy()}};RemoveCommand.prototype.removeChildren=function(e){var t=null;while(t=e.getChild(0)){this.removeChildren(t);this.registry.unregister(t);e.removeChild(t)}};StopCommand.prototype=new Command;StopCommand.prototype.constructor=StopCommand;StopCommand.prototype.execute=function(){var e=this.registry.find("RenderAgent");if(e){if(this.evaluators.length<1){e.setEvaluatorsPlayState(ePlayState.Stop)}else{for(var t=0;t<this.evaluators.length;t++){e.setEvaluatorPlayState(evaluators[t],ePlayState.Stop)}}}};CommandSequence.prototype=new Command;CommandSequence.prototype.constructor=CommandSequence;CommandSequence.prototype.execute=function(){for(var e=0;e<this.sequence.length;e++){this.sequence[e].execute()}};CommandSequence.prototype.addCommand=function(e){this.sequence.push(e);var t=this.sequence.length-1;var n="Command("+t.toString()+")";this.registerAttribute(e,n)};CommandMgr.prototype=new AttributeContainer;CommandMgr.prototype.constructor=CommandMgr;CommandMgr.prototype.pushCommandSequence=function(e){this.commandSeqStack.push(e)};CommandMgr.prototype.popCommandSequence=function(){this.commandSeqStack.pop()};CommandMgr.prototype.clearCommandSequenceStack=function(){this.commandSeqStack.clear()};CommandMgr.prototype.addCommand=function(e){setAttributeBin(null);setAttributePairs(null);if(this.commandSeqStack.length()>0){this.commandSeqStack.top().addCommand(e);this.registry.unregister(e);return}var t=e.getEventTypes();var n=e.getAttribute("trigger");if(t.length>0){var r=this.registry.find("EventMgr");if(r){for(var i=0;i<t.length;i++){r.addListener(t[i],e)}}}else if(n.getLength()>0){n.addModifiedCB(CommandMgr_CommandTriggerModifiedCB,this);this.createCommandTrigger(e,n)}else{e.execute();this.registry.unregister(e)}};CommandMgr.prototype.createCommandTrigger=function(e,t){var n=0;var r=0;var i=0;var s=0;var o="";o=t.getValueDirect().join("");n=o.lastIndexOf("/");if(n!=-1){var u=o.substring(0,n);var a=bridgeworks.registry.find(u);if(a){var f=false;var l="";var c="";var h="";var p="";r=o.lastIndexOf("!");if(r>0){o.replace("!","");f=true}r=o.lastIndexOf("=");if(r>0){s=o.lastIndexOf("[");if(s>0){var d=o.lastIndexOf("]",s);c=o.substring(s+1,d-s-1)}var v=FLT_MAX;var i=o.lastIndexOf(",");if(i>0){var p=o.substring(i+1,t.length()-i-1);v=p.parseFloat()}i=i==-1?o.length:i;h=o.substring(r+1,r+(i-r))}else{s=o.lastIndexOf("[");if(s>0){var d=o.lastIndexOf("]",s);c=o.substring(s+1,d-s-1)}}r=s==-1?r==-1?o.length():r:s;l=o.substring(n+1,r);var m=a.getAttribute(l);var g=this.createAttribute(m,h);if(g){var y=-1;if(c!=""){y=parseInt(c)}var b=e.numResponses;var w=new AttributeTrigger(m,g,e,y,f,b);e.setTrigger(w)}o=u+"/"+l;console.debug(t);console.debug("\n")}}};CommandMgr.prototype.createAttribute=function(e,t){var n=null;if(e){var r=e.attrType;var i=e.getLength();n=new NumberAttr;n.setValueDirect(parseFloat(t))}return n};AttributeTrigger.prototype=new Command;AttributeTrigger.prototype.constructor=AttributeTrigger;AttributeTrigger.prototype.execute=function(){if(this.target){var e=this.trigger.attrType;switch(e){case eAttrType.StringAttr:{var t=[];var n=[];this.input.getValue(t);this.trigger.getValue(n);var r=t[0]==n[0]?true:false;r=this.not?!r:r;if(r){var i=this.executionCount.getValueDirect()-1;this.executionCount.setValueDirect(i)}if(this.executionCount==0){this.target=null}}break;default:{var t=[];var n=[];this.input.getValue(t);this.trigger.getValue(n);if(this.item!=-1){var r=t[this.item]==n[0]||this.lastValues[this.item]>t[this.item]&&t[this.item]<n[0]||this.lastValues[this.item]<t[this.item]&&t[this.item]>n[0];r=this.not?!r:r;if(r){this.target.execute();var i=this.executionCount.getValueDirect()-1;this.executionCount.setValueDirect(i)}}else{var s=this.input.getLength();var o=0;for(var u=0;u<s;++u){var r=t[u]==n[u]||this.lastValues[u]>t[u]&&t[u]<n[u]||this.lastValues[u]<t[u]&&t[u]>n[u];r=this.not?!r:r;if(r){++o}}if(o=s){err=this.target.execute();this.executionCount.setValueDirect(--this.executionCount)}}if(this.executionCount.getValueDirect()==0){this.target=null;this.input.removeModifiedCB(AttributeTrigger_InputModifiedCB,this)}else{this.lastValues=t}}break}}return};BwRegistry.prototype=new AttributeRegistry;BwRegistry.prototype.constructor=BwRegistry;BwRegistry.prototype.find=function(e){if(!e)return null;var t=[];var n=0;while((n=e.indexOf("/"))>-1){t.push(e.substring(0,n));e=e.substring(n+1,e.length)}t.push(e);var r=this.getByName(t[0]);if(r)r=r[0];for(var i=1;i<t.length&&r;i++){r=r.getAttribute(t[i])}return r};BwRegistry.prototype.findContext=function(e,t){};BwRegistry.prototype.registerResource=function(e){if(e.isNode()&&e.getAttribute("orphan").getValueDirect()==false){this.updateTree(e)}};BwRegistry.prototype.finalizeResource=function(e){if(e.isNode()&&e.getParentCount()>0){this.subtreePtr.setValueDirect(e.getParent(0))}};BwRegistry.prototype.register=function(e){AttributeRegistry.prototype.register.call(this,e)};BwRegistry.prototype.unregister=function(e){AttributeRegistry.prototype.unregister.call(this,e)};BwRegistry.prototype.clear=function(){this.rootPtr.setValueDirect(null);this.subtreePtr.setValueDirect(null);this.sgPointer.setValueDirect(null);AttributeRegistry.prototype.clear.call(this)};BwRegistry.prototype.updateTree=function(e){var t=this.rootPtr.getValueDirect();var n=this.subtreePtr.getValueDirect();if(t==null){t=n=e}else{if(n){n.addChild(e)}else{t.addChild(e)}n=e}this.rootPtr.setValueDirect(t);this.subtreePtr.setValueDirect(n)};BwRegistry.prototype.updateMaxAnimationTime=function(){};BwRegistry.prototype.formatContext=function(e,t){};BwRegistry.prototype.sgPointerModified=function(){var e=this.find(this.sgPointer.getValueDirect().join(""));if(e){this.subtreePtr.setValueDirect(e)}};BwSceneInspector.prototype=new SceneInspector;BwSceneInspector.prototype.constructor=BwSceneInspector;BwSceneInspector.prototype.evaluate=function(){SceneInspector.prototype.evaluate.call(this)};BwSceneInspector.prototype.translate=function(e){if(e.x==0&&e.y==0&&e.z==0){return}var t=this.translationSensitivity.getValueDirect();e.x*=t.x;e.y*=t.y;e.z*=t.z;var n=[e.x,e.y,e.z];var r=new AttributeSetParams(-1,-1,0,true,false);this.translationDelta.setValue(n,r);this.evaluate();var i=[0,0,0];this.translationDelta.setValue(i,r);this.invertedTranslationDelta.setValue(i,r)};BwSceneInspector.prototype.pan=function(e){if(e.x==0&&e.y==0&&e.z==0){return}if(this.worldUnitsPerPixel.x==0&&this.worldUnitsPerPixel.y==0){var t=this.getWorldUnitsPerPixel(this.pivotDistance.getValueDirect());this.worldUnitsPerPixel.x=t.x;this.worldUnitsPerPixel.y=t.y}var n=this.panSensitivity.getValueDirect();e.x*=n.x*this.worldUnitsPerPixel.x;e.y*=n.y*this.worldUnitsPerPixel.y;e.z*=n.z*this.worldUnitsPerPixel.y;var r=[e.x,e.y,e.z];var i=new AttributeSetParams(-1,-1,0,true,false);this.panDelta.setValue(r,i);if(e.z!=0){var s=this.pivotDistance.getValueDirect();s-=e.z;this.pivotDistance.setValueDirect(s)}this.evaluate();var o=[0,0,0];this.panDelta.setValue(o,i);this.invertedPanDelta.setValue(o,i)};BwSceneInspector.prototype.track=function(e){if(e.x==0&&e.y==0&&e.z==0){return}if(this.camera==null||this.camera.attrType==eAttrType.OrthographicCamera){return}if(this.viewport.width<=0||this.viewport.height<=0){return}if(this.worldUnitsPerPixel.x==0&&this.worldUnitsPerPixel.y==0){var t=this.getWorldUnitsPerPixel(this.pivotDistance.getValueDirect());this.worldUnitsPerPixel.x=t.x;this.worldUnitsPerPixel.y=t.y}var n=this.trackSensitivity.getValueDirect();e.x*=n.x*this.worldUnitsPerPixel.x;e.y*=n.y*this.worldUnitsPerPixel.y;if(e.z!=0){var r=this.camera.getAttribute("position").getValueDirect();var i=this.camera.getAttribute("rotation").getValueDirect();var s=r.y-this.clickPosWorld.y;var o=distanceBetween(r,this.clickPosWorld);var u=Math.sqrt(o*o-s*s);var a=this.camera.getAttribute("zoom").getValueDirect();var f=2*Math.atan2(1,a);var l=f/this.viewport.height;var c=Math.acos(s/o);var h=c+e.z*l;var p=Math.tan(h)*s;var d=p-u;if(c>=toRadians(88)&&c<=toRadians(92)){if(d<0){d=-Math.abs(this.last_d3)}else{d=Math.abs(this.last_d3)}}var m=i;var g=Math.abs(i.z);var y=false;if(g>=90&&g<=270){if(i.x>-45&&i.x<45){y=true}}if(y){d=-d}this.last_d3=d;e.z=d*n.z*(s<0?-1:1);var b=this.camera.getDirectionVectors();v=new Vector3D(b.forward.x,b.forward.y,b.forward.z);v.y=0;v.normalize();var w=subtract3D(this.clickPosWorld,r);w.y=0;w.normalize();var E=cosineAngleBetween(w,v);var S=Math.acos(E);var x=2*Math.atan(this.viewport.width/this.viewport.height*Math.tan(f/2));var T=x/this.viewport.width;var N;var C=this.registry.find("Selector");if(C){N=C.getAttribute("clickPoint").getValueDirect()}var k=Math.abs(this.viewport.width/2-N.x)*T;S=k;var L=Math.tan(S)*d;var A=new Plane(r,b.right);if(pointOnNegativeSideOfPlane(this.clickPosWorld,A)){L*=-1}if(y){L*=-1}e.x+=-L}var O=[e.x,e.y,e.z];var M=new AttributeSetParams(-1,-1,0,true,false);this.trackDelta.setValue(O,M);this.evaluate();var _=[0,0,0];this.trackDelta.setValue(_,M);this.invertedTrackDelta.setValue(_,M)};BwSceneInspector.prototype.rotate=function(e){if(e.x==0&&e.y==0&&e.z==0){return}var t=this.rotationSensitivity.getValueDirect();e.x*=t.x;e.y*=t.y;e.z*=t.z;var n=[e.x,e.y,e.z];var r=new AttributeSetParams(-1,-1,0,true,false);this.rotationDelta.setValue(n,r);this.evaluate();var i=[0,0,0];this.rotationDelta.setValue(i,r);this.invertedRotationDelta.setValue(i,r)};BwSceneInspector.prototype.zoom=function(e){if(e==0){return}if(!this.camera){return}switch(this.camera.className){case"PerspectiveCamera":{var t=this.camera.getAttribute("zoom").getValueDirect();t+=e*this.zoomSensitivity.getValueDirect();if(t<0)t=.05;this.camera.getAttribute("zoom").setValueDirect(t)}break;case"OrthographicCamera":{var n=this.camera.getAttribute("width").getValueDirect();n+=e*this.zoomSensitivity.getValueDirect();if(n<0)n=0;this.camera.getAttribute("width").setValueDirect(n)}break}};BwSceneInspector.prototype.getWorldUnitsPerPixel=function(e){var t=0;var n=0;var r=this.registry.find("Selector");if(r){var i=r.selections.viewports[r.selections.viewports.length-1];if(this.camera){switch(this.camera.attrType){case eAttrType.PerspectiveCamera:{var s=this.camera.getAttribute("zoom").getValueDirect();var o=worldUnitsPerPixelPersp(i,s,e);t=o.x;n=o.y}break;case eAttrType.OrthographicCamera:{var u=this.camera.getAttribute("width").getValueDirect();var o=worldUnitsPerPixelOrtho(i,u);t=o.x;n=o.y}break}}}return{x:t,y:n}};ObjectInspector.prototype=new ArcballInspector;ObjectInspector.prototype.constructor=ObjectInspector;ObjectInspector.prototype.applyCameraRelativeRotation=function(e){var t;var n=null;var r=null;var i=null;var s=null;var o=null;var u=this.viewport;var a=this.camera;n=e.worldCenter.getValueDirect();i=a.getTransform();i.invert();projection=a.projectionMatrix;r=toScreenSpace(n,i,projection,u);this.sphereCenter.setValueDirect(r.x,r.y,0);this.sphereRadius.setValueDirect(.75);o=e.getTransform();this.worldTransform.setValueDirect(o);i=a.getTransform();this.viewTransform.setValueDirect(i)};ObjectInspector.prototype.applyCameraRelativeTranslation=function(e){var t=this.camera;var n=this.translationDelta.getValueDirect();if(n.x==0&&n.y==0&&n.z==0){return}var r=t.getSectorTransform();r.invert();var i=e.sectorWorldCenter.getValueDirect();var s=t.sectorWorldPosition.getValueDirect();var o=new Vector3D(i.x-s.x,i.y-s.y,i.z-s.z);o.normalize();var u=this.viewport;var a=this.pointView.getValueDirect();var f=new Vector3D(a.x,a.y,a.z);var l=null;var c=new Vector3D(1,0,0);var h=new Vector3D(0,1,0);var p=new Vector3D(o.x,o.y,o.z);var d=new Vector3D(a.x,a.y,a.z);var v=e.motionParent;var m=null;if(v){m=v.getTransform();m.invert()}var g=-1;var y=-1;switch(t.attrType){case eAttrType.PerspectiveCamera:{y=t.zoom.getValueDirect();g=worldUnitsPerPixelPersp(u,y,f.z)}break;case eAttrType.OrthographicCamera:{y=t.width.getValueDirect();g=worldUnitsPerPixelOrtho(u,y)}break;default:break}c.multiplyScalar(g.x);c.multiplyScalar(-n.x);h.multiplyScalar(g.y);h.multiplyScalar(n.y);p.multiplyScalar(g.y);p.multiplyScalar(n.z);d.addVector(c);d.addVector(h);r.invert();if(m){r=r.multiply(m);p=m.transform(p.x,p.y,p.z,0)}f=r.transform(f.x,f.y,f.z,1);d=r.transform(d.x,d.y,d.z,1);l=new Vector3D(d.x,d.y,d.z);l.subtractVector(f);l.addVector(p);var b=new AttributeSetParams(-1,-1,eAttrSetOp.Add,true,true);var w=[l.x,l.y,l.z];e.sectorPosition.setValue(w,b);var E=e.sectorPosition.getValueDirect()};ObjectInspector.prototype.translationDeltaModified=function(){var e=null;for(var t=0;t<this.selectedObjects.length;t++){e=this.getInspectionObject(this.selectedObjects[t]);if(!e){continue}var n=e.getAttribute("moveable").getValueDirect();if(!n){continue}this.applyCameraRelativeTranslation(e)}var r=[0,0,0];var i=new AttributeSetParams(0,0,0,true,false);this.translationDelta.setValue(r,i)};ObjectInspector.prototype.rotationDeltaModified=function(){var e=null;for(var t=0;t<this.selectedObjects.length;t++){e=this.getInspectionObject(this.selectedObjects[t]);if(!e){continue}var n=e.moveable.getValueDirect();if(!n){continue}this.applyCameraRelativeRotation(e);var r=this.mouseNow.getValueDirect();var i=this.rotationDelta.getValueDirect();r.x-=i.x;r.y-=i.y;this.mouseNow.setValueDirect(r.y,r.x);this.evaluate()}};ObjectInspector.prototype.rotationNowModified=function(){if(this.selectedObjects==null||this.selectedObjects==undefined)return;var e=null;for(var t=0;t<this.selectedObjects.length;t++){e=this.getInspectionObject(this.selectedObjects[t]);var n=e.moveable.getValueDirect();if(n){this.applyCameraRelativeRotation(e);var r=this.rotationNow.getValueDirect();this.mouseNow.setValueDirect(r.y,r.x);this.evaluate()}}};ObjectInspector.prototype.runSelectionOccurred=function(){var e=this.registry.find("Selector");var t=this.registry.find("ViewportMgr");if(!e||!t){return}var n=e.getAttribute("clickPoint").getValueDirect();var r=t.getViewportAtScreenXY(n.x,n.y);this.viewport=r.viewport;this.camera=r.camera;this.selectedObjects=e.selections.models.slice();var i=this.resultQuat;var s=this.quatAtMouseDown;var o=this.mouseDown;var u=this.mouseNow;var a=null;var f=null;var l=null;var c=null;var h=null;var p=null;var d=null;var v=null;var m=null;var g=0;var y=0;for(var b=0;b<this.selectedObjects.length;b++){i.removeAllTargets();o.setValueDirect(n.x,n.y);u.setValueDirect(n.x,n.y);a=this.getInspectionObject(this.selectedObjects[b]);c=getInspectionGroup(a);if(c&&(h=c.getChild(2))){var w=[true];var E=new AttributeSetParams(-1,-1,eAttrSetOp.Replace,true,true);h.enabled.setValue(w,E);v=h.rotationQuat;i.addTarget(v,eAttrSetOp.Replace,null,false);var S=v.getValueDirect();s.setValueDirect(S);var x=a.bbox;var T=x.min.getValueDirect();var N=x.max.getValueDirect();g=new Vector3D(T.x,T.y,T.z);g.addVector(N);g.multiplyScalar(.5);var C=a.pivot.getValueDirect();if(a.pivotAboutGeometricCenter.getValueDirect()){C=g}var k=new Vector3D(C.x,C.y,C.z);k.multiplyScalar(-1);w=[C.x,C.y,C.z];c.getChild(0).translation.setValue(w,E);var L=a.worldScale.getValueDirect();var A=new Vector3D(1/L.x,1/L.y,1/L.z);w[0]=A.x;w[1]=A.y;w[2]=A.z;c.getChild(1).scale.setValue(w,E);w[0]=L.x;w[1]=L.y;w[2]=L.z;c.getChild(3).scale.setValue(w,E);w[0]=k.x;w[1]=k.y;w[2]=k.z;c.getChild(4).translation.setValue(w,E)}}};ObjectInspector.prototype.runSelectionCleared=function(){this.selectedObjects=[]};ObjectInspector.prototype.getInspectionObject=function(e){if(e.motionParent){return e.motionParent}return e};ConnectionMgr.prototype=new AttributeContainer;ConnectionMgr.prototype.constructor=ConnectionMgr;ConnectionMgr.prototype.connectSceneInspection=function(e,t){if(!e||!t)return;var n=e.getCamera();if(n==t){return}else if(n){this.disconnectSceneInspection(e,n)}t.getAttribute("sectorPosition").addTarget(e.getAttribute("viewPosition"),eAttrSetOp.Replace,null,true);t.getAttribute("rotation").addTarget(e.getAttribute("viewRotation"),eAttrSetOp.Replace,null,true);e.getAttribute("resultPosition").addTarget(t.getAttribute("sectorPosition"),eAttrSetOp.Replace,null,false);e.getAttribute("resultRotation").addTarget(t.getAttribute("rotation"),eAttrSetOp.Replace,null,false);e.setCamera(t)};ConnectionMgr.prototype.disconnectAllTargets=function(e,t){if(e){var n=e.getAttributeCount();for(var r=0;r<n;r++){var i=e.getAttributeAt(r);if(i){i.removeAllTargets()}}}};ConnectionMgr.prototype.disconnectSceneInspection=function(e,t){if(!e||!t)return;t.getAttribute("sectorPosition").removeTarget(e.getAttribute("viewPosition"));t.getAttribute("rotation").removeTarget(e.getAttribute("viewRotation"));e.getAttribute("resultPosition").removeTarget(t.getAttribute("sectorPosition"));e.getAttribute("resultRotation").removeTarget(t.getAttribute("rotation"));e.setCamera(null)};ConnectionMgr.prototype.connectMapProjectionCalculator=function(e,t){if(!e||!t)return;e.getAttribute("resultPosition").addTarget(t.getAttribute("position"));e.evaluate()};ConnectionMgr.prototype.disconnectMapProjectionCalculator=function(e,t){if(!e||!t)return;e.getAttribute("resultPosition").removeTarget(t.getAttribute("position"))};ConnectionMgr.prototype.connectDissolve=function(e,t){if(!e||!t)return;var n=t.getAttribute("dissolve");if(n){var r=e.getAttribute("resultValues");if(r){var i=r.getAt(0);if(i){i.addTarget(n)}}}};ConnectionMgr.prototype.disconnectDissolve=function(e,t){if(!e||!t)return;var n=t.getAttribute("dissolve");if(n){var r=e.getAttribute("resultValues");if(r){var i=r.getAt(0);if(i){i.removeTarget(n)}}}};ConnectionMgr.prototype.connectWalkSimulation=function(e,t){ConnectionMgr.prototype.connectSceneInspection.call(null,e,t)};ConnectionMgr.prototype.disconnectWalkSimulation=function(e,t){ConnectionMgr.prototype.disconnectSceneInspection.call(null,e,t)};ConnectionMgr.prototype.connectModelsToMorph=function(e,t,n){if(!e||!t)return;var r=this.registry.find("AttributeFactory");var i=t.getAttribute("vertices").getValueDirect();for(var s=0;s<e.geometry.length;s++){var o=e.geometryIndices[s];if(!o)continue;var u=r.create("MorphEffector");u.getAttribute("renderAndRelease").setValueDirect(true);u.getAttribute("morphIncr").setValueDirect(n);var a=e.geometry[s].getAttribute("vertices").getValueDirect();u.getAttribute("sourceVertices").setValueDirect(a);var f=[];for(var l=0;l<o.length;l++){var c=o[l];if(c*3+2<i.length){f.push(i[c*3]);f.push(i[c*3+1]);f.push(i[c*3+2])}else{f.push(a[l*3]);f.push(a[l*3+1]);f.push(a[l*3+2])}}u.getAttribute("targetVertices").setValueDirect(f);u.getAttribute("resultVertices").addTarget(e.geometry[s].getAttribute("vertices"))}};RenderAgent.prototype=new Agent;RenderAgent.prototype.constructor=RenderAgent;var ePlayState={Unknown:-1,Play:0,Pause:1,Stop:2};RenderAgent.prototype.render=function(){this.timer.stop();var e=this.timer.getTime();this.timer.start();this.timeIncrement.setValueDirect(e);var t=this.elapsedTimeInSecs.getValueDirect()+e;this.elapsedTimeInSecs.setValueDirect(t);this.frameRate.setValueDirect(1/e);this.animateEvaluators(e);this.executeRenderDirectives()};RenderAgent.prototype.animateEvaluators=function(e){var t=this.registry.getByType(eAttrType.Evaluator);for(var n=0;n<t.length;n++){this.animateEvaluator(t[n],e)}};RenderAgent.prototype.animateEvaluator=function(e,t){var n=e.getAttribute("enabled").getValueDirect();var r=e.getAttribute("expired").getValueDirect();var i=e.getAttribute("orphan").getValueDirect();if(n&&!r){switch(e.className){case"KeyframeInterpolator":{var s=new AttributeSetParams(-1,-1,eAttrSetOp.Add,true,true);e.getAttribute("time").setValue(t,s)}break;case"ObjectMover":case"AnimalMover":case"PhysicsSimulator":{e.getAttribute("timeIncrement").setValueDirect(t)}}if(!i)e.evaluate()}if(r&&e.getAttribute("renderAndRelease").getValueDirect()){this.registry.unregister(e)}};RenderAgent.prototype.executeRenderDirectives=function(){var e=this.registry.getByType(eAttrType.RenderDirective);if(e){this.bridgeworks.viewportMgr.layoutDirectives(e);for(var t=0;t<e.length;t++){e[t].getAttribute("timeIncrement").setValueDirect(this.timeIncrement.getValueDirect());e[t].execute()}}};RenderAgent.prototype.globalTimeInSecsModified=function(){var e=this.globalTimeInSecs.getValueDirect();this.elapsedTimeInSecs.setValueDirect(e);if(this.registry){var t=this.registry.getByType(eAttrType.Evaluator);if(t){for(var n=0;n<t.length;n++){var r=t[n];if(r){var i=r.getAttribute("time");if(i){var s=r.getAttribute("globalTimeSyncEnabled");if(s&&s.getValueDirect()||!s){i.setValueDirect(e)}}r.evaluate()}}}var o=this.registry.getByType(eAttrType.Model);if(o){for(var n=0;n<o.length;n++){setInspectionGroupActivationState(o[n],false)}}}};RenderAgent.prototype.setEvaluatorPlayState=function(e,t){if(!e){return this.setEvaluatorPlayState(t)}var n=e.getAttribute("enabled");switch(t){case ePlayState.Play:{n.setValueDirect(true)}break;case ePlayState.Pause:{n.setValueDirect(false)}break;case ePlayState.Stop:{n.setValueDirect(false);switch(e.className){case"KeyframeInterpolator":{e.getAttribute("time").setValueDirect(0);e.evaluate()}}}break}clearObjectPositionMap()};RenderAgent.prototype.setEvaluatorsPlayState=function(e){if(this.registry){var t=this.registry.getByType(eAttrType.Evaluator);if(t){for(i=0;i<t.length;i++){var n=t[i];var r=n.attrType;var s=n.getAttribute("orphan").getValueDirect();if(!s){this.setEvaluatorPlayState(n,e)}}}}};RenderAgent.prototype.setDesiredFrameRate=function(e){this.desiredFrameRate.setValueDirect(e)};var FRAME_RATE_DEFAULT=30;var FRAME_RATE_MAX=FRAME_RATE_DEFAULT*32;var FRAME_RATE_MIN=FRAME_RATE_DEFAULT*-32;RenderController.prototype=new AttributeContainer;RenderController.prototype.constructor=RenderController;RenderController.prototype.fastForward=function(){this.play();var e=this.renderAgent.frameRate.getValueDirect();if(e<0){this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_DEFAULT)}if(e<FRAME_RATE_MAX){this.renderAgent.desiredFrameRate.setValueDirect(Math.abs(this.renderAgent.frameRate)*2)}else{this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_MAX)}};RenderController.prototype.pause=function(){this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_DEFAULT);this.renderAgent.setEvaluatorsPlayState(ePlayState.Pause)};RenderController.prototype.play=function(){this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_DEFAULT);this.renderAgent.setEvaluatorsPlayState(ePlayState.Play)};RenderController.prototype.rewind=function(){this.play();var e=this.renderAgent.frameRate.getValueDirect();if(e>0){this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_DEFAULT)}if(e>FRAME_RATE_MIN){this.renderAgent.desiredFrameRate.setValueDirect(Math.abs(this.renderAgent.frameRate)*-2)}else{this.renderAgent.desiredFrameRate.setValueDirect(FRAME_RATE_MIN)}};RenderController.prototype.stop=function(){this.renderAgent.setEvaluatorsPlayState(ePlayState.Stop);this.renderAgent.desiredFrameRate.setValueDirect(1)};SelectionListener.prototype=new EventListener;SelectionListener.prototype.constructor=SelectionListener;SelectionListener.prototype.setRayPick=function(e){this.rayPick=e;var t=this.rayPick.getAttribute("clickPoint");this.registerAttribute(t,"clickPoint");t.addModifiedCB(SelectionListener_ClickPointModifiedCB,this)};SelectionListener.prototype.eventPerformed=function(e){switch(e.type){case eEventType.MouseMove:{if(e.inputId&MOUSEEVENT_LEFT_BUTTON||e.inputId&MOUSEEVENT_MIDDLE_BUTTON||e.inputId&MOUSEEVENT_RIGHT_BUTTON)return}break}this.clearSelections();this.getAttribute("clickPoint").setValueDirect(e.x,e.y)};SelectionListener.prototype.registerSelection=function(e,t){if(this.selected)return;this.selected=e;var n=e.getAttribute("selected");if(n){n.setValueDirect(1)}var r=this.selected.getContainer();this.registerAttribute(this.selected,"Selected");this.selected.setContainer(r);var i=e.getAttribute("name").getValueDirect().join("");this.selectedName.setValueDirect(i);if(t>=0){this.selectedElement.setValueDirect(t);this.selected.registerAttribute(this.selectedElement,"selectedElement")}};SelectionListener.prototype.clearSelections=function(){this.selections.clear();this.selectedElement.setValueDirect(-1);if(this.selected){var e=this.selected.getAttribute("selected");if(e){e.setValueDirect(0)}if(this.selected.getAttribute("selectedElement")){this.selected.unregisterAttribute(this.selectedElement)}this.selectedName.setValueDirect("");this.unregisterAttribute(this.selected);this.selected=null}this.selectionCleared.pulse()};SelectionListener.prototype.processPick=function(e){for(var t=0;t<e.path.length;t++){var n=e.path[t];var r=n.getAttribute("selectable");var i=n.getAttribute("show");var s=n.getAttribute("flipPolygons");if(r&&r.getValueDirect()==false||i&&i.getValueDirect()==false||s&&s.getValueDirect()==true){continue}var o=-1;switch(n.attrType){case eAttrType.PerspectiveCamera:case eAttrType.OrthographicCamera:{this.selections.cameras.push(n)}break;case eAttrType.DirectionalLight:case eAttrType.PointLight:case eAttrType.SpotLight:{this.selections.lights.push(n)}break;case eAttrType.Model:{this.selections.models.push(n);this.registerSelection(n,o)}break;case eAttrType.Surface:{this.selections.surfaces.push(n)}break;case eAttrType.Label:{this.selections.labels.push(n);this.registerRasterComponentSelection(n,o)}}}if(this.selected){this.pointObject.setValueDirect(e.intersectRecord.pointModel.x,e.intersectRecord.pointModel.y,e.intersectRecord.pointModel.z);this.pointWorld.setValueDirect(e.intersectRecord.pointWorld.x,e.intersectRecord.pointWorld.y,e.intersectRecord.pointWorld.z);this.pointView.setValueDirect(e.intersectRecord.pointView.x,e.intersectRecord.pointView.y,e.intersectRecord.pointView.z);this.triIndex.setValueDirect(e.intersectRecord.triIndex);this.distance.setValueDirect(e.intersectRecord.distance)}return this.selected?true:false};SelectionListener.prototype.processPicks=function(e){for(var t=0;t<e.length;t++){if(this.processPick(e[t])==true){return true}}return false};SelectionListener.prototype.registerRasterComponentSelection=function(e,t){if(this.selected){var n=this.selected;if(n){var r=e.renderedSlot.getValueDirect();var i=n.renderedSlot.getValueDirect();if(r>i){return this.registerSelection(e,t,true)}}}else{this.registerSelection(e,t)}};SelectionListener.prototype.clickPointModified=function(){var e=this.getAttribute("clickPoint").getValueDirect();var t=this.registry.find("ViewportMgr");var n=t.getViewportAtScreenXY(e.x,e.y);this.selections.viewports.push(n.viewport);this.rayPick.getAttribute("viewport").setValueDirect(n.viewport.x,n.viewport.y,n.viewport.width,n.viewport.height);this.rayPick.getAttribute("camera").setValueDirect(n.camera);var r=this.registry.getAttribute("rootPtr").getValueDirect();this.rayPick.execute(r);if(this.rayPick.picked.length>0){this.processPicks(this.rayPick.picked);this.selectionOccurred.pulse()}this.updateDistanceFromScreenCenter(r);this.updateSceneInspectionCamera(n.camera)};SelectionListener.prototype.updateDistanceFromScreenCenter=function(e){if(this.computePivotDistance.getValueDirect()==false){return}var t=this.registry.find("Bridgeworks");if(!t)return;var n=t.canvas.width/2;var r=t.canvas.height/2;var i=this.rayPick.getAttribute("clickPoint").getValueDirect();var s=new AttributeSetParams(-1,-1,0,false,false);this.rayPick.getAttribute("clickPoint").setValueDirect(n,r,s);this.rayPick.execute(e);var o=false;for(var u=0;u<this.rayPick.picked.length&&!o;u++){if(this.rayPick.picked[u].intersectRecord.distance!=0){this.distanceFromScreenCenter.setValueDirect(this.rayPick.picked[u].intersectRecord.distance);o=true;break}}this.rayPick.getAttribute("clickPoint").setValueDirect(i.x,i.y,s)};SelectionListener.prototype.updateSceneInspectionCamera=function(e){var t=this.registry.find("SceneInspector");if(t){if(t.getCamera()==e)return;var n=this.registry.find("ConnectionMgr");if(n){n.disconnectSceneInspection(t,t.getCamera());n.connectSceneInspection(t,e)}}};ViewportLayout.prototype=new AttributeContainer;ViewportLayout.prototype.constructor=ViewportLayout;ViewportLayout.prototype.initialize=function(){};ViewportLayout.prototype.layoutDirectives=function(e){};GridLayout.prototype=new ViewportLayout;GridLayout.prototype.constructor=GridLayout;GridLayout.prototype.initialize=function(){this.rows.setValueDirect(1);this.cols.setValueDirect(1);ViewportLayout.prototype.initialize.call(this)};GridLayout.prototype.layoutDirectives=function(e){if(!e){return}var t=this.width.getValueDirect();var n=this.height.getValueDirect();var r=this.rows.getValueDirect();var i=this.cols.getValueDirect();if(t<=0||n<=0||r<=0||i<=0){return}var s=0;var o=0;var u=t/i;var a=n/r;var f=new Array(4);var l=e.length;for(var c=0,h=0;c<r&&h<l;c++){for(var p=0;p<i&&h<l;p++,h++){f[0]=s;f[1]=o;f[2]=u;f[3]=a;e[h].getAttribute("viewport").setValue(f);s+=u}s=0;o+=a}};ViewportMgr.prototype=new AttributeContainer;ViewportMgr.prototype.constructor=ViewportMgr;ViewportMgr.prototype.initLayout=function(){var e=this.layout.getValueDirect();if(e){e.initialize()}};ViewportMgr.prototype.layoutDirectives=function(e){var t=this.layout.getValueDirect();if(t){t.layoutDirectives(e)}};ViewportMgr.prototype.getViewportAtScreenXY=function(e,t){var n=this.width.getValueDirect();var r=this.height.getValueDirect();e=clamp(e,0,n);t=clamp(t,0,r);var i=this.registry.getByType(eAttrType.Camera);var s=n;var o=r;var u,a;for(var f=0;f<i.length;f++){if(i[f].viewport.containsPoint(e,t)&&i[f].viewport.width<=s&&i[f].viewport.height<=o){u=i[f];a=i[f].viewport;s=i[f].viewport.width;o=i[f].viewport.height}}return{viewport:a,camera:u}};RasterComponentEventListener.prototype=new EventListener;RasterComponentEventListener.prototype.constructor=Command;RasterComponentEventListener.prototype.eventPerformed=function(e){var t=this.enabled.getValueDirect();if(!t){return}var n,r,i;for(var s=0;s<this.rcs.length;s++){if(!this.isListening(this.rcs[s])){continue}r=this.rcsSelectionState[s];n=this.rcs[s].eventPerformed(e);if(this.styleMgr){if(n){this.styleMgr.eventPerformed(e,this.rcs[s]);switch(e.type){case eEventType.MouseLeftClick:{if(this.isListeningEvent(this.rcs[s],eEventType.ElementFocus)&&this.rcs[s].hasFocus.getValueDirect()<=0){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.ElementFocus;i=m_rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s]);this.rcs[s].hasFocus.setValueDirect(1)}}break;case eEventType.MouseMove:{if(this.isListeningEvent(this.rcs[s],eEventType.ElementSelected)&&this.rcs[s].selected.getValueDirect()<=0){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.ElementSelected;i=this.rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s]);this.rcs[s].selected.setValueDirect(1)}if(!r&&this.isListeningEvent(this.rcs[s],eEventType.MouseOver)){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.MouseOver;i=this.rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s])}}break}}else{switch(e.type){case eEventType.MouseLeftDown:case eEventType.MouseLeftClick:case eEventType.MouseLeftDblClick:case eEventType.MouseMiddleDown:case eEventType.MouseMiddleClick:case eEventType.MouseMiddleDblClick:case eEventType.MouseRightDown:case eEventType.MouseRightClick:case eEventType.MouseRightDblClick:case eEventType.MouseWheelDown:case eEventType.MouseBothDown:{if(this.isListeningEvent(this.rcs[s],eEventType.ElementBlur)&&this.rcs[s].hasFocus.getValueDirect()>0){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.ElementBlur;i=this.rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s]);this.rcs[s].hasFocus.setValueDirect(-1)}}break;case eEventType.MouseMove:{if(this.isListeningEvent(this.rcs[s],eEventType.ElementUnselected)&&this.rcs[s].selected.getValueDirect()>0){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.ElementUnselected;i=this.rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s]);this.rcs[s].selected.setValueDirect(-1)}if(r&&this.isListeningEvent(this.rcs[s],eEventType.MouseOut)){this.selectionEvent.synchronize(e);this.selectionEvent.type=eEventType.MouseOut;i=this.rcs[s].eventPerformed(this.selectionEvent);this.styleMgr.eventPerformed(this.selectionEvent,this.rcs[s])}}break}}}this.rcsSelectionState[s]=n}};RasterComponentEventListener.prototype.registerComponent=function(e,t){if(e){if(t){var n=this.rcs.indexOf(t);if(n<0)n=this.rcs.length;this.rcs.splice(n,0,e);this.rcsSelectionState.splice(n,0,e)}else{this.rcs.push(e);this.rcsSelectionState.push(e)}}};RasterComponentEventListener.prototype.unregisterComponent=function(e){if(e){this.rcs.splice(this.rcs.indexOf(e),1)}};RasterComponentEventListener.prototype.Listen=function(e){if(e){this.rcListenMap[e]=true}};RasterComponentEventListener.prototype.Ignore=function(e){if(e){this.rcListenMap[e]=false}};RasterComponentEventListener.prototype.listenEvent=function(e,t){if(e){if(this.rcEventMap[e]==undefined){this.rcEventMap[e]=new Array}this.rcEventMap[e].push(t)}};RasterComponentEventListener.prototype.ignoreEvent=function(e,t){if(e){if(this.rcEventMap[e]){this.rcEventMap[e].splice(this.rcEventMap[e].indexOf(t),1)}}};RasterComponentEventListener.prototype.setStyleMgr=function(e){this.styleMgr=e};RasterComponentEventListener.prototype.setSelectionState=function(e,t){this.rcsSelectionState[e]=t};RasterComponentEventListener.prototype.getComponent=function(e){if(e<this.rcs.length){return this.rcs[e]}return null};RasterComponentEventListener.prototype.isListening=function(e){if(e){if(this.rcListenMap[e]){return this.rcListenMap[e]}}return false};RasterComponentEventListener.prototype.isListeningEvent=function(e,t){if(e){if(this.rcEventMap[e]){if(this.rcEventMap[e].indexOf(t)>=0)return true}}return false};var g_objPosMap={};SerializeCommand.prototype=new Command;SerializeCommand.prototype.constructor=SerializeCommand;SerializeCommand.prototype.execute=function(){if(this.directive){this.serializeScene()}};SerializeCommand.prototype.serializeScene=function(){var e;var t=null;var n=null;var r=new Context;var i;this.serialized='<?xml version="1.0" encoding="UTF-8"?><?bw onload="initialize"?><Session broadcast="false">';var s=bridgeworks.registry;if(s){var o=this.registry.find("AttributeFactory");var u=o.create("Serializer");var a=new XMLSerializer;u.serializeMinimum.setValueDirect(true);var f=s.getObjectCount();var e;for(e=0;e<f;e++){t=s.getObject(e);if(!t)continue;if(t.attrType>eAttrType.DeviceHandler&&t.attrType<eAttrType.DeviceHandler_End){r.attribute=t;u.serialize(r.attribute,r.item,r.attributeName,r.container);var l=a.serializeToString(u.DOM);if(l=="<__InitialRoot/>")continue;this.serialized+=l}else if(t.attrType>eAttrType.Node&&t.attrType<eAttrType.Node_End){if(t.getParentCount()==0){this.directive.execute(t);this.serialized+=this.directive.serialized}}else if(t.attrType>eAttrType.Directive&&t.attrType<eAttrType.Directive_End){r.attribute=t;u.serialize(r.attribute,r.item,r.attributeName,r.container);var l=a.serializeToString(u.DOM);if(l=="<__InitialRoot/>")continue;this.serialized+=l}else if(t.className=="SelectionListener"){var c=t.getAttribute("computePivotDistance").getValueDirect();this.serialized+='<Set target="Selector" computePivotDistance="';this.serialized+=c?"true":"false";this.serialized+='"/>'}}for(e=0;e<f;e++){t=s.getObject(e);if(!t)continue;if(t.className=="DisconnectAttributes"){r.attribute=t;u.serialize(r.attribute,r.item,r.attributeName,r.container);var l=a.serializeToString(u.DOM);if(l=="<__InitialRoot/>")continue;this.serialized+=l}}for(e=0;e<f;e++){t=s.getObject(e);if(!t)continue;if(t.attrType>eAttrType.Command&&t.attrType<eAttrType.Command_End&&t.className!="DisconnectAttributes"){r.attribute=t;u.serialize(r.attribute,r.item,r.attributeName,r.container);var l=a.serializeToString(u.DOM);if(l=="<__InitialRoot/>")continue;this.serialized+=l}}}this.serialized+="</Session>";serializedScene+=this.serialized;return};SerializeCommand.prototype.undo=function(){};SerializeCommand.prototype.setRegistry=function(e){var t=bridgeworks.registry.find("AttributeFactory");this.directive=t.create("SerializeDirective");Command.prototype.setRegistry.call(this,e)};SerializeCommand.prototype.getSerialized=function(){return this.serialized};ScreenCaptureCommand.prototype=new Command;ScreenCaptureCommand.prototype.constructor=ScreenCaptureCommand;ScreenCaptureCommand.prototype.execute=function(){var e=this.registry.find("Bridgeworks");e.eventMgr.addListener(eEventType.RenderBegin,this);e.eventMgr.addListener(eEventType.RenderEnd,this)};ScreenCaptureCommand.prototype.screenCapture=function(e){var t=document.getElementById(e);var n=t.toDataURL("image/png");cimageData=n;var r=n.lastIndexOf(",")+1;n=n.substr(r);imgeData=Base64Binary.decode(n)};ScreenCaptureCommand.prototype.get2DElementCanvas=function(e){var t=document.createElement("canvas");t.id="canvas2D";t.width=e.width;t.height=e.height;var n=t.getContext("2d");var r=this.registry.getByType(eAttrType.Label);var i="black";var s="data:image/svg+xml,"+"<svg xmlns='http://www.w3.org/2000/svg' width='"+t.width+"' height='"+t.height+"'>"+"<foreignObject width='100%' height='100%'>"+"<div xmlns='http://www.w3.org/1999/xhtml' style='background:"+i+";'>";for(var o=0;o<r.length;o++){var u=r[o].htmlLabel.style;s+="<span style='position:absolute; "+"font-family:"+u.fontFamily+"; "+"font-size:"+u.fontSize+"; "+"font-weight:"+u.fontWeight+"; "+"color:"+u.color+"; "+"background-color:"+u.backgroundColor+"; "+"text-shadow:"+u.textShadow+"; "+"visibility:"+u.visibility+"; "+"left:"+u.left+"; "+"top:"+u.top+"; "+"padding-left:"+u.paddingLeft+"; "+"padding-right:"+u.paddingRight+"; "+"padding-top:"+u.paddingTop+"; "+"padding-bottom:"+u.paddingBottom+"; "+"'>"+r[o].text.getValueDirect().join("")+"</span>"}s+="</div>"+"</foreignObject>"+"</svg>";var a=new Image;a.src=s;n.fillStyle=i;n.fillRect(0,0,t.width,t.height);n.drawImage(a,0,0);return{canvas:t,maskColor:i}};ScreenCaptureCommand.prototype.eventPerformed=function(e){switch(e.type){case eEventType.RenderBegin:{var t=this.registry.find("ScreenCaptureRect");var n=this.registry.find("ScreenCaptureTexture");if(t&&n){var r=this.get2DElementCanvas(document.getElementById(this.canvasId.getValueDirect().join("")));n.textureObj.setImageWithCanvas(r.canvas);n.imageSet=true;t.setTexture(n);t.enabled.setValueDirect(true)}}break;case eEventType.RenderEnd:{this.screenCapture(this.canvasId.getValueDirect().join(""));var t=this.registry.find("ScreenCaptureRect");if(t){t.enabled.setValueDirect(false)}}break}};ExportCommand.prototype=new Command;ExportCommand.prototype.constructor=ExportCommand;ExportCommand.prototype.execute=function(){if(!this.targetNode)return;var e=this.url.getValueDirect().join("");switch(getFileExtension(e)){case"stl":this.exportSTL(this.targetNode,e);break;default:break}};ExportCommand.prototype.exportSTL=function(e,t){var n=e.name.getValueDirect().join("");var r=[];var i=[];for(var s=0;s<e.geometry.length;s++){var o=e.geometry[s];switch(o.attrType){case eAttrType.TriList:{r=r.concat(o.vertices.getValueDirect());i=i.concat(o.vertices.getValueDirect())}break}}if(r.length==0)return;var u=FLT_MAX,a=FLT_MAX,f=FLT_MAX;for(var s=0;s<r.length;s+=3){u=Math.min(u,r[s]);a=Math.min(a,r[s+1]);f=Math.min(f,r[s+2])}if(u<0){u=Math.abs(u);for(var s=0;s<r.length;s+=3){r[s]+=u}}if(a<0){a=Math.abs(a);for(var s=0;s<r.length;s+=3){r[s+1]+=a}}if(f<0){f=Math.abs(f);for(var s=0;s<r.length;s+=3){r[s+2]+=f}}var l="";l+="solid "+n+"\r\n";for(var c=0,h=0;c<r.length&&h<i.length;c+=9,h+=9){l+="   facet normal "+i[h].toExponential()+" "+i[h+1].toExponential()+" "+i[h+2].toExponential()+"\r\n";l+="      outer loop\r\n";l+="         vertex "+r[c].toExponential()+" "+r[c+1].toExponential()+" "+r[c+2].toExponential()+"\r\n";l+="         vertex "+r[c+3].toExponential()+" "+r[c+4].toExponential()+" "+r[c+5].toExponential()+"\r\n";l+="         vertex "+r[c+6].toExponential()+" "+r[c+7].toExponential()+" "+r[c+8].toExponential()+"\r\n";l+="      endloop\r\n";l+="   end facet\r\n"}l+="endsolid "+n;var p=new Blob([l],{type:"text/plain"});saveAs(p,t)};MorphCommand.prototype=new Command;MorphCommand.prototype.constructor=MorphCommand;MorphCommand.prototype.execute=function(){if(this.sourceModel&&this.targetModel){var e=this.registry.find("ConnectionMgr");if(e){e.connectModelsToMorph(this.sourceModel,this.targetModel,this.morphIncr.getValueDirect())}}};SnapToCommand.prototype=new Command;SnapToCommand.prototype.constructor=SnapToCommand;SnapToCommand.prototype.execute=function(){if(this.socketModel&&this.plugModel){this.snapTo(this.socketModel,this.plugModel)}};SnapToCommand.prototype.snapTo=function(e,t){t.setMotionParent(e);t.getAttribute("position").setValueDirect(0,0,0);t.getAttribute("rotation").setValueDirect(0,0,0);zeroInspectionGroup(t);var n=new Matrix4x4;var r=new Matrix4x4;var i=this.socketConnector.getAttribute("normal").getValueDirect();i=n.transform(i.x,i.y,i.z,0);i=new Vector3D(i.x,i.y,i.z);i.normalize();var s=this.plugConnector.getAttribute("normal").getValueDirect();s=new Vector3D(s.x,s.y,s.z);s.normalize();var o=crossProduct(i,s);var u=cosineAngleBetween(i,s);angleBetween=180-toDegrees(Math.acos(u));if(angleBetween>0){var a=new Matrix4x4;a.loadRotation(o.x,o.y,o.z,angleBetween);r=a}var f=this.plugConnector.getAttribute("pin1").getAttribute("center").getValueDirect();var l=this.socketConnector.getAttribute("slot1").getAttribute("center").getValueDirect();var c=this.plugConnector.getAttribute("pin2").getAttribute("center").getValueDirect();var h=this.socketConnector.getAttribute("slot2").getAttribute("center").getValueDirect();f=r.transform(f.x,f.y,f.z,1);l=n.transform(l.x,l.y,l.z,1);c=r.transform(c.x,c.y,c.z,1);h=n.transform(h.x,h.y,h.z,1);var p,d;switch(this.slot.getValueDirect()){case 1:p=new Vector3D(c.x-f.x,c.y-f.y,c.z-f.z);d=new Vector3D(h.x-l.x,h.y-l.y,h.z-l.z);break;case 2:p=new Vector3D(f.x-c.x,f.y-c.y,f.z-c.z);d=new Vector3D(l.x-h.x,l.y-h.y,l.z-h.z);break;default:return}u=cosineAngleBetween(p,d);angleBetween=toDegrees(Math.acos(u));if(angleBetween>0){var a=new Matrix4x4;a.loadRotation(s.x,s.y,s.z,angleBetween);r=r.multiply(a)}var v=r.getRotationAngles();t.getAttribute("rotation").setValueDirect(v.x,v.y,v.z);var m,g;switch(this.slot.getValueDirect()){case 1:m=this.plugConnector.getAttribute("pin1").getAttribute("center").getValueDirect();g=this.socketConnector.getAttribute("slot1").getAttribute("center").getValueDirect();break;case 2:m=this.plugConnector.getAttribute("pin2").getAttribute("center").getValueDirect();g=this.socketConnector.getAttribute("slot2").getAttribute("center").getValueDirect();break;default:return}m=new Vector3D(m.x,m.y,m.z);g=n.transform(g.x,g.y,g.z,1);var y=dotProduct(m,s);i.multiplyScalar(y);t.getAttribute("sectorPosition").setValueDirect(g.x+d.x/2+i.x,g.y+d.y/2+i.y,g.z+d.z/2+i.z)};var eLWObjectTokens={COLR:1129270354,DIFF:1145652806,LUMI:1280658761,SPEC:1397769539,TRAN:1414676814};LWObjectHandler.prototype=new ContentHandler;LWObjectHandler.prototype.constructor=LWObjectHandler;LWObjectHandler.prototype.addObjectHandler=function(e,t){this.lwo2DataHandlers.push(e);this.lwo2DataHandlersData.push(t)};LWObjectHandler.prototype.parseFileStream=function(e){var t=formFullPath(e,this.contentDirectory.getValueDirect().join(""));var n=loadBinaryResource(t);if(n==null){return-2}var r=new BinaryParser(n,true);if(r.readUInt8()!=70||r.readUInt8()!=79||r.readUInt8()!=82||r.readUInt8()!=77){return-1}var i=r.readUInt32();if(r.readUInt8()!=76||r.readUInt8()!=87||r.readUInt8()!=79||r.readUInt8()!=50){return-1}i-=4;var s=new LWO2Data;s.contentDir=this.contentDirectory.getValueDirect().join("");var o=e.lastIndexOf("/");var u=e.lastIndexOf(".");s.name=e.substring(o+1,u);while(i>0){i-=this.parseChunk(r,s)}for(var a=0;a<this.lwo2DataHandlers.length;a++){this.lwo2DataHandlers[a](s,this.lwo2DataHandlersData[a])}return 0};LWObjectHandler.prototype.parseChunk=function(e,t){var n=0;var r=e.readUInt32();var i=e.readUInt32();switch(r){case 1279351122:{var s=e.readUInt16();n+=2;var o=e.readUInt16();n+=2;var u=e.readFloat32();n+=4;var a=e.readFloat32();n+=4;var f=e.readFloat32();n+=4;var l=this.readString(e);n+=l.bytesRead;if(i>n){var c=e.readUInt16();n+=2}t.addLayer(s);t.currentLayer().name=l.string;t.currentLayer().pivot.x=u;t.currentLayer().pivot.y=a;t.currentLayer().pivot.z=f}break;case 1347310675:{var h=i/12;for(var p=0;p<h;p++){var u=e.readFloat32();n+=4;var a=e.readFloat32();n+=4;var f=e.readFloat32();n+=4;t.currentLayer().pnts[p]=new Vector3D;t.currentLayer().pnts[p].x=u;t.currentLayer().pnts[p].y=a;t.currentLayer().pnts[p].z=f}}break;case 1347374163:{var d=e.readUInt32();n+=4;var o,v;while(i>n){var m=[];o=e.readUInt16();n+=2;v=o&1023;for(var p=0;p<v;p++){var g=this.readVariableLengthIndex(e);n+=g.bytesRead;m.push(g.index)}t.currentLayer().pols.push(m)}}break;case 1413564243:{while(i>n){var y=this.readString(e);n+=y.bytesRead;t.tags.push(y.string)}}break;case 1347699015:{var d=e.readUInt32();n+=4;while(i>n){var b=new LWO2PTAGData;var g=this.readVariableLengthIndex(e);n+=g.bytesRead;b.poly=g.index;b.tag=e.readUInt16();n+=2;switch(d){case 1398100550:{t.currentLayer().putPtag(b);t.currentLayer().ptagsSURFMaxIndex=Math.max(b.tag,t.currentLayer().ptagsSURFMaxIndex)}break}}}break;case 1447903568:{var d=e.readUInt32();n+=4;var w=e.readUInt16();n+=2;var l=this.readString(e);n+=l.bytesRead;var E,S,x;while(i>n){var g=this.readVariableLengthIndex(e);n+=g.bytesRead;switch(d){case 1415075158:{E=e.readFloat32();n+=4;S=e.readFloat32();n+=4;var T=new LWO2VMAPData;T.vertex=g.index;T.u=E;T.v=S;t.currentLayer().putVmap("TXUV",l.string,T)}break;default:{for(var p=0;p<w;p++){x=e.readFloat32();n+=4}}break}}}break;case 1447903556:{var d=e.readUInt32();n+=4;var w=e.readUInt16();n+=2;var l=this.readString(e);n+=l.bytesRead;var E,S,x;while(i>n){var N=this.readVariableLengthIndex(e);n+=N.bytesRead;var C=this.readVariableLengthIndex(e);n+=C.bytesRead;switch(d){case 1415075158:{E=e.readFloat32();n+=4;S=e.readFloat32();n+=4;var k=new LWO2VMADData;k.vertex=N.index;k.poly=C.index;k.u=E;k.v=S;t.currentLayer().putVmad("TXUV",l.string,k)}break;default:{for(var p=0;p<w;p++){x=e.readFloat32();n+=4}}break}}}break;case 1398100550:{var l=this.readString(e);n+=l.bytesRead;var L=this.readString(e);n+=L.bytesRead;t.addSurface(l.string,L.string);while(i>n){n+=this.parseSubChunk(e,t)}}break;case 1129072976:{var g=e.readUInt32();n+=4;t.addClip(g);t.subChunkContext=r;while(i>n){n+=this.parseSubChunk(e,t)}}break;case 1162761804:{var g=this.readVariableLengthIndex(e);n+=g.bytesRead;t.addEnvelope(g.index);while(i>n){n+=this.parseSubChunk(e,t)}}break;default:{while(i>n){e.readUInt8();n++}}break}if(i&1){e.readUInt8();n++}n+=8;return n};LWObjectHandler.prototype.parseSubChunk=function(e,t){var n=0;var r=e.readUInt32();n+=4;var i=e.readUInt16();n+=2;switch(r){case 1129270354:{t.currentSurface().color.x=e.readFloat32();n+=4;t.currentSurface().color.y=e.readFloat32();n+=4;t.currentSurface().color.z=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1145652806:{t.currentSurface().diffuseLevel=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1280658761:{t.currentSurface().luminosityLevel=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1397769539:{t.currentSurface().specularLevel=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1414676814:{t.currentSurface().transparencyLevel=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1196183379:{t.currentSurface().glossiness=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1397310533:{t.currentSurface().doubleSided=e.readUInt16()==3?true:false;n+=2}break;case 1397571918:{t.currentSurface().smoothingAngle=e.readFloat32();n+=4}break;case 1398032716:case 1095649613:case 1230194001:{var o=this.readString(e);n+=o.bytesRead;while(i>n-6){e.readUInt8();n+=1}t.currentClip().type=r;t.currentClip().setFilename(o.string)}break;case 1313163073:{var u=e.readUInt16();n+=2;if(t.subChunkContext=="IMAP"){t.currentSurface().currentBlock().negative=u}else if(t.subChunkContext=="CLIP"){t.currentClip().negative=u}}break;case 1112297291:{t.currentSurface().addBlock()}break;case 1229799760:{var a=this.readString(e);n+=a.bytesRead;t.currentSurface().currentBlock().type="IMAP";t.currentSurface().currentBlock().ordinal=a.string;t.subChunkContext="IMAP"}break;case 1128808782:{var f=e.readUInt32();n+=4;if(t.subChunkContext=="IMAP"){t.currentSurface().currentBlock().channel=f}}break;case 1162756418:{t.currentSurface().currentBlock().enable=e.readUInt16();n+=2}break;case 1330659651:{t.currentSurface().currentBlock().opacityType=e.readUInt16();n+=2;t.currentSurface().currentBlock().opacity=e.readFloat32();n+=4;if(i>n-6){var l=this.readVariableLengthIndex(e);n+=l.bytesRead;t.currentSurface().currentBlock().opacityEnvelope=l.index}}break;case 1414349136:{}break;case 1129206866:{t.currentSurface().currentBlock().center.x=e.readFloat32();n+=4;t.currentSurface().currentBlock().center.y=e.readFloat32();n+=4;t.currentSurface().currentBlock().center.z=e.readFloat32();n+=4;while(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1397316165:{t.currentSurface().currentBlock().size.x=e.readFloat32();n+=4;t.currentSurface().currentBlock().size.y=e.readFloat32();n+=4;t.currentSurface().currentBlock().size.z=e.readFloat32();n+=4;while(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1129535827:{t.currentSurface().currentBlock().coordSys=e.readUInt16();n+=2}break;case 1347571530:{t.currentSurface().currentBlock().projMode=e.readUInt16();n+=2}break;case 1096304979:{var c=e.readUInt16();n+=2;if(t.subChunkContext=="IMAP"){t.currentSurface().currentBlock().axis=c}}break;case 1229799751:{var h=this.readVariableLengthIndex(e);n+=h.bytesRead;t.currentSurface().currentBlock().imageIndex=h.index}break;case 1465008464:{t.currentSurface().currentBlock().widthWrap=e.readUInt16();n+=2;t.currentSurface().currentBlock().heightWrap=e.readUInt16();n+=2}break;case 1465012311:{t.currentSurface().currentBlock().widthWrapAmt=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1465012296:{t.currentSurface().currentBlock().heightWrapAmt=e.readFloat32();n+=4;if(i>n-6){var s=this.readVariableLengthIndex(e);n+=s.bytesRead}}break;case 1447903568:{var p=this.readString(e);n+=p.bytesRead;t.currentSurface().currentBlock().uvMapName=p.string}break;case 1415139397:{t.currentEnvelope().userFormat=e.readUInt8();n+=1;t.currentEnvelope().type=e.readUInt8();n+=1}break;case 1347568928:{t.currentEnvelope().preBehavior=e.readUInt16();n+=2}break;{}break;{}break;case 1347375956:{t.currentEnvelope().postBehavior=e.readUInt16();n+=2}break;default:{while(i>n-6){e.readUInt8();n+=1}}break}if(i&1){e.readUInt8();n+=1}return n};LWObjectHandler.prototype.readString=function(e){var t="";var n=0;var r=0;do{n=e.readUInt8();r++;t+=String.fromCharCode(n)}while(n);if(r&1){e.readUInt8();r++}return{string:t,bytesRead:r}};LWObjectHandler.prototype.readVariableLengthIndex=function(e){var t=0;var n=new Array(4);var r=0;n[0]=e.readUInt8();r++;n[1]=e.readUInt8();r++;if(n[0]<65280){t=n[0]<<8|n[1]}else{n[2]=e.readUInt8();r++;n[3]=e.readUInt8();r++;t=n[1]<<16|n[2]<<8|n[3]}return{index:t,bytesRead:r}};LWObjectHandler.prototype.matchesType=function(e){return e=="lwo"};LWObjectBuilder.prototype=new ContentBuilder;LWObjectBuilder.prototype.constructor=LWObjectBuilder;LWObjectBuilder.prototype.visitHandler=function(e){e.addObjectHandler(LWObjectBuilder_ObjectHandler,this)};LWObjectBuilder.prototype.finalize=function(){};LWObjectBuilder.prototype.matchesType=function(e){return e=="lwo"};LWObjectBuilder.prototype.allocateModel=function(e){var t=null;var n=this.layer;if(n==0){for(var r=0;r<e.layers.length;r++){if(!this.models[0]){var i=this.registry.find("AttributeFactory");t=i.create("Model");this.models.push(t)}else t=this.models[0];this.describeModel(e,e.layers[r],t)}}else if(n<=e.layers.length){if(!this.models[0]){var i=this.registry.find("AttributeFactory");t=i.create("Model");this.models.push(t)}else t=this.models[0];this.describeModel(e,e.layers[n-1],t)}};LWObjectBuilder.prototype.describeModel=function(e,t,n){var r=this.registry.find("AttributeFactory");var i=n.getAttribute("name");if(n.getAttributeModificationCount(i)==0){var s=e.name;if(e.layers.length>1){s+=":Layer"+this.layer}i.setValueDirect(s)}var o=n.getAttribute("pivot");if(n.getAttributeModificationCount(o)==0){o.setValue(t.pivot.v())}var u=t.ptagsSURFMaxIndex+1;var a=new Array(u);var f=new Array(u);var l=new Array(u);var c=new Array(u);for(var h=0;h<u;h++){a[h]=[];f[h]=[];l[h]=[];c[h]=[]}var p,d;var v=t.ptagsSURF.length;for(var m=0;m<v;m++){p=t.ptagsSURF[m].poly;d=t.ptagsSURF[m].tag;switch(t.pols[p].length){case 3:a[d].push(p);break;case 2:f[d].push(p);break;case 1:l[d].push(p);break;default:c[d].push(p);break}}var g=new Array(u);for(var d=0;d<u;d++){g[d]=this.allocateSurface(e,t,d);n.addSurface(g[d])}var y=new Array(t.pnts.length*3);for(var b=0;b<t.pnts.length;b++){y[b*3]=t.pnts[b].x;y[b*3+1]=t.pnts[b].y;y[b*3+2]=t.pnts[b].z}n.getAttribute("vertices").setValue(y);var w=[];var E=[];var S=[];var x=[];var T=[];var N=[];var C=[];var k=[];var L=new Vector3D;var A=new Vector3D;w.length=t.pnts.length;for(var h=0;h<w.length;h++){w[h]=[]}E.length=u;S.length=u;x.length=u;T.length=u;N.length=u;C.length=u;k.length=u;for(var d=0;d<g.length;d++){var O=[];var M=[];E[d]=[];S[d]=[];x[d]=new Pair;x[d].first=x[d].second=0;T[d]=[];k[d]=[];var _=c[d];var D=_.length;for(var p=0;p<D;p++){var P=new JSM.Polygon;var H=t.pols[_[p]];for(var B=0;B<H.length;B++){var j=t.pnts[H[B]];O.push([j.x,j.y,j.z]);P.AddVertex(j.x,j.y,j.z)}var F=JSM.PolygonTriangulate(P);for(var h=0;h<F.length;h++){var I=[];I.push(H[F[h][0]]);I.push(H[F[h][1]]);I.push(H[F[h][2]]);t.pols.push(I);a[d].push(t.pols.length-1)}}O=[];_=a[d];D=_.length;for(var p=0;p<D;p++){var H=t.pols[_[p]];for(var B=0;B<3;B++){var j=t.pnts[H[B]];O.push(j.x);O.push(j.y);O.push(j.z);S[d].push(H[B]);x[d].first=Math.min(H[B],x[d].first);x[d].second=Math.min(H[B],x[d].second);T[d].push(_[p])}var q=H[0];var R=H[1];var U=H[2];var z=t.pnts[q];var W=t.pnts[R];var X=t.pnts[U];L.load(W.x-z.x,W.y-z.y,W.z-z.z);A.load(X.x-z.x,X.y-z.y,X.z-z.z);var V=crossProduct(L,A);V.normalize();M.push(V.x);M.push(V.y);M.push(V.z);M.push(V.x);M.push(V.y);M.push(V.z);M.push(V.x);M.push(V.y);M.push(V.z);E[d].push(new Pair(q,V));E[d].push(new Pair(R,V));E[d].push(new Pair(U,V));w[q].push(V);w[R].push(V);w[U].push(V);k[d].push(V);k[d].push(V);k[d].push(V)}if(O.length){var $=r.create("TriList");n.addGeometry($,S[d],g[d]);$.getAttribute("vertices").setValue(O);$.getAttribute("normals").setValue(M);N[d]=$;C[d]=O}O=[];_=f[d];D=_.length;for(var p=0;p<D;p++){var H=t.pols[p];if(H.length<2)continue;for(var B=0;B<2;B++){var j=t.pnts[H[B]];O.push(j.x);O.push(j.y);O.push(j.z)}}if(O.length){var J=r.create("LineList");n.addGeometry(J,null,g[d]);J.getAttribute("vertices").setValue(O)}O=[];_=l[d];D=_.length;for(var p=0;p<D;p++){var H=t.pols[p];var j=t.pnts[H[0]];O.push(j.x);O.push(j.y);O.push(j.z)}if(O.length){var K=r.create("PointList");n.addGeometry(K,null,g[d]);K.getAttribute("vertices").setValue(O)}}var Q=[];for(var d=0;d<g.length;d++){if(!N[d])continue;var G=e.getSurface(e.tags[d]);if(!G)continue;var Y=G.smoothingAngle;if(Y<=0)continue;var Z=Math.cos(Y);Q.length=E[d].length;for(var h=0;h<Q.length;h++){Q[h]=new Vector3D}for(var et=0;et<E[d].length;et++){var tt=E[d][et].first;var nt=E[d][et].second;for(var rt=0;rt<w[tt].length;rt++){var it=w[tt][rt];var st=cosineAngleBetween(nt,it);if(Math.acos(st)<=Y){Q[et].x+=it.x;Q[et].y+=it.y;Q[et].z+=it.z}}Q[et].normalize()}var ot=[];for(var h=0;h<Q.length;h++){ot.push(Q[h].x);ot.push(Q[h].y);ot.push(Q[h].z)}Q.length=0;N[d].getAttribute("normals").setValue(ot)}for(var d=0;d<g.length;d++){var ut=e.getSurface(g[d].getAttribute("name").getValueDirect().join(""));if(ut){var at=this.loadTextures(e,t,ut,g[d]);for(var h=0;h<at.length;h++){var ft=this.calculateTextureCoords(e,t,at[h].second,C[d],k[d],S[d],T[d]);if(ft){N[d].getUVCoords(at[h].first).setValueDirect(ft)}}}}};LWObjectBuilder.prototype.allocateSurface=function(e,t,n){var r=this.registry.find("AttributeFactory");surface=r.create("Surface");var i=e.tags[n];surface.getAttribute("name").setValueDirect(i);this.describeSurface(e.getSurface(i),surface);return surface};LWObjectBuilder.prototype.describeSurface=function(e,t){if(!e)return;var n=[];n.push(e.color.x);n.push(e.color.y);n.push(e.color.z);n.push(1);t.getAttribute("color").setValue(n);t.getAttribute("ambientLevel").setValueDirect(e.diffuseLevel);t.getAttribute("diffuseLevel").setValueDirect(e.diffuseLevel);t.getAttribute("specularLevel").setValueDirect(e.specularLevel);t.getAttribute("emissiveLevel").setValueDirect(e.luminosityLevel);t.getAttribute("glossiness").setValueDirect(e.glossiness);t.getAttribute("opacity").setValueDirect(1-e.transparencyLevel);t.getAttribute("doubleSided").setValueDirect(e.doubleSided?true:false)};LWObjectBuilder.prototype.loadTextures=function(e,t,n,r){var i=[];var s=[];for(var o=0;o<n.blocks.length;o++){var u=n.blocks[o];if(u.type!="IMAP")continue;if(!s[u.channel]){s[u.channel]=[]}s[u.channel].push(u)}if(s[eLWObjectTokens.COLR]){this.allocateTextures(eTextureType.Color,e,t,s[eLWObjectTokens.COLR],r,i)}if(s[eLWObjectTokens.DIFF]){this.allocateTextures(eTextureType.Diffuse,e,t,s[eLWObjectTokens.DIFF],r,i)}if(s[eLWObjectTokens.LUMI]){this.allocateTextures(eTextureType.Luminosity,e,t,s[eLWObjectTokens.LUMI],r,i)}if(s[eLWObjectTokens.SPEC]){this.allocateTextures(eTextureType.Specular,e,t,s[eLWObjectTokens.SPEC],r,i)}if(s[eLWObjectTokens.TRAN]){this.allocateTextures(eTextureType.Transparency,e,t,s[eLWObjectTokens.TRAN],r,i)}return i};LWObjectBuilder.prototype.allocateTextures=function(e,t,n,r,i,s){for(var o=0;o<r.length;o++){var u=r[o];if(u.opacityType!=0&&u.opacityType!=7)continue;var a=t.clips[u.imageIndex];if(!a)continue;var f=null;if(o+1<r.length){if(r[o+1].opacityType==5){f=t.clips[r[o+1].imageIndex]}}var l,c;switch(u.widthWrap){case 0:l=eTextureWrap.None;break;case 1:l=eTextureWrap.Repeat;break;case 2:l=eTextureWrap.Mirror;break;case 3:l=eTextureWrap.Clamp;break}switch(u.heightWrap){case 0:c=eTextureWrap.None;break;case 1:c=eTextureWrap.Repeat;break;case 2:c=eTextureWrap.Mirror;break;case 3:c=eTextureWrap.Clamp;break}var h=a.getFilename();var p=h.lastIndexOf("/");h=p===-1?h:h.substring(p+1);var d=t.contentDir+"images/"+h;var v=u.negative?true:false;if(this.invertAlpha&&(e==eTextureType.Transparency||e==eTextureType.Diffuse||e==eTextureType.Luminosity||e==eTextureType.Specularity)){v=!v}var m=false;if(f){m=r[o+1].negative?true:false;if(this.invertAlpha){m=!m}}var g=null;var y=this.registry.find("AttributeFactory");g=y.create("MediaTexture");g.getAttribute("name").setValueDirect("");g.getAttribute("textureType").setValueDirect(e);g.getAttribute("opacity").setValueDirect(u.opacity);g.getAttribute("widthWrap").setValueDirect(l);g.getAttribute("heightWrap").setValueDirect(c);g.getAttribute("mipmappingEnabled").setValueDirect(false);g.getAttribute("imageFilename").setValueDirect(d);g.getAttribute("negateImage").setValueDirect(v);g.getAttribute("negateAlpha").setValueDirect(m);if(f){g.getAttribute("alphaFilename").setValueDirect(t.contentDir+f.getFilename())}s.push(new Pair(g,u));i.addTexture(g)}};LWObjectBuilder.prototype.calculateTextureCoords=function(e,t,n,r,i,s,o){if(!e||!t||!n||!r||!i||!s||!o){return null}var u=[];var a=r.length/3;switch(n.projMode){case 0:case 1:case 2:{var f,l,c;for(f=0,l=0,c=0;f<a;f++,l+=3,c+=2){c=this.mapXYZtoUV(r[l],r[l+1],r[l+2],n.center,n.size,n.projMode,n.axis,n.widthWrapAmt,n.heightWrapAmt);u.push(c.u);u.push(c.v)}}break;case 3:{var f,l,c;for(f=0,l=0,c=0;f<a;f++,l+=3,c+=2){polyNormal=i[f];if(Math.acos(cosineAngleBetween(polyNormal,new Vector3D(1,0,0)))<=QUARTERPI||Math.acos(cosineAngleBetween(polyNormal,new Vector3D(-1,0,0)))<=QUARTERPI){axis=0}else if(Math.acos(cosineAngleBetween(polyNormal,new Vector3D(0,1,0)))<=QUARTERPI||Math.acos(cosineAngleBetween(polyNormal,new Vector3D(0,-1,0)))<=QUARTERPI){axis=1}else{axis=2}c=this.mapXYZtoUV(r[l],r[l+1],r[l+2],n.center,n.size,0,axis,n.widthWrapAmt,n.heightWrapAmt);u.push(c.u);u.push(c.v)}}break;case 5:{var h=t.getVmap("TXUV",n.uvMapName);var p=t.getVmad("TXUV",n.uvMapName);var f,d,v,c,m;for(f=0,c=0;f<a;f++,c+=2){d=s[f];v=o[f];m=false;if(p&&p.length){for(var g=0;g<p.length;g++){if(p[g].poly>v){break}if(p[g].poly==v){if(p[g].vertex==d){u[c]=p[g].u;u[c+1]=p[g].v;m=true;break}}}if(m){continue}}if(h&&h.length){for(var y=0;y<h.length;y++){if(h[y].vertex>d){break}if(h[y].vertex==d){u[c]=h[y].u;u[c+1]=h[y].v;m=true;break}}}if(!m){u[c]=0;u[c+1]=0}}}break;default:{}break}return u};LWObjectBuilder.prototype.mapXYZtoUV=function(e,t,n,r,i,s,o,u,a){var f,l;var c;var h=0;var p=0;switch(s){case 0:switch(o){case 0:h=(n-r.z)/i.z+.5;p=(t-r.y)/i.y+.5;break;case 1:h=(e-r.x)/i.x+.5;p=(n-r.z)/i.z+.5;break;case 2:default:h=(e-r.x)/i.x+.5;p=(t-r.y)/i.y+.5;break}break;case 1:e-=r.x;t-=r.y;n-=r.z;switch(o){case 0:f=XYZtoH(n,e,t);h=f/(TWOPI*u);p=e/i.x+.5;break;case 1:f=XYZtoH(e,t,n);h=f/(TWOPI*u);p=t/i.y+.5;break;case 2:default:f=XYZtoH(-e,n,-t);h=f/(TWOPI*u);p=-n/i.z+.5;break}h=modf(h).fractionalPart;if(h<0)h+=1;break;case 2:e-=r.x;t-=r.y;n-=r.z;switch(o){case 0:var d=XYZtoHP(n,e,-t);f=d.heading;l=d.pitch;break;case 1:var d=XYZtoHP(-e,t,n);f=d.heading;l=d.pitch;break;case 2:default:var d=XYZtoHP(-e,n,-t);f=d.heading;l=d.pitch;break}h=modf(1-f/TWOPI*u).fractionalPart;p=1-modf(.5-l/Math.PI*a).fractionalPart;break}return{u:h,v:p}};LWSceneHandler.prototype=new ContentHandler;LWSceneHandler.prototype.constructor=LWSceneHandler;LWSceneHandler.prototype.addTokenHandler=function(e,t){this.tokenHandlers.push(e);this.tokenHandlersData.push(t)};LWSceneHandler.prototype.parseFileStream=function(e){var t=formFullPath(e,this.contentDirectory.getValueDirect().join(""));var n=loadTextResource(t);if(n==null){return-2}var r=new TextParser(n);var i;while(i=r.readLineTokens()){if(i.length==0)continue;if(i[0].indexOf('"')!=-1){i.push(i[0].substring(1,i[0].length-1));i[0]="String"}for(var s=0;s<this.tokenHandlers.length;s++){this.tokenHandlers[s](i,this.tokenHandlersData[s])}}for(var s=0;s<this.tokenHandlers.length;s++){this.tokenHandlers[s](new Array("EOF"),this.tokenHandlersData[s])}};LWSceneBuilder.prototype=new ContentBuilder;LWSceneBuilder.prototype.constructor=LWSceneBuilder;LWSceneBuilder.prototype.visitHandler=function(e){e.addTokenHandler(LWSceneBuilder_TokenHandler,this)};LWSceneBuilder.prototype.finalize=function(){};LWSceneBuilder.prototype.matchesType=function(e){return e=="lws"||e=="mot"};LWSceneBuilder.prototype.handleToken=function(e,t){switch(e){case"LWSC":this.handleSceneToken(t);break;case"LWMO":this.handleMotionToken(t);break;default:this.handleCommandToken(e,t);break}};LWSceneBuilder.prototype.handleSceneToken=function(e){this.allocateSceneGraph()};LWSceneBuilder.prototype.handleMotionToken=function(e){};LWSceneBuilder.prototype.handleCommandToken=function(e,t){this.allocateSceneElement(e,t)};LWSceneBuilder.prototype.allocateSceneGraph=function(){this.root=this.factory.create("Isolator");this.root.name.setValueDirect("Root");this.root.isolateLights.setValueDirect(true);this.registry.rootPtr.setValueDirect(this.root);this.evaluatorsGroup=this.factory.create("Group");this.evaluatorsGroup.name.setValueDirect("Evaluators");this.root.addChild(this.evaluatorsGroup);this.camerasSelector=this.factory.create("Selector");this.camerasSelector.name.setValueDirect("Cameras");this.camerasSelector.selectee.setValueDirect(0);this.root.addChild(this.camerasSelector);this.lightsGroup=this.factory.create("Group");this.lightsGroup.name.setValueDirect("Lights");this.root.addChild(this.lightsGroup);this.modelsGroup=this.factory.create("Group");this.modelsGroup.name.setValueDirect("Models");this.root.addChild(this.modelsGroup);this.renderDirective=this.factory.create("RenderDirective");this.renderDirective.name.setValueDirect("RenderDirective");this.renderDirective.rootNode.setValueDirect(this.root);return true};LWSceneBuilder.prototype.allocateSceneElement=function(e,t){switch(e){case"LoadObjectLayer":{var n=this.factory.create("Model");this.currElement=n;var r=t[0];n.layer.setValueDirect(r);var i=t.slice(1).join();i=addSlashAfterDriveSpecifier(i);n.url.setValueDirect(i);n.disableOnDissolve.setValueDirect(false);this.models.push(n);this.modelsGroup.addChild(n);finalizeModel(n,this.factory);this.objectBones.push(new Array)}break;case"ObjectMotion":{var s=this.factory.create("KeyframeInterpolator");s.name.setValueDirect("Motion");this.evaluators.push(s);this.evaluatorsGroup.addChild(s)}break;case"NumChannels":{if(this.evaluators.length>0){var s=this.evaluators[this.evaluators.length-1];var o=parseInt(t[0]);this.initializeKeyframeInterpolator(s,o);var u=this.currElement||this.registry.find(s.getAttribute("target").getValueDirect().join(""));if(u){switch(o){case 1:this.attachDissolveInterpolator(s,u);break;default:this.attachKeyframeInterpolator(s,u);break}}}}break;case"Channel":{this.currChannel=parseInt(t[0])}break;case"Key":{if(this.evaluators.length>0){var s=this.evaluators[this.evaluators.length-1];var a=s.channels.getAt(this.currChannel);var f=new KeyframeAttr;for(var l=0;l<t.length;l++){switch(l){case 0:{var c=parseFloat(t[l]);if(this.currChannel==3||this.currChannel==4||this.currChannel==5){c=toDegrees(c)}f.value.setValueDirect(c)}break;case 1:{f.time.setValueDirect(parseFloat(t[l]))}break;case 2:{var h=parseInt(t[l]);switch(h){case 0:f.shape.setValueDirect(eKeyframeShape.TCB);break;case 1:f.shape.setValueDirect(eKeyframeShape.Hermite);break;case 2:f.shape.setValueDirect(eKeyframeShape.Bezier1D);break;case 3:f.shape.setValueDirect(eKeyframeShape.Linear);break;case 4:f.shape.setValueDirect(eKeyframeShape.Stepped);break;case 5:f.shape.setValueDirect(eKeyframeShape.Bezier2D);break;default:f.shape.setValueDirect(eKeyframeShape.Linear);break}}break;case 3:case 4:case 5:case 6:case 7:case 8:f.params.getAt(l-3).setValueDirect(parseFloat(t[l]));break;default:break}}a.push_back(f)}}break;case"Behaviors":{if(this.evaluators.length>0){var s=this.evaluators[this.evaluators.length-1];s.preBehaviors.getAt(this.currChannel).setValueDirect(parseInt(t[0]));s.postBehaviors.getAt(this.currChannel).setValueDirect(parseInt(t[1]))}}break;case"ObjectDissolve":{if(t[0]=="(envelope)"){var s=this.factory.create("KeyframeInterpolator");s.name.setValueDirect("Dissolve");this.initializeKeyframeInterpolator(s,1);this.attachDissolveInterpolator(s,this.models[this.models.length-1]);this.evaluators.push(s);this.evaluatorsGroup.addChild(s)}else{if(this.models.length>0){this.models[this.models.length-1].dissolve.setValueDirect(parseFloat(t[0]))}}}break;case"AddCamera":{var p=this.factory.create("PerspectiveCamera");this.currElement=p;this.cameras.push(p);this.camerasSelector.addChild(p)}break;case"CameraName":{if(this.cameras.length>0){this.cameras[this.cameras.length-1].name.setValueDirect(t[0])}}break;case"CameraMotion":{var s=this.factory.create("KeyframeInterpolator");s.name.setValueDirect("Motion");this.evaluators.push(s);this.evaluatorsGroup.addChild(s)}break;case"ZoomFactor":{if(this.cameras.length>0){this.cameras[this.cameras.length-1].zoom.setValueDirect(parseFloat(t[0]))}}break;case"AmbientColor":{this.ambientLightDesc.colorR=parseFloat(t[0]);this.ambientLightDesc.colorG=parseFloat(t[1]);this.ambientLightDesc.colorB=parseFloat(t[2])}break;case"AmbientIntensity":{var d=this.factory.create("GlobalIllumination");d.name.setValueDirect("GLight");var v=parseFloat(t[0]);d.ambient.setValueDirect(this.ambientLightDesc.colorR*v,this.ambientLightDesc.colorG*v,this.ambientLightDesc.colorB*v,1);this.lightsGroup.addChild(d)}break;case"GlobalLightIntensity":{this.globalLightDesc.intensity=parseFloat(t[0])}break;case"AddLight":{var m=new TLWSCv3LightDesc;m.range=Math.sqrt(FLT_MAX);this.lightDescs.push(m);this.currElement=null}break;case"LightName":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].name=t[0]}}break;case"LightMotion":{var s=this.factory.create("KeyframeInterpolator");s.name.setValueDirect("Motion");if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].motion=s}this.evaluators.push(s);this.evaluatorsGroup.addChild(s)}break;case"LightColor":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].colorR=parseFloat(t[0]);this.lightDescs[this.lightDescs.length-1].colorG=parseFloat(t[1]);this.lightDescs[this.lightDescs.length-1].colorB=parseFloat(t[2])}}break;case"LightIntensity":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].intensity=parseFloat(t[0])}}break;case"LightRange":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].range=parseFloat(t[0])}}break;case"LightConeAngle":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].coneAngle=parseFloat(t[0])}}break;case"LightEdgeAngle":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].edgeAngle=parseFloat(t[0])}}break;case"LightType":{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].type=parseInt(t[0])}}break;case"AddNullObject":{var g=this.factory.create("NullObject");this.currElement=g;this.models.push(g);this.modelsGroup.addChild(g);if(t[0]){g.name.setValueDirect(t[0])}}break;case"PivotPosition":{if(this.currElement){this.currElement.pivot.setValueDirect(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))}}break;case"BoneFalloffType":{this.boneFalloffType=parseInt(t[0])}break;case"AddBone":{var y=this.factory.create("Bone");y.falloffType.setValueDirect(this.boneFalloffType);this.currElement=y;this.bones.push(y);this.objectBones[this.objectBones.length-1].push(y)}break;case"BoneName":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){var b=0;var w="";for(var l=0;l<this.bones.length;l++){if(t[0]==this.bones[l].name.getValueDirect().join("")){b++}}if(b>0){t[0]+="("+b+1+")"}y.name.setValueDirect(t[0])}}break;case"BoneRestPosition":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){y.restPosition.setValueDirect(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))}}break;case"BoneRestDirection":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){y.restRotation.setValueDirect(parseFloat(t[1]),parseFloat(t[0]),parseFloat(t[2]))}}break;case"BoneRestLength":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){y.restLength.setValueDirect(parseFloat(t[0]))}}break;case"BoneStrength":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){y.strength.setValueDirect(parseFloat(t[0]))}}break;case"BoneScaleBoneStrength":{var y=this.bones.length>0?this.bones[this.bones.length-1]:null;if(y){y.scaleBoneStrength.setValueDirect(parseFloat(t[0]))}}break;case"BoneMotion":{var s=this.factory.create("KeyframeInterpolator");s.name.setValueDirect("Motion");if(this.bones.length>0){this.bones[this.bones.length-1].motion=s}this.evaluators.push(s);this.evaluatorsGroup.addChild(s)}break;case"ParentItem":{if(this.currElement){this.parentItems.push(new Pair(this.currElement,t[0]))}else{if(this.lightDescs.length>0){this.lightDescs[this.lightDescs.length-1].parentItem=t[0]}}};case"GridSize":{this.sceneData.gridSize=parseFloat(t[0])};case"NearClipDistance":{if(this.cameras.length>0){this.cameras[this.cameras.length-1].nearDistance.setValueDirect(parseFloat(t[0]))}}break;case"FramesPerSecond":{this.sceneData.fps=parseFloat(t[0])}break;case"BackdropColor":{this.sceneData.backgroundColorR=parseFloat(t[0]);this.sceneData.backgroundColorG=parseFloat(t[1]);this.sceneData.backgroundColorB=parseFloat(t[2])}break;case"}":{this.currChannel=0;if(this.imagePath!=""){if(this.parsingBgImage){this.renderDirective.backgroundImageFilename.setValueDirect(this.imagePath);this.parsingBgImage=false}else if(this.parsingFgImage){this.renderDirective.foregroundImageFilename.setValueDirect(this.imagePath);this.parsingFgImage=false}else if(this.parsingFgAlphaImage){this.renderDirective.foregroundAlphaImageFilename.setValueDirect(this.imagePath);this.parsingFgAlphaImage=false}this.imagePath=""}}break;case"String":{if(this.parsingBgImage||this.parsingFgImage||this.parsingFgAlphaImage){this.imagePath=t[0]}}break;case"BGImage":{this.parsingBgImage=true}break;case"FGImage":{this.parsingFgImage=true}break;case"FGAlphaImage":{this.parsingFgAlphaImage=true}break;case"EOF":{this.finalize()}break;default:{}break}};LWSceneBuilder.prototype.finalize=function(){var e=[];for(var t=0;t<this.models.length;t++){var n=this.models[t].name.getValueDirect().join("");if(e[n]==undefined){e[n]=new Array}e[n].push(this.models[t])}for(var n in e){if(e[n].length>1){for(var t=0;t<e[n].length;t++){e[n][t].name.setValueDirect(n+" ("+(t+1)+")")}}}var r,i;for(var t=0;t<this.cameras.length;t++){var s=this.cameras[t].zoom.getValueDirect();r=this.sceneData.gridSize*.1*s;i=r*1e5;this.cameras[t].nearDistance.setValueDirect(r);this.cameras[t].farDistance.setValueDirect(i)}for(var t=0;t<this.lightDescs.length;t++){var o=this.allocateLight(this.lightDescs[t]);if(this.lightDescs[t].parentItem){this.parentItems.push(new Pair(o,this.lightDescs[t].parentItem))}this.lights.push(o);this.lightsGroup.addChild(o)}for(var t=0;t<this.parentItems.length;t++){this.setParentItem(this.parentItems[t].first,this.parentItems[t].second)}for(var t=0;t<this.models.length;t++){var u=this.models[t];if(u.bones.length>0){this.attachBoneEffectors(u,u.bones)}}for(var t=0;t<this.evaluators.length;t++){this.evaluators[t].evaluate()}};LWSceneBuilder.prototype.allocateLight=function(e){var t=null;switch(e.type){case 0:case 3:t=this.factory.create("DirectionalLight");break;case 1:t=this.factory.create("PointLight");break;case 2:case 4:t=this.factory.create("SpotLight");break}if(!t)return null;if(e.motion){this.attachKeyframeInterpolator(e.motion,t)}t.name.setValueDirect(e.name);var n=e.colorR*e.intensity*this.globalLightDesc.intensity;var r=e.colorR*e.intensity*this.globalLightDesc.intensity;var i=e.colorR*e.intensity*this.globalLightDesc.intensity;var s=1;t.ambient.setValueDirect(this.ambientLightDesc.colorR*this.ambientLightDesc.intensity,this.ambientLightDesc.colorG*this.ambientLightDesc.intensity,this.ambientLightDesc.colorB*this.ambientLightDesc.intensity,1);t.diffuse.setValueDirect(n,r,i,s);t.specular.setValueDirect(n,r,i,s);switch(e.type){case 0:case 3:break;case 1:t.range.setValueDirect(e.range);break;case 2:case 4:t.range.setValueDirect(e.range);t.innerConeDegrees.setValueDirect(e.coneAngle);t.outerConeDegrees.setValueDirect(e.edgeAngle);t.coneFalloff.setValueDirect(1);break}return t};LWSceneBuilder.prototype.initializeKeyframeInterpolator=function(e,t){e.setNumChannels(t)};LWSceneBuilder.prototype.attachKeyframeInterpolator=function(e,t){if(!e||!t)return;var n=e.getAttribute("channels").vector.length;for(var r=0;r<n;r++){var i=e.getAttribute("resultValues").getAt(r);switch(r){case 0:i.addElementTarget(t.getAttribute("position"),0,0);break;case 1:i.addElementTarget(t.getAttribute("position"),0,1);break;case 2:i.addElementTarget(t.getAttribute("position"),0,2);break;case 3:i.addElementTarget(t.getAttribute("rotation"),0,1);break;case 4:i.addElementTarget(t.getAttribute("rotation"),0,0);break;case 5:i.addElementTarget(t.getAttribute("rotation"),0,2);break;case 6:i.addElementTarget(t.getAttribute("scale"),0,0);break;case 7:i.addElementTarget(t.getAttribute("scale"),0,1);break;case 8:i.addElementTarget(t.getAttribute("scale"),0,2);break}}e.getAttribute("time").setValueDirect(0)};LWSceneBuilder.prototype.attachDissolveInterpolator=function(e,t){if(!e||!t)return;var n=e.getAttribute("resultValues").getAt(0);n.addElementTarget(t.getAttribute("dissolve"),0,0)};LWSceneBuilder.prototype.attachBoneEffectors=function(e,t){for(var n=0;n<e.geometry.length;n++){var r=e.geometry[n];var i=this.factory.create("BoneEffector");this.evaluators.push(i);this.evaluatorsGroup.addChild(i);for(var s=0;s<t.length;s++){i.addBoneHierarchy(t[s])}var o=r.getAttribute("vertices");var u=o.getValueDirect();var a=r.getAttribute("normals");var f=a.getValueDirect();i.getAttribute("vertices").setValueDirect(u);i.getAttribute("normals").setValueDirect(f);i.getAttribute("resultVertices").addTarget(o);i.getAttribute("resultNormals").addTarget(a)}};LWSceneBuilder.prototype.setParentItem=function(e,t){var n=hexStrToULong(t.substring(1));var r=null;switch(t.charAt(0)){case"1":{r=this.models[n];if(e.attrType==eAttrType.Bone){r.bones.push(e)}}break;case"2":{r=this.lights[n]}break;case"3":{r=this.cameras[n]}break;case"4":{var i=hexStrToULong(t.substring(1,4));var s=hexStrToULong(t.substring(4));if(this.bones.length>i){var o=e;var u=null;if(this.objectBones.length>s&&this.objectBones[s].length>i){u=this.objectBones[s][i]}if(u&&o){u.addChild(o)}}}break;default:return}switch(e.attrType){case eAttrType.Bone:break;default:e.setMotionParent(r);break}};AttributeFactory.prototype=new AttributeContainer;AttributeFactory.prototype.constructor=AttributeFactory;AttributeFactory.prototype.create=function(e){var t=null;var n=this.newResourceProcs[e];if(n){t=n(e,this)}if(!t)return null;var r=this.configureProcs[e];if(r){r(t,this)}if(t.isContainer()){if(!t.getAttribute("name"))t.registerAttribute(new StringAttr(""),"name");if(!t.getAttribute("userData"))t.registerAttribute(new StringAttr(""),"userData")}if(this.registry){this.registry.register(t);t.setRegistry(this.registry)}return t};AttributeFactory.prototype.finalize=function(e,t){var n=this.finalizeProcs[e];if(n){n(t,this)}};AttributeFactory.prototype.initializeNewResourceMap=function(){this.newResourceProcs["Styles"]=newAttribute;this.newResourceProcs["StyleMap"]=newAttribute;this.newResourceProcs["StylesMap"]=newAttribute;this.newResourceProcs["LabelStyle"]=newAttribute;this.newResourceProcs["IconStyle"]=newAttribute;this.newResourceProcs["FontStyle"]=newAttribute;this.newResourceProcs["HTMLLabelStyle"]=newAttribute;this.newResourceProcs["BalloonTipLabelStyle"]=newAttribute;this.newResourceProcs["RenderableElementStyle"]=newAttribute;this.newResourceProcs["Serializer"]=newAttribute;this.newResourceProcs["Bone"]=newAttribute;this.newResourceProcs["DirectionalLight"]=newSGNode;this.newResourceProcs["GlobalIllumination"]=newSGNode;this.newResourceProcs["Group"]=newSGNode;this.newResourceProcs["Isolator"]=newSGNode;this.newResourceProcs["Label"]=newSGNode;this.newResourceProcs["HTMLLabel"]=newSGNode;this.newResourceProcs["BalloonTipLabel"]=newSGNode;this.newResourceProcs["LineList"]=newSGNode;this.newResourceProcs["MediaTexture"]=newSGNode;this.newResourceProcs["Model"]=newModel;this.newResourceProcs["OrthographicCamera"]=newSGNode;this.newResourceProcs["PerspectiveCamera"]=newSGNode;this.newResourceProcs["PointLight"]=newSGNode;this.newResourceProcs["PointList"]=newSGNode;this.newResourceProcs["QuaternionRotate"]=newSGNode;this.newResourceProcs["Rotate"]=newSGNode;this.newResourceProcs["Scale"]=newSGNode;this.newResourceProcs["Selector"]=newSGNode;this.newResourceProcs["Surface"]=newSGNode;this.newResourceProcs["Translate"]=newSGNode;this.newResourceProcs["Transform"]=newSGNode;this.newResourceProcs["TriList"]=newSGNode;this.newResourceProcs["NullObject"]=newSGNode;this.newResourceProcs["Material"]=newSGNode;this.newResourceProcs["Cube"]=newSGNode;this.newResourceProcs["ScreenRect"]=newSGNode;this.newResourceProcs["BBoxDirective"]=newSGDirective;this.newResourceProcs["RayPickDirective"]=newSGDirective;this.newResourceProcs["RenderDirective"]=newSGDirective;this.newResourceProcs["SerializeDirective"]=newSGDirective;this.newResourceProcs["UpdateDirective"]=newSGDirective;this.newResourceProcs["CollideDirective"]=newSGDirective;this.newResourceProcs["HighlightDirective"]=newSGDirective;this.newResourceProcs["BBoxLocator"]=newBBoxLocator;this.newResourceProcs["KeyframeInterpolator"]=newKeyframeInterpolator;this.newResourceProcs["MapProjectionCalculator"]=newMapProjectionCalculator;this.newResourceProcs["ObjectInspector"]=newObjectInspector;this.newResourceProcs["SceneInspector"]=newSceneInspector;this.newResourceProcs["TargetObserver"]=newTargetObserver;this.newResourceProcs["AnimalMover"]=newAnimalMover;this.newResourceProcs["WalkSimulator"]=newWalkSimulator;this.newResourceProcs["MorphEffector"]=newMorphEffector;this.newResourceProcs["BoneEffector"]=newBoneEffector;this.newResourceProcs["PhysicsSimulator"]=newPhysicsSimulator;this.newResourceProcs["AppendNode"]=newCommand;this.newResourceProcs["AutoInterpolate"]=newCommand;this.newResourceProcs["CommandSequence"]=newCommand;this.newResourceProcs["ConnectAttributes"]=newCommand;this.newResourceProcs["ConnectOutputs"]=newCommand;this.newResourceProcs["DisconnectAttributes"]=newCommand;this.newResourceProcs["DisconnectOutputs"]=newCommand;this.newResourceProcs["Export"]=newCommand;this.newResourceProcs["Locate"]=newCommand;this.newResourceProcs["MotionInterpolate"]=newCommand;this.newResourceProcs["Pause"]=newCommand;this.newResourceProcs["Play"]=newCommand;this.newResourceProcs["Remove"]=newCommand;this.newResourceProcs["ScreenCapture"]=newCommand;this.newResourceProcs["Serialize"]=newCommand;this.newResourceProcs["Set"]=newCommand;this.newResourceProcs["Stop"]=newCommand;this.newResourceProcs["Morph"]=newCommand;this.newResourceProcs["SnapTo"]=newCommand;this.newResourceProcs["MouseHandler"]=newDeviceHandler;this.newResourceProcs["KeyboardHandler"]=newDeviceHandler};AttributeFactory.prototype.initializeConfigureMap=function(){this.configureProcs["Model"]=configureModel;this.configureProcs["BBoxDirective"]=configureDirective;this.configureProcs["RayPickDirective"]=configureDirective;this.configureProcs["RenderDirective"]=configureDirective;this.configureProcs["SerializeDirective"]=configureDirective;this.configureProcs["UpdateDirective"]=configureDirective;this.configureProcs["CollideDirective"]=configureDirective;this.configureProcs["HighlightDirective"]=configureDirective};AttributeFactory.prototype.initializeFinalizeMap=function(){this.finalizeProcs["Model"]=finalizeModel;this.finalizeProcs["BBoxDirective"]=finalizeDirective;this.finalizeProcs["RayPickDirective"]=finalizeDirective;this.finalizeProcs["RenderDirective"]=finalizeDirective;this.finalizeProcs["SerializeDirective"]=finalizeDirective;this.finalizeProcs["UpdateDirective"]=finalizeDirective;this.finalizeProcs["CollideDirective"]=finalizeDirective;this.finalizeProcs["HighlightDirective"]=finalizeDirective;this.finalizeProcs["KeyframeInterpolator"]=finalizeEvaluator;this.finalizeProcs["AppendNode"]=finalizeCommand;this.finalizeProcs["AutoInterpolate"]=finalizeCommand;this.finalizeProcs["CommandSequence"]=finalizeCommand;this.finalizeProcs["ConnectAttributes"]=finalizeCommand;this.finalizeProcs["ConnectOutputs"]=finalizeCommand;this.finalizeProcs["DisconnectAttributes"]=finalizeCommand;this.finalizeProcs["DisconnectOutputs"]=finalizeCommand;this.finalizeProcs["Export"]=finalizeCommand;this.finalizeProcs["Locate"]=finalizeCommand;this.finalizeProcs["MotionInterpolate"]=finalizeCommand;this.finalizeProcs["Pause"]=finalizeCommand;this.finalizeProcs["Play"]=finalizeCommand;this.finalizeProcs["Remove"]=finalizeCommand;this.finalizeProcs["ScreenCapture"]=finalizeCommand;this.finalizeProcs["Serialize"]=finalizeCommand;this.finalizeProcs["Set"]=finalizeCommand;this.finalizeProcs["Stop"]=finalizeCommand;this.finalizeProcs["Morph"]=finalizeCommand;this.finalizeProcs["SnapTo"]=finalizeCommand;this.finalizeProcs["MouseHandler"]=finalizeDeviceHandler;this.finalizeProcs["KeyboardHandler"]=finalizeDeviceHandler};AttributeFactory.prototype.setRegistry=function(e){this.registry=e};AttributeFactory.prototype.setGraphMgr=function(e){this.graphMgr=e};Bridgeworks.prototype=new AttributeContainer;Bridgeworks.prototype.constructor=Bridgeworks;Bridgeworks.prototype.get=function(e){return this.registry.find(e)};Bridgeworks.prototype.handleEvent=function(e,t){var n=null;switch(getObjectClassName(e)){case"MouseEvent":{var r=getElementAbsolutePos(this.canvas);e.canvasX=e.clientX-r.x;e.canvasY=e.clientY-r.y;n=this.eventAdapter.createMouseEvent(e)}break;case"KeyboardEvent":{n=this.eventAdapter.createKeyboardEvent(e,t)}break;default:break}if(n){this.eventMgr.processEvent(n)}};Bridgeworks.prototype.initRegistry=function(){this.registry.register(this);this.registry.register(this.graphMgr);this.registry.register(this.factory);this.registry.register(this.eventAdapter);this.registry.register(this.eventMgr);this.registry.register(this.commandMgr);this.registry.register(this.connectionMgr);this.registry.register(this.viewportMgr);this.registry.register(this.selector);this.registry.register(this.renderAgent);this.registry.register(this.layout);this.registry.register(this.mapProjectionCalculator);this.registry.registerByName(this.renderAgent,"AnimationAgent")};Bridgeworks.prototype.initEventListeners=function(){this.eventMgr.addListener(eEventType.MouseLeftDown,this.selector);this.eventMgr.addListener(eEventType.MouseMiddleDown,this.selector);this.eventMgr.addListener(eEventType.MouseRightDown,this.selector);this.eventMgr.addListener(eEventType.MouseBothDown,this.selector);this.eventMgr.addListener(eEventType.MouseHover,this.selector);this.eventMgr.addListener(eEventType.MouseLeftDown,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseLeftUp,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseLeftClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseLeftDblClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseMiddleDown,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseMiddleUp,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseMiddleClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseMiddleDblClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseRightDown,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseRightUp,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseRightClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseRightDblClick,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseWheelDown,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseWheelUp,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseBothDown,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseHover,this.rasterComponentEventListener);this.eventMgr.addListener(eEventType.MouseMove,this.rasterComponentEventListener)};Bridgeworks.prototype.onLoadModified=function(){this.renderAgent.stop();this.selector.stop();this.rasterComponentEventListener.stop();this.commandMgr.clearCommandSequenceStack();this.eventMgr.clearEvents();$("#RasterComponents").empty();this.selector.clearSelections();this.selector.getAttribute("lastSelectedName").setValueDirect("");this.viewportMgr.initLayout();this.registry.clear();this.initEventListeners();this.initRegistry();this.renderAgent.getAttribute("globalTimeInSecs").setValueDirect(0);this.graphMgr.reset();this.renderAgent.start();this.selector.start();this.rasterComponentEventListener.start();console.debug("TODO: "+arguments.callee.name)};Bridgeworks.prototype.resize=function(e,t){this.canvas.width=e;this.canvas.height=t;this.renderContext.setViewport(this.canvas.offsetLeft,this.canvas.offsetTop,e,t);this.viewportMgr.getAttribute("width").setValueDirect(e);this.viewportMgr.getAttribute("height").setValueDirect(t)};Bridgeworks.prototype.render=function(){this.eventMgr.processEvent(new Event(eEventType.RenderBegin));this.renderContext.clear();this.renderAgent.render();this.eventMgr.processEvent(new Event(eEventType.RenderEnd))};Bridgeworks.prototype.setRenderContext=function(e){this.renderContext=e;this.graphMgr.setRenderContext(e)};Bridgeworks.prototype.updateScene=function(e){var t=new String(e);var n=t.substr(t.length-3,3);if(n=="xml"){e=loadXMLResource(this.contentDir+"/"+e)}this.parser.parse(e)};(function(){function u(e,t){if(t.src){i.ajax({url:t.src,async:false,dataType:"script"})}else{i.globalEval(t.text||t.textContent||t.innerHTML||"")}if(t.parentNode){t.parentNode.removeChild(t)}}function a(){return+(new Date)}function p(e,t){return e[0]&&parseInt(i.curCSS(e[0],t,true),10)||0}function g(){return false}function y(){return true}function w(e){var t=RegExp("(^|\\.)"+e.type+"(\\.|$)"),n=true,r=[];i.each(i.data(this,"events").live||[],function(n,s){if(t.test(s.type)){var o=i(e.target).closest(s.data)[0];if(o){r.push({elem:o,fn:s})}}});r.sort(function(e,t){return i.data(e.elem,"closest")-i.data(t.elem,"closest")});i.each(r,function(){if(this.fn.call(this.elem,e,this.fn.data)===false){return n=false}});return n}function E(e,t){return["live",e,t.replace(/\./g,"`").replace(/ /g,"|")].join(".")}function x(){if(S){return}S=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);i.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);i.ready()}});if(document.documentElement.doScroll&&e==e.top){(function(){if(i.isReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}i.ready()})()}}}i.event.add(e,"load",i.ready)}function A(e,t){var n={};i.each(L.concat.apply([],L.slice(0,t)),function(){n[this]=e});return n}var e=this,t,n=e.jQuery,r=e.$,i=e.jQuery=e.$=function(e,t){return new i.fn.init(e,t)},s=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,o=/^.[^:#\[\.,]*$/;i.fn=i.prototype={init:function(e,t){e=e||document;if(e.nodeType){this[0]=e;this.length=1;this.context=e;return this}if(typeof e==="string"){var n=s.exec(e);if(n&&(n[1]||!t)){if(n[1]){e=i.clean([n[1]],t)}else{var r=document.getElementById(n[3]);if(r&&r.id!=n[3]){return i().find(e)}var o=i(r||[]);o.context=document;o.selector=e;return o}}else{return i(t).find(e)}}else{if(i.isFunction(e)){return i(document).ready(e)}}if(e.selector&&e.context){this.selector=e.selector;this.context=e.context}return this.setArray(i.isArray(e)?e:i.makeArray(e))},selector:"",jquery:"1.3.2",size:function(){return this.length},get:function(e){return e===t?Array.prototype.slice.call(this):this[e]},pushStack:function(e,t,n){var r=i(e);r.prevObject=this;r.context=this.context;if(t==="find"){r.selector=this.selector+(this.selector?" ":"")+n}else{if(t){r.selector=this.selector+"."+t+"("+n+")"}}return r},setArray:function(e){this.length=0;Array.prototype.push.apply(this,e);return this},each:function(e,t){return i.each(this,e,t)},index:function(e){return i.inArray(e&&e.jquery?e[0]:e,this)},attr:function(e,n,r){var s=e;if(typeof e==="string"){if(n===t){return this[0]&&i[r||"attr"](this[0],e)}else{s={};s[e]=n}}return this.each(function(t){for(e in s){i.attr(r?this.style:this,e,i.prop(this,s[e],r,t,e))}})},css:function(e,n){if((e=="width"||e=="height")&&parseFloat(n)<0){n=t}return this.attr(e,n,"curCSS")},text:function(e){if(typeof e!=="object"&&e!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(e))}var t="";i.each(e||this,function(){i.each(this.childNodes,function(){if(this.nodeType!=8){t+=this.nodeType!=1?this.nodeValue:i.fn.text([this])}})});return t},wrapAll:function(e){if(this[0]){var t=i(e,this[0].ownerDocument).clone();if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstChild){e=e.firstChild}return e}).append(this)}return this},wrapInner:function(e){return this.each(function(){i(this).contents().wrapAll(e)})},wrap:function(e){return this.each(function(){i(this).wrapAll(e)})},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType==1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType==1){this.insertBefore(e,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this.nextSibling)})},end:function(){return this.prevObject||i([])},push:[].push,sort:[].sort,splice:[].splice,find:function(e){if(this.length===1){var t=this.pushStack([],"find",e);t.length=0;i.find(e,this[0],t);return t}else{return this.pushStack(i.unique(i.map(this,function(t){return i.find(e,t)})),"find",e)}},clone:function(e){var t=this.map(function(){if(!i.support.noCloneEvent&&!i.isXMLDoc(this)){var e=this.outerHTML;if(!e){var t=this.ownerDocument.createElement("div");t.appendChild(this.cloneNode(true));e=t.innerHTML}return i.clean([e.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/^\s*/,"")])[0]}else{return this.cloneNode(true)}});if(e===true){var n=this.find("*").andSelf(),r=0;t.find("*").andSelf().each(function(){if(this.nodeName!==n[r].nodeName){return}var e=i.data(n[r],"events");for(var t in e){for(var s in e[t]){i.event.add(this,t,e[t][s],e[t][s].data)}}r++})}return t},filter:function(e){return this.pushStack(i.isFunction(e)&&i.grep(this,function(t,n){return e.call(t,n)})||i.multiFilter(e,i.grep(this,function(e){return e.nodeType===1})),"filter",e)},closest:function(e){var t=i.expr.match.POS.test(e)?i(e):null,n=0;return this.map(function(){var r=this;while(r&&r.ownerDocument){if(t?t.index(r)>-1:i(r).is(e)){i.data(r,"closest",n);return r}r=r.parentNode;n++}})},not:function(e){if(typeof e==="string"){if(o.test(e)){return this.pushStack(i.multiFilter(e,this,true),"not",e)}else{e=i.multiFilter(e,this)}}var n=e.length&&e[e.length-1]!==t&&!e.nodeType;return this.filter(function(){return n?i.inArray(this,e)<0:this!=e})},add:function(e){return this.pushStack(i.unique(i.merge(this.get(),typeof e==="string"?i(e):i.makeArray(e))))},is:function(e){return!!e&&i.multiFilter(e,this).length>0},hasClass:function(e){return!!e&&this.is("."+e)},val:function(e){if(e===t){var n=this[0];if(n){if(i.nodeName(n,"option")){return(n.attributes.value||{}).specified?n.value:n.text}if(i.nodeName(n,"select")){var r=n.selectedIndex,s=[],o=n.options,u=n.type=="select-one";if(r<0){return null}for(var a=u?r:0,f=u?r+1:o.length;a<f;a++){var l=o[a];if(l.selected){e=i(l).val();if(u){return e}s.push(e)}}return s}return(n.value||"").replace(/\r/g,"")}return t}if(typeof e==="number"){e+=""}return this.each(function(){if(this.nodeType!=1){return}if(i.isArray(e)&&/radio|checkbox/.test(this.type)){this.checked=i.inArray(this.value,e)>=0||i.inArray(this.name,e)>=0}else{if(i.nodeName(this,"select")){var t=i.makeArray(e);i("option",this).each(function(){this.selected=i.inArray(this.value,t)>=0||i.inArray(this.text,t)>=0});if(!t.length){this.selectedIndex=-1}}else{this.value=e}}})},html:function(e){return e===t?this[0]?this[0].innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,""):null:this.empty().append(e)},replaceWith:function(e){return this.after(e).remove()},eq:function(e){return this.slice(e,+e+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments),"slice",Array.prototype.slice.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(e,t,n){function l(e,n){return t&&i.nodeName(e,"table")&&i.nodeName(n,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}if(this[0]){var r=(this[0].ownerDocument||this[0]).createDocumentFragment(),s=i.clean(e,this[0].ownerDocument||this[0],r),o=r.firstChild;if(o){for(var a=0,f=this.length;a<f;a++){n.call(l(this[a],o),this.length>1||a>0?r.cloneNode(true):r)}}if(s){i.each(s,u)}}return this}};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var e=arguments[0]||{},n=1,r=arguments.length,s=false,o;if(typeof e==="boolean"){s=e;e=arguments[1]||{};n=2}if(typeof e!=="object"&&!i.isFunction(e)){e={}}if(r==n){e=this;--n}for(;n<r;n++){if((o=arguments[n])!=null){for(var u in o){var a=e[u],f=o[u];if(e===f){continue}if(s&&f&&typeof f==="object"&&!f.nodeType){e[u]=i.extend(s,a||(f.length!=null?[]:{}),f)}else{if(f!==t){e[u]=f}}}}}return e};var f=/z-?index|font-?weight|opacity|zoom|line-?height/i,l=document.defaultView||{},c=Object.prototype.toString;i.extend({noConflict:function(t){e.$=r;if(t){e.jQuery=n}return i},isFunction:function(e){return c.call(e)==="[object Function]"},isArray:function(e){return c.call(e)==="[object Array]"},isXMLDoc:function(e){return e.nodeType===9&&e.documentElement.nodeName!=="HTML"||!!e.ownerDocument&&i.isXMLDoc(e.ownerDocument)},globalEval:function(e){if(e&&/\S/.test(e)){var t=document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript";if(i.support.scriptEval){n.appendChild(document.createTextNode(e))}else{n.text=e}t.insertBefore(n,t.firstChild);t.removeChild(n)}},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()==t.toUpperCase()},each:function(e,n,r){var i,s=0,o=e.length;if(r){if(o===t){for(i in e){if(n.apply(e[i],r)===false){break}}}else{for(;s<o;){if(n.apply(e[s++],r)===false){break}}}}else{if(o===t){for(i in e){if(n.call(e[i],i,e[i])===false){break}}}else{for(var u=e[0];s<o&&n.call(u,s,u)!==false;u=e[++s]){}}}return e},prop:function(e,t,n,r,s){if(i.isFunction(t)){t=t.call(e,r)}return typeof t==="number"&&n=="curCSS"&&!f.test(s)?t+"px":t},className:{add:function(e,t){i.each((t||"").split(/\s+/),function(t,n){if(e.nodeType==1&&!i.className.has(e.className,n)){e.className+=(e.className?" ":"")+n}})},remove:function(e,n){if(e.nodeType==1){e.className=n!==t?i.grep(e.className.split(/\s+/),function(e){return!i.className.has(n,e)}).join(" "):""}},has:function(e,t){return e&&i.inArray(t,(e.className||e).toString().split(/\s+/))>-1}},swap:function(e,t,n){var r={};for(var i in t){r[i]=e.style[i];e.style[i]=t[i]}n.call(e);for(var i in t){e.style[i]=r[i]}},css:function(e,t,n,r){if(t=="width"||t=="height"){var s,o={position:"absolute",visibility:"hidden",display:"block"},u=t=="width"?["Left","Right"]:["Top","Bottom"];function a(){s=t=="width"?e.offsetWidth:e.offsetHeight;if(r==="border"){return}i.each(u,function(){if(!r){s-=parseFloat(i.curCSS(e,"padding"+this,true))||0}if(r==="margin"){s+=parseFloat(i.curCSS(e,"margin"+this,true))||0}else{s-=parseFloat(i.curCSS(e,"border"+this+"Width",true))||0}})}if(e.offsetWidth!==0){a()}else{i.swap(e,o,a)}return Math.max(0,Math.round(s))}return i.curCSS(e,t,n)},curCSS:function(e,t,n){var r,s=e.style;if(t=="opacity"&&!i.support.opacity){r=i.attr(s,"opacity");return r==""?"1":r}if(t.match(/float/i)){t=T}if(!n&&s&&s[t]){r=s[t]}else{if(l.getComputedStyle){if(t.match(/float/i)){t="float"}t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var o=l.getComputedStyle(e,null);if(o){r=o.getPropertyValue(t)}if(t=="opacity"&&r==""){r="1"}}else{if(e.currentStyle){var u=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});r=e.currentStyle[t]||e.currentStyle[u];if(!/^\d+(px)?$/i.test(r)&&/^\d/.test(r)){var a=s.left,f=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left;s.left=r||0;r=s.pixelLeft+"px";s.left=a;e.runtimeStyle.left=f}}}}return r},clean:function(e,t,n){t=t||document;if(typeof t.createElement==="undefined"){t=t.ownerDocument||t[0]&&t[0].ownerDocument||document}if(!n&&e.length===1&&typeof e[0]==="string"){var r=/^<(\w+)\s*\/?>$/.exec(e[0]);if(r){return[t.createElement(r[1])]}}var s=[],o=[],u=t.createElement("div");i.each(e,function(e,n){if(typeof n==="number"){n+=""}if(!n){return}if(typeof n==="string"){n=n.replace(/(<(\w+)[^>]*?)\/>/g,function(e,t,n){return n.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?e:t+"></"+n+">"});var r=n.replace(/^\s+/,"").substring(0,10).toLowerCase();var o=!r.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!r.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||r.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!r.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||!i.support.htmlSerialize&&[1,"div<div>","</div>"]||[0,"",""];u.innerHTML=o[1]+n+o[2];while(o[0]--){u=u.lastChild}if(!i.support.tbody){var a=/<tbody/i.test(n),f=!r.indexOf("<table")&&!a?u.firstChild&&u.firstChild.childNodes:o[1]=="<table>"&&!a?u.childNodes:[];for(var l=f.length-1;l>=0;--l){if(i.nodeName(f[l],"tbody")&&!f[l].childNodes.length){f[l].parentNode.removeChild(f[l])}}}if(!i.support.leadingWhitespace&&/^\s/.test(n)){u.insertBefore(t.createTextNode(n.match(/^\s*/)[0]),u.firstChild)}n=i.makeArray(u.childNodes)}if(n.nodeType){s.push(n)}else{s=i.merge(s,n)}});if(n){for(var a=0;s[a];a++){if(i.nodeName(s[a],"script")&&(!s[a].type||s[a].type.toLowerCase()==="text/javascript")){o.push(s[a].parentNode?s[a].parentNode.removeChild(s[a]):s[a])}else{if(s[a].nodeType===1){s.splice.apply(s,[a+1,0].concat(i.makeArray(s[a].getElementsByTagName("script"))))}n.appendChild(s[a])}}return o}return s},attr:function(e,n,r){if(!e||e.nodeType==3||e.nodeType==8){return t}var s=!i.isXMLDoc(e),o=r!==t;n=s&&i.props[n]||n;if(e.tagName){var u=/href|src|style/.test(n);if(n=="selected"&&e.parentNode){e.parentNode.selectedIndex}if(n in e&&s&&!u){if(o){if(n=="type"&&i.nodeName(e,"input")&&e.parentNode){throw"type property can't be changed"}e[n]=r}if(i.nodeName(e,"form")&&e.getAttributeNode(n)){return e.getAttributeNode(n).nodeValue}if(n=="tabIndex"){var a=e.getAttributeNode("tabIndex");return a&&a.specified?a.value:e.nodeName.match(/(button|input|object|select|textarea)/i)?0:e.nodeName.match(/^(a|area)$/i)&&e.href?0:t}return e[n]}if(!i.support.style&&s&&n=="style"){return i.attr(e.style,"cssText",r)}if(o){e.setAttribute(n,""+r)}var f=!i.support.hrefNormalized&&s&&u?e.getAttribute(n,2):e.getAttribute(n);return f===null?t:f}if(!i.support.opacity&&n=="opacity"){if(o){e.zoom=1;e.filter=(e.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(r)+""=="NaN"?"":"alpha(opacity="+r*100+")")}return e.filter&&e.filter.indexOf("opacity=")>=0?parseFloat(e.filter.match(/opacity=([^)]*)/)[1])/100+"":""}n=n.replace(/-([a-z])/ig,function(e,t){return t.toUpperCase()});if(o){e[n]=r}return e[n]},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},makeArray:function(e){var t=[];if(e!=null){var n=e.length;if(n==null||typeof e==="string"||i.isFunction(e)||e.setInterval){t[0]=e}else{while(n){t[--n]=e[n]}}}return t},inArray:function(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n]===e){return n}}return-1},merge:function(e,t){var n=0,r,s=e.length;if(!i.support.getAll){while((r=t[n++])!=null){if(r.nodeType!=8){e[s++]=r}}}else{while((r=t[n++])!=null){e[s++]=r}}return e},unique:function(e){var t=[],n={};try{for(var r=0,s=e.length;r<s;r++){var o=i.data(e[r]);if(!n[o]){n[o]=true;t.push(e[r])}}}catch(u){t=e}return t},grep:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){if(!n!=!t(e[i],i)){r.push(e[i])}}return r},map:function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=t(e[r],r);if(s!=null){n[n.length]=s}}return n.concat.apply([],n)}});var h=navigator.userAgent.toLowerCase();i.browser={version:(h.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(h),opera:/opera/.test(h),msie:/msie/.test(h)&&!/opera/.test(h),mozilla:/mozilla/.test(h)&&!/(compatible|webkit)/.test(h)};i.each({parent:function(e){return e.parentNode},parents:function(e){return i.dir(e,"parentNode")},next:function(e){return i.nth(e,2,"nextSibling")},prev:function(e){return i.nth(e,2,"previousSibling")},nextAll:function(e){return i.dir(e,"nextSibling")},prevAll:function(e){return i.dir(e,"previousSibling")},siblings:function(e){return i.sibling(e.parentNode.firstChild,e)},children:function(e){return i.sibling(e.firstChild)},contents:function(e){return i.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:i.makeArray(e.childNodes)}},function(e,t){i.fn[e]=function(n){var r=i.map(this,t);if(n&&typeof n=="string"){r=i.multiFilter(n,r)}return this.pushStack(i.unique(r),e,n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){i.fn[e]=function(n){var r=[],s=i(n);for(var o=0,u=s.length;o<u;o++){var a=(o>0?this.clone(true):this).get();i.fn[t].apply(i(s[o]),a);r=r.concat(a)}return this.pushStack(r,e,n)}});i.each({removeAttr:function(e){i.attr(this,e,"");if(this.nodeType==1){this.removeAttribute(e)}},addClass:function(e){i.className.add(this,e)},removeClass:function(e){i.className.remove(this,e)},toggleClass:function(e,t){if(typeof t!=="boolean"){t=!i.className.has(this,e)}i.className[t?"add":"remove"](this,e)},remove:function(e){if(!e||i.filter(e,[this]).length){i("*",this).add([this]).each(function(){i.event.remove(this);i.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){i(this).children().remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(e,t){i.fn[e]=function(){return this.each(t,arguments)}});var d="jQuery"+a(),v=0,m={};i.extend({cache:{},data:function(n,r,s){n=n==e?m:n;var o=n[d];if(!o){o=n[d]=++v}if(r&&!i.cache[o]){i.cache[o]={}}if(s!==t){i.cache[o][r]=s}return r?i.cache[o][r]:o},removeData:function(t,n){t=t==e?m:t;var r=t[d];if(n){if(i.cache[r]){delete i.cache[r][n];n="";for(n in i.cache[r]){break}if(!n){i.removeData(t)}}}else{try{delete t[d]}catch(s){if(t.removeAttribute){t.removeAttribute(d)}}delete i.cache[r]}},queue:function(e,t,n){if(e){t=(t||"fx")+"queue";var r=i.data(e,t);if(!r||i.isArray(n)){r=i.data(e,t,i.makeArray(n))}else{if(n){r.push(n)}}}return r},dequeue:function(e,n){var r=i.queue(e,n),s=r.shift();if(!n||n==="fx"){s=r[0]}if(s!==t){s.call(e)}}});i.fn.extend({data:function(e,n){var r=e.split(".");r[1]=r[1]?"."+r[1]:"";if(n===t){var s=this.triggerHandler("getData"+r[1]+"!",[r[0]]);if(s===t&&this.length){s=i.data(this[0],e)}return s===t&&r[1]?this.data(r[0]):s}else{return this.trigger("setData"+r[1]+"!",[r[0],n]).each(function(){i.data(this,e,n)})}},removeData:function(e){return this.each(function(){i.removeData(this,e)})},queue:function(e,n){if(typeof e!=="string"){n=e;e="fx"}if(n===t){return i.queue(this[0],e)}return this.each(function(){var t=i.queue(this,e,n);if(e=="fx"&&t.length==1){t[0].call(this)}})},dequeue:function(e){return this.each(function(){i.dequeue(this,e)})}});(function(){function p(e,t,n,r,i,s){var o=e=="previousSibling"&&!s;for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){if(o&&f.nodeType===1){f.sizcache=n;f.sizset=u}f=f[e];var l=false;while(f){if(f.sizcache===n){l=r[f.sizset];break}if(f.nodeType===1&&!s){f.sizcache=n;f.sizset=u}if(f.nodeName===t){l=f;break}f=f[e]}r[u]=l}}}function d(e,t,n,r,i,s){var u=e=="previousSibling"&&!s;for(var a=0,f=r.length;a<f;a++){var l=r[a];if(l){if(u&&l.nodeType===1){l.sizcache=n;l.sizset=a}l=l[e];var c=false;while(l){if(l.sizcache===n){c=r[l.sizset];break}if(l.nodeType===1){if(!s){l.sizcache=n;l.sizset=a}if(typeof t!=="string"){if(l===t){c=true;break}}else{if(o.filter(t,[l]).length>0){c=l;break}}}l=l[e]}r[a]=c}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,r=0,s=Object.prototype.toString;var o=function(e,t,r,i){r=r||[];t=t||document;if(t.nodeType!==1&&t.nodeType!==9){return[]}if(!e||typeof e!=="string"){return r}var f=[],c,p,d,y,b,w,E=true;n.lastIndex=0;while((c=n.exec(e))!==null){f.push(c[1]);if(c[2]){w=RegExp.rightContext;break}}if(f.length>1&&a.exec(e)){if(f.length===2&&u.relative[f[0]]){p=g(f[0]+f[1],t)}else{p=u.relative[f[0]]?[t]:o(f.shift(),t);while(f.length){e=f.shift();if(u.relative[e]){e+=f.shift()}p=g(e,p)}}}else{var S=i?{expr:f.pop(),set:l(i)}:o.find(f.pop(),f.length===1&&t.parentNode?t.parentNode:t,m(t));p=o.filter(S.expr,S.set);if(f.length>0){d=l(p)}else{E=false}while(f.length){var x=f.pop(),T=x;if(!u.relative[x]){x=""}else{T=f.pop()}if(T==null){T=t}u.relative[x](d,T,m(t))}}if(!d){d=p}if(!d){throw"Syntax error, unrecognized expression: "+(x||e)}if(s.call(d)==="[object Array]"){if(!E){r.push.apply(r,d)}else{if(t.nodeType===1){for(var N=0;d[N]!=null;N++){if(d[N]&&(d[N]===true||d[N].nodeType===1&&v(t,d[N]))){r.push(p[N])}}}else{for(var N=0;d[N]!=null;N++){if(d[N]&&d[N].nodeType===1){r.push(p[N])}}}}}else{l(d,r)}if(w){o(w,t,r,i);if(h){hasDuplicate=false;r.sort(h);if(hasDuplicate){for(var N=1;N<r.length;N++){if(r[N]===r[N-1]){r.splice(N--,1)}}}}}return r};o.matches=function(e,t){return o(e,null,null,t)};o.find=function(e,t,n){var r,i;if(!e){return[]}for(var s=0,o=u.order.length;s<o;s++){var a=u.order[s],i;if(i=u.match[a].exec(e)){var f=RegExp.leftContext;if(f.substr(f.length-1)!=="\\"){i[1]=(i[1]||"").replace(/\\/g,"");r=u.find[a](i,t,n);if(r!=null){e=e.replace(u.match[a],"");break}}}}if(!r){r=t.getElementsByTagName("*")}return{set:r,expr:e}};o.filter=function(e,n,r,i){var s=e,o=[],a=n,f,l,c=n&&n[0]&&m(n[0]);while(e&&n.length){for(var h in u.filter){if((f=u.match[h].exec(e))!=null){var p=u.filter[h],d,v;l=false;if(a==o){o=[]}if(u.preFilter[h]){f=u.preFilter[h](f,a,r,o,i,c);if(!f){l=d=true}else{if(f===true){continue}}}if(f){for(var g=0;(v=a[g])!=null;g++){if(v){d=p(v,f,g,a);var y=i^!!d;if(r&&d!=null){if(y){l=true}else{a[g]=false}}else{if(y){o.push(v);l=true}}}}}if(d!==t){if(!r){a=o}e=e.replace(u.match[h],"");if(!l){return[]}break}}}if(e==s){if(l==null){throw"Syntax error, unrecognized expression: "+e}else{break}}s=e}return a};var u=o.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var r=typeof t==="string",i=r&&!/\W/.test(t),s=r&&!i;if(i&&!n){t=t.toUpperCase()}for(var u=0,a=e.length,f;u<a;u++){if(f=e[u]){while((f=f.previousSibling)&&f.nodeType!==1){}e[u]=s||f&&f.nodeName===t?f||false:f===t}}if(s){o.filter(t,e,true)}},">":function(e,t,n){var r=typeof t==="string";if(r&&!/\W/.test(t)){t=n?t:t.toUpperCase();for(var i=0,s=e.length;i<s;i++){var u=e[i];if(u){var a=u.parentNode;e[i]=a.nodeName===t?a:false}}}else{for(var i=0,s=e.length;i<s;i++){var u=e[i];if(u){e[i]=r?u.parentNode:u.parentNode===t}}if(r){o.filter(t,e,true)}}},"":function(e,t,n){var i=r++,s=d;if(!t.match(/\W/)){var o=t=n?t:t.toUpperCase();s=p}s("parentNode",t,i,e,o,n)},"~":function(e,t,n){var i=r++,s=d;if(typeof t==="string"&&!t.match(/\W/)){var o=t=n?t:t.toUpperCase();s=p}s("previousSibling",t,i,e,o,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!=="undefined"&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t,n){if(typeof t.getElementsByName!=="undefined"){var r=[],i=t.getElementsByName(e[1]);for(var s=0,o=i.length;s<o;s++){if(i[s].getAttribute("name")===e[1]){r.push(i[s])}}return r.length===0?null:r}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\/g,"")+" ";if(s){return e}for(var o=0,u;(u=t[o])!=null;o++){if(u){if(i^(u.className&&(" "+u.className+" ").indexOf(e)>=0)){if(!n){r.push(u)}}else{if(n){t[o]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){for(var n=0;t[n]===false;n++){}return t[n]&&m(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if(e[1]=="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]=="even"&&"2n"||e[2]=="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0;e[3]=t[3]-0}e[0]=r++;return e},ATTR:function(e,t,n,r,i,s){var o=e[1].replace(/\\/g,"");if(!s&&u.attrMap[o]){e[1]=u.attrMap[o]}if(e[2]==="~="){e[4]=" "+e[4]+" "}return e},PSEUDO:function(e,t,r,i,s){if(e[1]==="not"){if(e[3].match(n).length>1||/^\w/.test(e[3])){e[3]=o(e[3],null,null,t)}else{var a=o.filter(e[3],t,r,true^s);if(!r){i.push.apply(i,a)}return false}}else{if(u.match.POS.test(e[0])||u.match.CHILD.test(e[0])){return true}}return e},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!o(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toUpperCase()==="BUTTON"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=u.filters[i];if(s){return s(e,n,t,r)}else{if(i==="contains"){return(e.textContent||e.innerText||"").indexOf(t[3])>=0}else{if(i==="not"){var o=t[3];for(var n=0,a=o.length;n<a;n++){if(o[n]===e){return false}}return true}}}},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling){if(r.nodeType===1){return false}}if(n=="first"){return true}r=e;case"last":while(r=r.nextSibling){if(r.nodeType===1){return false}}return true;case"nth":var i=t[2],s=t[3];if(i==1&&s==0){return true}var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling){if(r.nodeType===1){r.nodeIndex=++a}}u.sizcache=o}var f=e.nodeIndex-s;if(i==0){return f==0}else{return f%i==0&&f/i>=0}}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=u.attrHandle[n]?u.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:!o?i&&r!==false:s==="!="?i!=o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":false},POS:function(e,t,n,r){var i=t[2],s=u.setFilters[i];if(s){return s(e,n,t,r)}}}};var a=u.match.POS;for(var f in u.match){u.match[f]=RegExp(u.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var l=function(e,t){e=Array.prototype.slice.call(e);if(t){t.push.apply(t,e);return t}return e};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(c){l=function(e,t){var n=t||[];if(s.call(e)==="[object Array]"){Array.prototype.push.apply(n,e)}else{if(typeof e.length==="number"){for(var r=0,i=e.length;r<i;r++){n.push(e[r])}}else{for(var r=0;e[r];r++){n.push(e[r])}}}return n}}var h;if(document.documentElement.compareDocumentPosition){h=function(e,t){var n=e.compareDocumentPosition(t)&4?-1:e===t?0:1;if(n===0){hasDuplicate=true}return n}}else{if("sourceIndex"in document.documentElement){h=function(e,t){var n=e.sourceIndex-t.sourceIndex;if(n===0){hasDuplicate=true}return n}}else{if(document.createRange){h=function(e,t){var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();n.selectNode(e);n.collapse(true);r.selectNode(t);r.collapse(true);var i=n.compareBoundaryPoints(Range.START_TO_END,r);if(i===0){hasDuplicate=true}return i}}}}(function(){var e=document.createElement("form"),n="script"+(new Date).getTime();e.innerHTML="<input name='"+n+"'/>";var r=document.documentElement;r.insertBefore(e,r.firstChild);if(!!document.getElementById(n)){u.find.ID=function(e,n,r){if(typeof n.getElementById!=="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!=="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}};u.filter.ID=function(e,t){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}}r.removeChild(e)})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){u.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++){if(n[i].nodeType===1){r.push(n[i])}}n=r}return n}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){u.attrHandle.href=function(e){return e.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var e=o,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0){return}o=function(t,n,r,i){n=n||document;if(!i&&n.nodeType===9&&!m(n)){try{return l(n.querySelectorAll(t),r)}catch(s){}}return e(t,n,r,i)};o.find=e.find;o.filter=e.filter;o.selectors=e.selectors;o.matches=e.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}u.order.splice(1,0,"CLASS");u.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!=="undefined"&&!n){return t.getElementsByClassName(e[1])}}})()}var v=document.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)&16}:function(e,t){return e!==t&&(e.contains?e.contains(t):true)};var m=function(e){return e.nodeType===9&&e.documentElement.nodeName!=="HTML"||!!e.ownerDocument&&m(e.ownerDocument)};var g=function(e,t){var n=[],r="",i,s=t.nodeType?[t]:t;while(i=u.match.PSEUDO.exec(e)){r+=i[0];e=e.replace(u.match.PSEUDO,"")}e=u.relative[e]?e+"*":e;for(var a=0,f=s.length;a<f;a++){o(e,s[a],n)}return o.filter(r,n)};i.find=o;i.filter=o.filter;i.expr=o.selectors;i.expr[":"]=i.expr.filters;o.selectors.filters.hidden=function(e){return e.offsetWidth===0||e.offsetHeight===0};o.selectors.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0};o.selectors.filters.animated=function(e){return i.grep(i.timers,function(t){return e===t.elem}).length};i.multiFilter=function(e,t,n){if(n){e=":not("+e+")"}return o.matches(e,t)};i.dir=function(e,t){var n=[],r=e[t];while(r&&r!=document){if(r.nodeType==1){n.push(r)}r=r[t]}return n};i.nth=function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n]){if(e.nodeType==1&&++i==t){break}}return e};i.sibling=function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType==1&&e!=t){n.push(e)}}return n};return;e.Sizzle=o})();i.event={add:function(n,r,s,o){if(n.nodeType==3||n.nodeType==8){return}if(n.setInterval&&n!=e){n=e}if(!s.guid){s.guid=this.guid++}if(o!==t){var u=s;s=this.proxy(u);s.data=o}var a=i.data(n,"events")||i.data(n,"events",{}),f=i.data(n,"handle")||i.data(n,"handle",function(){return typeof i!=="undefined"&&!i.event.triggered?i.event.handle.apply(arguments.callee.elem,arguments):t});f.elem=n;i.each(r.split(/\s+/),function(e,t){var r=t.split(".");t=r.shift();s.type=r.slice().sort().join(".");var u=a[t];if(i.event.specialAll[t]){i.event.specialAll[t].setup.call(n,o,r)}if(!u){u=a[t]={};if(!i.event.special[t]||i.event.special[t].setup.call(n,o,r)===false){if(n.addEventListener){n.addEventListener(t,f,false)}else{if(n.attachEvent){n.attachEvent("on"+t,f)}}}}u[s.guid]=s;i.event.global[t]=true});n=null},guid:1,global:{},remove:function(e,n,r){if(e.nodeType==3||e.nodeType==8){return}var s=i.data(e,"events"),o,u;if(s){if(n===t||typeof n==="string"&&n.charAt(0)=="."){for(var a in s){this.remove(e,a+(n||""))}}else{if(n.type){r=n.handler;n=n.type}i.each(n.split(/\s+/),function(t,n){var u=n.split(".");n=u.shift();var a=RegExp("(^|\\.)"+u.slice().sort().join(".*\\.")+"(\\.|$)");if(s[n]){if(r){delete s[n][r.guid]}else{for(var f in s[n]){if(a.test(s[n][f].type)){delete s[n][f]}}}if(i.event.specialAll[n]){i.event.specialAll[n].teardown.call(e,u)}for(o in s[n]){break}if(!o){if(!i.event.special[n]||i.event.special[n].teardown.call(e,u)===false){if(e.removeEventListener){e.removeEventListener(n,i.data(e,"handle"),false)}else{if(e.detachEvent){e.detachEvent("on"+n,i.data(e,"handle"))}}}o=null;delete s[n]}}})}for(o in s){break}if(!o){var f=i.data(e,"handle");if(f){f.elem=null}i.removeData(e,"events");i.removeData(e,"handle")}}},trigger:function(e,n,r,s){var o=e.type||e;if(!s){e=typeof e==="object"?e[d]?e:i.extend(i.Event(o),e):i.Event(o);if(o.indexOf("!")>=0){e.type=o=o.slice(0,-1);e.exclusive=true}if(!r){e.stopPropagation();if(this.global[o]){i.each(i.cache,function(){if(this.events&&this.events[o]){i.event.trigger(e,n,this.handle.elem)}})}}if(!r||r.nodeType==3||r.nodeType==8){return t}e.result=t;e.target=r;n=i.makeArray(n);n.unshift(e)}e.currentTarget=r;var u=i.data(r,"handle");if(u){u.apply(r,n)}if((!r[o]||i.nodeName(r,"a")&&o=="click")&&r["on"+o]&&r["on"+o].apply(r,n)===false){e.result=false}if(!s&&r[o]&&!e.isDefaultPrevented()&&!(i.nodeName(r,"a")&&o=="click")){this.triggered=true;try{r[o]()}catch(a){}}this.triggered=false;if(!e.isPropagationStopped()){var f=r.parentNode||r.ownerDocument;if(f){i.event.trigger(e,n,f,true)}}},handle:function(n){var r,s;n=arguments[0]=i.event.fix(n||e.event);n.currentTarget=this;var o=n.type.split(".");n.type=o.shift();r=!o.length&&!n.exclusive;var u=RegExp("(^|\\.)"+o.slice().sort().join(".*\\.")+"(\\.|$)");s=(i.data(this,"events")||{})[n.type];for(var a in s){var f=s[a];if(r||u.test(f.type)){n.handler=f;n.data=f.data;var l=f.apply(this,arguments);if(l!==t){n.result=l;if(l===false){n.preventDefault();n.stopPropagation()}}if(n.isImmediatePropagationStopped()){break}}}},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[d]){return e}var t=e;e=i.Event(t);for(var n=this.props.length,r;n;){r=this.props[--n];e[r]=t[r]}if(!e.target){e.target=e.srcElement||document}if(e.target.nodeType==3){e.target=e.target.parentNode}if(!e.relatedTarget&&e.fromElement){e.relatedTarget=e.fromElement==e.target?e.toElement:e.fromElement}if(e.pageX==null&&e.clientX!=null){var s=document.documentElement,o=document.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s.clientLeft||0);e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s.clientTop||0)}if(!e.which&&(e.charCode||e.charCode===0?e.charCode:e.keyCode)){e.which=e.charCode||e.keyCode}if(!e.metaKey&&e.ctrlKey){e.metaKey=e.ctrlKey}if(!e.which&&e.button){e.which=e.button&1?1:e.button&2?3:e.button&4?2:0}return e},proxy:function(e,t){t=t||function(){return e.apply(this,arguments)};t.guid=e.guid=e.guid||t.guid||this.guid++;return t},special:{ready:{setup:x,teardown:function(){}}},specialAll:{live:{setup:function(e,t){i.event.add(this,t[0],w)},teardown:function(e){if(e.length){var t=0,n=RegExp("(^|\\.)"+e[0]+"(\\.|$)");i.each(i.data(this,"events").live||{},function(){if(n.test(this.type)){t++}});if(t<1){i.event.remove(this,e[0],w)}}}}}};i.Event=function(e){if(!this.preventDefault){return new i.Event(e)}if(e&&e.type){this.originalEvent=e;this.type=e.type}else{this.type=e}this.timeStamp=a();this[d]=true};i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=y;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}e.returnValue=false},stopPropagation:function(){this.isPropagationStopped=y;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=y;this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g};var b=function(e){var t=e.relatedTarget;while(t&&t!=this){try{t=t.parentNode}catch(n){t=this}}if(t!=this){e.type=e.data;i.event.handle.apply(this,arguments)}};i.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(e,t){i.event.special[t]={setup:function(){i.event.add(this,e,b,t)},teardown:function(){i.event.remove(this,e,b)}}});i.fn.extend({bind:function(e,t,n){return e=="unload"?this.one(e,t,n):this.each(function(){i.event.add(this,e,n||t,n&&t)})},one:function(e,t,n){var r=i.event.proxy(n||t,function(e){i(this).unbind(e,r);return(n||t).apply(this,arguments)});return this.each(function(){i.event.add(this,e,r,n&&t)})},unbind:function(e,t){return this.each(function(){i.event.remove(this,e,t)})},trigger:function(e,t){return this.each(function(){i.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0]){var n=i.Event(e);n.preventDefault();n.stopPropagation();i.event.trigger(n,t,this[0]);return n.result}},toggle:function(e){var t=arguments,n=1;while(n<t.length){i.event.proxy(e,t[n++])}return this.click(i.event.proxy(e,function(e){this.lastToggle=(this.lastToggle||0)%n;e.preventDefault();return t[this.lastToggle++].apply(this,arguments)||false}))},hover:function(e,t){return this.mouseenter(e).mouseleave(t)},ready:function(e){x();if(i.isReady){e.call(document,i)}else{i.readyList.push(e)}return this},live:function(e,t){var n=i.event.proxy(t);n.guid+=this.selector+e;i(document).bind(E(e,this.selector),this.selector,n);return this},die:function(e,t){i(document).unbind(E(e,this.selector),t?{guid:t.guid+this.selector+e}:null);return this}});i.extend({isReady:false,readyList:[],ready:function(){if(!i.isReady){i.isReady=true;if(i.readyList){i.each(i.readyList,function(){this.call(document,i)});i.readyList=null}i(document).triggerHandler("ready")}}});var S=false;i.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error".split(","),function(e,t){i.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}});i(e).bind("unload",function(){for(var e in i.cache){if(e!=1&&i.cache[e].handle){i.event.remove(i.cache[e].handle.elem)}}});(function(){i.support={};var t=document.documentElement,n=document.createElement("script"),r=document.createElement("div"),s="script"+(new Date).getTime();r.style.display="none";r.innerHTML='   <link/><table></table><a href="/a" style="color:red;float:left;opacity:.5;">a</a><select><option>text</option></select><object><param/></object>';var o=r.getElementsByTagName("*"),u=r.getElementsByTagName("a")[0];if(!o||!o.length||!u){return}i.support={leadingWhitespace:r.firstChild.nodeType==3,tbody:!r.getElementsByTagName("tbody").length,objectAll:!!r.getElementsByTagName("object")[0].getElementsByTagName("*").length,htmlSerialize:!!r.getElementsByTagName("link").length,style:/red/.test(u.getAttribute("style")),hrefNormalized:u.getAttribute("href")==="/a",opacity:u.style.opacity==="0.5",cssFloat:!!u.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};n.type="text/javascript";try{n.appendChild(document.createTextNode("window."+s+"=1;"))}catch(a){}t.insertBefore(n,t.firstChild);if(e[s]){i.support.scriptEval=true;delete e[s]}t.removeChild(n);if(r.attachEvent&&r.fireEvent){r.attachEvent("onclick",function(){i.support.noCloneEvent=false;r.detachEvent("onclick",arguments.callee)});r.cloneNode(true).fireEvent("onclick")}i(function(){var e=document.createElement("div");e.style.width=e.style.paddingLeft="1px";document.body.appendChild(e);i.boxModel=i.support.boxModel=e.offsetWidth===2;document.body.removeChild(e).style.display="none"})})();var T=i.support.cssFloat?"cssFloat":"styleFloat";i.props={"for":"htmlFor","class":"className","float":T,cssFloat:T,styleFloat:T,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};i.fn.extend({_load:i.fn.load,load:function(e,t,n){if(typeof e!=="string"){return this._load(e)}var r=e.indexOf(" ");if(r>=0){var s=e.slice(r,e.length);e=e.slice(0,r)}var o="GET";if(t){if(i.isFunction(t)){n=t;t=null}else{if(typeof t==="object"){t=i.param(t);o="POST"}}}var u=this;i.ajax({url:e,type:o,dataType:"html",data:t,complete:function(e,t){if(t=="success"||t=="notmodified"){u.html(s?i("<div/>").append(e.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(s):e.responseText)}if(n){u.each(n,[e.responseText,t,e])}}});return this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(e,t){var n=i(this).val();return n==null?null:i.isArray(n)?i.map(n,function(e,n){return{name:t.name,value:e}}):{name:t.name,value:n}}).get()}});i.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(e,t){i.fn[t]=function(e){return this.bind(t,e)}});var N=a();i.extend({get:function(e,t,n,r){if(i.isFunction(t)){n=t;t=null}return i.ajax({type:"GET",url:e,data:t,success:n,dataType:r})},getScript:function(e,t){return i.get(e,null,t,"script")},getJSON:function(e,t,n){return i.get(e,t,n,"json")},post:function(e,t,n,r){if(i.isFunction(t)){n=t;t={}}return i.ajax({type:"POST",url:e,data:t,success:n,dataType:r})},ajaxSetup:function(e){i.extend(i.ajaxSettings,e)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return e.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(n){function E(){if(n.success){n.success(u,o)}if(n.global){i.event.trigger("ajaxSuccess",[g,n])}}function S(){if(n.complete){n.complete(g,o)}if(n.global){i.event.trigger("ajaxComplete",[g,n])}if(n.global&&!--i.active){i.event.trigger("ajaxStop")}}n=i.extend(true,n,i.extend(true,{},i.ajaxSettings,n));var r,s=/=\?(&|$)/g,o,u,f=n.type.toUpperCase();if(n.data&&n.processData&&typeof n.data!=="string"){n.data=i.param(n.data)}if(n.dataType=="jsonp"){if(f=="GET"){if(!n.url.match(s)){n.url+=(n.url.match(/\?/)?"&":"?")+(n.jsonp||"callback")+"=?"}}else{if(!n.data||!n.data.match(s)){n.data=(n.data?n.data+"&":"")+(n.jsonp||"callback")+"=?"}}n.dataType="json"}if(n.dataType=="json"&&(n.data&&n.data.match(s)||n.url.match(s))){r="jsonp"+N++;if(n.data){n.data=(n.data+"").replace(s,"="+r+"$1")}n.url=n.url.replace(s,"="+r+"$1");n.dataType="script";e[r]=function(n){u=n;E();S();e[r]=t;try{delete e[r]}catch(i){}if(p){p.removeChild(d)}}}if(n.dataType=="script"&&n.cache==null){n.cache=false}if(n.cache===false&&f=="GET"){var l=a();var c=n.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+l+"$2");n.url=c+(c==n.url?(n.url.match(/\?/)?"&":"?")+"_="+l:"")}if(n.data&&f=="GET"){n.url+=(n.url.match(/\?/)?"&":"?")+n.data;n.data=null}if(n.global&&!(i.active++)){i.event.trigger("ajaxStart")}var h=/^(\w+:)?\/\/([^\/?#]+)/.exec(n.url);if(n.dataType=="script"&&f=="GET"&&h&&(h[1]&&h[1]!=location.protocol||h[2]!=location.host)){var p=document.getElementsByTagName("head")[0];var d=document.createElement("script");d.src=n.url;if(n.scriptCharset){d.charset=n.scriptCharset}if(!r){var v=false;d.onload=d.onreadystatechange=function(){if(!v&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){v=true;E();S();d.onload=d.onreadystatechange=null;p.removeChild(d)}}}p.appendChild(d);return t}var m=false;var g=n.xhr();if(n.username){g.open(f,n.url,n.async,n.username,n.password)}else{g.open(f,n.url,n.async)}try{if(n.data){g.setRequestHeader("Content-Type",n.contentType)}if(n.ifModified){g.setRequestHeader("If-Modified-Since",i.lastModified[n.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}g.setRequestHeader("X-Requested-With","XMLHttpRequest");g.setRequestHeader("Accept",n.dataType&&n.accepts[n.dataType]?n.accepts[n.dataType]+", */*":n.accepts._default)}catch(y){}if(n.beforeSend&&n.beforeSend(g,n)===false){if(n.global&&!--i.active){i.event.trigger("ajaxStop")}g.abort();return false}if(n.global){i.event.trigger("ajaxSend",[g,n])}var b=function(e){if(g.readyState==0){if(w){clearInterval(w);w=null;if(n.global&&!--i.active){i.event.trigger("ajaxStop")}}}else{if(!m&&g&&(g.readyState==4||e=="timeout")){m=true;if(w){clearInterval(w);w=null}o=e=="timeout"?"timeout":!i.httpSuccess(g)?"error":n.ifModified&&i.httpNotModified(g,n.url)?"notmodified":"success";if(o=="success"){try{u=i.httpData(g,n.dataType,n)}catch(t){o="parsererror"}}if(o=="success"){var s;try{s=g.getResponseHeader("Last-Modified")}catch(t){}if(n.ifModified&&s){i.lastModified[n.url]=s}if(!r){E()}}else{i.handleError(n,g,o)}S();if(e){g.abort()}if(n.async){g=null}}}};if(n.async){var w=setInterval(b,13);if(n.timeout>0){setTimeout(function(){if(g&&!m){b("timeout")}},n.timeout)}}try{g.send(n.data)}catch(y){i.handleError(n,g,null,y)}if(!n.async){b()}return g},handleError:function(e,t,n,r){if(e.error){e.error(t,n,r)}if(e.global){i.event.trigger("ajaxError",[t,e,r])}},active:0,httpSuccess:function(e){try{return!e.status&&location.protocol=="file:"||e.status>=200&&e.status<300||e.status==304||e.status==1223}catch(t){}return false},httpNotModified:function(e,t){try{var n=e.getResponseHeader("Last-Modified");return e.status==304||n==i.lastModified[t]}catch(r){}return false},httpData:function(t,n,r){var s=t.getResponseHeader("content-type"),o=n=="xml"||!n&&s&&s.indexOf("xml")>=0,u=o?t.responseXML:t.responseText;if(o&&u.documentElement.tagName=="parsererror"){throw"parsererror"}if(r&&r.dataFilter){u=r.dataFilter(u,n)}if(typeof u==="string"){if(n=="script"){i.globalEval(u)}if(n=="json"){u=e["eval"]("("+u+")")}}return u},param:function(e){function n(e,n){t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)}var t=[];if(i.isArray(e)||e.jquery){i.each(e,function(){n(this.name,this.value)})}else{for(var r in e){if(i.isArray(e[r])){i.each(e[r],function(){n(r,this)})}else{n(r,i.isFunction(e[r])?e[r]():e[r])}}}return t.join("&").replace(/%20/g,"+")}});var C={},k,L=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];i.fn.extend({show:function(e,t){if(e){return this.animate(A("show",3),e,t)}else{for(var n=0,r=this.length;n<r;n++){var s=i.data(this[n],"olddisplay");this[n].style.display=s||"";if(i.css(this[n],"display")==="none"){var o=this[n].tagName,u;if(C[o]){u=C[o]}else{var a=i("<"+o+" />").appendTo("body");u=a.css("display");if(u==="none"){u="block"}a.remove();C[o]=u}i.data(this[n],"olddisplay",u)}}for(var n=0,r=this.length;n<r;n++){this[n].style.display=i.data(this[n],"olddisplay")||""}return this}},hide:function(e,t){if(e){return this.animate(A("hide",3),e,t)}else{for(var n=0,r=this.length;n<r;n++){var s=i.data(this[n],"olddisplay");if(!s&&s!=="none"){i.data(this[n],"olddisplay",i.css(this[n],"display"))}}for(var n=0,r=this.length;n<r;n++){this[n].style.display="none"}return this}},_toggle:i.fn.toggle,toggle:function(e,t){var n=typeof e==="boolean";return i.isFunction(e)&&i.isFunction(t)?this._toggle.apply(this,arguments):e==null||n?this.each(function(){var t=n?e:i(this).is(":hidden");i(this)[t?"show":"hide"]()}):this.animate(A("toggle",3),e,t)},fadeTo:function(e,t,n){return this.animate({opacity:t},e,n)},animate:function(e,t,n,r){var s=i.speed(t,n,r);return this[s.queue===false?"each":"queue"](function(){var t=i.extend({},s),n,r=this.nodeType==1&&i(this).is(":hidden"),o=this;for(n in e){if(e[n]=="hide"&&r||e[n]=="show"&&!r){return t.complete.call(this)}if((n=="height"||n=="width")&&this.style){t.display=i.css(this,"display");t.overflow=this.style.overflow}}if(t.overflow!=null){this.style.overflow="hidden"}t.curAnim=i.extend({},e);i.each(e,function(n,s){var u=new i.fx(o,t,n);if(/toggle|show|hide/.test(s)){u[s=="toggle"?r?"show":"hide":s](e)}else{var a=s.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),f=u.cur(true)||0;if(a){var l=parseFloat(a[2]),c=a[3]||"px";if(c!="px"){o.style[n]=(l||1)+c;f=(l||1)/u.cur(true)*f;o.style[n]=f+c}if(a[1]){l=(a[1]=="-="?-1:1)*l+f}u.custom(f,l,c)}else{u.custom(f,s,"")}}});return true})},stop:function(e,t){var n=i.timers;if(e){this.queue([])}this.each(function(){for(var e=n.length-1;e>=0;e--){if(n[e].elem==this){if(t){n[e](true)}n.splice(e,1)}}});if(!t){this.dequeue()}return this}});i.each({slideDown:A("show",1),slideUp:A("hide",1),slideToggle:A("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(e,t){i.fn[e]=function(e,n){return this.animate(t,e,n)}});i.extend({speed:function(e,t,n){var r=typeof e==="object"?e:{complete:n||!n&&t||i.isFunction(e)&&e,duration:e,easing:n&&t||t&&!i.isFunction(t)&&t};r.duration=i.fx.off?0:typeof r.duration==="number"?r.duration:i.fx.speeds[r.duration]||i.fx.speeds._default;r.old=r.complete;r.complete=function(){if(r.queue!==false){i(this).dequeue()}if(i.isFunction(r.old)){r.old.call(this)}};return r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t;this.elem=e;this.prop=n;if(!t.orig){t.orig={}}}});i.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(i.fx.step[this.prop]||i.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(e){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var t=parseFloat(i.css(this.elem,this.prop,e));return t&&t>-1e4?t:parseFloat(i.curCSS(this.elem,this.prop))||0},custom:function(e,n,r){function o(e){return s.step(e)}this.startTime=a();this.start=e;this.end=n;this.unit=r||this.unit||"px";this.now=this.start;this.pos=this.state=0;var s=this;o.elem=this.elem;if(o()&&i.timers.push(o)&&!k){k=setInterval(function(){var e=i.timers;for(var n=0;n<e.length;n++){if(!e[n]()){e.splice(n--,1)}}if(!e.length){clearInterval(k);k=t}},13)}},show:function(){this.options.orig[this.prop]=i.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(e){var t=a();if(e||t>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var n=true;for(var r in this.options.curAnim){if(this.options.curAnim[r]!==true){n=false}}if(n){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(i.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){i(this.elem).hide()}if(this.options.hide||this.options.show){for(var s in this.options.curAnim){i.attr(this.elem.style,s,this.options.orig[s])}}this.options.complete.call(this.elem)}return false}else{var o=t-this.startTime;this.state=o/this.options.duration;this.pos=i.easing[this.options.easing||(i.easing.swing?"swing":"linear")](this.state,o,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};i.extend(i.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){i.attr(e.elem.style,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit}else{e.elem[e.prop]=e.now}}}});if(document.documentElement.getBoundingClientRect){i.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return i.offset.bodyOffset(this[0])}var e=this[0].getBoundingClientRect(),t=this[0].ownerDocument,n=t.body,r=t.documentElement,s=r.clientTop||n.clientTop||0,o=r.clientLeft||n.clientLeft||0,u=e.top+(self.pageYOffset||i.boxModel&&r.scrollTop||n.scrollTop)-s,a=e.left+(self.pageXOffset||i.boxModel&&r.scrollLeft||n.scrollLeft)-o;return{top:u,left:a}}}else{i.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return i.offset.bodyOffset(this[0])}i.offset.initialized||i.offset.initialize();var e=this[0],t=e.offsetParent,n=e,r=e.ownerDocument,s,o=r.documentElement,u=r.body,a=r.defaultView,f=a.getComputedStyle(e,null),l=e.offsetTop,c=e.offsetLeft;while((e=e.parentNode)&&e!==u&&e!==o){s=a.getComputedStyle(e,null);l-=e.scrollTop,c-=e.scrollLeft;if(e===t){l+=e.offsetTop,c+=e.offsetLeft;if(i.offset.doesNotAddBorder&&!(i.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(e.tagName))){l+=parseInt(s.borderTopWidth,10)||0,c+=parseInt(s.borderLeftWidth,10)||0}n=t,t=e.offsetParent}if(i.offset.subtractsBorderForOverflowNotVisible&&s.overflow!=="visible"){l+=parseInt(s.borderTopWidth,10)||0,c+=parseInt(s.borderLeftWidth,10)||0}f=s}if(f.position==="relative"||f.position==="static"){l+=u.offsetTop,c+=u.offsetLeft}if(f.position==="fixed"){l+=Math.max(o.scrollTop,u.scrollTop),c+=Math.max(o.scrollLeft,u.scrollLeft)}return{top:l,left:c}}}i.offset={initialize:function(){if(this.initialized){return}var e=document.body,t=document.createElement("div"),n,r,i,s,o,u,a=e.style.marginTop,f='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';o={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(u in o){t.style[u]=o[u]}t.innerHTML=f;e.insertBefore(t,e.firstChild);n=t.firstChild,r=n.firstChild,s=n.nextSibling.firstChild.firstChild;this.doesNotAddBorder=r.offsetTop!==5;this.doesAddBorderForTableAndCells=s.offsetTop===5;n.style.overflow="hidden",n.style.position="relative";this.subtractsBorderForOverflowNotVisible=r.offsetTop===-5;e.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=e.offsetTop===0;e.style.marginTop=a;e.removeChild(t);this.initialized=true},bodyOffset:function(e){i.offset.initialized||i.offset.initialize();var t=e.offsetTop,n=e.offsetLeft;if(i.offset.doesNotIncludeMarginInBodyOffset){t+=parseInt(i.curCSS(e,"marginTop",true),10)||0,n+=parseInt(i.curCSS(e,"marginLeft",true),10)||0}return{top:t,left:n}}};i.fn.extend({position:function(){var e=0,t=0,n;if(this[0]){var r=this.offsetParent(),i=this.offset(),s=/^body|html$/i.test(r[0].tagName)?{top:0,left:0}:r.offset();i.top-=p(this,"marginTop");i.left-=p(this,"marginLeft");s.top+=p(r,"borderTopWidth");s.left+=p(r,"borderLeftWidth");n={top:i.top-s.top,left:i.left-s.left}}return n},offsetParent:function(){var e=this[0].offsetParent||document.body;while(e&&!/^body|html$/i.test(e.tagName)&&i.css(e,"position")=="static"){e=e.offsetParent}return i(e)}});i.each(["Left","Top"],function(n,r){var s="scroll"+r;i.fn[s]=function(r){if(!this[0]){return null}return r!==t?this.each(function(){this==e||this==document?e.scrollTo(!n?r:i(e).scrollLeft(),n?r:i(e).scrollTop()):this[s]=r}):this[0]==e||this[0]==document?self[n?"pageYOffset":"pageXOffset"]||i.boxModel&&document.documentElement[s]||document.body[s]:this[0][s]}});i.each(["Height","Width"],function(n,r){var s=n?"Left":"Top",o=n?"Right":"Bottom",u=r.toLowerCase();i.fn["inner"+r]=function(){return this[0]?i.css(this[0],u,false,"padding"):null};i.fn["outer"+r]=function(e){return this[0]?i.css(this[0],u,false,e?"margin":"border"):null};var a=r.toLowerCase();i.fn[a]=function(n){return this[0]==e?document.compatMode=="CSS1Compat"&&document.documentElement["client"+r]||document.body["client"+r]:this[0]==document?Math.max(document.documentElement["client"+r],document.body["scroll"+r],document.documentElement["scroll"+r],document.body["offset"+r],document.documentElement["offset"+r]):n===t?this.length?i.css(this[0],a):null:this.css(a,typeof n==="string"?n:n+"px")}})})();(function(e){e.fn.hoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,s,o,u;var a=function(e){i=e.pageX;s=e.pageY};var f=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(o-i)+Math.abs(u-s)<r.sensitivity){e(n).unbind("mousemove",a);n.hoverIntent_s=1;return r.over.apply(n,[t])}else{o=i;u=s;n.hoverIntent_t=setTimeout(function(){f(t,n)},r.interval)}};var l=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return r.out.apply(t,[e])};var c=function(t){var n=(t.type=="mouseover"?t.fromElement:t.toElement)||t.relatedTarget;while(n&&n!=this){try{n=n.parentNode}catch(t){n=this}}if(n==this){return false}var i=jQuery.extend({},t);var s=this;if(s.hoverIntent_t){s.hoverIntent_t=clearTimeout(s.hoverIntent_t)}if(t.type=="mouseover"){o=i.pageX;u=i.pageY;e(s).bind("mousemove",a);if(s.hoverIntent_s!=1){s.hoverIntent_t=setTimeout(function(){f(i,s)},r.interval)}}else{e(s).unbind("mousemove",a);if(s.hoverIntent_s==1){s.hoverIntent_t=setTimeout(function(){l(i,s)},r.timeout)}}};return this.mouseover(c).mouseout(c)}})(jQuery);(function(e){e.fn.bgIframe=e.fn.bgiframe=function(t){if(e.browser.msie&&/6.0/.test(navigator.userAgent)){t=e.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},t||{});var n=function(e){return e&&e.constructor==Number?e+"px":e},r='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+t.src+'"'+'style="display:block;position:absolute;z-index:-1;'+(t.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(t.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":n(t.top))+";"+"left:"+(t.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":n(t.left))+";"+"width:"+(t.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":n(t.width))+";"+"height:"+(t.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":n(t.height))+";"+'"/>';return this.each(function(){if(e("> iframe.bgiframe",this).length==0)this.insertBefore(document.createElement(r),this.firstChild)})}return this}})(jQuery);jQuery.bt={version:"0.9.5-rc1"};(function($){jQuery.fn.bt=function(content,options){function drawIt(e,t){this.moveTo(e[0].x,e[0].y);for(i=1;i<e.length;i++){if(e[i-1].type=="arcStart"){this.quadraticCurveTo(round5(e[i].x,t),round5(e[i].y,t),round5(e[(i+1)%e.length].x,t),round5(e[(i+1)%e.length].y,t));i++}else{this.lineTo(round5(e[i].x,t),round5(e[i].y,t))}}}function round5(e,t){var n;t=numb(t);if(t%2){n=e}else{n=Math.round(e-.5)+.5}return n}function numb(e){return parseInt(e)||0}function arrayRemove(e,t){var n,r=new Array;for(n in e){if(e[n]!=t){r.push(e[n])}}return r}function canvasSupport(){var e=false;try{e=!!document.createElement("canvas").getContext("2d")}catch(t){e=!!document.createElement("canvas").getContext}return e}function shadowSupport(){try{var e=navigator.userAgent.toLowerCase();if(/webkit/.test(e)){return true}else{if(/gecko|mozilla/.test(e)&&parseFloat(e.match(/firefox\/(\d+(?:\.\d+)+)/)[1])>=3.1){return true}}}catch(t){}return false}function betweenPoint(e,t,n){var r,i;if(e.x==t.x){r=e.y<t.y?e.y+n:e.y-n;return{x:e.x,y:r}}else{if(e.y==t.y){i=e.x<t.x?e.x+n:e.x-n;return{x:i,y:e.y}}}}function centerPoint(e,t,n){var r=t.x==e.x?n.x:e.x;var i=t.y==e.y?n.y:e.y;var s,o;if(e.x<n.x){if(e.y>n.y){s=Math.PI/180*180;o=Math.PI/180*90}else{s=Math.PI/180*90;o=0}}else{if(e.y>n.y){s=Math.PI/180*270;o=Math.PI/180*180}else{s=0;o=Math.PI/180*270}}return{x:r,y:i,type:"center",startAngle:s,endAngle:o}}function findIntersect(e,t,n,r,i,s,o,u){if(i==o){return findIntersectY(e,t,n,r,i)}if(s==u){return findIntersectX(e,t,n,r,s)}var a=(t-r)/(e-n);var f=t-a*e;var l=(s-u)/(i-o);var c=s-l*i;var h=(c-f)/(a-l);var p=a*h+f;return{x:h,y:p}}function findIntersectY(e,t,n,r,i){if(t==r){return{x:i,y:t}}var s=(t-r)/(e-n);var o=t-s*e;var u=s*i+o;return{x:i,y:u}}function findIntersectX(e,t,n,r,i){if(e==n){return{x:e,y:i}}var s=(t-r)/(e-n);var o=t-s*e;var u=(i-o)/s;return{x:u,y:i}}if(typeof content!="string"){var contentSelect=true;options=content;content=false}else{var contentSelect=false}if(jQuery.fn.hoverIntent&&jQuery.bt.defaults.trigger=="hover"){jQuery.bt.defaults.trigger="hoverIntent"}return this.each(function(index){var opts=jQuery.extend(false,jQuery.bt.defaults,jQuery.bt.options,options);opts.spikeLength=numb(opts.spikeLength);opts.spikeGirth=numb(opts.spikeGirth);opts.overlap=numb(opts.overlap);var ajaxTimeout=false;if(opts.killTitle){$(this).find("[title]").andSelf().each(function(){if(!$(this).attr("bt-xTitle")){$(this).attr("bt-xTitle",$(this).attr("title")).attr("title","")}})}if(typeof opts.trigger=="string"){opts.trigger=[opts.trigger]}if(opts.trigger[0]=="hoverIntent"){var hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn()},out:function(){this.btOff()}});$(this).hoverIntent(hoverOpts)}else{if(opts.trigger[0]=="hover"){$(this).hover(function(){this.btOn()},function(){this.btOff()})}else{if(opts.trigger[0]=="now"){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}}else{if(opts.trigger[0]=="none"){}else{if(opts.trigger.length>1&&opts.trigger[0]!=opts.trigger[1]){$(this).bind(opts.trigger[0],function(){this.btOn()}).bind(opts.trigger[1],function(){this.btOff()})}else{$(this).bind(opts.trigger[0],function(){if($(this).hasClass("bt-active")){this.btOff()}else{this.btOn()}})}}}}}this.btOn=function(){if(typeof $(this).data("bt-box")=="object"){this.btOff()}opts.preBuild.apply(this);$(jQuery.bt.vars.closeWhenOpenStack).btOff();$(this).addClass("bt-active "+opts.activeClass);if(contentSelect&&opts.ajaxPath==null){if(opts.killTitle){$(this).attr("title",$(this).attr("bt-xTitle"))}content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector);if(opts.killTitle){$(this).attr("title","")}}if(opts.ajaxPath!=null&&content==false){if(typeof opts.ajaxPath=="object"){var url=eval(opts.ajaxPath[0]);url+=opts.ajaxPath[1]?" "+opts.ajaxPath[1]:""}else{var url=opts.ajaxPath}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var cacheData=opts.ajaxCache?$(document.body).data("btCache-"+url.replace(/\./g,"")):null;if(typeof cacheData=="string"){content=selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData}else{var target=this;var ajaxOpts=jQuery.extend(false,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(e,t){if(t=="success"||t=="notmodified"){if(opts.ajaxCache){$(document.body).data("btCache-"+url.replace(/\./g,""),e.responseText)}ajaxTimeout=false;content=selector?$("<div/>").append(e.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):e.responseText}else{if(t=="timeout"){ajaxTimeout=true}content=opts.ajaxError.replace(/%error/g,e.statusText)}if($(target).hasClass("bt-active")){target.btOn()}}},opts.ajaxOpts);jQuery.ajax(ajaxOpts);content=opts.ajaxLoading}}var shadowMarginX=0;var shadowMarginY=0;var shadowShiftX=0;var shadowShiftY=0;if(opts.shadow&&!shadowSupport()){opts.shadow=false;jQuery.extend(opts,opts.noShadowOpts)}if(opts.shadow){if(opts.shadowBlur>Math.abs(opts.shadowOffsetX)){shadowMarginX=opts.shadowBlur*2}else{shadowMarginX=opts.shadowBlur+Math.abs(opts.shadowOffsetX)}shadowShiftX=opts.shadowBlur-opts.shadowOffsetX>0?opts.shadowBlur-opts.shadowOffsetX:0;if(opts.shadowBlur>Math.abs(opts.shadowOffsetY)){shadowMarginY=opts.shadowBlur*2}else{shadowMarginY=opts.shadowBlur+Math.abs(opts.shadowOffsetY)}shadowShiftY=opts.shadowBlur-opts.shadowOffsetY>0?opts.shadowBlur-opts.shadowOffsetY:0}if(opts.offsetParent){var offsetParent=$(opts.offsetParent);var offsetParentPos=offsetParent.offset();var pos=$(this).offset();var top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css("margin-top"))-shadowShiftY;var left=numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css("margin-left"))-shadowShiftX}else{var offsetParent=$(this).css("position")=="absolute"?$(this).parents().eq(0).offsetParent():$(this).offsetParent();var pos=$(this).btPosition();var top=numb(pos.top)+numb($(this).css("margin-top"))-shadowShiftY;var left=numb(pos.left)+numb($(this).css("margin-left"))-shadowShiftX}var width=$(this).btOuterWidth();var height=$(this).outerHeight();if(typeof content=="object"){var original=content;var clone=$(original).clone(true).show();var origClones=$(original).data("bt-clones")||[];origClones.push(clone);$(original).data("bt-clones",origClones);$(clone).data("bt-orig",original);$(this).data("bt-content-orig",{original:original,clone:clone});content=clone}if(typeof content=="null"||content==""){return}var $text=$('<div class="bt-content"></div>').append(content).css({padding:opts.padding,position:"absolute",width:opts.shrinkToFit?"auto":opts.width,zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles);var $box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:"absolute",width:opts.width,zIndex:opts.wrapperzIndex,visibility:"hidden"}).appendTo(offsetParent);if(jQuery.fn.bgiframe){$text.bgiframe();$box.bgiframe()}$(this).data("bt-box",$box);var scrollTop=numb($(document).scrollTop());var scrollLeft=numb($(document).scrollLeft());var docWidth=numb($(window).width());var docHeight=numb($(window).height());var winRight=scrollLeft+docWidth;var winBottom=scrollTop+docHeight;var space=new Object;var thisOffset=$(this).offset();space.top=thisOffset.top-scrollTop;space.bottom=docHeight-(thisOffset+height-scrollTop);space.left=thisOffset.left-scrollLeft;space.right=docWidth-(thisOffset.left+width-scrollLeft);var textOutHeight=numb($text.outerHeight());var textOutWidth=numb($text.btOuterWidth());if(opts.positions.constructor==String){opts.positions=opts.positions.replace(/ /,"").split(",")}if(opts.positions[0]=="most"){var position="top";for(var pig in space){position=space[pig]>space[position]?pig:position}}else{for(var x in opts.positions){var position=opts.positions[x];if((position=="left"||position=="right")&&space[position]>textOutWidth+opts.spikeLength){break}else{if((position=="top"||position=="bottom")&&space[position]>textOutHeight+opts.spikeLength){break}}}}var horiz=left+(width-textOutWidth)*.5;var vert=top+(height-textOutHeight)*.5;var points=new Array;var textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint;switch(position){case"top":$text.css("margin-bottom",opts.spikeLength+"px");$box.css({top:top-$text.outerHeight(true)+opts.overlap,left:horiz});textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.btOuterWidth(true));var xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",numb($box.css("left"))+textRightSpace+"px");xShift-=textRightSpace}textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",numb($box.css("left"))-textLeftSpace+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY};points[points.length]=spikePoint={y:textBottom+opts.spikeLength,x:(textRight-textLeft)*.5+xShift,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.CornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textBottom,type:"join"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textBottom,type:"join"};points[points.length]=spikePoint;break;case"left":$text.css("margin-right",opts.spikeLength+"px");$box.css({top:vert+"px",left:left-$text.btOuterWidth(true)+opts.overlap+"px"});textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(true));var yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",numb($box.css("top"))+textBottomSpace+"px");yShift-=textBottomSpace}textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",numb($box.css("top"))-textTopSpace+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY};points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:(textBottom-textTop)*.5+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y;points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break;case"bottom":$text.css("margin-top",opts.spikeLength+"px");$box.css({top:top+height-opts.overlap,left:horiz});textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.btOuterWidth(true));var xShift=shadowShiftX;if(textRightSpace<0){$box.css("left",numb($box.css("left"))+textRightSpace+"px");xShift-=textRightSpace}textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin);if(textLeftSpace<0){$box.css("left",numb($box.css("left"))-textLeftSpace+"px");xShift+=textLeftSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY};points[points.length]=spikePoint={x:(textRight-textLeft)*.5+xShift,y:shadowShiftY,type:"spike"};crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop);crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x;crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.cornerRadius:crossPoint.x;points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:"join"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textTop,type:"join"};points[points.length]=spikePoint;break;case"right":$text.css("margin-left",opts.spikeLength+"px");$box.css({top:vert+"px",left:left+width-opts.overlap+"px"});textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(true));var yShift=shadowShiftY;if(textBottomSpace<0){$box.css("top",numb($box.css("top"))+textBottomSpace+"px");yShift-=textBottomSpace}textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin);if(textTopSpace<0){$box.css("top",numb($box.css("top"))-textTopSpace+"px");yShift+=textTopSpace}textTop=$text.btPosition().top+numb($text.css("margin-top"));textLeft=$text.btPosition().left+numb($text.css("margin-left"));textRight=textLeft+$text.btOuterWidth();textBottom=textTop+$text.outerHeight();textCenter={x:textLeft+$text.btOuterWidth()*opts.centerPointX,y:textTop+$text.outerHeight()*opts.centerPointY};points[points.length]=spikePoint={x:shadowShiftX,y:(textBottom-textTop)*.5+yShift,type:"spike"};crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft);crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y;crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y;points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:"join"};points[points.length]={x:textLeft,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textTop,type:"corner"};points[points.length]={x:textRight,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:textBottom,type:"corner"};points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:"join"};points[points.length]=spikePoint;break}var canvas=document.createElement("canvas");$(canvas).attr("width",numb($text.btOuterWidth(true))+opts.strokeWidth*2+shadowMarginX).attr("height",numb($text.outerHeight(true))+opts.strokeWidth*2+shadowMarginY).appendTo($box).css({position:"absolute",zIndex:opts.boxzIndex});if(typeof G_vmlCanvasManager!="undefined"){canvas=G_vmlCanvasManager.initElement(canvas)}if(opts.cornerRadius>0){var newPoints=new Array;var newPoint;for(var i=0;i<points.length;i++){if(points[i].type=="corner"){newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius);newPoint.type="arcStart";newPoints[newPoints.length]=newPoint;newPoints[newPoints.length]=points[i];newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius);newPoint.type="arcEnd";newPoints[newPoints.length]=newPoint}else{newPoints[newPoints.length]=points[i]}}points=newPoints}var ctx=canvas.getContext("2d");if(opts.shadow&&opts.shadowOverlap!==true){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case"top":if(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap>0){$box.css("top",numb($box.css("top"))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap))}break;case"right":if(shadowShiftX-shadowOverlap>0){$box.css("left",numb($box.css("left"))+shadowShiftX-shadowOverlap)}break;case"bottom":if(shadowShiftY-shadowOverlap>0){$box.css("top",numb($box.css("top"))+shadowShiftY-shadowOverlap)}break;case"left":if(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap>0){$box.css("left",numb($box.css("left"))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap))}break}}drawIt.apply(ctx,[points],opts.strokeWidth);ctx.fillStyle=opts.fill;if(opts.shadow){ctx.shadowOffsetX=opts.shadowOffsetX;ctx.shadowOffsetY=opts.shadowOffsetY;ctx.shadowBlur=opts.shadowBlur;ctx.shadowColor=opts.shadowColor}ctx.closePath();ctx.fill();if(opts.strokeWidth>0){ctx.shadowColor="rgba(0, 0, 0, 0)";ctx.lineWidth=opts.strokeWidth;ctx.strokeStyle=opts.strokeStyle;ctx.beginPath();drawIt.apply(ctx,[points],opts.strokeWidth);ctx.closePath();ctx.stroke()}opts.preShow.apply(this,[$box[0]]);$box.css({display:"none",visibility:"visible"});opts.showTip.apply(this,[$box[0]]);if(opts.overlay){var overlay=$('<div class="bt-overlay"></div>').css({position:"absolute",backgroundColor:"blue",top:top,left:left,width:width,height:height,opacity:".2"}).appendTo(offsetParent);$(this).data("overlay",overlay)}if(opts.ajaxPath!=null&&opts.ajaxCache==false||ajaxTimeout){content=false}if(opts.clickAnywhereToClose){jQuery.bt.vars.clickAnywhereStack.push(this);$(document).click(jQuery.bt.docClick)}if(opts.closeWhenOthersOpen){jQuery.bt.vars.closeWhenOpenStack.push(this)}opts.postShow.apply(this,[$box[0]])};this.btOff=function(){var e=$(this).data("bt-box");opts.preHide.apply(this,[e]);var t=this;t.btCleanup=function(){var e=$(t).data("bt-box");var n=$(t).data("bt-content-orig");var r=$(t).data("bt-overlay");if(typeof e=="object"){$(e).remove();$(t).removeData("bt-box")}if(typeof n=="object"){var s=$(n.original).data("bt-clones");$(n).data("bt-clones",arrayRemove(s,n.clone))}if(typeof r=="object"){$(r).remove();$(t).removeData("bt-overlay")}jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,t);jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,t);$(t).removeClass("bt-active "+opts.activeClass);opts.postHide.apply(t)};opts.hideTip.apply(this,[e,t.btCleanup])};var refresh=this.btRefresh=function(){this.btOff();this.btOn()}})};jQuery.fn.btPosition=function(){function e(e,t){return e[0]&&parseInt(jQuery.curCSS(e[0],t,true),10)||0}var t=0,n=0,r;if(this[0]){var i=this.offsetParent(),s=this.offset(),o=/^body|html$/i.test(i[0].tagName)?{top:0,left:0}:i.offset();s.top-=e(this,"marginTop");s.left-=e(this,"marginLeft");o.top+=e(i,"borderTopWidth");o.left+=e(i,"borderLeftWidth");r={top:s.top-o.top,left:s.left-o.left}}return r};jQuery.fn.btOuterWidth=function(e){function t(e,t){return e[0]&&parseInt(jQuery.curCSS(e[0],t,true),10)||0}return this["innerWidth"]()+t(this,"borderLeftWidth")+t(this,"borderRightWidth")+(e?t(this,"marginLeft")+t(this,"marginRight"):0)};jQuery.fn.btOn=function(){return this.each(function(e){if(jQuery.isFunction(this.btOn)){this.btOn()}})};jQuery.fn.btOff=function(){return this.each(function(e){if(jQuery.isFunction(this.btOff)){this.btOff()}})};jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]};jQuery.bt.docClick=function(e){if(!e){var e=window.event}if(!$(e.target).parents().andSelf().filter(".bt-wrapper, .bt-active").length&&jQuery.bt.vars.clickAnywhereStack.length){$(jQuery.bt.vars.clickAnywhereStack).btOff();$(document).unbind("click",jQuery.bt.docClick)}};jQuery.bt.defaults={trigger:"hover",clickAnywhereToClose:true,closeWhenOthersOpen:false,shrinkToFit:false,width:"200px",padding:"10px",spikeGirth:10,spikeLength:15,overlap:0,overlay:false,killTitle:true,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:["most"],fill:"rgb(255, 255, 102)",windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:.5,centerPointY:.5,shadow:false,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:false,noShadowOpts:{strokeStyle:"#999"},cssClass:"",cssStyles:{},activeClass:"bt-active",contentSelector:"$(this).attr('title')",ajaxPath:null,ajaxError:"<strong>ERROR:</strong> <em>%error</em>",ajaxLoading:"<blink>Loading...</blink>",ajaxData:{},ajaxType:"GET",ajaxCache:true,ajaxOpts:{},preBuild:function(){},preShow:function(e){},showTip:function(e){$(e).show()},postShow:function(e){},preHide:function(e){},hideTip:function(e,t){$(e).hide();t()},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500}};jQuery.bt.options={}})(jQuery);var THREE={REVISION:"69"};if(typeof module==="object"){module.exports=THREE}if(Math.sign===undefined){Math.sign=function(e){return e<0?-1:e>0?1:0}}THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.MinEquation=103;THREE.MaxEquation=104;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1e3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.RGB_PVRTC_4BPPV1_Format=2100;THREE.RGB_PVRTC_2BPPV1_Format=2101;THREE.RGBA_PVRTC_4BPPV1_Format=2102;THREE.RGBA_PVRTC_2BPPV1_Format=2103;THREE.Color=function(e){if(arguments.length===3){return this.setRGB(arguments[0],arguments[1],arguments[2])}return this.set(e)};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){if(e instanceof THREE.Color){this.copy(e)}else if(typeof e==="number"){this.setHex(e)}else if(typeof e==="string"){this.setStyle(e)}return this},setHex:function(e){e=Math.floor(e);this.r=(e>>16&255)/255;this.g=(e>>8&255)/255;this.b=(e&255)/255;return this},setRGB:function(e,t,n){this.r=e;this.g=t;this.b=n;return this},setHSL:function(e,t,n){if(t===0){this.r=this.g=this.b=n}else{var r=function(e,t,n){if(n<0)n+=1;if(n>1)n-=1;if(n<1/6)return e+(t-e)*6*n;if(n<1/2)return t;if(n<2/3)return e+(t-e)*6*(2/3-n);return e};var i=n<=.5?n*(1+t):n+t-n*t;var s=2*n-i;this.r=r(s,i,e+1/3);this.g=r(s,i,e);this.b=r(s,i,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);this.r=Math.min(255,parseInt(t[1],10))/255;this.g=Math.min(255,parseInt(t[2],10))/255;this.b=Math.min(255,parseInt(t[3],10))/255;return this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);this.r=Math.min(100,parseInt(t[1],10))/100;this.g=Math.min(100,parseInt(t[2],10))/100;this.b=Math.min(100,parseInt(t[3],10))/100;return this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);this.setHex(parseInt(t[1],16));return this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16));return this}if(/^(\w+)$/i.test(e)){this.setHex(THREE.ColorKeywords[e]);return this}},copy:function(e){this.r=e.r;this.g=e.g;this.b=e.b;return this},copyGammaToLinear:function(e){this.r=e.r*e.r;this.g=e.g*e.g;this.b=e.b*e.b;return this},copyLinearToGamma:function(e){this.r=Math.sqrt(e.r);this.g=Math.sqrt(e.g);this.b=Math.sqrt(e.b);return this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;this.r=e*e;this.g=t*t;this.b=n*n;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0};var n=this.r,r=this.g,i=this.b;var s=Math.max(n,r,i);var o=Math.min(n,r,i);var u,a;var f=(o+s)/2;if(o===s){u=0;a=0}else{var l=s-o;a=f<=.5?l/(s+o):l/(2-s-o);switch(s){case n:u=(r-i)/l+(r<i?6:0);break;case r:u=(i-n)/l+2;break;case i:u=(n-r)/l+4;break}u/=6}t.h=u;t.s=a;t.l=f;return t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();r.h+=e;r.s+=t;r.l+=n;this.setHSL(r.h,r.s,r.l);return this},add:function(e){this.r+=e.r;this.g+=e.g;this.b+=e.b;return this},addColors:function(e,t){this.r=e.r+t.r;this.g=e.g+t.g;this.b=e.b+t.b;return this},addScalar:function(e){this.r+=e;this.g+=e;this.b+=e;return this},multiply:function(e){this.r*=e.r;this.g*=e.g;this.b*=e.b;return this},multiplyScalar:function(e){this.r*=e;this.g*=e;this.b*=e;return this},lerp:function(e,t){this.r+=(e.r-this.r)*t;this.g+=(e.g-this.g)*t;this.b+=(e.b-this.b)*t;return this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){this.r=e[0];this.g=e[1];this.b=e[2];return this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(e,t,n,r){this._x=e||0;this._y=t||0;this._z=n||0;this._w=r!==undefined?r:1};THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e;this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e;this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e;this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e;this.onChangeCallback()},set:function(e,t,n,r){this._x=e;this._y=t;this._z=n;this._w=r;this.onChangeCallback();return this},copy:function(e){this._x=e.x;this._y=e.y;this._z=e.z;this._w=e.w;this.onChangeCallback();return this},setFromEuler:function(e,t){if(e instanceof THREE.Euler===false){throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var n=Math.cos(e._x/2);var r=Math.cos(e._y/2);var i=Math.cos(e._z/2);var s=Math.sin(e._x/2);var o=Math.sin(e._y/2);var u=Math.sin(e._z/2);if(e.order==="XYZ"){this._x=s*r*i+n*o*u;this._y=n*o*i-s*r*u;this._z=n*r*u+s*o*i;this._w=n*r*i-s*o*u}else if(e.order==="YXZ"){this._x=s*r*i+n*o*u;this._y=n*o*i-s*r*u;this._z=n*r*u-s*o*i;this._w=n*r*i+s*o*u}else if(e.order==="ZXY"){this._x=s*r*i-n*o*u;this._y=n*o*i+s*r*u;this._z=n*r*u+s*o*i;this._w=n*r*i-s*o*u}else if(e.order==="ZYX"){this._x=s*r*i-n*o*u;this._y=n*o*i+s*r*u;this._z=n*r*u-s*o*i;this._w=n*r*i+s*o*u}else if(e.order==="YZX"){this._x=s*r*i+n*o*u;this._y=n*o*i+s*r*u;this._z=n*r*u-s*o*i;this._w=n*r*i-s*o*u}else if(e.order==="XZY"){this._x=s*r*i-n*o*u;this._y=n*o*i-s*r*u;this._z=n*r*u+s*o*i;this._w=n*r*i+s*o*u}if(t!==false)this.onChangeCallback();return this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);this._x=e.x*r;this._y=e.y*r;this._z=e.z*r;this._w=Math.cos(n);this.onChangeCallback();return this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],u=t[9],a=t[2],f=t[6],l=t[10],c=n+o+l,h;if(c>0){h=.5/Math.sqrt(c+1);this._w=.25/h;this._x=(f-u)*h;this._y=(i-a)*h;this._z=(s-r)*h}else if(n>o&&n>l){h=2*Math.sqrt(1+n-o-l);this._w=(f-u)/h;this._x=.25*h;this._y=(r+s)/h;this._z=(i+a)/h}else if(o>l){h=2*Math.sqrt(1+o-n-l);this._w=(i-a)/h;this._x=(r+s)/h;this._y=.25*h;this._z=(u+f)/h}else{h=2*Math.sqrt(1+l-n-o);this._w=(s-r)/h;this._x=(i+a)/h;this._y=(u+f)/h;this._z=.25*h}this.onChangeCallback();return this},setFromUnitVectors:function(){var e,t;var n=1e-6;return function(i,s){if(e===undefined)e=new THREE.Vector3;t=i.dot(s)+1;if(t<n){t=0;if(Math.abs(i.x)>Math.abs(i.z)){e.set(-i.y,i.x,0)}else{e.set(0,-i.z,i.y)}}else{e.crossVectors(i,s)}this._x=e.x;this._y=e.y;this._z=e.z;this._w=t;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();if(e===0){this._x=0;this._y=0;this._z=0;this._w=1}else{e=1/e;this._x=this._x*e;this._y=this._y*e;this._z=this._z*e;this._w=this._w*e}this.onChangeCallback();return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(e,t)}return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,s=e._w;var o=t._x,u=t._y,a=t._z,f=t._w;this._x=n*f+s*o+r*a-i*u;this._y=r*f+s*u+i*o-n*a;this._z=i*f+s*a+n*u-r*o;this._w=s*f-n*o-r*u-i*a;this.onChangeCallback();return this},multiplyVector3:function(e){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return e.applyQuaternion(this)},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,i=this._z,s=this._w;var o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0){this._w=-e._w;this._x=-e._x;this._y=-e._y;this._z=-e._z;o=-o}else{this.copy(e)}if(o>=1){this._w=s;this._x=n;this._y=r;this._z=i;return this}var u=Math.acos(o);var a=Math.sqrt(1-o*o);if(Math.abs(a)<.001){this._w=.5*(s+this._w);this._x=.5*(n+this._x);this._y=.5*(r+this._y);this._z=.5*(i+this._z);return this}var f=Math.sin((1-t)*u)/a,l=Math.sin(t*u)/a;this._w=s*f+this._w*l;this._x=n*f+this._x*l;this._y=r*f+this._y*l;this._z=i*f+this._z*l;this.onChangeCallback();return this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){if(t===undefined)t=0;this._x=e[t];this._y=e[t+1];this._z=e[t+2];this._w=e[t+3];this.onChangeCallback();return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this._x;e[t+1]=this._y;e[t+2]=this._z;e[t+3]=this._w;return e},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}};THREE.Quaternion.slerp=function(e,t,n,r){return n.copy(e).slerp(t,r)};THREE.Vector2=function(e,t){this.x=e||0;this.y=t||0};THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){this.x=e;this.y=t;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;return this},addScalar:function(e){this.x+=e;this.y+=e;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this},multiply:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divide:function(e){this.x/=e.x;this.y/=e.y;return this},divideScalar:function(e){if(e!==0){var t=1/e;this.x*=t;this.y*=t}else{this.x=0;this.y=0}return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}return this},clamp:function(e,t){if(this.x<e.x){this.x=e.x}else if(this.x>t.x){this.x=t.x}if(this.y<e.y){this.y=e.y}else if(this.y>t.y){this.y=t.y}return this},clampScalar:function(){var e,t;return function(n,r){if(e===undefined){e=new THREE.Vector2;t=new THREE.Vector2}e.set(n,n);t.set(r,r);return this.clamp(e,t)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){var t=this.length();if(t!==0&&e!==t){this.multiplyScalar(e/t)}return this},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;return this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;return e},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(e,t,n){this.x=e||0;this.y=t||0;this.z=n||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){this.x=e;this.y=t;this.z=n;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;return this},multiply:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(e,t)}this.x*=e.x;this.y*=e.y;this.z*=e.z;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;return this},multiplyVectors:function(e,t){this.x=e.x*t.x;this.y=e.y*t.y;this.z=e.z*t.z;return this},applyEuler:function(){var e;return function(t){if(t instanceof THREE.Euler===false){console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.")}if(e===undefined)e=new THREE.Quaternion;this.applyQuaternion(e.setFromEuler(t));return this}}(),applyAxisAngle:function(){var e;return function(t,n){if(e===undefined)e=new THREE.Quaternion;this.applyQuaternion(e.setFromAxisAngle(t,n));return this}}(),applyMatrix3:function(e){var t=this.x;var n=this.y;var r=this.z;var i=e.elements;this.x=i[0]*t+i[3]*n+i[6]*r;this.y=i[1]*t+i[4]*n+i[7]*r;this.z=i[2]*t+i[5]*n+i[8]*r;return this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z;var i=e.elements;this.x=i[0]*t+i[4]*n+i[8]*r+i[12];this.y=i[1]*t+i[5]*n+i[9]*r+i[13];this.z=i[2]*t+i[6]*n+i[10]*r+i[14];return this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z;var i=e.elements;var s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s;this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s;this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s;return this},applyQuaternion:function(e){var t=this.x;var n=this.y;var r=this.z;var i=e.x;var s=e.y;var o=e.z;var u=e.w;var a=u*t+s*r-o*n;var f=u*n+o*t-i*r;var l=u*r+i*n-s*t;var c=-i*t-s*n-o*r;this.x=a*u+c*-i+f*-o-l*-s;this.y=f*u+c*-s+l*-i-a*-o;this.z=l*u+c*-o+a*-s-f*-i;return this},project:function(){var e;return function(t){if(e===undefined)e=new THREE.Matrix4;e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld));return this.applyProjection(e)}}(),unproject:function(){var e;return function(t){if(e===undefined)e=new THREE.Matrix4;e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix));return this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z;var i=e.elements;this.x=i[0]*t+i[4]*n+i[8]*r;this.y=i[1]*t+i[5]*n+i[9]*r;this.z=i[2]*t+i[6]*n+i[10]*r;this.normalize();return this},divide:function(e){this.x/=e.x;this.y/=e.y;this.z/=e.z;return this},divideScalar:function(e){if(e!==0){var t=1/e;this.x*=t;this.y*=t;this.z*=t}else{this.x=0;this.y=0;this.z=0}return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}if(this.z>e.z){this.z=e.z}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}if(this.z<e.z){this.z=e.z}return this},clamp:function(e,t){if(this.x<e.x){this.x=e.x}else if(this.x>t.x){this.x=t.x}if(this.y<e.y){this.y=e.y}else if(this.y>t.y){this.y=t.y}if(this.z<e.z){this.z=e.z}else if(this.z>t.z){this.z=t.z}return this},clampScalar:function(){var e,t;return function(n,r){if(e===undefined){e=new THREE.Vector3;t=new THREE.Vector3}e.set(n,n,n);t.set(r,r,r);return this.clamp(e,t)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();if(t!==0&&e!==t){this.multiplyScalar(e/t)}return this},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;return this},cross:function(e,t){if(t!==undefined){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(e,t)}var n=this.x,r=this.y,i=this.z;this.x=r*e.z-i*e.y;this.y=i*e.x-n*e.z;this.z=n*e.y-r*e.x;return this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z;var s=t.x,o=t.y,u=t.z;this.x=r*u-i*o;this.y=i*s-n*u;this.z=n*o-r*s;return this},projectOnVector:function(){var e,t;return function(n){if(e===undefined)e=new THREE.Vector3;e.copy(n).normalize();t=this.dot(e);return this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){if(e===undefined)e=new THREE.Vector3;e.copy(this).projectOnVector(t);return this.sub(e)}}(),reflect:function(){var e;return function(t){if(e===undefined)e=new THREE.Vector3;return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;var n=this.y-e.y;var r=this.z-e.z;return t*t+n*n+r*r},setEulerFromRotationMatrix:function(e,t){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(e,t){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){this.x=e.elements[12];this.y=e.elements[13];this.z=e.elements[14];return this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length();var n=this.set(e.elements[4],e.elements[5],e.elements[6]).length();var r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();this.x=t;this.y=n;this.z=r;return this},setFromMatrixColumn:function(e,t){var n=e*4;var r=t.elements;this.x=r[n];this.y=r[n+1];this.z=r[n+2];return this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;return e},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.Vector4=function(e,t,n,r){this.x=e||0;this.y=t||0;this.z=n||0;this.w=r!==undefined?r:1};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){this.x=e;this.y=t;this.z=n;this.w=r;return this},setX:function(e){this.x=e;return this},setY:function(e){this.y=e;return this},setZ:function(e){this.z=e;return this},setW:function(e){this.w=e;return this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w!==undefined?e.w:1;return this},add:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(e,t)}this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},addScalar:function(e){this.x+=e;this.y+=e;this.z+=e;this.w+=e;return this},addVectors:function(e,t){this.x=e.x+t.x;this.y=e.y+t.y;this.z=e.z+t.z;this.w=e.w+t.w;return this},sub:function(e,t){if(t!==undefined){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(e,t)}this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;this.z=e.z-t.z;this.w=e.w-t.w;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},applyMatrix4:function(e){var t=this.x;var n=this.y;var r=this.z;var i=this.w;var s=e.elements;this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i;this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i;this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i;this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i;return this},divideScalar:function(e){if(e!==0){var t=1/e;this.x*=t;this.y*=t;this.z*=t;this.w*=t}else{this.x=0;this.y=0;this.z=0;this.w=1}return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);if(t<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=e.x/t;this.y=e.y/t;this.z=e.z/t}return this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,s=.01,o=.1,u=e.elements,a=u[0],f=u[4],l=u[8],c=u[1],h=u[5],p=u[9],d=u[2],v=u[6],m=u[10];if(Math.abs(f-c)<s&&Math.abs(l-d)<s&&Math.abs(p-v)<s){if(Math.abs(f+c)<o&&Math.abs(l+d)<o&&Math.abs(p+v)<o&&Math.abs(a+h+m-3)<o){this.set(1,0,0,0);return this}t=Math.PI;var g=(a+1)/2;var y=(h+1)/2;var b=(m+1)/2;var w=(f+c)/4;var E=(l+d)/4;var S=(p+v)/4;if(g>y&&g>b){if(g<s){n=0;r=.707106781;i=.707106781}else{n=Math.sqrt(g);r=w/n;i=E/n}}else if(y>b){if(y<s){n=.707106781;r=0;i=.707106781}else{r=Math.sqrt(y);n=w/r;i=S/r}}else{if(b<s){n=.707106781;r=.707106781;i=0}else{i=Math.sqrt(b);n=E/i;r=S/i}}this.set(n,r,i,t);return this}var x=Math.sqrt((v-p)*(v-p)+(l-d)*(l-d)+(c-f)*(c-f));if(Math.abs(x)<.001)x=1;this.x=(v-p)/x;this.y=(l-d)/x;this.z=(c-f)/x;this.w=Math.acos((a+h+m-1)/2);return this},min:function(e){if(this.x>e.x){this.x=e.x}if(this.y>e.y){this.y=e.y}if(this.z>e.z){this.z=e.z}if(this.w>e.w){this.w=e.w}return this},max:function(e){if(this.x<e.x){this.x=e.x}if(this.y<e.y){this.y=e.y}if(this.z<e.z){this.z=e.z}if(this.w<e.w){this.w=e.w}return this},clamp:function(e,t){if(this.x<e.x){this.x=e.x}else if(this.x>t.x){this.x=t.x}if(this.y<e.y){this.y=e.y}else if(this.y>t.y){this.y=t.y}if(this.z<e.z){this.z=e.z}else if(this.z>t.z){this.z=t.z}if(this.w<e.w){this.w=e.w}else if(this.w>t.w){this.w=t.w}return this},clampScalar:function(){var e,t;return function(n,r){if(e===undefined){e=new THREE.Vector4;t=new THREE.Vector4}e.set(n,n,n,n);t.set(r,r,r,r);return this.clamp(e,t)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();if(t!==0&&e!==t){this.multiplyScalar(e/t)}return this},lerp:function(e,t){this.x+=(e.x-this.x)*t;this.y+=(e.y-this.y)*t;this.z+=(e.z-this.z)*t;this.w+=(e.w-this.w)*t;return this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){if(t===undefined)t=0;this.x=e[t];this.y=e[t+1];this.z=e[t+2];this.w=e[t+3];return this},toArray:function(e,t){if(e===undefined)e=[];if(t===undefined)t=0;e[t]=this.x;e[t+1]=this.y;e[t+2]=this.z;e[t+3]=this.w;return e},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Euler=function(e,t,n,r){this._x=e||0;this._y=t||0;this._z=n||0;this._order=r||THREE.Euler.DefaultOrder};THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];THREE.Euler.DefaultOrder="XYZ";THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e;this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e;this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e;this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e;this.onChangeCallback()},set:function(e,t,n,r){this._x=e;this._y=t;this._z=n;this._order=r||this._order;this.onChangeCallback();return this},copy:function(e){this._x=e._x;this._y=e._y;this._z=e._z;this._order=e._order;this.onChangeCallback();return this},setFromRotationMatrix:function(e,t){var n=THREE.Math.clamp;var r=e.elements;var i=r[0],s=r[4],o=r[8];var u=r[1],a=r[5],f=r[9];var l=r[2],c=r[6],h=r[10];t=t||this._order;if(t==="XYZ"){this._y=Math.asin(n(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(-f,h);this._z=Math.atan2(-s,i)}else{this._x=Math.atan2(c,a);this._z=0}}else if(t==="YXZ"){this._x=Math.asin(-n(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(o,h);this._z=Math.atan2(u,a)}else{this._y=Math.atan2(-l,i);this._z=0}}else if(t==="ZXY"){this._x=Math.asin(n(c,-1,1));if(Math.abs(c)<.99999){this._y=Math.atan2(-l,h);this._z=Math.atan2(-s,a)}else{this._y=0;this._z=Math.atan2(u,i)}}else if(t==="ZYX"){this._y=Math.asin(-n(l,-1,1));if(Math.abs(l)<.99999){this._x=Math.atan2(c,h);this._z=Math.atan2(u,i)}else{this._x=0;this._z=Math.atan2(-s,a)}}else if(t==="YZX"){this._z=Math.asin(n(u,-1,1));if(Math.abs(u)<.99999){this._x=Math.atan2(-f,a);this._y=Math.atan2(-l,i)}else{this._x=0;this._y=Math.atan2(o,h)}}else if(t==="XZY"){this._z=Math.asin(-n(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(c,a);this._y=Math.atan2(o,i)}else{this._x=Math.atan2(-f,h);this._y=0}}else{console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t)}this._order=t;this.onChangeCallback();return this},setFromQuaternion:function(e,t,n){var r=THREE.Math.clamp;var i=e.x*e.x;var s=e.y*e.y;var o=e.z*e.z;var u=e.w*e.w;t=t||this._order;if(t==="XYZ"){this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),u-i-s+o);this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w),-1,1));this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),u+i-s-o)}else if(t==="YXZ"){this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z),-1,1));this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),u-i-s+o);this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),u-i+s-o)}else if(t==="ZXY"){this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z),-1,1));this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),u-i-s+o);this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),u-i+s-o)}else if(t==="ZYX"){this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),u-i-s+o);this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z),-1,1));this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),u+i-s-o)}else if(t==="YZX"){this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),u-i+s-o);this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),u+i-s-o);this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w),-1,1))}else if(t==="XZY"){this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),u-i+s-o);this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),u+i-s-o);this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y),-1,1))}else{console.warn("THREE.Euler: .setFromQuaternion() given unsupported order: "+t)}this._order=t;if(n!==false)this.onChangeCallback();return this},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this);this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){this._x=e[0];this._y=e[1];this._z=e[2];if(e[3]!==undefined)this._order=e[3];this.onChangeCallback();return this},toArray:function(){return[this._x,this._y,this._z,this._order]},onChange:function(e){this.onChangeCallback=e;return this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}};THREE.Line3=function(e,t){this.start=e!==undefined?e:new THREE.Vector3;this.end=t!==undefined?t:new THREE.Vector3};THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){this.start.copy(e);this.end.copy(t);return this},copy:function(e){this.start.copy(e.start);this.end.copy(e.end);return this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(n,r){e.subVectors(n,this.start);t.subVectors(this.end,this.start);var i=t.dot(t);var s=t.dot(e);var o=s/i;if(r){o=THREE.Math.clamp(o,0,1)}return o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);var i=n||new THREE.Vector3;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){this.start.applyMatrix4(e);this.end.applyMatrix4(e);return this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(e,t){this.min=e!==undefined?e:new THREE.Vector2(Infinity,Infinity);this.max=t!==undefined?t:new THREE.Vector2(-Infinity,-Infinity)};THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);this.min.copy(t).sub(r);this.max.copy(t).add(r);return this}}(),copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){if(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y){return false}return true},containsBox:function(e){if(this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y){return true}return false},getParameter:function(e,t){var n=t||new THREE.Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){if(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y){return false}return true},clampPoint:function(e,t){var n=t||new THREE.Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(e,t){this.min=e!==undefined?e:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=t!==undefined?t:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){this.min.copy(e);this.max.copy(t);return this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++){this.expandByPoint(e[t])}return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);this.min.copy(t).sub(r);this.max.copy(t).add(r);return this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var n=this;t.updateMatrixWorld(true);this.makeEmpty();t.traverse(function(t){var r=t.geometry;if(r!==undefined){if(r instanceof THREE.Geometry){var i=r.vertices;for(var s=0,o=i.length;s<o;s++){e.copy(i[s]);e.applyMatrix4(t.matrixWorld);n.expandByPoint(e)}}else if(r instanceof THREE.BufferGeometry&&r.attributes["position"]!==undefined){var u=r.attributes["position"].array;for(var s=0,o=u.length;s<o;s+=3){e.set(u[s],u[s+1],u[s+2]);e.applyMatrix4(t.matrixWorld);n.expandByPoint(e)}}}});return this}}(),copy:function(e){this.min.copy(e.min);this.max.copy(e.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){this.min.min(e);this.max.max(e);return this},expandByVector:function(e){this.min.sub(e);this.max.add(e);return this},expandByScalar:function(e){this.min.addScalar(-e);this.max.addScalar(e);return this},containsPoint:function(e){if(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z){return false}return true},containsBox:function(e){if(this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z){return true}return false},getParameter:function(e,t){var n=t||new THREE.Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){if(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z){return false}return true},clampPoint:function(e,t){var n=t||new THREE.Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var n=t||new THREE.Sphere;n.center=this.center();n.radius=this.size(e).length()*.5;return n}}(),intersect:function(e){this.min.max(e.min);this.max.min(e.max);return this},union:function(e){this.min.min(e.min);this.max.max(e.max);return this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t);e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t);e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t);e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t);e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t);e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t);e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t);e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t);this.makeEmpty();this.setFromPoints(e);return this}}(),translate:function(e){this.min.add(e);this.max.add(e);return this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);if(arguments.length>0){console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}};THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,r,i,s,o,u,a){var f=this.elements;f[0]=e;f[3]=t;f[6]=n;f[1]=r;f[4]=i;f[7]=s;f[2]=o;f[5]=u;f[8]=a;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(e){var t=e.elements;this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]);return this},multiplyVector3:function(e){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return e.applyMatrix3(this)},multiplyVector3Array:function(e){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,r){if(n===undefined)n=0;if(r===undefined)r=t.length;for(var i=0,s=n,o;i<r;i+=3,s+=3){e.x=t[s];e.y=t[s+1];e.z=t[s+2];e.applyMatrix3(this);t[s]=e.x;t[s+1]=e.y;t[s+2]=e.z}return t}}(),multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[3]*=e;t[6]*=e;t[1]*=e;t[4]*=e;t[7]*=e;t[2]*=e;t[5]*=e;t[8]*=e;return this},determinant:function(){var e=this.elements;var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*s*f-t*o*a-n*i*f+n*o*u+r*i*a-r*s*u},getInverse:function(e,t){var n=e.elements;var r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9];r[1]=-n[10]*n[1]+n[2]*n[9];r[2]=n[6]*n[1]-n[2]*n[5];r[3]=-n[10]*n[4]+n[6]*n[8];r[4]=n[10]*n[0]-n[2]*n[8];r[5]=-n[6]*n[0]+n[2]*n[4];r[6]=n[9]*n[4]-n[5]*n[8];r[7]=-n[9]*n[0]+n[1]*n[8];r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(i===0){var s="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t||false){throw new Error(s)}else{console.warn(s)}this.identity();return this}this.multiplyScalar(1/i);return this},transpose:function(){var e,t=this.elements;e=t[1];t[1]=t[3];t[3]=e;e=t[2];t[2]=t[6];t[6]=e;e=t[5];t[5]=t[7];t[7]=e;return this},flattenToArrayOffset:function(e,t){var n=this.elements;e[t]=n[0];e[t+1]=n[1];e[t+2]=n[2];e[t+3]=n[3];e[t+4]=n[4];e[t+5]=n[5];e[t+6]=n[6];e[t+7]=n[7];e[t+8]=n[8];return e},getNormalMatrix:function(e){this.getInverse(e).transpose();return this},transposeIntoArray:function(e){var t=this.elements;e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8];return this},fromArray:function(e){this.elements.set(e);return this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}};THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(arguments.length>0){console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=this.elements;m[0]=e;m[4]=t;m[8]=n;m[12]=r;m[1]=i;m[5]=s;m[9]=o;m[13]=u;m[2]=a;m[6]=f;m[10]=l;m[14]=c;m[3]=h;m[7]=p;m[11]=d;m[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(e){this.elements.set(e.elements);return this},extractPosition:function(e){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(e)},copyPosition:function(e){var t=this.elements;var n=e.elements;t[12]=n[12];t[13]=n[13];t[14]=n[14];return this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var n=this.elements;var r=t.elements;var i=1/e.set(r[0],r[1],r[2]).length();var s=1/e.set(r[4],r[5],r[6]).length();var o=1/e.set(r[8],r[9],r[10]).length();n[0]=r[0]*i;n[1]=r[1]*i;n[2]=r[2]*i;n[4]=r[4]*s;n[5]=r[5]*s;n[6]=r[6]*s;n[8]=r[8]*o;n[9]=r[9]*o;n[10]=r[10]*o;return this}}(),makeRotationFromEuler:function(e){if(e instanceof THREE.Euler===false){console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.")}var t=this.elements;var n=e.x,r=e.y,i=e.z;var s=Math.cos(n),o=Math.sin(n);var u=Math.cos(r),a=Math.sin(r);var f=Math.cos(i),l=Math.sin(i);if(e.order==="XYZ"){var c=s*f,h=s*l,p=o*f,d=o*l;t[0]=u*f;t[4]=-u*l;t[8]=a;t[1]=h+p*a;t[5]=c-d*a;t[9]=-o*u;t[2]=d-c*a;t[6]=p+h*a;t[10]=s*u}else if(e.order==="YXZ"){var v=u*f,m=u*l,g=a*f,y=a*l;t[0]=v+y*o;t[4]=g*o-m;t[8]=s*a;t[1]=s*l;t[5]=s*f;t[9]=-o;t[2]=m*o-g;t[6]=y+v*o;t[10]=s*u}else if(e.order==="ZXY"){var v=u*f,m=u*l,g=a*f,y=a*l;t[0]=v-y*o;t[4]=-s*l;t[8]=g+m*o;t[1]=m+g*o;t[5]=s*f;t[9]=y-v*o;t[2]=-s*a;t[6]=o;t[10]=s*u}else if(e.order==="ZYX"){var c=s*f,h=s*l,p=o*f,d=o*l;t[0]=u*f;t[4]=p*a-h;t[8]=c*a+d;t[1]=u*l;t[5]=d*a+c;t[9]=h*a-p;t[2]=-a;t[6]=o*u;t[10]=s*u}else if(e.order==="YZX"){var b=s*u,w=s*a,E=o*u,S=o*a;t[0]=u*f;t[4]=S-b*l;t[8]=E*l+w;t[1]=l;t[5]=s*f;t[9]=-o*f;t[2]=-a*f;t[6]=w*l+E;t[10]=b-S*l}else if(e.order==="XZY"){var b=s*u,w=s*a,E=o*u,S=o*a;t[0]=u*f;t[4]=-l;t[8]=a*f;t[1]=b*l+S;t[5]=s*f;t[9]=w*l-E;t[2]=E*l-w;t[6]=o*f;t[10]=S*l+b}t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},setRotationFromQuaternion:function(e){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements;var n=e.x,r=e.y,i=e.z,s=e.w;var o=n+n,u=r+r,a=i+i;var f=n*o,l=n*u,c=n*a;var h=r*u,p=r*a,d=i*a;var v=s*o,m=s*u,g=s*a;t[0]=1-(h+d);t[4]=l-g;t[8]=c+m;t[1]=l+g;t[5]=1-(f+d);t[9]=p-v;t[2]=c-m;t[6]=p+v;t[10]=1-(f+h);t[3]=0;t[7]=0;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},lookAt:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;var n=new THREE.Vector3;return function(r,i,s){var o=this.elements;n.subVectors(r,i).normalize();if(n.length()===0){n.z=1}e.crossVectors(s,n).normalize();if(e.length()===0){n.x+=1e-4;e.crossVectors(s,n).normalize()}t.crossVectors(n,e);o[0]=e.x;o[4]=t.x;o[8]=n.x;o[1]=e.y;o[5]=t.y;o[9]=n.y;o[2]=e.z;o[6]=t.z;o[10]=n.z;return this}}(),multiply:function(e,t){if(t!==undefined){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(e,t)}return this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements;var r=t.elements;var i=this.elements;var s=n[0],o=n[4],u=n[8],a=n[12];var f=n[1],l=n[5],c=n[9],h=n[13];var p=n[2],d=n[6],v=n[10],m=n[14];var g=n[3],y=n[7],b=n[11],w=n[15];var E=r[0],S=r[4],x=r[8],T=r[12];var N=r[1],C=r[5],k=r[9],L=r[13];var A=r[2],O=r[6],M=r[10],_=r[14];var D=r[3],P=r[7],H=r[11],B=r[15];i[0]=s*E+o*N+u*A+a*D;i[4]=s*S+o*C+u*O+a*P;i[8]=s*x+o*k+u*M+a*H;i[12]=s*T+o*L+u*_+a*B;i[1]=f*E+l*N+c*A+h*D;i[5]=f*S+l*C+c*O+h*P;i[9]=f*x+l*k+c*M+h*H;i[13]=f*T+l*L+c*_+h*B;i[2]=p*E+d*N+v*A+m*D;i[6]=p*S+d*C+v*O+m*P;i[10]=p*x+d*k+v*M+m*H;i[14]=p*T+d*L+v*_+m*B;i[3]=g*E+y*N+b*A+w*D;i[7]=g*S+y*C+b*O+w*P;i[11]=g*x+y*k+b*M+w*H;i[15]=g*T+y*L+b*_+w*B;return this},multiplyToArray:function(e,t,n){var r=this.elements;this.multiplyMatrices(e,t);n[0]=r[0];n[1]=r[1];n[2]=r[2];n[3]=r[3];n[4]=r[4];n[5]=r[5];n[6]=r[6];n[7]=r[7];n[8]=r[8];n[9]=r[9];n[10]=r[10];n[11]=r[11];n[12]=r[12];n[13]=r[13];n[14]=r[14];n[15]=r[15];return this},multiplyScalar:function(e){var t=this.elements;t[0]*=e;t[4]*=e;t[8]*=e;t[12]*=e;t[1]*=e;t[5]*=e;t[9]*=e;t[13]*=e;t[2]*=e;t[6]*=e;t[10]*=e;t[14]*=e;t[3]*=e;t[7]*=e;t[11]*=e;t[15]*=e;return this},multiplyVector3:function(e){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return e.applyProjection(this)},multiplyVector4:function(e){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},multiplyVector3Array:function(e){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,n,r){if(n===undefined)n=0;if(r===undefined)r=t.length;for(var i=0,s=n,o;i<r;i+=3,s+=3){e.x=t[s];e.y=t[s+1];e.z=t[s+2];e.applyMatrix4(this);t[s]=e.x;t[s+1]=e.y;t[s+2]=e.z}return t}}(),rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");e.transformDirection(this)},crossVector:function(e){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return e.applyMatrix4(this)},determinant:function(){var e=this.elements;var t=e[0],n=e[4],r=e[8],i=e[12];var s=e[1],o=e[5],u=e[9],a=e[13];var f=e[2],l=e[6],c=e[10],h=e[14];var p=e[3],d=e[7],v=e[11],m=e[15];return p*(+i*u*l-r*a*l-i*o*c+n*a*c+r*o*h-n*u*h)+d*(+t*u*h-t*a*c+i*s*c-r*s*h+r*a*f-i*u*f)+v*(+t*a*l-t*o*h-i*s*l+n*s*h+i*o*f-n*a*f)+m*(-r*o*f-t*u*l+t*o*c+r*s*l-n*s*c+n*u*f)},transpose:function(){var e=this.elements;var t;t=e[1];e[1]=e[4];e[4]=t;t=e[2];e[2]=e[8];e[8]=t;t=e[6];e[6]=e[9];e[9]=t;t=e[3];e[3]=e[12];e[12]=t;t=e[7];e[7]=e[13];e[13]=t;t=e[11];e[11]=e[14];e[14]=t;return this},flattenToArrayOffset:function(e,t){var n=this.elements;e[t]=n[0];e[t+1]=n[1];e[t+2]=n[2];e[t+3]=n[3];e[t+4]=n[4];e[t+5]=n[5];e[t+6]=n[6];e[t+7]=n[7];e[t+8]=n[8];e[t+9]=n[9];e[t+10]=n[10];e[t+11]=n[11];e[t+12]=n[12];e[t+13]=n[13];e[t+14]=n[14];e[t+15]=n[15];return e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;t[12]=e.x;t[13]=e.y;t[14]=e.z;return this},getInverse:function(e,t){var n=this.elements;var r=e.elements;var i=r[0],s=r[4],o=r[8],u=r[12];var a=r[1],f=r[5],l=r[9],c=r[13];var h=r[2],p=r[6],d=r[10],v=r[14];var m=r[3],g=r[7],y=r[11],b=r[15];n[0]=l*v*g-c*d*g+c*p*y-f*v*y-l*p*b+f*d*b;n[4]=u*d*g-o*v*g-u*p*y+s*v*y+o*p*b-s*d*b;n[8]=o*c*g-u*l*g+u*f*y-s*c*y-o*f*b+s*l*b;n[12]=u*l*p-o*c*p-u*f*d+s*c*d+o*f*v-s*l*v;n[1]=c*d*m-l*v*m-c*h*y+a*v*y+l*h*b-a*d*b;n[5]=o*v*m-u*d*m+u*h*y-i*v*y-o*h*b+i*d*b;n[9]=u*l*m-o*c*m-u*a*y+i*c*y+o*a*b-i*l*b;n[13]=o*c*h-u*l*h+u*a*d-i*c*d-o*a*v+i*l*v;n[2]=f*v*m-c*p*m+c*h*g-a*v*g-f*h*b+a*p*b;n[6]=u*p*m-s*v*m-u*h*g+i*v*g+s*h*b-i*p*b;n[10]=s*c*m-u*f*m+u*a*g-i*c*g-s*a*b+i*f*b;n[14]=u*f*h-s*c*h-u*a*p+i*c*p+s*a*v-i*f*v;n[3]=l*p*m-f*d*m-l*h*g+a*d*g+f*h*y-a*p*y;n[7]=s*d*m-o*p*m+o*h*g-i*d*g-s*h*y+i*p*y;n[11]=o*f*m-s*l*m-o*a*g+i*l*g+s*a*y-i*f*y;n[15]=s*l*h-o*f*h+o*a*p-i*l*p-s*a*d+i*f*d;var w=i*n[0]+a*n[4]+h*n[8]+m*n[12];if(w==0){var E="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t||false){throw new Error(E)}else{console.warn(E)}this.identity();return this}this.multiplyScalar(1/w);return this},translate:function(e){console.warn("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.warn("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.warn("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.warn("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements;var n=e.x,r=e.y,i=e.z;t[0]*=n;t[4]*=r;t[8]*=i;t[1]*=n;t[5]*=r;t[9]*=i;t[2]*=n;t[6]*=r;t[10]*=i;t[3]*=n;t[7]*=r;t[11]*=i;return this},getMaxScaleOnAxis:function(){var e=this.elements;var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];var n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6];var r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeTranslation:function(e,t,n){this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1);return this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1);return this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1);return this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(e,t){var n=Math.cos(t);var r=Math.sin(t);var i=1-n;var s=e.x,o=e.y,u=e.z;var a=i*s,f=i*o;this.set(a*s+n,a*o-r*u,a*u+r*o,0,a*o+r*u,f*o+n,f*u-r*s,0,a*u-r*o,f*u+r*s,i*u*u+n,0,0,0,0,1);return this},makeScale:function(e,t,n){this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1);return this},compose:function(e,t,n){this.makeRotationFromQuaternion(t);this.scale(n);this.setPosition(e);return this},decompose:function(){var e=new THREE.Vector3;var t=new THREE.Matrix4;return function(n,r,i){var s=this.elements;var o=e.set(s[0],s[1],s[2]).length();var u=e.set(s[4],s[5],s[6]).length();var a=e.set(s[8],s[9],s[10]).length();var f=this.determinant();if(f<0){o=-o}n.x=s[12];n.y=s[13];n.z=s[14];t.elements.set(this.elements);var l=1/o;var c=1/u;var h=1/a;t.elements[0]*=l;t.elements[1]*=l;t.elements[2]*=l;t.elements[4]*=c;t.elements[5]*=c;t.elements[6]*=c;t.elements[8]*=h;t.elements[9]*=h;t.elements[10]*=h;r.setFromRotationMatrix(t);i.x=o;i.y=u;i.z=a;return this}}(),makeFrustum:function(e,t,n,r,i,s){var o=this.elements;var u=2*i/(t-e);var a=2*i/(r-n);var f=(t+e)/(t-e);var l=(r+n)/(r-n);var c=-(s+i)/(s-i);var h=-2*s*i/(s-i);o[0]=u;o[4]=0;o[8]=f;o[12]=0;o[1]=0;o[5]=a;o[9]=l;o[13]=0;o[2]=0;o[6]=0;o[10]=c;o[14]=h;o[3]=0;o[7]=0;o[11]=-1;o[15]=0;return this},makePerspective:function(e,t,n,r){var i=n*Math.tan(THREE.Math.degToRad(e*.5));var s=-i;var o=s*t;var u=i*t;return this.makeFrustum(o,u,s,i,n,r)},makeOrthographic:function(e,t,n,r,i,s){var o=this.elements;var u=t-e;var a=n-r;var f=s-i;var l=(t+e)/u;var c=(n+r)/a;var h=(s+i)/f;o[0]=2/u;o[4]=0;o[8]=0;o[12]=-l;o[1]=0;o[5]=2/a;o[9]=0;o[13]=-c;o[2]=0;o[6]=0;o[10]=-2/f;o[14]=-h;o[3]=0;o[7]=0;o[11]=0;o[15]=1;return this},fromArray:function(e){this.elements.set(e);return this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}};THREE.Ray=function(e,t){this.origin=e!==undefined?e:new THREE.Vector3;this.direction=t!==undefined?t:new THREE.Vector3};THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){this.origin.copy(e);this.direction.copy(t);return this},copy:function(e){this.origin.copy(e.origin);this.direction.copy(e.direction);return this},at:function(e,t){var n=t||new THREE.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){this.origin.copy(this.at(t,e));return this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);if(r<0){return n.copy(this.origin)}return n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);if(n<0){return this.origin.distanceTo(t)}e.copy(this.direction).multiplyScalar(n).add(this.origin);return e.distanceTo(t)}}(),distanceSqToSegment:function(e,t,n,r){var i=e.clone().add(t).multiplyScalar(.5);var s=t.clone().sub(e).normalize();var o=e.distanceTo(t)*.5;var u=this.origin.clone().sub(i);var a=-this.direction.dot(s);var f=u.dot(this.direction);var l=-u.dot(s);var c=u.lengthSq();var h=Math.abs(1-a*a);var p,d,v,m;if(h>=0){p=a*l-f;d=a*f-l;m=o*h;if(p>=0){if(d>=-m){if(d<=m){var g=1/h;p*=g;d*=g;v=p*(p+a*d+2*f)+d*(a*p+d+2*l)+c}else{d=o;p=Math.max(0,-(a*d+f));v=-p*p+d*(d+2*l)+c}}else{d=-o;p=Math.max(0,-(a*d+f));v=-p*p+d*(d+2*l)+c}}else{if(d<=-m){p=Math.max(0,-(-a*o+f));d=p>0?-o:Math.min(Math.max(-o,-l),o);v=-p*p+d*(d+2*l)+c}else if(d<=m){p=0;d=Math.min(Math.max(-o,-l),o);v=d*(d+2*l)+c}else{p=Math.max(0,-(a*o+f));d=p>0?o:Math.min(Math.max(-o,-l),o);v=-p*p+d*(d+2*l)+c}}}else{d=a>0?-o:o;p=Math.max(0,-(a*d+f));v=-p*p+d*(d+2*l)+c}if(n){n.copy(this.direction.clone().multiplyScalar(p).add(this.origin))}if(r){r.copy(s.clone().multiplyScalar(d).add(i))}return v},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction);var i=e.dot(e)-r*r;var s=t.radius*t.radius;if(i>s)return null;var o=Math.sqrt(s-i);var u=r-o;var a=r+o;if(u<0&&a<0)return null;if(u<0)return this.at(a,n);return this.at(u,n)}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0){return true}var n=e.normal.dot(this.direction);if(n*t<0){return true}return false},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t==0){if(e.distanceToPoint(this.origin)==0){return 0}return null}var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);if(n===null){return null}return this.at(n,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return this.intersectBox(t,e)!==null}}(),intersectBox:function(e,t){var n,r,i,s,o,u;var a=1/this.direction.x,f=1/this.direction.y,l=1/this.direction.z;var c=this.origin;if(a>=0){n=(e.min.x-c.x)*a;r=(e.max.x-c.x)*a}else{n=(e.max.x-c.x)*a;r=(e.min.x-c.x)*a}if(f>=0){i=(e.min.y-c.y)*f;s=(e.max.y-c.y)*f}else{i=(e.max.y-c.y)*f;s=(e.min.y-c.y)*f}if(n>s||i>r)return null;if(i>n||n!==n)n=i;if(s<r||r!==r)r=s;if(l>=0){o=(e.min.z-c.z)*l;u=(e.max.z-c.z)*l}else{o=(e.max.z-c.z)*l;u=(e.min.z-c.z)*l}if(n>u||o>r)return null;if(o>n||n!==n)n=o;if(u<r||r!==r)r=u;if(r<0)return null;return this.at(n>=0?n:r,t)},intersectTriangle:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;var n=new THREE.Vector3;var r=new THREE.Vector3;return function(i,s,o,u,a){t.subVectors(s,i);n.subVectors(o,i);r.crossVectors(t,n);var f=this.direction.dot(r);var l;if(f>0){if(u)return null;l=1}else if(f<0){l=-1;f=-f}else{return null}e.subVectors(this.origin,i);var c=l*this.direction.dot(n.crossVectors(e,n));if(c<0){return null}var h=l*this.direction.dot(t.cross(e));if(h<0){return null}if(c+h>f){return null}var p=-l*e.dot(r);if(p<0){return null}return this.at(p/f,a)}}(),applyMatrix4:function(e){this.direction.add(this.origin).applyMatrix4(e);this.origin.applyMatrix4(e);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};THREE.Sphere=function(e,t){this.center=e!==undefined?e:new THREE.Vector3;this.radius=t!==undefined?t:0};THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){this.center.copy(e);this.radius=t;return this},setFromPoints:function(){var e=new THREE.Box3;return function(t,n){var r=this.center;if(n!==undefined){r.copy(n)}else{e.setFromPoints(t).center(r)}var i=0;for(var s=0,o=t.length;s<o;s++){i=Math.max(i,r.distanceToSquared(t[s]))}this.radius=Math.sqrt(i);return this}}(),copy:function(e){this.center.copy(e.center);this.radius=e.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);var r=t||new THREE.Vector3;r.copy(e);if(n>this.radius*this.radius){r.sub(this.center).normalize();r.multiplyScalar(this.radius).add(this.center)}return r},getBoundingBox:function(e){var t=e||new THREE.Box3;t.set(this.center,this.center);t.expandByScalar(this.radius);return t},applyMatrix4:function(e){this.center.applyMatrix4(e);this.radius=this.radius*e.getMaxScaleOnAxis();return this},translate:function(e){this.center.add(e);return this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};THREE.Frustum=function(e,t,n,r,i,s){this.planes=[e!==undefined?e:new THREE.Plane,t!==undefined?t:new THREE.Plane,n!==undefined?n:new THREE.Plane,r!==undefined?r:new THREE.Plane,i!==undefined?i:new THREE.Plane,s!==undefined?s:new THREE.Plane]};THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,r,i,s){var o=this.planes;o[0].copy(e);o[1].copy(t);o[2].copy(n);o[3].copy(r);o[4].copy(i);o[5].copy(s);return this},copy:function(e){var t=this.planes;for(var n=0;n<6;n++){t[n].copy(e.planes[n])}return this},setFromMatrix:function(e){var t=this.planes;var n=e.elements;var r=n[0],i=n[1],s=n[2],o=n[3];var u=n[4],a=n[5],f=n[6],l=n[7];var c=n[8],h=n[9],p=n[10],d=n[11];var v=n[12],m=n[13],g=n[14],y=n[15];t[0].setComponents(o-r,l-u,d-c,y-v).normalize();t[1].setComponents(o+r,l+u,d+c,y+v).normalize();t[2].setComponents(o+i,l+a,d+h,y+m).normalize();t[3].setComponents(o-i,l-a,d-h,y-m).normalize();t[4].setComponents(o-s,l-f,d-p,y-g).normalize();t[5].setComponents(o+s,l+f,d+p,y+g).normalize();return this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var n=t.geometry;if(n.boundingSphere===null)n.computeBoundingSphere();e.copy(n.boundingSphere);e.applyMatrix4(t.matrixWorld);return this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes;var n=e.center;var r=-e.radius;for(var i=0;i<6;i++){var s=t[i].distanceToPoint(n);if(s<r){return false}}return true},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){var r=this.planes;for(var i=0;i<6;i++){var s=r[i];e.x=s.normal.x>0?n.min.x:n.max.x;t.x=s.normal.x>0?n.max.x:n.min.x;e.y=s.normal.y>0?n.min.y:n.max.y;t.y=s.normal.y>0?n.max.y:n.min.y;e.z=s.normal.z>0?n.min.z:n.max.z;t.z=s.normal.z>0?n.max.z:n.min.z;var o=s.distanceToPoint(e);var u=s.distanceToPoint(t);if(o<0&&u<0){return false}}return true}}(),containsPoint:function(e){var t=this.planes;for(var n=0;n<6;n++){if(t[n].distanceToPoint(e)<0){return false}}return true},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(e,t){this.normal=e!==undefined?e:new THREE.Vector3(1,0,0);this.constant=t!==undefined?t:0};THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){this.normal.copy(e);this.constant=t;return this},setComponents:function(e,t,n,r){this.normal.set(e,t,n);this.constant=r;return this},setFromNormalAndCoplanarPoint:function(e,t){this.normal.copy(e);this.constant=-t.dot(this.normal);return this},setFromCoplanarPoints:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(n,r,i){var s=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();this.setFromNormalAndCoplanarPoint(s,n);return this}}(),copy:function(e){this.normal.copy(e.normal);this.constant=e.constant;return this},normalize:function(){var e=1/this.normal.length();this.normal.multiplyScalar(e);this.constant*=e;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);var r=t||new THREE.Vector3;return r.copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);var n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var r=n||new THREE.Vector3;var i=t.delta(e);var s=this.normal.dot(i);if(s==0){if(this.distanceToPoint(t.start)==0){return r.copy(t.start)}return undefined}var o=-(t.start.dot(this.normal)+this.constant)/s;if(o<0||o>1){return undefined}return r.copy(i).multiplyScalar(o).add(t.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;var n=new THREE.Matrix3;return function(r,i){var s=i||n.getNormalMatrix(r);var o=e.copy(this.normal).applyMatrix3(s);var u=this.coplanarPoint(t);u.applyMatrix4(r);this.setFromNormalAndCoplanarPoint(o,u);return this}}(),translate:function(e){this.constant=this.constant-e.dot(this.normal);return this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};THREE.Math={generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var t=new Array(36);var n=0,r;return function(){for(var i=0;i<36;i++){if(i==8||i==13||i==18||i==23){t[i]="-"}else if(i==14){t[i]="4"}else{if(n<=2)n=33554432+Math.random()*16777216|0;r=n&15;n=n>>4;t[i]=e[i==19?r&3|8:r]}}return t.join("")}}(),clamp:function(e,t,n){return e<t?t:e>n?n:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){if(e<=t)return 0;if(e>=n)return 1;e=(e-t)/(n-t);return e*e*(3-2*e)},smootherstep:function(e,t,n){if(e<=t)return 0;if(e>=n)return 1;e=(e-t)/(n-t);return e*e*e*(e*(e*6-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0}};THREE.Spline=function(e){function h(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t}this.points=e;var t=[],n={x:0,y:0,z:0},r,i,s,o,u,a,f,l,c;this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++){this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}}};this.getPoint=function(e){r=(this.points.length-1)*e;i=Math.floor(r);s=r-i;t[0]=i===0?i:i-1;t[1]=i;t[2]=i>this.points.length-2?this.points.length-1:i+1;t[3]=i>this.points.length-3?this.points.length-1:i+2;a=this.points[t[0]];f=this.points[t[1]];l=this.points[t[2]];c=this.points[t[3]];o=s*s;u=s*o;n.x=h(a.x,f.x,l.x,c.x,s,o,u);n.y=h(a.y,f.y,l.y,c.y,s,o,u);n.z=h(a.z,f.z,l.z,c.z,s,o,u);return n};this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++){t=this.points[e];r[e]=[t.x,t.y,t.z]}return r};this.getLength=function(e){var t,n,r,i,s=0,o=0,u=0,a=new THREE.Vector3,f=new THREE.Vector3,l=[],c=0;l[0]=0;if(!e)e=100;r=this.points.length*e;a.copy(this.points[0]);for(t=1;t<r;t++){n=t/r;i=this.getPoint(n);f.copy(i);c+=f.distanceTo(a);a.copy(i);s=(this.points.length-1)*n;o=Math.floor(s);if(o!=u){l[o]=c;u=o}}l[l.length]=c;return{chunks:l,total:c}};this.reparametrizeByArcLength=function(e){var t,n,r,i,s,o,u,a,f,l=[],c=new THREE.Vector3,h=this.getLength();l.push(c.copy(this.points[0]).clone());for(t=1;t<this.points.length;t++){u=h.chunks[t]-h.chunks[t-1];a=Math.ceil(e*u/h.total);i=(t-1)/(this.points.length-1);s=t/(this.points.length-1);for(n=1;n<a-1;n++){r=i+n*(1/a)*(s-i);f=this.getPoint(r);l.push(c.copy(f).clone())}l.push(c.copy(this.points[t]).clone())}this.points=l};};THREE.Triangle=function(e,t,n){this.a=e!==undefined?e:new THREE.Vector3;this.b=t!==undefined?t:new THREE.Vector3;this.c=n!==undefined?n:new THREE.Vector3};THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,r,i){var s=i||new THREE.Vector3;s.subVectors(r,n);e.subVectors(t,n);s.cross(e);var o=s.lengthSq();if(o>0){return s.multiplyScalar(1/Math.sqrt(o))}return s.set(0,0,0)}}();THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3;var t=new THREE.Vector3;var n=new THREE.Vector3;return function(r,i,s,o,u){e.subVectors(o,i);t.subVectors(s,i);n.subVectors(r,i);var a=e.dot(e);var f=e.dot(t);var l=e.dot(n);var c=t.dot(t);var h=t.dot(n);var p=a*c-f*f;var d=u||new THREE.Vector3;if(p==0){return d.set(-2,-1,-1)}var v=1/p;var m=(c*l-f*h)*v;var g=(a*h-f*l)*v;return d.set(1-m-g,g,m)}}();THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,r,i){var s=THREE.Triangle.barycoordFromPoint(t,n,r,i,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}();THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){this.a.copy(e);this.b.copy(t);this.c.copy(n);return this},setFromPointsAndIndices:function(e,t,n,r){this.a.copy(e[t]);this.b.copy(e[n]);this.c.copy(e[r]);return this},copy:function(e){this.a.copy(e.a);this.b.copy(e.b);this.c.copy(e.c);return this},area:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(){e.subVectors(this.c,this.b);t.subVectors(this.a,this.b);return e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Clock=function(e){this.autoStart=e!==undefined?e:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false};THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=self.performance!==undefined&&self.performance.now!==undefined?self.performance.now():Date.now();this.oldTime=this.startTime;this.running=true},stop:function(){this.getElapsedTime();this.running=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running){this.start()}if(this.running){var t=self.performance!==undefined&&self.performance.now!==undefined?self.performance.now():Date.now();e=.001*(t-this.oldTime);this.oldTime=t;this.elapsedTime+=e}return e}};THREE.EventDispatcher=function(){};THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener;e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener;e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener;e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){if(this._listeners===undefined)this._listeners={};var n=this._listeners;if(n[e]===undefined){n[e]=[]}if(n[e].indexOf(t)===-1){n[e].push(t)}},hasEventListener:function(e,t){if(this._listeners===undefined)return false;var n=this._listeners;if(n[e]!==undefined&&n[e].indexOf(t)!==-1){return true}return false},removeEventListener:function(e,t){if(this._listeners===undefined)return;var n=this._listeners;var r=n[e];if(r!==undefined){var i=r.indexOf(t);if(i!==-1){r.splice(i,1)}}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners;var n=t[e.type];if(n!==undefined){e.target=this;var r=[];var i=n.length;for(var s=0;s<i;s++){r[s]=n[s]}for(var s=0;s<i;s++){r[s].call(this,e)}}}};(function(e){e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n);this.near=r||0;this.far=i||Infinity;this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance};var n=function(e,t,r,i){e.raycast(t,r);if(i===true){var s=e.children;for(var o=0,u=s.length;o<u;o++){n(s[o],t,r,true)}}};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},intersectObject:function(e,r){var i=[];n(e,this,i,r);i.sort(t);return i},intersectObjects:function(e,r){var i=[];if(e instanceof Array===false){console.log("THREE.Raycaster.intersectObjects: objects is not an Array.");return i}for(var s=0,o=e.length;s<o;s++){n(e[s],this,i,r)}i.sort(t);return i}}})(THREE);THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Object3D";this.parent=undefined;this.children=[];this.up=THREE.Object3D.DefaultUp.clone();var e=this;var t=new THREE.Vector3;var n=new THREE.Euler;var r=new THREE.Quaternion;var i=new THREE.Vector3(1,1,1);var s=function(){r.setFromEuler(n,false)};var o=function(){n.setFromQuaternion(r,undefined,false)};n.onChange(s);r.onChange(o);Object.defineProperties(this,{position:{enumerable:true,value:t},rotation:{enumerable:true,value:n},quaternion:{enumerable:true,value:r},scale:{enumerable:true,value:i}});this.renderDepth=null;this.rotationAutoUpdate=true;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixAutoUpdate=true;this.matrixWorldNeedsUpdate=false;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.userData={}};THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0);THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");return this.rotation.order},set eulerOrder(e){console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order.");this.rotation.order=e},get useQuaternion(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,true)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){e.setFromAxisAngle(t,n);this.quaternion.multiply(e);return this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){e.copy(t).applyQuaternion(this.quaternion);this.position.add(e.multiplyScalar(n));return this}}(),translate:function(e,t){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up);this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.add(arguments[t])}return this}if(e===this){console.error("THREE.Object3D.add:",e,"can't be added as a child of itself.");return this}if(e instanceof THREE.Object3D){if(e.parent!==undefined){e.parent.remove(e)}e.parent=this;e.dispatchEvent({type:"added"});this.children.push(e)}else{console.error("THREE.Object3D.add:",e,"is not an instance of THREE.Object3D.")}return this},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++){this.remove(arguments[t])}}var n=this.children.indexOf(e);if(n!==-1){e.parent=undefined;e.dispatchEvent({type:"removed"});this.children.splice(n,1)}},getChildByName:function(e,t){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(e,t)},getObjectById:function(e,t){if(this.id===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n];var s=i.getObjectById(e,t);if(s!==undefined){return s}}return undefined},getObjectByName:function(e,t){if(this.name===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n];var s=i.getObjectByName(e,t);if(s!==undefined){return s}}return undefined},getWorldPosition:function(e){var t=e||new THREE.Vector3;this.updateMatrixWorld(true);return t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(n){var r=n||new THREE.Quaternion;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,r,t);return r}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Euler;this.getWorldQuaternion(e);return n.setFromQuaternion(e,this.rotation.order,false)}}(),getWorldScale:function(){var e=new THREE.Vector3;var t=new THREE.Quaternion;return function(n){var r=n||new THREE.Vector3;this.updateMatrixWorld(true);this.matrixWorld.decompose(e,t,r);return r}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Vector3;this.getWorldQuaternion(e);return n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,n=this.children.length;t<n;t++){this.children[t].traverse(e)}},traverseVisible:function(e){if(this.visible===false)return;e(this);for(var t=0,n=this.children.length;t<n;t++){this.children[t].traverseVisible(e)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(e){if(this.matrixAutoUpdate===true)this.updateMatrix();if(this.matrixWorldNeedsUpdate===true||e===true){if(this.parent===undefined){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;e=true}for(var t=0,n=this.children.length;t<n;t++){this.children[t].updateMatrixWorld(e)}},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}};var t={};var n=function(n){if(e.geometries===undefined){e.geometries=[]}if(t[n.uuid]===undefined){var r=n.toJSON();delete r.metadata;t[n.uuid]=r;e.geometries.push(r)}return n.uuid};var r={};var i=function(t){if(e.materials===undefined){e.materials=[]}if(r[t.uuid]===undefined){var n=t.toJSON();delete n.metadata;r[t.uuid]=n;e.materials.push(n)}return t.uuid};var s=function(e){var t={};t.uuid=e.uuid;t.type=e.type;if(e.name!=="")t.name=e.name;if(JSON.stringify(e.userData)!=="{}")t.userData=e.userData;if(e.visible!==true)t.visible=e.visible;if(e instanceof THREE.PerspectiveCamera){t.fov=e.fov;t.aspect=e.aspect;t.near=e.near;t.far=e.far}else if(e instanceof THREE.OrthographicCamera){t.left=e.left;t.right=e.right;t.top=e.top;t.bottom=e.bottom;t.near=e.near;t.far=e.far}else if(e instanceof THREE.AmbientLight){t.color=e.color.getHex()}else if(e instanceof THREE.DirectionalLight){t.color=e.color.getHex();t.intensity=e.intensity}else if(e instanceof THREE.PointLight){t.color=e.color.getHex();t.intensity=e.intensity;t.distance=e.distance}else if(e instanceof THREE.SpotLight){t.color=e.color.getHex();t.intensity=e.intensity;t.distance=e.distance;t.angle=e.angle;t.exponent=e.exponent}else if(e instanceof THREE.HemisphereLight){t.color=e.color.getHex();t.groundColor=e.groundColor.getHex()}else if(e instanceof THREE.Mesh){t.geometry=n(e.geometry);t.material=i(e.material)}else if(e instanceof THREE.Line){t.geometry=n(e.geometry);t.material=i(e.material)}else if(e instanceof THREE.Sprite){t.material=i(e.material)}t.matrix=e.matrix.toArray();if(e.children.length>0){t.children=[];for(var r=0;r<e.children.length;r++){t.children.push(s(e.children[r]))}}return t};e.object=s(this);return e},clone:function(e,t){if(e===undefined)e=new THREE.Object3D;if(t===undefined)t=true;e.name=this.name;e.up.copy(this.up);e.position.copy(this.position);e.quaternion.copy(this.quaternion);e.scale.copy(this.scale);e.renderDepth=this.renderDepth;e.rotationAutoUpdate=this.rotationAutoUpdate;e.matrix.copy(this.matrix);e.matrixWorld.copy(this.matrixWorld);e.matrixAutoUpdate=this.matrixAutoUpdate;e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;e.visible=this.visible;e.castShadow=this.castShadow;e.receiveShadow=this.receiveShadow;e.frustumCulled=this.frustumCulled;e.userData=JSON.parse(JSON.stringify(this.userData));if(t===true){for(var n=0;n<this.children.length;n++){var r=this.children[n];e.add(r.clone())}}return e}};THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype);THREE.Object3DIdCount=0;THREE.Projector=function(){console.warn("THREE.Projector has been moved to /examples/renderers/Projector.js.");this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project().");e.project(t)};this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");e.unproject(t)};this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() has been removed.")}};THREE.Face3=function(e,t,n,r,i,s){this.a=e;this.b=t;this.c=n;this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3;this.vertexNormals=r instanceof Array?r:[];this.color=i instanceof THREE.Color?i:new THREE.Color;this.vertexColors=i instanceof Array?i:[];this.vertexTangents=[];this.materialIndex=s!==undefined?s:0};THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal);e.color.copy(this.color);e.materialIndex=this.materialIndex;for(var t=0,n=this.vertexNormals.length;t<n;t++){e.vertexNormals[t]=this.vertexNormals[t].clone()}for(var t=0,n=this.vertexColors.length;t<n;t++){e.vertexColors[t]=this.vertexColors[t].clone()}for(var t=0,n=this.vertexTangents.length;t<n;t++){e.vertexTangents[t]=this.vertexTangents[t].clone()}return e}};THREE.Face4=function(e,t,n,r,i,s,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new THREE.Face3(e,t,n,i,s,o)};THREE.BufferAttribute=function(e,t){this.array=e;this.itemSize=t;this.needsUpdate=false};THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,n){e*=this.itemSize;n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++){this.array[e+r]=t.array[n+r]}},set:function(e){this.array.set(e);return this},setX:function(e,t){this.array[e*this.itemSize]=t;return this},setY:function(e,t){this.array[e*this.itemSize+1]=t;return this},setZ:function(e,t){this.array[e*this.itemSize+2]=t;return this},setXY:function(e,t,n){e*=this.itemSize;this.array[e]=t;this.array[e+1]=n;return this},setXYZ:function(e,t,n,r){e*=this.itemSize;this.array[e]=t;this.array[e+1]=n;this.array[e+2]=r;return this},setXYZW:function(e,t,n,r,i){e*=this.itemSize;this.array[e]=t;this.array[e+1]=n;this.array[e+2]=r;this.array[e+3]=i;return this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}};THREE.Int8Attribute=function(e,t){console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Uint8Attribute=function(e,t){console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Uint8ClampedAttribute=function(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Int16Attribute=function(e,t){console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Uint16Attribute=function(e,t){console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Int32Attribute=function(e,t){console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Uint32Attribute=function(e,t){console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Float32Attribute=function(e,t){console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.Float64Attribute=function(e,t){console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead.");return new THREE.BufferAttribute(e,t)};THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="BufferGeometry";this.attributes={};this.attributesKeys=[];this.drawcalls=[];this.offsets=this.drawcalls;this.boundingBox=null;this.boundingSphere=null};THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t){if(t instanceof THREE.BufferAttribute===false){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.attributes[e]={array:arguments[1],itemSize:arguments[2]};return}this.attributes[e]=t;this.attributesKeys=Object.keys(this.attributes)},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,n){this.drawcalls.push({start:e,count:t,index:n!==undefined?n:0})},applyMatrix:function(e){var t=this.attributes.position;if(t!==undefined){e.applyToVector3Array(t.array);t.needsUpdate=true}var n=this.attributes.normal;if(n!==undefined){var r=(new THREE.Matrix3).getNormalMatrix(e);r.applyToVector3Array(n.array);n.needsUpdate=true}},center:function(){},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var n=e.vertices;var r=e.faces;var i=e.faceVertexUvs;var s=t.vertexColors;var o=i[0].length>0;var u=r[0].vertexNormals.length==3;var a=new Float32Array(r.length*3*3);this.addAttribute("position",new THREE.BufferAttribute(a,3));var f=new Float32Array(r.length*3*3);this.addAttribute("normal",new THREE.BufferAttribute(f,3));if(s!==THREE.NoColors){var l=new Float32Array(r.length*3*3);this.addAttribute("color",new THREE.BufferAttribute(l,3))}if(o===true){var c=new Float32Array(r.length*3*2);this.addAttribute("uv",new THREE.BufferAttribute(c,2))}for(var h=0,p=0,d=0;h<r.length;h++,p+=6,d+=9){var v=r[h];var m=n[v.a];var g=n[v.b];var y=n[v.c];a[d]=m.x;a[d+1]=m.y;a[d+2]=m.z;a[d+3]=g.x;a[d+4]=g.y;a[d+5]=g.z;a[d+6]=y.x;a[d+7]=y.y;a[d+8]=y.z;if(u===true){var b=v.vertexNormals[0];var w=v.vertexNormals[1];var E=v.vertexNormals[2];f[d]=b.x;f[d+1]=b.y;f[d+2]=b.z;f[d+3]=w.x;f[d+4]=w.y;f[d+5]=w.z;f[d+6]=E.x;f[d+7]=E.y;f[d+8]=E.z}else{var S=v.normal;f[d]=S.x;f[d+1]=S.y;f[d+2]=S.z;f[d+3]=S.x;f[d+4]=S.y;f[d+5]=S.z;f[d+6]=S.x;f[d+7]=S.y;f[d+8]=S.z}if(s===THREE.FaceColors){var x=v.color;l[d]=x.r;l[d+1]=x.g;l[d+2]=x.b;l[d+3]=x.r;l[d+4]=x.g;l[d+5]=x.b;l[d+6]=x.r;l[d+7]=x.g;l[d+8]=x.b}else if(s===THREE.VertexColors){var T=v.vertexColors[0];var N=v.vertexColors[1];var C=v.vertexColors[2];l[d]=T.r;l[d+1]=T.g;l[d+2]=T.b;l[d+3]=N.r;l[d+4]=N.g;l[d+5]=N.b;l[d+6]=C.r;l[d+7]=C.g;l[d+8]=C.b}if(o===true){var k=i[0][h][0];var L=i[0][h][1];var A=i[0][h][2];c[p]=k.x;c[p+1]=k.y;c[p+2]=L.x;c[p+3]=L.y;c[p+4]=A.x;c[p+5]=A.y}}this.computeBoundingSphere();return this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3}var t=this.attributes.position.array;if(t){var n=this.boundingBox;n.makeEmpty();for(var r=0,i=t.length;r<i;r+=3){e.set(t[r],t[r+1],t[r+2]);n.expandByPoint(e)}}if(t===undefined||t.length===0){this.boundingBox.min.set(0,0,0);this.boundingBox.max.set(0,0,0)}if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)){console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}}(),computeBoundingSphere:function(){var e=new THREE.Box3;var t=new THREE.Vector3;return function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere}var n=this.attributes.position.array;if(n){e.makeEmpty();var r=this.boundingSphere.center;for(var i=0,s=n.length;i<s;i+=3){t.set(n[i],n[i+1],n[i+2]);e.expandByPoint(t)}e.center(r);var o=0;for(var i=0,s=n.length;i<s;i+=3){t.set(n[i],n[i+1],n[i+2]);o=Math.max(o,r.distanceToSquared(t))}this.boundingSphere.radius=Math.sqrt(o);if(isNaN(this.boundingSphere.radius)){console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(e.normal===undefined){this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.length),3))}else{var n=e.normal.array;for(var r=0,i=n.length;r<i;r++){n[r]=0}}var n=e.normal.array;var s,o,u,a=new THREE.Vector3,f=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3;if(e.index){var p=e.index.array;var d=this.offsets.length>0?this.offsets:[{start:0,count:p.length,index:0}];for(var v=0,m=d.length;v<m;++v){var g=d[v].start;var y=d[v].count;var b=d[v].index;for(var r=g,i=g+y;r<i;r+=3){s=(b+p[r])*3;o=(b+p[r+1])*3;u=(b+p[r+2])*3;a.fromArray(t,s);f.fromArray(t,o);l.fromArray(t,u);c.subVectors(l,f);h.subVectors(a,f);c.cross(h);n[s]+=c.x;n[s+1]+=c.y;n[s+2]+=c.z;n[o]+=c.x;n[o+1]+=c.y;n[o+2]+=c.z;n[u]+=c.x;n[u+1]+=c.y;n[u+2]+=c.z}}}else{for(var r=0,i=t.length;r<i;r+=9){a.fromArray(t,r);f.fromArray(t,r+3);l.fromArray(t,r+6);c.subVectors(l,f);h.subVectors(a,f);c.cross(h);n[r]=c.x;n[r+1]=c.y;n[r+2]=c.z;n[r+3]=c.x;n[r+4]=c.y;n[r+5]=c.z;n[r+6]=c.x;n[r+7]=c.y;n[r+8]=c.z}}this.normalizeNormals();e.normal.needsUpdate=true}},computeTangents:function(){function L(e,n,i){f.fromArray(t,e*3);l.fromArray(t,n*3);c.fromArray(t,i*3);h.fromArray(r,e*2);p.fromArray(r,n*2);d.fromArray(r,i*2);v=l.x-f.x;m=c.x-f.x;g=l.y-f.y;y=c.y-f.y;b=l.z-f.z;w=c.z-f.z;E=p.x-h.x;S=d.x-h.x;x=p.y-h.y;T=d.y-h.y;N=1/(E*T-S*x);C.set((T*v-x*m)*N,(T*g-x*y)*N,(T*b-x*w)*N);k.set((E*m-S*v)*N,(E*y-S*g)*N,(E*w-S*b)*N);o[e].add(C);o[n].add(C);o[i].add(C);u[e].add(k);u[n].add(k);u[i].add(k)}function $(e){U.fromArray(n,e*3);z.copy(U);X=o[e];q.copy(X);q.sub(U.multiplyScalar(U.dot(X))).normalize();R.crossVectors(z,X);V=R.dot(u[e]);W=V<0?-1:1;s[e*4]=q.x;s[e*4+1]=q.y;s[e*4+2]=q.z;s[e*4+3]=W}if(this.attributes.index===undefined||this.attributes.position===undefined||this.attributes.normal===undefined||this.attributes.uv===undefined){console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var e=this.attributes.index.array;var t=this.attributes.position.array;var n=this.attributes.normal.array;var r=this.attributes.uv.array;var i=t.length/3;if(this.attributes.tangent===undefined){this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*i),4))}var s=this.attributes.tangent.array;var o=[],u=[];for(var a=0;a<i;a++){o[a]=new THREE.Vector3;u[a]=new THREE.Vector3}var f=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector2,p=new THREE.Vector2,d=new THREE.Vector2,v,m,g,y,b,w,E,S,x,T,N;var C=new THREE.Vector3,k=new THREE.Vector3;var A,O;var M,_;var D,P,H;if(this.drawcalls.length===0){this.addDrawCall(0,e.length,0)}var B=this.drawcalls;for(M=0,_=B.length;M<_;++M){var j=B[M].start;var F=B[M].count;var I=B[M].index;for(A=j,O=j+F;A<O;A+=3){D=I+e[A];P=I+e[A+1];H=I+e[A+2];L(D,P,H)}}var q=new THREE.Vector3,R=new THREE.Vector3;var U=new THREE.Vector3,z=new THREE.Vector3;var W,X,V;for(M=0,_=B.length;M<_;++M){var j=B[M].start;var F=B[M].count;var I=B[M].index;for(A=j,O=j+F;A<O;A+=3){D=I+e[A];P=I+e[A+1];H=I+e[A+2];$(D);$(P);$(H)}}},computeOffsets:function(e){var t=e;if(e===undefined)t=65535;var n=Date.now();var r=this.attributes.index.array;var i=this.attributes.position.array;var s=i.length/3;var o=r.length/3;var u=new Uint16Array(r.length);var a=0;var f=0;var l=[{start:0,count:0,index:0}];var c=l[0];var h=0;var p=0;var d=new Int32Array(6);var v=new Int32Array(i.length);var m=new Int32Array(i.length);for(var g=0;g<i.length;g++){v[g]=-1;m[g]=-1}for(var y=0;y<o;y++){p=0;for(var b=0;b<3;b++){var w=r[y*3+b];if(v[w]==-1){d[b*2]=w;d[b*2+1]=-1;p++}else if(v[w]<c.index){d[b*2]=w;d[b*2+1]=-1;h++}else{d[b*2]=w;d[b*2+1]=v[w]}}var E=f+p;if(E>c.index+t){var S={start:a,count:0,index:f};l.push(S);c=S;for(var x=0;x<6;x+=2){var T=d[x+1];if(T>-1&&T<c.index)d[x+1]=-1}}for(var x=0;x<6;x+=2){var w=d[x];var T=d[x+1];if(T===-1)T=f++;v[w]=T;m[T]=w;u[a++]=T-c.index;c.count++}}this.reorderBuffers(u,m,f);this.offsets=l;return l},merge:function(){console.log("BufferGeometry.merge(): TODO")},normalizeNormals:function(){var e=this.attributes.normal.array;var t,n,r,i;for(var s=0,o=e.length;s<o;s+=3){t=e[s];n=e[s+1];r=e[s+2];i=1/Math.sqrt(t*t+n*n+r*r);e[s]*=i;e[s+1]*=i;e[s+2]*=i}},reorderBuffers:function(e,t,n){var r={};for(var i in this.attributes){if(i=="index")continue;var s=this.attributes[i].array;r[i]=new s.constructor(this.attributes[i].itemSize*n)}for(var o=0;o<n;o++){var u=t[o];for(var i in this.attributes){if(i=="index")continue;var a=this.attributes[i].array;var f=this.attributes[i].itemSize;var l=r[i];for(var c=0;c<f;c++)l[o*f+c]=a[u*f+c]}}this.attributes["index"].array=e;for(var i in this.attributes){if(i=="index")continue;this.attributes[i].array=r[i];this.attributes[i].numItems=this.attributes[i].itemSize*n}},toJSON:function(){var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}};var t=this.attributes;var n=this.offsets;var r=this.boundingSphere;for(var i in t){var s=t[i];var o=[],u=s.array;for(var a=0,f=u.length;a<f;a++){o[a]=u[a]}e.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:o}}if(n.length>0){e.data.offsets=JSON.parse(JSON.stringify(n))}if(r!==null){e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}}return e},clone:function(){var e=new THREE.BufferGeometry;for(var t in this.attributes){var n=this.attributes[t];e.addAttribute(t,n.clone())}for(var r=0,i=this.offsets.length;r<i;r++){var s=this.offsets[r];e.offsets.push({start:s.start,index:s.index,count:s.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype);THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.dynamic=true;this.verticesNeedUpdate=false;this.elementsNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.tangentsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false};THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t=(new THREE.Matrix3).getNormalMatrix(e);for(var n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var s=this.faces[n];s.normal.applyMatrix3(t).normalize();for(var o=0,u=s.vertexNormals.length;o<u;o++){s.vertexNormals[o].applyMatrix3(t).normalize()}}if(this.boundingBox instanceof THREE.Box3){this.computeBoundingBox()}if(this.boundingSphere instanceof THREE.Sphere){this.computeBoundingSphere()}},fromBufferGeometry:function(e){var t=this;var n=e.attributes;var r=n.position.array;var i=n.index!==undefined?n.index.array:undefined;var s=n.normal!==undefined?n.normal.array:undefined;var o=n.color!==undefined?n.color.array:undefined;var u=n.uv!==undefined?n.uv.array:undefined;var a=[];var f=[];for(var l=0,c=0;l<r.length;l+=3,c+=2){t.vertices.push(new THREE.Vector3(r[l],r[l+1],r[l+2]));if(s!==undefined){a.push(new THREE.Vector3(s[l],s[l+1],s[l+2]))}if(o!==undefined){t.colors.push(new THREE.Color(o[l],o[l+1],o[l+2]))}if(u!==undefined){f.push(new THREE.Vector2(u[c],u[c+1]))}}var h=function(e,n,r){var i=s!==undefined?[a[e].clone(),a[n].clone(),a[r].clone()]:[];var u=o!==undefined?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[];t.faces.push(new THREE.Face3(e,n,r,i,u));t.faceVertexUvs[0].push([f[e],f[n],f[r]])};if(i!==undefined){for(var l=0;l<i.length;l+=3){h(i[l],i[l+1],i[l+2])}}else{for(var l=0;l<r.length/3;l+=3){h(l,l+1,l+2)}}this.computeFaceNormals();if(e.boundingBox!==null){this.boundingBox=e.boundingBox.clone()}if(e.boundingSphere!==null){this.boundingSphere=e.boundingSphere.clone()}return this},center:function(){this.computeBoundingBox();var e=new THREE.Vector3;e.addVectors(this.boundingBox.min,this.boundingBox.max);e.multiplyScalar(-.5);this.applyMatrix((new THREE.Matrix4).makeTranslation(e.x,e.y,e.z));this.computeBoundingBox();return e},computeFaceNormals:function(){var e=new THREE.Vector3,t=new THREE.Vector3;for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];var s=this.vertices[i.a];var o=this.vertices[i.b];var u=this.vertices[i.c];e.subVectors(u,o);t.subVectors(s,o);e.cross(t);e.normalize();i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,s,o;o=new Array(this.vertices.length);for(t=0,n=this.vertices.length;t<n;t++){o[t]=new THREE.Vector3}if(e){var u,a,f,l;var c=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3,v=new THREE.Vector3;for(r=0,i=this.faces.length;r<i;r++){s=this.faces[r];u=this.vertices[s.a];a=this.vertices[s.b];f=this.vertices[s.c];c.subVectors(f,a);h.subVectors(u,a);c.cross(h);o[s.a].add(c);o[s.b].add(c);o[s.c].add(c)}}else{for(r=0,i=this.faces.length;r<i;r++){s=this.faces[r];o[s.a].add(s.normal);o[s.b].add(s.normal);o[s.c].add(s.normal)}}for(t=0,n=this.vertices.length;t<n;t++){o[t].normalize()}for(r=0,i=this.faces.length;r<i;r++){s=this.faces[r];s.vertexNormals[0]=o[s.a].clone();s.vertexNormals[1]=o[s.b].clone();s.vertexNormals[2]=o[s.c].clone()}},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n];if(!i.__originalFaceNormal){i.__originalFaceNormal=i.normal.clone()}else{i.__originalFaceNormal.copy(i.normal)}if(!i.__originalVertexNormals)i.__originalVertexNormals=[];for(e=0,t=i.vertexNormals.length;e<t;e++){if(!i.__originalVertexNormals[e]){i.__originalVertexNormals[e]=i.vertexNormals[e].clone()}else{i.__originalVertexNormals[e].copy(i.vertexNormals[e])}}}var s=new THREE.Geometry;s.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals;var u=this.morphNormals[e].vertexNormals;var a,f;for(n=0,r=this.faces.length;n<r;n++){a=new THREE.Vector3;f={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3};o.push(a);u.push(f)}}var l=this.morphNormals[e];s.vertices=this.morphTargets[e].vertices;s.computeFaceNormals();s.computeVertexNormals();var a,f;for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n];a=l.faceNormals[n];f=l.vertexNormals[n];a.copy(i.normal);f.a.copy(i.vertexNormals[0]);f.b.copy(i.vertexNormals[1]);f.c.copy(i.vertexNormals[2])}}for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n];i.normal=i.__originalFaceNormal;i.vertexNormals=i.__originalVertexNormals}},computeTangents:function(){function B(e,t,n,r,i,s,o){f=e.vertices[t];l=e.vertices[n];c=e.vertices[r];h=a[i];p=a[s];d=a[o];v=l.x-f.x;m=c.x-f.x;g=l.y-f.y;y=c.y-f.y;b=l.z-f.z;w=c.z-f.z;E=p.x-h.x;S=d.x-h.x;x=p.y-h.y;T=d.y-h.y;N=1/(E*T-S*x);O.set((T*v-x*m)*N,(T*g-x*y)*N,(T*b-x*w)*N);M.set((E*m-S*v)*N,(E*y-S*g)*N,(E*w-S*b)*N);L[t].add(O);L[n].add(O);L[r].add(O);A[t].add(M);A[n].add(M);A[r].add(M)}var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L=[],A=[],O=new THREE.Vector3,M=new THREE.Vector3,_=new THREE.Vector3,D=new THREE.Vector3,P=new THREE.Vector3,H;for(n=0,r=this.vertices.length;n<r;n++){L[n]=new THREE.Vector3;A[n]=new THREE.Vector3}for(e=0,t=this.faces.length;e<t;e++){u=this.faces[e];a=this.faceVertexUvs[0][e];B(this,u.a,u.b,u.c,0,1,2)}var j=["a","b","c","d"];for(e=0,t=this.faces.length;e<t;e++){u=this.faces[e];for(i=0;i<Math.min(u.vertexNormals.length,3);i++){P.copy(u.vertexNormals[i]);o=u[j[i]];C=L[o];_.copy(C);_.sub(P.multiplyScalar(P.dot(C))).normalize();D.crossVectors(u.vertexNormals[i],C);k=D.dot(A[o]);H=k<0?-1:1;u.vertexTangents[i]=new THREE.Vector4(_.x,_.y,_.z,H)}}this.hasTangents=true},computeLineDistances:function(){var e=0;var t=this.vertices;for(var n=0,r=t.length;n<r;n++){if(n>0){e+=t[n].distanceTo(t[n-1])}this.lineDistances[n]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere}this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e instanceof THREE.Geometry===false){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,i=this.vertices.length,s=this.vertices,o=e.vertices,u=this.faces,a=e.faces,f=this.faceVertexUvs[0],l=e.faceVertexUvs[0];if(n===undefined)n=0;if(t!==undefined){r=(new THREE.Matrix3).getNormalMatrix(t)}for(var c=0,h=o.length;c<h;c++){var p=o[c];var d=p.clone();if(t!==undefined)d.applyMatrix4(t);s.push(d)}for(c=0,h=a.length;c<h;c++){var v=a[c],m,g,y,b=v.vertexNormals,w=v.vertexColors;m=new THREE.Face3(v.a+i,v.b+i,v.c+i);m.normal.copy(v.normal);if(r!==undefined){m.normal.applyMatrix3(r).normalize()}for(var E=0,S=b.length;E<S;E++){g=b[E].clone();if(r!==undefined){g.applyMatrix3(r).normalize()}m.vertexNormals.push(g)}m.color.copy(v.color);for(var E=0,S=w.length;E<S;E++){y=w[E];m.vertexColors.push(y.clone())}m.materialIndex=v.materialIndex+n;u.push(m)}for(c=0,h=l.length;c<h;c++){var x=l[c],T=[];if(x===undefined){continue}for(var E=0,S=x.length;E<S;E++){T.push(new THREE.Vector2(x[E].x,x[E].y))}f.push(T)}},mergeVertices:function(){var e={};var t=[],n=[];var r,i;var s=4;var o=Math.pow(10,s);var u,a,f;var l,c,h,p,d;for(u=0,a=this.vertices.length;u<a;u++){r=this.vertices[u];i=Math.round(r.x*o)+"_"+Math.round(r.y*o)+"_"+Math.round(r.z*o);if(e[i]===undefined){e[i]=u;t.push(this.vertices[u]);n[u]=t.length-1}else{n[u]=n[e[i]]}}var v=[];for(u=0,a=this.faces.length;u<a;u++){f=this.faces[u];f.a=n[f.a];f.b=n[f.b];f.c=n[f.c];l=[f.a,f.b,f.c];var m=-1;for(var g=0;g<3;g++){if(l[g]==l[(g+1)%3]){m=g;v.push(u);break}}}for(u=v.length-1;u>=0;u--){var y=v[u];this.faces.splice(y,1);for(h=0,p=this.faceVertexUvs.length;h<p;h++){this.faceVertexUvs[h].splice(y,1)}}var b=this.vertices.length-t.length;this.vertices=t;return b},toJSON:function(){function N(e,t,n){return n?e|1<<t:e&~(1<<t)}function C(e){var t=e.x.toString()+e.y.toString()+e.z.toString();if(a[t]!==undefined){return a[t]}a[t]=u.length/3;u.push(e.x,e.y,e.z);return a[t]}function k(e){var t=e.r.toString()+e.g.toString()+e.b.toString();if(l[t]!==undefined){return l[t]}l[t]=f.length;f.push(e.getHex());return l[t]}function L(e){var t=e.x.toString()+e.y.toString();if(h[t]!==undefined){return h[t]}h[t]=c.length/2;c.push(e.x,e.y);return h[t]}var e={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(this.name!=="")e.name=this.name;if(this.parameters!==undefined){var t=this.parameters;for(var n in t){if(t[n]!==undefined)e[n]=t[n]}return e}var r=[];for(var i=0;i<this.vertices.length;i++){var s=this.vertices[i];r.push(s.x,s.y,s.z)}var o=[];var u=[];var a={};var f=[];var l={};var c=[];var h={};for(var i=0;i<this.faces.length;i++){var p=this.faces[i];var d=false;var v=false;var m=this.faceVertexUvs[0][i]!==undefined;var g=p.normal.length()>0;var y=p.vertexNormals.length>0;var b=p.color.r!==1||p.color.g!==1||p.color.b!==1;var w=p.vertexColors.length>0;var E=0;E=N(E,0,0);E=N(E,1,d);E=N(E,2,v);E=N(E,3,m);E=N(E,4,g);E=N(E,5,y);E=N(E,6,b);E=N(E,7,w);o.push(E);o.push(p.a,p.b,p.c);if(m){var S=this.faceVertexUvs[0][i];o.push(L(S[0]),L(S[1]),L(S[2]))}if(g){o.push(C(p.normal))}if(y){var x=p.vertexNormals;o.push(C(x[0]),C(x[1]),C(x[2]))}if(b){o.push(k(p.color))}if(w){var T=p.vertexColors;o.push(k(T[0]),k(T[1]),k(T[2]))}}e.data={};e.data.vertices=r;e.data.normals=u;if(f.length>0)e.data.colors=f;if(c.length>0)e.data.uvs=[c];e.data.faces=o;return e},clone:function(){var e=new THREE.Geometry;var t=this.vertices;for(var n=0,r=t.length;n<r;n++){e.vertices.push(t[n].clone())}var i=this.faces;for(var n=0,r=i.length;n<r;n++){e.faces.push(i[n].clone())}var s=this.faceVertexUvs[0];for(var n=0,r=s.length;n<r;n++){var o=s[n],u=[];for(var a=0,f=o.length;a<f;a++){u.push(new THREE.Vector2(o[a].x,o[a].y))}e.faceVertexUvs[0].push(u)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype);THREE.GeometryIdCount=0;THREE.Camera=function(){THREE.Object3D.call(this);this.type="Camera";this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Vector3;this.getWorldQuaternion(e);return n.set(0,0,-1).applyQuaternion(e)}}();THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up);this.quaternion.setFromRotationMatrix(e)}}();THREE.Camera.prototype.clone=function(e){if(e===undefined)e=new THREE.Camera;THREE.Object3D.prototype.clone.call(this,e);e.matrixWorldInverse.copy(this.matrixWorldInverse);e.projectionMatrix.copy(this.projectionMatrix);return e};THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this);this.type="CubeCamera";var r=90,i=1;var s=new THREE.PerspectiveCamera(r,i,e,t);s.up.set(0,-1,0);s.lookAt(new THREE.Vector3(1,0,0));this.add(s);var o=new THREE.PerspectiveCamera(r,i,e,t);o.up.set(0,-1,0);o.lookAt(new THREE.Vector3(-1,0,0));this.add(o);var u=new THREE.PerspectiveCamera(r,i,e,t);u.up.set(0,0,1);u.lookAt(new THREE.Vector3(0,1,0));this.add(u);var a=new THREE.PerspectiveCamera(r,i,e,t);a.up.set(0,0,-1);a.lookAt(new THREE.Vector3(0,-1,0));this.add(a);var f=new THREE.PerspectiveCamera(r,i,e,t);f.up.set(0,-1,0);f.lookAt(new THREE.Vector3(0,0,1));this.add(f);var l=new THREE.PerspectiveCamera(r,i,e,t);l.up.set(0,-1,0);l.lookAt(new THREE.Vector3(0,0,-1));this.add(l);this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(e,t){var n=this.renderTarget;var r=n.generateMipmaps;n.generateMipmaps=false;n.activeCubeFace=0;e.render(t,s,n);n.activeCubeFace=1;e.render(t,o,n);n.activeCubeFace=2;e.render(t,u,n);n.activeCubeFace=3;e.render(t,a,n);n.activeCubeFace=4;e.render(t,f,n);n.generateMipmaps=r;n.activeCubeFace=5;e.render(t,l,n)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.OrthographicCamera=function(e,t,n,r,i,s){THREE.Camera.call(this);this.type="OrthographicCamera";this.zoom=1;this.left=e;this.right=t;this.top=n;this.bottom=r;this.near=i!==undefined?i:.1;this.far=s!==undefined?s:2e3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom);var t=(this.top-this.bottom)/(2*this.zoom);var n=(this.right+this.left)/2;var r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)};THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;THREE.Camera.prototype.clone.call(this,e);e.zoom=this.zoom;e.left=this.left;e.right=this.right;e.top=this.top;e.bottom=this.bottom;e.near=this.near;e.far=this.far;e.projectionMatrix.copy(this.projectionMatrix);return e};THREE.PerspectiveCamera=function(e,t,n,r){THREE.Camera.call(this);this.type="PerspectiveCamera";this.zoom=1;this.fov=e!==undefined?e:50;this.aspect=t!==undefined?t:1;this.near=n!==undefined?n:.1;this.far=r!==undefined?r:2e3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(e,t){if(t===undefined)t=24;this.fov=2*THREE.Math.radToDeg(Math.atan(t/(e*2)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,s){this.fullWidth=e;this.fullHeight=t;this.x=n;this.y=r;this.width=i;this.height=s;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(THREE.Math.degToRad(this.fov)*.5)/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight;var n=Math.tan(THREE.Math.degToRad(e*.5))*this.near;var r=-n;var i=t*r;var s=t*n;var o=Math.abs(s-i);var u=Math.abs(n-r);this.projectionMatrix.makeFrustum(i+this.x*o/this.fullWidth,i+(this.x+this.width)*o/this.fullWidth,n-(this.y+this.height)*u/this.fullHeight,n-this.y*u/this.fullHeight,this.near,this.far)}else{this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)}};THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;THREE.Camera.prototype.clone.call(this,e);e.zoom=this.zoom;e.fov=this.fov;e.aspect=this.aspect;e.near=this.near;e.far=this.far;e.projectionMatrix.copy(this.projectionMatrix);return e};THREE.Light=function(e){THREE.Object3D.call(this);this.type="Light";this.color=new THREE.Color(e)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(e){if(e===undefined)e=new THREE.Light;THREE.Object3D.prototype.clone.call(this,e);e.color.copy(this.color);return e};THREE.AmbientLight=function(e){THREE.Light.call(this,e);this.type="AmbientLight"};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,e);return e};THREE.AreaLight=function(e,t){THREE.Light.call(this,e);this.type="AreaLight";this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=t!==undefined?t:1;this.width=1;this.height=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e);this.type="DirectionalLight";this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=t!==undefined?t:1;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5e3;this.shadowCameraLeft=-500;this.shadowCameraRight=500;this.shadowCameraTop=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowCascade=false;this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,.99,.998];this.shadowCascadeFarZ=[.99,.998,1];this.shadowCascadeArray=[];this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,e);e.target=this.target.clone();e.intensity=this.intensity;e.castShadow=this.castShadow;e.onlyShadow=this.onlyShadow;e.shadowCameraNear=this.shadowCameraNear;e.shadowCameraFar=this.shadowCameraFar;e.shadowCameraLeft=this.shadowCameraLeft;e.shadowCameraRight=this.shadowCameraRight;e.shadowCameraTop=this.shadowCameraTop;e.shadowCameraBottom=this.shadowCameraBottom;e.shadowCameraVisible=this.shadowCameraVisible;e.shadowBias=this.shadowBias;e.shadowDarkness=this.shadowDarkness;e.shadowMapWidth=this.shadowMapWidth;e.shadowMapHeight=this.shadowMapHeight;e.shadowCascade=this.shadowCascade;e.shadowCascadeOffset.copy(this.shadowCascadeOffset);e.shadowCascadeCount=this.shadowCascadeCount;e.shadowCascadeBias=this.shadowCascadeBias.slice(0);e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0);e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0);e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0);e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0);return e};THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e);this.type="HemisphereLight";this.position.set(0,100,0);this.groundColor=new THREE.Color(t);this.intensity=n!==undefined?n:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;THREE.Light.prototype.clone.call(this,e);e.groundColor.copy(this.groundColor);e.intensity=this.intensity;return e};THREE.PointLight=function(e,t,n){THREE.Light.call(this,e);this.type="PointLight";this.intensity=t!==undefined?t:1;this.distance=n!==undefined?n:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;THREE.Light.prototype.clone.call(this,e);e.intensity=this.intensity;e.distance=this.distance;return e};THREE.SpotLight=function(e,t,n,r,i){THREE.Light.call(this,e);this.type="SpotLight";this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=t!==undefined?t:1;this.distance=n!==undefined?n:0;this.angle=r!==undefined?r:Math.PI/3;this.exponent=i!==undefined?i:10;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5e3;this.shadowCameraFov=50;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,e);e.target=this.target.clone();e.intensity=this.intensity;e.distance=this.distance;e.angle=this.angle;e.exponent=this.exponent;e.castShadow=this.castShadow;e.onlyShadow=this.onlyShadow;e.shadowCameraNear=this.shadowCameraNear;e.shadowCameraFar=this.shadowCameraFar;e.shadowCameraFov=this.shadowCameraFov;e.shadowCameraVisible=this.shadowCameraVisible;e.shadowBias=this.shadowBias;e.shadowDarkness=this.shadowDarkness;e.shadowMapWidth=this.shadowMapWidth;e.shadowMapHeight=this.shadowMapHeight;return e};THREE.Cache=function(){this.files={}};THREE.Cache.prototype={constructor:THREE.Cache,add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};THREE.Loader=function(e){this.showStatus=e;this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null;this.imageLoader=new THREE.ImageLoader;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:undefined,addStatusElement:function(){var e=document.createElement("div");e.style.position="absolute";e.style.right="0px";e.style.top="0px";e.style.fontSize="0.8em";e.style.textAlign="left";e.style.background="rgba(0,0,0,0.25)";e.style.color="#fff";e.style.width="120px";e.style.padding="0.5em 0.5em 0.5em 0.5em";e.style.zIndex=1e3;e.innerHTML="Loading ...";return e},updateProgress:function(e){var t="Loaded ";if(e.total){t+=(100*e.loaded/e.total).toFixed(0)+"%"}else{t+=(e.loaded/1024).toFixed(2)+" KB"}this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");if(t.length===1)return"./";t.pop();return t.join("/")+"/"},initMaterials:function(e,t){var n=[];for(var r=0;r<e.length;++r){n[r]=this.createMaterial(e[r],t)}return n},needsTangents:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof THREE.ShaderMaterial)return true}return false},createMaterial:function(e,t){function r(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function i(e,i,s,o,u,a,f){var l=t+s;var c;var h=THREE.Loader.Handlers.get(l);if(h!==null){c=h.load(l)}else{c=new THREE.Texture;h=n.imageLoader;h.crossOrigin=n.crossOrigin;h.load(l,function(e){if(THREE.Math.isPowerOfTwo(e.width)===false||THREE.Math.isPowerOfTwo(e.height)===false){var t=r(e.width);var n=r(e.height);var i=document.createElement("canvas");i.width=t;i.height=n;var s=i.getContext("2d");s.drawImage(e,0,0,t,n);c.image=i}else{c.image=e}c.needsUpdate=true})}c.sourceFile=s;if(o){c.repeat.set(o[0],o[1]);if(o[0]!==1)c.wrapS=THREE.RepeatWrapping;if(o[1]!==1)c.wrapT=THREE.RepeatWrapping}if(u){c.offset.set(u[0],u[1])}if(a){var p={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};if(p[a[0]]!==undefined)c.wrapS=p[a[0]];if(p[a[1]]!==undefined)c.wrapT=p[a[1]]}if(f){c.anisotropy=f}e[i]=c}function s(e){return(e[0]*255<<16)+(e[1]*255<<8)+e[2]*255}var n=this;var o="MeshLambertMaterial";var u={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:false};if(e.shading){var a=e.shading.toLowerCase();if(a==="phong")o="MeshPhongMaterial";else if(a==="basic")o="MeshBasicMaterial"}if(e.blending!==undefined&&THREE[e.blending]!==undefined){u.blending=THREE[e.blending]}if(e.transparent!==undefined||e.opacity<1){u.transparent=e.transparent}if(e.depthTest!==undefined){u.depthTest=e.depthTest}if(e.depthWrite!==undefined){u.depthWrite=e.depthWrite}if(e.visible!==undefined){u.visible=e.visible}if(e.flipSided!==undefined){u.side=THREE.BackSide}if(e.doubleSided!==undefined){u.side=THREE.DoubleSide}if(e.wireframe!==undefined){u.wireframe=e.wireframe}if(e.vertexColors!==undefined){if(e.vertexColors==="face"){u.vertexColors=THREE.FaceColors}else if(e.vertexColors){u.vertexColors=THREE.VertexColors}}if(e.colorDiffuse){u.color=s(e.colorDiffuse)}else if(e.DbgColor){u.color=e.DbgColor}if(e.colorSpecular){u.specular=s(e.colorSpecular)}if(e.colorAmbient){u.ambient=s(e.colorAmbient)}if(e.colorEmissive){u.emissive=s(e.colorEmissive)}if(e.transparency){u.opacity=e.transparency}if(e.specularCoef){u.shininess=e.specularCoef}if(e.mapDiffuse&&t){i(u,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy)}if(e.mapLight&&t){i(u,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy)}if(e.mapBump&&t){i(u,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy)}if(e.mapNormal&&t){i(u,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy)}if(e.mapSpecular&&t){i(u,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy)}if(e.mapAlpha&&t){i(u,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy)}if(e.mapBumpScale){u.bumpScale=e.mapBumpScale}if(e.mapNormal){var f=THREE.ShaderLib["normalmap"];var l=THREE.UniformsUtils.clone(f.uniforms);l["tNormal"].value=u.normalMap;if(e.mapNormalFactor){l["uNormalScale"].value.set(e.mapNormalFactor,e.mapNormalFactor)}if(u.map){l["tDiffuse"].value=u.map;l["enableDiffuse"].value=true}if(u.specularMap){l["tSpecular"].value=u.specularMap;l["enableSpecular"].value=true}if(u.lightMap){l["tAO"].value=u.lightMap;l["enableAO"].value=true}l["diffuse"].value.setHex(u.color);l["specular"].value.setHex(u.specular);l["ambient"].value.setHex(u.ambient);l["shininess"].value=u.shininess;if(u.opacity!==undefined){l["opacity"].value=u.opacity}var c={fragmentShader:f.fragmentShader,vertexShader:f.vertexShader,uniforms:l,lights:true,fog:true};var h=new THREE.ShaderMaterial(c);if(u.transparent){h.transparent=true}}else{var h=new THREE[o](u)}if(e.DbgName!==undefined)h.name=e.DbgName;return h}};THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,n=this.handlers.length;t<n;t+=2){var r=this.handlers[t];var i=this.handlers[t+1];if(r.test(e)){return i}}return null}};THREE.XHRLoader=function(e){this.cache=new THREE.Cache;this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,r){var i=this;var s=i.cache.get(e);if(s!==undefined){if(t)t(s);return}var o=new XMLHttpRequest;o.open("GET",e,true);o.addEventListener("load",function(n){i.cache.add(e,this.response);if(t)t(this.response);i.manager.itemEnd(e)},false);if(n!==undefined){o.addEventListener("progress",function(e){n(e)},false)}if(r!==undefined){o.addEventListener("error",function(e){r(e)},false)}if(this.crossOrigin!==undefined)o.crossOrigin=this.crossOrigin;if(this.responseType!==undefined)o.responseType=this.responseType;o.send(null);i.manager.itemStart(e)},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}};THREE.ImageLoader=function(e){this.cache=new THREE.Cache;this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,r){var i=this;var s=i.cache.get(e);if(s!==undefined){t(s);return}var o=document.createElement("img");if(t!==undefined){o.addEventListener("load",function(n){i.cache.add(e,this);t(this);i.manager.itemEnd(e)},false)}if(n!==undefined){o.addEventListener("progress",function(e){n(e)},false)}if(r!==undefined){o.addEventListener("error",function(e){r(e)},false)}if(this.crossOrigin!==undefined)o.crossOrigin=this.crossOrigin;o.src=e;i.manager.itemStart(e);return o},setCrossOrigin:function(e){this.crossOrigin=e}};THREE.JSONLoader=function(e){THREE.Loader.call(this,e);this.withCredentials=false};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(e,t,n){var r=this;n=n&&typeof n==="string"?n:this.extractUrlBase(e);this.onLoadStart();this.loadAjaxJSON(this,e,t,n)};THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,n,r,i){var s=new XMLHttpRequest;var o=0;s.onreadystatechange=function(){if(s.readyState===s.DONE){if(s.status===200||s.status===0){if(s.responseText){var u=JSON.parse(s.responseText);if(u.metadata!==undefined&&u.metadata.type==="scene"){console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.');return}var a=e.parse(u,r);n(a.geometry,a.materials)}else{console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.')}e.onLoadComplete()}else{console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+s.status+")")}}else if(s.readyState===s.LOADING){if(i){if(o===0){o=s.getResponseHeader("Content-Length")}i({total:o,loaded:s.responseText.length})}}else if(s.readyState===s.HEADERS_RECEIVED){if(i!==undefined){o=s.getResponseHeader("Content-Length")}}};s.open("GET",t,true);s.withCredentials=this.withCredentials;s.send(null)};THREE.JSONLoader.prototype.parse=function(e,t){function s(t){function n(e,t){return e&1<<t}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_=e.faces,D=e.vertices,P=e.normals,H=e.colors,B=0;if(e.uvs!==undefined){for(i=0;i<e.uvs.length;i++){if(e.uvs[i].length)B++}for(i=0;i<B;i++){r.faceVertexUvs[i]=[]}}u=0;a=D.length;while(u<a){E=new THREE.Vector3;E.x=D[u++]*t;E.y=D[u++]*t;E.z=D[u++]*t;r.vertices.push(E)}u=0;a=_.length;while(u<a){p=_[u++];d=n(p,0);v=n(p,1);m=n(p,3);g=n(p,4);y=n(p,5);b=n(p,6);w=n(p,7);if(d){x=new THREE.Face3;x.a=_[u];x.b=_[u+1];x.c=_[u+3];T=new THREE.Face3;T.a=_[u+1];T.b=_[u+2];T.c=_[u+3];u+=4;if(v){h=_[u++];x.materialIndex=h;T.materialIndex=h}o=r.faces.length;if(m){for(i=0;i<B;i++){L=e.uvs[i];r.faceVertexUvs[i][o]=[];r.faceVertexUvs[i][o+1]=[];for(s=0;s<4;s++){c=_[u++];O=L[c*2];M=L[c*2+1];A=new THREE.Vector2(O,M);if(s!==2)r.faceVertexUvs[i][o].push(A);if(s!==0)r.faceVertexUvs[i][o+1].push(A)}}}if(g){l=_[u++]*3;x.normal.set(P[l++],P[l++],P[l]);T.normal.copy(x.normal)}if(y){for(i=0;i<4;i++){l=_[u++]*3;k=new THREE.Vector3(P[l++],P[l++],P[l]);if(i!==2)x.vertexNormals.push(k);if(i!==0)T.vertexNormals.push(k)}}if(b){f=_[u++];C=H[f];x.color.setHex(C);T.color.setHex(C)}if(w){for(i=0;i<4;i++){f=_[u++];C=H[f];if(i!==2)x.vertexColors.push(new THREE.Color(C));if(i!==0)T.vertexColors.push(new THREE.Color(C))}}r.faces.push(x);r.faces.push(T)}else{S=new THREE.Face3;S.a=_[u++];S.b=_[u++];S.c=_[u++];if(v){h=_[u++];S.materialIndex=h}o=r.faces.length;if(m){for(i=0;i<B;i++){L=e.uvs[i];r.faceVertexUvs[i][o]=[];for(s=0;s<3;s++){c=_[u++];O=L[c*2];M=L[c*2+1];A=new THREE.Vector2(O,M);r.faceVertexUvs[i][o].push(A)}}}if(g){l=_[u++]*3;S.normal.set(P[l++],P[l++],P[l])}if(y){for(i=0;i<3;i++){l=_[u++]*3;k=new THREE.Vector3(P[l++],P[l++],P[l]);S.vertexNormals.push(k)}}if(b){f=_[u++];S.color.setHex(H[f])}if(w){for(i=0;i<3;i++){f=_[u++];S.vertexColors.push(new THREE.Color(H[f]))}}r.faces.push(S)}}}function o(){var t=e.influencesPerVertex!==undefined?e.influencesPerVertex:2;if(e.skinWeights){for(var n=0,i=e.skinWeights.length;n<i;n+=t){var s=e.skinWeights[n];var o=t>1?e.skinWeights[n+1]:0;var u=t>2?e.skinWeights[n+2]:0;var a=t>3?e.skinWeights[n+3]:0;r.skinWeights.push(new THREE.Vector4(s,o,u,a))}}if(e.skinIndices){for(var n=0,i=e.skinIndices.length;n<i;n+=t){var f=e.skinIndices[n];var l=t>1?e.skinIndices[n+1]:0;var c=t>2?e.skinIndices[n+2]:0;var h=t>3?e.skinIndices[n+3]:0;r.skinIndices.push(new THREE.Vector4(f,l,c,h))}}r.bones=e.bones;if(r.bones&&r.bones.length>0&&(r.skinWeights.length!==r.skinIndices.length||r.skinIndices.length!==r.vertices.length)){console.warn("When skinning, number of vertices ("+r.vertices.length+"), skinIndices ("+r.skinIndices.length+"), and skinWeights ("+r.skinWeights.length+") should match.")}r.animation=e.animation;r.animations=e.animations}function u(t){if(e.morphTargets!==undefined){var n,i,s,o,u,a;for(n=0,i=e.morphTargets.length;n<i;n++){r.morphTargets[n]={};r.morphTargets[n].name=e.morphTargets[n].name;r.morphTargets[n].vertices=[];u=r.morphTargets[n].vertices;a=e.morphTargets[n].vertices;for(s=0,o=a.length;s<o;s+=3){var f=new THREE.Vector3;f.x=a[s]*t;f.y=a[s+1]*t;f.z=a[s+2]*t;u.push(f)}}}if(e.morphColors!==undefined){var n,i,l,c,h,p,d;for(n=0,i=e.morphColors.length;n<i;n++){r.morphColors[n]={};r.morphColors[n].name=e.morphColors[n].name;r.morphColors[n].colors=[];h=r.morphColors[n].colors;p=e.morphColors[n].colors;for(l=0,c=p.length;l<c;l+=3){d=new THREE.Color(16755200);d.setRGB(p[l],p[l+1],p[l+2]);h.push(d)}}}}var n=this,r=new THREE.Geometry,i=e.scale!==undefined?1/e.scale:1;s(i);o();u(i);r.computeFaceNormals();r.computeBoundingSphere();if(e.materials===undefined||e.materials.length===0){return{geometry:r}}else{var a=this.initMaterials(e.materials,t);if(this.needsTangents(a)){r.computeTangents()}return{geometry:r,materials:a}}};THREE.LoadingManager=function(e,t,n){var r=this;var i=0,s=0;this.onLoad=e;this.onProgress=t;this.onError=n;this.itemStart=function(e){s++};this.itemEnd=function(e){i++;if(r.onProgress!==undefined){r.onProgress(e,i,s)}if(i===s&&r.onLoad!==undefined){r.onLoad()}}};THREE.DefaultLoadingManager=new THREE.LoadingManager;THREE.BufferGeometryLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,n,r){var i=this;var s=new THREE.XHRLoader;s.setCrossOrigin(this.crossOrigin);s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry;var n=e.attributes;for(var r in n){var i=n[r];var s=new self[i.type](i.array);t.addAttribute(r,new THREE.BufferAttribute(s,i.itemSize))}var o=e.offsets;if(o!==undefined){t.offsets=JSON.parse(JSON.stringify(o))}var u=e.boundingSphere;if(u!==undefined){var a=new THREE.Vector3;if(u.center!==undefined){a.fromArray(u.center)}t.boundingSphere=new THREE.Sphere(a,u.radius)}return t}};THREE.MaterialLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,n,r){var i=this;var s=new THREE.XHRLoader;s.setCrossOrigin(this.crossOrigin);s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(e.color!==undefined)t.color.setHex(e.color);if(e.ambient!==undefined)t.ambient.setHex(e.ambient);if(e.emissive!==undefined)t.emissive.setHex(e.emissive);if(e.specular!==undefined)t.specular.setHex(e.specular);if(e.shininess!==undefined)t.shininess=e.shininess;if(e.uniforms!==undefined)t.uniforms=e.uniforms;if(e.vertexShader!==undefined)t.vertexShader=e.vertexShader;if(e.fragmentShader!==undefined)t.fragmentShader=e.fragmentShader;if(e.vertexColors!==undefined)t.vertexColors=e.vertexColors;if(e.shading!==undefined)t.shading=e.shading;if(e.blending!==undefined)t.blending=e.blending;if(e.side!==undefined)t.side=e.side;if(e.opacity!==undefined)t.opacity=e.opacity;if(e.transparent!==undefined)t.transparent=e.transparent;if(e.wireframe!==undefined)t.wireframe=e.wireframe;if(e.materials!==undefined){for(var n=0,r=e.materials.length;n<r;n++){t.materials.push(this.parse(e.materials[n]))}}return t}};THREE.ObjectLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,r){var i=this;var s=new THREE.XHRLoader(i.manager);s.setCrossOrigin(this.crossOrigin);s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries);var n=this.parseMaterials(e.materials);var r=this.parseObject(e.object,t,n);return r},parseGeometries:function(e){var t={};if(e!==undefined){var n=new THREE.JSONLoader;var r=new THREE.BufferGeometryLoader;for(var i=0,s=e.length;i<s;i++){var o;var u=e[i];switch(u.type){case"PlaneGeometry":o=new THREE.PlaneGeometry(u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":o=new THREE.CircleGeometry(u.radius,u.segments);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded);break;case"SphereGeometry":o=new THREE.SphereGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(u.radius,u.detail);break;case"TorusGeometry":o=new THREE.TorusGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.p,u.q,u.heightScale);break;case"BufferGeometry":o=r.parse(u.data);break;case"Geometry":o=n.parse(u.data).geometry;break}o.uuid=u.uuid;if(u.name!==undefined)o.name=u.name;t[u.uuid]=o}}return t},parseMaterials:function(e){var t={};if(e!==undefined){var n=new THREE.MaterialLoader;for(var r=0,i=e.length;r<i;r++){var s=e[r];var o=n.parse(s);o.uuid=s.uuid;if(s.name!==undefined)o.name=s.name;t[s.uuid]=o}}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,r){var i;switch(t.type){case"Scene":i=new THREE.Scene;break;case"PerspectiveCamera":i=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":i=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new THREE.AmbientLight(t.color);break;case"DirectionalLight":i=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":i=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":i=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":i=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=n[t.geometry];var o=r[t.material];if(s===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry)}if(o===undefined){console.warn("THREE.ObjectLoader: Undefined material",t.material)}i=new THREE.Mesh(s,o);break;case"Line":var s=n[t.geometry];var o=r[t.material];if(s===undefined){console.warn("THREE.ObjectLoader: Undefined geometry",t.geometry)}if(o===undefined){console.warn("THREE.ObjectLoader: Undefined material",t.material)}i=new THREE.Line(s,o);break;case"Sprite":var o=r[t.material];if(o===undefined){console.warn("THREE.ObjectLoader: Undefined material",t.material)}i=new THREE.Sprite(o);break;case"Group":i=new THREE.Group;break;default:i=new THREE.Object3D}i.uuid=t.uuid;if(t.name!==undefined)i.name=t.name;if(t.matrix!==undefined){e.fromArray(t.matrix);e.decompose(i.position,i.quaternion,i.scale)}else{if(t.position!==undefined)i.position.fromArray(t.position);if(t.rotation!==undefined)i.rotation.fromArray(t.rotation);if(t.scale!==undefined)i.scale.fromArray(t.scale)}if(t.visible!==undefined)i.visible=t.visible;if(t.userData!==undefined)i.userData=t.userData;if(t.children!==undefined){for(var u in t.children){i.add(this.parseObject(t.children[u],n,r))}}return i}}()};THREE.TextureLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,n,r){var i=this;var s=new THREE.ImageLoader(i.manager);s.setCrossOrigin(this.crossOrigin);s.load(e,function(e){var n=new THREE.Texture(e);n.needsUpdate=true;if(t!==undefined){t(n)}},n,r)},setCrossOrigin:function(e){this.crossOrigin=e}};THREE.CompressedTextureLoader=function(){this._parser=null};THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,n){var r=this;var i=[];var s=new THREE.CompressedTexture;s.image=i;var o=new THREE.XHRLoader;o.setResponseType("arraybuffer");if(e instanceof Array){var u=0;var a=function(n){o.load(e[n],function(e){var o=r._parser(e,true);i[n]={width:o.width,height:o.height,format:o.format,mipmaps:o.mipmaps};u+=1;if(u===6){if(o.mipmapCount==1)s.minFilter=THREE.LinearFilter;s.format=o.format;s.needsUpdate=true;if(t)t(s)}})};for(var f=0,l=e.length;f<l;++f){a(f)}}else{o.load(e,function(e){var n=r._parser(e,true);if(n.isCubemap){var o=n.mipmaps.length/n.mipmapCount;for(var u=0;u<o;u++){i[u]={mipmaps:[]};for(var a=0;a<n.mipmapCount;a++){i[u].mipmaps.push(n.mipmaps[u*n.mipmapCount+a]);i[u].format=n.format;i[u].width=n.width;i[u].height=n.height}}}else{s.image.width=n.width;s.image.height=n.height;s.mipmaps=n.mipmaps}if(n.mipmapCount===1){s.minFilter=THREE.LinearFilter}s.format=n.format;s.needsUpdate=true;if(t)t(s)})}return s}};THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.type="Material";this.side=THREE.FrontSide;this.opacity=1;this.transparent=false;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthTest=true;this.depthWrite=true;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.alphaTest=0;this.overdraw=0;this.visible=true;this.needsUpdate=true};THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(e===undefined)return;for(var t in e){var n=e[t];if(n===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t in this){var r=this[t];if(r instanceof THREE.Color){r.set(n)}else if(r instanceof THREE.Vector3&&n instanceof THREE.Vector3){r.copy(n)}else if(t=="overdraw"){this[t]=Number(n)}else{this[t]=n}}}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};if(this.name!=="")e.name=this.name;if(this instanceof THREE.MeshBasicMaterial){e.color=this.color.getHex();if(this.vertexColors!==THREE.NoColors)e.vertexColors=this.vertexColors;if(this.blending!==THREE.NormalBlending)e.blending=this.blending;if(this.side!==THREE.FrontSide)e.side=this.side}else if(this instanceof THREE.MeshLambertMaterial){e.color=this.color.getHex();e.ambient=this.ambient.getHex();e.emissive=this.emissive.getHex();if(this.vertexColors!==THREE.NoColors)e.vertexColors=this.vertexColors;if(this.blending!==THREE.NormalBlending)e.blending=this.blending;if(this.side!==THREE.FrontSide)e.side=this.side}else if(this instanceof THREE.MeshPhongMaterial){e.color=this.color.getHex();e.ambient=this.ambient.getHex();e.emissive=this.emissive.getHex();e.specular=this.specular.getHex();e.shininess=this.shininess;if(this.vertexColors!==THREE.NoColors)e.vertexColors=this.vertexColors;if(this.blending!==THREE.NormalBlending)e.blending=this.blending;if(this.side!==THREE.FrontSide)e.side=this.side}else if(this instanceof THREE.MeshNormalMaterial){if(this.shading!==THREE.FlatShading)e.shading=this.shading;if(this.blending!==THREE.NormalBlending)e.blending=this.blending;if(this.side!==THREE.FrontSide)e.side=this.side}else if(this instanceof THREE.MeshDepthMaterial){if(this.blending!==THREE.NormalBlending)e.blending=this.blending;if(this.side!==THREE.FrontSide)e.side=this.side}else if(this instanceof THREE.ShaderMaterial){e.uniforms=this.uniforms;e.vertexShader=this.vertexShader;e.fragmentShader=this.fragmentShader}else if(this instanceof THREE.SpriteMaterial){e.color=this.color.getHex()}if(this.opacity<1)e.opacity=this.opacity;if(this.transparent!==false)e.transparent=this.transparent;if(this.wireframe!==false)e.wireframe=this.wireframe;return e},clone:function(e){if(e===undefined)e=new THREE.Material;e.name=this.name;e.side=this.side;e.opacity=this.opacity;e.transparent=this.transparent;e.blending=this.blending;e.blendSrc=this.blendSrc;e.blendDst=this.blendDst;e.blendEquation=this.blendEquation;e.depthTest=this.depthTest;e.depthWrite=this.depthWrite;e.polygonOffset=this.polygonOffset;e.polygonOffsetFactor=this.polygonOffsetFactor;e.polygonOffsetUnits=this.polygonOffsetUnits;e.alphaTest=this.alphaTest;e.overdraw=this.overdraw;e.visible=this.visible;return e},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Material.prototype);THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(e){THREE.Material.call(this);this.type="LineBasicMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.vertexColors=THREE.NoColors;this.fog=true;this.setValues(e)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.linewidth=this.linewidth;e.linecap=this.linecap;e.linejoin=this.linejoin;e.vertexColors=this.vertexColors;e.fog=this.fog;return e};THREE.LineDashedMaterial=function(e){THREE.Material.call(this);this.type="LineDashedMaterial";this.color=new THREE.Color(16777215);this.linewidth=1;this.scale=1;this.dashSize=3;this.gapSize=1;this.vertexColors=false;this.fog=true;this.setValues(e)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.linewidth=this.linewidth;e.scale=this.scale;e.dashSize=this.dashSize;e.gapSize=this.gapSize;e.vertexColors=this.vertexColors;e.fog=this.fog;return e};THREE.MeshBasicMaterial=function(e){THREE.Material.call(this);this.type="MeshBasicMaterial";this.color=new THREE.Color(16777215);this.map=null;this.lightMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.setValues(e)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.map=this.map;e.lightMap=this.lightMap;e.specularMap=this.specularMap;e.alphaMap=this.alphaMap;e.envMap=this.envMap;e.combine=this.combine;e.reflectivity=this.reflectivity;e.refractionRatio=this.refractionRatio;e.fog=this.fog;e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;e.wireframeLinecap=this.wireframeLinecap;e.wireframeLinejoin=this.wireframeLinejoin;e.vertexColors=this.vertexColors;e.skinning=this.skinning;e.morphTargets=this.morphTargets;return e};THREE.MeshLambertMaterial=function(e){THREE.Material.call(this);this.type="MeshLambertMaterial";this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.ambient.copy(this.ambient);e.emissive.copy(this.emissive);e.wrapAround=this.wrapAround;e.wrapRGB.copy(this.wrapRGB);e.map=this.map;e.lightMap=this.lightMap;e.specularMap=this.specularMap;e.alphaMap=this.alphaMap;e.envMap=this.envMap;e.combine=this.combine;e.reflectivity=this.reflectivity;e.refractionRatio=this.refractionRatio;e.fog=this.fog;e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;e.wireframeLinecap=this.wireframeLinecap;e.wireframeLinejoin=this.wireframeLinejoin;e.vertexColors=this.vertexColors;e.skinning=this.skinning;e.morphTargets=this.morphTargets;e.morphNormals=this.morphNormals;return e};THREE.MeshPhongMaterial=function(e){THREE.Material.call(this);this.type="MeshPhongMaterial";this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=false;this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(e)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.ambient.copy(this.ambient);e.emissive.copy(this.emissive);e.specular.copy(this.specular);e.shininess=this.shininess;e.metal=this.metal;e.wrapAround=this.wrapAround;e.wrapRGB.copy(this.wrapRGB);e.map=this.map;e.lightMap=this.lightMap;e.bumpMap=this.bumpMap;e.bumpScale=this.bumpScale;e.normalMap=this.normalMap;e.normalScale.copy(this.normalScale);e.specularMap=this.specularMap;e.alphaMap=this.alphaMap;e.envMap=this.envMap;e.combine=this.combine;e.reflectivity=this.reflectivity;e.refractionRatio=this.refractionRatio;e.fog=this.fog;e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;e.wireframeLinecap=this.wireframeLinecap;e.wireframeLinejoin=this.wireframeLinejoin;e.vertexColors=this.vertexColors;e.skinning=this.skinning;e.morphTargets=this.morphTargets;e.morphNormals=this.morphNormals;return e};THREE.MeshDepthMaterial=function(e){THREE.Material.call(this);this.type="MeshDepthMaterial";this.morphTargets=false;this.wireframe=false;this.wireframeLinewidth=1;this.setValues(e)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,e);e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;return e};THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e);this.type="MeshNormalMaterial";this.shading=THREE.FlatShading;this.wireframe=false;this.wireframeLinewidth=1;this.morphTargets=false;this.setValues(e)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,e);e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;return e};THREE.MeshFaceMaterial=function(e){this.uuid=THREE.Math.generateUUID();this.type="MeshFaceMaterial";this.materials=e instanceof Array?e:[]};THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]};for(var t=0,n=this.materials.length;t<n;t++){e.materials.push(this.materials[t].toJSON())}return e},clone:function(){var e=new THREE.MeshFaceMaterial;for(var t=0;t<this.materials.length;t++){e.materials.push(this.materials[t].clone())}return e}};THREE.PointCloudMaterial=function(e){THREE.Material.call(this);this.type="PointCloudMaterial";this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.vertexColors=THREE.NoColors;this.fog=true;this.setValues(e)};THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype);THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.map=this.map;e.size=this.size;e.sizeAttenuation=this.sizeAttenuation;e.vertexColors=this.vertexColors;e.fog=this.fog;return e};THREE.ParticleBasicMaterial=function(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(e)};THREE.ParticleSystemMaterial=function(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial.");return new THREE.PointCloudMaterial(e)};THREE.ShaderMaterial=function(e){THREE.Material.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.attributes=null;this.vertexShader="void main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n  gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=undefined;this.setValues(e)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,e);e.fragmentShader=this.fragmentShader;e.vertexShader=this.vertexShader;e.uniforms=THREE.UniformsUtils.clone(this.uniforms);e.attributes=this.attributes;e.defines=this.defines;e.shading=this.shading;e.wireframe=this.wireframe;e.wireframeLinewidth=this.wireframeLinewidth;e.fog=this.fog;e.lights=this.lights;e.vertexColors=this.vertexColors;e.skinning=this.skinning;e.morphTargets=this.morphTargets;e.morphNormals=this.morphNormals;return e};THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e);this.type="RawShaderMaterial"};THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype);THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;THREE.ShaderMaterial.prototype.clone.call(this,e);return e};THREE.SpriteMaterial=function(e){THREE.Material.call(this);this.type="SpriteMaterial";this.color=new THREE.Color(16777215);this.map=null;this.rotation=0;this.fog=false;this.setValues(e)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,e);e.color.copy(this.color);e.map=this.map;e.rotation=this.rotation;e.fog=this.fog;return e};THREE.Texture=function(e,t,n,r,i,s,o,u,a){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++});this.uuid=THREE.Math.generateUUID();this.name="";this.image=e!==undefined?e:THREE.Texture.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=t!==undefined?t:THREE.Texture.DEFAULT_MAPPING;this.wrapS=n!==undefined?n:THREE.ClampToEdgeWrapping;this.wrapT=r!==undefined?r:THREE.ClampToEdgeWrapping;this.magFilter=i!==undefined?i:THREE.LinearFilter;this.minFilter=s!==undefined?s:THREE.LinearMipMapLinearFilter;this.anisotropy=a!==undefined?a:1;this.format=o!==undefined?o:THREE.RGBAFormat;this.type=u!==undefined?u:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this._needsUpdate=false;this.onUpdate=null};THREE.Texture.DEFAULT_IMAGE=undefined;THREE.Texture.DEFAULT_MAPPING=new THREE.UVMapping;THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){if(e===true)this.update();this._needsUpdate=e},clone:function(e){if(e===undefined)e=new THREE.Texture;e.image=this.image;e.mipmaps=this.mipmaps.slice(0);e.mapping=this.mapping;e.wrapS=this.wrapS;e.wrapT=this.wrapT;e.magFilter=this.magFilter;e.minFilter=this.minFilter;e.anisotropy=this.anisotropy;e.format=this.format;e.type=this.type;e.offset.copy(this.offset);e.repeat.copy(this.repeat);e.generateMipmaps=this.generateMipmaps;e.premultiplyAlpha=this.premultiplyAlpha;e.flipY=this.flipY;e.unpackAlignment=this.unpackAlignment;return e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype);THREE.TextureIdCount=0;THREE.CubeTexture=function(e,t,n,r,i,s,o,u,a){THREE.Texture.call(this,e,t,n,r,i,s,o,u,a);this.images=e};THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CubeTexture.clone=function(e){if(e===undefined)e=new THREE.CubeTexture;THREE.Texture.prototype.clone.call(this,e);e.images=this.images;return e};THREE.CompressedTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l);this.image={width:t,height:n};this.mipmaps=e;this.flipY=false;this.generateMipmaps=false};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,e);return e};THREE.DataTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l);this.image={data:e,width:t,height:n}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,e);return e};THREE.VideoTexture=function(e,t,n,r,i,s,o,u,a){THREE.Texture.call(this,e,t,n,r,i,s,o,u,a);this.generateMipmaps=false;var f=this;var l=function(){requestAnimationFrame(l);if(e.readyState===e.HAVE_ENOUGH_DATA){f.needsUpdate=true}};l()};THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype);THREE.Group=function(){THREE.Object3D.call(this);this.type="Group"};THREE.Group.prototype=Object.create(THREE.Object3D.prototype);THREE.PointCloud=function(e,t){THREE.Object3D.call(this);this.type="PointCloud";this.geometry=e!==undefined?e:new THREE.Geometry;this.material=t!==undefined?t:new THREE.PointCloudMaterial({color:Math.random()*16777215});this.sortParticles=false};THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype);THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4;var t=new THREE.Ray;return function(n,r){var i=this;var s=i.geometry;var o=n.params.PointCloud.threshold;e.getInverse(this.matrixWorld);t.copy(n.ray).applyMatrix4(e);if(s.boundingBox!==null){if(t.isIntersectionBox(s.boundingBox)===false){return}}var u=o/((this.scale.x+this.scale.y+this.scale.z)/3);var a=new THREE.Vector3;var f=function(e,s){var o=t.distanceToPoint(e);if(o<u){var a=t.closestPointToPoint(e);a.applyMatrix4(i.matrixWorld);var f=n.ray.origin.distanceTo(a);r.push({distance:f,distanceToRay:o,point:a.clone(),index:s,face:null,object:i})}};if(s instanceof THREE.BufferGeometry){var l=s.attributes;var c=l.position.array;if(l.index!==undefined){var h=l.index.array;var p=s.offsets;if(p.length===0){var d={start:0,count:h.length,index:0};p=[d]}for(var v=0,m=p.length;v<m;++v){var g=p[v].start;var y=p[v].count;var b=p[v].index;for(var w=g,E=g+y;w<E;w++){var S=b+h[w];a.fromArray(c,S*3);f(a,S)}}}else{var x=c.length/3;for(var w=0;w<x;w++){a.set(c[3*w],c[3*w+1],c[3*w+2]);f(a,w)}}}else{var T=this.geometry.vertices;for(var w=0;w<T.length;w++){f(T[w],w)}}}}();THREE.PointCloud.prototype.clone=function(e){if(e===undefined)e=new THREE.PointCloud(this.geometry,this.material);e.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,e);return e};THREE.ParticleSystem=function(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud.");return new THREE.PointCloud(e,t)};THREE.Line=function(e,t,n){THREE.Object3D.call(this);this.type="Line";this.geometry=e!==undefined?e:new THREE.Geometry;this.material=t!==undefined?t:new THREE.LineBasicMaterial({color:Math.random()*16777215});this.mode=n!==undefined?n:THREE.LineStrip};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4;var t=new THREE.Ray;var n=new THREE.Sphere;return function(r,i){var s=r.linePrecision;var o=s*s;var u=this.geometry;if(u.boundingSphere===null)u.computeBoundingSphere();n.copy(u.boundingSphere);n.applyMatrix4(this.matrixWorld);if(r.ray.isIntersectionSphere(n)===false){return}e.getInverse(this.matrixWorld);t.copy(r.ray).applyMatrix4(e);if(u instanceof THREE.Geometry){var a=u.vertices;var f=a.length;var l=new THREE.Vector3;var c=new THREE.Vector3;var h=this.mode===THREE.LineStrip?1:2;for(var p=0;p<f-1;p=p+h){var d=t.distanceSqToSegment(a[p],a[p+1],c,l);if(d>o)continue;var v=t.origin.distanceTo(c);if(v<r.near||v>r.far)continue;i.push({distance:v,point:l.clone().applyMatrix4(this.matrixWorld),face:null,faceIndex:null,object:this})}}}}();THREE.Line.prototype.clone=function(e){if(e===undefined)e=new THREE.Line(this.geometry,this.material,this.mode);THREE.Object3D.prototype.clone.call(this,e);return e};THREE.Mesh=function(e,t){THREE.Object3D.call(this);this.type="Mesh";this.geometry=e!==undefined?e:new THREE.Geometry;this.material=t!==undefined?t:new THREE.MeshBasicMaterial({color:Math.random()*16777215});this.updateMorphTargets()};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets!==undefined&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++){this.morphTargetInfluences.push(0);this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}}};THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){if(this.morphTargetDictionary[e]!==undefined){return this.morphTargetDictionary[e]}console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4;var t=new THREE.Ray;var n=new THREE.Sphere;var r=new THREE.Vector3;var i=new THREE.Vector3;var s=new THREE.Vector3;return function(o,u){var a=this.geometry;if(a.boundingSphere===null)a.computeBoundingSphere();n.copy(a.boundingSphere);n.applyMatrix4(this.matrixWorld);if(o.ray.isIntersectionSphere(n)===false){return}e.getInverse(this.matrixWorld);t.copy(o.ray).applyMatrix4(e);if(a.boundingBox!==null){if(t.isIntersectionBox(a.boundingBox)===false){return}}if(a instanceof THREE.BufferGeometry){var f=this.material;if(f===undefined)return;var l=a.attributes;var c,h,p;var d=o.precision;if(l.index!==undefined){var v=l.index.array;var m=l.position.array;var g=a.offsets;if(g.length===0){g=[{start:0,count:v.length,index:0}]}for(var y=0,b=g.length;y<b;++y){var w=g[y].start;var E=g[y].count;var S=g[y].index;for(var x=w,T=w+E;x<T;x+=3){c=S+v[x];h=S+v[x+1];p=S+v[x+2];r.fromArray(m,c*3);i.fromArray(m,h*3);s.fromArray(m,p*3);if(f.side===THREE.BackSide){var N=t.intersectTriangle(s,i,r,true)}else{var N=t.intersectTriangle(r,i,s,f.side!==THREE.DoubleSide)}if(N===null)continue;N.applyMatrix4(this.matrixWorld);var C=o.ray.origin.distanceTo(N);if(C<d||C<o.near||C>o.far)continue;u.push({distance:C,point:N,face:new THREE.Face3(c,h,p,THREE.Triangle.normal(r,i,s)),faceIndex:null,object:this})}}}else{var m=l.position.array;for(var x=0,k=0,T=m.length;x<T;x+=3,k+=9){c=x;h=x+1;p=x+2;r.fromArray(m,k);i.fromArray(m,k+3);s.fromArray(m,k+6);if(f.side===THREE.BackSide){var N=t.intersectTriangle(s,i,r,true)}else{var N=t.intersectTriangle(r,i,s,f.side!==THREE.DoubleSide)}if(N===null)continue;N.applyMatrix4(this.matrixWorld);var C=o.ray.origin.distanceTo(N);if(C<d||C<o.near||C>o.far)continue;u.push({distance:C,point:N,face:new THREE.Face3(c,h,p,THREE.Triangle.normal(r,i,s)),faceIndex:null,object:this})}}}else if(a instanceof THREE.Geometry){var L=this.material instanceof THREE.MeshFaceMaterial;var A=L===true?this.material.materials:null;var c,h,p,O;var d=o.precision;var M=a.vertices;for(var _=0,D=a.faces.length;_<D;_++){var P=a.faces[_];var f=L===true?A[P.materialIndex]:this.material;if(f===undefined)continue;c=M[P.a];h=M[P.b];p=M[P.c];if(f.morphTargets===true){var H=a.morphTargets;var B=this.morphTargetInfluences;r.set(0,0,0);i.set(0,0,0);s.set(0,0,0);for(var j=0,F=H.length;j<F;j++){var I=B[j];if(I===0)continue;var q=H[j].vertices;r.x+=(q[P.a].x-c.x)*I;r.y+=(q[P.a].y-c.y)*I;r.z+=(q[P.a].z-c.z)*I;i.x+=(q[P.b].x-h.x)*I;i.y+=(q[P.b].y-h.y)*I;i.z+=(q[P.b].z-h.z)*I;s.x+=(q[P.c].x-p.x)*I;s.y+=(q[P.c].y-p.y)*I;s.z+=(q[P.c].z-p.z)*I}r.add(c);i.add(h);s.add(p);c=r;h=i;p=s}if(f.side===THREE.BackSide){var N=t.intersectTriangle(p,h,c,true)}else{var N=t.intersectTriangle(c,h,p,f.side!==THREE.DoubleSide)}if(N===null)continue;N.applyMatrix4(this.matrixWorld);var C=o.ray.origin.distanceTo(N);if(C<d||C<o.near||C>o.far)continue;u.push({distance:C,point:N,face:P,faceIndex:_,object:this})}}}}();THREE.Mesh.prototype.clone=function(e,t){if(e===undefined)e=new THREE.Mesh(this.geometry,this.material);THREE.Object3D.prototype.clone.call(this,e,t);return e};THREE.Bone=function(e){THREE.Object3D.call(this);this.skin=e};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Skeleton=function(e,t,n){this.useVertexTexture=n!==undefined?n:true;this.identityMatrix=new THREE.Matrix4;e=e||[];this.bones=e.slice(0);if(this.useVertexTexture){var r;if(this.bones.length>256)r=64;else if(this.bones.length>64)r=32;else if(this.bones.length>16)r=16;else r=8;this.boneTextureWidth=r;this.boneTextureHeight=r;this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4);this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType);this.boneTexture.minFilter=THREE.NearestFilter;this.boneTexture.magFilter=THREE.NearestFilter;this.boneTexture.generateMipmaps=false;this.boneTexture.flipY=false}else{this.boneMatrices=new Float32Array(16*this.bones.length)}if(t===undefined){this.calculateInverses()}else{if(this.bones.length===t.length){this.boneInverses=t.slice(0)}else{console.warn("THREE.Skeleton bonInverses is the wrong length.");this.boneInverses=[];for(var i=0,s=this.bones.length;i<s;i++){this.boneInverses.push(new THREE.Matrix4)}}}};THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new THREE.Matrix4;if(this.bones[e]){n.getInverse(this.bones[e].matrixWorld)}this.boneInverses.push(n)}};THREE.Skeleton.prototype.pose=function(){var e;for(var t=0,n=this.bones.length;t<n;t++){e=this.bones[t];if(e){e.matrixWorld.getInverse(this.boneInverses[t])}}for(var t=0,n=this.bones.length;t<n;t++){e=this.bones[t];if(e){if(e.parent){e.matrix.getInverse(e.parent.matrixWorld);e.matrix.multiply(e.matrixWorld)}else{e.matrix.copy(e.matrixWorld)}e.matrix.decompose(e.position,e.quaternion,e.scale)}}};THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]);e.flattenToArrayOffset(this.boneMatrices,t*16)}if(this.useVertexTexture){this.boneTexture.needsUpdate=true}}}();THREE.SkinnedMesh=function(e,t,n){THREE.Mesh.call(this,e,t);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new THREE.Matrix4;this.bindMatrixInverse=new THREE.Matrix4;var r=[];if(this.geometry&&this.geometry.bones!==undefined){var i,s,o,u,a;for(var f=0,l=this.geometry.bones.length;f<l;++f){s=this.geometry.bones[f];o=s.pos;u=s.rotq;a=s.scl;i=new THREE.Bone(this);r.push(i);i.name=s.name;i.position.set(o[0],o[1],o[2]);i.quaternion.set(u[0],u[1],u[2],u[3]);if(a!==undefined){i.scale.set(a[0],a[1],a[2])}else{i.scale.set(1,1,1)}}for(var f=0,l=this.geometry.bones.length;f<l;++f){s=this.geometry.bones[f];if(s.parent!==-1){r[s.parent].add(r[f])}else{this.add(r[f])}}}this.normalizeSkinWeights();this.updateMatrixWorld(true);this.bind(new THREE.Skeleton(r,undefined,n))};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e;if(t===undefined){this.updateMatrixWorld(true);t=this.matrixWorld}this.bindMatrix.copy(t);this.bindMatrixInverse.getInverse(t)};THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()};THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry){for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e];var n=1/t.lengthManhattan();if(n!==Infinity){t.multiplyScalar(n)}else{t.set(1)}}}else{}};THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,true);if(this.bindMode==="attached"){this.bindMatrixInverse.getInverse(this.matrixWorld)}else if(this.bindMode==="detached"){this.bindMatrixInverse.getInverse(this.bindMatrix)}else{console.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)}};THREE.SkinnedMesh.prototype.clone=function(e){if(e===undefined){e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)}THREE.Mesh.prototype.clone.call(this,e);return e};THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t);this.type="MorphAnimMesh";this.duration=1e3;this.mirroredLoop=false;this.time=0;this.lastKeyframe=0;this.currentKeyframe=0;this.direction=1;this.directionBackwards=false;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e;this.endKeyframe=t;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=false};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=true};THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;if(!e.animations)e.animations={};var t,n=e.animations;var r=/([a-z]+)_?(\d+)/;for(var i=0,s=e.morphTargets.length;i<s;i++){var o=e.morphTargets[i];var u=o.name.match(r);if(u&&u.length>1){var a=u[1];var f=u[2];if(!n[a])n[a]={start:Infinity,end:-Infinity};var l=n[a];if(i<l.start)l.start=i;if(i>l.end)l.end=i;if(!t)t=a}}e.firstAnimation=t};THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,n){if(!this.geometry.animations)this.geometry.animations={};this.geometry.animations[e]={start:t,end:n}};THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var n=this.geometry.animations[e];if(n){this.setFrameRange(n.start,n.end);this.duration=1e3*((n.end-n.start)/t);this.time=0}else{console.warn("animation["+e+"] undefined")}};THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e;if(this.mirroredLoop){if(this.time>this.duration||this.time<0){this.direction*=-1;if(this.time>this.duration){this.time=this.duration;this.directionBackwards=true}if(this.time<0){this.time=0;this.directionBackwards=false}}}else{this.time=this.time%this.duration;if(this.time<0)this.time+=this.duration}var n=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);if(n!==this.currentKeyframe){this.morphTargetInfluences[this.lastKeyframe]=0;this.morphTargetInfluences[this.currentKeyframe]=1;this.morphTargetInfluences[n]=0;this.lastKeyframe=this.currentKeyframe;this.currentKeyframe=n}var r=this.time%t/t;if(this.directionBackwards){r=1-r}this.morphTargetInfluences[this.currentKeyframe]=r;this.morphTargetInfluences[this.lastKeyframe]=1-r};THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,n){var r=this.morphTargetInfluences;for(var i=0,s=r.length;i<s;i++){r[i]=0}if(e>-1)r[e]=1-n;if(t>-1)r[t]=n};THREE.MorphAnimMesh.prototype.clone=function(e){if(e===undefined)e=new THREE.MorphAnimMesh(this.geometry,this.material);e.duration=this.duration;e.mirroredLoop=this.mirroredLoop;e.time=this.time;e.lastKeyframe=this.lastKeyframe;e.currentKeyframe=this.currentKeyframe;e.direction=this.direction;e.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,e);return e};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(e,t){if(t===undefined)t=0;t=Math.abs(t);for(var n=0;n<this.objects.length;n++){if(t<this.objects[n].distance){break}}this.objects.splice(n,0,{distance:t,object:e});this.add(e)};THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,n=this.objects.length;t<n;t++){if(e<this.objects[t].distance){break}}return this.objects[t-1].object};THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}();THREE.LOD.prototype.update=function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(n){if(this.objects.length>1){e.setFromMatrixPosition(n.matrixWorld);t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);this.objects[0].object.visible=true;for(var i=1,s=this.objects.length;i<s;i++){if(r>=this.objects[i].distance){this.objects[i-1].object.visible=false;this.objects[i].object.visible=true}else{break}}for(;i<s;i++){this.objects[i].object.visible=false}}}}();THREE.LOD.prototype.clone=function(e){if(e===undefined)e=new THREE.LOD;THREE.Object3D.prototype.clone.call(this,e);for(var t=0,n=this.objects.length;t<n;t++){var r=this.objects[t].object.clone();r.visible=t===0;e.addLevel(r,this.objects[t].distance)}return e};THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]);var t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]);var n=new Float32Array([0,0,1,0,1,1,0,1]);var r=new THREE.BufferGeometry;r.addAttribute("index",new THREE.BufferAttribute(e,1));r.addAttribute("position",new THREE.BufferAttribute(t,3));r.addAttribute("uv",new THREE.BufferAttribute(n,2));return function(e){THREE.Object3D.call(this);this.type="Sprite";this.geometry=r;this.material=e!==undefined?e:new THREE.SpriteMaterial}}();THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);if(r>this.scale.x){return}n.push({distance:r,point:this.position,face:null,object:this})}}();THREE.Sprite.prototype.clone=function(e){if(e===undefined)e=new THREE.Sprite(this.material);THREE.Object3D.prototype.clone.call(this,e);return e};THREE.Particle=THREE.Sprite;THREE.LensFlare=function(e,t,n,r,i){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=undefined;if(e!==undefined){this.add(e,t,n,r,i)}};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(e,t,n,r,i,s){if(t===undefined)t=-1;if(n===undefined)n=0;if(s===undefined)s=1;if(i===undefined)i=new THREE.Color(16777215);if(r===undefined)r=THREE.NormalBlending;n=Math.min(n,Math.max(0,n));this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:1,opacity:s,color:i,blending:r})};THREE.LensFlare.prototype.updateLensFlares=function(){var e,t=this.lensFlares.length;var n;var r=-this.positionScreen.x*2;var i=-this.positionScreen.y*2;for(e=0;e<t;e++){n=this.lensFlares[e];n.x=this.positionScreen.x+r*n.distance;n.y=this.positionScreen.y+i*n.distance;n.wantedRotation=n.x*Math.PI*.25;n.rotation+=(n.wantedRotation-n.rotation)*.25}};THREE.Scene=function(){THREE.Object3D.call(this);this.type="Scene";this.fog=null;this.overrideMaterial=null;this.autoUpdate=true};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.clone=function(e){if(e===undefined)e=new THREE.Scene;THREE.Object3D.prototype.clone.call(this,e);if(this.fog!==null)e.fog=this.fog.clone();if(this.overrideMaterial!==null)e.overrideMaterial=this.overrideMaterial.clone();e.autoUpdate=this.autoUpdate;e.matrixAutoUpdate=this.matrixAutoUpdate;return e};THREE.Fog=function(e,t,n){this.name="";this.color=new THREE.Color(e);this.near=t!==undefined?t:1;this.far=n!==undefined?n:1e3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(e,t){this.name="";this.color=new THREE.Color(e);this.density=t!==undefined?t:25e-5};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.ShaderChunk={};THREE.ShaderChunk["alphatest_fragment"]="#ifdef ALPHATEST\n\n    if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n";THREE.ShaderChunk["lights_lambert_vertex"]="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n   vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n   vec3 dirVector = normalize( lDirection.xyz );\n\n   float dotProduct = dot( transformedNormal, dirVector );\n   vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n    #ifdef DOUBLE_SIDED\n\n     vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n       #ifdef WRAP_AROUND\n\n          vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n       #endif\n\n  #endif\n\n  #ifdef WRAP_AROUND\n\n      vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n      directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n       #ifdef DOUBLE_SIDED\n\n         directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n       #endif\n\n  #endif\n\n  vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n  #ifdef DOUBLE_SIDED\n\n     vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n   #endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n   for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n      vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n       vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n      float lDistance = 1.0;\n        if ( pointLightDistance[ i ] > 0.0 )\n          lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n      lVector = normalize( lVector );\n       float dotProduct = dot( transformedNormal, lVector );\n\n       vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n      #ifdef DOUBLE_SIDED\n\n         vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n         #ifdef WRAP_AROUND\n\n              vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n         #endif\n\n      #endif\n\n      #ifdef WRAP_AROUND\n\n          vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n            pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n         #ifdef DOUBLE_SIDED\n\n             pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n         #endif\n\n      #endif\n\n      vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n      #ifdef DOUBLE_SIDED\n\n         vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n       #endif\n\n  }\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n  for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n       vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n      float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n     if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n            spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n         float lDistance = 1.0;\n            if ( spotLightDistance[ i ] > 0.0 )\n               lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n           lVector = normalize( lVector );\n\n         float dotProduct = dot( transformedNormal, lVector );\n         vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n           #ifdef DOUBLE_SIDED\n\n             vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n              #ifdef WRAP_AROUND\n\n                  vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n              #endif\n\n          #endif\n\n          #ifdef WRAP_AROUND\n\n              vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n             spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n                #ifdef DOUBLE_SIDED\n\n                 spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n                #endif\n\n          #endif\n\n          vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n           #ifdef DOUBLE_SIDED\n\n             vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n            #endif\n\n      }\n\n   }\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n  for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n       vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n        vec3 lVector = normalize( lDirection.xyz );\n\n     float dotProduct = dot( transformedNormal, lVector );\n\n       float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n     float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n      vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n     #ifdef DOUBLE_SIDED\n\n         vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n      #endif\n\n  }\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif";THREE.ShaderChunk["map_particle_pars_fragment"]="#ifdef USE_MAP\n\n  uniform sampler2D map;\n\n#endif";THREE.ShaderChunk["default_vertex"]="vec4 mvPosition;\n\n#ifdef USE_SKINNING\n\n  mvPosition = modelViewMatrix * skinned;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\n\n    mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\n\n mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;";THREE.ShaderChunk["map_pars_fragment"]="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n  varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n   uniform sampler2D map;\n\n#endif";THREE.ShaderChunk["skinnormal_vertex"]="#ifdef USE_SKINNING\n\n   mat4 skinMatrix = mat4( 0.0 );\n    skinMatrix += skinWeight.x * boneMatX;\n    skinMatrix += skinWeight.y * boneMatY;\n    skinMatrix += skinWeight.z * boneMatZ;\n    skinMatrix += skinWeight.w * boneMatW;\n    skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n  #ifdef USE_MORPHNORMALS\n\n vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n   #else\n\n   vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n  #endif\n\n#endif\n";THREE.ShaderChunk["logdepthbuf_pars_vertex"]="#ifdef USE_LOGDEPTHBUF\n\n    #ifdef USE_LOGDEPTHBUF_EXT\n\n      varying float vFragDepth;\n\n   #endif\n\n  uniform float logDepthBufFC;\n\n#endif";THREE.ShaderChunk["lightmap_pars_vertex"]="#ifdef USE_LIGHTMAP\n\n  varying vec2 vUv2;\n\n#endif";THREE.ShaderChunk["lights_phong_fragment"]="vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n   normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n   normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n   normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n vec3 pointDiffuse = vec3( 0.0 );\n  vec3 pointSpecular = vec3( 0.0 );\n\n   for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n     vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n       vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n       float lDistance = 1.0;\n        if ( pointLightDistance[ i ] > 0.0 )\n          lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n      lVector = normalize( lVector );\n\n             // diffuse\n\n      float dotProduct = dot( normal, lVector );\n\n      #ifdef WRAP_AROUND\n\n          float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n            float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n          vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n       #else\n\n           float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n      #endif\n\n      pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n                // specular\n\n     vec3 pointHalfVector = normalize( lVector + viewPosition );\n       float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n        float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n        float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n        vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n     pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n }\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n  vec3 spotDiffuse = vec3( 0.0 );\n   vec3 spotSpecular = vec3( 0.0 );\n\n    for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n      vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n        vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n       float lDistance = 1.0;\n        if ( spotLightDistance[ i ] > 0.0 )\n           lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n       lVector = normalize( lVector );\n\n     float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n        if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n            spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n                 // diffuse\n\n          float dotProduct = dot( normal, lVector );\n\n          #ifdef WRAP_AROUND\n\n              float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n             float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n               vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n          #else\n\n               float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n           #endif\n\n          spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n                  // specular\n\n         vec3 spotHalfVector = normalize( lVector + viewPosition );\n            float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n          float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n          float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n            vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n          spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n        }\n\n   }\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n   vec3 dirDiffuse = vec3( 0.0 );\n    vec3 dirSpecular = vec3( 0.0 );\n\n for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n        vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n       vec3 dirVector = normalize( lDirection.xyz );\n\n               // diffuse\n\n      float dotProduct = dot( normal, dirVector );\n\n        #ifdef WRAP_AROUND\n\n          float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n          float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n            vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n     #else\n\n           float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n        #endif\n\n      dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n      // specular\n\n     vec3 dirHalfVector = normalize( dirVector + viewPosition );\n       float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n        float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n        /*\n        // fresnel term from skin shader\n      const float F0 = 0.128;\n\n     float base = 1.0 - dot( viewPosition, dirHalfVector );\n        float exponential = pow( base, 5.0 );\n\n       float fresnel = exponential + F0 * ( 1.0 - exponential );\n     */\n\n      /*\n        // fresnel term from fresnel shader\n       const float mFresnelBias = 0.08;\n      const float mFresnelScale = 0.3;\n      const float mFresnelPower = 5.0;\n\n        float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n     */\n\n      float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n        //      dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n      vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n     dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n   }\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n  vec3 hemiDiffuse = vec3( 0.0 );\n   vec3 hemiSpecular = vec3( 0.0 );\n\n    for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n       vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n        vec3 lVector = normalize( lDirection.xyz );\n\n     // diffuse\n\n      float dotProduct = dot( normal, lVector );\n        float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n       vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n       hemiDiffuse += diffuse * hemiColor;\n\n     // specular (sky light)\n\n     vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n     float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n        float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n        // specular (ground light)\n\n      vec3 lVectorGround = -lVector;\n\n      vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n        float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n      float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n      float dotProductGround = dot( normal, lVectorGround );\n\n      float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n        vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n        vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n        hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n  }\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n    totalDiffuse += dirDiffuse;\n   totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n  totalDiffuse += hemiDiffuse;\n  totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n    totalDiffuse += pointDiffuse;\n totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n    totalDiffuse += spotDiffuse;\n  totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n    gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n   gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif";THREE.ShaderChunk["fog_pars_fragment"]="#ifdef USE_FOG\n\n  uniform vec3 fogColor;\n\n  #ifdef FOG_EXP2\n\n     uniform float fogDensity;\n\n   #else\n\n       uniform float fogNear;\n        uniform float fogFar;\n #endif\n\n#endif";THREE.ShaderChunk["morphnormal_vertex"]="#ifdef USE_MORPHNORMALS\n\n  vec3 morphedNormal = vec3( 0.0 );\n\n   morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n  morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n  morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n  morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n    morphedNormal += normal;\n\n#endif";THREE.ShaderChunk["envmap_pars_fragment"]="#ifdef USE_ENVMAP\n\n    uniform float reflectivity;\n   uniform samplerCube envMap;\n   uniform float flipEnvMap;\n uniform int combine;\n\n    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n      uniform bool useRefract;\n      uniform float refractionRatio;\n\n  #else\n\n       varying vec3 vReflect;\n\n  #endif\n\n#endif";THREE.ShaderChunk["logdepthbuf_fragment"]="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n   gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif";THREE.ShaderChunk["normalmap_pars_fragment"]="#ifdef USE_NORMALMAP\n\n uniform sampler2D normalMap;\n  uniform vec2 normalScale;\n\n           // Per-Pixel Tangent Space Normal Mapping\n         // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n   vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n        vec3 q0 = dFdx( eye_pos.xyz );\n        vec3 q1 = dFdy( eye_pos.xyz );\n        vec2 st0 = dFdx( vUv.st );\n        vec2 st1 = dFdy( vUv.st );\n\n      vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n        vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n       vec3 N = normalize( surf_norm );\n\n        vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n      mapN.xy = normalScale * mapN.xy;\n      mat3 tsn = mat3( S, T, N );\n       return normalize( tsn * mapN );\n\n }\n\n#endif\n";THREE.ShaderChunk["lights_phong_pars_vertex"]="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n    varying vec3 vWorldPosition;\n\n#endif\n";THREE.ShaderChunk["lightmap_pars_fragment"]="#ifdef USE_LIGHTMAP\n\n  varying vec2 vUv2;\n    uniform sampler2D lightMap;\n\n#endif";THREE.ShaderChunk["shadowmap_vertex"]="#ifdef USE_SHADOWMAP\n\n  for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n       vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n  }\n\n#endif";THREE.ShaderChunk["lights_phong_vertex"]="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n   vWorldPosition = worldPosition.xyz;\n\n#endif";THREE.ShaderChunk["map_fragment"]="#ifdef USE_MAP\n\n    vec4 texelColor = texture2D( map, vUv );\n\n    #ifdef GAMMA_INPUT\n\n      texelColor.xyz *= texelColor.xyz;\n\n   #endif\n\n  gl_FragColor = gl_FragColor * texelColor;\n\n#endif";THREE.ShaderChunk["lightmap_vertex"]="#ifdef USE_LIGHTMAP\n\n  vUv2 = uv2;\n\n#endif";THREE.ShaderChunk["map_particle_fragment"]="#ifdef USE_MAP\n\n   gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif";THREE.ShaderChunk["color_pars_fragment"]="#ifdef USE_COLOR\n\n   varying vec3 vColor;\n\n#endif\n";THREE.ShaderChunk["color_vertex"]="#ifdef USE_COLOR\n\n   #ifdef GAMMA_INPUT\n\n      vColor = color * color;\n\n #else\n\n       vColor = color;\n\n #endif\n\n#endif";THREE.ShaderChunk["skinning_vertex"]="#ifdef USE_SKINNING\n\n #ifdef USE_MORPHTARGETS\n\n vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n    #else\n\n   vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n   #endif\n\n  vec4 skinned = vec4( 0.0 );\n   skinned += boneMatX * skinVertex * skinWeight.x;\n  skinned += boneMatY * skinVertex * skinWeight.y;\n  skinned += boneMatZ * skinVertex * skinWeight.z;\n  skinned += boneMatW * skinVertex * skinWeight.w;\n  skinned  = bindMatrixInverse * skinned;\n\n#endif\n";THREE.ShaderChunk["envmap_pars_vertex"]="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n varying vec3 vReflect;\n\n  uniform float refractionRatio;\n    uniform bool useRefract;\n\n#endif\n";THREE.ShaderChunk["linear_to_gamma_fragment"]="#ifdef GAMMA_OUTPUT\n\n    gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif";THREE.ShaderChunk["color_pars_vertex"]="#ifdef USE_COLOR\n\n    varying vec3 vColor;\n\n#endif";THREE.ShaderChunk["lights_lambert_pars_vertex"]="uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n  uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n  uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n  uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n   uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n  uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n  uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n   uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n    uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n   uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n   uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n   uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n uniform vec3 wrapRGB;\n\n#endif\n";THREE.ShaderChunk["map_pars_vertex"]="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n  varying vec2 vUv;\n uniform vec4 offsetRepeat;\n\n#endif\n";THREE.ShaderChunk["envmap_fragment"]="#ifdef USE_ENVMAP\n\n vec3 reflectVec;\n\n    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n      vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n     // http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n      // Transforming Normal Vectors with the Inverse Transformation\n\n      vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n       if ( useRefract ) {\n\n         reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n       } else { \n\n           reflectVec = reflect( cameraToVertex, worldNormal );\n\n        }\n\n   #else\n\n       reflectVec = vReflect;\n\n  #endif\n\n  #ifdef DOUBLE_SIDED\n\n     float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n      vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n  #else\n\n       vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n   #endif\n\n  #ifdef GAMMA_INPUT\n\n      cubeColor.xyz *= cubeColor.xyz;\n\n #endif\n\n  if ( combine == 1 ) {\n\n       gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n\n } else if ( combine == 2 ) {\n\n        gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n\n    } else {\n\n        gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n\n  }\n\n#endif";THREE.ShaderChunk["specularmap_pars_fragment"]="#ifdef USE_SPECULARMAP\n\n uniform sampler2D specularMap;\n\n#endif";THREE.ShaderChunk["logdepthbuf_vertex"]="#ifdef USE_LOGDEPTHBUF\n\n   gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n   #ifdef USE_LOGDEPTHBUF_EXT\n\n      vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n      gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n  #endif\n\n#endif";THREE.ShaderChunk["morphtarget_pars_vertex"]="#ifdef USE_MORPHTARGETS\n\n #ifndef USE_MORPHNORMALS\n\n    uniform float morphTargetInfluences[ 8 ];\n\n   #else\n\n   uniform float morphTargetInfluences[ 4 ];\n\n   #endif\n\n#endif";THREE.ShaderChunk["specularmap_fragment"]="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n  vec4 texelSpecular = texture2D( specularMap, vUv );\n   specularStrength = texelSpecular.r;\n\n#else\n\n    specularStrength = 1.0;\n\n#endif";THREE.ShaderChunk["fog_fragment"]="#ifdef USE_FOG\n\n    #ifdef USE_LOGDEPTHBUF_EXT\n\n      float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n #else\n\n       float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n  #endif\n\n  #ifdef FOG_EXP2\n\n     const float LOG2 = 1.442695;\n      float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n       fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n #else\n\n       float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n #endif\n    \n  gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif";THREE.ShaderChunk["bumpmap_pars_fragment"]="#ifdef USE_BUMPMAP\n\n  uniform sampler2D bumpMap;\n    uniform float bumpScale;\n\n            // Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n         //  http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n            // Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n vec2 dHdxy_fwd() {\n\n      vec2 dSTdx = dFdx( vUv );\n     vec2 dSTdy = dFdy( vUv );\n\n       float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n      float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n        float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n      return vec2( dBx, dBy );\n\n    }\n\n   vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n        vec3 vSigmaX = dFdx( surf_pos );\n      vec3 vSigmaY = dFdy( surf_pos );\n      vec3 vN = surf_norm;        // normalized\n\n       vec3 R1 = cross( vSigmaY, vN );\n       vec3 R2 = cross( vN, vSigmaX );\n\n     float fDet = dot( vSigmaX, R1 );\n\n        vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n      return normalize( abs( fDet ) * surf_norm - vGrad );\n\n    }\n\n#endif";THREE.ShaderChunk["defaultnormal_vertex"]="vec3 objectNormal;\n\n#ifdef USE_SKINNING\n\n   objectNormal = skinnedNormal.xyz;\n\n#endif\n\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\n\n  objectNormal = morphedNormal;\n\n#endif\n\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\n\n    objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n   objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;";THREE.ShaderChunk["lights_phong_pars_fragment"]="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n    uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n  uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n  uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n   uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n   uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n  uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n  uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n   uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n    uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n   uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n   uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n    uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;";THREE.ShaderChunk["skinbase_vertex"]="#ifdef USE_SKINNING\n\n    mat4 boneMatX = getBoneMatrix( skinIndex.x );\n mat4 boneMatY = getBoneMatrix( skinIndex.y );\n mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif";THREE.ShaderChunk["map_vertex"]="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif";THREE.ShaderChunk["lightmap_fragment"]="#ifdef USE_LIGHTMAP\n\n    gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif";THREE.ShaderChunk["shadowmap_pars_vertex"]="#ifdef USE_SHADOWMAP\n\n  varying vec4 vShadowCoord[ MAX_SHADOWS ];\n uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif";THREE.ShaderChunk["color_fragment"]="#ifdef USE_COLOR\n\n  gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif";THREE.ShaderChunk["morphtarget_vertex"]="#ifdef USE_MORPHTARGETS\n\n  vec3 morphed = vec3( 0.0 );\n   morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n  morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n  morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n  morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n    #ifndef USE_MORPHNORMALS\n\n    morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n  morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n  morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n  morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n    #endif\n\n  morphed += position;\n\n#endif";THREE.ShaderChunk["envmap_vertex"]="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n   vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n   worldNormal = normalize( worldNormal );\n\n vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n  if ( useRefract ) {\n\n     vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n } else {\n\n        vReflect = reflect( cameraToVertex, worldNormal );\n\n  }\n\n#endif";THREE.ShaderChunk["shadowmap_fragment"]="#ifdef USE_SHADOWMAP\n\n  #ifdef SHADOWMAP_DEBUG\n\n      vec3 frustumColors[3];\n        frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n     frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n     frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n   #endif\n\n  #ifdef SHADOWMAP_CASCADE\n\n        int inFrustumCount = 0;\n\n #endif\n\n  float fDepth;\n vec3 shadowColor = vec3( 1.0 );\n\n for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n       vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n             // if ( something && something ) breaks ATI OpenGL shader compiler\n                // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n               // don't shadow pixels outside of light frustum\n               // use just first frustum (for cascades)\n              // don't shadow pixels behind far plane of light frustum\n\n        #ifdef SHADOWMAP_CASCADE\n\n            inFrustumCount += int( inFrustum );\n           bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n       #else\n\n           bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        #endif\n\n      bool frustumTest = all( frustumTestVec );\n\n       if ( frustumTest ) {\n\n            shadowCoord.z += shadowBias[ i ];\n\n           #if defined( SHADOWMAP_TYPE_PCF )\n\n                       // Percentage-close filtering\n                     // (9 pixel kernel)\n                       // http://fabiensanglard.net/shadowmappingPCF/\n\n              float shadow = 0.0;\n\n     /*\n                        // nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n                        // must enroll loop manually\n\n                for ( float y = -1.25; y <= 1.25; y += 1.25 )\n                 for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n                     vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n                              // doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n                               //vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n                       float fDepth = unpackDepth( rgbaDepth );\n\n                        if ( fDepth < shadowCoord.z )\n                         shadow += 1.0;\n\n              }\n\n               shadow /= 9.0;\n\n      */\n\n              const float shadowDelta = 1.0 / 9.0;\n\n                float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n              float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n                float dx0 = -1.25 * xPixelOffset;\n             float dy0 = -1.25 * yPixelOffset;\n             float dx1 = 1.25 * xPixelOffset;\n              float dy1 = 1.25 * yPixelOffset;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n              if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n               if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n                shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n         #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n                        // Percentage-close filtering\n                     // (9 pixel kernel)\n                       // http://fabiensanglard.net/shadowmappingPCF/\n\n              float shadow = 0.0;\n\n             float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n              float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n                float dx0 = -1.0 * xPixelOffset;\n              float dy0 = -1.0 * yPixelOffset;\n              float dx1 = 1.0 * xPixelOffset;\n               float dy1 = 1.0 * yPixelOffset;\n\n             mat3 shadowKernel;\n                mat3 depthKernel;\n\n               depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n                depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n                depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n                depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n                depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n               depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n                depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n                depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n                depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n              vec3 shadowZ = vec3( shadowCoord.z );\n             shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n               shadowKernel[0] *= vec3(0.25);\n\n              shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n               shadowKernel[1] *= vec3(0.25);\n\n              shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n               shadowKernel[2] *= vec3(0.25);\n\n              vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n             shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n             shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n               vec4 shadowValues;\n                shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n                shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n                shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n                shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n              shadow = dot( shadowValues, vec4( 1.0 ) );\n\n              shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n         #else\n\n               vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n             float fDepth = unpackDepth( rgbaDepth );\n\n                if ( fDepth < shadowCoord.z )\n\n       // spot with multiple shadows is darker\n\n                 shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n      // spot with multiple shadows has the same color as single shadow spot\n\n      //                  shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n          #endif\n\n      }\n\n\n     #ifdef SHADOWMAP_DEBUG\n\n          #ifdef SHADOWMAP_CASCADE\n\n                if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n         #else\n\n               if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n            #endif\n\n      #endif\n\n  }\n\n   #ifdef GAMMA_OUTPUT\n\n     shadowColor *= shadowColor;\n\n #endif\n\n  gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n";THREE.ShaderChunk["worldpos_vertex"]="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n  #ifdef USE_SKINNING\n\n     vec4 worldPosition = modelMatrix * skinned;\n\n #endif\n\n  #if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n        vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n    #endif\n\n  #if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\n\n      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n   #endif\n\n#endif";THREE.ShaderChunk["shadowmap_pars_fragment"]="#ifdef USE_SHADOWMAP\n\n    uniform sampler2D shadowMap[ MAX_SHADOWS ];\n   uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n  uniform float shadowDarkness[ MAX_SHADOWS ];\n  uniform float shadowBias[ MAX_SHADOWS ];\n\n    varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n   float unpackDepth( const in vec4 rgba_depth ) {\n\n     const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n        float depth = dot( rgba_depth, bit_shift );\n       return depth;\n\n   }\n\n#endif";THREE.ShaderChunk["skinning_pars_vertex"]="#ifdef USE_SKINNING\n\n uniform mat4 bindMatrix;\n  uniform mat4 bindMatrixInverse;\n\n #ifdef BONE_TEXTURE\n\n     uniform sampler2D boneTexture;\n        uniform int boneTextureWidth;\n     uniform int boneTextureHeight;\n\n      mat4 getBoneMatrix( const in float i ) {\n\n            float j = i * 4.0;\n            float x = mod( j, float( boneTextureWidth ) );\n            float y = floor( j / float( boneTextureWidth ) );\n\n           float dx = 1.0 / float( boneTextureWidth );\n           float dy = 1.0 / float( boneTextureHeight );\n\n            y = dy * ( y + 0.5 );\n\n           vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n          vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n          vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n          vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n            mat4 bone = mat4( v1, v2, v3, v4 );\n\n         return bone;\n\n        }\n\n   #else\n\n       uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n       mat4 getBoneMatrix( const in float i ) {\n\n            mat4 bone = boneGlobalMatrices[ int(i) ];\n         return bone;\n\n        }\n\n   #endif\n\n#endif\n";THREE.ShaderChunk["logdepthbuf_pars_fragment"]="#ifdef USE_LOGDEPTHBUF\n\n  uniform float logDepthBufFC;\n\n    #ifdef USE_LOGDEPTHBUF_EXT\n\n      #extension GL_EXT_frag_depth : enable\n     varying float vFragDepth;\n\n   #endif\n\n#endif";THREE.ShaderChunk["alphamap_fragment"]="#ifdef USE_ALPHAMAP\n\n   gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n";THREE.ShaderChunk["alphamap_pars_fragment"]="#ifdef USE_ALPHAMAP\n\n   uniform sampler2D alphaMap;\n\n#endif\n";THREE.UniformsUtils={merge:function(e){var t={};for(var n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r){t[i]=r[i]}}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];if(i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix4||i instanceof THREE.Texture){t[n][r]=i.clone()}else if(i instanceof Array){t[n][r]=i.slice()}else{t[n][r]=i}}}return t}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["common"],THREE.UniformsLib["fog"],THREE.UniformsLib["shadowmap"]]),vertexShader:[THREE.ShaderChunk["map_pars_vertex"],THREE.ShaderChunk["lightmap_pars_vertex"],THREE.ShaderChunk["envmap_pars_vertex"],THREE.ShaderChunk["color_pars_vertex"],THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["skinning_pars_vertex"],THREE.ShaderChunk["shadowmap_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["map_vertex"],THREE.ShaderChunk["lightmap_vertex"],THREE.ShaderChunk["color_vertex"],THREE.ShaderChunk["skinbase_vertex"]," #ifdef USE_ENVMAP",THREE.ShaderChunk["morphnormal_vertex"],THREE.ShaderChunk["skinnormal_vertex"],THREE.ShaderChunk["defaultnormal_vertex"],"   #endif",THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["skinning_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],THREE.ShaderChunk["worldpos_vertex"],THREE.ShaderChunk["envmap_vertex"],THREE.ShaderChunk["shadowmap_vertex"],"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk["color_pars_fragment"],THREE.ShaderChunk["map_pars_fragment"],THREE.ShaderChunk["alphamap_pars_fragment"],THREE.ShaderChunk["lightmap_pars_fragment"],THREE.ShaderChunk["envmap_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["shadowmap_pars_fragment"],THREE.ShaderChunk["specularmap_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {","   gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],THREE.ShaderChunk["map_fragment"],THREE.ShaderChunk["alphamap_fragment"],THREE.ShaderChunk["alphatest_fragment"],THREE.ShaderChunk["specularmap_fragment"],THREE.ShaderChunk["lightmap_fragment"],THREE.ShaderChunk["color_fragment"],THREE.ShaderChunk["envmap_fragment"],THREE.ShaderChunk["shadowmap_fragment"],THREE.ShaderChunk["linear_to_gamma_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["common"],THREE.UniformsLib["fog"],THREE.UniformsLib["lights"],THREE.UniformsLib["shadowmap"],{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED"," varying vec3 vLightBack;","#endif",THREE.ShaderChunk["map_pars_vertex"],THREE.ShaderChunk["lightmap_pars_vertex"],THREE.ShaderChunk["envmap_pars_vertex"],THREE.ShaderChunk["lights_lambert_pars_vertex"],THREE.ShaderChunk["color_pars_vertex"],THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["skinning_pars_vertex"],THREE.ShaderChunk["shadowmap_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["map_vertex"],THREE.ShaderChunk["lightmap_vertex"],THREE.ShaderChunk["color_vertex"],THREE.ShaderChunk["morphnormal_vertex"],THREE.ShaderChunk["skinbase_vertex"],THREE.ShaderChunk["skinnormal_vertex"],THREE.ShaderChunk["defaultnormal_vertex"],THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["skinning_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],THREE.ShaderChunk["worldpos_vertex"],THREE.ShaderChunk["envmap_vertex"],THREE.ShaderChunk["lights_lambert_vertex"],THREE.ShaderChunk["shadowmap_vertex"],"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED"," varying vec3 vLightBack;","#endif",THREE.ShaderChunk["color_pars_fragment"],THREE.ShaderChunk["map_pars_fragment"],THREE.ShaderChunk["alphamap_pars_fragment"],THREE.ShaderChunk["lightmap_pars_fragment"],THREE.ShaderChunk["envmap_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["shadowmap_pars_fragment"],THREE.ShaderChunk["specularmap_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {","    gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],THREE.ShaderChunk["map_fragment"],THREE.ShaderChunk["alphamap_fragment"],THREE.ShaderChunk["alphatest_fragment"],THREE.ShaderChunk["specularmap_fragment"],"    #ifdef DOUBLE_SIDED","      if ( gl_FrontFacing )","            gl_FragColor.xyz *= vLightFront;","     else","         gl_FragColor.xyz *= vLightBack;","  #else","        gl_FragColor.xyz *= vLightFront;"," #endif",THREE.ShaderChunk["lightmap_fragment"],THREE.ShaderChunk["color_fragment"],THREE.ShaderChunk["envmap_fragment"],THREE.ShaderChunk["shadowmap_fragment"],THREE.ShaderChunk["linear_to_gamma_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["common"],THREE.UniformsLib["bump"],THREE.UniformsLib["normalmap"],THREE.UniformsLib["fog"],THREE.UniformsLib["lights"],THREE.UniformsLib["shadowmap"],{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk["map_pars_vertex"],THREE.ShaderChunk["lightmap_pars_vertex"],THREE.ShaderChunk["envmap_pars_vertex"],THREE.ShaderChunk["lights_phong_pars_vertex"],THREE.ShaderChunk["color_pars_vertex"],THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["skinning_pars_vertex"],THREE.ShaderChunk["shadowmap_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["map_vertex"],THREE.ShaderChunk["lightmap_vertex"],THREE.ShaderChunk["color_vertex"],THREE.ShaderChunk["morphnormal_vertex"],THREE.ShaderChunk["skinbase_vertex"],THREE.ShaderChunk["skinnormal_vertex"],THREE.ShaderChunk["defaultnormal_vertex"],"  vNormal = normalize( transformedNormal );",THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["skinning_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],"   vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk["worldpos_vertex"],THREE.ShaderChunk["envmap_vertex"],THREE.ShaderChunk["lights_phong_vertex"],THREE.ShaderChunk["shadowmap_vertex"],"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk["color_pars_fragment"],THREE.ShaderChunk["map_pars_fragment"],THREE.ShaderChunk["alphamap_pars_fragment"],THREE.ShaderChunk["lightmap_pars_fragment"],THREE.ShaderChunk["envmap_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["lights_phong_pars_fragment"],THREE.ShaderChunk["shadowmap_pars_fragment"],THREE.ShaderChunk["bumpmap_pars_fragment"],THREE.ShaderChunk["normalmap_pars_fragment"],THREE.ShaderChunk["specularmap_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {","    gl_FragColor = vec4( vec3( 1.0 ), opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],THREE.ShaderChunk["map_fragment"],THREE.ShaderChunk["alphamap_fragment"],THREE.ShaderChunk["alphatest_fragment"],THREE.ShaderChunk["specularmap_fragment"],THREE.ShaderChunk["lights_phong_fragment"],THREE.ShaderChunk["lightmap_fragment"],THREE.ShaderChunk["color_fragment"],THREE.ShaderChunk["envmap_fragment"],THREE.ShaderChunk["shadowmap_fragment"],THREE.ShaderChunk["linear_to_gamma_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["particle"],THREE.UniformsLib["shadowmap"]]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk["color_pars_vertex"],THREE.ShaderChunk["shadowmap_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["color_vertex"]," vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","   #ifdef USE_SIZEATTENUATION","       gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","  #else","        gl_PointSize = size;"," #endif","   gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk["logdepthbuf_vertex"],THREE.ShaderChunk["worldpos_vertex"],THREE.ShaderChunk["shadowmap_vertex"],"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk["color_pars_fragment"],THREE.ShaderChunk["map_particle_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["shadowmap_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {"," gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],THREE.ShaderChunk["map_particle_fragment"],THREE.ShaderChunk["alphatest_fragment"],THREE.ShaderChunk["color_fragment"],THREE.ShaderChunk["shadowmap_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["common"],THREE.UniformsLib["fog"],{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk["color_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["color_vertex"],"    vLineDistance = scale * lineDistance;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","   gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk["logdepthbuf_vertex"],"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk["color_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {"," if ( mod( vLineDistance, totalSize ) > dashSize ) {","      discard;"," }","    gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],THREE.ShaderChunk["color_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {",THREE.ShaderChunk["logdepthbuf_fragment"]," #ifdef USE_LOGDEPTHBUF_EXT","       float depth = gl_FragDepthEXT / gl_FragCoord.w;","  #else","        float depth = gl_FragCoord.z / gl_FragCoord.w;","   #endif","   float color = 1.0 - smoothstep( mNear, mFar, depth );","    gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {","    vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {","    gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk["logdepthbuf_fragment"],"}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib["fog"],THREE.UniformsLib["lights"],THREE.UniformsLib["shadowmap"],{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0"," uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","    uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0"," uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];"," uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","  uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","    uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","    uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];"," uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0"," uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","  uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","   uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","  uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","  uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","  uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","    uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk["shadowmap_pars_fragment"],THREE.ShaderChunk["fog_pars_fragment"],THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {",THREE.ShaderChunk["logdepthbuf_fragment"]," gl_FragColor = vec4( vec3( 1.0 ), opacity );"," vec3 specularTex = vec3( 1.0 );","  vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","  normalTex.xy *= uNormalScale;","    normalTex = normalize( normalTex );","  if( enableDiffuse ) {","        #ifdef GAMMA_INPUT","           vec4 texelColor = texture2D( tDiffuse, vUv );","            texelColor.xyz *= texelColor.xyz;","            gl_FragColor = gl_FragColor * texelColor;","        #else","            gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","        #endif","   }","    if( enableAO ) {","     #ifdef GAMMA_INPUT","           vec4 aoColor = texture2D( tAO, vUv );","            aoColor.xyz *= aoColor.xyz;","          gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","       #else","            gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","     #endif","   }",THREE.ShaderChunk["alphatest_fragment"],"    if( enableSpecular )","     specularTex = texture2D( tSpecular, vUv ).xyz;","   mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","  vec3 finalNormal = tsb * normalTex;","  #ifdef FLIP_SIDED","        finalNormal = -finalNormal;","  #endif","   vec3 normal = normalize( finalNormal );","  vec3 viewPosition = normalize( vViewPosition );","  #if MAX_POINT_LIGHTS > 0","     vec3 pointDiffuse = vec3( 0.0 );","     vec3 pointSpecular = vec3( 0.0 );","        for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","          vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","          vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","            float pointDistance = 1.0;","           if ( pointLightDistance[ i ] > 0.0 )","             pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","           pointVector = normalize( pointVector );","          #ifdef WRAP_AROUND","               float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","               float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","               vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","            #else","                float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","           #endif","           pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","         vec3 pointHalfVector = normalize( pointVector + viewPosition );","          float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","           float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","            float specularNormalization = ( shininess + 2.0 ) / 8.0;","         vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( pointVector, pointHalfVector ), 0.0 ), 5.0 );","            pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","      }","    #endif","   #if MAX_SPOT_LIGHTS > 0","      vec3 spotDiffuse = vec3( 0.0 );","      vec3 spotSpecular = vec3( 0.0 );","     for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","           vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","           vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","         float spotDistance = 1.0;","            if ( spotLightDistance[ i ] > 0.0 )","              spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","          spotVector = normalize( spotVector );","            float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","         if ( spotEffect > spotLightAngleCos[ i ] ) {","             spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );","              #ifdef WRAP_AROUND","                   float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","                 float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","                 vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","               #else","                    float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","             #endif","               spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","                vec3 spotHalfVector = normalize( spotVector + viewPosition );","                float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","             float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","              float specularNormalization = ( shininess + 2.0 ) / 8.0;","             vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( spotVector, spotHalfVector ), 0.0 ), 5.0 );","              spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","          }","        }","    #endif","   #if MAX_DIR_LIGHTS > 0","       vec3 dirDiffuse = vec3( 0.0 );","       vec3 dirSpecular = vec3( 0.0 );","      for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","          vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","          vec3 dirVector = normalize( lDirection.xyz );","            #ifdef WRAP_AROUND","               float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","              float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","              vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","            #else","                float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","           #endif","           dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","           vec3 dirHalfVector = normalize( dirVector + viewPosition );","          float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","           float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","            float specularNormalization = ( shininess + 2.0 ) / 8.0;","         vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );","            dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","      }","    #endif","   #if MAX_HEMI_LIGHTS > 0","      vec3 hemiDiffuse = vec3( 0.0 );","      vec3 hemiSpecular = vec3( 0.0 );","     for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","            vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","           vec3 lVector = normalize( lDirection.xyz );","          float dotProduct = dot( normal, lVector );","           float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","            vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","            hemiDiffuse += diffuse * hemiColor;","          vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","            float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","           float hemiSpecularWeightSky = specularTex.r * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );","            vec3 lVectorGround = -lVector;","           vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","           float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","         float hemiSpecularWeightGround = specularTex.r * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );","          float dotProductGround = dot( normal, lVectorGround );","           float specularNormalization = ( shininess + 2.0 ) / 8.0;","         vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );","           vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );","           hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","       }","    #endif","   vec3 totalDiffuse = vec3( 0.0 );"," vec3 totalSpecular = vec3( 0.0 );","    #if MAX_DIR_LIGHTS > 0","       totalDiffuse += dirDiffuse;","      totalSpecular += dirSpecular;","    #endif","   #if MAX_HEMI_LIGHTS > 0","      totalDiffuse += hemiDiffuse;","     totalSpecular += hemiSpecular;","   #endif","   #if MAX_POINT_LIGHTS > 0","     totalDiffuse += pointDiffuse;","        totalSpecular += pointSpecular;","  #endif","   #if MAX_SPOT_LIGHTS > 0","      totalDiffuse += spotDiffuse;","     totalSpecular += spotSpecular;","   #endif","   #ifdef METAL","     gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","    #else","        gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","    #endif","   if ( enableReflection ) {","        vec3 vReflect;","       vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","      if ( useRefract ) {","          vReflect = refract( cameraToVertex, normal, refractionRatio );","       } else {","         vReflect = reflect( cameraToVertex, normal );","        }","        vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","     #ifdef GAMMA_INPUT","           cubeColor.xyz *= cubeColor.xyz;","      #endif","       gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );"," }",THREE.ShaderChunk["shadowmap_fragment"],THREE.ShaderChunk["linear_to_gamma_fragment"],THREE.ShaderChunk["fog_fragment"],"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","    uniform sampler2D tDisplacement;"," uniform float uDisplacementScale;","    uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk["skinning_pars_vertex"],THREE.ShaderChunk["shadowmap_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["skinbase_vertex"],THREE.ShaderChunk["skinnormal_vertex"],"  #ifdef USE_SKINNING","      vNormal = normalize( normalMatrix * skinnedNormal.xyz );","     vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","     vTangent = normalize( normalMatrix * skinnedTangent.xyz );","   #else","        vNormal = normalize( normalMatrix * normal );","        vTangent = normalize( normalMatrix * tangent.xyz );","  #endif","   vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );"," vUv = uv * uRepeat + uOffset;","    vec3 displacedPosition;","  #ifdef VERTEX_TEXTURES","       if ( enableDisplacement ) {","          vec3 dv = texture2D( tDisplacement, uv ).xyz;","            float df = uDisplacementScale * dv.x + uDisplacementBias;","            displacedPosition = position + normalize( normal ) * df;","     } else {","         #ifdef USE_SKINNING","              vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","                vec4 skinned = vec4( 0.0 );","              skinned += boneMatX * skinVertex * skinWeight.x;","             skinned += boneMatY * skinVertex * skinWeight.y;","             skinned += boneMatZ * skinVertex * skinWeight.z;","             skinned += boneMatW * skinVertex * skinWeight.w;","             skinned  = bindMatrixInverse * skinned;","              displacedPosition = skinned.xyz;","         #else","                displacedPosition = position;","            #endif","       }","    #else","        #ifdef USE_SKINNING","          vec4 skinVertex = bindMatrix * vec4( position, 1.0 );","            vec4 skinned = vec4( 0.0 );","          skinned += boneMatX * skinVertex * skinWeight.x;","         skinned += boneMatY * skinVertex * skinWeight.y;","         skinned += boneMatZ * skinVertex * skinWeight.z;","         skinned += boneMatW * skinVertex * skinWeight.w;","         skinned  = bindMatrixInverse * skinned;","          displacedPosition = skinned.xyz;","     #else","            displacedPosition = position;","        #endif","   #endif","   vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","  vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","   gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk["logdepthbuf_vertex"]," vWorldPosition = worldPosition.xyz;","  vViewPosition = -mvPosition.xyz;"," #ifdef USE_SHADOWMAP","     for( int i = 0; i < MAX_SHADOWS; i ++ ) {","            vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","       }","    #endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","    vWorldPosition = worldPosition.xyz;","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk["logdepthbuf_vertex"],"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk["logdepthbuf_pars_fragment"],"void main() {","  gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk["logdepthbuf_fragment"],"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk["morphtarget_pars_vertex"],THREE.ShaderChunk["skinning_pars_vertex"],THREE.ShaderChunk["logdepthbuf_pars_vertex"],"void main() {",THREE.ShaderChunk["skinbase_vertex"],THREE.ShaderChunk["morphtarget_vertex"],THREE.ShaderChunk["skinning_vertex"],THREE.ShaderChunk["default_vertex"],THREE.ShaderChunk["logdepthbuf_vertex"],"}"].join("\n"),fragmentShader:[THREE.ShaderChunk["logdepthbuf_pars_fragment"],"vec4 pack_depth( const in float depth ) {","   const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );"," const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","    vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","    res -= res.xxyz * bit_mask;","  return res;","}","void main() {",THREE.ShaderChunk["logdepthbuf_fragment"],"    #ifdef USE_LOGDEPTHBUF_EXT","       gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","    #else","        gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );"," #endif","}"].join("\n")}};THREE.WebGLRenderer=function(e){function st(){tt.clearColor(0,0,0,1);tt.clearDepth(1);tt.clearStencil(0);tt.enable(tt.DEPTH_TEST);tt.depthFunc(tt.LEQUAL);tt.frontFace(tt.CCW);tt.cullFace(tt.BACK);tt.enable(tt.CULL_FACE);tt.enable(tt.BLEND);tt.blendEquation(tt.FUNC_ADD);tt.blendFunc(tt.SRC_ALPHA,tt.ONE_MINUS_SRC_ALPHA);tt.viewport(q,R,U,z);tt.clearColor(c.r,c.g,c.b,h)}function Tt(e){e.__webglVertexBuffer=tt.createBuffer();e.__webglColorBuffer=tt.createBuffer();w.info.memory.geometries++}function Nt(e){e.__webglVertexBuffer=tt.createBuffer();e.__webglColorBuffer=tt.createBuffer();e.__webglLineDistanceBuffer=tt.createBuffer();w.info.memory.geometries++}function Ct(e){e.__webglVertexBuffer=tt.createBuffer();e.__webglNormalBuffer=tt.createBuffer();e.__webglTangentBuffer=tt.createBuffer();e.__webglColorBuffer=tt.createBuffer();e.__webglUVBuffer=tt.createBuffer();e.__webglUV2Buffer=tt.createBuffer();e.__webglSkinIndicesBuffer=tt.createBuffer();e.__webglSkinWeightsBuffer=tt.createBuffer();e.__webglFaceBuffer=tt.createBuffer();e.__webglLineBuffer=tt.createBuffer();var t,n;if(e.numMorphTargets){e.__webglMorphTargetsBuffers=[];for(t=0,n=e.numMorphTargets;t<n;t++){e.__webglMorphTargetsBuffers.push(tt.createBuffer())}}if(e.numMorphNormals){e.__webglMorphNormalsBuffers=[];for(t=0,n=e.numMorphNormals;t<n;t++){e.__webglMorphNormalsBuffers.push(tt.createBuffer())}}w.info.memory.geometries++}function jt(e){var t=e.geometry;var n=e.material;var r=t.vertices.length;if(n.attributes){if(t.__webglCustomAttributesList===undefined){t.__webglCustomAttributesList=[]}for(var i in n.attributes){var s=n.attributes[i];if(!s.__webglInitialized||s.createUniqueBuffers){s.__webglInitialized=true;var o=1;if(s.type==="v2")o=2;else if(s.type==="v3")o=3;else if(s.type==="v4")o=4;else if(s.type==="c")o=3;s.size=o;s.array=new Float32Array(r*o);s.buffer=tt.createBuffer();s.buffer.belongsToAttribute=i;s.needsUpdate=true}t.__webglCustomAttributesList.push(s)}}}function Ft(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(n*3);e.__colorArray=new Float32Array(n*3);e.__sortArray=[];e.__webglParticleCount=n;jt(t)}function It(e,t){var n=e.vertices.length;e.__vertexArray=new Float32Array(n*3);e.__colorArray=new Float32Array(n*3);e.__lineDistanceArray=new Float32Array(n*1);e.__webglLineCount=n;jt(t)}function qt(e,t){var n=t.geometry,r=e.faces3,i=r.length*3,s=r.length*1,o=r.length*3,u=Rt(t,e);e.__vertexArray=new Float32Array(i*3);e.__normalArray=new Float32Array(i*3);e.__colorArray=new Float32Array(i*3);e.__uvArray=new Float32Array(i*2);if(n.faceVertexUvs.length>1){e.__uv2Array=new Float32Array(i*2)}if(n.hasTangents){e.__tangentArray=new Float32Array(i*4)}if(t.geometry.skinWeights.length&&t.geometry.skinIndices.length){e.__skinIndexArray=new Float32Array(i*4);e.__skinWeightArray=new Float32Array(i*4)}var a=it.get("OES_element_index_uint")!==null&&s>21845?Uint32Array:Uint16Array;e.__typeArray=a;e.__faceArray=new a(s*3);e.__lineArray=new a(o*2);var f,l;if(e.numMorphTargets){e.__morphTargetsArrays=[];for(f=0,l=e.numMorphTargets;f<l;f++){e.__morphTargetsArrays.push(new Float32Array(i*3))}}if(e.numMorphNormals){e.__morphNormalsArrays=[];for(f=0,l=e.numMorphNormals;f<l;f++){e.__morphNormalsArrays.push(new Float32Array(i*3))}}e.__webglFaceCount=s*3;e.__webglLineCount=o*2;if(u.attributes){if(e.__webglCustomAttributesList===undefined){e.__webglCustomAttributesList=[]}for(var c in u.attributes){var h=u.attributes[c];var p={};for(var d in h){p[d]=h[d]}if(!p.__webglInitialized||p.createUniqueBuffers){p.__webglInitialized=true;var v=1;if(p.type==="v2")v=2;else if(p.type==="v3")v=3;else if(p.type==="v4")v=4;else if(p.type==="c")v=3;p.size=v;p.array=new Float32Array(i*v);p.buffer=tt.createBuffer();p.buffer.belongsToAttribute=c;h.needsUpdate=true;p.__original=h}e.__webglCustomAttributesList.push(p)}}e.__inittedArrays=true}function Rt(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function Ut(e){return e&&e.shading!==undefined&&e.shading===THREE.SmoothShading}function zt(e,t,n){var r,i,s,o,u,a,f=e.vertices,l=f.length,c=e.colors,h=c.length,p=e.__vertexArray,d=e.__colorArray,v=e.__sortArray,m=e.verticesNeedUpdate,g=e.elementsNeedUpdate,y=e.colorsNeedUpdate,b=e.__webglCustomAttributesList,w,E,S,x,T,N,C;if(n.sortParticles){Q.copy(K);Q.multiply(n.matrixWorld);for(r=0;r<l;r++){s=f[r];G.copy(s);G.applyProjection(Q);v[r]=[G.z,r]}v.sort(en);for(r=0;r<l;r++){s=f[v[r][1]];o=r*3;p[o]=s.x;p[o+1]=s.y;p[o+2]=s.z}for(i=0;i<h;i++){o=i*3;a=c[v[i][1]];d[o]=a.r;d[o+1]=a.g;d[o+2]=a.b}if(b){for(w=0,E=b.length;w<E;w++){C=b[w];if(!(C.boundTo===undefined||C.boundTo==="vertices"))continue;o=0;T=C.value.length;if(C.size===1){for(x=0;x<T;x++){u=v[x][1];C.array[x]=C.value[u]}}else if(C.size===2){for(x=0;x<T;x++){u=v[x][1];N=C.value[u];C.array[o]=N.x;C.array[o+1]=N.y;o+=2}}else if(C.size===3){if(C.type==="c"){for(x=0;x<T;x++){u=v[x][1];N=C.value[u];C.array[o]=N.r;C.array[o+1]=N.g;C.array[o+2]=N.b;o+=3}}else{for(x=0;x<T;x++){u=v[x][1];N=C.value[u];C.array[o]=N.x;C.array[o+1]=N.y;C.array[o+2]=N.z;o+=3}}}else if(C.size===4){for(x=0;x<T;x++){u=v[x][1];N=C.value[u];C.array[o]=N.x;C.array[o+1]=N.y;C.array[o+2]=N.z;C.array[o+3]=N.w;o+=4}}}}}else{if(m){for(r=0;r<l;r++){s=f[r];o=r*3;p[o]=s.x;p[o+1]=s.y;p[o+2]=s.z}}if(y){for(i=0;i<h;i++){a=c[i];o=i*3;d[o]=a.r;d[o+1]=a.g;d[o+2]=a.b}}if(b){for(w=0,E=b.length;w<E;w++){C=b[w];if(C.needsUpdate&&(C.boundTo===undefined||C.boundTo==="vertices")){T=C.value.length;o=0;if(C.size===1){for(x=0;x<T;x++){C.array[x]=C.value[x]}}else if(C.size===2){for(x=0;x<T;x++){N=C.value[x];C.array[o]=N.x;C.array[o+1]=N.y;o+=2}}else if(C.size===3){if(C.type==="c"){for(x=0;x<T;x++){N=C.value[x];C.array[o]=N.r;C.array[o+1]=N.g;C.array[o+2]=N.b;o+=3}}else{for(x=0;x<T;x++){N=C.value[x];C.array[o]=N.x;C.array[o+1]=N.y;C.array[o+2]=N.z;o+=3}}}else if(C.size===4){for(x=0;x<T;x++){N=C.value[x];C.array[o]=N.x;C.array[o+1]=N.y;C.array[o+2]=N.z;C.array[o+3]=N.w;o+=4}}}}}}if(m||n.sortParticles){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglVertexBuffer);tt.bufferData(tt.ARRAY_BUFFER,p,t)}if(y||n.sortParticles){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglColorBuffer);tt.bufferData(tt.ARRAY_BUFFER,d,t)}if(b){for(w=0,E=b.length;w<E;w++){C=b[w];if(C.needsUpdate||n.sortParticles){tt.bindBuffer(tt.ARRAY_BUFFER,C.buffer);tt.bufferData(tt.ARRAY_BUFFER,C.array,t)}}}}function Wt(e,t){var n,r,i,s,o,u,a=e.vertices,f=e.colors,l=e.lineDistances,c=a.length,h=f.length,p=l.length,d=e.__vertexArray,v=e.__colorArray,m=e.__lineDistanceArray,g=e.verticesNeedUpdate,y=e.colorsNeedUpdate,b=e.lineDistancesNeedUpdate,w=e.__webglCustomAttributesList,E,S,x,T,N,C,k;if(g){for(n=0;n<c;n++){s=a[n];o=n*3;d[o]=s.x;d[o+1]=s.y;d[o+2]=s.z}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglVertexBuffer);tt.bufferData(tt.ARRAY_BUFFER,d,t)}if(y){for(r=0;r<h;r++){u=f[r];o=r*3;v[o]=u.r;v[o+1]=u.g;v[o+2]=u.b}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglColorBuffer);tt.bufferData(tt.ARRAY_BUFFER,v,t)}if(b){for(i=0;i<p;i++){m[i]=l[i]}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglLineDistanceBuffer);tt.bufferData(tt.ARRAY_BUFFER,m,t)}if(w){for(E=0,S=w.length;E<S;E++){k=w[E];if(k.needsUpdate&&(k.boundTo===undefined||k.boundTo==="vertices")){o=0;N=k.value.length;if(k.size===1){for(T=0;T<N;T++){k.array[T]=k.value[T]}}else if(k.size===2){for(T=0;T<N;T++){C=k.value[T];k.array[o]=C.x;k.array[o+1]=C.y;o+=2}}else if(k.size===3){if(k.type==="c"){for(T=0;T<N;T++){C=k.value[T];k.array[o]=C.r;k.array[o+1]=C.g;k.array[o+2]=C.b;o+=3}}else{for(T=0;T<N;T++){C=k.value[T];k.array[o]=C.x;k.array[o+1]=C.y;k.array[o+2]=C.z;o+=3}}}else if(k.size===4){for(T=0;T<N;T++){C=k.value[T];k.array[o]=C.x;k.array[o+1]=C.y;k.array[o+2]=C.z;k.array[o+3]=C.w;o+=4}}tt.bindBuffer(tt.ARRAY_BUFFER,k.buffer);tt.bufferData(tt.ARRAY_BUFFER,k.array,t)}}}}function Xt(e,t,n,r,i){if(!e.__inittedArrays){return}var s=Ut(i);var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,nt,rt,it,st,ot,ut,at,ft,lt=0,ct=0,ht=0,pt=0,dt=0,vt=0,mt=0,gt=0,yt=0,bt=0,wt=0,Et=0,St=0,xt,Tt=e.__vertexArray,Nt=e.__uvArray,Ct=e.__uv2Array,kt=e.__normalArray,Lt=e.__tangentArray,At=e.__colorArray,Ot=e.__skinIndexArray,Mt=e.__skinWeightArray,_t=e.__morphTargetsArrays,Dt=e.__morphNormalsArrays,Pt=e.__webglCustomAttributesList,Ht,Bt=e.__faceArray,jt=e.__lineArray,Ft=t.geometry,It=Ft.verticesNeedUpdate,qt=Ft.elementsNeedUpdate,Rt=Ft.uvsNeedUpdate,zt=Ft.normalsNeedUpdate,Wt=Ft.tangentsNeedUpdate,Xt=Ft.colorsNeedUpdate,Vt=Ft.morphTargetsNeedUpdate,$t=Ft.vertices,Jt=e.faces3,Kt=Ft.faces,Qt=Ft.faceVertexUvs[0],Gt=Ft.faceVertexUvs[1],Yt=Ft.colors,Zt=Ft.skinIndices,en=Ft.skinWeights,tn=Ft.morphTargets,nn=Ft.morphNormals;if(It){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];y=$t[f.a];b=$t[f.b];w=$t[f.c];Tt[ct]=y.x;Tt[ct+1]=y.y;Tt[ct+2]=y.z;Tt[ct+3]=b.x;Tt[ct+4]=b.y;Tt[ct+5]=b.z;Tt[ct+6]=w.x;Tt[ct+7]=w.y;Tt[ct+8]=w.z;ct+=9}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglVertexBuffer);tt.bufferData(tt.ARRAY_BUFFER,Tt,n)}if(Vt){for(rt=0,it=tn.length;rt<it;rt++){wt=0;for(o=0,u=Jt.length;o<u;o++){ut=Jt[o];f=Kt[ut];y=tn[rt].vertices[f.a];b=tn[rt].vertices[f.b];w=tn[rt].vertices[f.c];st=_t[rt];st[wt]=y.x;st[wt+1]=y.y;st[wt+2]=y.z;st[wt+3]=b.x;st[wt+4]=b.y;st[wt+5]=b.z;st[wt+6]=w.x;st[wt+7]=w.y;st[wt+8]=w.z;if(i.morphNormals){if(s){at=nn[rt].vertexNormals[ut];C=at.a;k=at.b;L=at.c}else{C=nn[rt].faceNormals[ut];k=C;L=C}ot=Dt[rt];ot[wt]=C.x;ot[wt+1]=C.y;ot[wt+2]=C.z;ot[wt+3]=k.x;ot[wt+4]=k.y;ot[wt+5]=k.z;ot[wt+6]=L.x;ot[wt+7]=L.y;ot[wt+8]=L.z}wt+=9}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[rt]);tt.bufferData(tt.ARRAY_BUFFER,_t[rt],n);if(i.morphNormals){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[rt]);tt.bufferData(tt.ARRAY_BUFFER,Dt[rt],n)}}}if(en.length){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];D=en[f.a];P=en[f.b];H=en[f.c];Mt[bt]=D.x;Mt[bt+1]=D.y;Mt[bt+2]=D.z;Mt[bt+3]=D.w;Mt[bt+4]=P.x;Mt[bt+5]=P.y;Mt[bt+6]=P.z;Mt[bt+7]=P.w;Mt[bt+8]=H.x;Mt[bt+9]=H.y;Mt[bt+10]=H.z;Mt[bt+11]=H.w;j=Zt[f.a];F=Zt[f.b];I=Zt[f.c];Ot[bt]=j.x;Ot[bt+1]=j.y;Ot[bt+2]=j.z;Ot[bt+3]=j.w;Ot[bt+4]=F.x;Ot[bt+5]=F.y;Ot[bt+6]=F.z;Ot[bt+7]=F.w;Ot[bt+8]=I.x;Ot[bt+9]=I.y;Ot[bt+10]=I.z;Ot[bt+11]=I.w;bt+=12}if(bt>0){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglSkinIndicesBuffer);tt.bufferData(tt.ARRAY_BUFFER,Ot,n);tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglSkinWeightsBuffer);tt.bufferData(tt.ARRAY_BUFFER,Mt,n)}}if(Xt){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];p=f.vertexColors;d=f.color;if(p.length===3&&i.vertexColors===THREE.VertexColors){O=p[0];M=p[1];_=p[2]}else{O=d;M=d;_=d}At[yt]=O.r;At[yt+1]=O.g;At[yt+2]=O.b;At[yt+3]=M.r;At[yt+4]=M.g;At[yt+5]=M.b;At[yt+6]=_.r;At[yt+7]=_.g;At[yt+8]=_.b;yt+=9}if(yt>0){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglColorBuffer);tt.bufferData(tt.ARRAY_BUFFER,At,n)}}if(Wt&&Ft.hasTangents){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];v=f.vertexTangents;S=v[0];x=v[1];T=v[2];Lt[mt]=S.x;Lt[mt+1]=S.y;Lt[mt+2]=S.z;Lt[mt+3]=S.w;Lt[mt+4]=x.x;Lt[mt+5]=x.y;Lt[mt+6]=x.z;Lt[mt+7]=x.w;Lt[mt+8]=T.x;Lt[mt+9]=T.y;Lt[mt+10]=T.z;Lt[mt+11]=T.w;mt+=12}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglTangentBuffer);tt.bufferData(tt.ARRAY_BUFFER,Lt,n)}if(zt){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];l=f.vertexNormals;c=f.normal;if(l.length===3&&s){for(G=0;G<3;G++){Z=l[G];kt[vt]=Z.x;kt[vt+1]=Z.y;kt[vt+2]=Z.z;vt+=3}}else{for(G=0;G<3;G++){kt[vt]=c.x;kt[vt+1]=c.y;kt[vt+2]=c.z;vt+=3}}}tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglNormalBuffer);tt.bufferData(tt.ARRAY_BUFFER,kt,n)}if(Rt&&Qt){for(o=0,u=Jt.length;o<u;o++){a=Jt[o];m=Qt[a];if(m===undefined)continue;for(G=0;G<3;G++){et=m[G];Nt[ht]=et.x;Nt[ht+1]=et.y;ht+=2}}if(ht>0){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglUVBuffer);tt.bufferData(tt.ARRAY_BUFFER,Nt,n)}}if(Rt&&Gt){for(o=0,u=Jt.length;o<u;o++){a=Jt[o];g=Gt[a];if(g===undefined)continue;for(G=0;G<3;G++){nt=g[G];Ct[pt]=nt.x;Ct[pt+1]=nt.y;pt+=2}}if(pt>0){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglUV2Buffer);tt.bufferData(tt.ARRAY_BUFFER,Ct,n)}}if(qt){for(o=0,u=Jt.length;o<u;o++){Bt[dt]=lt;Bt[dt+1]=lt+1;Bt[dt+2]=lt+2;dt+=3;jt[gt]=lt;jt[gt+1]=lt+1;jt[gt+2]=lt;jt[gt+3]=lt+2;jt[gt+4]=lt+1;jt[gt+5]=lt+2;gt+=6;lt+=3}tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer);tt.bufferData(tt.ELEMENT_ARRAY_BUFFER,Bt,n);tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer);tt.bufferData(tt.ELEMENT_ARRAY_BUFFER,jt,n)}if(Pt){for(G=0,Y=Pt.length;G<Y;G++){Ht=Pt[G];if(!Ht.__original.needsUpdate)continue;Et=0;St=0;if(Ht.size===1){if(Ht.boundTo===undefined||Ht.boundTo==="vertices"){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];Ht.array[Et]=Ht.value[f.a];Ht.array[Et+1]=Ht.value[f.b];Ht.array[Et+2]=Ht.value[f.c];Et+=3}}else if(Ht.boundTo==="faces"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];Ht.array[Et]=xt;Ht.array[Et+1]=xt;Ht.array[Et+2]=xt;Et+=3}}}else if(Ht.size===2){if(Ht.boundTo===undefined||Ht.boundTo==="vertices"){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];y=Ht.value[f.a];b=Ht.value[f.b];w=Ht.value[f.c];Ht.array[Et]=y.x;Ht.array[Et+1]=y.y;Ht.array[Et+2]=b.x;Ht.array[Et+3]=b.y;Ht.array[Et+4]=w.x;Ht.array[Et+5]=w.y;Et+=6}}else if(Ht.boundTo==="faces"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];y=xt;b=xt;w=xt;Ht.array[Et]=y.x;Ht.array[Et+1]=y.y;Ht.array[Et+2]=b.x;Ht.array[Et+3]=b.y;Ht.array[Et+4]=w.x;Ht.array[Et+5]=w.y;Et+=6}}}else if(Ht.size===3){var rn;if(Ht.type==="c"){rn=["r","g","b"]}else{rn=["x","y","z"]}if(Ht.boundTo===undefined||Ht.boundTo==="vertices"){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];y=Ht.value[f.a];b=Ht.value[f.b];w=Ht.value[f.c];Ht.array[Et]=y[rn[0]];Ht.array[Et+1]=y[rn[1]];Ht.array[Et+2]=y[rn[2]];Ht.array[Et+3]=b[rn[0]];Ht.array[Et+4]=b[rn[1]];Ht.array[Et+5]=b[rn[2]];Ht.array[Et+6]=w[rn[0]];Ht.array[Et+7]=w[rn[1]];Ht.array[Et+8]=w[rn[2]];Et+=9}}else if(Ht.boundTo==="faces"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];y=xt;b=xt;w=xt;Ht.array[Et]=y[rn[0]];Ht.array[Et+1]=y[rn[1]];Ht.array[Et+2]=y[rn[2]];Ht.array[Et+3]=b[rn[0]];Ht.array[Et+4]=b[rn[1]];Ht.array[Et+5]=b[rn[2]];Ht.array[Et+6]=w[rn[0]];Ht.array[Et+7]=w[rn[1]];Ht.array[Et+8]=w[rn[2]];Et+=9}}else if(Ht.boundTo==="faceVertices"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];y=xt[0];b=xt[1];w=xt[2];Ht.array[Et]=y[rn[0]];Ht.array[Et+1]=y[rn[1]];Ht.array[Et+2]=y[rn[2]];Ht.array[Et+3]=b[rn[0]];Ht.array[Et+4]=b[rn[1]];Ht.array[Et+5]=b[rn[2]];Ht.array[Et+6]=w[rn[0]];Ht.array[Et+7]=w[rn[1]];Ht.array[Et+8]=w[rn[2]];Et+=9}}}else if(Ht.size===4){if(Ht.boundTo===undefined||Ht.boundTo==="vertices"){for(o=0,u=Jt.length;o<u;o++){f=Kt[Jt[o]];y=Ht.value[f.a];b=Ht.value[f.b];w=Ht.value[f.c];Ht.array[Et]=y.x;Ht.array[Et+1]=y.y;Ht.array[Et+2]=y.z;Ht.array[Et+3]=y.w;Ht.array[Et+4]=b.x;Ht.array[Et+5]=b.y;Ht.array[Et+6]=b.z;Ht.array[Et+7]=b.w;Ht.array[Et+8]=w.x;Ht.array[Et+9]=w.y;Ht.array[Et+10]=w.z;Ht.array[Et+11]=w.w;Et+=12}}else if(Ht.boundTo==="faces"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];y=xt;b=xt;w=xt;Ht.array[Et]=y.x;Ht.array[Et+1]=y.y;Ht.array[Et+2]=y.z;Ht.array[Et+3]=y.w;Ht.array[Et+4]=b.x;Ht.array[Et+5]=b.y;Ht.array[Et+6]=b.z;Ht.array[Et+7]=b.w;Ht.array[Et+8]=w.x;Ht.array[Et+9]=w.y;Ht.array[Et+10]=w.z;Ht.array[Et+11]=w.w;Et+=12}}else if(Ht.boundTo==="faceVertices"){for(o=0,u=Jt.length;o<u;o++){xt=Ht.value[Jt[o]];y=xt[0];b=xt[1];w=xt[2];Ht.array[Et]=y.x;Ht.array[Et+1]=y.y;Ht.array[Et+2]=y.z;Ht.array[Et+3]=y.w;Ht.array[Et+4]=b.x;Ht.array[Et+5]=b.y;Ht.array[Et+6]=b.z;Ht.array[Et+7]=b.w;Ht.array[Et+8]=w.x;Ht.array[Et+9]=w.y;Ht.array[Et+10]=w.z;Ht.array[Et+11]=w.w;Et+=12}}}tt.bindBuffer(tt.ARRAY_BUFFER,Ht.buffer);tt.bufferData(tt.ARRAY_BUFFER,Ht.array,n)}}if(r){delete e.__inittedArrays;delete e.__colorArray;delete e.__normalArray;delete e.__tangentArray;delete e.__uvArray;delete e.__uv2Array;delete e.__faceArray;delete e.__vertexArray;delete e.__lineArray;delete e.__skinIndexArray;delete e.__skinWeightArray}}function Vt(e){var t=e.attributes;var n=e.attributesKeys;for(var r=0,i=n.length;r<i;r++){var s=n[r];var o=t[s];if(o.buffer===undefined){o.buffer=tt.createBuffer();o.needsUpdate=true}if(o.needsUpdate===true){var u=s==="index"?tt.ELEMENT_ARRAY_BUFFER:tt.ARRAY_BUFFER;tt.bindBuffer(u,o.buffer);tt.bufferData(u,o.array,tt.STATIC_DRAW);o.needsUpdate=false}}}function $t(e,t,n,r){var i=n.attributes;var s=t.attributes;var o=t.attributesKeys;for(var u=0,a=o.length;u<a;u++){var f=o[u];var l=s[f];if(l>=0){var c=i[f];if(c!==undefined){var h=c.itemSize;tt.bindBuffer(tt.ARRAY_BUFFER,c.buffer);Kt(l);tt.vertexAttribPointer(l,h,tt.FLOAT,false,0,r*h*4)}else if(e.defaultAttributeValues!==undefined){if(e.defaultAttributeValues[f].length===2){tt.vertexAttrib2fv(l,e.defaultAttributeValues[f])}else if(e.defaultAttributeValues[f].length===3){tt.vertexAttrib3fv(l,e.defaultAttributeValues[f])}}}}Qt()}function Jt(){for(var e=0,t=V.length;e<t;e++){V[e]=0}}function Kt(e){V[e]=1;if($[e]===0){tt.enableVertexAttribArray(e);$[e]=1}}function Qt(){for(var e=0,t=$.length;e<t;e++){if($[e]!==V[e]){tt.disableVertexAttribArray(e);$[e]=0}}}function Gt(e,t,n){var r=e.program.attributes;if(n.morphTargetBase!==-1&&r.position>=0){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[n.morphTargetBase]);Kt(r.position);tt.vertexAttribPointer(r.position,3,tt.FLOAT,false,0,0)}else if(r.position>=0){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglVertexBuffer);Kt(r.position);tt.vertexAttribPointer(r.position,3,tt.FLOAT,false,0,0)}if(n.morphTargetForcedOrder.length){var i=0;var s=n.morphTargetForcedOrder;var o=n.morphTargetInfluences;while(i<e.numSupportedMorphTargets&&i<s.length){if(r["morphTarget"+i]>=0){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[s[i]]);Kt(r["morphTarget"+i]);tt.vertexAttribPointer(r["morphTarget"+i],3,tt.FLOAT,false,0,0)}if(r["morphNormal"+i]>=0&&e.morphNormals){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[s[i]]);Kt(r["morphNormal"+i]);tt.vertexAttribPointer(r["morphNormal"+i],3,tt.FLOAT,false,0,0)}n.__webglMorphTargetInfluences[i]=o[s[i]];i++}}else{var u,a=[];var o=n.morphTargetInfluences;var f,l=o.length;for(f=0;f<l;f++){u=o[f];if(u>0){a.push([u,f])}}if(a.length>e.numSupportedMorphTargets){a.sort(en);a.length=e.numSupportedMorphTargets}else if(a.length>e.numSupportedMorphNormals){a.sort(en)}else if(a.length===0){a.push([0,0])}var c,i=0;while(i<e.numSupportedMorphTargets){if(a[i]){c=a[i][1];if(r["morphTarget"+i]>=0){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[c]);Kt(r["morphTarget"+i]);tt.vertexAttribPointer(r["morphTarget"+i],3,tt.FLOAT,false,0,0)}if(r["morphNormal"+i]>=0&&e.morphNormals){tt.bindBuffer(tt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[c]);Kt(r["morphNormal"+i]);tt.vertexAttribPointer(r["morphNormal"+i],3,tt.FLOAT,false,0,0)}n.__webglMorphTargetInfluences[i]=o[c]}else{n.__webglMorphTargetInfluences[i]=0}i++}}if(e.program.uniforms.morphTargetInfluences!==null){tt.uniform1fv(e.program.uniforms.morphTargetInfluences,n.__webglMorphTargetInfluences)}}function Yt(e,t){if(e.material.id!==t.material.id){return t.material.id-e.material.id}else if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function Zt(e,t){if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function en(e,t){return t[0]-e[0]}function tn(e,t){if(t.visible===false)return;if(t instanceof THREE.Scene||t instanceof THREE.Group){}else{un(t,e);if(t instanceof THREE.Light){p.push(t)}else if(t instanceof THREE.Sprite){y.push(t)}else if(t instanceof THREE.LensFlare){b.push(t)}else{var n=d[t.id];if(n&&(t.frustumCulled===false||J.intersectsObject(t)===true)){dn(t,e);for(var r=0,i=n.length;r<i;r++){var s=n[r];on(s);s.render=true;if(w.sortObjects===true){if(t.renderDepth!==null){s.z=t.renderDepth}else{G.setFromMatrixPosition(t.matrixWorld);G.applyProjection(K);s.z=G.z}}}}}}for(var r=0,i=t.children.length;r<i;r++){tn(e,t.children[r])}}function nn(e,t,n,r,i,s){var o;for(var u=e.length-1;u!==-1;u--){var a=e[u];var f=a.object;var l=a.buffer;Pn(f,t);if(s){o=s}else{o=a.material;if(!o)continue;if(i)w.setBlending(o.blending,o.blendEquation,o.blendSrc,o.blendDst);w.setDepthTest(o.depthTest);w.setDepthWrite(o.depthWrite);In(o.polygonOffset,o.polygonOffsetFactor,o.polygonOffsetUnits)}w.setMaterialFaces(o);if(l instanceof THREE.BufferGeometry){w.renderBufferDirect(t,n,r,o,l,f)}else{w.renderBuffer(t,n,r,o,l,f)}}}function rn(e,t,n,r,i,s,o){var u;for(var a=0,f=e.length;a<f;a++){var l=e[a];var c=l.object;if(c.visible){if(o){u=o}else{u=l[t];if(!u)continue;if(s)w.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst);w.setDepthTest(u.depthTest);w.setDepthWrite(u.depthWrite);In(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}w.renderImmediateObject(n,r,i,u,c)}}}function sn(e){var t=e.object,n=t.material;if(n.transparent){e.transparent=n;e.opaque=null}else{e.opaque=n;e.transparent=null}}function on(e){var t=e.object;var n=e.buffer;var r=t.geometry;var i=t.material;if(i instanceof THREE.MeshFaceMaterial){var s=r instanceof THREE.BufferGeometry?0:n.materialIndex;i=i.materials[s];e.material=i;if(i.transparent){g.push(e)}else{m.push(e)}}else if(i){e.material=i;if(i.transparent){g.push(e)}else{m.push(e)}}}function un(e,t){if(e.__webglInit===undefined){e.__webglInit=true;e._modelViewMatrix=new THREE.Matrix4;e._normalMatrix=new THREE.Matrix3;e.addEventListener("removed",kt)}var n=e.geometry;if(n===undefined){}else if(n.__webglInit===undefined){n.__webglInit=true;n.addEventListener("dispose",Lt);if(n instanceof THREE.BufferGeometry){}else if(e instanceof THREE.Mesh){cn(t,e,n)}else if(e instanceof THREE.Line){if(n.__webglVertexBuffer===undefined){Nt(n);It(n,e);n.verticesNeedUpdate=true;n.colorsNeedUpdate=true;n.lineDistancesNeedUpdate=true}}else if(e instanceof THREE.PointCloud){if(n.__webglVertexBuffer===undefined){Tt(n);Ft(n,e);n.verticesNeedUpdate=true;n.colorsNeedUpdate=true}}}if(e.__webglActive===undefined){e.__webglActive=true;if(e instanceof THREE.Mesh){if(n instanceof THREE.BufferGeometry){hn(d,n,e)}else if(n instanceof THREE.Geometry){var r=an[n.id];for(var i=0,s=r.length;i<s;i++){hn(d,r[i],e)}}}else if(e instanceof THREE.Line||e instanceof THREE.PointCloud){hn(d,n,e)}else if(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback){pn(v,e)}}}function ln(e,t){var n=it.get("OES_element_index_uint")?4294967296:65535;var r,i={};var s=e.morphTargets.length;var o=e.morphNormals.length;var u;var a={};var f=[];for(var l=0,c=e.faces.length;l<c;l++){var h=e.faces[l];var p=t?h.materialIndex:0;if(!(p in i)){i[p]={hash:p,counter:0}}r=i[p].hash+"_"+i[p].counter;if(!(r in a)){u={id:fn++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:s,numMorphNormals:o};a[r]=u;f.push(u)}if(a[r].vertices+3>n){i[p].counter+=1;r=i[p].hash+"_"+i[p].counter;if(!(r in a)){u={id:fn++,faces3:[],materialIndex:p,vertices:0,numMorphTargets:s,numMorphNormals:o};a[r]=u;f.push(u)}}a[r].faces3.push(l);a[r].vertices+=3}return f}function cn(e,t,n){var r=t.material,i=false;if(an[n.id]===undefined||n.groupsNeedUpdate===true){delete d[t.id];an[n.id]=ln(n,r instanceof THREE.MeshFaceMaterial);n.groupsNeedUpdate=false}var s=an[n.id];for(var o=0,u=s.length;o<u;o++){var a=s[o];if(a.__webglVertexBuffer===undefined){Ct(a);qt(a,t);n.verticesNeedUpdate=true;n.morphTargetsNeedUpdate=true;n.elementsNeedUpdate=true;n.uvsNeedUpdate=true;n.normalsNeedUpdate=true;n.tangentsNeedUpdate=true;n.colorsNeedUpdate=true;i=true}else{i=false}if(i||t.__webglActive===undefined){hn(d,a,t)}}t.__webglActive=true}function hn(e,t,n){var r=n.id;e[r]=e[r]||[];e[r].push({id:r,buffer:t,object:n,material:null,z:0})}function pn(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function dn(e,t){var n=e.geometry,r,i;if(n instanceof THREE.BufferGeometry){Vt(n)}else if(e instanceof THREE.Mesh){if(n.groupsNeedUpdate===true){cn(t,e,n)}var s=an[n.id];for(var o=0,u=s.length;o<u;o++){var a=s[o];i=Rt(e,a);if(n.groupsNeedUpdate===true){qt(a,e)}r=i.attributes&&vn(i);if(n.verticesNeedUpdate||n.morphTargetsNeedUpdate||n.elementsNeedUpdate||n.uvsNeedUpdate||n.normalsNeedUpdate||n.colorsNeedUpdate||n.tangentsNeedUpdate||r){Xt(a,e,tt.DYNAMIC_DRAW,!n.dynamic,i)}}n.verticesNeedUpdate=false;n.morphTargetsNeedUpdate=false;n.elementsNeedUpdate=false;n.uvsNeedUpdate=false;n.normalsNeedUpdate=false;n.colorsNeedUpdate=false;n.tangentsNeedUpdate=false;i.attributes&&mn(i)}else if(e instanceof THREE.Line){i=Rt(e,n);r=i.attributes&&vn(i);if(n.verticesNeedUpdate||n.colorsNeedUpdate||n.lineDistancesNeedUpdate||r){Wt(n,tt.DYNAMIC_DRAW)}n.verticesNeedUpdate=false;n.colorsNeedUpdate=false;n.lineDistancesNeedUpdate=false;i.attributes&&mn(i)}else if(e instanceof THREE.PointCloud){i=Rt(e,n);r=i.attributes&&vn(i);if(n.verticesNeedUpdate||n.colorsNeedUpdate||e.sortParticles||r){zt(n,tt.DYNAMIC_DRAW,e)}n.verticesNeedUpdate=false;n.colorsNeedUpdate=false;i.attributes&&mn(i)}}function vn(e){for(var t in e.attributes){if(e.attributes[t].needsUpdate)return true}return false}function mn(e){for(var t in e.attributes){e.attributes[t].needsUpdate=false}}function gn(e){if(e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line){delete d[e.id]}else if(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback){yn(v,e)}delete e.__webglInit;delete e._modelViewMatrix;delete e._normalMatrix;delete e.__webglActive}function yn(e,t){for(var n=e.length-1;n>=0;n--){if(e[n].object===t){e.splice(n,1)}}}function bn(e,t,n,i){e.addEventListener("dispose",Mt);var s;if(e instanceof THREE.MeshDepthMaterial){s="depth"}else if(e instanceof THREE.MeshNormalMaterial){s="normal"}else if(e instanceof THREE.MeshBasicMaterial){s="basic"}else if(e instanceof THREE.MeshLambertMaterial){s="lambert"}else if(e instanceof THREE.MeshPhongMaterial){s="phong"}else if(e instanceof THREE.LineBasicMaterial){s="basic"}else if(e instanceof THREE.LineDashedMaterial){s="dashed"}else if(e instanceof THREE.PointCloudMaterial){s="particle_basic"}if(s){var o=THREE.ShaderLib[s];e.__webglShader={uniforms:THREE.UniformsUtils.clone(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}}else{e.__webglShader={uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}}var u=Qn(t);var a=Gn(t);var f=Kn(i);var c={precision:r,supportsVertexTextures:lt,map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,vertexColors:e.vertexColors,fog:n,useFog:e.fog,fogExp:n instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:l,skinning:e.skinning,maxBones:f,useVertexTexture:ct&&i&&i.skeleton&&i.skeleton.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:w.maxMorphTargets,maxMorphNormals:w.maxMorphNormals,maxDirLights:u.directional,maxPointLights:u.point,maxSpotLights:u.spot,maxHemiLights:u.hemi,maxShadows:a,shadowMapEnabled:w.shadowMapEnabled&&i.receiveShadow&&a>0,shadowMapType:w.shadowMapType,shadowMapDebug:w.shadowMapDebug,shadowMapCascade:w.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide};var h=[];if(s){h.push(s)}else{h.push(e.fragmentShader);h.push(e.vertexShader)}if(e.defines!==undefined){for(var p in e.defines){h.push(p);h.push(e.defines[p])}}for(var p in c){h.push(p);h.push(c[p])}var d=h.join();var v;for(var m=0,g=E.length;m<g;m++){var y=E[m];if(y.code===d){v=y;v.usedTimes++;break}}if(v===undefined){v=new THREE.WebGLProgram(w,d,e,c);E.push(v);w.info.memory.programs=E.length}e.program=v;var b=v.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;var S,x="morphTarget";for(var T=0;T<w.maxMorphTargets;T++){S=x+T;if(b[S]>=0){e.numSupportedMorphTargets++}}}if(e.morphNormals){e.numSupportedMorphNormals=0;var S,x="morphNormal";for(T=0;T<w.maxMorphNormals;T++){S=x+T;if(b[S]>=0){e.numSupportedMorphNormals++}}}e.uniformsList=[];for(var N in e.__webglShader.uniforms){var C=e.program.uniforms[N];if(C){e.uniformsList.push([e.__webglShader.uniforms[N],C])}}}function wn(e,t,n,r,i){k=0;if(r.needsUpdate){if(r.program)Bt(r);bn(r,t,n,i);r.needsUpdate=false}if(r.morphTargets){if(!i.__webglMorphTargetInfluences){i.__webglMorphTargetInfluences=new Float32Array(w.maxMorphTargets)}}var s=false;var o=false;var u=false;var a=r.program,f=a.uniforms,c=r.__webglShader.uniforms;if(a.id!==S){tt.useProgram(a.program);S=a.id;s=true;o=true;u=true}if(r.id!==T){if(T===-1)u=true;T=r.id;o=true}if(s||e!==C){tt.uniformMatrix4fv(f.projectionMatrix,false,e.projectionMatrix.elements);if(l){tt.uniform1f(f.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2))}if(e!==C)C=e;if(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap){if(f.cameraPosition!==null){G.setFromMatrixPosition(e.matrixWorld);tt.uniform3f(f.cameraPosition,G.x,G.y,G.z)}}if(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning){if(f.viewMatrix!==null){tt.uniformMatrix4fv(f.viewMatrix,false,e.matrixWorldInverse.elements)}}}if(r.skinning){if(i.bindMatrix&&f.bindMatrix!==null){tt.uniformMatrix4fv(f.bindMatrix,false,i.bindMatrix.elements)}if(i.bindMatrixInverse&&f.bindMatrixInverse!==null){tt.uniformMatrix4fv(f.bindMatrixInverse,false,i.bindMatrixInverse.elements)}if(ct&&i.skeleton&&i.skeleton.useVertexTexture){if(f.boneTexture!==null){var h=_n();tt.uniform1i(f.boneTexture,h);w.setTexture(i.skeleton.boneTexture,h)}if(f.boneTextureWidth!==null){tt.uniform1i(f.boneTextureWidth,i.skeleton.boneTextureWidth)}if(f.boneTextureHeight!==null){tt.uniform1i(f.boneTextureHeight,i.skeleton.boneTextureHeight)}}else if(i.skeleton&&i.skeleton.boneMatrices){if(f.boneGlobalMatrices!==null){tt.uniformMatrix4fv(f.boneGlobalMatrices,false,i.skeleton.boneMatrices)}}}if(o){if(n&&r.fog){Nn(c,n)}if(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(Z){u=true;jn(t);Z=false}if(u){Ln(c,et);An(c,true)}else{An(c,false)}}if(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial){En(c,r)}if(r instanceof THREE.LineBasicMaterial){Sn(c,r)}else if(r instanceof THREE.LineDashedMaterial){Sn(c,r);xn(c,r)}else if(r instanceof THREE.PointCloudMaterial){Tn(c,r)}else if(r instanceof THREE.MeshPhongMaterial){Cn(c,r)}else if(r instanceof THREE.MeshLambertMaterial){kn(c,r)}else if(r instanceof THREE.MeshDepthMaterial){c.mNear.value=e.near;c.mFar.value=e.far;c.opacity.value=r.opacity}else if(r instanceof THREE.MeshNormalMaterial){c.opacity.value=r.opacity}if(i.receiveShadow&&!r._shadowPass){On(c,t)}Dn(r.uniformsList)}Mn(f,i);if(f.modelMatrix!==null){tt.uniformMatrix4fv(f.modelMatrix,false,i.matrixWorld.elements)}return a}function En(e,t){e.opacity.value=t.opacity;if(w.gammaInput){e.diffuse.value.copyGammaToLinear(t.color)}else{e.diffuse.value=t.color}e.map.value=t.map;e.lightMap.value=t.lightMap;e.specularMap.value=t.specularMap;e.alphaMap.value=t.alphaMap;if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}var n;if(t.map){n=t.map}else if(t.specularMap){n=t.specularMap}else if(t.normalMap){n=t.normalMap}else if(t.bumpMap){n=t.bumpMap}else if(t.alphaMap){n=t.alphaMap}if(n!==undefined){var r=n.offset;var i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap;e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;if(w.gammaInput){e.reflectivity.value=t.reflectivity}else{e.reflectivity.value=t.reflectivity}e.refractionRatio.value=t.refractionRatio;e.combine.value=t.combine;e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}function Sn(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function xn(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function Tn(e,n){e.psColor.value=n.color;e.opacity.value=n.opacity;e.size.value=n.size;e.scale.value=t.height/2;e.map.value=n.map}function Nn(e,t){e.fogColor.value=t.color;if(t instanceof THREE.Fog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t instanceof THREE.FogExp2){e.fogDensity.value=t.density}}function Cn(e,t){e.shininess.value=t.shininess;if(w.gammaInput){e.ambient.value.copyGammaToLinear(t.ambient);e.emissive.value.copyGammaToLinear(t.emissive);e.specular.value.copyGammaToLinear(t.specular)}else{e.ambient.value=t.ambient;e.emissive.value=t.emissive;e.specular.value=t.specular}if(t.wrapAround){e.wrapRGB.value.copy(t.wrapRGB)}}function kn(e,t){if(w.gammaInput){e.ambient.value.copyGammaToLinear(t.ambient);e.emissive.value.copyGammaToLinear(t.emissive)}else{e.ambient.value=t.ambient;e.emissive.value=t.emissive}if(t.wrapAround){e.wrapRGB.value.copy(t.wrapRGB)}}function Ln(e,t){e.ambientLightColor.value=t.ambient;e.directionalLightColor.value=t.directional.colors;e.directionalLightDirection.value=t.directional.positions;e.pointLightColor.value=t.point.colors;e.pointLightPosition.value=t.point.positions;e.pointLightDistance.value=t.point.distances;e.spotLightColor.value=t.spot.colors;e.spotLightPosition.value=t.spot.positions;e.spotLightDistance.value=t.spot.distances;e.spotLightDirection.value=t.spot.directions;e.spotLightAngleCos.value=t.spot.anglesCos;e.spotLightExponent.value=t.spot.exponents;e.hemisphereLightSkyColor.value=t.hemi.skyColors;e.hemisphereLightGroundColor.value=t.hemi.groundColors;e.hemisphereLightDirection.value=t.hemi.positions}function An(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLightColor.needsUpdate=t;e.directionalLightDirection.needsUpdate=t;e.pointLightColor.needsUpdate=t;e.pointLightPosition.needsUpdate=t;e.pointLightDistance.needsUpdate=t;e.spotLightColor.needsUpdate=t;e.spotLightPosition.needsUpdate=t;e.spotLightDistance.needsUpdate=t;e.spotLightDirection.needsUpdate=t;e.spotLightAngleCos.needsUpdate=t;e.spotLightExponent.needsUpdate=t;e.hemisphereLightSkyColor.needsUpdate=t;e.hemisphereLightGroundColor.needsUpdate=t;e.hemisphereLightDirection.needsUpdate=t}function On(e,t){if(e.shadowMatrix){var n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r];if(!s.castShadow)continue;if(s instanceof THREE.SpotLight||s instanceof THREE.DirectionalLight&&!s.shadowCascade){e.shadowMap.value[n]=s.shadowMap;e.shadowMapSize.value[n]=s.shadowMapSize;e.shadowMatrix.value[n]=s.shadowMatrix;e.shadowDarkness.value[n]=s.shadowDarkness;e.shadowBias.value[n]=s.shadowBias;n++}}}}function Mn(e,t){tt.uniformMatrix4fv(e.modelViewMatrix,false,t._modelViewMatrix.elements);if(e.normalMatrix){tt.uniformMatrix3fv(e.normalMatrix,false,t._normalMatrix.elements)}}function _n(){var e=k;if(e>=ot){console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+ot)}k+=1;return e}function Dn(e){var t,n,r;for(var i=0,s=e.length;i<s;i++){var o=e[i][0];if(o.needsUpdate===false)continue;var u=o.type;var a=o.value;var f=e[i][1];switch(u){case"1i":tt.uniform1i(f,a);break;case"1f":tt.uniform1f(f,a);break;case"2f":tt.uniform2f(f,a[0],a[1]);break;case"3f":tt.uniform3f(f,a[0],a[1],a[2]);break;case"4f":tt.uniform4f(f,a[0],a[1],a[2],a[3]);break;case"1iv":tt.uniform1iv(f,a);break;case"3iv":tt.uniform3iv(f,a);break;case"1fv":tt.uniform1fv(f,a);break;case"2fv":tt.uniform2fv(f,a);break;case"3fv":tt.uniform3fv(f,a);break;case"4fv":tt.uniform4fv(f,a);break;case"Matrix3fv":tt.uniformMatrix3fv(f,false,a);break;case"Matrix4fv":tt.uniformMatrix4fv(f,false,a);break;case"i":tt.uniform1i(f,a);break;case"f":tt.uniform1f(f,a);break;case"v2":tt.uniform2f(f,a.x,a.y);break;case"v3":tt.uniform3f(f,a.x,a.y,a.z);break;case"v4":tt.uniform4f(f,a.x,a.y,a.z,a.w);break;case"c":tt.uniform3f(f,a.r,a.g,a.b);break;case"iv1":tt.uniform1iv(f,a);break;case"iv":tt.uniform3iv(f,a);break;case"fv1":tt.uniform1fv(f,a);break;case"fv":tt.uniform3fv(f,a);break;case"v2v":if(o._array===undefined){o._array=new Float32Array(2*a.length)}for(var l=0,c=a.length;l<c;l++){r=l*2;o._array[r]=a[l].x;o._array[r+1]=a[l].y}tt.uniform2fv(f,o._array);break;case"v3v":if(o._array===undefined){o._array=new Float32Array(3*a.length)}for(var l=0,c=a.length;l<c;l++){r=l*3;o._array[r]=a[l].x;o._array[r+1]=a[l].y;o._array[r+2]=a[l].z}tt.uniform3fv(f,o._array);break;case"v4v":if(o._array===undefined){o._array=new Float32Array(4*a.length)}for(var l=0,c=a.length;l<c;l++){r=l*4;o._array[r]=a[l].x;o._array[r+1]=a[l].y;o._array[r+2]=a[l].z;o._array[r+3]=a[l].w}tt.uniform4fv(f,o._array);break;case"m3":tt.uniformMatrix3fv(f,false,a.elements);break;case"m3v":if(o._array===undefined){o._array=new Float32Array(9*a.length)}for(var l=0,c=a.length;l<c;l++){a[l].flattenToArrayOffset(o._array,l*9)}tt.uniformMatrix3fv(f,false,o._array);break;case"m4":tt.uniformMatrix4fv(f,false,a.elements);break;case"m4v":if(o._array===undefined){o._array=new Float32Array(16*a.length)}for(var l=0,c=a.length;l<c;l++){a[l].flattenToArrayOffset(o._array,l*16)}tt.uniformMatrix4fv(f,false,o._array);break;case"t":t=a;n=_n();tt.uniform1i(f,n);if(!t)continue;if(t instanceof THREE.CubeTexture||t.image instanceof Array&&t.image.length===6){Un(t,n)}else if(t instanceof THREE.WebGLRenderTargetCube){zn(t,n)}else{w.setTexture(t,n)}break;case"tv":if(o._array===undefined){o._array=[]}for(var l=0,c=o.value.length;l<c;l++){o._array[l]=_n()}tt.uniform1iv(f,o._array);for(var l=0,c=o.value.length;l<c;l++){t=o.value[l];n=o._array[l];if(!t)continue;w.setTexture(t,n)}break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+u)}}}function Pn(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld);e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function Hn(e,t,n,r){e[t]=n.r*n.r*r;e[t+1]=n.g*n.g*r;e[t+2]=n.b*n.b*r}function Bn(e,t,n,r){e[t]=n.r*r;e[t+1]=n.g*r;e[t+2]=n.b*r}function jn(e){var t,n,r,i,s=0,o=0,u=0,a,f,l,c,h,p,d,v=et,m=v.directional.colors,g=v.directional.positions,y=v.point.colors,b=v.point.positions,E=v.point.distances,S=v.spot.colors,x=v.spot.positions,T=v.spot.distances,N=v.spot.directions,C=v.spot.anglesCos,k=v.spot.exponents,L=v.hemi.skyColors,A=v.hemi.groundColors,O=v.hemi.positions,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0;for(t=0,n=e.length;t<n;t++){r=e[t];if(r.onlyShadow)continue;a=r.color;c=r.intensity;d=r.distance;if(r instanceof THREE.AmbientLight){if(!r.visible)continue;if(w.gammaInput){s+=a.r*a.r;o+=a.g*a.g;u+=a.b*a.b}else{s+=a.r;o+=a.g;u+=a.b}}else if(r instanceof THREE.DirectionalLight){H+=1;if(!r.visible)continue;Y.setFromMatrixPosition(r.matrixWorld);G.setFromMatrixPosition(r.target.matrixWorld);Y.sub(G);Y.normalize();I=M*3;g[I]=Y.x;g[I+1]=Y.y;g[I+2]=Y.z;if(w.gammaInput){Hn(m,I,a,c*c)}else{Bn(m,I,a,c)}M+=1}else if(r instanceof THREE.PointLight){B+=1;if(!r.visible)continue;q=_*3;if(w.gammaInput){Hn(y,q,a,c*c)}else{Bn(y,q,a,c)}G.setFromMatrixPosition(r.matrixWorld);b[q]=G.x;b[q+1]=G.y;b[q+2]=G.z;E[_]=d;_+=1}else if(r instanceof THREE.SpotLight){j+=1;if(!r.visible)continue;R=D*3;if(w.gammaInput){Hn(S,R,a,c*c)}else{Bn(S,R,a,c)}Y.setFromMatrixPosition(r.matrixWorld);x[R]=Y.x;x[R+1]=Y.y;x[R+2]=Y.z;T[D]=d;G.setFromMatrixPosition(r.target.matrixWorld);Y.sub(G);Y.normalize();N[R]=Y.x;N[R+1]=Y.y;N[R+2]=Y.z;C[D]=Math.cos(r.angle);k[D]=r.exponent;D+=1}else if(r instanceof THREE.HemisphereLight){F+=1;if(!r.visible)continue;Y.setFromMatrixPosition(r.matrixWorld);Y.normalize();U=P*3;O[U]=Y.x;O[U+1]=Y.y;O[U+2]=Y.z;f=r.color;l=r.groundColor;if(w.gammaInput){h=c*c;Hn(L,U,f,h);Hn(A,U,l,h)}else{Bn(L,U,f,c);Bn(A,U,l,c)}P+=1}}for(t=M*3,n=Math.max(m.length,H*3);t<n;t++)m[t]=0;for(t=_*3,n=Math.max(y.length,B*3);t<n;t++)y[t]=0;for(t=D*3,n=Math.max(S.length,j*3);t<n;t++)S[t]=0;for(t=P*3,n=Math.max(L.length,F*3);t<n;t++)L[t]=0;for(t=P*3,n=Math.max(A.length,F*3);t<n;t++)A[t]=0;v.directional.length=M;v.point.length=_;v.spot.length=D;v.hemi.length=P;v.ambient[0]=s;v.ambient[1]=o;v.ambient[2]=u}function Fn(e){if(e!==I){tt.lineWidth(e);I=e}}function In(e,t,n){if(B!==e){if(e){tt.enable(tt.POLYGON_OFFSET_FILL)}else{tt.disable(tt.POLYGON_OFFSET_FILL)}B=e}if(e&&(j!==t||F!==n)){tt.polygonOffset(t,n);j=t;F=n}}function qn(e,t,n){var r;if(n){tt.texParameteri(e,tt.TEXTURE_WRAP_S,Jn(t.wrapS));tt.texParameteri(e,tt.TEXTURE_WRAP_T,Jn(t.wrapT));tt.texParameteri(e,tt.TEXTURE_MAG_FILTER,Jn(t.magFilter));tt.texParameteri(e,tt.TEXTURE_MIN_FILTER,Jn(t.minFilter))}else{tt.texParameteri(e,tt.TEXTURE_WRAP_S,tt.CLAMP_TO_EDGE);tt.texParameteri(e,tt.TEXTURE_WRAP_T,tt.CLAMP_TO_EDGE);tt.texParameteri(e,tt.TEXTURE_MAG_FILTER,$n(t.magFilter));tt.texParameteri(e,tt.TEXTURE_MIN_FILTER,$n(t.minFilter))}r=it.get("EXT_texture_filter_anisotropic");if(r&&t.type!==THREE.FloatType){if(t.anisotropy>1||t.__oldAnisotropy){tt.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,w.getMaxAnisotropy()));t.__oldAnisotropy=t.anisotropy}}}function Rn(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height);var r=document.createElement("canvas");r.width=Math.floor(e.width*n);r.height=Math.floor(e.height*n);var i=r.getContext("2d");i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height);console.log("THREE.WebGLRenderer:",e,"is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height+".");return r}return e}function Un(e,t){if(e.image.length===6){if(e.needsUpdate){if(!e.image.__webglTextureCube){e.addEventListener("dispose",At);e.image.__webglTextureCube=tt.createTexture();w.info.memory.textures++}tt.activeTexture(tt.TEXTURE0+t);tt.bindTexture(tt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube);tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,e.flipY);var n=e instanceof THREE.CompressedTexture;var r=e.image[0]instanceof THREE.DataTexture;var i=[];for(var s=0;s<6;s++){if(w.autoScaleCubemaps&&!n&&!r){i[s]=Rn(e.image[s],ft)}else{i[s]=r?e.image[s].image:e.image[s]}}var o=i[0],u=THREE.Math.isPowerOfTwo(o.width)&&THREE.Math.isPowerOfTwo(o.height),a=Jn(e.format),f=Jn(e.type);qn(tt.TEXTURE_CUBE_MAP,e,u);for(var s=0;s<6;s++){if(!n){if(r){tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,a,i[s].width,i[s].height,0,a,f,i[s].data)}else{tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,a,a,f,i[s])}}else{var l,c=i[s].mipmaps;for(var h=0,p=c.length;h<p;h++){l=c[h];if(e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat){if(yt().indexOf(a)>-1){tt.compressedTexImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,a,l.width,l.height,0,l.data)}else{console.warn("Attempt to load unsupported compressed texture format")}}else{tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+s,h,a,l.width,l.height,0,a,f,l.data)}}}}if(e.generateMipmaps&&u){tt.generateMipmap(tt.TEXTURE_CUBE_MAP)}e.needsUpdate=false;if(e.onUpdate)e.onUpdate()}else{tt.activeTexture(tt.TEXTURE0+t);tt.bindTexture(tt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}}}function zn(e,t){tt.activeTexture(tt.TEXTURE0+t);tt.bindTexture(tt.TEXTURE_CUBE_MAP,e.__webglTexture)}function Wn(e,t,n){tt.bindFramebuffer(tt.FRAMEBUFFER,e);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,n,t.__webglTexture,0)}function Xn(e,t){tt.bindRenderbuffer(tt.RENDERBUFFER,e);if(t.depthBuffer&&!t.stencilBuffer){tt.renderbufferStorage(tt.RENDERBUFFER,tt.DEPTH_COMPONENT16,t.width,t.height);tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.RENDERBUFFER,e)}else if(t.depthBuffer&&t.stencilBuffer){tt.renderbufferStorage(tt.RENDERBUFFER,tt.DEPTH_STENCIL,t.width,t.height);tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_STENCIL_ATTACHMENT,tt.RENDERBUFFER,e)}else{tt.renderbufferStorage(tt.RENDERBUFFER,tt.RGBA4,t.width,t.height)}}function Vn(e){if(e instanceof THREE.WebGLRenderTargetCube){tt.bindTexture(tt.TEXTURE_CUBE_MAP,e.__webglTexture);tt.generateMipmap(tt.TEXTURE_CUBE_MAP);tt.bindTexture(tt.TEXTURE_CUBE_MAP,null)}else{tt.bindTexture(tt.TEXTURE_2D,e.__webglTexture);tt.generateMipmap(tt.TEXTURE_2D);tt.bindTexture(tt.TEXTURE_2D,null)}}function $n(e){if(e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter){return tt.NEAREST}return tt.LINEAR}function Jn(e){var t;if(e===THREE.RepeatWrapping)return tt.REPEAT;if(e===THREE.ClampToEdgeWrapping)return tt.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return tt.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return tt.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return tt.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return tt.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return tt.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return tt.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return tt.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return tt.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return tt.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return tt.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return tt.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return tt.BYTE;if(e===THREE.ShortType)return tt.SHORT;if(e===THREE.UnsignedShortType)return tt.UNSIGNED_SHORT;if(e===THREE.IntType)return tt.INT;if(e===THREE.UnsignedIntType)return tt.UNSIGNED_INT;if(e===THREE.FloatType)return tt.FLOAT;if(e===THREE.AlphaFormat)return tt.ALPHA;if(e===THREE.RGBFormat)return tt.RGB;if(e===THREE.RGBAFormat)return tt.RGBA;if(e===THREE.LuminanceFormat)return tt.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return tt.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return tt.FUNC_ADD;if(e===THREE.SubtractEquation)return tt.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return tt.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return tt.ZERO;if(e===THREE.OneFactor)return tt.ONE;if(e===THREE.SrcColorFactor)return tt.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return tt.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return tt.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return tt.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return tt.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return tt.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return tt.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return tt.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return tt.SRC_ALPHA_SATURATE;t=it.get("WEBGL_compressed_texture_s3tc");if(t!==null){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}t=it.get("WEBGL_compressed_texture_pvrtc");if(t!==null){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}t=it.get("EXT_blend_minmax");if(t!==null){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}function Kn(e){if(ct&&e&&e.skeleton&&e.skeleton.useVertexTexture){return 1024}else{var t=tt.getParameter(tt.MAX_VERTEX_UNIFORM_VECTORS);var n=Math.floor((t-20)/4);var r=n;if(e!==undefined&&e instanceof THREE.SkinnedMesh){r=Math.min(e.skeleton.bones.length,r);if(r<e.skeleton.bones.length){console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")}}return r}}function Qn(e){var t=0;var n=0;var r=0;var i=0;for(var s=0,o=e.length;s<o;s++){var u=e[s];if(u.onlyShadow||u.visible===false)continue;if(u instanceof THREE.DirectionalLight)t++;if(u instanceof THREE.PointLight)n++;if(u instanceof THREE.SpotLight)r++;if(u instanceof THREE.HemisphereLight)i++}return{directional:t,point:n,spot:r,hemi:i}}function Gn(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(!i.castShadow)continue;if(i instanceof THREE.SpotLight)t++;if(i instanceof THREE.DirectionalLight&&!i.shadowCascade)t++}return t}console.log("THREE.WebGLRenderer",THREE.REVISION);e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElement("canvas"),n=e.context!==undefined?e.context:null,r=e.precision!==undefined?e.precision:"highp",i=e.alpha!==undefined?e.alpha:false,s=e.depth!==undefined?e.depth:true,o=e.stencil!==undefined?e.stencil:true,u=e.antialias!==undefined?e.antialias:false,a=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:true,f=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:false,l=e.logarithmicDepthBuffer!==undefined?e.logarithmicDepthBuffer:false,c=new THREE.Color(0),h=0;var p=[];var d={};var v=[];var m=[];var g=[];var y=[];var b=[];this.domElement=t;this.context=null;this.devicePixelRatio=e.devicePixelRatio!==undefined?e.devicePixelRatio:self.devicePixelRatio!==undefined?self.devicePixelRatio:1;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.gammaInput=false;this.gammaOutput=false;this.shadowMapEnabled=false;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapDebug=false;this.shadowMapCascade=false;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=true;this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var w=this,E=[],S=null,x=null,T=-1,N=-1,C=null,k=0,L=-1,A=-1,O=-1,M=-1,_=-1,D=-1,P=-1,H=-1,B=null,j=null,F=null,I=null,q=0,R=0,U=t.width,z=t.height,W=0,X=0,V=new Uint8Array(16),$=new Uint8Array(16),J=new THREE.Frustum,K=new THREE.Matrix4,Q=new THREE.Matrix4,G=new THREE.Vector3,Y=new THREE.Vector3,Z=true,et={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};var tt;try{var nt={alpha:i,depth:s,stencil:o,antialias:u,premultipliedAlpha:a,preserveDrawingBuffer:f};tt=n||t.getContext("webgl",nt)||t.getContext("experimental-webgl",nt);if(tt===null){if(t.getContext("webgl")!==null){throw"Error creating WebGL context with your selected attributes."}else{throw"Error creating WebGL context."}}}catch(rt){console.error(rt)}if(tt.getShaderPrecisionFormat===undefined){tt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}var it=new THREE.WebGLExtensions(tt);it.get("OES_texture_float");it.get("OES_texture_float_linear");it.get("OES_standard_derivatives");if(l){it.get("EXT_frag_depth")}st();this.context=tt;var ot=tt.getParameter(tt.MAX_TEXTURE_IMAGE_UNITS);var ut=tt.getParameter(tt.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var at=tt.getParameter(tt.MAX_TEXTURE_SIZE);var ft=tt.getParameter(tt.MAX_CUBE_MAP_TEXTURE_SIZE);var lt=ut>0;var ct=lt&&it.get("OES_texture_float");var ht=tt.getShaderPrecisionFormat(tt.VERTEX_SHADER,tt.HIGH_FLOAT);var pt=tt.getShaderPrecisionFormat(tt.VERTEX_SHADER,tt.MEDIUM_FLOAT);var dt=tt.getShaderPrecisionFormat(tt.VERTEX_SHADER,tt.LOW_FLOAT);var vt=tt.getShaderPrecisionFormat(tt.FRAGMENT_SHADER,tt.HIGH_FLOAT);var mt=tt.getShaderPrecisionFormat(tt.FRAGMENT_SHADER,tt.MEDIUM_FLOAT);var gt=tt.getShaderPrecisionFormat(tt.FRAGMENT_SHADER,tt.LOW_FLOAT);var yt=function(){var e;return function(){if(e!==undefined){return e}e=[];if(it.get("WEBGL_compressed_texture_pvrtc")||it.get("WEBGL_compressed_texture_s3tc")){var t=tt.getParameter(tt.COMPRESSED_TEXTURE_FORMATS);for(var n=0;n<t.length;n++){e.push(t[n])}}return e}}();var bt=ht.precision>0&&vt.precision>0;var wt=pt.precision>0&&mt.precision>0;if(r==="highp"&&!bt){if(wt){r="mediump";console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")}else{r="lowp";console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp.")}}if(r==="mediump"&&!wt){r="lowp";console.warn("THREE.WebGLRenderer: mediump not supported, using lowp.")}var Et=new THREE.ShadowMapPlugin(this,p,d,v);var St=new THREE.SpritePlugin(this,y);var xt=new THREE.LensFlarePlugin(this,b);this.getContext=function(){return tt};this.supportsVertexTextures=function(){return lt};this.supportsFloatTextures=function(){return it.get("OES_texture_float")};this.supportsStandardDerivatives=function(){return it.get("OES_standard_derivatives")};this.supportsCompressedTextureS3TC=function(){return it.get("WEBGL_compressed_texture_s3tc")};this.supportsCompressedTexturePVRTC=function(){return it.get("WEBGL_compressed_texture_pvrtc")};this.supportsBlendMinMax=function(){return it.get("EXT_blend_minmax")};this.getMaxAnisotropy=function(){var e;return function(){if(e!==undefined){return e}var t=it.get("EXT_texture_filter_anisotropic");e=t!==null?tt.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;return e}}();this.getPrecision=function(){return r};this.setSize=function(e,n,r){t.width=e*this.devicePixelRatio;t.height=n*this.devicePixelRatio;if(r!==false){t.style.width=e+"px";t.style.height=n+"px"}this.setViewport(0,0,e,n)};this.setViewport=function(e,t,n,r){q=e*this.devicePixelRatio;R=t*this.devicePixelRatio;U=n*this.devicePixelRatio;z=r*this.devicePixelRatio;tt.viewport(q,R,U,z)};this.setScissor=function(e,t,n,r){tt.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,n*this.devicePixelRatio,r*this.devicePixelRatio)};this.enableScissorTest=function(e){e?tt.enable(tt.SCISSOR_TEST):tt.disable(tt.SCISSOR_TEST)};this.setClearColor=function(e,t){c.set(e);h=t!==undefined?t:1;tt.clearColor(c.r,c.g,c.b,h)};this.setClearColorHex=function(e,t){console.warn("THREE.WebGLRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(e,t)};this.getClearColor=function(){return c};this.getClearAlpha=function(){return h};this.clear=function(e,t,n){var r=0;if(e===undefined||e)r|=tt.COLOR_BUFFER_BIT;if(t===undefined||t)r|=tt.DEPTH_BUFFER_BIT;if(n===undefined||n)r|=tt.STENCIL_BUFFER_BIT;tt.clear(r)};this.clearColor=function(){tt.clear(tt.COLOR_BUFFER_BIT)};this.clearDepth=function(){tt.clear(tt.DEPTH_BUFFER_BIT)};this.clearStencil=function(){tt.clear(tt.STENCIL_BUFFER_BIT)};this.clearTarget=function(e,t,n,r){this.setRenderTarget(e);this.clear(t,n,r)};this.resetGLState=function(){S=null;C=null;O=-1;P=-1;H=-1;L=-1;A=-1;N=-1;T=-1;Z=true};var kt=function(e){var t=e.target;t.traverse(function(e){e.removeEventListener("remove",kt);gn(e)})};var Lt=function(e){var t=e.target;t.removeEventListener("dispose",Lt);Dt(t)};var At=function(e){var t=e.target;t.removeEventListener("dispose",At);Pt(t);w.info.memory.textures--};var Ot=function(e){var t=e.target;t.removeEventListener("dispose",Ot);Ht(t);w.info.memory.textures--};var Mt=function(e){var t=e.target;t.removeEventListener("dispose",Mt);Bt(t)};var _t=function(e){var t=["__webglVertexBuffer","__webglNormalBuffer","__webglTangentBuffer","__webglColorBuffer","__webglUVBuffer","__webglUV2Buffer","__webglSkinIndicesBuffer","__webglSkinWeightsBuffer","__webglFaceBuffer","__webglLineBuffer","__webglLineDistanceBuffer"];for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e[i]!==undefined){tt.deleteBuffer(e[i]);delete e[i]}}if(e.__webglCustomAttributesList!==undefined){for(var i in e.__webglCustomAttributesList){tt.deleteBuffer(e.__webglCustomAttributesList[i].buffer)}delete e.__webglCustomAttributesList}w.info.memory.geometries--};var Dt=function(e){delete e.__webglInit;if(e instanceof THREE.BufferGeometry){for(var t in e.attributes){var n=e.attributes[t];if(n.buffer!==undefined){tt.deleteBuffer(n.buffer);delete n.buffer}}w.info.memory.geometries--}else{var r=an[e.id];if(r!==undefined){for(var i=0,s=r.length;i<s;i++){var o=r[i];if(o.numMorphTargets!==undefined){for(var u=0,a=o.numMorphTargets;u<a;u++){tt.deleteBuffer(o.__webglMorphTargetsBuffers[u])}delete o.__webglMorphTargetsBuffers}if(o.numMorphNormals!==undefined){for(var u=0,a=o.numMorphNormals;u<a;u++){tt.deleteBuffer(o.__webglMorphNormalsBuffers[u])}delete o.__webglMorphNormalsBuffers}_t(o)}delete an[e.id]}else{_t(e)}}N=-1};var Pt=function(e){if(e.image&&e.image.__webglTextureCube){tt.deleteTexture(e.image.__webglTextureCube);delete e.image.__webglTextureCube}else{if(e.__webglInit===undefined)return;tt.deleteTexture(e.__webglTexture);delete e.__webglTexture;delete e.__webglInit}};var Ht=function(e){if(!e||e.__webglTexture===undefined)return;tt.deleteTexture(e.__webglTexture);delete e.__webglTexture;if(e instanceof THREE.WebGLRenderTargetCube){for(var t=0;t<6;t++){tt.deleteFramebuffer(e.__webglFramebuffer[t]);tt.deleteRenderbuffer(e.__webglRenderbuffer[t])}}else{tt.deleteFramebuffer(e.__webglFramebuffer);tt.deleteRenderbuffer(e.__webglRenderbuffer)}delete e.__webglFramebuffer;delete e.__webglRenderbuffer};var Bt=function(e){var t=e.program.program;if(t===undefined)return;e.program=undefined;var n,r,i;var s=false;for(n=0,r=E.length;n<r;n++){i=E[n];if(i.program===t){i.usedTimes--;if(i.usedTimes===0){s=true}break}}if(s===true){var o=[];for(n=0,r=E.length;n<r;n++){i=E[n];if(i.program!==t){o.push(i)}}E=o;tt.deleteProgram(t);w.info.memory.programs--}};this.renderBufferImmediate=function(e,t,n){Jt();if(e.hasPositions&&!e.__webglVertexBuffer)e.__webglVertexBuffer=tt.createBuffer();if(e.hasNormals&&!e.__webglNormalBuffer)e.__webglNormalBuffer=tt.createBuffer();if(e.hasUvs&&!e.__webglUvBuffer)e.__webglUvBuffer=tt.createBuffer();if(e.hasColors&&!e.__webglColorBuffer)e.__webglColorBuffer=tt.createBuffer();if(e.hasPositions){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglVertexBuffer);tt.bufferData(tt.ARRAY_BUFFER,e.positionArray,tt.DYNAMIC_DRAW);Kt(t.attributes.position);tt.vertexAttribPointer(t.attributes.position,3,tt.FLOAT,false,0,0)}if(e.hasNormals){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglNormalBuffer);if(n.shading===THREE.FlatShading){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=e.count*3;for(m=0;m<g;m+=9){v=e.normalArray;o=v[m];f=v[m+1];h=v[m+2];u=v[m+3];l=v[m+4];p=v[m+5];a=v[m+6];c=v[m+7];d=v[m+8];r=(o+u+a)/3;i=(f+l+c)/3;s=(h+p+d)/3;v[m]=r;v[m+1]=i;v[m+2]=s;v[m+3]=r;v[m+4]=i;v[m+5]=s;v[m+6]=r;v[m+7]=i;v[m+8]=s}}tt.bufferData(tt.ARRAY_BUFFER,e.normalArray,tt.DYNAMIC_DRAW);Kt(t.attributes.normal);tt.vertexAttribPointer(t.attributes.normal,3,tt.FLOAT,false,0,0)}if(e.hasUvs&&n.map){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglUvBuffer);tt.bufferData(tt.ARRAY_BUFFER,e.uvArray,tt.DYNAMIC_DRAW);Kt(t.attributes.uv);tt.vertexAttribPointer(t.attributes.uv,2,tt.FLOAT,false,0,0)}if(e.hasColors&&n.vertexColors!==THREE.NoColors){tt.bindBuffer(tt.ARRAY_BUFFER,e.__webglColorBuffer);tt.bufferData(tt.ARRAY_BUFFER,e.colorArray,tt.DYNAMIC_DRAW);Kt(t.attributes.color);tt.vertexAttribPointer(t.attributes.color,3,tt.FLOAT,false,0,0)}Qt();tt.drawArrays(tt.TRIANGLES,0,e.count);e.count=0};this.renderBufferDirect=function(e,t,n,r,i,s){if(r.visible===false)return;var o=wn(e,t,n,r,s);var u=false,a=r.wireframe?1:0,f=i.id*16777215+o.id*2+a;if(f!==N){N=f;u=true}if(u){Jt()}if(s instanceof THREE.Mesh){var l=r.wireframe===true?tt.LINES:tt.TRIANGLES;var c=i.attributes.index;if(c){var h,p;if(c.array instanceof Uint32Array&&it.get("OES_element_index_uint")){h=tt.UNSIGNED_INT;p=4}else{h=tt.UNSIGNED_SHORT;p=2}var d=i.offsets;if(d.length===0){if(u){$t(r,o,i,0);tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,c.buffer)}tt.drawElements(l,c.array.length,h,0);w.info.render.calls++;w.info.render.vertices+=c.array.length;w.info.render.faces+=c.array.length/3}else{u=true;for(var v=0,m=d.length;v<m;v++){var g=d[v].index;if(u){$t(r,o,i,g);tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,c.buffer)}tt.drawElements(l,d[v].count,h,d[v].start*p);w.info.render.calls++;w.info.render.vertices+=d[v].count;w.info.render.faces+=d[v].count/3}}}else{if(u){$t(r,o,i,0)}var y=i.attributes["position"];tt.drawArrays(l,0,y.array.length/3);w.info.render.calls++;w.info.render.vertices+=y.array.length/3;w.info.render.faces+=y.array.length/9}}else if(s instanceof THREE.PointCloud){if(u){$t(r,o,i,0)}var y=i.attributes.position;tt.drawArrays(tt.POINTS,0,y.array.length/3);w.info.render.calls++;w.info.render.points+=y.array.length/3}else if(s instanceof THREE.Line){var l=s.mode===THREE.LineStrip?tt.LINE_STRIP:tt.LINES;Fn(r.linewidth);var c=i.attributes.index;if(c){var h,p;if(c.array instanceof Uint32Array){h=tt.UNSIGNED_INT;p=4}else{h=tt.UNSIGNED_SHORT;p=2}var d=i.offsets;if(d.length===0){if(u){$t(r,o,i,0);tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,c.buffer)}tt.drawElements(l,c.array.length,h,0);w.info.render.calls++;w.info.render.vertices+=c.array.length}else{if(d.length>1)u=true;for(var v=0,m=d.length;v<m;v++){var g=d[v].index;if(u){$t(r,o,i,g);tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,c.buffer)}tt.drawElements(l,d[v].count,h,d[v].start*p);w.info.render.calls++;w.info.render.vertices+=d[v].count}}}else{if(u){$t(r,o,i,0)}var y=i.attributes.position;tt.drawArrays(l,0,y.array.length/3);w.info.render.calls++;w.info.render.points+=y.array.length/3}}};this.renderBuffer=function(e,t,n,r,i,s){if(r.visible===false)return;var o=wn(e,t,n,r,s);var u=o.attributes;var a=false,f=r.wireframe?1:0,l=i.id*16777215+o.id*2+f;if(l!==N){N=l;a=true}if(a){Jt()}if(!r.morphTargets&&u.position>=0){if(a){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglVertexBuffer);Kt(u.position);tt.vertexAttribPointer(u.position,3,tt.FLOAT,false,0,0)}}else{if(s.morphTargetBase){Gt(r,i,s)}}if(a){if(i.__webglCustomAttributesList){for(var c=0,h=i.__webglCustomAttributesList.length;c<h;c++){var p=i.__webglCustomAttributesList[c];if(u[p.buffer.belongsToAttribute]>=0){tt.bindBuffer(tt.ARRAY_BUFFER,p.buffer);Kt(u[p.buffer.belongsToAttribute]);tt.vertexAttribPointer(u[p.buffer.belongsToAttribute],p.size,tt.FLOAT,false,0,0)}}}if(u.color>=0){if(s.geometry.colors.length>0||s.geometry.faces.length>0){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglColorBuffer);Kt(u.color);tt.vertexAttribPointer(u.color,3,tt.FLOAT,false,0,0)}else if(r.defaultAttributeValues!==undefined){tt.vertexAttrib3fv(u.color,r.defaultAttributeValues.color)}}if(u.normal>=0){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglNormalBuffer);Kt(u.normal);tt.vertexAttribPointer(u.normal,3,tt.FLOAT,false,0,0)}if(u.tangent>=0){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglTangentBuffer);Kt(u.tangent);tt.vertexAttribPointer(u.tangent,4,tt.FLOAT,false,0,0)}if(u.uv>=0){if(s.geometry.faceVertexUvs[0]){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglUVBuffer);Kt(u.uv);tt.vertexAttribPointer(u.uv,2,tt.FLOAT,false,0,0)}else if(r.defaultAttributeValues!==undefined){tt.vertexAttrib2fv(u.uv,r.defaultAttributeValues.uv)}}if(u.uv2>=0){if(s.geometry.faceVertexUvs[1]){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglUV2Buffer);Kt(u.uv2);tt.vertexAttribPointer(u.uv2,2,tt.FLOAT,false,0,0)}else if(r.defaultAttributeValues!==undefined){tt.vertexAttrib2fv(u.uv2,r.defaultAttributeValues.uv2)}}if(r.skinning&&u.skinIndex>=0&&u.skinWeight>=0){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglSkinIndicesBuffer);Kt(u.skinIndex);tt.vertexAttribPointer(u.skinIndex,4,tt.FLOAT,false,0,0);tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglSkinWeightsBuffer);Kt(u.skinWeight);tt.vertexAttribPointer(u.skinWeight,4,tt.FLOAT,false,0,0)}if(u.lineDistance>=0){tt.bindBuffer(tt.ARRAY_BUFFER,i.__webglLineDistanceBuffer);Kt(u.lineDistance);tt.vertexAttribPointer(u.lineDistance,1,tt.FLOAT,false,0,0)}}Qt();if(s instanceof THREE.Mesh){var d=i.__typeArray===Uint32Array?tt.UNSIGNED_INT:tt.UNSIGNED_SHORT;if(r.wireframe){Fn(r.wireframeLinewidth);if(a)tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,i.__webglLineBuffer);tt.drawElements(tt.LINES,i.__webglLineCount,d,0)}else{if(a)tt.bindBuffer(tt.ELEMENT_ARRAY_BUFFER,i.__webglFaceBuffer);tt.drawElements(tt.TRIANGLES,i.__webglFaceCount,d,0)}w.info.render.calls++;w.info.render.vertices+=i.__webglFaceCount;w.info.render.faces+=i.__webglFaceCount/3}else if(s instanceof THREE.Line){var v=s.mode===THREE.LineStrip?tt.LINE_STRIP:tt.LINES;Fn(r.linewidth);tt.drawArrays(v,0,i.__webglLineCount);w.info.render.calls++}else if(s instanceof THREE.PointCloud){tt.drawArrays(tt.POINTS,0,i.__webglParticleCount);w.info.render.calls++;w.info.render.points+=i.__webglParticleCount}};this.render=function(e,t,n,r){if(t instanceof THREE.Camera===false){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var i=e.fog;N=-1;T=-1;C=null;Z=true;if(e.autoUpdate===true)e.updateMatrixWorld();if(t.parent===undefined)t.updateMatrixWorld();e.traverse(function(e){if(e instanceof THREE.SkinnedMesh){e.skeleton.update()}});t.matrixWorldInverse.getInverse(t.matrixWorld);K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);J.setFromMatrix(K);p.length=0;m.length=0;g.length=0;y.length=0;b.length=0;tn(e,e);if(w.sortObjects===true){m.sort(Yt);g.sort(Zt)}Et.render(e,t);w.info.render.calls=0;w.info.render.vertices=0;w.info.render.faces=0;w.info.render.points=0;this.setRenderTarget(n);if(this.autoClear||r){this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil)}for(var s=0,o=v.length;s<o;s++){var u=v[s];var a=u.object;if(a.visible){Pn(a,t);sn(u)}}if(e.overrideMaterial){var f=e.overrideMaterial;this.setBlending(f.blending,f.blendEquation,f.blendSrc,f.blendDst);this.setDepthTest(f.depthTest);this.setDepthWrite(f.depthWrite);In(f.polygonOffset,f.polygonOffsetFactor,f.polygonOffsetUnits);nn(m,t,p,i,true,f);nn(g,t,p,i,true,f);rn(v,"",t,p,i,false,f)}else{var f=null;this.setBlending(THREE.NoBlending);nn(m,t,p,i,false,f);rn(v,"opaque",t,p,i,false,f);nn(g,t,p,i,true,f);rn(v,"transparent",t,p,i,true,f)}St.render(e,t);xt.render(e,t,W,X);if(n&&n.generateMipmaps&&n.minFilter!==THREE.NearestFilter&&n.minFilter!==THREE.LinearFilter){Vn(n)}this.setDepthTest(true);this.setDepthWrite(true)};this.renderImmediateObject=function(e,t,n,r,i){var s=wn(e,t,n,r,i);N=-1;w.setMaterialFaces(r);if(i.immediateRenderCallback){i.immediateRenderCallback(s,tt,J)}else{i.render(function(e){w.renderBufferImmediate(e,s,r)})}};var an={};var fn=0;this.setFaceCulling=function(e,t){if(e===THREE.CullFaceNone){tt.disable(tt.CULL_FACE)}else{if(t===THREE.FrontFaceDirectionCW){tt.frontFace(tt.CW)}else{tt.frontFace(tt.CCW)}if(e===THREE.CullFaceBack){tt.cullFace(tt.BACK)}else if(e===THREE.CullFaceFront){tt.cullFace(tt.FRONT)}else{tt.cullFace(tt.FRONT_AND_BACK)}tt.enable(tt.CULL_FACE)}};this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide;var n=e.side===THREE.BackSide;if(L!==t){if(t){tt.disable(tt.CULL_FACE)}else{tt.enable(tt.CULL_FACE)}L=t}if(A!==n){if(n){tt.frontFace(tt.CW)}else{tt.frontFace(tt.CCW)}A=n}};this.setDepthTest=function(e){if(P!==e){if(e){tt.enable(tt.DEPTH_TEST)}else{tt.disable(tt.DEPTH_TEST)}P=e}};this.setDepthWrite=function(e){if(H!==e){tt.depthMask(e);H=e}};this.setBlending=function(e,t,n,r){if(e!==O){if(e===THREE.NoBlending){tt.disable(tt.BLEND)}else if(e===THREE.AdditiveBlending){tt.enable(tt.BLEND);tt.blendEquation(tt.FUNC_ADD);tt.blendFunc(tt.SRC_ALPHA,tt.ONE)}else if(e===THREE.SubtractiveBlending){tt.enable(tt.BLEND);tt.blendEquation(tt.FUNC_ADD);tt.blendFunc(tt.ZERO,tt.ONE_MINUS_SRC_COLOR)}else if(e===THREE.MultiplyBlending){tt.enable(tt.BLEND);tt.blendEquation(tt.FUNC_ADD);tt.blendFunc(tt.ZERO,tt.SRC_COLOR)}else if(e===THREE.CustomBlending){tt.enable(tt.BLEND)}else{tt.enable(tt.BLEND);tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD);tt.blendFuncSeparate(tt.SRC_ALPHA,tt.ONE_MINUS_SRC_ALPHA,tt.ONE,tt.ONE_MINUS_SRC_ALPHA)}O=e}if(e===THREE.CustomBlending){if(t!==M){tt.blendEquation(Jn(t));M=t}if(n!==_||r!==D){tt.blendFunc(Jn(n),Jn(r));_=n;D=r}}else{M=null;_=null;D=null}};this.uploadTexture=function(e){if(e.__webglInit===undefined){e.__webglInit=true;e.addEventListener("dispose",At);e.__webglTexture=tt.createTexture();w.info.memory.textures++}tt.bindTexture(tt.TEXTURE_2D,e.__webglTexture);tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,e.flipY);tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha);tt.pixelStorei(tt.UNPACK_ALIGNMENT,e.unpackAlignment);e.image=Rn(e.image,at);var t=e.image,n=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),r=Jn(e.format),i=Jn(e.type);qn(tt.TEXTURE_2D,e,n);var s,o=e.mipmaps;if(e instanceof THREE.DataTexture){if(o.length>0&&n){for(var u=0,a=o.length;u<a;u++){s=o[u];tt.texImage2D(tt.TEXTURE_2D,u,r,s.width,s.height,0,r,i,s.data)}e.generateMipmaps=false}else{tt.texImage2D(tt.TEXTURE_2D,0,r,t.width,t.height,0,r,i,t.data)}}else if(e instanceof THREE.CompressedTexture){for(var u=0,a=o.length;u<a;u++){s=o[u];if(e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat){if(yt().indexOf(r)>-1){tt.compressedTexImage2D(tt.TEXTURE_2D,u,r,s.width,s.height,0,s.data)}else{console.warn("Attempt to load unsupported compressed texture format")}}else{tt.texImage2D(tt.TEXTURE_2D,u,r,s.width,s.height,0,r,i,s.data)}}}else{if(o.length>0&&n){for(var u=0,a=o.length;u<a;u++){s=o[u];tt.texImage2D(tt.TEXTURE_2D,u,r,r,i,s)}e.generateMipmaps=false}else{tt.texImage2D(tt.TEXTURE_2D,0,r,r,i,e.image)}}if(e.generateMipmaps&&n)tt.generateMipmap(tt.TEXTURE_2D);e.needsUpdate=false;if(e.onUpdate)e.onUpdate()};this.setTexture=function(e,t){tt.activeTexture(tt.TEXTURE0+t);if(e.needsUpdate){w.uploadTexture(e)}else{tt.bindTexture(tt.TEXTURE_2D,e.__webglTexture)}};this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&e.__webglFramebuffer===undefined){if(e.depthBuffer===undefined)e.depthBuffer=true;if(e.stencilBuffer===undefined)e.stencilBuffer=true;e.addEventListener("dispose",Ot);e.__webglTexture=tt.createTexture();w.info.memory.textures++;var n=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=Jn(e.format),i=Jn(e.type);if(t){e.__webglFramebuffer=[];e.__webglRenderbuffer=[];tt.bindTexture(tt.TEXTURE_CUBE_MAP,e.__webglTexture);qn(tt.TEXTURE_CUBE_MAP,e,n);for(var s=0;s<6;s++){e.__webglFramebuffer[s]=tt.createFramebuffer();e.__webglRenderbuffer[s]=tt.createRenderbuffer();tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,r,e.width,e.height,0,r,i,null);Wn(e.__webglFramebuffer[s],e,tt.TEXTURE_CUBE_MAP_POSITIVE_X+s);Xn(e.__webglRenderbuffer[s],e)}if(n)tt.generateMipmap(tt.TEXTURE_CUBE_MAP)}else{e.__webglFramebuffer=tt.createFramebuffer();if(e.shareDepthFrom){e.__webglRenderbuffer=e.shareDepthFrom.__webglRenderbuffer}else{e.__webglRenderbuffer=tt.createRenderbuffer()}tt.bindTexture(tt.TEXTURE_2D,e.__webglTexture);qn(tt.TEXTURE_2D,e,n);tt.texImage2D(tt.TEXTURE_2D,0,r,e.width,e.height,0,r,i,null);Wn(e.__webglFramebuffer,e,tt.TEXTURE_2D);if(e.shareDepthFrom){if(e.depthBuffer&&!e.stencilBuffer){tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.RENDERBUFFER,e.__webglRenderbuffer)}else if(e.depthBuffer&&e.stencilBuffer){tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.DEPTH_STENCIL_ATTACHMENT,tt.RENDERBUFFER,e.__webglRenderbuffer)}}else{Xn(e.__webglRenderbuffer,e)}if(n)tt.generateMipmap(tt.TEXTURE_2D)}if(t){tt.bindTexture(tt.TEXTURE_CUBE_MAP,null)}else{tt.bindTexture(tt.TEXTURE_2D,null)}tt.bindRenderbuffer(tt.RENDERBUFFER,null);tt.bindFramebuffer(tt.FRAMEBUFFER,null)}var o,u,a,f,l;if(e){if(t){o=e.__webglFramebuffer[e.activeCubeFace]}else{o=e.__webglFramebuffer}u=e.width;a=e.height;f=0;l=0}else{o=null;u=U;a=z;f=q;l=R}if(o!==x){tt.bindFramebuffer(tt.FRAMEBUFFER,o);tt.viewport(f,l,u,a);x=o}W=u;X=a};this.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};this.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};this.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};this.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}};THREE.WebGLRenderTarget=function(e,t,n){this.width=e;this.height=t;n=n||{};this.wrapS=n.wrapS!==undefined?n.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=n.wrapT!==undefined?n.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=n.magFilter!==undefined?n.magFilter:THREE.LinearFilter;this.minFilter=n.minFilter!==undefined?n.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=n.anisotropy!==undefined?n.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=n.format!==undefined?n.format:THREE.RGBAFormat;this.type=n.type!==undefined?n.type:THREE.UnsignedByteType;this.depthBuffer=n.depthBuffer!==undefined?n.depthBuffer:true;this.stencilBuffer=n.stencilBuffer!==undefined?n.stencilBuffer:true;this.generateMipmaps=true;this.shareDepthFrom=null};THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e;this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);e.wrapS=this.wrapS;e.wrapT=this.wrapT;e.magFilter=this.magFilter;e.minFilter=this.minFilter;e.anisotropy=this.anisotropy;e.offset.copy(this.offset);e.repeat.copy(this.repeat);e.format=this.format;e.type=this.type;e.depthBuffer=this.depthBuffer;e.stencilBuffer=this.stencilBuffer;e.generateMipmaps=this.generateMipmaps;e.shareDepthFrom=this.shareDepthFrom;return e},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype);THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.WebGLExtensions=function(e){var t={};this.get=function(n){if(t[n]!==undefined){return t[n]}var r;switch(n){case"OES_texture_float":r=e.getExtension("OES_texture_float");break;case"OES_texture_float_linear":r=e.getExtension("OES_texture_float_linear");break;case"OES_standard_derivatives":r=e.getExtension("OES_standard_derivatives");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"OES_element_index_uint":r=e.getExtension("OES_element_index_uint");break;case"EXT_blend_minmax":r=e.getExtension("EXT_blend_minmax");break;case"EXT_frag_depth":r=e.getExtension("EXT_frag_depth");break}if(r===null){console.log("THREE.WebGLRenderer: "+n+" extension not supported.")}t[n]=r;return r}};THREE.WebGLProgram=function(){var e=0;var t=function(e){var t,n,r=[];for(var i in e){t=e[i];if(t===false)continue;n="#define "+i+" "+t;r.push(n)}return r.join("\n")};var n=function(e,t,n){var r={};for(var i=0,s=n.length;i<s;i++){var o=n[i];r[o]=e.getUniformLocation(t,o)}return r};var r=function(e,t,n){var r={};for(var i=0,s=n.length;i<s;i++){var o=n[i];r[o]=e.getAttribLocation(t,o)}return r};return function(i,s,o,u){var a=i;var f=a.context;var l=o.defines;var c=o.__webglShader.uniforms;var h=o.attributes;var p=o.__webglShader.vertexShader;var d=o.__webglShader.fragmentShader;var v=o.index0AttributeName;if(v===undefined&&u.morphTargets===true){v="position"}var m="SHADOWMAP_TYPE_BASIC";if(u.shadowMapType===THREE.PCFShadowMap){m="SHADOWMAP_TYPE_PCF"}else if(u.shadowMapType===THREE.PCFSoftShadowMap){m="SHADOWMAP_TYPE_PCF_SOFT"}var g=t(l);var y=f.createProgram();var b,w;if(o instanceof THREE.RawShaderMaterial){b="";w=""}else{b=["precision "+u.precision+" float;","precision "+u.precision+" int;",g,u.supportsVertexTextures?"#define VERTEX_TEXTURES":"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+u.maxDirLights,"#define MAX_POINT_LIGHTS "+u.maxPointLights,"#define MAX_SPOT_LIGHTS "+u.maxSpotLights,"#define MAX_HEMI_LIGHTS "+u.maxHemiLights,"#define MAX_SHADOWS "+u.maxShadows,"#define MAX_BONES "+u.maxBones,u.map?"#define USE_MAP":"",u.envMap?"#define USE_ENVMAP":"",u.lightMap?"#define USE_LIGHTMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.vertexColors?"#define USE_COLOR":"",u.skinning?"#define USE_SKINNING":"",u.useVertexTexture?"#define BONE_TEXTURE":"",u.morphTargets?"#define USE_MORPHTARGETS":"",u.morphNormals?"#define USE_MORPHNORMALS":"",u.wrapAround?"#define WRAP_AROUND":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+m:"",u.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",u.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",u.sizeAttenuation?"#define USE_SIZEATTENUATION":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","   attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS"," attribute vec3 morphTarget0;"," attribute vec3 morphTarget1;"," attribute vec3 morphTarget2;"," attribute vec3 morphTarget3;"," #ifdef USE_MORPHNORMALS","      attribute vec3 morphNormal0;","     attribute vec3 morphNormal1;","     attribute vec3 morphNormal2;","     attribute vec3 morphNormal3;"," #else","        attribute vec3 morphTarget4;","     attribute vec3 morphTarget5;","     attribute vec3 morphTarget6;","     attribute vec3 morphTarget7;"," #endif","#endif","#ifdef USE_SKINNING","    attribute vec4 skinIndex;","    attribute vec4 skinWeight;","#endif",""].join("\n");w=["precision "+u.precision+" float;","precision "+u.precision+" int;",u.bumpMap||u.normalMap?"#extension GL_OES_standard_derivatives : enable":"",g,"#define MAX_DIR_LIGHTS "+u.maxDirLights,"#define MAX_POINT_LIGHTS "+u.maxPointLights,"#define MAX_SPOT_LIGHTS "+u.maxSpotLights,"#define MAX_HEMI_LIGHTS "+u.maxHemiLights,"#define MAX_SHADOWS "+u.maxShadows,u.alphaTest?"#define ALPHATEST "+u.alphaTest:"",a.gammaInput?"#define GAMMA_INPUT":"",a.gammaOutput?"#define GAMMA_OUTPUT":"",u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp?"#define FOG_EXP2":"",u.map?"#define USE_MAP":"",u.envMap?"#define USE_ENVMAP":"",u.lightMap?"#define USE_LIGHTMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.vertexColors?"#define USE_COLOR":"",u.metal?"#define METAL":"",u.wrapAround?"#define WRAP_AROUND":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+m:"",u.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",u.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n")}var E=new THREE.WebGLShader(f,f.VERTEX_SHADER,b+p);var S=new THREE.WebGLShader(f,f.FRAGMENT_SHADER,w+d);f.attachShader(y,E);f.attachShader(y,S);if(v!==undefined){f.bindAttribLocation(y,0,v)}f.linkProgram(y);if(f.getProgramParameter(y,f.LINK_STATUS)===false){console.error("THREE.WebGLProgram: Could not initialise shader.");console.error("gl.VALIDATE_STATUS",f.getProgramParameter(y,f.VALIDATE_STATUS));console.error("gl.getError()",f.getError())}if(f.getProgramInfoLog(y)!==""){console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f.getProgramInfoLog(y))}f.deleteShader(E);f.deleteShader(S);var x=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences","bindMatrix","bindMatrixInverse"];if(u.useVertexTexture){x.push("boneTexture");x.push("boneTextureWidth");x.push("boneTextureHeight")}else{x.push("boneGlobalMatrices")}if(u.logarithmicDepthBuffer){x.push("logDepthBufFC")}for(var T in c){x.push(T)}this.uniforms=n(f,y,x);x=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(var N=0;N<u.maxMorphTargets;N++){x.push("morphTarget"+N)}for(var N=0;N<u.maxMorphNormals;N++){x.push("morphNormal"+N)}for(var C in h){x.push(C)}this.attributes=r(f,y,x);this.attributesKeys=Object.keys(this.attributes);this.id=e++;this.code=s;this.usedTimes=1;this.program=y;this.vertexShader=E;this.fragmentShader=S;return this}}();THREE.WebGLShader=function(){var e=function(e){var t=e.split("\n");for(var n=0;n<t.length;n++){t[n]=n+1+": "+t[n]}return t.join("\n")};return function(t,n,r){var i=t.createShader(n);t.shaderSource(i,r);t.compileShader(i);if(t.getShaderParameter(i,t.COMPILE_STATUS)===false){console.error("THREE.WebGLShader: Shader couldn't compile.")}if(t.getShaderInfoLog(i)!==""){console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(i));console.warn(e(r))}return i}}();THREE.LensFlarePlugin=function(e,t){function h(t){var r=n.createProgram();var i=n.createShader(n.FRAGMENT_SHADER);var s=n.createShader(n.VERTEX_SHADER);var o="precision "+e.getPrecision()+" float;\n";n.shaderSource(i,o+t.fragmentShader);n.shaderSource(s,o+t.vertexShader);n.compileShader(i);n.compileShader(s);n.attachShader(r,i);n.attachShader(r,s);n.linkProgram(r);return r}var n=e.context;var r,i;var s,o,u;var a;var f,l;var c=function(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]);var t=new Uint16Array([0,1,2,0,2,3]);r=n.createBuffer();i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i);n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW);f=n.createTexture();l=n.createTexture();n.bindTexture(n.TEXTURE_2D,f);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.bindTexture(n.TEXTURE_2D,l);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);a=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var c;if(a){c={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}}else{c={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}}s=h(c);o={vertex:n.getAttribLocation(s,"position"),uv:n.getAttribLocation(s,"uv")};u={renderType:n.getUniformLocation(s,"renderType"),map:n.getUniformLocation(s,"map"),occlusionMap:n.getUniformLocation(s,"occlusionMap"),opacity:n.getUniformLocation(s,"opacity"),color:n.getUniformLocation(s,"color"),scale:n.getUniformLocation(s,"scale"),rotation:n.getUniformLocation(s,"rotation"),screenPosition:n.getUniformLocation(s,"screenPosition")}};this.render=function(h,p,d,v){if(t.length===0)return;var m=new THREE.Vector3;var g=v/d,y=d*.5,b=v*.5;var w=16/v,E=new THREE.Vector2(w*g,w);var S=new THREE.Vector3(1,1,0),x=new THREE.Vector2(1,1);if(s===undefined){c()}n.useProgram(s);n.enableVertexAttribArray(o.vertex);n.enableVertexAttribArray(o.uv);n.uniform1i(u.occlusionMap,0);n.uniform1i(u.map,1);n.bindBuffer(n.ARRAY_BUFFER,r);n.vertexAttribPointer(o.vertex,2,n.FLOAT,false,2*8,0);n.vertexAttribPointer(o.uv,2,n.FLOAT,false,2*8,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i);n.disable(n.CULL_FACE);n.depthMask(false);for(var T=0,N=t.length;T<N;T++){w=16/v;E.set(w*g,w);var C=t[T];m.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]);m.applyMatrix4(p.matrixWorldInverse);m.applyProjection(p.projectionMatrix);S.copy(m);x.x=S.x*y+y;x.y=S.y*b+b;if(a||x.x>0&&x.x<d&&x.y>0&&x.y<v){n.activeTexture(n.TEXTURE1);n.bindTexture(n.TEXTURE_2D,f);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,x.x-8,x.y-8,16,16,0);n.uniform1i(u.renderType,0);n.uniform2f(u.scale,E.x,E.y);n.uniform3f(u.screenPosition,S.x,S.y,S.z);n.disable(n.BLEND);n.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,l);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,x.x-8,x.y-8,16,16,0);n.uniform1i(u.renderType,1);n.disable(n.DEPTH_TEST);n.activeTexture(n.TEXTURE1);n.bindTexture(n.TEXTURE_2D,f);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0);C.positionScreen.copy(S);if(C.customUpdateCallback){C.customUpdateCallback(C)}else{C.updateLensFlares()}n.uniform1i(u.renderType,2);n.enable(n.BLEND);for(var k=0,L=C.lensFlares.length;k<L;k++){var A=C.lensFlares[k];if(A.opacity>.001&&A.scale>.001){S.x=A.x;S.y=A.y;S.z=A.z;w=A.size*A.scale/v;E.x=w*g;E.y=w;n.uniform3f(u.screenPosition,S.x,S.y,S.z);n.uniform2f(u.scale,E.x,E.y);n.uniform1f(u.rotation,A.rotation);n.uniform1f(u.opacity,A.opacity);n.uniform3f(u.color,A.color.r,A.color.g,A.color.b);e.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst);e.setTexture(A.texture,1);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}}}}n.enable(n.CULL_FACE);n.enable(n.DEPTH_TEST);n.depthMask(true);e.resetGLState()}};THREE.ShadowMapPlugin=function(e,t,n,r){function g(e,t,r){if(t.visible){var i=n[t.id];if(i&&t.castShadow&&(t.frustumCulled===false||f.intersectsObject(t)===true)){for(var s=0,o=i.length;s<o;s++){var u=i[s];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld);d.push(u)}}for(var s=0,o=t.children.length;s<o;s++){g(e,t.children[s],r)}}}function y(e,t){var n=new THREE.DirectionalLight;n.isVirtual=true;n.onlyShadow=true;n.castShadow=true;n.shadowCameraNear=e.shadowCameraNear;n.shadowCameraFar=e.shadowCameraFar;n.shadowCameraLeft=e.shadowCameraLeft;n.shadowCameraRight=e.shadowCameraRight;n.shadowCameraBottom=e.shadowCameraBottom;n.shadowCameraTop=e.shadowCameraTop;n.shadowCameraVisible=e.shadowCameraVisible;n.shadowDarkness=e.shadowDarkness;n.shadowBias=e.shadowCascadeBias[t];n.shadowMapWidth=e.shadowCascadeWidth[t];n.shadowMapHeight=e.shadowCascadeHeight[t];n.pointsWorld=[];n.pointsFrustum=[];var r=n.pointsWorld,i=n.pointsFrustum;for(var s=0;s<8;s++){r[s]=new THREE.Vector3;i[s]=new THREE.Vector3}var o=e.shadowCascadeNearZ[t];var u=e.shadowCascadeFarZ[t];i[0].set(-1,-1,o);i[1].set(1,-1,o);i[2].set(-1,1,o);i[3].set(1,1,o);i[4].set(-1,-1,u);i[5].set(1,-1,u);i[6].set(-1,1,u);i[7].set(1,1,u);return n}function b(e,t){var n=e.shadowCascadeArray[t];n.position.copy(e.position);n.target.position.copy(e.target.position);n.lookAt(n.target);n.shadowCameraVisible=e.shadowCameraVisible;n.shadowDarkness=e.shadowDarkness;n.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t];var i=e.shadowCascadeFarZ[t];var s=n.pointsFrustum;s[0].z=r;s[1].z=r;s[2].z=r;s[3].z=r;s[4].z=i;s[5].z=i;s[6].z=i;s[7].z=i}function w(e,t){var n=t.shadowCamera,r=t.pointsFrustum,i=t.pointsWorld;c.set(Infinity,Infinity,Infinity);h.set(-Infinity,-Infinity,-Infinity);for(var s=0;s<8;s++){var o=i[s];o.copy(r[s]);o.unproject(e);o.applyMatrix4(n.matrixWorldInverse);if(o.x<c.x)c.x=o.x;if(o.x>h.x)h.x=o.x;if(o.y<c.y)c.y=o.y;if(o.y>h.y)h.y=o.y;if(o.z<c.z)c.z=o.z;if(o.z>h.z)h.z=o.z}n.left=c.x;n.right=h.x;n.top=h.y;n.bottom=c.y;n.updateProjectionMatrix()}function E(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var i=e.context;var s,o,u,a,f=new THREE.Frustum,l=new THREE.Matrix4,c=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=[];var v=THREE.ShaderLib["depthRGBA"];var m=THREE.UniformsUtils.clone(v.uniforms);s=new THREE.ShaderMaterial({uniforms:m,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader});o=new THREE.ShaderMaterial({uniforms:m,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,morphTargets:true});u=new THREE.ShaderMaterial({uniforms:m,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,skinning:true});a=new THREE.ShaderMaterial({uniforms:m,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,morphTargets:true,skinning:true});s._shadowPass=true;o._shadowPass=true;u._shadowPass=true;a._shadowPass=true;this.render=function(n,c){if(e.shadowMapEnabled===false)return;var h,v,m,S,x,T,N,C,k,L,A,O,M,_,D=[],P=0,H=null;i.clearColor(1,1,1,1);i.disable(i.BLEND);i.enable(i.CULL_FACE);i.frontFace(i.CCW);if(e.shadowMapCullFace===THREE.CullFaceFront){i.cullFace(i.FRONT)}else{i.cullFace(i.BACK)}e.setDepthTest(true);for(h=0,v=t.length;h<v;h++){_=t[h];if(!_.castShadow)continue;if(_ instanceof THREE.DirectionalLight&&_.shadowCascade){for(x=0;x<_.shadowCascadeCount;x++){var B;if(!_.shadowCascadeArray[x]){B=y(_,x);B.originalCamera=c;var j=new THREE.Gyroscope;j.position.copy(_.shadowCascadeOffset);j.add(B);j.add(B.target);c.add(j);_.shadowCascadeArray[x]=B;console.log("Created virtualLight",B)}else{B=_.shadowCascadeArray[x]}b(_,x);D[P]=B;P++}}else{D[P]=_;P++}}for(h=0,v=D.length;h<v;h++){_=D[h];if(!_.shadowMap){var F=THREE.LinearFilter;if(e.shadowMapType===THREE.PCFSoftShadowMap){F=THREE.NearestFilter}var I={minFilter:F,magFilter:F,format:THREE.RGBAFormat};_.shadowMap=new THREE.WebGLRenderTarget(_.shadowMapWidth,_.shadowMapHeight,I);_.shadowMapSize=new THREE.Vector2(_.shadowMapWidth,_.shadowMapHeight);_.shadowMatrix=new THREE.Matrix4}if(!_.shadowCamera){if(_ instanceof THREE.SpotLight){_.shadowCamera=new THREE.PerspectiveCamera(_.shadowCameraFov,_.shadowMapWidth/_.shadowMapHeight,_.shadowCameraNear,_.shadowCameraFar)}else if(_ instanceof THREE.DirectionalLight){_.shadowCamera=new THREE.OrthographicCamera(_.shadowCameraLeft,_.shadowCameraRight,_.shadowCameraTop,_.shadowCameraBottom,_.shadowCameraNear,_.shadowCameraFar)}else{console.error("Unsupported light type for shadow");continue}n.add(_.shadowCamera);if(n.autoUpdate===true)n.updateMatrixWorld()}if(_.shadowCameraVisible&&!_.cameraHelper){_.cameraHelper=new THREE.CameraHelper(_.shadowCamera);n.add(_.cameraHelper)}if(_.isVirtual&&B.originalCamera==c){w(c,_)}T=_.shadowMap;N=_.shadowMatrix;C=_.shadowCamera;C.position.setFromMatrixPosition(_.matrixWorld);p.setFromMatrixPosition(_.target.matrixWorld);C.lookAt(p);C.updateMatrixWorld();C.matrixWorldInverse.getInverse(C.matrixWorld);if(_.cameraHelper)_.cameraHelper.visible=_.shadowCameraVisible;if(_.shadowCameraVisible)_.cameraHelper.update();N.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);N.multiply(C.projectionMatrix);N.multiply(C.matrixWorldInverse);l.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse);f.setFromMatrix(l);e.setRenderTarget(T);e.clear();d.length=0;g(n,n,C);var q,R,U;for(m=0,S=d.length;m<S;m++){O=d[m];M=O.object;L=O.buffer;q=E(M);R=M.geometry.morphTargets!==undefined&&M.geometry.morphTargets.length>0&&q.morphTargets;U=M instanceof THREE.SkinnedMesh&&q.skinning;if(M.customDepthMaterial){A=M.customDepthMaterial}else if(U){A=R?a:u}else if(R){A=o}else{A=s}e.setMaterialFaces(q);if(L instanceof THREE.BufferGeometry){e.renderBufferDirect(C,t,H,A,L,M)}else{e.renderBuffer(C,t,H,A,L,M)}}for(m=0,S=r.length;m<S;m++){O=r[m];M=O.object;if(M.visible&&M.castShadow){M._modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,M.matrixWorld);e.renderImmediateObject(C,t,H,s,M)}}}var z=e.getClearColor(),W=e.getClearAlpha();i.clearColor(z.r,z.g,z.b,W);i.enable(i.BLEND);if(e.shadowMapCullFace===THREE.CullFaceFront){i.cullFace(i.BACK)}e.resetGLState()};};THREE.SpritePlugin=function(e,t){function l(){var t=n.createProgram();var r=n.createShader(n.VERTEX_SHADER);var i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n"));n.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n"));n.compileShader(r);n.compileShader(i);n.attachShader(t,r);n.attachShader(t,i);n.linkProgram(t);return t}function c(e,t){if(e.z!==t.z){return t.z-e.z}else{return t.id-e.id}}var n=e.context;var r,i;var s,o,u;var a;var f=function(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var t=new Uint16Array([0,1,2,0,2,3]);r=n.createBuffer();i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i);n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW);s=l();o={position:n.getAttribLocation(s,"position"),uv:n.getAttribLocation(s,"uv")};u={uvOffset:n.getUniformLocation(s,"uvOffset"),uvScale:n.getUniformLocation(s,"uvScale"),rotation:n.getUniformLocation(s,"rotation"),scale:n.getUniformLocation(s,"scale"),color:n.getUniformLocation(s,"color"),map:n.getUniformLocation(s,"map"),opacity:n.getUniformLocation(s,"opacity"),modelViewMatrix:n.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:n.getUniformLocation(s,"projectionMatrix"),fogType:n.getUniformLocation(s,"fogType"),fogDensity:n.getUniformLocation(s,"fogDensity"),fogNear:n.getUniformLocation(s,"fogNear"),fogFar:n.getUniformLocation(s,"fogFar"),fogColor:n.getUniformLocation(s,"fogColor"),alphaTest:n.getUniformLocation(s,"alphaTest")};var f=document.createElement("canvas");f.width=8;f.height=8;var c=f.getContext("2d");c.fillStyle="white";c.fillRect(0,0,8,8);a=new THREE.Texture(f);a.needsUpdate=true};this.render=function(l,h){if(t.length===0)return;if(s===undefined){f()}n.useProgram(s);n.enableVertexAttribArray(o.position);n.enableVertexAttribArray(o.uv);n.disable(n.CULL_FACE);n.enable(n.BLEND);n.bindBuffer(n.ARRAY_BUFFER,r);n.vertexAttribPointer(o.position,2,n.FLOAT,false,2*8,0);n.vertexAttribPointer(o.uv,2,n.FLOAT,false,2*8,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i);n.uniformMatrix4fv(u.projectionMatrix,false,h.projectionMatrix.elements);n.activeTexture(n.TEXTURE0);n.uniform1i(u.map,0);var p=0;var d=0;var v=l.fog;if(v){n.uniform3f(u.fogColor,v.color.r,v.color.g,v.color.b);if(v instanceof THREE.Fog){n.uniform1f(u.fogNear,v.near);n.uniform1f(u.fogFar,v.far);n.uniform1i(u.fogType,1);p=1;d=1}else if(v instanceof THREE.FogExp2){n.uniform1f(u.fogDensity,v.density);n.uniform1i(u.fogType,2);p=2;d=2}}else{n.uniform1i(u.fogType,0);p=0;d=0}for(var m=0,g=t.length;m<g;m++){var y=t[m];y._modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,y.matrixWorld);if(y.renderDepth===null){y.z=-y._modelViewMatrix.elements[14]}else{y.z=y.renderDepth}}t.sort(c);var b=[];for(var m=0,g=t.length;m<g;m++){var y=t[m];var w=y.material;n.uniform1f(u.alphaTest,w.alphaTest);n.uniformMatrix4fv(u.modelViewMatrix,false,y._modelViewMatrix.elements);b[0]=y.scale.x;b[1]=y.scale.y;var E=0;if(l.fog&&w.fog){E=d}if(p!==E){n.uniform1i(u.fogType,E);p=E}if(w.map!==null){n.uniform2f(u.uvOffset,w.map.offset.x,w.map.offset.y);n.uniform2f(u.uvScale,w.map.repeat.x,w.map.repeat.y)}else{n.uniform2f(u.uvOffset,0,0);n.uniform2f(u.uvScale,1,1)}n.uniform1f(u.opacity,w.opacity);n.uniform3f(u.color,w.color.r,w.color.g,w.color.b);n.uniform1f(u.rotation,w.rotation);n.uniform2fv(u.scale,b);e.setBlending(w.blending,w.blendEquation,w.blendSrc,w.blendDst);e.setDepthTest(w.depthTest);e.setDepthWrite(w.depthWrite);if(w.map&&w.map.image&&w.map.image.width){e.setTexture(w.map,0)}else{e.setTexture(a,0)}n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}n.enable(n.CULL_FACE);e.resetGLState()};};THREE.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;if(t instanceof THREE.Mesh){t.matrixAutoUpdate&&t.updateMatrix();r=t.matrix;t=t.geometry}e.merge(t,r,n)},center:function(e){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return e.center()}};THREE.ImageUtils={crossOrigin:undefined,loadTexture:function(e,t,n,r){var i=new THREE.ImageLoader;i.crossOrigin=this.crossOrigin;var s=new THREE.Texture(undefined,t);i.load(e,function(e){s.image=e;s.needsUpdate=true;if(n)n(s)},undefined,function(e){if(r)r(e)});s.sourceFile=e;return s},loadTextureCube:function(e,t,n,r){var i=[];var s=new THREE.ImageLoader;s.crossOrigin=this.crossOrigin;var o=new THREE.CubeTexture(i,t);o.flipY=false;var u=0;var a=function(t){s.load(e[t],function(e){o.images[t]=e;u+=1;if(u===6){o.needsUpdate=true;if(n)n(o)}})};for(var f=0,l=e.length;f<l;++f){a(f)}return o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var n=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]};var r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]};var i=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=t|1;var s=e.width;var o=e.height;var u=document.createElement("canvas");u.width=s;u.height=o;var a=u.getContext("2d");a.drawImage(e,0,0);var f=a.getImageData(0,0,s,o).data;var l=a.createImageData(s,o);var c=l.data;for(var h=0;h<s;h++){for(var p=0;p<o;p++){var d=p-1<0?0:p-1;var v=p+1>o-1?o-1:p+1;var m=h-1<0?0:h-1;var g=h+1>s-1?s-1:h+1;var y=[];var b=[0,0,f[(p*s+h)*4]/255*t];y.push([-1,0,f[(p*s+m)*4]/255*t]);y.push([-1,-1,f[(d*s+m)*4]/255*t]);y.push([0,-1,f[(d*s+h)*4]/255*t]);y.push([1,-1,f[(d*s+g)*4]/255*t]);y.push([1,0,f[(p*s+g)*4]/255*t]);y.push([1,1,f[(v*s+g)*4]/255*t]);y.push([0,1,f[(v*s+h)*4]/255*t]);y.push([-1,1,f[(v*s+m)*4]/255*t]);var w=[];var E=y.length;for(var S=0;S<E;S++){var x=y[S];var T=y[(S+1)%E];x=r(x,b);T=r(T,b);w.push(i(n(x,T)))}var N=[0,0,0];for(var S=0;S<w.length;S++){N[0]+=w[S][0];N[1]+=w[S][1];N[2]+=w[S][2]}N[0]/=w.length;N[1]/=w.length;N[2]/=w.length;var C=(p*s+h)*4;c[C]=(N[0]+1)/2*255|0;c[C+1]=(N[1]+1)/2*255|0;c[C+2]=N[2]*255|0;c[C+3]=255}}a.putImageData(l,0,0);return u},generateDataTexture:function(e,t,n){var r=e*t;var i=new Uint8Array(3*r);var s=Math.floor(n.r*255);var o=Math.floor(n.g*255);var u=Math.floor(n.b*255);for(var a=0;a<r;a++){i[a*3]=s;i[a*3+1]=o;i[a*3+2]=u}var f=new THREE.DataTexture(i,e,t,THREE.RGBFormat);f.needsUpdate=true;return f}};THREE.SceneUtils={createMultiMaterialObject:function(e,t){var n=new THREE.Object3D;for(var r=0,i=t.length;r<i;r++){n.add(new THREE.Mesh(e,t[r]))}return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld);t.remove(e);n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld);e.applyMatrix(r);t.remove(e);n.add(e)}};THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();var n=this;n.faces[t]=n.faces[t]||{};n.faces[t][e.cssFontWeight]=n.faces[t][e.cssFontWeight]||{};n.faces[t][e.cssFontWeight][e.cssFontStyle]=e;var r=n.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t=[],n=[];var r,i,s=this.getFace(),o=this.size/s.resolution,u=0,a=String(e).split(""),f=a.length;var l=[];for(r=0;r<f;r++){var c=new THREE.Path;var h=this.extractGlyphPoints(a[r],s,o,u,c);u+=h.offset;l.push(h.path)}var p=u/2;return{paths:l,offset:p}},extractGlyphPoints:function(e,t,n,r,i){var s=[];var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N=t.glyphs[e]||t.glyphs["?"];if(!N)return;if(N.o){f=N._cachedOutline||(N._cachedOutline=N.o.split(" "));c=f.length;h=n;p=n;for(o=0;o<c;){l=f[o++];switch(l){case"m":d=f[o++]*h+r;v=f[o++]*p;i.moveTo(d,v);break;case"l":d=f[o++]*h+r;v=f[o++]*p;i.lineTo(d,v);break;case"q":m=f[o++]*h+r;g=f[o++]*p;w=f[o++]*h+r;E=f[o++]*p;i.quadraticCurveTo(w,E,m,g);T=s[s.length-1];if(T){y=T.x;b=T.y;for(u=1,a=this.divisions;u<=a;u++){var C=u/a;var k=THREE.Shape.Utils.b2(C,y,w,m);var L=THREE.Shape.Utils.b2(C,b,E,g)}}break;case"b":m=f[o++]*h+r;g=f[o++]*p;w=f[o++]*h+r;E=f[o++]*p;S=f[o++]*h+r;x=f[o++]*p;i.bezierCurveTo(w,E,S,x,m,g);T=s[s.length-1];if(T){y=T.x;b=T.y;for(u=1,a=this.divisions;u<=a;u++){var C=u/a;var k=THREE.Shape.Utils.b3(C,y,w,S,m);var L=THREE.Shape.Utils.b3(C,b,E,x,g)}}break}}}return{offset:N.ha*n,path:i}}};THREE.FontUtils.generateShapes=function(e,t){t=t||{};var n=t.size!==undefined?t.size:100;var r=t.curveSegments!==undefined?t.curveSegments:4;var i=t.font!==undefined?t.font:"helvetiker";var s=t.weight!==undefined?t.weight:"normal";var o=t.style!==undefined?t.style:"normal";THREE.FontUtils.size=n;THREE.FontUtils.divisions=r;THREE.FontUtils.face=i;THREE.FontUtils.weight=s;THREE.FontUtils.style=o;var u=THREE.FontUtils.drawText(e);var a=u.paths;var f=[];for(var l=0,c=a.length;l<c;l++){Array.prototype.push.apply(f,a[l].toShapes())}return f};(function(e){var t=1e-10;var n=function(e,t){var n=e.length;if(n<3)return null;var s=[],o=[],u=[];var a,f,l;if(r(e)>0){for(f=0;f<n;f++)o[f]=f}else{for(f=0;f<n;f++)o[f]=n-1-f}var c=n;var h=2*c;for(f=c-1;c>2;){if(h--<=0){console.log("Warning, unable to triangulate polygon!");if(t)return u;return s}a=f;if(c<=a)a=0;f=a+1;if(c<=f)f=0;l=f+1;if(c<=l)l=0;if(i(e,a,f,l,c,o)){var p,d,v,m,g;p=o[a];d=o[f];v=o[l];s.push([e[p],e[d],e[v]]);u.push([o[a],o[f],o[l]]);for(m=f,g=f+1;g<c;m++,g++){o[m]=o[g]}c--;h=2*c}}if(t)return u;return s};var r=function(e){var t=e.length;var n=0;for(var r=t-1,i=0;i<t;r=i++){n+=e[r].x*e[i].y-e[i].x*e[r].y}return n*.5};var i=function(e,n,r,i,s,o){var u;var a,f,l,c;var h,p,d,v;a=e[o[n]].x;f=e[o[n]].y;l=e[o[r]].x;c=e[o[r]].y;h=e[o[i]].x;p=e[o[i]].y;if(t>(l-a)*(p-f)-(c-f)*(h-a))return false;var m,g,y,b,w,E;var S,x,T,N,C,k;var L,A,O;m=h-l;g=p-c;y=a-h;b=f-p;w=l-a;E=c-f;for(u=0;u<s;u++){d=e[o[u]].x;v=e[o[u]].y;if(d===a&&v===f||d===l&&v===c||d===h&&v===p)continue;S=d-a;x=v-f;T=d-l;N=v-c;C=d-h;k=v-p;O=m*N-g*T;L=w*x-E*S;A=y*k-b*C;if(O>=-t&&A>=-t&&L>=-t)return false}return true};e.Triangulate=n;e.Triangulate.area=r;return e})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Audio=function(e){THREE.Object3D.call(this);this.type="Audio";this.context=e.context;this.source=this.context.createBufferSource();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.panner=this.context.createPanner();this.panner.connect(this.gain)};THREE.Audio.prototype=Object.create(THREE.Object3D.prototype);THREE.Audio.prototype.load=function(e){var t=this;var n=new XMLHttpRequest;n.open("GET",e,true);n.responseType="arraybuffer";n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e;t.source.connect(t.panner);t.source.start(0)})};n.send();return this};THREE.Audio.prototype.setLoop=function(e){this.source.loop=e};THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e};THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e};THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t);e.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(e.x,e.y,e.z)}}();THREE.AudioListener=function(){THREE.Object3D.call(this);this.type="AudioListener";this.context=new(window.AudioContext||window.webkitAudioContext)};THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;var t=new THREE.Quaternion;var n=new THREE.Vector3;var r=new THREE.Vector3;var i=new THREE.Vector3;var s=new THREE.Vector3;return function(o){THREE.Object3D.prototype.updateMatrixWorld.call(this,o);var u=this.context.listener;this.matrixWorld.decompose(e,t,n);r.set(0,0,-1).applyQuaternion(t);i.subVectors(e,s);u.setPosition(e.x,e.y,e.z);u.setOrientation(r.x,r.y,r.z,this.up.x,this.up.y,this.up.z);u.setVelocity(i.x,i.y,i.z);s.copy(e)}}();THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(e){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)};THREE.Curve.prototype.getPoints=function(e){if(!e)e=5;var t,n=[];for(t=0;t<=e;t++){n.push(this.getPoint(t/e))}return n};THREE.Curve.prototype.getSpacedPoints=function(e){if(!e)e=5;var t,n=[];for(t=0;t<=e;t++){n.push(this.getPointAt(t/e))}return n};THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]};THREE.Curve.prototype.getLengths=function(e){if(!e)e=this.__arcLengthDivisions?this.__arcLengthDivisions:200;if(this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var t=[];var n,r=this.getPoint(0);var i,s=0;t.push(0);for(i=1;i<=e;i++){n=this.getPoint(i/e);s+=n.distanceTo(r);t.push(s);r=n}this.cacheArcLengths=t;return t};THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=true;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(e,t){var n=this.getLengths();var r=0,i=n.length;var s;if(t){s=t}else{s=e*n[i-1]}var o=0,u=i-1,a;while(o<=u){r=Math.floor(o+(u-o)/2);a=n[r]-s;if(a<0){o=r+1;continue}else if(a>0){u=r-1;continue}else{u=r;break}}r=u;if(n[r]==s){var f=r/(i-1);return f}var l=n[r];var c=n[r+1];var h=c-l;var p=(s-l)/h;var f=(r+p)/(i-1);return f};THREE.Curve.prototype.getTangent=function(e){var t=1e-4;var n=e-t;var r=e+t;if(n<0)n=0;if(r>1)r=1;var i=this.getPoint(n);var s=this.getPoint(r);var o=s.clone().sub(i);return o.normalize()};THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)};THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){var s=6*e*e-6*e;var o=3*e*e-4*e+1;var u=-6*e*e+6*e;var a=3*e*e-2*e;return s+o+u+a},interpolate:function(e,t,n,r,i){var s=(n-e)*.5;var o=(r-t)*.5;var u=i*i;var a=i*u;return(2*t-2*n+s+o)*a+(-3*t+3*n-2*s-o)*u+s*i+t}};THREE.Curve.create=function(e,t){e.prototype=Object.create(THREE.Curve.prototype);e.prototype.getPoint=t;return e};THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=false};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(e){this.curves.push(e)};THREE.CurvePath.prototype.checkConnection=function(){};THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0);var t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new THREE.LineCurve(t,e))}};THREE.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength();var n=this.getCurveLengths();var r=0,i,s;while(r<n.length){if(n[r]>=t){i=n[r]-t;s=this.curves[r];var o=1-i/s.getLength();return s.getPointAt(o);break}r++}return null};THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]};THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length){return this.cacheLengths}var e=[],t=0;var n,r=this.curves.length;for(n=0;n<r;n++){t+=this.curves[n].getLength();e.push(t)}this.cacheLengths=e;return e};THREE.CurvePath.prototype.getBoundingBox=function(){var e=this.getPoints();var t,n,r;var i,s,o;t=n=Number.NEGATIVE_INFINITY;i=s=Number.POSITIVE_INFINITY;var u,a,f,l;var c=e[0]instanceof THREE.Vector3;l=c?new THREE.Vector3:new THREE.Vector2;for(a=0,f=e.length;a<f;a++){u=e[a];if(u.x>t)t=u.x;else if(u.x<i)i=u.x;if(u.y>n)n=u.y;else if(u.y<s)s=u.y;if(c){if(u.z>r)r=u.z;else if(u.z<o)o=u.z}l.add(u)}var h={minX:i,minY:s,maxX:t,maxY:n};if(c){h.maxZ=r;h.minZ=o}return h};THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,true);return this.createGeometry(t)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,true);return this.createGeometry(t)};THREE.CurvePath.prototype.createGeometry=function(e){var t=new THREE.Geometry;for(var n=0;n<e.length;n++){t.vertices.push(new THREE.Vector3(e[n].x,e[n].y,e[n].z||0))}return t};THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)};THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var n=this.getPoints(e);var r,i;if(!t){t=this.bends}for(r=0,i=t.length;r<i;r++){n=this.getWrapPoints(n,t[r])}return n};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var n=this.getSpacedPoints(e);var r,i;if(!t){t=this.bends}for(r=0,i=t.length;r<i;r++){n=this.getWrapPoints(n,t[r])}return n};THREE.CurvePath.prototype.getWrapPoints=function(e,t){var n=this.getBoundingBox();var r,i,s,o,u,a;for(r=0,i=e.length;r<i;r++){s=e[r];o=s.x;u=s.y;a=o/n.maxX;a=t.getUtoTmapping(a,o);var f=t.getPoint(a);var l=t.getTangent(a);l.set(-l.y,l.x).multiplyScalar(u);s.x=f.x+l.x;s.y=f.y+l.y}return e};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);THREE.Gyroscope.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;var t=new THREE.Quaternion;var n=new THREE.Vector3;var r=new THREE.Vector3;var i=new THREE.Quaternion;var s=new THREE.Vector3;return function(o){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||o){if(this.parent){this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorld.decompose(r,i,s);this.matrix.decompose(e,t,n);this.matrixWorld.compose(r,t,s)}else{this.matrixWorld.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;o=true}for(var u=0,a=this.children.length;u<a;u++){this.children[u].updateMatrixWorld(o)}}}();THREE.Path=function(e){THREE.CurvePath.call(this);this.actions=[];if(e){this.fromPoints(e)}};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++){this.lineTo(e[t].x,e[t].y)}};THREE.Path.prototype.moveTo=function(e,t){var n=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:n})};THREE.Path.prototype.lineTo=function(e,t){var n=Array.prototype.slice.call(arguments);var r=this.actions[this.actions.length-1].args;var i=r[r.length-2];var s=r[r.length-1];var o=new THREE.LineCurve(new THREE.Vector2(i,s),new THREE.Vector2(e,t));this.curves.push(o);this.actions.push({action:THREE.PathActions.LINE_TO,args:n})};THREE.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=Array.prototype.slice.call(arguments);var s=this.actions[this.actions.length-1].args;var o=s[s.length-2];var u=s[s.length-1];var a=new THREE.QuadraticBezierCurve(new THREE.Vector2(o,u),new THREE.Vector2(e,t),new THREE.Vector2(n,r));this.curves.push(a);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:i})};THREE.Path.prototype.bezierCurveTo=function(e,t,n,r,i,s){var o=Array.prototype.slice.call(arguments);var u=this.actions[this.actions.length-1].args;var a=u[u.length-2];var f=u[u.length-1];var l=new THREE.CubicBezierCurve(new THREE.Vector2(a,f),new THREE.Vector2(e,t),new THREE.Vector2(n,r),new THREE.Vector2(i,s));this.curves.push(l);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:o})};THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments);var n=this.actions[this.actions.length-1].args;var r=n[n.length-2];var i=n[n.length-1];var s=[new THREE.Vector2(r,i)];Array.prototype.push.apply(s,e);var o=new THREE.SplineCurve(s);this.curves.push(o);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})};THREE.Path.prototype.arc=function(e,t,n,r,i,s){var o=this.actions[this.actions.length-1].args;var u=o[o.length-2];var a=o[o.length-1];this.absarc(e+u,t+a,n,r,i,s)};THREE.Path.prototype.absarc=function(e,t,n,r,i,s){this.absellipse(e,t,n,n,r,i,s)};THREE.Path.prototype.ellipse=function(e,t,n,r,i,s,o){var u=this.actions[this.actions.length-1].args;var a=u[u.length-2];var f=u[u.length-1];this.absellipse(e+a,t+f,n,r,i,s,o)};THREE.Path.prototype.absellipse=function(e,t,n,r,i,s,o){var u=Array.prototype.slice.call(arguments);var a=new THREE.EllipseCurve(e,t,n,r,i,s,o);this.curves.push(a);var f=a.getPoint(1);u.push(f.x);u.push(f.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:u})};THREE.Path.prototype.getSpacedPoints=function(e,t){if(!e)e=40;var n=[];for(var r=0;r<e;r++){n.push(this.getPoint(r/e))}return n};THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints){console.log("tata");return this.getSpacedPoints(e,t)}e=e||12;var n=[];var r,i,s,o,u;var a,f,l,c,h,p,d,v,m,g,y,b,w;for(r=0,i=this.actions.length;r<i;r++){s=this.actions[r];o=s.action;u=s.args;switch(o){case THREE.PathActions.MOVE_TO:n.push(new THREE.Vector2(u[0],u[1]));break;case THREE.PathActions.LINE_TO:n.push(new THREE.Vector2(u[0],u[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:a=u[2];f=u[3];h=u[0];p=u[1];if(n.length>0){m=n[n.length-1];d=m.x;v=m.y}else{m=this.actions[r-1].args;d=m[m.length-2];v=m[m.length-1]}for(g=1;g<=e;g++){y=g/e;b=THREE.Shape.Utils.b2(y,d,h,a);w=THREE.Shape.Utils.b2(y,v,p,f);n.push(new THREE.Vector2(b,w))}break;case THREE.PathActions.BEZIER_CURVE_TO:a=u[4];f=u[5];h=u[0];p=u[1];l=u[2];c=u[3];if(n.length>0){m=n[n.length-1];d=m.x;v=m.y}else{m=this.actions[r-1].args;d=m[m.length-2];v=m[m.length-1]}for(g=1;g<=e;g++){y=g/e;b=THREE.Shape.Utils.b3(y,d,h,l,a);w=THREE.Shape.Utils.b3(y,v,p,c,f);n.push(new THREE.Vector2(b,w))}break;case THREE.PathActions.CSPLINE_THRU:m=this.actions[r-1].args;var E=new THREE.Vector2(m[m.length-2],m[m.length-1]);var S=[E];var x=e*u[0].length;S=S.concat(u[0]);var T=new THREE.SplineCurve(S);for(g=1;g<=x;g++){n.push(T.getPointAt(g/x))}break;case THREE.PathActions.ARC:var N=u[0],C=u[1],k=u[2],L=u[3],A=u[4],O=!!u[5];var M=A-L;var _;var D=e*2;for(g=1;g<=D;g++){y=g/D;if(!O){y=1-y}_=L+y*M;b=N+k*Math.cos(_);w=C+k*Math.sin(_);n.push(new THREE.Vector2(b,w))}break;case THREE.PathActions.ELLIPSE:var N=u[0],C=u[1],P=u[2],H=u[3],L=u[4],A=u[5],O=!!u[6];var M=A-L;var _;var D=e*2;for(g=1;g<=D;g++){y=g/D;if(!O){y=1-y}_=L+y*M;b=N+P*Math.cos(_);w=C+H*Math.sin(_);n.push(new THREE.Vector2(b,w))}break}}var B=n[n.length-1];var j=1e-10;if(Math.abs(B.x-n[0].x)<j&&Math.abs(B.y-n[0].y)<j)n.splice(n.length-1,1);if(t){n.push(n[0])}return n};THREE.Path.prototype.toShapes=function(e,t){function n(e){var t,n,r,i,s;var o=[],u=new THREE.Path;for(t=0,n=e.length;t<n;t++){r=e[t];s=r.args;i=r.action;if(i==THREE.PathActions.MOVE_TO){if(u.actions.length!=0){o.push(u);u=new THREE.Path}}u[i].apply(u,s)}if(u.actions.length!=0){o.push(u)}return o}function r(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];var s=new THREE.Shape;s.actions=i.actions;s.curves=i.curves;t.push(s)}return t}function i(e,t){var n=1e-10;var r=t.length;var i=false;for(var s=r-1,o=0;o<r;s=o++){var u=t[s];var a=t[o];var f=a.x-u.x;var l=a.y-u.y;if(Math.abs(l)>n){if(l<0){u=t[o];f=-f;a=t[s];l=-l}if(e.y<u.y||e.y>a.y)continue;if(e.y==u.y){if(e.x==u.x)return true}else{var c=l*(e.x-u.x)-f*(e.y-u.y);if(c==0)return true;if(c<0)continue;i=!i}}else{if(e.y!=u.y)continue;if(a.x<=e.x&&e.x<=u.x||u.x<=e.x&&e.x<=a.x)return true}}return i}var s=n(this.actions);if(s.length==0)return[];if(t===true)return r(s);var o,u,a,f=[];if(s.length==1){u=s[0];a=new THREE.Shape;a.actions=u.actions;a.curves=u.curves;f.push(a);return f}var l=!THREE.Shape.Utils.isClockWise(s[0].getPoints());l=e?!l:l;var c=[];var h=[];var p=[];var d=0;var v;h[d]=undefined;p[d]=[];var m,g;for(m=0,g=s.length;m<g;m++){u=s[m];v=u.getPoints();o=THREE.Shape.Utils.isClockWise(v);o=e?!o:o;if(o){if(!l&&h[d])d++;h[d]={s:new THREE.Shape,p:v};h[d].s.actions=u.actions;h[d].s.curves=u.curves;if(l)d++;p[d]=[]}else{p[d].push({h:u,p:v[0]})}}if(!h[0])return r(s);if(h.length>1){var y=false;var b=[];for(var w=0,E=h.length;w<E;w++){c[w]=[]}for(var w=0,E=h.length;w<E;w++){var S=h[w];var x=p[w];for(var T=0;T<x.length;T++){var N=x[T];var C=true;for(var k=0;k<h.length;k++){if(i(N.p,h[k].p)){if(w!=k)b.push({froms:w,tos:k,hole:T});if(C){C=false;c[k].push(N)}else{y=true}}}if(C){c[w].push(N)}}}if(b.length>0){if(!y)p=c}}var L,A,O;for(m=0,g=h.length;m<g;m++){a=h[m].s;f.push(a);L=p[m];for(A=0,O=L.length;A<O;A++){a.holes.push(L[A].h)}}return f};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t};THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t};THREE.Shape.prototype.getPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++){r[t]=this.holes[t].getTransformedPoints(e,this.bends)}return r};THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,n=this.holes.length,r=[];for(t=0;t<n;t++){r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends)}return r};THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}};THREE.Shape.prototype.extractPoints=function(e){if(this.useSpacedPoints){return this.extractAllSpacedPoints(e)}return this.extractAllPoints(e)};THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}};THREE.Shape.Utils={triangulateShape:function(e,t){function n(e,t,n){if(e.x!=t.x){if(e.x<t.x){return e.x<=n.x&&n.x<=t.x}else{return t.x<=n.x&&n.x<=e.x}}else{if(e.y<t.y){return e.y<=n.y&&n.y<=t.y}else{return t.y<=n.y&&n.y<=e.y}}}function r(e,t,r,i,s){var o=1e-10;var u=t.x-e.x,a=t.y-e.y;var f=i.x-r.x,l=i.y-r.y;var c=e.x-r.x;var h=e.y-r.y;var p=a*f-u*l;var d=a*c-u*h;if(Math.abs(p)>o){var v;if(p>0){if(d<0||d>p)return[];v=l*c-f*h;if(v<0||v>p)return[]}else{if(d>0||d<p)return[];v=l*c-f*h;if(v>0||v<p)return[]}if(v==0){if(s&&(d==0||d==p))return[];return[e]}if(v==p){if(s&&(d==0||d==p))return[];return[t]}if(d==0)return[r];if(d==p)return[i];var m=v/p;return[{x:e.x+m*u,y:e.y+m*a}]}else{if(d!=0||l*c!=f*h)return[];var g=u==0&&a==0;var y=f==0&&l==0;if(g&&y){if(e.x!=r.x||e.y!=r.y)return[];return[e]}if(g){if(!n(r,i,e))return[];return[e]}if(y){if(!n(e,t,r))return[];return[r]}var b,w,E,S;var x,T,N,C;if(u!=0){if(e.x<t.x){b=e;E=e.x;w=t;S=t.x}else{b=t;E=t.x;w=e;S=e.x}if(r.x<i.x){x=r;N=r.x;T=i;C=i.x}else{x=i;N=i.x;T=r;C=r.x}}else{if(e.y<t.y){b=e;E=e.y;w=t;S=t.y}else{b=t;E=t.y;w=e;S=e.y}if(r.y<i.y){x=r;N=r.y;T=i;C=i.y}else{x=i;N=i.y;T=r;C=r.y}}if(E<=N){if(S<N)return[];if(S==N){if(s)return[];return[x]}if(S<=C)return[x,w];return[x,T]}else{if(E>C)return[];if(E==C){if(s)return[];return[b]}if(S<=C)return[b,w];return[b,T]}}}function i(e,t,n,r){var i=1e-10;var s=t.x-e.x,o=t.y-e.y;var u=n.x-e.x,a=n.y-e.y;var f=r.x-e.x,l=r.y-e.y;var c=s*a-o*u;var h=s*l-o*f;if(Math.abs(c)>i){var p=f*a-l*u;if(c>0){return h>=0&&p>=0}else{return h>=0||p>=0}}else{return h>0}}function s(e,t){function o(e,t){var r=n.length-1;var o=e-1;if(o<0)o=r;var u=e+1;if(u>r)u=0;var a=i(n[e],n[o],n[u],s[t]);if(!a){return false}var f=s.length-1;var l=t-1;if(l<0)l=f;var c=t+1;if(c>f)c=0;a=i(s[t],s[l],s[c],n[e]);if(!a){return false}return true}function u(e,t){var i,s,o;for(i=0;i<n.length;i++){s=i+1;s%=n.length;o=r(e,t,n[i],n[s],true);if(o.length>0)return true}return false}function f(e,n){var i,s,o,u,f;for(i=0;i<a.length;i++){s=t[a[i]];for(o=0;o<s.length;o++){u=o+1;u%=s.length;f=r(e,n,s[o],s[u],true);if(f.length>0)return true}}return false}var n=e.concat();var s;var a=[];var l,c,h,p,d,v,m=[],g,y,b,w;for(var E=0,S=t.length;E<S;E++){a.push(E)}var x=0;var T=a.length*2;while(a.length>0){T--;if(T<0){console.log("Infinite Loop! Holes left:"+a.length+", Probably Hole outside Shape!");break}for(c=x;c<n.length;c++){h=n[c];l=-1;for(var E=0;E<a.length;E++){d=a[E];v=h.x+":"+h.y+":"+d;if(m[v]!==undefined)continue;s=t[d];for(var N=0;N<s.length;N++){p=s[N];if(!o(c,N))continue;if(u(h,p))continue;if(f(h,p))continue;l=N;a.splice(E,1);g=n.slice(0,c+1);y=n.slice(c);b=s.slice(l);w=s.slice(0,l+1);n=g.concat(b).concat(w).concat(y);x=c;break}if(l>=0)break;m[v]=true}if(l>=0)break}}return n}var o,u,a,f,l,c,h={};var p=e.concat();for(var d=0,v=t.length;d<v;d++){Array.prototype.push.apply(p,t[d])}for(o=0,u=p.length;o<u;o++){l=p[o].x+":"+p[o].y;if(h[l]!==undefined){console.log("Duplicate point",l)}h[l]=o}var m=s(e,t);var g=THREE.FontUtils.Triangulate(m,false);return g;for(o=0,u=g.length;o<u;o++){f=g[o];for(a=0;a<3;a++){l=f[a].x+":"+f[a].y;c=h[l];if(c!==undefined){f[a]=c}}}return g.concat()},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var n=1-e;return n*n*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,n,r){return this.b2p0(e,t)+this.b2p1(e,n)+this.b2p2(e,r)},b3p0:function(e,t){var n=1-e;return n*n*n*t},b3p1:function(e,t){var n=1-e;return 3*n*n*e*t},b3p2:function(e,t){var n=1-e;return 3*n*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,n,r,i){return this.b3p0(e,t)+this.b3p1(e,n)+this.b3p2(e,r)+this.b3p3(e,i)}};THREE.LineCurve=function(e,t){this.v1=e;this.v2=t};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);t.multiplyScalar(e).add(this.v1);return t};THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)};THREE.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()};THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e;this.v1=t;this.v2=n};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new THREE.Vector2;t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x);t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y);return t};THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new THREE.Vector2;t.x=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x);t.y=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);return t.normalize()};THREE.CubicBezierCurve=function(e,t,n,r){this.v0=e;this.v1=t;this.v2=n;this.v3=r};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,n;t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x);n=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(t,n)};THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,n;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x);n=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new THREE.Vector2(t,n);r.normalize();return r};THREE.SplineCurve=function(e){this.points=e==undefined?[]:e};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points;var n=(t.length-1)*e;var r=Math.floor(n);var i=n-r;var s=t[r==0?r:r-1];var o=t[r];var u=t[r>t.length-2?t.length-1:r+1];var a=t[r>t.length-3?t.length-1:r+2];var f=new THREE.Vector2;f.x=THREE.Curve.Utils.interpolate(s.x,o.x,u.x,a.x,i);f.y=THREE.Curve.Utils.interpolate(s.y,o.y,u.y,a.y,i);return f};THREE.EllipseCurve=function(e,t,n,r,i,s,o){this.aX=e;this.aY=t;this.xRadius=n;this.yRadius=r;this.aStartAngle=i;this.aEndAngle=s;this.aClockwise=o};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;if(t<0)t+=Math.PI*2;if(t>Math.PI*2)t-=Math.PI*2;var n;if(this.aClockwise===true){n=this.aEndAngle+(1-e)*(Math.PI*2-t)}else{n=this.aStartAngle+e*t}var r=new THREE.Vector2;r.x=this.aX+this.xRadius*Math.cos(n);r.y=this.aY+this.yRadius*Math.sin(n);return r};THREE.ArcCurve=function(e,t,n,r,i,s){THREE.EllipseCurve.call(this,e,t,n,n,r,i,s)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e;this.v2=t},function(e){var t=new THREE.Vector3;t.subVectors(this.v2,this.v1);t.multiplyScalar(e);t.add(this.v1);return t});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e;this.v1=t;this.v2=n},function(e){var t=new THREE.Vector3;t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x);t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y);t.z=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z);return t});THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,r){this.v0=e;this.v1=t;this.v2=n;this.v3=r},function(e){var t=new THREE.Vector3;t.x=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x);t.y=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);t.z=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return t});THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=e==undefined?[]:e},function(e){var t=this.points;var n=(t.length-1)*e;var r=Math.floor(n);var i=n-r;var s=t[r==0?r:r-1];var o=t[r];var u=t[r>t.length-2?t.length-1:r+1];var a=t[r>t.length-3?t.length-1:r+2];var f=new THREE.Vector3;f.x=THREE.Curve.Utils.interpolate(s.x,o.x,u.x,a.x,i);f.y=THREE.Curve.Utils.interpolate(s.y,o.y,u.y,a.y,i);f.z=THREE.Curve.Utils.interpolate(s.z,o.z,u.z,a.z,i);return f});THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=e==undefined?[]:e},function(e){var t=this.points;var n=(t.length-0)*e;var r=Math.floor(n);var i=n-r;r+=r>0?0:(Math.floor(Math.abs(r)/t.length)+1)*t.length;var s=t[(r-1)%t.length];var o=t[r%t.length];var u=t[(r+1)%t.length];var a=t[(r+2)%t.length];var f=new THREE.Vector3;f.x=THREE.Curve.Utils.interpolate(s.x,o.x,u.x,a.x,i);f.y=THREE.Curve.Utils.interpolate(s.y,o.y,u.y,a.y,i);f.z=THREE.Curve.Utils.interpolate(s.z,o.z,u.z,a.z,i);return f});THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){console.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){console.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){console.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(e.initialized===true)return;for(var t=0;t<e.hierarchy.length;t++){for(var n=0;n<e.hierarchy[t].keys.length;n++){if(e.hierarchy[t].keys[n].time<0){e.hierarchy[t].keys[n].time=0}if(e.hierarchy[t].keys[n].rot!==undefined&&!(e.hierarchy[t].keys[n].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[n].rot;e.hierarchy[t].keys[n].rot=(new THREE.Quaternion).fromArray(r)}}if(e.hierarchy[t].keys.length&&e.hierarchy[t].keys[0].morphTargets!==undefined){var i={};for(var n=0;n<e.hierarchy[t].keys.length;n++){for(var s=0;s<e.hierarchy[t].keys[n].morphTargets.length;s++){var o=e.hierarchy[t].keys[n].morphTargets[s];i[o]=-1}}e.hierarchy[t].usedMorphTargets=i;for(var n=0;n<e.hierarchy[t].keys.length;n++){var u={};for(var o in i){for(var s=0;s<e.hierarchy[t].keys[n].morphTargets.length;s++){if(e.hierarchy[t].keys[n].morphTargets[s]===o){u[o]=e.hierarchy[t].keys[n].morphTargetsInfluences[s];break}}if(s===e.hierarchy[t].keys[n].morphTargets.length){u[o]=0}}e.hierarchy[t].keys[n].morphTargetsInfluences=u}}for(var n=1;n<e.hierarchy[t].keys.length;n++){if(e.hierarchy[t].keys[n].time===e.hierarchy[t].keys[n-1].time){e.hierarchy[t].keys.splice(n,1);n--}}for(var n=0;n<e.hierarchy[t].keys.length;n++){e.hierarchy[t].keys[n].index=n}}e.initialized=true;return e},parse:function(e){var t=function(e,n){n.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],n)};var n=[];if(e instanceof THREE.SkinnedMesh){for(var r=0;r<e.skeleton.bones.length;r++){n.push(e.skeleton.bones[r])}}else{t(e,n)}return n},play:function(e){if(this.animations.indexOf(e)===-1){this.animations.push(e)}},stop:function(e){var t=this.animations.indexOf(e);if(t!==-1){this.animations.splice(t,1)}},update:function(e){for(var t=0;t<this.animations.length;t++){this.animations[t].resetBlendWeights()}for(var t=0;t<this.animations.length;t++){this.animations[t].update(e)}}};THREE.Animation=function(e,t){this.root=e;this.data=THREE.AnimationHandler.init(t);this.hierarchy=THREE.AnimationHandler.parse(e);this.currentTime=0;this.timeScale=1;this.isPlaying=false;this.loop=true;this.weight=0;this.interpolationType=THREE.AnimationHandler.LINEAR};THREE.Animation.prototype.keyTypes=["pos","rot","scl"];THREE.Animation.prototype.play=function(e,t){this.currentTime=e!==undefined?e:0;this.weight=t!==undefined?t:1;this.isPlaying=true;this.reset();THREE.AnimationHandler.play(this)};THREE.Animation.prototype.stop=function(){this.isPlaying=false;THREE.AnimationHandler.stop(this)};THREE.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];n.matrixAutoUpdate=true;if(n.animationCache===undefined){n.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}}}if(n.animationCache.animations[this.data.name]===undefined){n.animationCache.animations[this.data.name]={};n.animationCache.animations[this.data.name].prevKey={pos:0,rot:0,scl:0};n.animationCache.animations[this.data.name].nextKey={pos:0,rot:0,scl:0};n.animationCache.animations[this.data.name].originalMatrix=n.matrix}var r=n.animationCache.animations[this.data.name];for(var i=0;i<3;i++){var s=this.keyTypes[i];var o=this.data.hierarchy[e].keys[0];var u=this.getNextKeyWith(s,e,1);while(u.time<this.currentTime&&u.index>o.index){o=u;u=this.getNextKeyWith(s,e,u.index+1)}r.prevKey[s]=o;r.nextKey[s]=u}}};THREE.Animation.prototype.resetBlendWeights=function(){for(var e=0,t=this.hierarchy.length;e<t;e++){var n=this.hierarchy[e];if(n.animationCache!==undefined){n.animationCache.blending.positionWeight=0;n.animationCache.blending.quaternionWeight=0;n.animationCache.blending.scaleWeight=0}}};THREE.Animation.prototype.update=function(){var e=[];var t=new THREE.Vector3;var n=new THREE.Vector3;var r=new THREE.Quaternion;var i=function(e,t){var n=[],r=[],i,o,u,a,f,l,c,h,p;i=(e.length-1)*t;o=Math.floor(i);u=i-o;n[0]=o===0?o:o-1;n[1]=o;n[2]=o>e.length-2?o:o+1;n[3]=o>e.length-3?o:o+2;l=e[n[0]];c=e[n[1]];h=e[n[2]];p=e[n[3]];a=u*u;f=u*a;r[0]=s(l[0],c[0],h[0],p[0],u,a,f);r[1]=s(l[1],c[1],h[1],p[1],u,a,f);r[2]=s(l[2],c[2],h[2],p[2],u,a,f);return r};var s=function(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t};return function(s){if(this.isPlaying===false)return;this.currentTime+=s*this.timeScale;if(this.weight===0)return;var o=this.data.length;if(this.currentTime>o||this.currentTime<0){if(this.loop){this.currentTime%=o;if(this.currentTime<0)this.currentTime+=o;this.reset()}else{this.stop();return}}for(var u=0,a=this.hierarchy.length;u<a;u++){var f=this.hierarchy[u];var l=f.animationCache.animations[this.data.name];var c=f.animationCache.blending;for(var h=0;h<3;h++){var p=this.keyTypes[h];var d=l.prevKey[p];var v=l.nextKey[p];if(this.timeScale>0&&v.time<=this.currentTime||this.timeScale<0&&d.time>=this.currentTime){d=this.data.hierarchy[u].keys[0];v=this.getNextKeyWith(p,u,1);while(v.time<this.currentTime&&v.index>d.index){d=v;v=this.getNextKeyWith(p,u,v.index+1)}l.prevKey[p]=d;l.nextKey[p]=v}f.matrixAutoUpdate=true;f.matrixWorldNeedsUpdate=true;var m=(this.currentTime-d.time)/(v.time-d.time);var g=d[p];var y=v[p];if(m<0)m=0;if(m>1)m=1;if(p==="pos"){if(this.interpolationType===THREE.AnimationHandler.LINEAR){n.x=g[0]+(y[0]-g[0])*m;n.y=g[1]+(y[1]-g[1])*m;n.z=g[2]+(y[2]-g[2])*m;var b=this.weight/(this.weight+c.positionWeight);f.position.lerp(n,b);c.positionWeight+=this.weight}else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){e[0]=this.getPrevKeyWith("pos",u,d.index-1)["pos"];e[1]=g;e[2]=y;e[3]=this.getNextKeyWith("pos",u,v.index+1)["pos"];m=m*.33+.33;var w=i(e,m);var b=this.weight/(this.weight+c.positionWeight);c.positionWeight+=this.weight;var E=f.position;E.x=E.x+(w[0]-E.x)*b;E.y=E.y+(w[1]-E.y)*b;E.z=E.z+(w[2]-E.z)*b;if(this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var S=i(e,m*1.01);t.set(S[0],S[1],S[2]);t.sub(E);t.y=0;t.normalize();var x=Math.atan2(t.x,t.z);f.rotation.set(0,x,0)}}}else if(p==="rot"){THREE.Quaternion.slerp(g,y,r,m);if(c.quaternionWeight===0){f.quaternion.copy(r);c.quaternionWeight=this.weight}else{var b=this.weight/(this.weight+c.quaternionWeight);THREE.Quaternion.slerp(f.quaternion,r,f.quaternion,b);c.quaternionWeight+=this.weight}}else if(p==="scl"){n.x=g[0]+(y[0]-g[0])*m;n.y=g[1]+(y[1]-g[1])*m;n.z=g[2]+(y[2]-g[2])*m;var b=this.weight/(this.weight+c.scaleWeight);f.scale.lerp(n,b);c.scaleWeight+=this.weight}}}return true}}();THREE.Animation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){n=n<r.length-1?n:r.length-1}else{n=n%r.length}for(;n<r.length;n++){if(r[n][e]!==undefined){return r[n]}}return this.data.hierarchy[t].keys[0]};THREE.Animation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){n=n>0?n:0}else{n=n>=0?n:n+r.length}for(;n>=0;n--){if(r[n][e]!==undefined){return r[n]}}return this.data.hierarchy[t].keys[r.length-1]};THREE.KeyFrameAnimation=function(e){this.root=e.node;this.data=THREE.AnimationHandler.init(e);this.hierarchy=THREE.AnimationHandler.parse(this.root);this.currentTime=0;this.timeScale=.001;this.isPlaying=false;this.isPaused=true;this.loop=true;for(var t=0,n=this.hierarchy.length;t<n;t++){var r=this.data.hierarchy[t].keys,i=this.data.hierarchy[t].sids,s=this.hierarchy[t];if(r.length&&i){for(var o=0;o<i.length;o++){var u=i[o],a=this.getNextKeyWith(u,t,0);if(a){a.apply(u)}}s.matrixAutoUpdate=false;this.data.hierarchy[t].node.updateMatrix();s.matrixWorldNeedsUpdate=true}}};THREE.KeyFrameAnimation.prototype.play=function(e){this.currentTime=e!==undefined?e:0;if(this.isPlaying===false){this.isPlaying=true;var t,n=this.hierarchy.length,r,i;for(t=0;t<n;t++){r=this.hierarchy[t];i=this.data.hierarchy[t];if(i.animationCache===undefined){i.animationCache={};i.animationCache.prevKey=null;i.animationCache.nextKey=null;i.animationCache.originalMatrix=r.matrix}var s=this.data.hierarchy[t].keys;if(s.length){i.animationCache.prevKey=s[0];i.animationCache.nextKey=s[1];this.startTime=Math.min(s[0].time,this.startTime);this.endTime=Math.max(s[s.length-1].time,this.endTime)}}this.update(0)}this.isPaused=false;THREE.AnimationHandler.play(this)};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=false;this.isPaused=false;THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e];var n=this.data.hierarchy[e];if(n.animationCache!==undefined){var r=n.animationCache.originalMatrix;r.copy(t.matrix);t.matrix=r;delete n.animationCache}}};THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying===false)return;this.currentTime+=e*this.timeScale;var t=this.data.length;if(this.loop===true&&this.currentTime>t){this.currentTime%=t}this.currentTime=Math.min(this.currentTime,t);for(var n=0,r=this.hierarchy.length;n<r;n++){var i=this.hierarchy[n];var s=this.data.hierarchy[n];var o=s.keys,u=s.animationCache;if(o.length){var a=u.prevKey;var f=u.nextKey;if(f.time<=this.currentTime){while(f.time<this.currentTime&&f.index>a.index){a=f;f=o[a.index+1]}u.prevKey=a;u.nextKey=f}if(f.time>=this.currentTime){a.interpolate(f,this.currentTime)}else{a.interpolate(f,f.time)}this.data.hierarchy[n].node.updateMatrix();i.matrixWorldNeedsUpdate=true}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;n=n%r.length;for(;n<r.length;n++){if(r[n].hasTarget(e)){return r[n]}}return r[0]};THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,n){var r=this.data.hierarchy[t].keys;n=n>=0?n:n+r.length;for(;n>=0;n--){if(r[n].hasTarget(e)){return r[n]}}return r[r.length-1]};THREE.MorphAnimation=function(e){this.mesh=e;this.frames=e.morphTargetInfluences.length;this.currentTime=0;this.duration=1e3;this.loop=true;this.isPlaying=false};THREE.MorphAnimation.prototype={play:function(){this.isPlaying=true},pause:function(){this.isPlaying=false},update:function(){var e=0;var t=0;return function(n){if(this.isPlaying===false)return;this.currentTime+=n;if(this.loop===true&&this.currentTime>this.duration){this.currentTime%=this.duration}this.currentTime=Math.min(this.currentTime,this.duration);var r=this.duration/this.frames;var i=Math.floor(this.currentTime/r);if(i!=t){this.mesh.morphTargetInfluences[e]=0;this.mesh.morphTargetInfluences[t]=1;this.mesh.morphTargetInfluences[i]=0;e=t;t=i}this.mesh.morphTargetInfluences[i]=this.currentTime%r/r;this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[i]}}()};THREE.BoxGeometry=function(e,t,n,r,i,s){function l(e,t,n,r,i,s,u,a){var f,l,c,h=o.widthSegments,p=o.heightSegments,d=i/2,v=s/2,m=o.vertices.length;if(e==="x"&&t==="y"||e==="y"&&t==="x"){f="z"}else if(e==="x"&&t==="z"||e==="z"&&t==="x"){f="y";p=o.depthSegments}else if(e==="z"&&t==="y"||e==="y"&&t==="z"){f="x";h=o.depthSegments}var g=h+1,y=p+1,b=i/h,w=s/p,E=new THREE.Vector3;E[f]=u>0?1:-1;for(c=0;c<y;c++){for(l=0;l<g;l++){var S=new THREE.Vector3;S[e]=(l*b-d)*n;S[t]=(c*w-v)*r;S[f]=u;o.vertices.push(S)}}for(c=0;c<p;c++){for(l=0;l<h;l++){var x=l+g*c;var T=l+g*(c+1);var N=l+1+g*(c+1);var C=l+1+g*c;var k=new THREE.Vector2(l/h,1-c/p);var L=new THREE.Vector2(l/h,1-(c+1)/p);var A=new THREE.Vector2((l+1)/h,1-(c+1)/p);var O=new THREE.Vector2((l+1)/h,1-c/p);var M=new THREE.Face3(x+m,T+m,C+m);M.normal.copy(E);M.vertexNormals.push(E.clone(),E.clone(),E.clone());M.materialIndex=a;o.faces.push(M);o.faceVertexUvs[0].push([k,L,O]);M=new THREE.Face3(T+m,N+m,C+m);M.normal.copy(E);M.vertexNormals.push(E.clone(),E.clone(),E.clone());M.materialIndex=a;o.faces.push(M);o.faceVertexUvs[0].push([L.clone(),A,O.clone()])}}}THREE.Geometry.call(this);this.type="BoxGeometry";this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};this.widthSegments=r||1;this.heightSegments=i||1;this.depthSegments=s||1;var o=this;var u=e/2;var a=t/2;var f=n/2;l("z","y",-1,-1,n,t,u,0);l("z","y",1,-1,n,t,-u,1);l("x","z",1,1,e,n,a,2);l("x","z",1,-1,e,n,-a,3);l("x","y",1,-1,e,t,f,4);l("x","y",-1,-1,e,t,-f,5);this.mergeVertices()};THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CircleGeometry=function(e,t,n,r){THREE.Geometry.call(this);this.type="CircleGeometry";this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r};e=e||50;t=t!==undefined?Math.max(3,t):8;n=n!==undefined?n:0;r=r!==undefined?r:Math.PI*2;var i,s=[],o=new THREE.Vector3,u=new THREE.Vector2(.5,.5);this.vertices.push(o);s.push(u);for(i=0;i<=t;i++){var a=new THREE.Vector3;var f=n+i/t*r;a.x=e*Math.cos(f);a.y=e*Math.sin(f);this.vertices.push(a);s.push(new THREE.Vector2((a.x/e+1)/2,(a.y/e+1)/2))}var l=new THREE.Vector3(0,0,1);for(i=1;i<=t;i++){this.faces.push(new THREE.Face3(i,i+1,0,[l.clone(),l.clone(),l.clone()]));this.faceVertexUvs[0].push([s[i].clone(),s[i+1].clone(),u.clone()])}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(e,t,n,r,i,s){console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry.");return new THREE.BoxGeometry(e,t,n,r,i,s)};THREE.CylinderGeometry=function(e,t,n,r,i,s){THREE.Geometry.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s};e=e!==undefined?e:20;t=t!==undefined?t:20;n=n!==undefined?n:100;r=r||8;i=i||1;s=s!==undefined?s:false;var o=n/2;var u,a,f=[],l=[];for(a=0;a<=i;a++){var c=[];var h=[];var p=a/i;var d=p*(t-e)+e;for(u=0;u<=r;u++){var v=u/r;var m=new THREE.Vector3;m.x=d*Math.sin(v*Math.PI*2);m.y=-p*n+o;m.z=d*Math.cos(v*Math.PI*2);this.vertices.push(m);c.push(this.vertices.length-1);h.push(new THREE.Vector2(v,1-p))}f.push(c);l.push(h)}var g=(t-e)/n;var y,b;for(u=0;u<r;u++){if(e!==0){y=this.vertices[f[0][u]].clone();b=this.vertices[f[0][u+1]].clone()}else{y=this.vertices[f[1][u]].clone();b=this.vertices[f[1][u+1]].clone()}y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*g).normalize();b.setY(Math.sqrt(b.x*b.x+b.z*b.z)*g).normalize();for(a=0;a<i;a++){var w=f[a][u];var E=f[a+1][u];var S=f[a+1][u+1];var x=f[a][u+1];var T=y.clone();var N=y.clone();var C=b.clone();var k=b.clone();var L=l[a][u].clone();var A=l[a+1][u].clone();var O=l[a+1][u+1].clone();var M=l[a][u+1].clone();this.faces.push(new THREE.Face3(w,E,x,[T,N,k]));this.faceVertexUvs[0].push([L,A,M]);this.faces.push(new THREE.Face3(E,S,x,[N.clone(),C,k.clone()]));this.faceVertexUvs[0].push([A.clone(),O,M.clone()])}}if(s===false&&e>0){this.vertices.push(new THREE.Vector3(0,o,0));for(u=0;u<r;u++){var w=f[0][u];var E=f[0][u+1];var S=this.vertices.length-1;var T=new THREE.Vector3(0,1,0);var N=new THREE.Vector3(0,1,0);var C=new THREE.Vector3(0,1,0);var L=l[0][u].clone();var A=l[0][u+1].clone();var O=new THREE.Vector2(A.x,0);this.faces.push(new THREE.Face3(w,E,S,[T,N,C]));this.faceVertexUvs[0].push([L,A,O])}}if(s===false&&t>0){this.vertices.push(new THREE.Vector3(0,-o,0));for(u=0;u<r;u++){var w=f[a][u+1];var E=f[a][u];var S=this.vertices.length-1;var T=new THREE.Vector3(0,-1,0);var N=new THREE.Vector3(0,-1,0);var C=new THREE.Vector3(0,-1,0);var L=l[a][u+1].clone();var A=l[a][u].clone();var O=new THREE.Vector2(A.x,1);this.faces.push(new THREE.Face3(w,E,S,[T,N,C]));this.faceVertexUvs[0].push([L,A,O])}}this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry=function(e,t){if(typeof e==="undefined"){e=[];return}THREE.Geometry.call(this);this.type="ExtrudeGeometry";e=e instanceof Array?e:[e];this.addShapeList(e,t);this.computeFaceNormals()};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){var n=e.length;for(var r=0;r<n;r++){var i=e[r];this.addShape(i,t)}};THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function M(e,t,n){if(!t)console.log("die");return t.clone().multiplyScalar(n).add(e)}function z(e,t,n){var r=1e-10;var i,s,o=1;var u=e.x-t.x,a=e.y-t.y;var f=n.x-e.x,l=n.y-e.y;var c=u*u+a*a;var h=u*l-a*f;if(Math.abs(h)>r){var p=Math.sqrt(c);var d=Math.sqrt(f*f+l*l);var v=t.x-a/p;var m=t.y+u/p;var g=n.x-l/d;var y=n.y+f/d;var b=((g-v)*l-(y-m)*f)/(u*l-a*f);i=v+u*b-e.x;s=m+a*b-e.y;var w=i*i+s*s;if(w<=2){return new THREE.Vector2(i,s)}else{o=Math.sqrt(w/2)}}else{var E=false;if(u>r){if(f>r){E=true}}else{if(u<-r){if(f<-r){E=true}}else{if(Math.sign(a)==Math.sign(l)){E=true}}}if(E){i=-a;s=u;o=Math.sqrt(c)}else{i=u;s=a;o=Math.sqrt(c/2)}}return new THREE.Vector2(i/o,s/o)}function nt(){if(o){var e=0;var t=j*e;for(X=0;X<I;X++){F=A[X];ot(F[2]+t,F[1]+t,F[0]+t)}e=a+s*2;t=j*e;for(X=0;X<I;X++){F=A[X];ot(F[0]+t,F[1]+t,F[2]+t)}}else{for(X=0;X<I;X++){F=A[X];ot(F[2],F[1],F[0])}for(X=0;X<I;X++){F=A[X];ot(F[0]+j*a,F[1]+j*a,F[2]+j*a)}}}function rt(){var e=0;it(O,e);e+=O.length;for(w=0,E=k.length;w<E;w++){b=k[w];it(b,e);e+=b.length}}function it(e,t){var n,r;X=e.length;while(--X>=0){n=X;r=X-1;if(r<0)r=e.length-1;var i=0,o=a+s*2;for(i=0;i<o;i++){var u=j*i;var f=j*(i+1);var l=t+n+u,c=t+r+u,h=t+r+f,p=t+n+f;ut(l,c,h,p,e,i,o,n,r)}}}function st(e,t,n){S.vertices.push(new THREE.Vector3(e,t,n))}function ot(e,t,n){e+=T;t+=T;n+=T;S.faces.push(new THREE.Face3(e,t,n,null,null,h));var r=d.generateTopUV(S,e,t,n);S.faceVertexUvs[0].push(r)}function ut(e,t,n,r,i,s,o,u,a){e+=T;t+=T;n+=T;r+=T;S.faces.push(new THREE.Face3(e,t,r,null,null,p));S.faces.push(new THREE.Face3(t,n,r,null,null,p));var f=d.generateSideWallUV(S,e,t,n,r);S.faceVertexUvs[0].push([f[0],f[1],f[3]]);S.faceVertexUvs[0].push([f[1],f[2],f[3]])}var n=t.amount!==undefined?t.amount:100;var r=t.bevelThickness!==undefined?t.bevelThickness:6;var i=t.bevelSize!==undefined?t.bevelSize:r-2;var s=t.bevelSegments!==undefined?t.bevelSegments:3;var o=t.bevelEnabled!==undefined?t.bevelEnabled:true;var u=t.curveSegments!==undefined?t.curveSegments:12;var a=t.steps!==undefined?t.steps:1;var f=t.extrudePath;var l,c=false;var h=t.material;var p=t.extrudeMaterial;var d=t.UVGenerator!==undefined?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;var v,m,g,y;if(f){l=f.getSpacedPoints(a);c=true;o=false;v=t.frames!==undefined?t.frames:new THREE.TubeGeometry.FrenetFrames(f,a,false);m=new THREE.Vector3;g=new THREE.Vector3;y=new THREE.Vector3}if(!o){s=0;r=0;i=0}var b,w,E;var S=this;var x=[];var T=this.vertices.length;var N=e.extractPoints(u);var C=N.shape;var k=N.holes;var L=!THREE.Shape.Utils.isClockWise(C);if(L){C=C.reverse();for(w=0,E=k.length;w<E;w++){b=k[w];if(THREE.Shape.Utils.isClockWise(b)){k[w]=b.reverse()}}L=false}var A=THREE.Shape.Utils.triangulateShape(C,k);var O=C;for(w=0,E=k.length;w<E;w++){b=k[w];C=C.concat(b)}var _,D,P,H,B,j=C.length,F,I=A.length,q,R=O.length;var U=180/Math.PI;var W=[];for(var X=0,V=O.length,$=V-1,J=X+1;X<V;X++,$++,J++){if($===V)$=0;if(J===V)J=0;var K=O[X];var Q=O[$];var G=O[J];W[X]=z(O[X],O[$],O[J])}var Y=[],Z,et=W.concat();for(w=0,E=k.length;w<E;w++){b=k[w];Z=[];for(X=0,V=b.length,$=V-1,J=X+1;X<V;X++,$++,J++){if($===V)$=0;if(J===V)J=0;Z[X]=z(b[X],b[$],b[J])}Y.push(Z);et=et.concat(Z)}for(_=0;_<s;_++){P=_/s;H=r*(1-P);D=i*Math.sin(P*Math.PI/2);for(X=0,V=O.length;X<V;X++){B=M(O[X],W[X],D);st(B.x,B.y,-H)}for(w=0,E=k.length;w<E;w++){b=k[w];Z=Y[w];for(X=0,V=b.length;X<V;X++){B=M(b[X],Z[X],D);st(B.x,B.y,-H)}}}D=i;for(X=0;X<j;X++){B=o?M(C[X],et[X],D):C[X];if(!c){st(B.x,B.y,0)}else{g.copy(v.normals[0]).multiplyScalar(B.x);m.copy(v.binormals[0]).multiplyScalar(B.y);y.copy(l[0]).add(g).add(m);st(y.x,y.y,y.z)}}var tt;for(tt=1;tt<=a;tt++){for(X=0;X<j;X++){B=o?M(C[X],et[X],D):C[X];if(!c){st(B.x,B.y,n/a*tt)}else{g.copy(v.normals[tt]).multiplyScalar(B.x);m.copy(v.binormals[tt]).multiplyScalar(B.y);y.copy(l[tt]).add(g).add(m);st(y.x,y.y,y.z)}}}for(_=s-1;_>=0;_--){P=_/s;H=r*(1-P);D=i*Math.sin(P*Math.PI/2);for(X=0,V=O.length;X<V;X++){B=M(O[X],W[X],D);st(B.x,B.y,n+H)}for(w=0,E=k.length;w<E;w++){b=k[w];Z=Y[w];for(X=0,V=b.length;X<V;X++){B=M(b[X],Z[X],D);if(!c){st(B.x,B.y,n+H)}else{st(B.x,B.y+l[a-1].y,l[a-1].x+H)}}}}nt();rt()};THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices;var s=i[t];var o=i[n];var u=i[r];return[new THREE.Vector2(s.x,s.y),new THREE.Vector2(o.x,o.y),new THREE.Vector2(u.x,u.y)]},generateSideWallUV:function(e,t,n,r,i){var s=e.vertices;var o=s[t];var u=s[n];var a=s[r];var f=s[i];if(Math.abs(o.y-u.y)<.01){return[new THREE.Vector2(o.x,1-o.z),new THREE.Vector2(u.x,1-u.z),new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(f.x,1-f.z)]}else{return[new THREE.Vector2(o.y,1-o.z),new THREE.Vector2(u.y,1-u.z),new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(f.y,1-f.z)]}}};THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this);this.type="ShapeGeometry";if(e instanceof Array===false)e=[e];this.addShapeList(e,t);this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++){this.addShape(e[n],t)}return this};THREE.ShapeGeometry.prototype.addShape=function(e,t){if(t===undefined)t={};var n=t.curveSegments!==undefined?t.curveSegments:12;var r=t.material;var i=t.UVGenerator===undefined?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator;var s,o,u,a;var f=this.vertices.length;var l=e.extractPoints(n);var c=l.shape;var h=l.holes;var p=!THREE.Shape.Utils.isClockWise(c);if(p){c=c.reverse();for(s=0,o=h.length;s<o;s++){u=h[s];if(THREE.Shape.Utils.isClockWise(u)){h[s]=u.reverse()}}p=false}var d=THREE.Shape.Utils.triangulateShape(c,h);var v=c;for(s=0,o=h.length;s<o;s++){u=h[s];c=c.concat(u)}var m,g=c.length;var y,b=d.length;var w,E=v.length;for(s=0;s<g;s++){m=c[s];this.vertices.push(new THREE.Vector3(m.x,m.y,0))}for(s=0;s<b;s++){y=d[s];var S=y[0]+f;var x=y[1]+f;var T=y[2]+f;this.faces.push(new THREE.Face3(S,x,T,null,null,r));this.faceVertexUvs[0].push(i.generateTopUV(this,S,x,T))}};THREE.LatheGeometry=function(e,t,n,r){THREE.Geometry.call(this);this.type="LatheGeometry";this.parameters={points:e,segments:t,phiStart:n,phiLength:r};t=t||12;n=n||0;r=r||2*Math.PI;var i=1/(e.length-1);var s=1/t;for(var o=0,u=t;o<=u;o++){var a=n+o*s*r;var f=Math.cos(a),l=Math.sin(a);for(var c=0,h=e.length;c<h;c++){var p=e[c];var d=new THREE.Vector3;d.x=f*p.x-l*p.y;d.y=l*p.x+f*p.y;d.z=p.z;this.vertices.push(d)}}var v=e.length;for(var o=0,u=t;o<u;o++){for(var c=0,h=e.length-1;c<h;c++){var m=c+v*o;var g=m;var y=m+v;var f=m+1+v;var b=m+1;var w=o*s;var E=c*i;var S=w+s;var x=E+i;this.faces.push(new THREE.Face3(g,y,b));this.faceVertexUvs[0].push([new THREE.Vector2(w,E),new THREE.Vector2(S,E),new THREE.Vector2(w,x)]);this.faces.push(new THREE.Face3(y,f,b));this.faceVertexUvs[0].push([new THREE.Vector2(S,E),new THREE.Vector2(S,x),new THREE.Vector2(w,x)])}}this.mergeVertices();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(e,t,n,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint.");THREE.Geometry.call(this);this.type="PlaneGeometry";this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,n,r))};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this);this.type="PlaneBufferGeometry";this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2;var s=t/2;var o=n||1;var u=r||1;var a=o+1;var f=u+1;var l=e/o;var c=t/u;var h=new Float32Array(a*f*3);var p=new Float32Array(a*f*3);var d=new Float32Array(a*f*2);var v=0;var m=0;for(var g=0;g<f;g++){var y=g*c-s;for(var b=0;b<a;b++){var w=b*l-i;h[v]=w;h[v+1]=-y;p[v+2]=1;d[m]=b/o;d[m+1]=1-g/u;v+=3;m+=2}}v=0;var E=new(h.length/3>65535?Uint32Array:Uint16Array)(o*u*6);for(var g=0;g<u;g++){for(var b=0;b<o;b++){var S=b+a*g;var x=b+a*(g+1);var T=b+1+a*(g+1);var N=b+1+a*g;E[v]=S;E[v+1]=x;E[v+2]=N;E[v+3]=x;E[v+4]=T;E[v+5]=N;v+=6}}this.addAttribute("index",new THREE.BufferAttribute(E,1));this.addAttribute("position",new THREE.BufferAttribute(h,3));this.addAttribute("normal",new THREE.BufferAttribute(p,3));this.addAttribute("uv",new THREE.BufferAttribute(d,2))};THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);THREE.RingGeometry=function(e,t,n,r,i,s){THREE.Geometry.call(this);this.type="RingGeometry";this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s};e=e||0;t=t||50;i=i!==undefined?i:0;s=s!==undefined?s:Math.PI*2;n=n!==undefined?Math.max(3,n):8;r=r!==undefined?Math.max(1,r):8;var o,u,a=[],f=e,l=(t-e)/r;for(o=0;o<r+1;o++){for(u=0;u<n+1;u++){var c=new THREE.Vector3;var h=i+u/n*s;c.x=f*Math.cos(h);c.y=f*Math.sin(h);this.vertices.push(c);a.push(new THREE.Vector2((c.x/t+1)/2,(c.y/t+1)/2))}f+=l}var p=new THREE.Vector3(0,0,1);for(o=0;o<r;o++){var d=o*(n+1);for(u=0;u<n;u++){var h=u+d;var v=h;var m=h+n+1;var g=h+n+2;this.faces.push(new THREE.Face3(v,m,g,[p.clone(),p.clone(),p.clone()]));this.faceVertexUvs[0].push([a[v].clone(),a[m].clone(),a[g].clone()]);v=h;m=h+n+2;g=h+1;this.faces.push(new THREE.Face3(v,m,g,[p.clone(),p.clone(),p.clone()]));this.faceVertexUvs[0].push([a[v].clone(),a[m].clone(),a[g].clone()])}}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,f)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry=function(e,t,n,r,i,s,o){THREE.Geometry.call(this);this.type="SphereGeometry";this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o};e=e||50;t=Math.max(3,Math.floor(t)||8);n=Math.max(2,Math.floor(n)||6);r=r!==undefined?r:0;i=i!==undefined?i:Math.PI*2;s=s!==undefined?s:0;o=o!==undefined?o:Math.PI;var u,a,f=[],l=[];for(a=0;a<=n;a++){var c=[];var h=[];for(u=0;u<=t;u++){var p=u/t;var d=a/n;var v=new THREE.Vector3;v.x=-e*Math.cos(r+p*i)*Math.sin(s+d*o);v.y=e*Math.cos(s+d*o);v.z=e*Math.sin(r+p*i)*Math.sin(s+d*o);this.vertices.push(v);c.push(this.vertices.length-1);h.push(new THREE.Vector2(p,1-d))}f.push(c);l.push(h)}for(a=0;a<n;a++){for(u=0;u<t;u++){var m=f[a][u+1];var g=f[a][u];var y=f[a+1][u];var b=f[a+1][u+1];var w=this.vertices[m].clone().normalize();var E=this.vertices[g].clone().normalize();var S=this.vertices[y].clone().normalize();var x=this.vertices[b].clone().normalize();var T=l[a][u+1].clone();var N=l[a][u].clone();var C=l[a+1][u].clone();var k=l[a+1][u+1].clone();if(Math.abs(this.vertices[m].y)===e){T.x=(T.x+N.x)/2;this.faces.push(new THREE.Face3(m,y,b,[w,S,x]));this.faceVertexUvs[0].push([T,C,k])}else if(Math.abs(this.vertices[y].y)===e){C.x=(C.x+k.x)/2;this.faces.push(new THREE.Face3(m,g,y,[w,E,S]));this.faceVertexUvs[0].push([T,N,C])}else{this.faces.push(new THREE.Face3(m,g,b,[w,E,x]));this.faceVertexUvs[0].push([T,N,k]);this.faces.push(new THREE.Face3(g,y,b,[E.clone(),S,x.clone()]));this.faceVertexUvs[0].push([N.clone(),C,k.clone()])}}}this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(e,t){t=t||{};var n=THREE.FontUtils.generateShapes(e,t);t.amount=t.height!==undefined?t.height:50;if(t.bevelThickness===undefined)t.bevelThickness=10;if(t.bevelSize===undefined)t.bevelSize=8;if(t.bevelEnabled===undefined)t.bevelEnabled=false;THREE.ExtrudeGeometry.call(this,n,t);this.type="TextGeometry"};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TorusGeometry=function(e,t,n,r,i){THREE.Geometry.call(this);this.type="TorusGeometry";this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i};e=e||100;t=t||40;n=n||8;r=r||6;i=i||Math.PI*2;var s=new THREE.Vector3,o=[],u=[];for(var a=0;a<=n;a++){for(var f=0;f<=r;f++){var l=f/r*i;var c=a/n*Math.PI*2;s.x=e*Math.cos(l);s.y=e*Math.sin(l);var h=new THREE.Vector3;h.x=(e+t*Math.cos(c))*Math.cos(l);h.y=(e+t*Math.cos(c))*Math.sin(l);h.z=t*Math.sin(c);this.vertices.push(h);o.push(new THREE.Vector2(f/r,a/n));u.push(h.clone().sub(s).normalize())}}for(var a=1;a<=n;a++){for(var f=1;f<=r;f++){var p=(r+1)*a+f-1;var d=(r+1)*(a-1)+f-1;var v=(r+1)*(a-1)+f;var m=(r+1)*a+f;var g=new THREE.Face3(p,d,m,[u[p].clone(),u[d].clone(),u[m].clone()]);this.faces.push(g);this.faceVertexUvs[0].push([o[p].clone(),o[d].clone(),o[m].clone()]);g=new THREE.Face3(d,v,m,[u[d].clone(),u[v].clone(),u[m].clone()]);this.faces.push(g);this.faceVertexUvs[0].push([o[d].clone(),o[v].clone(),o[m].clone()])}}this.computeFaceNormals()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry=function(e,t,n,r,i,s,o){function O(e,t,n,r,i){var s=Math.cos(e);var o=Math.sin(e);var u=t/n*e;var a=Math.cos(u);var f=r*(2+a)*.5*s;var l=r*(2+a)*o*.5;var c=i*r*Math.sin(u)*.5;return new THREE.Vector3(f,l,c)}THREE.Geometry.call(this);this.type="TorusKnotGeometry";this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:s,heightScale:o};e=e||100;t=t||40;n=n||64;r=r||8;i=i||2;s=s||3;o=o||1;var u=new Array(n);var a=new THREE.Vector3;var f=new THREE.Vector3;var l=new THREE.Vector3;for(var c=0;c<n;++c){u[c]=new Array(r);var h=c/n*2*i*Math.PI;var p=O(h,s,i,e,o);var d=O(h+.01,s,i,e,o);a.subVectors(d,p);f.addVectors(d,p);l.crossVectors(a,f);f.crossVectors(l,a);l.normalize();f.normalize();for(var v=0;v<r;++v){var m=v/r*2*Math.PI;var g=-t*Math.cos(m);var y=t*Math.sin(m);var b=new THREE.Vector3;b.x=p.x+g*f.x+y*l.x;b.y=p.y+g*f.y+y*l.y;b.z=p.z+g*f.z+y*l.z;u[c][v]=this.vertices.push(b)-1}}for(var c=0;c<n;++c){for(var v=0;v<r;++v){var w=(c+1)%n;var E=(v+1)%r;var S=u[c][v];var x=u[w][v];var T=u[w][E];var N=u[c][E];var C=new THREE.Vector2(c/n,v/r);var k=new THREE.Vector2((c+1)/n,v/r);var L=new THREE.Vector2((c+1)/n,(v+1)/r);var A=new THREE.Vector2(c/n,(v+1)/r);this.faces.push(new THREE.Face3(S,x,N));this.faceVertexUvs[0].push([C,k,A]);this.faces.push(new THREE.Face3(x,T,N));this.faceVertexUvs[0].push([k.clone(),L,A.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry=function(e,t,n,r,i){function I(e,t,n){return o.vertices.push(new THREE.Vector3(e,t,n))-1}THREE.Geometry.call(this);this.type="TubeGeometry";this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i};t=t||64;n=n||1;r=r||8;i=i||false;var s=[];var o=this,u,a,f,l=t+1,c,h,p,d,v,m,g,y,b,w,E,S=new THREE.Vector3,x,T,N,C,k,L,A,O,M,_,D,P;var H=new THREE.TubeGeometry.FrenetFrames(e,t,i),B=H.tangents,j=H.normals,F=H.binormals;this.tangents=B;this.normals=j;this.binormals=F;for(x=0;x<l;x++){s[x]=[];g=x/(l-1);E=e.getPointAt(g);u=B[x];a=j[x];f=F[x];for(T=0;T<r;T++){y=T/r*2*Math.PI;b=-n*Math.cos(y);w=n*Math.sin(y);S.copy(E);S.x+=b*a.x+w*f.x;S.y+=b*a.y+w*f.y;S.z+=b*a.z+w*f.z;s[x][T]=I(S.x,S.y,S.z)}}for(x=0;x<t;x++){for(T=0;T<r;T++){N=i?(x+1)%t:x+1;C=(T+1)%r;k=s[x][T];L=s[N][T];A=s[N][C];O=s[x][C];M=new THREE.Vector2(x/t,T/r);_=new THREE.Vector2((x+1)/t,T/r);D=new THREE.Vector2((x+1)/t,(T+1)/r);P=new THREE.Vector2(x/t,(T+1)/r);this.faces.push(new THREE.Face3(k,L,O));this.faceVertexUvs[0].push([M,_,P]);this.faces.push(new THREE.Face3(L,A,O));this.faceVertexUvs[0].push([_.clone(),D,P.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.FrenetFrames=function(e,t,n){function E(){u[0]=new THREE.Vector3;a[0]=new THREE.Vector3;d=Number.MAX_VALUE;v=Math.abs(o[0].x);m=Math.abs(o[0].y);g=Math.abs(o[0].z);if(v<=d){d=v;i.set(1,0,0)}if(m<=d){d=m;i.set(0,1,0)}if(g<=d){i.set(0,0,1)}f.crossVectors(o[0],i).normalize();u[0].crossVectors(o[0],f);a[0].crossVectors(o[0],u[0])}var r=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3,o=[],u=[],a=[],f=new THREE.Vector3,l=new THREE.Matrix4,c=t+1,h,p=1e-4,d,v,m,g,y,b,w;this.tangents=o;this.normals=u;this.binormals=a;for(y=0;y<c;y++){b=y/(c-1);o[y]=e.getTangentAt(b);o[y].normalize()}E();for(y=1;y<c;y++){u[y]=u[y-1].clone();a[y]=a[y-1].clone();f.crossVectors(o[y-1],o[y]);if(f.length()>p){f.normalize();h=Math.acos(THREE.Math.clamp(o[y-1].dot(o[y]),-1,1));u[y].applyMatrix4(l.makeRotationAxis(f,h))}a[y].crossVectors(o[y],u[y])}if(n){h=Math.acos(THREE.Math.clamp(u[0].dot(u[c-1]),-1,1));h/=c-1;if(o[0].dot(f.crossVectors(u[0],u[c-1]))>0){h=-h}for(y=1;y<c;y++){u[y].applyMatrix4(l.makeRotationAxis(o[y],h*y));a[y].crossVectors(o[y],u[y])}}};THREE.PolyhedronGeometry=function(e,t,n,r){function E(e){var t=e.normalize().clone();t.index=i.vertices.push(t)-1;var n=T(e)/2/Math.PI+.5;var r=N(e)/Math.PI+.5;t.uv=new THREE.Vector2(n,1-r);return t}function S(e,t,n){var r=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);i.faces.push(r);d.copy(e).add(t).add(n).divideScalar(3);var s=T(d);i.faceVertexUvs[0].push([C(e.uv,e,s),C(t.uv,t,s),C(n.uv,n,s)])}function x(e,t){var n=Math.pow(2,t);var r=Math.pow(4,t);var s=E(i.vertices[e.a]);var o=E(i.vertices[e.b]);var u=E(i.vertices[e.c]);var a=[];for(var f=0;f<=n;f++){a[f]=[];var l=E(s.clone().lerp(u,f/n));var c=E(o.clone().lerp(u,f/n));var h=n-f;for(var p=0;p<=h;p++){if(p==0&&f==n){a[f][p]=l}else{a[f][p]=E(l.clone().lerp(c,p/h))}}}for(var f=0;f<n;f++){for(var p=0;p<2*(n-f)-1;p++){var d=Math.floor(p/2);if(p%2==0){S(a[f][d+1],a[f+1][d],a[f][d])}else{S(a[f][d+1],a[f+1][d+1],a[f+1][d])}}}}function T(e){return Math.atan2(e.z,-e.x)}function N(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function C(e,t,n){if(n<0&&e.x===1)e=new THREE.Vector2(e.x-1,e.y);if(t.x===0&&t.z===0)e=new THREE.Vector2(n/2/Math.PI+.5,e.y);return e.clone()}THREE.Geometry.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:e,indices:t,radius:n,detail:r};n=n||1;r=r||0;var i=this;for(var s=0,o=e.length;s<o;s+=3){E(new THREE.Vector3(e[s],e[s+1],e[s+2]))}var u=[],a=this.vertices;var f=[];for(var s=0,l=0,o=t.length;s<o;s+=3,l++){var c=a[t[s]];var h=a[t[s+1]];var p=a[t[s+2]];f[l]=new THREE.Face3(c.index,h.index,p.index,[c.clone(),h.clone(),p.clone()])}var d=new THREE.Vector3;for(var s=0,o=f.length;s<o;s++){x(f[s],r)}for(var s=0,o=this.faceVertexUvs[0].length;s<o;s++){var v=this.faceVertexUvs[0][s];var m=v[0].x;var g=v[1].x;var y=v[2].x;var b=Math.max(m,Math.max(g,y));var w=Math.min(m,Math.min(g,y));if(b>.9&&w<.1){if(m<.2)v[0].x+=1;if(g<.2)v[1].x+=1;if(y<.2)v[2].x+=1}}for(var s=0,o=this.vertices.length;s<o;s++){this.vertices[s].multiplyScalar(n)}this.mergeVertices();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=(1+Math.sqrt(5))/2;var r=1/n;var i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];var s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,i,s,e,t)};THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2;var r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];var i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,r,i,e,t);this.type="IcosahedronGeometry";this.parameters={radius:e,detail:t}};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,n,r,e,t);this.type="OctahedronGeometry";this.parameters={radius:e,detail:t}};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var r=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,n,r,e,t);this.type="TetrahedronGeometry";this.parameters={radius:e,detail:t}};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry=function(e,t,n){THREE.Geometry.call(this);this.type="ParametricGeometry";this.parameters={func:e,slices:t,stacks:n};var r=this.vertices;var i=this.faces;var s=this.faceVertexUvs[0];var o,u,a,f;var l,c;var h=n+1;var p=t+1;for(o=0;o<=n;o++){c=o/n;for(a=0;a<=t;a++){l=a/t;f=e(l,c);r.push(f)}}var d,v,m,g;var y,b,w,E;for(o=0;o<n;o++){for(a=0;a<t;a++){d=o*p+a;v=o*p+a+1;m=(o+1)*p+a+1;g=(o+1)*p+a;y=new THREE.Vector2(a/t,o/n);b=new THREE.Vector2((a+1)/t,o/n);w=new THREE.Vector2((a+1)/t,(o+1)/n);E=new THREE.Vector2(a/t,(o+1)/n);i.push(new THREE.Face3(d,v,g));s.push([y,b,E]);i.push(new THREE.Face3(v,m,g));s.push([b.clone(),w,E.clone()])}}this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]);var n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);var r=new THREE.BufferGeometry;r.addAttribute("position",new THREE.BufferAttribute(t,3));r.addAttribute("color",new THREE.BufferAttribute(n,3));var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,r,i,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));return function(n,r,i,s,o,u){THREE.Object3D.call(this);if(s===undefined)s=16776960;if(i===undefined)i=1;if(o===undefined)o=.2*i;if(u===undefined)u=.2*o;this.position.copy(r);this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:s}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:s}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(n);this.setLength(i,o,u)}}();THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var e=new THREE.Vector3;var t;return function(n){if(n.y>.99999){this.quaternion.set(0,0,0,1)}else if(n.y<-.99999){this.quaternion.set(1,0,0,0)}else{e.set(n.z,0,-n.x).normalize();t=Math.acos(n.y);this.quaternion.setFromAxisAngle(e,t)}}}();THREE.ArrowHelper.prototype.setLength=function(e,t,n){if(t===undefined)t=.2*e;if(n===undefined)n=.2*t;this.line.scale.set(1,e,1);this.line.updateMatrix();this.cone.scale.set(n,t,n);this.cone.position.y=e;this.cone.updateMatrix()};THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e);this.cone.material.color.set(e)};THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3));THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces);if(e!==undefined){this.update(e)}};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;if(t.boundingBox===null){t.computeBoundingBox()}var n=t.boundingBox.min;var r=t.boundingBox.max;var i=this.geometry.attributes.position.array;i[0]=r.x;i[1]=r.y;i[2]=r.z;i[3]=n.x;i[4]=r.y;i[5]=r.z;i[6]=n.x;i[7]=r.y;i[8]=r.z;i[9]=n.x;i[10]=n.y;i[11]=r.z;i[12]=n.x;i[13]=n.y;i[14]=r.z;i[15]=r.x;i[16]=n.y;i[17]=r.z;i[18]=r.x;i[19]=n.y;i[20]=r.z;i[21]=r.x;i[22]=r.y;i[23]=r.z;i[24]=r.x;i[25]=r.y;i[26]=n.z;i[27]=n.x;i[28]=r.y;i[29]=n.z;i[30]=n.x;i[31]=r.y;i[32]=n.z;i[33]=n.x;i[34]=n.y;i[35]=n.z;i[36]=n.x;i[37]=n.y;i[38]=n.z;i[39]=r.x;i[40]=n.y;i[41]=n.z;i[42]=r.x;i[43]=n.y;i[44]=n.z;i[45]=r.x;i[46]=r.y;i[47]=n.z;i[48]=r.x;i[49]=r.y;i[50]=r.z;i[51]=r.x;i[52]=r.y;i[53]=n.z;i[54]=n.x;i[55]=r.y;i[56]=r.z;i[57]=n.x;i[58]=r.y;i[59]=n.z;i[60]=n.x;i[61]=n.y;i[62]=r.z;i[63]=n.x;i[64]=n.y;i[65]=n.z;i[66]=r.x;i[67]=n.y;i[68]=r.z;i[69]=r.x;i[70]=n.y;i[71]=n.z;this.geometry.attributes.position.needsUpdate=true;this.geometry.computeBoundingSphere();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false};THREE.BoundingBoxHelper=function(e,t){var n=t!==undefined?t:8947848;this.object=e;this.box=new THREE.Box3;THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:true}))};THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object);this.box.size(this.scale);this.box.center(this.position)};THREE.CameraHelper=function(e){function f(e,t,n){l(e,n);l(t,n)}function l(e,n){t.vertices.push(new THREE.Vector3);t.colors.push(new THREE.Color(n));if(r[e]===undefined){r[e]=[]}r[e].push(t.vertices.length-1)}var t=new THREE.Geometry;var n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors});var r={};var i=16755200;var s=16711680;var o=43775;var u=16777215;var a=3355443;f("n1","n2",i);f("n2","n4",i);f("n4","n3",i);f("n3","n1",i);f("f1","f2",i);f("f2","f4",i);f("f4","f3",i);f("f3","f1",i);f("n1","f1",i);f("n2","f2",i);f("n3","f3",i);f("n4","f4",i);f("p","n1",s);f("p","n2",s);f("p","n3",s);f("p","n4",s);f("u1","u2",o);f("u2","u3",o);f("u3","u1",o);f("c","t",u);f("p","c",a);f("cn1","cn2",a);f("cn3","cn4",a);f("cf1","cf2",a);f("cf3","cf4",a);THREE.Line.call(this,t,n,THREE.LinePieces);this.camera=e;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=r;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);THREE.CameraHelper.prototype.update=function(){var e,t;var n=new THREE.Vector3;var r=new THREE.Camera;var i=function(i,s,o,u){n.set(s,o,u).unproject(r);var a=t[i];if(a!==undefined){for(var f=0,l=a.length;f<l;f++){e.vertices[a[f]].copy(n)}}};return function(){e=this.geometry;t=this.pointMap;var n=1,s=1;r.projectionMatrix.copy(this.camera.projectionMatrix);i("c",0,0,-1);i("t",0,0,1);i("n1",-n,-s,-1);i("n2",n,-s,-1);i("n3",-n,s,-1);i("n4",n,s,-1);i("f1",-n,-s,1);i("f2",n,-s,1);i("f3",-n,s,1);i("f4",n,s,1);i("u1",n*.7,s*1.1,-1);i("u2",-n*.7,s*1.1,-1);i("u3",0,s*2,-1);i("cf1",-n,0,1);i("cf2",n,0,1);i("cf3",0,-s,1);i("cf4",0,s,1);i("cn1",-n,0,-1);i("cn2",n,0,-1);i("cn3",0,-s,-1);i("cn4",0,s,-1);e.verticesNeedUpdate=true}}();THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;t=t||1;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:false});r.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightPlane=new THREE.Line(n,r);this.add(this.lightPlane);n=new THREE.Geometry;n.vertices.push(new THREE.Vector3,new THREE.Vector3);r=new THREE.LineBasicMaterial({fog:false});r.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(n,r);this.add(this.targetLine);this.update()};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3;var t=new THREE.Vector3;var n=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);n.subVectors(t,e);this.lightPlane.lookAt(n);this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.vertices[1].copy(n);this.targetLine.geometry.verticesNeedUpdate=true;this.targetLine.material.color.copy(this.lightPlane.material.color)}}();THREE.EdgesHelper=function(e,t){var n=t!==undefined?t:16777215;var r=[0,0],i={};var s=function(e,t){return e-t};var o=["a","b","c"];var u=new THREE.BufferGeometry;var a=e.geometry.clone();a.mergeVertices();a.computeFaceNormals();var f=a.vertices;var l=a.faces;var c=0;for(var h=0,p=l.length;h<p;h++){var d=l[h];for(var v=0;v<3;v++){r[0]=d[o[v]];r[1]=d[o[(v+1)%3]];r.sort(s);var m=r.toString();if(i[m]===undefined){i[m]={vert1:r[0],vert2:r[1],face1:h,face2:undefined};c++}else{i[m].face2=h}}}var g=new Float32Array(c*2*3);var y=0;for(var m in i){var b=i[m];if(b.face2===undefined||l[b.face1].normal.dot(l[b.face2].normal)<.9999){var w=f[b.vert1];g[y++]=w.x;g[y++]=w.y;g[y++]=w.z;w=f[b.vert2];g[y++]=w.x;g[y++]=w.y;g[y++]=w.z}}u.addAttribute("position",new THREE.BufferAttribute(g,3));THREE.Line.call(this,u,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces);this.matrix=e.matrixWorld;this.matrixAutoUpdate=false};THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype);THREE.FaceNormalsHelper=function(e,t,n,r){this.object=e;this.size=t!==undefined?t:1;var i=n!==undefined?n:16776960;var s=r!==undefined?r:1;var o=new THREE.Geometry;var u=this.object.geometry.faces;for(var a=0,f=u.length;a<f;a++){o.vertices.push(new THREE.Vector3,new THREE.Vector3)}THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:i,linewidth:s}),THREE.LinePieces);this.matrixAutoUpdate=false;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype);THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices;var t=this.object;var n=t.geometry.vertices;var r=t.geometry.faces;var i=t.matrixWorld;t.updateMatrixWorld(true);this.normalMatrix.getNormalMatrix(i);for(var s=0,o=0,u=r.length;s<u;s++,o+=2){var a=r[s];e[o].copy(n[a.a]).add(n[a.b]).add(n[a.c]).divideScalar(3).applyMatrix4(i);e[o+1].copy(a.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[o])}this.geometry.verticesNeedUpdate=true;return this};THREE.GridHelper=function(e,t){var n=new THREE.Geometry;var r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924);this.color2=new THREE.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new THREE.Vector3(-e,0,i),new THREE.Vector3(e,0,i),new THREE.Vector3(i,0,-e),new THREE.Vector3(i,0,e));var s=i===0?this.color1:this.color2;n.colors.push(s,s,s,s)}THREE.Line.call(this,n,r,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e);this.color2.set(t);this.geometry.colorsNeedUpdate=true};THREE.HemisphereLightHelper=function(e,t,n,r){THREE.Object3D.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.colors=[new THREE.Color,new THREE.Color];var i=new THREE.SphereGeometry(t,4,2);i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var s=0,o=8;s<o;s++){i.faces[s].color=this.colors[s<4?0:1]}var u=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:true});this.lightSphere=new THREE.Mesh(i,u);this.add(this.lightSphere);this.update()};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose();this.lightSphere.material.dispose()};THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity);this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity);this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate());this.lightSphere.geometry.colorsNeedUpdate=true}}();THREE.PointLightHelper=function(e,t){this.light=e;this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2);var r=new THREE.MeshBasicMaterial({wireframe:true,fog:false});r.color.copy(this.light.color).multiplyScalar(this.light.intensity);THREE.Mesh.call(this,n,r);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false};THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype);THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);var t=new THREE.Geometry;for(var n=0;n<this.bones.length;n++){var r=this.bones[n];if(r.parent instanceof THREE.Bone){t.vertices.push(new THREE.Vector3);t.vertices.push(new THREE.Vector3);t.colors.push(new THREE.Color(0,0,1));t.colors.push(new THREE.Color(0,1,0))}}var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:false,depthWrite:false,transparent:true});THREE.Line.call(this,t,i,THREE.LinePieces);this.root=e;this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;this.update()};THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype);THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];if(e instanceof THREE.Bone){t.push(e)}for(var n=0;n<e.children.length;n++){t.push.apply(t,this.getBoneList(e.children[n]))}return t};THREE.SkeletonHelper.prototype.update=function(){var e=this.geometry;var t=(new THREE.Matrix4).getInverse(this.root.matrixWorld);var n=new THREE.Matrix4;var r=0;for(var i=0;i<this.bones.length;i++){var s=this.bones[i];if(s.parent instanceof THREE.Bone){n.multiplyMatrices(t,s.matrixWorld);e.vertices[r].setFromMatrixPosition(n);n.multiplyMatrices(t,s.parent.matrixWorld);e.vertices[r+1].setFromMatrixPosition(n);r+=2}}e.verticesNeedUpdate=true;e.computeBoundingSphere()};THREE.SpotLightHelper=function(e){THREE.Object3D.call(this);this.light=e;this.light.updateMatrixWorld();this.matrix=e.matrixWorld;this.matrixAutoUpdate=false;var t=new THREE.CylinderGeometry(0,1,1,8,1,true);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0));t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var n=new THREE.MeshBasicMaterial({wireframe:true,fog:false});this.cone=new THREE.Mesh(t,n);this.add(this.cone);this.update()};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3;var t=new THREE.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4;var r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n);e.setFromMatrixPosition(this.light.matrixWorld);t.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(t.sub(e));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();THREE.VertexNormalsHelper=function(e,t,n,r){this.object=e;this.size=t!==undefined?t:1;var i=n!==undefined?n:16711680;var s=r!==undefined?r:1;var o=new THREE.Geometry;var u=e.geometry.vertices;var a=e.geometry.faces;for(var f=0,l=a.length;f<l;f++){var c=a[f];for(var h=0,p=c.vertexNormals.length;h<p;h++){o.vertices.push(new THREE.Vector3,new THREE.Vector3)}}THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:i,linewidth:s}),THREE.LinePieces);this.matrixAutoUpdate=false;this.normalMatrix=new THREE.Matrix3;this.update()};THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype);THREE.VertexNormalsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var n=["a","b","c","d"];this.object.updateMatrixWorld(true);this.normalMatrix.getNormalMatrix(this.object.matrixWorld);var r=this.geometry.vertices;var i=this.object.geometry.vertices;var s=this.object.geometry.faces;var o=this.object.matrixWorld;var u=0;for(var a=0,f=s.length;a<f;a++){var l=s[a];for(var c=0,h=l.vertexNormals.length;c<h;c++){var p=l[n[c]];var d=i[p];var v=l.vertexNormals[c];r[u].copy(d).applyMatrix4(o);t.copy(v).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);t.add(r[u]);u=u+1;r[u].copy(t);u=u+1}}this.geometry.verticesNeedUpdate=true;return this}}();THREE.VertexTangentsHelper=function(e,t,n,r){this.object=e;this.size=t!==undefined?t:1;var i=n!==undefined?n:255;var s=r!==undefined?r:1;var o=new THREE.Geometry;var u=e.geometry.vertices;var a=e.geometry.faces;for(var f=0,l=a.length;f<l;f++){var c=a[f];for(var h=0,p=c.vertexTangents.length;h<p;h++){o.vertices.push(new THREE.Vector3);o.vertices.push(new THREE.Vector3)}}THREE.Line.call(this,o,new THREE.LineBasicMaterial({color:i,linewidth:s}),THREE.LinePieces);this.matrixAutoUpdate=false;this.update()};THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype);THREE.VertexTangentsHelper.prototype.update=function(e){var t=new THREE.Vector3;return function(e){var n=["a","b","c","d"];this.object.updateMatrixWorld(true);var r=this.geometry.vertices;var i=this.object.geometry.vertices;var s=this.object.geometry.faces;var o=this.object.matrixWorld;var u=0;for(var a=0,f=s.length;a<f;a++){var l=s[a];for(var c=0,h=l.vertexTangents.length;c<h;c++){var p=l[n[c]];var d=i[p];var v=l.vertexTangents[c];r[u].copy(d).applyMatrix4(o);t.copy(v).transformDirection(o).multiplyScalar(this.size);t.add(r[u]);u=u+1;r[u].copy(t);u=u+1}}this.geometry.verticesNeedUpdate=true;return this}}();THREE.WireframeHelper=function(e,t){var n=t!==undefined?t:16777215;var r=[0,0],i={};var s=function(e,t){return e-t};var o=["a","b","c"];var u=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){var a=e.geometry.vertices;var f=e.geometry.faces;var l=0;var c=new Uint32Array(6*f.length);for(var h=0,p=f.length;h<p;h++){var d=f[h];for(var v=0;v<3;v++){r[0]=d[o[v]];r[1]=d[o[(v+1)%3]];r.sort(s);var m=r.toString();if(i[m]===undefined){c[2*l]=r[0];c[2*l+1]=r[1];i[m]=true;l++}}}var g=new Float32Array(l*2*3);for(var h=0,p=l;h<p;h++){for(var v=0;v<2;v++){var y=a[c[2*h+v]];var b=6*h+3*v;g[b+0]=y.x;g[b+1]=y.y;g[b+2]=y.z}}u.addAttribute("position",new THREE.BufferAttribute(g,3))}else if(e.geometry instanceof THREE.BufferGeometry){if(e.geometry.attributes.index!==undefined){var a=e.geometry.attributes.position.array;var w=e.geometry.attributes.index.array;var E=e.geometry.drawcalls;var l=0;if(E.length===0){E=[{count:w.length,index:0,start:0}]}var c=new Uint32Array(2*w.length);for(var S=0,x=E.length;S<x;++S){var T=E[S].start;var N=E[S].count;var b=E[S].index;for(var h=T,C=T+N;h<C;h+=3){for(var v=0;v<3;v++){r[0]=b+w[h+v];r[1]=b+w[h+(v+1)%3];r.sort(s);var m=r.toString();if(i[m]===undefined){c[2*l]=r[0];c[2*l+1]=r[1];i[m]=true;l++}}}}var g=new Float32Array(l*2*3);for(var h=0,p=l;h<p;h++){for(var v=0;v<2;v++){var b=6*h+3*v;var k=3*c[2*h+v];g[b+0]=a[k];g[b+1]=a[k+1];g[b+2]=a[k+2]}}u.addAttribute("position",new THREE.BufferAttribute(g,3))}else{var a=e.geometry.attributes.position.array;var l=a.length/3;var L=l/3;var g=new Float32Array(l*2*3);for(var h=0,p=L;h<p;h++){for(var v=0;v<3;v++){var b=18*h+6*v;var A=9*h+3*v;g[b+0]=a[A];g[b+1]=a[A+1];g[b+2]=a[A+2];var k=9*h+3*((v+1)%3);g[b+3]=a[k];g[b+4]=a[k+1];g[b+5]=a[k+2]}}u.addAttribute("position",new THREE.BufferAttribute(g,3))}}THREE.Line.call(this,u,new THREE.LineBasicMaterial({color:n}),THREE.LinePieces);this.matrix=e.matrixWorld;this.matrixAutoUpdate=false};THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(e){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t);this.animationsMap={};this.animationsList=[];var n=this.geometry.morphTargets.length;var r="__default";var i=0;var s=n-1;var o=n/1;this.createAnimation(r,i,s,o);this.setAnimationWeight(r,1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){var i={startFrame:t,endFrame:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:false,time:0,direction:1,weight:1,directionBackwards:false,mirroredLoop:false};this.animationsMap[e]=i;this.animationsList.push(i)};THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){var t=/([a-z]+)_?(\d+)/;var n,r={};var i=this.geometry;for(var s=0,o=i.morphTargets.length;s<o;s++){var u=i.morphTargets[s];var a=u.name.match(t);if(a&&a.length>1){var f=a[1];var l=a[2];if(!r[f])r[f]={start:Infinity,end:-Infinity};var c=r[f];if(s<c.start)c.start=s;if(s>c.end)c.end=s;if(!n)n=f}}for(var f in r){var c=r[f];this.createAnimation(f,c.start,c.end,e)}this.firstAnimation=n};THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];if(t){t.direction=1;t.directionBackwards=false}};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];if(t){t.direction=-1;t.directionBackwards=true}};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];if(n){n.fps=t;n.duration=(n.end-n.start)/n.fps}};THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];if(n){n.duration=t;n.fps=(n.end-n.start)/n.duration}};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];if(n){n.weight=t}};THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];if(n){n.time=t}};THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;var n=this.animationsMap[e];if(n){t=n.time}return t};THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;var n=this.animationsMap[e];if(n){t=n.duration}return t};THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];if(t){t.time=0;t.active=true}else{console.warn("animation["+e+"] undefined")}};THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];if(t){t.active=false}};THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(!r.active)continue;var i=r.duration/r.length;r.time+=r.direction*e;if(r.mirroredLoop){if(r.time>r.duration||r.time<0){r.direction*=-1;if(r.time>r.duration){r.time=r.duration;r.directionBackwards=true}if(r.time<0){r.time=0;r.directionBackwards=false}}}else{r.time=r.time%r.duration;if(r.time<0)r.time+=r.duration}var s=r.startFrame+THREE.Math.clamp(Math.floor(r.time/i),0,r.length-1);var o=r.weight;if(s!==r.currentFrame){this.morphTargetInfluences[r.lastFrame]=0;this.morphTargetInfluences[r.currentFrame]=1*o;this.morphTargetInfluences[s]=0;r.lastFrame=r.currentFrame;r.currentFrame=s}var u=r.time%i/i;if(r.directionBackwards)u=1-u;this.morphTargetInfluences[r.currentFrame]=u*o;this.morphTargetInfluences[r.lastFrame]=(1-u)*o}};"use strict";var JSM={mainVersion:0,subVersion:32,Eps:1e-8,Inf:9999999999,RadDeg:57.29577951308232,DegRad:.017453292519943,IsZero:function(e){return Math.abs(e)<JSM.Eps},IsPositive:function(e){return e>JSM.Eps},IsNegative:function(e){return e<-JSM.Eps},IsLower:function(e,t){return t-e>JSM.Eps},IsGreater:function(e,t){return e-t>JSM.Eps},IsEqual:function(e,t){return Math.abs(t-e)<JSM.Eps},IsEqualWithEps:function(e,t,n){return Math.abs(t-e)<n},IsLowerOrEqual:function(e,t){return JSM.IsLower(e,t)||JSM.IsEqual(e,t)},IsGreaterOrEqual:function(e,t){return JSM.IsGreater(e,t)||JSM.IsEqual(e,t)},Minimum:function(e,t){return JSM.IsLower(e,t)?e:t},Maximum:function(e,t){return JSM.IsGreater(e,t)?e:t},ArcSin:function(e){return JSM.IsGreaterOrEqual(e,1)?Math.PI/2:JSM.IsLowerOrEqual(e,-1)?-Math.PI/2:Math.asin(e)},ArcCos:function(e){return JSM.IsGreaterOrEqual(e,1)?0:JSM.IsLowerOrEqual(e,-1)?Math.PI:Math.acos(e)},RandomNumber:function(e,t){return Math.random()*(t-e)+e},RandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},SeededRandomInt:function(e,t,n){return Math.floor((9301*n+49297)%233280/233280*(t-e+1)+e)},ValueOrDefault:function(e,t){return void 0===e||null===e?t:e},Assert:function(e,t){if(!e){var n="Assertion failed.";void 0!==t&&null!==t&&(n+=" "+t);alert(n)}},Timer:function(){this.stop=this.start=0}};JSM.Timer.prototype.Start=function(){this.start=(new Date).getTime()};JSM.Timer.prototype.Stop=function(){this.end=(new Date).getTime()};JSM.Timer.prototype.Result=function(){return this.end-this.start};JSM.FPSCounter=function(){this.current=this.frames=this.start=null};JSM.FPSCounter.prototype.Get=function(e){var t=(new Date).getTime();null===this.start&&(this.start=t,this.current=this.frames=0);if(null===e||void 0===e)e=1e3;this.frames+=1;var n=t-this.start;n>=e&&(this.current=1e3*(this.frames/n),this.start=t,this.frames=0);return parseInt(this.current,10)};JSM.BubbleSort=function(e,t){if(!(2>e.length||void 0===t||null===t)){var n,r;for(n=0;n<e.length-1;n++)for(r=0;r<e.length-n-1;r++)if(!t(e[r],e[r+1])){var i=e,s=r+1,o=i[r];i[r]=i[s];i[s]=o}}};JSM.AsyncEnvironment=function(e){this.parameters=e};JSM.AsyncEnvironment.prototype.OnStart=function(e,t){if(void 0!==this.parameters&&void 0!==this.parameters.onStart)this.parameters.onStart(e,t)};JSM.AsyncEnvironment.prototype.OnProcess=function(e,t){if(void 0!==this.parameters&&void 0!==this.parameters.onProcess)this.parameters.onProcess(e,t)};JSM.AsyncEnvironment.prototype.OnFinish=function(e){if(void 0!==this.parameters&&void 0!==this.parameters.onFinish)this.parameters.onFinish(e)};JSM.AsyncRunTask=function(e,t,n,r,i){function s(o){var u=e();t.OnProcess(o,i);u&&o<n-1?setTimeout(function(){s(o+1)},r):setTimeout(function(){t.OnFinish(i)},r)}if(void 0===t||null===t){var o,u;for(o=0;o<n&&!(u=e(),!u);o++);}else t.OnStart(n,i),s(0)};JSM.Coord2D=function(e,t){this.x=e;this.y=t};JSM.Coord2D.prototype.Set=function(e,t){this.x=e;this.y=t};JSM.Coord2D.prototype.ToString=function(){return"("+this.x+", "+this.y+")"};JSM.Coord2D.prototype.Clone=function(){return new JSM.Coord2D(this.x,this.y)};JSM.PolarCoord=function(e,t){this.radius=e;this.angle=t};JSM.PolarCoord.prototype.Set=function(e,t){this.radius=e;this.angle=t};JSM.PolarCoord.prototype.ToString=function(){return"("+this.radius+", "+this.angle+")"};JSM.PolarCoord.prototype.Clone=function(){return new JSM.PolarCoord(this.radius,this.angle)};JSM.Coord=function(e,t,n){this.x=e;this.y=t;this.z=n};JSM.Coord.prototype.Set=function(e,t,n){this.x=e;this.y=t;this.z=n};JSM.Coord.prototype.ToString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};JSM.Coord.prototype.Clone=function(){return new JSM.Coord(this.x,this.y,this.z)};JSM.SphericalCoord=function(e,t,n){this.radius=e;this.theta=t;this.phi=n};JSM.SphericalCoord.prototype.Set=function(e,t,n){this.radius=e;this.theta=t;this.phi=n};JSM.SphericalCoord.prototype.ToString=function(){return"("+this.radius+", "+this.theta+", "+this.phi+")"};JSM.SphericalCoord.prototype.Clone=function(){return new JSM.SphericalCoord(this.radius,this.theta,this.phi)};JSM.Vector2D=JSM.Coord2D;JSM.Vector=JSM.Coord;JSM.MatrixDeterminant2x2=function(e,t,n,r){return e*r-t*n};JSM.MatrixDeterminant3x3=function(e,t,n,r,i,s,o,u,a){var f=JSM.MatrixDeterminant2x2(i,s,u,a);s=JSM.MatrixDeterminant2x2(r,s,o,a);r=JSM.MatrixDeterminant2x2(r,i,o,u);return e*f-t*s+n*r};JSM.MatrixDeterminant4x4=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=JSM.MatrixDeterminant3x3(s,o,u,f,l,c,p,d,v),g=JSM.MatrixDeterminant3x3(i,o,u,a,l,c,h,d,v);u=JSM.MatrixDeterminant3x3(i,s,u,a,f,c,h,p,v);i=JSM.MatrixDeterminant3x3(i,s,o,a,f,l,h,p,d);return m*e-g*t+u*n-i*r};JSM.CoordFromArray2D=function(e){return new JSM.Coord2D(e[0],e[1])};JSM.CoordFromArray=function(e){return new JSM.Coord(e[0],e[1],e[2])};JSM.CoordIsEqual2D=function(e,t){return JSM.IsEqual(e.x,t.x)&&JSM.IsEqual(e.y,t.y)};JSM.CoordIsEqual2DWithEps=function(e,t,n){return JSM.IsEqualWithEps(e.x,t.x,n)&&JSM.IsEqualWithEps(e.y,t.y,n)};JSM.CoordDistance2D=function(e,t){var n=e.x,r=e.y,i=t.x,s=t.y;return Math.sqrt((i-n)*(i-n)+(s-r)*(s-r))};JSM.MidCoord2D=function(e,t){return new JSM.Coord2D((e.x+t.x)/2,(e.y+t.y)/2)};JSM.PolarToCartesian=function(e,t){var n=new JSM.Coord2D(0,0);n.x=e*Math.cos(t);n.y=e*Math.sin(t);return n};JSM.GetArcLengthFromAngle=function(e,t){return t*e};JSM.GetAngleFromArcLength=function(e,t){return JSM.IsEqual(e,0)?0:t/e};JSM.CoordTurnType2D=function(e,t,n){e=JSM.MatrixDeterminant3x3(e.x,e.y,1,t.x,t.y,1,n.x,n.y,1);return JSM.IsPositive(e)?"CounterClockwise":JSM.IsNegative(e)?"Clockwise":"Collinear"};JSM.CoordIsEqual=function(e,t){return JSM.IsEqual(e.x,t.x)&&JSM.IsEqual(e.y,t.y)&&JSM.IsEqual(e.z,t.z)};JSM.CoordIsEqualWithEps=function(e,t,n){return JSM.IsEqualWithEps(e.x,t.x,n)&&JSM.IsEqualWithEps(e.y,t.y,n)&&JSM.IsEqualWithEps(e.z,t.z,n)};JSM.SphericalCoordIsEqual=function(e,t){return JSM.IsEqual(e.radius,t.radius)&&JSM.IsEqual(e.phi,t.phi)&&JSM.IsEqual(e.theta,t.theta)};JSM.CoordDistance=function(e,t){var n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,u=t.z;return Math.sqrt((s-n)*(s-n)+(o-r)*(o-r)+(u-i)*(u-i))};JSM.CoordSignedDistance=function(e,t,n){var r=JSM.CoordSub(t,e);e=JSM.CoordDistance(e,t);n=JSM.GetVectorsAngle(r,n);JSM.IsPositive(n)&&(e=-e);return e};JSM.MidCoord=function(e,t){return new JSM.Coord((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)};JSM.VectorMultiply=function(e,t){var n=new JSM.Vector(0,0,0);n.x=e.x*t;n.y=e.y*t;n.z=e.z*t;return n};JSM.VectorDot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z};JSM.VectorCross=function(e,t){var n=new JSM.Vector(0,0,0);n.x=e.y*t.z-e.z*t.y;n.y=e.z*t.x-e.x*t.z;n.z=e.x*t.y-e.y*t.x;return n};JSM.VectorLength=function(e){var t=e.x,n=e.y;e=e.z;return Math.sqrt(t*t+n*n+e*e)};JSM.VectorNormalize=function(e){var t=JSM.VectorLength(e),n=new JSM.Vector(0,0,0);JSM.IsGreater(t,0)&&(n=JSM.VectorMultiply(e,1/t));return n};JSM.VectorSetLength=function(e,t){var n=t/JSM.VectorLength(e);return JSM.VectorMultiply(e,n)};JSM.GetVectorsAngle=function(e,t){var n=JSM.VectorNormalize(e),r=JSM.VectorNormalize(t);if(JSM.CoordIsEqual(n,r))return 0;n=JSM.VectorDot(n,r);return JSM.ArcCos(n)};JSM.GetVectorsFullAngle=function(e,t,n){var r=JSM.GetVectorsAngle(e,t),i=new JSM.Coord(0,0,0);"Clockwise"==JSM.CoordTurnType(e,i,t,n)&&(r=2*Math.PI-r);return r};JSM.VectorsAreCollinear=function(e,t){var n=JSM.GetVectorsAngle(e,t);return JSM.IsEqual(n,0)||JSM.IsEqual(n,Math.PI)};JSM.CoordAdd=function(e,t){return new JSM.Vector(e.x+t.x,e.y+t.y,e.z+t.z)};JSM.CoordSub=function(e,t){return new JSM.Vector(e.x-t.x,e.y-t.y,e.z-t.z)};JSM.CoordOffset=function(e,t,n){t=JSM.VectorNormalize(t);var r=new JSM.Coord(0,0,0);r.x=e.x+t.x*n;r.y=e.y+t.y*n;r.z=e.z+t.z*n;return r};JSM.CoordRotate=function(e,t,n,r){var i=JSM.CoordSub(e,r),s=JSM.VectorNormalize(t);t=s.x;e=s.y;var s=s.z,o=i.x,u=i.y,i=i.z,a=new JSM.Coord(0,0,0);a.x=-t*(-t*o-e*u-s*i)*(1-Math.cos(n))+o*Math.cos(n)+(-s*u+e*i)*Math.sin(n);a.y=-e*(-t*o-e*u-s*i)*(1-Math.cos(n))+u*Math.cos(n)+(s*o-t*i)*Math.sin(n);a.z=-s*(-t*o-e*u-s*i)*(1-Math.cos(n))+i*Math.cos(n)+(-e*o+t*u)*Math.sin(n);return a=JSM.CoordAdd(a,r)};JSM.GetCoord2DFromCoord=function(e,t,n){var r=new JSM.Vector(0,0,1),i=JSM.VectorCross(n,r);n=JSM.GetVectorsAngle(n,r);e=JSM.CoordRotate(e,i,n,t);return new JSM.Coord2D(e.x,e.y)};JSM.CoordTurnType=function(e,t,n,r){var i=new JSM.Coord(0,0,0);e=JSM.GetCoord2DFromCoord(e,i,r);t=JSM.GetCoord2DFromCoord(t,i,r);n=JSM.GetCoord2DFromCoord(n,i,r);n=JSM.CoordTurnType2D(e,t,n);i=new JSM.Vector(0,0,1);r=JSM.GetVectorsAngle(r,i);JSM.IsEqual(r,Math.PI)&&("CounterClockwise"===n?n="Clockwise":"Clockwise"===n&&(n="CounterClockwise"));return n};JSM.CalculateCentroid=function(e){var t=e.length,n=new JSM.Coord(0,0,0);if(1<=t){var r;for(r=0;r<t;r++)n=JSM.CoordAdd(n,e[r]);n=JSM.VectorMultiply(n,1/t)}return n};JSM.CalculateTriangleNormal=function(e,t,n){t=JSM.CoordSub(t,e);e=JSM.CoordSub(n,e);n=new JSM.Vector(0,0,0);n.x=t.y*e.z-t.z*e.y;n.y=t.z*e.x-t.x*e.z;n.z=t.x*e.y-t.y*e.x;return JSM.VectorNormalize(n)};JSM.CalculateNormal=function(e){var t=e.length,n=new JSM.Vector(0,0,0);if(3<=t){var r,i,s;for(r=0;r<t;r++)i=r%t,s=(r+1)%t,i=e[i],s=e[s],n.x+=(i.y-s.y)*(i.z+s.z),n.y+=(i.z-s.z)*(i.x+s.x),n.z+=(i.x-s.x)*(i.y+s.y)}return JSM.VectorNormalize(n)};JSM.SphericalToCartesian=function(e,t,n){var r=new JSM.Coord(0,0,0);r.x=e*Math.sin(t)*Math.cos(n);r.y=e*Math.sin(t)*Math.sin(n);r.z=e*Math.cos(t);return r};JSM.CartesianToSpherical=function(e,t,n){var r=new JSM.SphericalCoord(0,0,0);r.radius=Math.sqrt(e*e+t*t+n*n);if(JSM.IsZero(r.radius))return r;r.theta=Math.acos(n/r.radius);r.phi=Math.atan2(t,e);return r};JSM.SphericalToCartesianWithOrigo=function(e,t){var n=JSM.SphericalToCartesian(e.radius,e.theta,e.phi);return JSM.CoordAdd(n,t)};JSM.CartesianToSphericalWithOrigo=function(e,t){var n=JSM.CoordSub(e,t);return JSM.CartesianToSpherical(n.x,n.y,n.z)};JSM.MoveCoordOnSphere=function(e,t,n,r){e=JSM.CartesianToSphericalWithOrigo(e,t);e.theta+=n;e.phi+=r;return JSM.SphericalToCartesianWithOrigo(e,t)};JSM.CylindricalToCartesian=function(e,t,n){var r=new JSM.Coord(0,0,0);r.x=e*Math.cos(n);r.y=e*Math.sin(n);r.z=t;return r};JSM.GetArcLength=function(e,t,n){return JSM.GetVectorsAngle(e,t)*n};JSM.GetFullArcLength=function(e,t,n,r){return JSM.GetVectorsFullAngle(e,t,r)*n};JSM.MatrixIdentity=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};JSM.MatrixClone=function(e){var t=[];t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};JSM.MatrixTranspose=function(e){var t=[];t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=e[1];t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=e[2];t[9]=e[6];t[10]=e[10];t[11]=e[14];t[12]=e[3];t[13]=e[7];t[14]=e[11];t[15]=e[15];return t};JSM.MatrixVectorMultiply=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=e[1],u=e[2],a=e[3],f=e[5],l=e[6],c=e[7],h=e[9],p=e[10],d=e[11],v=e[13],m=e[14],g=e[15],y=[];y[0]=n*e[0]+r*e[4]+i*e[8]+s*e[12];y[1]=n*o+r*f+i*h+s*v;y[2]=n*u+r*l+i*p+s*m;y[3]=n*a+r*c+i*d+s*g;return y};JSM.MatrixMultiply=function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f=e[7],l=e[8],c=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=t[0],b=t[1],w=t[2],E=t[3],S=t[4],x=t[5],T=t[6],N=t[7],C=t[8],k=t[9],L=t[10],A=t[11],O=t[12],M=t[13],_=t[14],D=t[15],P=[];P[0]=n*y+r*S+i*C+s*O;P[1]=n*b+r*x+i*k+s*M;P[2]=n*w+r*T+i*L+s*_;P[3]=n*E+r*N+i*A+s*D;P[4]=o*y+u*S+a*C+f*O;P[5]=o*b+u*x+a*k+f*M;P[6]=o*w+u*T+a*L+f*_;P[7]=o*E+u*N+a*A+f*D;P[8]=l*y+c*S+h*C+p*O;P[9]=l*b+c*x+h*k+p*M;P[10]=l*w+c*T+h*L+p*_;P[11]=l*E+c*N+h*A+p*D;P[12]=d*y+v*S+m*C+g*O;P[13]=d*b+v*x+m*k+g*M;P[14]=d*w+v*T+m*L+g*_;P[15]=d*E+v*N+m*A+g*D;return P};JSM.MatrixDeterminant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14];e=e[15];return(t*o-n*s)*(c*e-h*v)-(t*u-r*s)*(l*e-h*d)+(t*a-i*s)*(l*v-c*d)+(n*u-r*o)*(f*e-h*p)-(n*a-i*o)*(f*v-c*p)+(r*a-i*u)*(f*d-l*p)};JSM.MatrixInvert=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14];e=e[15];var m=t*o-n*s,g=t*u-r*s,y=t*a-i*s,b=n*u-r*o,w=n*a-i*o,E=r*a-i*u,S=f*d-l*p,x=f*v-c*p,T=f*e-h*p,N=l*v-c*d,C=l*e-h*d,k=c*e-h*v,L=m*k-g*C+y*N+b*T-w*x+E*S;if(JSM.IsZero(L))return null;var A=[];A[0]=(o*k-u*C+a*N)/L;A[1]=(r*C-n*k-i*N)/L;A[2]=(d*E-v*w+e*b)/L;A[3]=(c*w-l*E-h*b)/L;A[4]=(u*T-s*k-a*x)/L;A[5]=(t*k-r*T+i*x)/L;A[6]=(v*y-p*E-e*g)/L;A[7]=(f*E-c*y+h*g)/L;A[8]=(s*C-o*T+a*S)/L;A[9]=(n*T-t*C-i*S)/L;A[10]=(p*w-d*y+e*m)/L;A[11]=(l*y-f*w-h*m)/L;A[12]=(o*x-s*N-u*S)/L;A[13]=(t*N-n*x+r*S)/L;A[14]=(d*g-p*b-v*m)/L;A[15]=(f*b-l*g+c*m)/L;return A};JSM.MatrixTranslation=function(e,t,n){var r=[1,0,0,0,0,1,0,0,0,0,1,0];r[12]=e;r[13]=t;r[14]=n;r[15]=1;return r};JSM.MatrixRotation=function(e,t,n){var r=JSM.VectorNormalize(e);e=r.x;var i=r.y,r=r.z,s=e*e,o=i*i,u=r*r,a=Math.sin(t);t=Math.cos(t);var f=[];if(void 0===n||null===n)f[0]=s+(o+u)*t,f[1]=e*i*(1-t)+r*a,f[2]=e*r*(1-t)-i*a,f[3]=0,f[4]=e*i*(1-t)-r*a,f[5]=o+(s+u)*t,f[6]=i*r*(1-t)+e*a,f[7]=0,f[8]=e*r*(1-t)+i*a,f[9]=i*r*(1-t)-e*a,f[10]=u+(s+o)*t,f[11]=0,f[12]=0,f[13]=0,f[14]=0;else{var l=n.x,c=n.y;n=n.z;f[0]=s+(o+u)*t;f[1]=e*i*(1-t)+r*a;f[2]=e*r*(1-t)-i*a;f[3]=0;f[4]=e*i*(1-t)-r*a;f[5]=o+(s+u)*t;f[6]=i*r*(1-t)+e*a;f[7]=0;f[8]=e*r*(1-t)+i*a;f[9]=i*r*(1-t)-e*a;f[10]=u+(s+o)*t;f[11]=0;f[12]=(l*(o+u)-e*(c*i+n*r))*(1-t)+(c*r-n*i)*a;f[13]=(c*(s+u)-i*(l*e+n*r))*(1-t)+(n*e-l*r)*a;f[14]=(n*(s+o)-r*(l*e+c*i))*(1-t)+(l*i-c*e)*a}f[15]=1;return f};JSM.MatrixRotationQuaternion=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=t+t,o=n+n,u=r+r;e=t*s;var a=t*o,t=t*u,f=n*o,n=n*u,r=r*u,s=i*s,o=i*o,i=i*u,u=[];u[0]=1-(f+r);u[1]=a+i;u[2]=t-o;u[3]=0;u[4]=a-i;u[5]=1-(e+r);u[6]=n+s;u[7]=0;u[8]=t+o;u[9]=n-s;u[10]=1-(e+f);u[11]=0;u[12]=0;u[13]=0;u[14]=0;u[15]=1;return u};JSM.MatrixRotationX=function(e){var t=Math.sin(e);e=Math.cos(e);var n=[1,0,0,0,0];n[5]=e;n[6]=t;n[7]=0;n[8]=0;n[9]=-t;n[10]=e;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n};JSM.MatrixRotationY=function(e){var t=Math.sin(e);e=Math.cos(e);var n=[];n[0]=e;n[1]=0;n[2]=-t;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=t;n[9]=0;n[10]=e;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n};JSM.MatrixRotationZ=function(e){var t=Math.sin(e);e=Math.cos(e);var n=[];n[0]=e;n[1]=t;n[2]=0;n[3]=0;n[4]=-t;n[5]=e;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n};JSM.MatrixView=function(e,t,n){if(JSM.CoordIsEqual(e,t))return JSM.MatrixIdentity();var r=[];t=JSM.VectorNormalize(JSM.CoordSub(e,t));n=JSM.VectorNormalize(JSM.VectorCross(n,t));var i=JSM.VectorNormalize(JSM.VectorCross(t,n));r[0]=n.x;r[1]=i.x;r[2]=t.x;r[3]=0;r[4]=n.y;r[5]=i.y;r[6]=t.y;r[7]=0;r[8]=n.z;r[9]=i.z;r[10]=t.z;r[11]=0;r[12]=-JSM.VectorDot(n,e);r[13]=-JSM.VectorDot(i,e);r[14]=-JSM.VectorDot(t,e);r[15]=1;return r};JSM.MatrixPerspective=function(e,t,n,r){var i=[];e=1/Math.tan(e/2);var s=1/(n-r);i[0]=e/t;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=e;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=(r+n)*s;i[11]=-1;i[12]=0;i[13]=0;i[14]=2*r*n*s;i[15]=0;return i};JSM.ApplyTransformation=function(e,t){var n=[];n[0]=t.x;n[1]=t.y;n[2]=t.z;n[3]=1;n=JSM.MatrixVectorMultiply(e,n);return new JSM.Coord(n[0],n[1],n[2])};JSM.CoordSystem=function(e,t,n,r){this.origo=e;this.e1=t;this.e2=n;this.e3=r};JSM.CoordSystem.prototype.Set=function(e,t,n,r){this.origo=e;this.e1=t;this.e2=n;this.e3=r};JSM.CoordSystem.prototype.Clone=function(){return new JSM.CoordSystem(this.origo.Clone(),this.e1.Clone(),this.e2.Clone(),this.e3.Clone())};JSM.CoordSystemToDirectionVectors=function(e){return new JSM.CoordSystem(e.origo,JSM.CoordSub(e.e1,e.origo),JSM.CoordSub(e.e2,e.origo),JSM.CoordSub(e.e3,e.origo))};JSM.CoordSystemToAbsoluteCoords=function(e){return new JSM.CoordSystem(e.origo,JSM.CoordAdd(e.e1,e.origo),JSM.CoordAdd(e.e2,e.origo),JSM.CoordAdd(e.e3,e.origo))};JSM.ChangeCoordSystem=function(e,t,n){var r=JSM.VectorNormalize(t.e1),i=JSM.VectorNormalize(t.e2),s=JSM.VectorNormalize(t.e3),o=JSM.VectorNormalize(n.e1),u=JSM.VectorNormalize(n.e2),a=JSM.VectorNormalize(n.e3);e=JSM.CoordSub(e,t.origo);t=new JSM.Coord(0,0,0);t.x=JSM.VectorDot(o,r)*e.x+JSM.VectorDot(o,i)*e.y+JSM.VectorDot(o,s)*e.z;t.y=JSM.VectorDot(u,r)*e.x+JSM.VectorDot(u,i)*e.y+JSM.VectorDot(u,s)*e.z;t.z=JSM.VectorDot(a,r)*e.x+JSM.VectorDot(a,i)*e.y+JSM.VectorDot(a,s)*e.z;return t=JSM.CoordAdd(t,n.origo)};JSM.Sector2D=function(e,t){this.beg=e;this.end=t};JSM.Sector2D.prototype.Set=function(e,t){this.beg=e;this.end=t};JSM.Sector2D.prototype.Clone=function(){return new JSM.Sector2D(this.beg.Clone(),this.end.Clone())};JSM.Sector=function(e,t){this.beg=e;this.end=t};JSM.Sector.prototype.Set=function(e,t){this.beg=e;this.end=t};JSM.Sector.prototype.Clone=function(){return new JSM.Sector(this.beg.Clone(),this.end.Clone())};JSM.CoordSectorPosition2D=function(e,t){var n=e.x,r=e.y,i=t.beg.x,s=t.beg.y,o=t.end.x,u=t.end.y,a=Math.pow(o-i,2)+Math.pow(u-s,2);if(JSM.IsZero(a))return JSM.CoordIsEqual2D(e,t.beg)?"CoordOnSectorEndCoord":"CoordOutsideOfSector";a=((n-i)*(o-i)+(r-s)*(u-s))/a;if(JSM.IsLower(a,0)||JSM.IsGreater(a,1))return"CoordOutsideOfSector";s+=a*(u-s);return!JSM.IsEqual(i+a*(o-i),n)||!JSM.IsEqual(s,r)?"CoordOutsideOfSector":JSM.IsEqual(a,0)||JSM.IsEqual(a,1)?"CoordOnSectorEndCoord":"CoordInsideOfSector"};JSM.SectorSectorPosition2D=function(e,t,n){var r=e.beg.x,i=e.beg.y,s=e.end.x,o=e.end.y,u=t.beg.x,a=t.beg.y,f=t.end.x,l=t.end.y,c=(f-u)*(i-a)-(l-a)*(r-u),h=(s-r)*(i-a)-(o-i)*(r-u);if(JSM.IsZero(c)&&JSM.IsZero(h))return n=JSM.CoordSectorPosition2D(e.beg,t),r=JSM.CoordSectorPosition2D(e.end,t),i=JSM.CoordSectorPosition2D(t.beg,e),e=JSM.CoordSectorPosition2D(t.end,e),"CoordInsideOfSector"===n||"CoordInsideOfSector"===r||"CoordInsideOfSector"===i||"CoordInsideOfSector"===e||"CoordOnSectorEndCoord"===n&&"CoordOnSectorEndCoord"===r&&"CoordOnSectorEndCoord"===i&&"CoordOnSectorEndCoord"===e?"SectorsIntersectsCoincident":"CoordOnSectorEndCoord"===n||"CoordOnSectorEndCoord"===r||"CoordOnSectorEndCoord"===i||"CoordOnSectorEndCoord"===e?"SectorsIntersectsEndPoint":"SectorsDontIntersects";e=(l-a)*(s-r)-(f-u)*(o-i);if(JSM.IsZero(e))return"SectorsDontIntersects";c/=e;h/=e;if(JSM.IsLower(c,0)||JSM.IsGreater(c,1)||JSM.IsLower(h,0)||JSM.IsGreater(h,1))return"SectorsDontIntersects";void 0!==n&&(n.x=r+c*(s-r),n.y=i+c*(o-i));return JSM.IsEqual(c,0)||JSM.IsEqual(c,1)||JSM.IsEqual(h,0)||JSM.IsEqual(h,1)?"SectorsIntersectsEndPoint":"SectorsIntersectsOnePoint"};JSM.GetSectorSegmentation=function(e,t,n){var r=JSM.CoordSub(e.end,e.beg),i=JSM.CoordDistance(e.beg,e.end)/t,s=0,o;for(o=0;o<=t;o++)n.push(JSM.CoordOffset(e.beg,r,s)),s+=i};JSM.Line2D=function(e,t){this.start=e;this.direction=t};JSM.Line2D.prototype.Set=function(e,t){this.start=e;this.direction=t};JSM.Line2D.prototype.Clone=function(){return new JSM.Line2D(this.start.Clone(),this.direction.Clone())};JSM.Line=function(e,t){this.start=e;this.direction=t};JSM.Line.prototype.Set=function(e,t){this.start=e;this.direction=t};JSM.Line.prototype.Clone=function(){return new JSM.Line(this.start.Clone(),this.direction.Clone())};JSM.CoordLinePosition2D=function(e,t){var n=t.start,r=t.direction,n=r.x*(e.y-n.y)-r.y*(e.x-n.x);return JSM.IsPositive(n)?"CoordAtLineLeft":JSM.IsNegative(n)?"CoordAtLineRight":"CoordOnLine"};JSM.CoordLinePosition=function(e,t,n){var r=e.x,i=e.y,s=e.z,o=t.start;t=t.direction;var u=o.x,a=o.y,f=o.z,l=o.x+t.x,c=o.y+t.y,h=o.z+t.z,p=(l-u)*(l-u)+(c-a)*(c-a)+(h-f)*(h-f);if(JSM.IsZero(p))return void 0!==n&&n.Set(o.x,o.y,o.z),JSM.CoordIsEqual(o,e)?"CoordOnLine":"CoordOutsideOfLine";r=JSM.CoordAdd(o,JSM.VectorMultiply(t,((l-u)*(r-u)+(c-a)*(i-a)+(h-f)*(s-f))/p));void 0!==n&&n.Set(r.x,r.y,r.z);e=JSM.CoordDistance(e,r);return JSM.IsZero(e)?"CoordOnLine":"CoordOutsideOfLine"};JSM.ProjectCoordToLine=function(e,t){var n=new JSM.Coord(0,0,0),r=e.x,i=e.y,s=e.z,o=t.start,u=t.direction,a=o.x,f=o.y,l=o.z,c=o.x+u.x,h=o.y+u.y,p=o.z+u.z,d=(c-a)*(c-a)+(h-f)*(h-f)+(p-l)*(p-l);if(JSM.IsZero(d))return n.Set(o.x,o.y,o.z),n;r=JSM.CoordAdd(o,JSM.VectorMultiply(u,((c-a)*(r-a)+(h-f)*(i-f)+(p-l)*(s-l))/d));n.Set(r.x,r.y,r.z);return n};JSM.LineLineClosestPoint=function(e,t,n,r){function i(e,t,n,r,i){return(e[t].x-e[n].x)*(e[r].x-e[i].x)+(e[t].y-e[n].y)*(e[r].y-e[i].y)+(e[t].z-e[n].z)*(e[r].z-e[i].z)}var s=JSM.VectorNormalize(e.direction),o=e.start,s=JSM.CoordAdd(o,s);e=JSM.VectorNormalize(t.direction);t=t.start;var u=JSM.CoordAdd(t,e),a=[o,s,t,u],f=i(a,1,0,1,0),l=i(a,0,2,1,0),u=i(a,0,2,3,2),c=i(a,3,2,1,0),a=i(a,3,2,3,2),f=f*a-c*c;if(JSM.IsEqual(f,0))return!1;l=(u*c-l*a)/f;u=(u+l*c)/a;void 0!==n&&(s=JSM.VectorNormalize(JSM.CoordSub(s,o)),o=JSM.CoordAdd(o,JSM.VectorMultiply(s,l)),n.Set(o.x,o.y,o.z));void 0!==r&&(n=JSM.CoordAdd(t,JSM.VectorMultiply(e,u)),r.Set(n.x,n.y,n.z));return!0};JSM.LineLinePosition=function(e,t,n){var r=new JSM.Coord(0,0,0),i=new JSM.Coord(0,0,0);return!JSM.LineLineClosestPoint(e,t,r,i)?"LinesIntersectsCoincident":JSM.CoordIsEqual(r,i)?(void 0!==n&&n.Set(r.x,r.y,r.z),"LinesIntersectsOnePoint"):"LinesDontIntersects"};JSM.Transformation=function(){this.matrix=JSM.MatrixIdentity()};JSM.Transformation.prototype.GetMatrix=function(){return this.matrix};JSM.Transformation.prototype.SetMatrix=function(e){this.matrix=e};JSM.Transformation.prototype.Append=function(e){this.matrix=JSM.MatrixMultiply(this.matrix,e.matrix)};JSM.Transformation.prototype.Apply=function(e){return JSM.ApplyTransformation(this.matrix,e)};JSM.Transformation.prototype.Clone=function(){var e=new JSM.Transformation;e.matrix=JSM.MatrixClone(this.matrix);return e};JSM.IdentityTransformation=function(){var e=new JSM.Transformation;e.matrix=JSM.MatrixIdentity();return e};JSM.TranslationTransformation=function(e){var t=new JSM.Transformation;t.matrix=JSM.MatrixTranslation(e.x,e.y,e.z);return t};JSM.OffsetTransformation=function(e,t){var n=JSM.VectorNormalize(e),n=JSM.VectorMultiply(n,t);return JSM.TranslationTransformation(n)};JSM.RotationTransformation=function(e,t,n){var r=new JSM.Transformation;r.matrix=JSM.MatrixRotation(e,t,n);return r};JSM.RotationXTransformation=function(e,t){var n=new JSM.Transformation;void 0===t||null===t?n.matrix=JSM.MatrixRotationX(e):(n.Append(JSM.TranslationTransformation(new JSM.Vector(-t.x,-t.y,-t.z))),n.Append(JSM.RotationXTransformation(e)),n.Append(JSM.TranslationTransformation(new JSM.Vector(t.x,t.y,t.z))));return n};JSM.RotationYTransformation=function(e,t){var n=new JSM.Transformation;void 0===t||null===t?n.matrix=JSM.MatrixRotationY(e):(n.Append(JSM.TranslationTransformation(new JSM.Vector(-t.x,-t.y,-t.z))),n.Append(JSM.RotationYTransformation(e)),n.Append(JSM.TranslationTransformation(new JSM.Vector(t.x,t.y,t.z))));return n};JSM.RotationZTransformation=function(e,t){var n=new JSM.Transformation;void 0===t||null===t?n.matrix=JSM.MatrixRotationZ(e):(n.Append(JSM.TranslationTransformation(new JSM.Vector(-t.x,-t.y,-t.z))),n.Append(JSM.RotationZTransformation(e)),n.Append(JSM.TranslationTransformation(new JSM.Vector(t.x,t.y,t.z))));return n};JSM.RotationXYZTransformation=function(e,t,n,r){var i=new JSM.Transformation;i.Append(JSM.RotationXTransformation(e,r));i.Append(JSM.RotationYTransformation(t,r));i.Append(JSM.RotationZTransformation(n,r));return i};JSM.Plane=function(e,t,n,r){this.a=e;this.b=t;this.c=n;this.d=r};JSM.Plane.prototype.Set=function(e,t,n,r){this.a=e;this.b=t;this.c=n;this.d=r};JSM.Plane.prototype.GetNormal=function(){return new JSM.Vector(this.a,this.b,this.c)};JSM.Plane.prototype.Clone=function(){return new JSM.Plane(this.a,this.b,this.c,this.d)};JSM.GetPlaneFromCoordAndDirection=function(e,t){var n=new JSM.Plane,r=JSM.VectorNormalize(t),i=r.x,s=r.y,r=r.z;n.Set(i,s,r,-(i*e.x+s*e.y+r*e.z));return n};JSM.GetPlaneFromThreeCoords=function(e,t,n){var r=new JSM.Plane,i=(t.y-e.y)*(n.z-e.z)-(n.y-e.y)*(t.z-e.z),s=(t.z-e.z)*(n.x-e.x)-(n.z-e.z)*(t.x-e.x);t=(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y);r.Set(i,s,t,-(i*e.x+s*e.y+t*e.z));return r};JSM.CoordPlanePosition=function(e,t){var n=t.a*e.x+t.b*e.y+t.c*e.z+t.d;return JSM.IsPositive(n)?"CoordInFrontOfPlane":JSM.IsNegative(n)?"CoordAtBackOfPlane":"CoordOnPlane"};JSM.LinePlanePosition=function(e,t,n){var r=JSM.VectorNormalize(e.direction),i=e.start.x,s=e.start.y,o=e.start.z,u=t.a,a=t.b,f=t.c;t=t.d;var l=u*(i-(e.start.x+r.x))+a*(s-(e.start.y+r.y))+f*(o-(e.start.z+r.z));if(JSM.IsZero(l))return"LineParallelToPlane";void 0!==n&&(e=JSM.CoordAdd(e.start,JSM.VectorMultiply(r,(u*i+a*s+f*o+t)/l)),n.Set(e.x,e.y,e.z));return"LineIntersectsPlane"};JSM.LinePlaneIntersection=function(e,t){var n=JSM.VectorNormalize(e.direction),r=e.start.x,i=e.start.y,s=e.start.z,o=e.start.x+n.x,u=e.start.y+n.y,a=e.start.z+n.z,f=t.a,l=t.b,c=t.c,h=t.d,p=new JSM.Coord(0,0,0),o=f*(r-o)+l*(i-u)+c*(s-a);return JSM.IsZero(o)?p:p=JSM.CoordAdd(e.start,JSM.VectorMultiply(n,(f*r+l*i+c*s+h)/o))};JSM.CoordPlaneSignedDistance=function(e,t){var n=t.a,r=t.b,i=t.c;return(n*e.x+r*e.y+i*e.z+t.d)/Math.sqrt(n*n+r*r+i*i)};JSM.CoordPlaneDistance=function(e,t){return Math.abs(JSM.CoordPlaneSignedDistance(e,t))};JSM.CoordPlaneSignedDirectionalDistance=function(e,t,n){var r=JSM.VectorNormalize(t);t=e.x;var i=e.y,s=e.z,o=n.a,u=n.b,a=n.c;n=n.d;var f=o*(t-(e.x+r.x))+u*(i-(e.y+r.y))+a*(s-(e.z+r.z));if(JSM.IsZero(f))return 0;r=JSM.CoordAdd(e,JSM.VectorMultiply(r,(o*t+u*i+a*s+n)/f));e=JSM.CoordDistance(e,r);JSM.IsNegative(o*t+u*i+a*s+n)&&(e=-e);return e};JSM.CoordPlaneDirectionalDistance=function(e,t,n){return Math.abs(JSM.CoordPlaneSignedDirectionalDistance(e,t,n))};JSM.ProjectCoordToPlane=function(e,t){var n=e.x,r=e.y,i=e.z,s=t.a,o=t.b,u=t.c,a=t.d,f=JSM.CoordPlaneDistance(e,t);JSM.IsGreater(s*n+o*r+u*i+a,0)&&(f=-f);n=JSM.VectorNormalize(new JSM.Coord(s,o,u));return JSM.CoordOffset(e,n,f)};JSM.Project=function(e,t,n,r,i,s,o,u,a){t=JSM.MatrixView(t,n,r);o=JSM.MatrixPerspective(i,s,o,u);i=new JSM.Coord(0,0,0);u=[];s=[];u[0]=e.x;u[1]=e.y;u[2]=e.z;u[3]=1;s=JSM.MatrixVectorMultiply(o,JSM.MatrixVectorMultiply(t,u));e=s[3];JSM.IsZero(e)?a=null:(s[0]=.5*(s[0]/e)+.5,s[1]=.5*(s[1]/e)+.5,s[2]=.5*(s[2]/e)+.5,s[0]=s[0]*a[2]+a[0],s[1]=s[1]*a[3]+a[1],i.x=s[0],i.y=s[1],i.z=s[2],a=i);return a};JSM.ConvexHull2D=function(e){function t(e,t){var n=e.length,r=0,i;for(i=1;i<n;i++)t==r?r=i:"Clockwise"==JSM.CoordTurnType2D(e[t],e[r],e[i])&&(r=i);return r}var n=[];if(3>e.length)return n;var r=function(e){var t=e.length,n=JSM.Inf,r=-1,i,s;for(i=0;i<t;i++)s=e[i].x,JSM.IsLower(s,n)&&(n=s,r=i);return r}(e),i=r,s;do n.push(i),i=s=t(e,i);while(s!=r);return n};JSM.ConvexHull3D=function(e){function t(){this.position=null}function n(){this.tri2=this.tri1=this.vert2=this.vert1=null}function r(){this.valid=this.edges=this.vertices=null}function i(e,n){var r=new t;r.position=n;e.vertices.push(r);return e.vertices.length-1}function s(e,t,r,i){var s=-1,o,u;for(o=0;o<e.edges.length;o++)if(u=e.edges[o],u.vert1==r&&u.vert2==i||u.vert1==i&&u.vert2==r){s=o;break}-1==s&&(s=new n,s.vert1=r,s.vert2=i,s.tri1=-1,s.tri2=-1,e.edges.push(s),s=e.edges.length-1);e=e.edges[s];e.tri1!=t&&e.tri2!=t&&(-1==e.tri1?e.tri1=t:-1==e.tri2&&(e.tri2=t));return s}function o(e,t,n,i){var o=e.triangles.length,u=s(e,o,t,n),a=s(e,o,n,i),o=s(e,o,i,t),f=new r;f.vertices=[t,n,i];f.edges=[u,a,o];f.valid=!0;e.triangles.push(f);return e.triangles.length-1}function u(e,t,n){e=e.edges[n];e.tri1==t?e.tri1=-1:e.tri2==t&&(e.tri2=-1)}function a(e,t,n,r,i){n=e.vertices[n].position;r=e.vertices[r].position;i=e.vertices[i].position;e=JSM.CoordSub(e.vertices[t].position,i);t=JSM.CoordSub(n,i);n=JSM.CoordSub(r,i);return JSM.VectorDot(e,JSM.VectorCross(t,n))/6}function f(e,t){var n=[],r,i;for(r=0;r<e.triangles.length;r++)i=e.triangles[r],i.valid?!JSM.IsLower(a(e,i.vertices[0],i.vertices[2],i.vertices[1],t),0)?n.push(!0):n.push(!1):n.push(!1);var s,f,l,c=[];for(r=0;r<n.length;r++)n[r]&&(i=e.triangles[r],i.valid&&(s=e.edges[i.edges[0]],f=e.edges[i.edges[1]],l=e.edges[i.edges[2]],s=-1==s.tri1||-1==s.tri2||n[s.tri1]!=n[s.tri2],f=-1==f.tri1||-1==f.tri2||n[f.tri1]!=n[f.tri2],l=-1==l.tri1||-1==l.tri2||n[l.tri1]!=n[l.tri2],s&&c.push([i.vertices[0],i.vertices[1],t]),f&&c.push([i.vertices[1],i.vertices[2],t]),l&&c.push([i.vertices[2],i.vertices[0],t])));for(r=0;r<n.length;r++)n[r]&&(i=e.triangles[r],i.valid&&(i=e,l=r,s=i.triangles[l],s.valid&&(u(i,l,s.edges[0]),u(i,l,s.edges[1]),u(i,l,s.edges[2]),s.valid=!1)));for(r=0;r<c.length;r++)n=c[r],o(e,n[0],n[1],n[2])}var l=[],c=e.length;if(4>c)return l;var h=new function(){this.vertices=[];this.edges=[];this.triangles=[]},p;for(p=0;p<c;p++)i(h,e[p]);(function(e){var t=-1,t=!JSM.IsLower(a(e,0,1,2,3),0)?o(e,0,1,2):o(e,0,2,1),t=e.triangles[t];o(e,t.vertices[0],t.vertices[2],3);o(e,t.vertices[2],t.vertices[1],3);o(e,t.vertices[1],t.vertices[0],3)})(h);for(p=4;p<c;p++)f(h,p);for(p=0;p<h.triangles.length;p++)e=h.triangles[p],e.valid&&l.push(e.vertices);return l};JSM.Polygon2D=function(){this.vertices=[]};JSM.Polygon2D.prototype.AddVertex=function(e,t){this.vertices.push(new JSM.Coord2D(e,t))};JSM.Polygon2D.prototype.GetVertex=function(e){return this.vertices[e]};JSM.Polygon2D.prototype.SetVertex=function(e,t,n){this.vertices[e].Set(t,n)};JSM.Polygon2D.prototype.VertexCount=function(){return this.vertices.length};JSM.Polygon2D.prototype.Clear=function(){this.vertices=[]};JSM.Polygon2D.prototype.Clone=function(){var e=new JSM.Polygon2D,t;for(t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].Clone());return e};JSM.ContourPolygon2D=function(){this.polygons=[]};JSM.ContourPolygon2D.prototype.AddVertex=function(e,t,n){void 0===this.polygons[e]&&(this.polygons[e]=new JSM.Polygon2D);this.polygons[e].AddVertex(t,n)};JSM.ContourPolygon2D.prototype.VertexCount=function(e){return void 0===this.polygons[e]?0:this.polygons[e].VertexCount()};JSM.ContourPolygon2D.prototype.GetVertex=function(e,t){return this.polygons[e].GetVertex(t)};JSM.ContourPolygon2D.prototype.SetVertex=function(e,t,n,r){this.polygons[e].SetVertex(t,n,r)};JSM.ContourPolygon2D.prototype.AddContour=function(){this.polygons.push(new JSM.Polygon2D)};JSM.ContourPolygon2D.prototype.ContourCount=function(){return this.polygons.length};JSM.ContourPolygon2D.prototype.GetContour=function(e){return this.polygons[e]};JSM.ContourPolygon2D.prototype.Clear=function(){this.polygons=[]};JSM.ContourPolygon2D.prototype.Clone=function(){var e=new JSM.ContourPolygon2D,t;for(t=0;t<this.polygons.length;t++)e.polygons.push(this.polygons[t].Clone());return e};JSM.Polygon=function(){this.vertices=[]};JSM.Polygon.prototype.AddVertex=function(e,t,n){this.vertices.push(new JSM.Coord(e,t,n))};JSM.Polygon.prototype.GetVertex=function(e){return this.vertices[e]};JSM.Polygon.prototype.SetVertex=function(e,t,n,r){this.vertices[e].Set(t,n,r)};JSM.Polygon.prototype.VertexCount=function(){return this.vertices.length};JSM.Polygon.prototype.Clear=function(){this.vertices=[]};JSM.Polygon.prototype.Clone=function(){var e=new JSM.Polygon,t;for(t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].Clone());return e};JSM.CreatePolygonFromVertices=function(e){var t=new JSM.Polygon2D,n,r;for(n=0;n<e.length;n++)r=e[n],t.AddVertex(r.x,r.y);return t};JSM.PolygonSignedArea2D=function(e){var t=e.VertexCount(),n=0,r,i,s;for(r=0;r<t;r++)i=e.GetVertex(r),s=e.GetVertex((r+1)%t),n+=i.x*s.y-s.x*i.y;return n/2};JSM.PolygonArea2D=function(e){return Math.abs(JSM.PolygonSignedArea2D(e))};JSM.PolygonOrientation2D=function(e){e=JSM.PolygonSignedArea2D(e);return JSM.IsPositive(e)?"CounterClockwise":JSM.IsNegative(e)?"Clockwise":"Invalid"};JSM.ChangePolygonOrientation2D=function(e){var t=e.Clone();e.Clear();var n,r;for(n=t.VertexCount()-1;0<=n;n--)r=t.GetVertex(n),e.AddVertex(r.x,r.y)};JSM.CreateCCWPolygonFromVertices=function(e){e=JSM.CreatePolygonFromVertices(e);"CounterClockwise"!=JSM.PolygonOrientation2D(e)&&JSM.ChangePolygonOrientation2D(e);return e};JSM.PolygonComplexity2D=function(e){var t=!1,n=!1,r=e.VertexCount(),i,s,o,u;for(i=0;i<r;i++)if(s=0===i?r-1:i-1,o=i,u=i===r-1?0:i+1,s=e.GetVertex(s),o=e.GetVertex(o),u=e.GetVertex(u),u=JSM.CoordTurnType2D(s,o,u),"CounterClockwise"===u?t=!0:"Clockwise"===u&&(n=!0),t&&n)return"Concave";return!t&&!n?"Invalid":"Convex"};JSM.CoordPolygonPosition2D=function(e,t){var n=t.VertexCount(),r,i,s;for(r=0;r<n;r++)if(i=t.GetVertex(r),s=t.GetVertex((r+1)%n),i=new JSM.Sector2D(i,s),"CoordOutsideOfSector"!==JSM.CoordSectorPosition2D(e,i))return"CoordOnPolygonEdge";var o=0,u;for(r=0;r<n;r++)u=Math.abs(t.GetVertex(r).x-e.x),JSM.IsGreater(u,o)&&(o=u);o=new JSM.Sector2D(e,new JSM.Coord2D(e.x+2*o,e.y));u=0;var a;for(r=0;r<n;r++)i=t.GetVertex(r),s=t.GetVertex((r+1)%n),i=new JSM.Sector2D(i,s),s=new JSM.Coord2D(0,0),a=JSM.SectorSectorPosition2D(o,i,s),"SectorsDontIntersects"!==a&&("SectorsIntersectsOnePoint"===a?u++:"SectorsIntersectsEndPoint"===a&&(JSM.CoordIsEqual2D(s,i.beg)?JSM.IsGreater(i.beg.y,i.end.y)&&u++:JSM.CoordIsEqual2D(s,i.end)&&JSM.IsLower(i.beg.y,i.end.y)&&u++));return 0===u%2?"CoordOutsideOfPolygon":"CoordInsideOfPolygon"};JSM.SectorIntersectsPolygon2D=function(e,t,n,r){var i=e.VertexCount(),s,o,u;for(s=0;s<i;s++)if(o=s,u=(s+1)%i,!(o==n||u==n||o==r||u==r))if(o=new JSM.Sector2D(e.GetVertex(o),e.GetVertex(u)),o=JSM.SectorSectorPosition2D(t,o),"SectorsDontIntersects"!==o)return!0;return!1};JSM.IsPolygonVertexVisible2D=function(e,t,n){if(t===n)return!1;var r=e.VertexCount();if(n===(0<t?t-1:r-1)||n===(t<r-1?t+1:0))return!1;r=new JSM.Sector2D(e.GetVertex(t),e.GetVertex(n));if(JSM.SectorIntersectsPolygon2D(e,r,t,n))return!1;t=JSM.MidCoord2D(r.beg,r.end);return"CoordInsideOfPolygon"!==JSM.CoordPolygonPosition2D(t,e)?!1:!0};JSM.CreatePolygonWithHole2D=function(e){var t=[],n=[],r=0,i;n.push(-1);for(i=0;i<e.length;i++)null===e[i]&&(n.push(i),r+=1);n.push(i);r+=1;for(i=0;i<r;i++){var s=i,o=n[s]+1,u=n[s+1];if(0===s){s=void 0;for(s=o;s<u;s++)t.push(s)}else{for(var o=void 0,o=new JSM.Polygon2D,u=new JSM.Polygon2D,a=void 0,f=void 0,f=void 0,a=0;a<t.length;a++)f=e[t[a]],o.AddVertex(f.x,f.y);for(var l=n[s]+1,c=n[s+1],a=l;a<c;a++)f=e[a],u.AddVertex(f.x,f.y);for(var h=null,p=void 0,d=void 0,v=void 0,a=0;a<o.VertexCount();a++){d=t[a];for(f=l;f<c;f++)if(v=f-l,p=new JSM.Sector(e[d],e[f]),!JSM.SectorIntersectsPolygon2D(o,p,a,-1)&&!JSM.SectorIntersectsPolygon2D(u,p,-1,v)){h=[d,f];break}if(null!==h)break}o=h;u=n[s]+1;s=n[s+1];a=[];c=l=void 0;for(l=0;l<t.length;l++)a[l]=t[l];t=[];h=f=void 0;for(l=0;l<a.length;l++)if(t.push(a[l]),a[l]==o[0]){c=o[1];f=!0;for(h=!1;!h;)t.push(c),!f&&c==o[1]&&(h=!0),f&&(f=!1),c=c<s-1?c+1:u;t.push(a[l])}}}return t};JSM.PolygonTriangulate2D=function(e){function t(){var e=[],t,n,r,i;for(t=0;t<o.length;t++)if(r=o[t],3===r.length)if("CounterClockwise"===f)e.push(r);else{i=[];for(n=r.length-1;0<=n;n--)i.push(s-r[n]-1);e.push(i)}return e}function n(e,t,n){if(t===n)return!1;var r=e.VertexCount(),i;if(!(i=(t<r-1?t+1:0)===n))i=(0<t?t-1:r-1)===n;return i?!1:JSM.IsPolygonVertexVisible2D(e,t,n)}function r(e,t,n){var r=e.length;if(3>=r)return!0;var i,s,u,a;for(i=0;2>i;i++){u=s=-1;0===i?(s=t,u=n):1===i&&(s=n,u=t);a=[];for(a.push(e[u]);s!==u;s=s<r-1?s+1:0)a.push(e[s]);o.push(a)}return!0}var i=e.Clone(),s=i.VertexCount();if(3>s)return[];var o=[],u=[],a;for(e=0;e<s;e++)u.push(e);o.push(u);if(3===s)return t();var u=JSM.PolygonComplexity2D(i),f=JSM.PolygonOrientation2D(i);if("Invalid"===u||"Invalid"===f)return[];if("CounterClockwise"!==f){var l,c,h;for(e=0;e<s/2;e++)l=e,c=s-e-1,h=i.vertices[l],i.vertices[l]=i.vertices[c],i.vertices[c]=h}if("Convex"===u){for(e=0;e<s-2;e++)i=[],i.push(0),i.push((e+1)%s),i.push((e+2)%s),o.push(i);return t()}var p;for(e=0;e<o.length;e++)if(l=o[e],c=l.length,3!==c){h=new JSM.Polygon2D;for(u=0;u<c;u++)a=i.GetVertex(l[u]),h.AddVertex(a.x,a.y);p=!1;for(u=0;u<c;u++){for(a=0;a<c;a++)if(n(h,u,a)){r(l,u,a);p=!0;break}if(p)break}}return t()};JSM.CheckTriangulation2D=function(e,t){var n=JSM.PolygonSignedArea2D(e),r=0,i,s,o,u,a;for(i=0;i<t.length;i++){o=t[i];if(3!==o.length)return!1;u=new JSM.Polygon2D;for(s=0;s<o.length;s++)a=e.GetVertex(o[s]),u.AddVertex(a.x,a.y);r+=JSM.PolygonSignedArea2D(u)}return!JSM.IsEqual(n,r)?!1:!0};JSM.CreatePolygonWithHole=function(e){var t=[],n;for(n=0;n<e.length;n++)null!==e[n]&&t.push(e[n]);var t=JSM.CalculateNormal(t),r=new JSM.Coord(0,0,0),i=[],s;for(n=0;n<e.length;n++)null!==e[n]?(s=JSM.GetCoord2DFromCoord(e[n],r,t),i.push(s)):i.push(null);return JSM.CreatePolygonWithHole2D(i)};JSM.PolygonTriangulate=function(e){var t=new JSM.Polygon2D,n=JSM.CalculateNormal(e.vertices),r=new JSM.Coord(0,0,0),i=e.VertexCount(),s,o;for(s=0;s<i;s++)o=JSM.GetCoord2DFromCoord(e.GetVertex(s),r,n),t.AddVertex(o.x,o.y);return JSM.PolygonTriangulate2D(t)};JSM.OffsetPolygonContour=function(e,t){var n=e.VertexCount(),r=JSM.CalculateNormal(e.vertices),i,s,o,u,a,f=new JSM.Polygon,l;for(l=0;l<n;l++)i=0===l?n-1:l-1,s=l,o=l===n-1?0:l+1,i=e.GetVertex(i),s=e.GetVertex(s),u=e.GetVertex(o),a=JSM.CoordSub(i,s),o=JSM.CoordSub(u,s),a=JSM.GetVectorsAngle(a,o)/2,"Clockwise"===JSM.CoordTurnType(i,s,u,r)&&(a=Math.PI-a),i=t/Math.sin(a),i=JSM.CoordOffset(s,o,i),i=JSM.CoordRotate(i,r,a,s),f.AddVertex(i.x,i.y,i.z);return f};JSM.CutPolygonWithPlane=function(e,t,n,r,i){function s(e,t,n,r,i){1==t?n.push(e):-1==t?r.push(e):i.push(e)}function o(e,t,n,r){function i(e,t){if(!(2>t.length)){for(var n=e.GetVertex(t[0]),r=e.GetVertex(t[1]),r=JSM.CoordSub(r,n),i=JSM.GetPlaneFromCoordAndDirection(n,r),s,r=[],n=0;n<t.length;n++)s=e.GetVertex(t[n]),r.push(JSM.CoordPlaneSignedDistance(s,i));for(n=0;n<t.length-1;n++)for(i=0;i<t.length-n-1;i++)if(JSM.IsGreater(r[i],r[i+1])){s=r;var o=i+1,u=s[i];s[i]=s[o];s[o]=u;s=t;o=i+1;u=s[i];s[i]=s[o];s[o]=u}}}function s(e,t,n,r,i,s){function o(e,t){e[e[t]]=-1;e[t]=-1}var u=[];(function(e,t,n){var r;for(r=0;r<e.VertexCount();r++)n.push(-1);for(r=0;r<t.length;r+=2){e=n;var i=t,s=r;e[i[s]]=i[s+1];e[i[s+1]]=i[s]}})(e,t,u);var a=0;s&&(a=t.length-1);for(var f=t[a],l=f,c=!1,h=0,p=new JSM.Polygon,d;;){c||(h=n[l],0!==h&&(c=!0));if(0<p.VertexCount()&&l==f)if(1==h?r.push(p):-1==h&&i.push(p),p=new JSM.Polygon,0<a&&a<t.length){l=f=t[a];continue}else break;d=e.GetVertex(l);p.AddVertex(d.x,d.y,d.z);-1!=u[l]?(a=s?a-2:a+2,l=u[l],o(u,l)):l=l<e.VertexCount()-1?l+1:0}}var o=[];(function(e,t){var n,r,i,s;for(n=0;n<e.length;n++)if(r=e[n],0===r){r=0<n?n-1:e.length-1;i=n<e.length-1?n+1:0;s=e[r];i=e[i];if(0!==i&&0===s){for(;0===e[r];)r=0<r?r-1:e.length-1;s=e[r]}(-1==s&&1==i||1==s&&-1==i)&&t.push(n)}})(t,o);0===o.length||0!==o.length%2||(i(e,o),s(e,o,t,n,r,!1),s(e,o,t,n,r,!0))}var u=new JSM.Polygon,a=[];t=function(e,t,n,r){function i(e,n,r,i,s){function o(e,n,r,i,s,o){var u=r[r.length-1];0!==u&&0!==o&&u!=o&&(i=e.GetVertex(i),e=e.GetVertex(s),e=new JSM.Line(e,JSM.CoordSub(e,i)),s=new JSM.Coord(0,0,0),"LineIntersectsPlane"==JSM.LinePlanePosition(e,t,s)&&(n.AddVertex(s.x,s.y,s.z),r.push(0)))}function u(e,t,n,r,i){e=e.GetVertex(r);t.AddVertex(e.x,e.y,e.z);n.push(i)}var a=0===n,f=n===e.VertexCount(),l;f?(n=0,l=e.VertexCount()-1):l=n-1;i=i[n];a||o(e,r,s,l,n,i);f||u(e,r,s,n,i);return i}var s=[],o=!1,u=!1,a,f,l;for(a=0;a<e.VertexCount();a++)f=e.GetVertex(a),f=JSM.CoordPlanePosition(f,t),l=0,"CoordInFrontOfPlane"==f?(l=1,u=!0):"CoordAtBackOfPlane"==f&&(l=-1,o=!0),s.push(l);if(o&&u)for(a=0;a<=e.VertexCount();a++)i(e,a,n,s,r);else{if(o)return-1;if(u)return 1}return 0}(e,t,u,a);0===u.VertexCount()&&0===a.length?s(e,t,n,r,i):o(u,a,n,r);return 0===n.length+r.length+i.length?!1:!0};JSM.BSPNode=function(){this.outside=this.inside=this.parent=this.plane=this.userData=this.polygon=null};JSM.BSPNode.prototype.IsLeaf=function(){return null===this.inside&&null===this.outside};JSM.BSPTree=function(){this.root=null};JSM.BSPTree.prototype.AddPolygon=function(e,t){null===this.root&&(this.root=this.GetNewNode());return this.AddPolygonToNode(this.root,e,t)};JSM.BSPTree.prototype.Traverse=function(e){this.TraverseNode(this.root,e)};JSM.BSPTree.prototype.TraverseNode=function(e,t){null!==e&&(t(e),this.TraverseNode(e.inside,t),this.TraverseNode(e.outside,t))};JSM.BSPTree.prototype.GetNodes=function(){var e=[];this.Traverse(function(t){e.push(t)});return e};JSM.BSPTree.prototype.NodeCount=function(){var e=0;this.Traverse(function(){e+=1});return e};JSM.BSPTree.prototype.AddPolygonToNode=function(e,t,n){if(3>t.VertexCount())return!1;var r;if(null===e.polygon){r=JSM.CalculateNormal(t.vertices);var i=JSM.GetPlaneFromCoordAndDirection(t.GetVertex(0),r);e.polygon=t;void 0!==n&&(e.userData=n);e.plane=i}else{r=[];var s=[],i=[];JSM.CutPolygonWithPlane(t,e.plane,s,r,i)&&(0<r.length&&this.AddInsidePolygonsToNode(e,r,n),0<s.length&&this.AddOutsidePolygonsToNode(e,s,n),0<i.length&&(r=JSM.CalculateNormal(t.vertices),0<JSM.VectorDot(r,e.plane.GetNormal())?this.AddInsidePolygonsToNode(e,i,n):this.AddOutsidePolygonsToNode(e,i,n)))}return!0};JSM.BSPTree.prototype.AddInsidePolygonsToNode=function(e,t,n){null===e.inside&&(e.inside=this.GetNewNode(),e.inside.parent=e);var r;for(r=0;r<t.length;r++)this.AddPolygonToNode(e.inside,t[r],n)};JSM.BSPTree.prototype.AddOutsidePolygonsToNode=function(e,t,n){null===e.outside&&(e.outside=this.GetNewNode(),e.outside.parent=e);var r;for(r=0;r<t.length;r++)this.AddPolygonToNode(e.outside,t[r],n)};JSM.BSPTree.prototype.GetNewNode=function(){return new JSM.BSPNode};JSM.ClipPolygonWithBSPTree=function(e,t,n,r,i,s){function o(e,t,n){if(null!==t){var r=[],i=[],s=[];JSM.CutPolygonWithPlane(e,t.plane,i,r,s)&&(0<r.length&&a(t,r,n),0<i.length&&f(t,i,n),0<s.length&&(e=JSM.CalculateNormal(e.vertices),0<JSM.VectorDot(e,t.plane.GetNormal())?a(t,s,!0):f(t,s,!0)))}}function u(e,t){var n;for(n=0;n<e.length;n++)t.push(e[n])}function a(e,t,n){if(null!==e.inside){e=e.inside;var i;for(i=0;i<t.length;i++)o(t[i],e,n)}else u(t,n?s:r)}function f(e,t,r){if(null!==e.outside){e=e.outside;var s;for(s=0;s<t.length;s++)o(t[s],e,r)}else u(t,r?i:n)}o(e,t.root,!1);return!0};JSM.GetGaussianCParameter=function(e,t,n,r){return Math.sqrt(-(Math.pow(e-n,2)/(2*Math.log(r/Math.abs(t)))))};JSM.GetGaussianValue=function(e,t,n,r){return t*Math.exp(-(Math.pow(e-n,2)/(2*Math.pow(r,2))))};JSM.GenerateCirclePoints=function(e,t,n){var r=[],i=2*Math.PI,s=2*Math.PI/t,o,u;for(o=0;o<t;o++)u=JSM.CylindricalToCartesian(e,0,i),void 0!==n&&null!==n&&(u=JSM.CoordAdd(u,n)),r.push(u),i+=s;return r};JSM.GetRuledMesh=function(e,t,n,r,i){if(e.length===t.length){var s=e.length-1,o=[],u=[],a;for(a=0;a<=s;a++)o.push(JSM.CoordSub(t[a],e[a])),u.push(JSM.CoordDistance(e[a],t[a]));var f,l;for(a=0;a<=s;a++){f=u[a]/n;for(t=0;t<=n;t++)l=JSM.CoordOffset(e[a],o[a],f*t),r.push(l)}for(a=0;a<s;a++)for(t=0;t<n;t++)e=a*(n+1)+t,r=e+1,o=e+n+1,u=o+1,e=[e,o,u,r],i.push(e)}};JSM.BodyVertex=function(e){this.position=e};JSM.BodyVertex.prototype.GetPosition=function(){return this.position};JSM.BodyVertex.prototype.SetPosition=function(e){this.position=e};JSM.BodyVertex.prototype.Clone=function(){return new JSM.BodyVertex(this.position.Clone())};JSM.BodyPolygon=function(e){this.vertices=e;this.curved=this.material=-1};JSM.BodyPolygon.prototype.AddVertexIndex=function(e){this.vertices.push(e)};JSM.BodyPolygon.prototype.GetVertexIndex=function(e){return this.vertices[e]};JSM.BodyPolygon.prototype.VertexIndexCount=function(){return this.vertices.length};JSM.BodyPolygon.prototype.HasMaterialIndex=function(){return-1!==this.material};JSM.BodyPolygon.prototype.GetMaterialIndex=function(){return this.material};JSM.BodyPolygon.prototype.SetMaterialIndex=function(e){this.material=e};JSM.BodyPolygon.prototype.HasCurveGroup=function(){return-1!==this.curved};JSM.BodyPolygon.prototype.GetCurveGroup=function(){return this.curved};JSM.BodyPolygon.prototype.SetCurveGroup=function(e){this.curved=e};JSM.BodyPolygon.prototype.InheritAttributes=function(e){this.material=e.material;this.curved=e.curved};JSM.BodyPolygon.prototype.Clone=function(){var e=new JSM.BodyPolygon([]),t;for(t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t]);e.material=this.material;e.curved=this.curved;return e};JSM.Body=function(){this.vertices=[];this.polygons=[];this.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1))};JSM.Body.prototype.AddVertex=function(e){this.vertices.push(e);return this.vertices.length-1};JSM.Body.prototype.AddPolygon=function(e){this.polygons.push(e);return this.polygons.length-1};JSM.Body.prototype.GetVertex=function(e){return this.vertices[e]};JSM.Body.prototype.GetVertexPosition=function(e){return this.vertices[e].position};JSM.Body.prototype.SetVertexPosition=function(e,t){this.vertices[e].position=t};JSM.Body.prototype.VertexCount=function(){return this.vertices.length};JSM.Body.prototype.GetPolygon=function(e){return this.polygons[e]};JSM.Body.prototype.PolygonCount=function(){return this.polygons.length};JSM.Body.prototype.SetPolygonsMaterialIndex=function(e){var t;for(t=0;t<this.polygons.length;t++)this.polygons[t].SetMaterialIndex(e)};JSM.Body.prototype.SetPolygonsCurveGroup=function(e){var t;for(t=0;t<this.polygons.length;t++)this.polygons[t].SetCurveGroup(e)};JSM.Body.prototype.GetTextureProjectionType=function(){return this.projection};JSM.Body.prototype.SetTextureProjectionType=function(e){this.projection=e};JSM.Body.prototype.GetTextureProjectionCoords=function(){return this.coords};JSM.Body.prototype.SetTextureProjectionCoords=function(e){this.coords=e};JSM.Body.prototype.SetPlanarTextureProjection=function(e,t,n){this.SetTextureProjectionType("Planar");this.SetTextureProjectionCoords(new JSM.CoordSystem(e,t,JSM.VectorCross(t,n),new JSM.Coord(0,0,0)))};JSM.Body.prototype.SetCubicTextureProjection=function(e,t,n,r){this.SetTextureProjectionType("Cubic");this.SetTextureProjectionCoords(new JSM.CoordSystem(e,t,n,r))};JSM.Body.prototype.SetCylindricalTextureProjection=function(e,t,n,r){this.SetTextureProjectionType("Cylindrical");this.SetTextureProjectionCoords(new JSM.CoordSystem(e,JSM.VectorSetLength(n,t),JSM.VectorSetLength(JSM.VectorCross(r,n),t),r))};JSM.Body.prototype.Transform=function(e){var t;for(t=0;t<this.vertices.length;t++)this.vertices[t].position=e.Apply(this.vertices[t].position);null!==this.coords&&(t=JSM.CoordSystemToAbsoluteCoords(this.coords),t.origo=e.Apply(t.origo),t.e1=e.Apply(t.e1),t.e2=e.Apply(t.e2),t.e3=e.Apply(t.e3),this.coords=JSM.CoordSystemToDirectionVectors(t))};JSM.Body.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r;for(n=0;n<this.vertices.length;n++)r=this.vertices[n].position,e.x=JSM.Minimum(e.x,r.x),e.y=JSM.Minimum(e.y,r.y),e.z=JSM.Minimum(e.z,r.z),t.x=JSM.Maximum(t.x,r.x),t.y=JSM.Maximum(t.y,r.y),t.z=JSM.Maximum(t.z,r.z);return[e,t]};JSM.Body.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.Body.prototype.GetBoundingSphereRadius=function(){var e=this.GetCenter(),t=0,n,r;for(n=0;n<this.vertices.length;n++)r=JSM.CoordDistance(e,this.vertices[n].position),JSM.IsGreater(r,t)&&(t=r);return t};JSM.Body.prototype.OffsetToOrigo=function(){var e=this.GetCenter(),e=JSM.VectorMultiply(e,-1),t;for(t=0;t<this.vertices.length;t++)this.vertices[t].position=JSM.CoordAdd(this.vertices[t].position,e)};JSM.Body.prototype.Merge=function(e){var t=this.vertices.length,n,r;for(n=0;n<e.VertexCount();n++)this.vertices.push(e.GetVertex(n).Clone());var i;for(n=0;n<e.PolygonCount();n++){i=e.GetPolygon(n).Clone();for(r=0;r<i.VertexIndexCount();r++)i.vertices[r]+=t;this.polygons.push(i)}};JSM.Body.prototype.Clear=function(){this.vertices=[];this.polygons=[];this.coords=this.projection=null};JSM.Model=function(){this.bodies=[]};JSM.Model.prototype.AddBody=function(e){this.bodies.push(e);return this.bodies.length-1};JSM.Model.prototype.GetBody=function(e){return this.bodies[e]};JSM.Model.prototype.BodyCount=function(){return this.bodies.length};JSM.Model.prototype.VertexCount=function(){var e=0,t;for(t=0;t<this.bodies.length;t++)e+=this.bodies[t].VertexCount();return e};JSM.Model.prototype.PolygonCount=function(){var e=0,t;for(t=0;t<this.bodies.length;t++)e+=this.bodies[t].PolygonCount();return e};JSM.HexColorToRGBComponents=function(e){for(var t=e.toString(16);6>t.length;)t="0"+t;e=parseInt(t.substr(0,2),16);var n=parseInt(t.substr(2,2),16),t=parseInt(t.substr(4,2),16);return[e,n,t]};JSM.HexColorToNormalizedRGBComponents=function(e){e=JSM.HexColorToRGBComponents(e);return[e[0]/255,e[1]/255,e[2]/255]};JSM.HexColorToRGBColor=function(e){return parseInt("0x"+e,16)};JSM.RGBComponentsToHexColor=function(e,t,n){function r(e){for(e=parseInt(e,10).toString(16);2>e.length;)e="0"+e;return e}e=r(e);t=r(t);n=r(n);return parseInt("0x"+e+t+n,16)};JSM.Light=function(e){var t=8355711,n=8355711,r=0,i=new JSM.Vector(1,0,0);void 0!==e&&null!==e&&(t=JSM.ValueOrDefault(e.ambient,t),n=JSM.ValueOrDefault(e.diffuse,n),r=JSM.ValueOrDefault(e.specular,r),i=JSM.ValueOrDefault(e.direction,i));this.ambient=t;this.diffuse=n;this.specular=r;this.direction=i};JSM.Material=function(e){var t=52224,n=52224,r=0,i=0,s=1,o=null,u=1,a=1;void 0!==e&&null!==e&&(t=JSM.ValueOrDefault(e.ambient,t),n=JSM.ValueOrDefault(e.diffuse,n),r=JSM.ValueOrDefault(e.specular,r),i=JSM.ValueOrDefault(e.shininess,i),s=JSM.ValueOrDefault(e.opacity,s),o=JSM.ValueOrDefault(e.texture,o),u=JSM.ValueOrDefault(e.textureWidth,u),a=JSM.ValueOrDefault(e.textureHeight,a));this.ambient=t;this.diffuse=n;this.specular=r;this.shininess=i;this.opacity=s;this.texture=o;this.textureWidth=u;this.textureHeight=a};JSM.Materials=function(){this.materials=[];this.defaultMaterial=new JSM.Material};JSM.Materials.prototype.GetMaterial=function(e){return 0>e||e>=this.materials.length?this.defaultMaterial:this.materials[e]};JSM.Materials.prototype.AddMaterial=function(e){this.materials.push(e)};JSM.Materials.prototype.GetDefaultMaterial=function(){return this.defaultMaterial};JSM.Materials.prototype.Count=function(){return this.materials.length};JSM.AddVertexToBody=function(e,t,n,r){e.AddVertex(new JSM.BodyVertex(new JSM.Coord(t,n,r)))};JSM.AddPolygonToBody=function(e,t){e.AddPolygon(new JSM.BodyPolygon(t))};JSM.CalculateBodyVertexToPolygon=function(e){var t=[],n,r;for(n=0;n<e.VertexCount();n++)t.push([]);var i;for(n=0;n<e.PolygonCount();n++){i=e.GetPolygon(n);for(r=0;r<i.VertexIndexCount();r++)t[i.GetVertexIndex(r)].push(n)}return t};JSM.CalculateBodyPolygonNormal=function(e,t){var n=e.GetPolygon(t),r=n.VertexIndexCount(),i=new JSM.Vector(0,0,0);if(3<=r){var s,o,u;for(s=0;s<r;s++)o=s,u=(s+1)%r,o=e.GetVertexPosition(n.GetVertexIndex(o)),u=e.GetVertexPosition(n.GetVertexIndex(u)),i.x+=(o.y-u.y)*(o.z+u.z),i.y+=(o.z-u.z)*(o.x+u.x),i.z+=(o.x-u.x)*(o.y+u.y)}return JSM.VectorNormalize(i)};JSM.CalculateBodyPolygonNormals=function(e){var t=[],n;for(n=0;n<e.PolygonCount();n++)t.push(JSM.CalculateBodyPolygonNormal(e,n));return t};JSM.CalculateBodyVertexNormals=function(e){var t=[],n=JSM.CalculateBodyPolygonNormals(e),r=null,i,s,o,u,a,f,l,c;for(i=0;i<e.PolygonCount();i++)if(u=e.GetPolygon(i),t[i]=[],u.HasCurveGroup()){null===r&&(r=JSM.CalculateBodyVertexToPolygon(e));for(s=0;s<u.VertexIndexCount();s++){a=new JSM.Vector(0,0,0);f=0;l=r[u.GetVertexIndex(s)];for(o=0;o<l.length;o++)c=e.GetPolygon(l[o]),c.GetCurveGroup()===u.GetCurveGroup()&&(a=JSM.CoordAdd(a,n[l[o]]),f++);a=JSM.VectorMultiply(a,1/f);a=JSM.VectorNormalize(a);t[i].push(a)}}else{o=n[i];for(s=0;s<u.VertexIndexCount();s++)t[i].push(new JSM.Vector(o.x,o.y,o.z))}return t};JSM.MakeBodyInsideOut=function(e){var t,n,r,i,s;for(t=0;t<e.PolygonCount();t++){r=e.GetPolygon(t);s=r.vertices.slice(0);i=s.length;r.vertices=[];for(n=0;n<i;n++)r.vertices.push(s[i-n-1])}};JSM.SoftMoveBodyVertex=function(e,t,n,r,i){t=e.GetVertex(t).position;var s=JSM.GetGaussianCParameter(n,i,0,1e-5),o,u,a;for(o=0;o<e.VertexCount();o++)u=JSM.CoordDistance(t,e.GetVertex(o).position),JSM.IsGreater(u,n)||(u=JSM.GetGaussianValue(u,i,0,s),a=e.GetVertex(o).position,e.GetVertex(o).position=JSM.CoordOffset(a,r,u))};JSM.CalculatePolygonCentroid=function(e,t){var n=e.GetPolygon(t),r=n.VertexIndexCount(),i=new JSM.Coord(0,0,0),s;for(s=0;s<r;s++)i=JSM.CoordAdd(i,e.GetVertexPosition(n.GetVertexIndex(s)));return i=JSM.VectorMultiply(i,1/r)};JSM.TriangulateWithCentroids=function(e){var t=new JSM.Body,n,r;for(n=0;n<e.VertexCount();n++)r=e.GetVertex(n).position,t.AddVertex(new JSM.BodyVertex(new JSM.Coord(r.x,r.y,r.z)));var i,s,o,u,a;for(n=0;n<e.PolygonCount();n++){r=JSM.CalculatePolygonCentroid(e,n);a=t.VertexCount();t.AddVertex(new JSM.BodyVertex(new JSM.Coord(r.x,r.y,r.z)));s=e.GetPolygon(n);o=s.VertexIndexCount();for(r=0;r<o;r++)i=s.GetVertexIndex(r),u=s.GetVertexIndex(r<o-1?r+1:0),i=new JSM.BodyPolygon([i,u,a]),i.material=s.material,i.curved=s.curved,t.AddPolygon(i)}return t};JSM.TriangulatePolygons=function(e){var t=new JSM.Body,n,r,i;for(n=0;n<e.VertexCount();n++)i=e.GetVertexPosition(n),t.AddVertex(new JSM.BodyVertex(new JSM.Coord(i.x,i.y,i.z)));var s,o;for(n=0;n<e.PolygonCount();n++){s=new JSM.Polygon;o=e.GetPolygon(n);for(r=0;r<o.VertexIndexCount();r++)i=e.GetVertexPosition(o.GetVertexIndex(r)),s.AddVertex(i.x,i.y,i.z);i=JSM.PolygonTriangulate(s);for(r=0;r<i.length;r++)s=i[r],s=new JSM.BodyPolygon([o.GetVertexIndex(s[0]),o.GetVertexIndex(s[1]),o.GetVertexIndex(s[2])]),s.InheritAttributes(o),t.AddPolygon(s)}return t};JSM.GenerateRandomMaterials=function(e,t,n){var r,i;for(r=0;r<e.PolygonCount();r++)i=void 0!==n&&n?JSM.SeededRandomInt(0,16777215,r+1):JSM.RandomInt(0,16777215),t.AddMaterial(new JSM.Material({ambient:i,diffuse:i})),i=t.Count()-1,e.GetPolygon(r).SetMaterialIndex(i)};JSM.VertInfo=function(){this.edges=[];this.pgons=[]};JSM.EdgeInfo=function(){this.pgon2=this.pgon1=this.vert2=this.vert1=-1};JSM.PolyEdgeInfo=function(){this.index=-1;this.reverse=!1};JSM.PgonInfo=function(){this.verts=[];this.pedges=[]};JSM.AdjacencyInfo=function(){this.verts=[];this.edges=[];this.pgons=[]};JSM.GetPolyEdgeStartVertex=function(e,t){return e.reverse?t.edges[e.index].vert2:t.edges[e.index].vert1};JSM.GetPolyEdgeEndVertex=function(e,t){return e.reverse?t.edges[e.index].vert1:t.edges[e.index].vert2};JSM.CalculateAdjacencyInfo=function(e){var t=new JSM.AdjacencyInfo,n,r,i;for(n=0;n<e.VertexCount();n++)r=new JSM.VertInfo,t.verts.push(r);var s,o,u,a,f;for(n=0;n<e.PolygonCount();n++){s=e.GetPolygon(n);i=new JSM.PgonInfo;o=s.VertexIndexCount();for(r=0;r<o;r++){u=s.GetVertexIndex(r);a=s.GetVertexIndex(r<o-1?r+1:0);f=u;var l=a;a=n;for(var c=new JSM.PolyEdgeInfo,h=void 0,p=void 0,h=0;h<t.edges.length;h++)p=t.edges[h],p.vert1===f&&p.vert2===l?(c.index=h,c.reverse=!1):p.vert1===l&&p.vert2===f&&(c.index=h,c.reverse=!0);-1===c.index?(h=new JSM.EdgeInfo,h.vert1=f,h.vert2=l,h.pgon1=a,h.pgon2=-1,t.edges.push(h),c.index=t.edges.length-1,c.reverse=!1):(f=t.edges[c.index],-1===f.pgon1?f.pgon1=a:f.pgon1!==a&&-1===f.pgon2&&(f.pgon2=a));f=c;i.verts.push(u);i.pedges.push(f);t.verts[u].edges.push(f.index);t.verts[u].pgons.push(n)}t.pgons.push(i)}return t};JSM.IsSolidBody=function(e){e=JSM.CalculateAdjacencyInfo(e);var t,n;for(t=0;t<e.edges.length;t++)if(n=e.edges[t],-1===n.pgon1||-1===n.pgon2)return!1;return!0};JSM.CheckSolidBody=function(e){e=JSM.CalculateAdjacencyInfo(e);var t,n,r,i,s,o,u,a;for(t=0;t<e.edges.length;t++){r=e.edges[t];if(-1===r.pgon1||-1===r.pgon2)return!1;o=e.pgons[r.pgon1];s=!1;for(n=0;n<o.pedges.length;n++)if(i=o.pedges[n],i.index==t){u=i.reverse;s=!0;break}if(!s)return!1;r=e.pgons[r.pgon2];s=!1;for(n=0;n<r.pedges.length;n++)if(i=r.pedges[n],i.index==t){a=i.reverse;s=!0;break}if(!s||u==a)return!1}return!0};JSM.CalculatePlanarTextureCoord=function(e,t){var n=new JSM.Coord2D(0,0),r=JSM.VectorNormalize(t.e1),i=JSM.VectorNormalize(t.e2),s=JSM.VectorCross(t.e1,t.e2),s=JSM.GetPlaneFromCoordAndDirection(t.origo,s),i=JSM.GetPlaneFromCoordAndDirection(t.origo,i),r=JSM.GetPlaneFromCoordAndDirection(t.origo,r),s=JSM.ProjectCoordToPlane(e,s);n.x=JSM.CoordPlaneSignedDistance(s,r);n.y=JSM.CoordPlaneSignedDistance(s,i);return n};JSM.CalculateCubicTextureCoord=function(e,t,n){var r=new JSM.Coord2D(0,0),i=JSM.VectorNormalize(n.e1),s=JSM.VectorNormalize(n.e2),o=JSM.VectorNormalize(n.e3),u=-1,a=0,f,l,c;for(f=0;3>f;f++)0===f?l=i:1===f?l=s:2===f&&(l=o),c=Math.abs(JSM.VectorDot(t,l)),JSM.IsGreater(c,a)&&(u=f,a=c);if(-1===u)return r;t=null;0===u?t=new JSM.CoordSystem(n.origo,s,o,new JSM.Coord(0,0,0)):1===u?t=new JSM.CoordSystem(n.origo,i,o,new JSM.Coord(0,0,0)):2===u&&(t=new JSM.CoordSystem(n.origo,i,s,new JSM.Coord(0,0,0)));return null===t?r:JSM.CalculatePlanarTextureCoord(e,t)};JSM.CalculateCylindricalTextureCoord=function(e,t,n){var r=new JSM.Coord2D(0,0),i=JSM.VectorNormalize(n.e3);if(JSM.VectorsAreCollinear(i,t))return r=JSM.CalculateCubicTextureCoord(e,t,n),[r,0];t=new JSM.Line(n.origo,i);var s=JSM.ProjectCoordToLine(e,t);t=JSM.CoordSignedDistance(n.origo,s,i);var o=JSM.VectorNormalize(n.e1);e=JSM.CoordSub(e,s);i=JSM.GetVectorsFullAngle(e,o,i);n=JSM.VectorLength(n.e1);r.x=i*n;r.y=t;return[r,i]};JSM.CalculatePolygonPlanarTextureCoords=function(e,t){var n=[],r=e.GetPolygon(t),i=e.GetTextureProjectionCoords(),s,o;for(s=0;s<r.VertexIndexCount();s++)o=e.GetVertexPosition(r.GetVertexIndex(s)),n.push(JSM.CalculatePlanarTextureCoord(o,i));return n};JSM.CalculatePolygonCubicTextureCoords=function(e,t,n){var r=[];t=e.GetPolygon(t);var i=e.GetTextureProjectionCoords(),s,o;for(s=0;s<t.VertexIndexCount();s++)o=e.GetVertexPosition(t.GetVertexIndex(s)),r.push(JSM.CalculateCubicTextureCoord(o,n,i));return r};JSM.CalculatePolygonCylindricalTextureCoords=function(e,t,n){var r=[],i=[],s=e.GetPolygon(t);t=e.GetTextureProjectionCoords();var o,u;for(o=0;o<s.VertexIndexCount();o++)u=e.GetVertexPosition(s.GetVertexIndex(o)),u=JSM.CalculateCylindricalTextureCoord(u,n,t),r.push(u[0]),i.push(u[1]);o=JSM.VectorNormalize(t.e3);if(JSM.VectorsAreCollinear(o,n))return r;e=!1;for(o=0;o<i.length;o++){for(n=o+1;n<i.length;n++)if(JSM.IsGreater(Math.abs(i[o]-i[n]),Math.PI)){e=!0;break}if(e)break}if(e){t=JSM.VectorLength(t.e1);for(o=0;o<i.length;o++)JSM.IsLower(i[o],Math.PI)&&(r[o].x=t*(i[o]+2*Math.PI))}return r};JSM.CalculateBodyPlanarTextureCoords=function(e){var t=[],n;for(n=0;n<e.PolygonCount();n++)t.push(JSM.CalculatePolygonPlanarTextureCoords(e,n));return t};JSM.CalculateBodyCubicTextureCoords=function(e){var t=[],n=JSM.CalculateBodyPolygonNormals(e),r,i;for(r=0;r<e.PolygonCount();r++)i=n[r],t.push(JSM.CalculatePolygonCubicTextureCoords(e,r,i));return t};JSM.CalculateBodyCylindricalTextureCoords=function(e){var t=[],n=JSM.CalculateBodyPolygonNormals(e),r,i;for(r=0;r<e.PolygonCount();r++)i=n[r],t.push(JSM.CalculatePolygonCylindricalTextureCoords(e,r,i));return t};JSM.CalculateBodyTextureCoords=function(e){var t=[],n=e.GetTextureProjectionType();"Planar"===n?t=JSM.CalculateBodyPlanarTextureCoords(e):"Cubic"===n?t=JSM.CalculateBodyCubicTextureCoords(e):"Cylindrical"===n&&(t=JSM.CalculateBodyCylindricalTextureCoords(e));return t};JSM.CutBodyByPlane=function(e,t){function n(e,t,n){function r(e){p.push(new JSM.Coord(h.x,h.y,h.z));d.push(e)}function i(n,r){v=JSM.VectorNormalize(JSM.CoordSub(e[r],e[n]));m=new JSM.Line(e[n],v);g=JSM.LinePlaneIntersection(m,t);p.push(new JSM.Coord(g.x,g.y,g.z));d.push(-1)}var s=void 0!==n&&null!==n,o=e.length,u=[],a=[],f=!1,l,c,h;for(l=0;l<o;l++)h=e[l],c=JSM.CoordPlanePosition(h,t),a.push("CoordAtBackOfPlane"!==c),0<l&&a[l-1]!==a[l]&&(f=!0);if(!f){if(!1===a[0])return u;for(l=0;l<o;l++)h=e[l],u.push(new JSM.Coord(h.x,h.y,h.z)),s&&n.push(l);return u}var p=[],d=[],v,m,g;for(l=0;l<o;l++)f=l-1,c=l,0===l&&(f=o-1),h=e[c],a[c]?(a[f]||i(f,c),r(c)):a[f]&&i(f,c);for(l=0;l<p.length;l++)o=p[l],a=u[u.length-1],0===l||!JSM.CoordIsEqual(a,o)?(u.push(new JSM.Coord(o.x,o.y,o.z)),s&&(o=d[l],n.push(o))):s&&(o=d[l],a=d[l-1],-1!==o?n[n.length-1]=o:-1!==a&&(n[n.length-1]=a));return u}function r(e){var t=-1,n;for(n=v;n<i.VertexCount();n++)if(JSM.CoordIsEqual(i.GetVertexPosition(n),e)){t=n;break}-1===t&&(t=i.AddVertex(new JSM.BodyVertex(new JSM.Coord(e.x,e.y,e.z))));return t}var i=new JSM.Body,s=[],o=[],u=[],a=[],f,l,c,h,p;for(f=0;f<e.PolygonCount();f++){c=e.GetPolygon(f);h=[];for(l=0;l<c.VertexIndexCount();l++)p=e.GetVertexPosition(c.GetVertexIndex(l)),h.push(new JSM.Coord(p.x,p.y,p.z));p=[];h=n(h,t,p);for(l=0;l<p.length;l++)-1!==p[l]&&(u[c.GetVertexIndex(p[l])]=!0);s.push(h);o.push(p)}var d;for(f=0;f<e.VertexCount();f++)u[f]&&(d=e.GetVertexPosition(f),a[f]=i.AddVertex(new JSM.BodyVertex(new JSM.Coord(d.x,d.y,d.z))));var v=i.VertexCount();for(f=0;f<e.PolygonCount();f++)if(c=e.GetPolygon(f),h=s[f],p=o[f],0!==p.length){u=[];for(l=0;l<p.length;l++)-1!==p[l]?u.push(a[c.GetVertexIndex(p[l])]):(d=h[l],u.push(r(d)));l=new JSM.BodyPolygon(u);l.InheritAttributes(c);i.AddPolygon(l)}return i};JSM.GenerateRectangle=function(e,t){var n=new JSM.Body,r=e/2,i=t/2;n.AddVertex(new JSM.BodyVertex(new JSM.Coord(-r,-i,0)));n.AddVertex(new JSM.BodyVertex(new JSM.Coord(r,-i,0)));n.AddVertex(new JSM.BodyVertex(new JSM.Coord(r,i,0)));n.AddVertex(new JSM.BodyVertex(new JSM.Coord(-r,i,0)));n.AddPolygon(new JSM.BodyPolygon([0,1,2,3]));n.SetCubicTextureProjection(new JSM.Coord(-r,-i,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return n};JSM.GenerateCuboid=function(e,t,n){var r=new JSM.Body;e/=2;t/=2;n/=2;r.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,-t,-n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,-t,-n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,-t,n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,-t,n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,t,-n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,t,-n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,t,n)));r.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,t,n)));r.AddPolygon(new JSM.BodyPolygon([0,1,2,3]));r.AddPolygon(new JSM.BodyPolygon([1,5,6,2]));r.AddPolygon(new JSM.BodyPolygon([5,4,7,6]));r.AddPolygon(new JSM.BodyPolygon([4,0,3,7]));r.AddPolygon(new JSM.BodyPolygon([0,4,5,1]));r.AddPolygon(new JSM.BodyPolygon([3,2,6,7]));r.SetCubicTextureProjection(new JSM.Coord(-e,-t,-n),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return r};JSM.GenerateCuboidSides=function(e,t,n,r){var i=new JSM.Body;e/=2;t/=2;n/=2;i.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,-t,-n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,-t,-n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,-t,n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,-t,n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,t,-n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,t,-n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(e,t,n)));i.AddVertex(new JSM.BodyVertex(new JSM.Coord(-e,t,n)));r[0]&&i.AddPolygon(new JSM.BodyPolygon([0,1,2,3]));r[1]&&i.AddPolygon(new JSM.BodyPolygon([1,5,6,2]));r[2]&&i.AddPolygon(new JSM.BodyPolygon([5,4,7,6]));r[3]&&i.AddPolygon(new JSM.BodyPolygon([4,0,3,7]));r[4]&&i.AddPolygon(new JSM.BodyPolygon([0,4,5,1]));r[5]&&i.AddPolygon(new JSM.BodyPolygon([3,2,6,7]));i.SetCubicTextureProjection(new JSM.Coord(-e,-t,-n),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return i};JSM.GenerateSegmentedRectangle=function(e,t,n,r){var i=new JSM.Body,s=e/2,o=t/2,u=e/n,a=t/r;(function(){var e,t,p;for(e=0;e<=r;e++)for(t=0;t<=n;t++)p=new JSM.Coord(t*u-s,e*a-o,0),i.AddVertex(new JSM.BodyVertex(p))})();(function(){var e,t,s,o,u,a;for(t=0;t<r;t++)for(e=0;e<n;e++)s=t*(n+1)+e,o=s+1,u=s+n+1,a=u+1,i.AddPolygon(new JSM.BodyPolygon([s,o,a,u]))})();return i};JSM.GenerateSegmentedCuboid=function(e,t,n,r){function i(e){var t=0;0<e&&e<=r&&(t=(r+1)*(r+1)+(e-1)*4*r);return t}function s(e){var t=[],n=i(e);if(0===e||e===r){for(e=0;e<=r;e++)t.push(n+e);for(e=1;e<=r;e++)t.push(n+(e+1)*r+e);for(e=r-1;0<=e;e--)t.push(n+(r+1)*r+e);for(e=r-1;0<e;e--)t.push(n+e*(r+1))}else if(0<e&&e<r){for(e=0;e<=r;e++)t.push(n+e);for(e=1;e<r;e++)t.push(n+r+2*e);for(e=r;0<=e;e--)t.push(n+3*r+e-1);for(e=r-1;0<e;e--)t.push(n+r+2*e-1)}return t}function o(e){var t,n,i=e*d;if(0===e||e===r)for(e=0;e<=r;e++)for(t=0;t<=r;t++)n=new JSM.Coord(t*h-f,e*p-l,i-c),a.AddVertex(new JSM.BodyVertex(n));else if(0<e&&e<r)for(e=0;e<=r;e++)for(t=0;t<=r;t++)if(0===e||e===r||0===t||t===r)n=new JSM.Coord(t*h-f,e*p-l,i-c),a.AddVertex(new JSM.BodyVertex(n))}function u(e){var t,n,s,o,u,f;if(0===e||e===r){var l=i(e);for(t=0;t<r;t++)for(n=0;n<r;n++)s=l+t*(r+1)+n,o=s+1,u=s+r+1,f=u+1,0===e?a.AddPolygon(new JSM.BodyPolygon([s,u,f,o])):a.AddPolygon(new JSM.BodyPolygon([s,o,f,u]))}if(0<e&&e<=r){n=v[e-1];e=v[e];for(t=0;t<4*r;t++)s=n[t],u=e[t],t<4*r-1?(o=n[t+1],f=e[t+1]):(o=n[0],f=e[0]),a.AddPolygon(new JSM.BodyPolygon([s,o,f,u]))}}var a=new JSM.Body,f=e/2,l=t/2,c=n/2,h=e/r,p=t/r,d=n/r;for(e=0;e<=r;e++)o(e);var v=[];for(e=0;e<=r;e++)v.push(s(e));for(e=0;e<=r;e++)u(e);return a};JSM.GenerateCircle=function(e,t){var n=new JSM.Body,r=JSM.GenerateCirclePoints(e,t),i;for(i=0;i<r.length;i++)n.AddVertex(new JSM.BodyVertex(r[i]));r=new JSM.BodyPolygon([]);for(i=0;i<t;i++)r.AddVertexIndex(i);n.AddPolygon(r);n.SetCylindricalTextureProjection(new JSM.Coord(0,0,0),e,new JSM.Coord(1,0,0),new JSM.Coord(0,0,1));return n};JSM.GenerateSphere=function(e,t,n){var r=new JSM.Body,i=2*t,s=r.AddVertex(new JSM.BodyVertex(JSM.SphericalToCartesian(e,0,0))),o=Math.PI/t,u=o,a,f,l;for(a=1;a<t;a++){for(f=l=0;f<i;f++)r.AddVertex(new JSM.BodyVertex(JSM.SphericalToCartesian(e,u,l))),l+=o;u+=o}e=r.AddVertex(new JSM.BodyVertex(JSM.SphericalToCartesian(-e,0,0)));var c,h;for(a=1;a<=t;a++)if(1===a){o=1;for(f=0;f<i;f++)u=o+f,l=u+1,f===i-1&&(l=o),u=new JSM.BodyPolygon([u,l,s]),n&&u.SetCurveGroup(0),r.AddPolygon(u)}else if(a<t){o=(a-1)*i+1;for(f=0;f<i;f++)u=o+f,l=u+1,c=u-i,h=c+1,f===i-1&&(l=o,h=o-i),u=new JSM.BodyPolygon([u,l,h,c]),n&&u.SetCurveGroup(0),r.AddPolygon(u)}else if(a===t){o=(a-2)*i+1;for(f=0;f<i;f++)u=o+f,l=u+1,f===i-1&&(l=o),u=new JSM.BodyPolygon([u,e,l]),n&&u.SetCurveGroup(0),r.AddPolygon(u)}r.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return r};JSM.GenerateTriangulatedSphere=function(e,t,n){var r;r=new JSM.Body;var i=(1+Math.sqrt(5))/2;JSM.AddVertexToBody(r,0,1,+i);JSM.AddVertexToBody(r,0,1,-i);JSM.AddVertexToBody(r,0,-1,+i);JSM.AddVertexToBody(r,0,-1,-i);JSM.AddVertexToBody(r,1,+i,0);JSM.AddVertexToBody(r,1,-i,0);JSM.AddVertexToBody(r,-1,+i,0);JSM.AddVertexToBody(r,-1,-i,0);JSM.AddVertexToBody(r,+i,0,1);JSM.AddVertexToBody(r,-i,0,1);JSM.AddVertexToBody(r,+i,0,-1);JSM.AddVertexToBody(r,-i,0,-1);JSM.AddPolygonToBody(r,[0,2,8]);JSM.AddPolygonToBody(r,[0,4,6]);JSM.AddPolygonToBody(r,[0,6,9]);JSM.AddPolygonToBody(r,[0,8,4]);JSM.AddPolygonToBody(r,[0,9,2]);JSM.AddPolygonToBody(r,[1,3,11]);JSM.AddPolygonToBody(r,[1,4,10]);JSM.AddPolygonToBody(r,[1,6,4]);JSM.AddPolygonToBody(r,[1,10,3]);JSM.AddPolygonToBody(r,[1,11,6]);JSM.AddPolygonToBody(r,[2,5,8]);JSM.AddPolygonToBody(r,[2,7,5]);JSM.AddPolygonToBody(r,[2,9,7]);JSM.AddPolygonToBody(r,[3,5,7]);JSM.AddPolygonToBody(r,[3,7,11]);JSM.AddPolygonToBody(r,[3,10,5]);JSM.AddPolygonToBody(r,[4,8,10]);JSM.AddPolygonToBody(r,[6,11,9]);JSM.AddPolygonToBody(r,[5,10,8]);JSM.AddPolygonToBody(r,[7,9,11]);for(var i=JSM.VectorLength(r.GetVertexPosition(0)),s=e/i,o,u,i=0;i<r.VertexCount();i++)u=r.GetVertex(i),u.SetPosition(JSM.VectorMultiply(u.GetPosition(),s));for(var a,f,l,c,s=0;s<t;s++){o=r;r=new JSM.Body;u=JSM.CalculateAdjacencyInfo(o);for(i=0;i<u.verts.length;i++)a=o.GetVertexPosition(i),JSM.AddVertexToBody(r,a.x,a.y,a.z);a=[];for(i=0;i<u.edges.length;i++)f=u.edges[i],f=JSM.MidCoord(o.GetVertexPosition(f.vert1),o.GetVertexPosition(f.vert2)),f=JSM.VectorMultiply(JSM.VectorNormalize(f),e),a.push(r.AddVertex(new JSM.BodyVertex(f)));for(i=0;i<u.pgons.length;i++){f=u.pgons[i];l=[];for(o=0;o<f.pedges.length;o++)c=f.pedges[o],l.push(JSM.GetPolyEdgeStartVertex(c,u)),l.push(a[c.index]);JSM.AddPolygonToBody(r,[l[0],l[1],l[5]]);JSM.AddPolygonToBody(r,[l[1],l[2],l[3]]);JSM.AddPolygonToBody(r,[l[3],l[4],l[5]]);JSM.AddPolygonToBody(r,[l[1],l[3],l[5]])}}if(n)for(i=0;i<r.PolygonCount();i++)r.GetPolygon(i).SetCurveGroup(0);r.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return r};JSM.GenerateCylinder=function(e,t,n,r,i){var s=new JSM.Body,o=2*Math.PI,u=2*Math.PI/n,a;for(a=0;a<n;a++)s.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(e,t/2,o))),s.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(e,-t/2,o))),o-=u;for(a=0;a<n;a++)o=2*a,u=o+2,a===n-1&&(u=0),o=new JSM.BodyPolygon([o,u,u+1,o+1]),i&&o.SetCurveGroup(0),s.AddPolygon(o);if(r){r=new JSM.BodyPolygon([]);i=new JSM.BodyPolygon([]);for(a=0;a<n;a++)r.AddVertexIndex(2*(n-a-1)),i.AddVertexIndex(2*a+1);s.AddPolygon(r);s.AddPolygon(i)}s.SetCylindricalTextureProjection(new JSM.Coord(0,0,-(t/2)),e,new JSM.Coord(1,0,0),new JSM.Coord(0,0,1));return s};JSM.GeneratePie=function(e,t,n,r,i,s){var o=new JSM.Body,u=n,a=n/(r-1);o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(0,t/2,0)));o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(0,-t/2,0)));for(n=0;n<r;n++)o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(e,t/2,u))),o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(e,-t/2,u))),u-=a;for(n=0;n<=r;n++)u=2*n,a=u+2,n===r&&(a=0),u=new JSM.BodyPolygon([u,a,a+1,u+1]),s&&0<n&&n<r&&u.SetCurveGroup(0),o.AddPolygon(u);if(i){i=new JSM.BodyPolygon([]);s=new JSM.BodyPolygon([]);for(n=0;n<=r;n++)i.AddVertexIndex(2*(r-n)),s.AddVertexIndex(2*n+1);o.AddPolygon(i);o.AddPolygon(s)}o.SetCylindricalTextureProjection(new JSM.Coord(0,0,-(t/2)),e,new JSM.Coord(1,0,0),new JSM.Coord(0,0,1));return o};JSM.GenerateCone=function(e,t,n,r,i,s){var o=new JSM.Body,u=JSM.IsZero(e),a=JSM.IsZero(t),f=2*Math.PI,l=2*Math.PI/r;u&&o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(0,n/2,0)));var c;for(c=0;c<r;c++)u||o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(e,n/2,f))),a||o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(t,-n/2,f))),f-=l;a&&o.AddVertex(new JSM.BodyVertex(JSM.CylindricalToCartesian(0,-n/2,0)));for(c=0;c<r;c++)u?(f=c+1,l=f+1,c===r-1&&(l=1),f=new JSM.BodyPolygon([0,l,f])):a?(f=c,l=f+1,c===r-1&&(l=0),f=new JSM.BodyPolygon([f,l,r])):(f=2*c,l=f+2,c===r-1&&(l=0),f=new JSM.BodyPolygon([f,l,l+1,f+1])),s&&f.SetCurveGroup(0),o.AddPolygon(f);if(i)if(u){s=new JSM.BodyPolygon([]);for(c=0;c<r;c++)s.AddVertexIndex(c+1);o.AddPolygon(s)}else if(a){i=new JSM.BodyPolygon([]);for(c=0;c<r;c++)i.AddVertexIndex(r-c-1);o.AddPolygon(i)}else{i=new JSM.BodyPolygon([]);s=new JSM.BodyPolygon([]);for(c=0;c<r;c++)i.AddVertexIndex(2*(r-c-1)),s.AddVertexIndex(2*c+1);o.AddPolygon(i);o.AddPolygon(s)}o.SetCylindricalTextureProjection(new JSM.Coord(0,0,-(n/2)),(e+t)/2,new JSM.Coord(1,0,0),new JSM.Coord(0,0,1));return o};JSM.GeneratePrism=function(e,t,n,r){var i=new JSM.Body,s=e.length,o;for(o=0;o<s;o++)i.AddVertex(new JSM.BodyVertex(e[o])),i.AddVertex(new JSM.BodyVertex(JSM.CoordOffset(e[o],t,n)));var u;for(o=0;o<s;o++)n=2*o,u=n+2,o===s-1&&(u=0),i.AddPolygon(new JSM.BodyPolygon([n,u,u+1,n+1]));if(r){r=new JSM.BodyPolygon([]);n=new JSM.BodyPolygon([]);for(o=0;o<s;o++)r.AddVertexIndex(2*o+1),n.AddVertexIndex(2*(s-o-1));i.AddPolygon(r);i.AddPolygon(n)}s=JSM.VectorNormalize(JSM.CoordSub(e[1],e[0]));e=new JSM.Coord(e[0].x,e[0].y,e[0].z);t=JSM.VectorNormalize(t);s=JSM.VectorCross(t,s);o=JSM.VectorCross(s,t);i.SetCubicTextureProjection(e,o,s,t);return i};JSM.GenerateCurvedPrism=function(e,t,n,r,i){n=JSM.GeneratePrism(e,n,r,i);if(void 0===t||null===t||e.length!=t.length)return n;for(r=0;r<e.length;r++)i=t[r],n.GetPolygon(r).SetCurveGroup(i);return n};JSM.GeneratePrismWithHole=function(e,t,n,r){function i(){var t=0,n=[],r;for(r=0;r<e.length;r++)null===e[r]&&(t+=1),n.push(r-t);var t=JSM.CreatePolygonWithHole(e),i=new JSM.Polygon,o;for(r=0;r<t.length;r++)o=e[t[r]],i.AddVertex(o.x,o.y,o.z);o=JSM.PolygonTriangulate(i);var u,a,l;for(r=0;r<o.length;r++){u=o[r];a=new JSM.BodyPolygon([]);l=new JSM.BodyPolygon([]);for(i=0;3>i;i++)a.AddVertexIndex(2*n[t[u[i]]]+1),l.AddVertexIndex(2*n[t[u[3-i-1]]]);s.AddPolygon(a);s.AddPolygon(l)}}var s=new JSM.Body;(function(){var r;for(r=0;r<e.length;r++)null!==e[r]&&(s.AddVertex(new JSM.BodyVertex(e[r])),s.AddVertex(new JSM.BodyVertex(JSM.CoordOffset(e[r],t,n))))})();(function(){var t=0,n=[];n.push(0);var r;for(r=0;r<e.length;r++)null===e[r]&&(n.push(r-t),t+=1);n.push(r-t);for(t=0;t<n.length-1;t++){var i=r=void 0,o=void 0,u=n[t],a=n[t+1];for(r=u;r<a;r++)i=2*r,o=i+2,r===a-1&&(o=2*u),s.AddPolygon(new JSM.BodyPolygon([i,o,o+1,i+1]))}})();r&&i();var o=JSM.VectorNormalize(JSM.CoordSub(e[1],e[0]));r=new JSM.Coord(e[0].x,e[0].y,e[0].z);var u=JSM.VectorNormalize(t),o=JSM.VectorCross(u,o),a=JSM.VectorCross(o,u);s.SetCubicTextureProjection(r,a,o,u);return s};JSM.GenerateCurvedPrismWithHole=function(e,t,n,r,i){n=JSM.GeneratePrismWithHole(e,n,r,i);if(void 0===t||null===t||e.length!=t.length)return n;r=0;var s;for(i=0;i<e.length;i++)s=t[i],null!==s&&(n.GetPolygon(r).SetCurveGroup(s),r++);return n};JSM.GeneratePrismShell=function(e,t,n,r,i){var s=new JSM.Body,o=e.length,u;for(u=0;u<o;u++)s.AddVertex(new JSM.BodyVertex(e[u]));u=new JSM.Polygon;u.vertices=e;r=JSM.OffsetPolygonContour(u,r).vertices;for(u=0;u<o;u++)s.AddVertex(new JSM.BodyVertex(r[u]));var a;for(u=0;u<o;u++)a=JSM.CoordOffset(e[u],t,n),s.AddVertex(new JSM.BodyVertex(a));for(u=0;u<o;u++)a=JSM.CoordOffset(r[u],t,n),s.AddVertex(new JSM.BodyVertex(a));var f;for(u=0;u<o;u++)n=u,r=n+1,a=n+2*o,f=a+1,u===o-1&&(r=0,f=2*o),s.AddPolygon(new JSM.BodyPolygon([n,r,f,a])),s.AddPolygon(new JSM.BodyPolygon([n+o,a+o,f+o,r+o]));if(i)for(u=0;u<o;u++)n=u,r=n+1,a=u+o,f=a+1,u===o-1&&(r=0,f=o),s.AddPolygon(new JSM.BodyPolygon([n,a,f,r])),s.AddPolygon(new JSM.BodyPolygon([n+2*o,r+2*o,f+2*o,a+2*o]));i=JSM.VectorNormalize(JSM.CoordSub(e[1],e[0]));e=new JSM.Coord(e[0].x,e[0].y,e[0].z);t=JSM.VectorNormalize(t);i=JSM.VectorCross(t,i);o=JSM.VectorCross(i,t);s.SetCubicTextureProjection(e,o,i,t);return s};JSM.GenerateCylinderShell=function(e,t,n,r,i,s){for(var o=new JSM.Vector(0,0,1),u=-t/2,a=[],f=2*Math.PI/r,l,c=0,c=0;c<r;c++)l=c*f,l=JSM.PolarToCartesian(e,l),a.push(new JSM.Coord(l.x,l.y,u));e=JSM.GeneratePrismShell(a,o,t,n,i);if(s)for(s=0;s<r;s++)e.GetPolygon(2*s).SetCurveGroup(0),e.GetPolygon(2*s+1).SetCurveGroup(0);return e};JSM.GenerateLineShell=function(e,t,n,r,i,s){var o=new JSM.Body,u=e.length,a=[],f,l,c,h,p,d;for(f=0;f<u;f++)0===f||f===u-1?p=Math.PI/2:(l=f-1,c=f,h=f+1,d=JSM.CoordSub(e[h],e[c]),p=JSM.CoordSub(e[l],e[c]),p=JSM.GetVectorsAngle(d,p)/2,"Clockwise"===JSM.CoordTurnType(e[l],e[c],e[h],t)&&(p=Math.PI-p)),a.push(p);d=new JSM.Vector(0,0,1);l=[];var v;for(f=0;f<u;f++)c=f,f===u-1?v=JSM.CoordSub(e[c-1],e[c]):(h=(f+1)%u,v=JSM.CoordSub(e[c],e[h])),p=a[c],h=r/Math.sin(p),h=JSM.CoordOffset(e[c],v,h),h=JSM.CoordRotate(h,d,-(Math.PI-p),e[c]),l.push(h);for(f=0;f<u;f++)o.AddVertex(new JSM.BodyVertex(e[f]));for(f=0;f<u;f++)o.AddVertex(new JSM.BodyVertex(l[f]));for(f=0;f<u;f++)c=JSM.CoordOffset(e[f],t,n),o.AddVertex(new JSM.BodyVertex(c));for(f=0;f<u;f++)c=JSM.CoordOffset(l[f],t,n),o.AddVertex(new JSM.BodyVertex(c));for(f=0;f<u-1;f++)c=f,h=c+1,n=c+2*u,r=n+1,o.AddPolygon(new JSM.BodyPolygon([c,h,r,n])),o.AddPolygon(new JSM.BodyPolygon([c+u,n+u,r+u,h+u]));i&&(c=0,o.AddPolygon(new JSM.BodyPolygon([c,c+2*u,c+3*u,c+u])),c=u-1,o.AddPolygon(new JSM.BodyPolygon([c,c+u,c+3*u,c+2*u])));if(s)for(f=0;f<u-1;f++)c=f,h=c+1,n=f+u,r=n+1,o.AddPolygon(new JSM.BodyPolygon([c,n,r,h])),o.AddPolygon(new JSM.BodyPolygon([c+2*u,h+2*u,r+2*u,n+2*u]));i=JSM.VectorNormalize(JSM.CoordSub(e[1],e[0]));e=new JSM.Coord(e[0].x,e[0].y,e[0].z);t=JSM.VectorNormalize(t);i=JSM.VectorCross(t,i);s=JSM.VectorCross(i,t);o.SetCubicTextureProjection(e,s,i,t);return o};JSM.GenerateTorus=function(e,t,n,r,i){var s=new JSM.Body,o=0,u=2*Math.PI/r,a=[],f,l;for(f=0;f<r;f++)l=JSM.PolarToCartesian(t,o),l=new JSM.Coord(l.x+e,0,l.y),a.push(l),o+=u;t=new JSM.Coord(0,0,1);o=new JSM.Coord(0,0,0);u=2*Math.PI/n;for(f=0;f<n;f++)for(e=0;e<r;e++)l=JSM.CoordRotate(a[e],t,f*u,o),s.AddVertex(new JSM.BodyVertex(l));for(f=0;f<n;f++){new JSM.BodyPolygon([]);for(e=0;e<r;e++)u=f*r+e,t=u+r,a=u+1,o=t+1,e===r-1&&(a=f*r,o=(f+1)*r),f===n-1&&(t=e,o=e+1,e===r-1&&(o=0)),u=new JSM.BodyPolygon([u,t,o,a]),i&&u.SetCurveGroup(0),s.AddPolygon(u)}s.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return s};JSM.GeneratePolyTorus=function(e,t,n,r){var i=new JSM.Body,s=e.length,o=2*Math.PI/s,u=[],a;for(a=0;a<s;a++)o=e[a],o=new JSM.Coord(o.x+t,0,o.y),u.push(o);t=new JSM.Coord(0,0,1);var f=new JSM.Coord(0,0,0),o=2*Math.PI/n,l;for(a=0;a<n;a++)for(e=0;e<s;e++)l=JSM.CoordRotate(u[e],t,a*o,f),i.AddVertex(new JSM.BodyVertex(l));for(a=0;a<n;a++){new JSM.BodyPolygon([]);for(e=0;e<s;e++)u=a*s+e,t=u+s,o=u+1,f=t+1,e===s-1&&(o=a*s,f=(a+1)*s),a===n-1&&(t=e,f=e+1,e===s-1&&(f=0)),u=new JSM.BodyPolygon([u,t,f,o]),r&&u.SetCurveGroup(e),i.AddPolygon(u)}i.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return i};JSM.GenerateRuledFromSectors=function(e,t,n,r,i){var s=new JSM.Body,o=[],u=[];JSM.GetSectorSegmentation(e,n,o);JSM.GetSectorSegmentation(t,n,u);t=[];e=[];JSM.GetRuledMesh(o,u,r,t,e);for(r=0;r<t.length;r++)s.AddVertex(new JSM.BodyVertex(t[r]));for(r=0;r<e.length;r++)o=e[r],o=new JSM.BodyPolygon(o),i&&o.SetCurveGroup(0),s.AddPolygon(o);s.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return s};JSM.GenerateGrid=function(e,t,n,r,i){var s=new JSM.Sector(new JSM.Coord(0,0,0),new JSM.Coord(e,0,0));e=new JSM.Sector(new JSM.Coord(0,t,0),new JSM.Coord(e,t,0));return JSM.GenerateRuledFromSectors(s,e,n,r,i)};JSM.GenerateSquareGrid=function(e,t,n){return JSM.GenerateGrid(e,e,t,t,n)};JSM.GenerateRuledFromSectorsWithHeight=function(e,t,n,r,i,s){var o=new JSM.Body,u=[],a=[];JSM.GetSectorSegmentation(e,n,u);JSM.GetSectorSegmentation(t,n,a);t=[];e=[];JSM.GetRuledMesh(u,a,r,t,e);for(u=0;u<t.length;u++)o.AddVertex(new JSM.BodyVertex(t[u]));for(var f,u=0;u<e.length;u++)f=e[u],f=new JSM.BodyPolygon(f),i&&f.SetCurveGroup(0),o.AddPolygon(f);a=o.VertexCount();for(u=0;u<t.length;u++)f=t[u],f=new JSM.Coord(f.x,f.y,f.z),f.z-=s,o.AddVertex(new JSM.BodyVertex(f));for(u=0;u<e.length;u++){f=e[u];t=[];for(s=f.length-1;0<=s;s--)t.push(f[s]+a);f=new JSM.BodyPolygon(t);i&&f.SetCurveGroup(0);o.AddPolygon(f)}for(u=0;u<r;u++)i=u+a,s=i+1,e=i-a,t=e+1,f=new JSM.BodyPolygon([i,s,t,e]),o.AddPolygon(f);for(u=0;u<r;u++)i=u+n*(r+1)+a,s=i+1,e=i-a,t=e+1,f=new JSM.BodyPolygon([i,e,t,s]),o.AddPolygon(f);for(u=0;u<n;u++)i=u*(r+1)+a,s=i+r+1,e=i-a,t=e+r+1,f=new JSM.BodyPolygon([i,e,t,s]),o.AddPolygon(f);for(u=0;u<n;u++)i=(u+1)*r+u+a,s=i+r+1,e=i-a,t=e+r+1,f=new JSM.BodyPolygon([i,s,t,e]),o.AddPolygon(f);o.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return o};JSM.GenerateRuledFromCoords=function(e,t,n,r){var i=new JSM.Body,s=[],o=[];JSM.GetRuledMesh(e,t,n,s,o);for(e=0;e<s.length;e++)i.AddVertex(new JSM.BodyVertex(s[e]));for(e=0;e<o.length;e++)s=o[e],s=new JSM.BodyPolygon(s),r&&s.SetCurveGroup(0),i.AddPolygon(s);i.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return i};JSM.GenerateRevolved=function(e,t,n,r,i,s){var o=new JSM.Body,u=JSM.IsEqual(n,2*Math.PI),a=e.length,f=n/r;n=JSM.CoordSub(t.end,t.beg);var l,c,h;for(l=0;l<a;l++)for(c=0;c<=r;c++)u&&c===r||(h=JSM.CoordRotate(e[l],n,c*f,t.beg),o.AddVertex(new JSM.BodyVertex(h)));var p,d;for(l=0;l<a-1;l++)for(c=0;c<r;c++)f=l*(r+1)+c,h=f+r+1,p=f+1,d=h+1,u&&(f=l*r+c,h=f+r,p=f+1,d=h+1,c===r-1&&(p=l*r,d=(l+1)*r)),f=new JSM.BodyPolygon([f,p,d,h]),s&&f.SetCurveGroup(l),o.AddPolygon(f);if(u&&i){i=new JSM.BodyPolygon([]);s=new JSM.BodyPolygon([]);for(l=0;l<r;l++)i.AddVertexIndex(r*(a-1)+l),s.AddVertexIndex(r-l-1);o.AddPolygon(i);o.AddPolygon(s)}i=new JSM.Line(t.beg,JSM.VectorNormalize(n));for(l=r=0;l<a;l++)s=JSM.ProjectCoordToLine(e[l],i),r+=JSM.CoordDistance(s,e[l]);r/=a;t=new JSM.Coord(t.beg.x,t.beg.y,t.beg.z);a=JSM.VectorNormalize(n);n=new JSM.Line(t,n);n=JSM.ProjectCoordToLine(e[0],n);e=JSM.VectorNormalize(JSM.CoordSub(e[0],n));o.SetCylindricalTextureProjection(t,r,e,a);return o};JSM.GenerateTube=function(e,t){var n=new JSM.Body,r=e.length,i=e[0].length,s,o;for(o=0;o<i;o++)for(s=0;s<r;s++)n.AddVertex(new JSM.BodyVertex(e[s][o]));var u,a;for(o=0;o<r-1;o++)for(s=0;s<i;s++)u=o+r*s,a=u+r,s===i-1&&(a=o),n.AddPolygon(new JSM.BodyPolygon([u,a,a+1,u+1]));if(t){o=new JSM.BodyPolygon([]);u=new JSM.BodyPolygon([]);for(s=0;s<i;s++)o.AddVertexIndex(r*s+r-1);for(s=i-1;0<=s;s--)u.AddVertexIndex(r*s);n.AddPolygon(o);n.AddPolygon(u)}n.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return n};JSM.GenerateFunctionSurface=function(e,t,n,r,i){var s=new JSM.Sector(new JSM.Coord(t.x,t.y,0),new JSM.Coord(n.x,t.y,0));t=new JSM.Sector(new JSM.Coord(t.x,n.y,0),new JSM.Coord(n.x,n.y,0));r=JSM.GenerateRuledFromSectors(s,t,r,r,i);for(i=0;i<r.VertexCount();i++)s=r.GetVertexPosition(i),s.z=e(s.x,s.y);r.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return r};JSM.GenerateFunctionSurfaceSolid=function(e,t,n,r,i,s){var o=new JSM.Sector(new JSM.Coord(n.x,t.y,0),new JSM.Coord(t.x,t.y,0));t=new JSM.Sector(new JSM.Coord(n.x,n.y,0),new JSM.Coord(t.x,n.y,0));i=JSM.GenerateRuledFromSectorsWithHeight(o,t,r,r,i,s);o=(r+1)*(r+1);for(r=0;r<o;r++)s=i.GetVertexPosition(r),s.z=e(s.x,s.y);i.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return i};JSM.Camera=function(e,t,n,r,i,s){this.eye=JSM.ValueOrDefault(e,new JSM.Coord(1,1,1));this.center=JSM.ValueOrDefault(t,new JSM.Coord(0,0,0));this.up=JSM.ValueOrDefault(n,new JSM.Vector(0,0,1));this.fieldOfView=JSM.ValueOrDefault(r,45);this.nearClippingPlane=JSM.ValueOrDefault(i,.1);this.farClippingPlane=JSM.ValueOrDefault(s,1e3)};JSM.Camera.prototype.Set=function(e,t,n,r,i,s){this.eye=e;this.center=t;this.up=n;this.fieldOfView=JSM.ValueOrDefault(r,45);this.nearClippingPlane=JSM.ValueOrDefault(i,.1);this.farClippingPlane=JSM.ValueOrDefault(s,1e3)};JSM.Camera.prototype.Clone=function(){var e=new JSM.Camera;e.eye=this.eye;e.center=this.center;e.up=this.up;e.fieldOfView=this.fieldOfView;e.nearClippingPlane=this.nearClippingPlane;e.farClippingPlane=this.farClippingPlane;return e};JSM.ExplodeBodyToTriangles=function(e,t,n){if(void 0===n||null===n)return!1;var r=JSM.CalculateBodyVertexNormals(e),i,s,o=!1;if(void 0!==t&&null!==t)for(i=0;i<t.Count();i++)if(null!==t.GetMaterial(i).texture){o=!0;break}var u,a;if(o){u=JSM.CalculateBodyTextureCoords(e);for(i=0;i<u.length;i++)if(s=e.GetPolygon(i),s.HasMaterialIndex()){a=t.GetMaterial(s.GetMaterialIndex());for(s=0;s<u[i].length;s++)u[i][s].x/=a.textureWidth,u[i][s].y/=-a.textureHeight}}var f=!0;void 0!==n.hasConvexPolygons&&null!==n.hasConvexPolygons&&(f=n.hasConvexPolygons);(function(e,t,n,r,i){function s(s,u){var a=t.GetMaterial(u);if(void 0!==i.onGeometryStart&&null!==i.onGeometryStart)i.onGeometryStart(a);var l;for(l=0;l<s.length;l++){var c=s[l],h=e.GetPolygon(c),p=h.VertexIndexCount();if(!(3>p)){var v=void 0,m=void 0,y=void 0,w=void 0,E=void 0,S=void 0,x=void 0,T=void 0,N=void 0,C=void 0;if(3==p||f)for(C=0;C<p-2;C++){if(v=e.GetVertex(h.GetVertexIndex(0)).position,m=e.GetVertex(h.GetVertexIndex((C+1)%p)).position,y=e.GetVertex(h.GetVertexIndex((C+2)%p)).position,w=n[c][0],E=n[c][(C+1)%p],S=n[c][(C+2)%p],N=T=x=null,o&&(x=r[c][0],T=r[c][(C+1)%p],N=r[c][(C+2)%p]),void 0!==i.onTriangle&&null!==i.onTriangle)i.onTriangle(v,m,y,w,E,S,x,T,N)}else{v=new JSM.Polygon;m=void 0;for(C=0;C<p;C++)m=e.GetVertex(h.vertices[C]),v.AddVertex(m.position.x,m.position.y,m.position.z);for(var C=JSM.CalculateBodyPolygonNormal(e,c),p=JSM.PolygonTriangulate(v,C),L=void 0,C=0;C<p.length;C++)if(L=p[C],v=e.GetVertex(h.GetVertexIndex(L[0])).position,m=e.GetVertex(h.GetVertexIndex(L[1])).position,y=e.GetVertex(h.GetVertexIndex(L[2])).position,w=n[c][L[0]],E=n[c][L[1]],S=n[c][L[2]],N=T=x=null,o&&(x=r[c][L[0]],T=r[c][L[1]],N=r[c][L[2]]),void 0!==i.onTriangle&&null!==i.onTriangle)i.onTriangle(v,m,y,w,E,S,x,T,N)}}}if(void 0!==i.onGeometryEnd&&null!==i.onGeometryEnd)i.onGeometryEnd(a)}var u,a=[],l=[];if(void 0===t||null===t)t=new JSM.Materials;for(u=0;u<t.Count();u++)a[u]=[];var c;for(u=0;u<e.PolygonCount();u++)c=e.GetPolygon(u),c.HasMaterialIndex()?(c=c.GetMaterialIndex(),a[c].push(u)):l.push(u);for(u=0;u<a.length;u++)c=a[u],0!==c.length&&s(c,u);0!==l.length&&s(l,-1)})(e,t,r,u,n);return!0};JSM.ExportBodyContentToStl=function(e,t,n){function r(e){o+=e+"\n"}function i(e,t,n,i){r("  facet normal "+e.x+" "+e.y+" "+e.z);r("     outer loop");r("            vertex "+t.x+" "+t.y+" "+t.z);r("           vertex "+n.x+" "+n.y+" "+n.z);r("           vertex "+i.x+" "+i.y+" "+i.z);r("       endloop");r("   endfacet")}function s(t){var r=e.GetPolygon(t),s=r.VertexIndexCount();if(!(3>s)){var o,u,f,l=null;if(3===s)l=JSM.CalculateBodyPolygonNormal(e,t),o=e.GetVertex(r.GetVertexIndex(0)).position,u=e.GetVertex(r.GetVertexIndex(1)).position,f=e.GetVertex(r.GetVertexIndex(2)).position,i(l,o,u,f);else if(o=!0,void 0!==n&&n&&(o=!1),l=JSM.CalculateBodyPolygonNormal(e,t),o){o=new JSM.Polygon;for(t=0;t<s;t++)u=e.GetVertex(r.vertices[t]),o.AddVertex(u.position.x,u.position.y,u.position.z);s=JSM.PolygonTriangulate(o,l);for(t=0;t<s.length;t++)f=s[t],o=e.GetVertex(r.GetVertexIndex(f[0])).position,u=e.GetVertex(r.GetVertexIndex(f[1])).position,f=e.GetVertex(r.GetVertexIndex(f[2])).position,i(l,o,u,f)}else for(t=0;t<s-2;t++)o=e.GetVertex(r.GetVertexIndex(0)).position,u=e.GetVertex(r.GetVertexIndex((t+1)%s)).position,f=e.GetVertex(r.GetVertexIndex((t+2)%s)).position,i(l,o,u,f)}}var o="";for(t=0;t<e.PolygonCount();t++)s(t);return o};JSM.ExportBodyToStl=function(e,t,n){e=""+("solid "+t+"\n")+JSM.ExportBodyContentToStl(e,t,n);return e+="endsolid "+t+"\n"};JSM.ExportModelToStl=function(e,t,n){var r;r=""+("solid "+t+"\n");var i,s;for(i=0;i<e.BodyCount();i++)s=e.GetBody(i),r+=JSM.ExportBodyContentToStl(s,t+(i+1).toString(),n);return r+("endsolid "+t+"\n")};JSM.ExportBodyContentToObj=function(e,t,n){function r(t){t=e.GetVertex(t).position;o+="v "+t.x+" "+t.y+" "+t.z+"\n"}function i(t){t=JSM.CalculateBodyPolygonNormal(e,t);o+="vn "+t.x+" "+t.y+" "+t.z+"\n"}function s(r){var i=e.GetPolygon(r);o+="f ";var s;for(s=0;s<i.VertexIndexCount();s++){var u=t+i.GetVertexIndex(s)+1+"//"+(n+r+1)+" ";o+=u}o+="\n"}var o="",u;for(u=0;u<e.VertexCount();u++)r(u);for(u=0;u<e.PolygonCount();u++)i(u);for(u=0;u<e.PolygonCount();u++)s(u);return o};JSM.ExportBodyToObj=function(e){return JSM.ExportBodyContentToObj(e,0,0)};JSM.ExportModelToObj=function(e){var t="",n=0,r=0,i,s;for(i=0;i<e.BodyCount();i++)s=e.GetBody(i),t+=JSM.ExportBodyContentToObj(s,n,r),n+=s.VertexCount(),r+=s.PolygonCount();return t};JSM.ExportMaterialsToGdl=function(e){function t(e,t){var r=JSM.HexColorToRGBComponents(e.diffuse);n+='define material "material'+t+'" 2, '+(r[0]/255+","+r[1]/255+","+r[2]/255)+" ! "+t+"\n"}var n="",r=!1;void 0!==e&&null!==e&&(r=!0);if(r){t(e.GetDefaultMaterial(),1);for(r=0;r<e.Count();r++)t(e.GetMaterial(r),r+2)}return n};JSM.ExportBodyGeometryToGdl=function(e,t){function n(e){if(200<e.length){var t=0,n,r;for(n=0;n<e.length;n++)r=e[n],u+=r,t++,200<t&&","==r&&(u+="\n",t=0)}else u+=e}function r(e){n(e+"\n")}function i(t){var n=e.GetVertex(t).position;r("vert "+n.x+", "+n.y+", "+n.z+" ! "+(t+1))}function s(t){var n=a.edges[t],i=0;-1!=n.pgon1&&-1!=n.pgon2&&e.GetPolygon(n.pgon1).HasCurveGroup()&&e.GetPolygon(n.pgon2).HasCurveGroup()&&e.GetPolygon(n.pgon1).GetCurveGroup()==e.GetPolygon(n.pgon2).GetCurveGroup()&&(i=2);r("edge "+(n.vert1+1)+", "+(n.vert2+1)+", -1, -1, "+i+" ! "+(t+1))}function o(i,s){var o=-1;t&&(o=e.GetPolygon(i).GetMaterialIndex()+2,o!=s&&r('set material "material'+o+'"'));var u=a.pgons[i],f=0;e.GetPolygon(i).HasCurveGroup()&&(f=2);n("pgon "+u.pedges.length+", 0, "+f+", ");var f="",l,h;for(l=0;l<u.pedges.length;l++)h=u.pedges[l],f=h.reverse?f+ -(h.index+1):f+(h.index+1),l<u.pedges.length-1&&(f+=", ");n(f);n(" ! "+(i+1));r("");return o}var u="";r("base");var a=JSM.CalculateAdjacencyInfo(e),f;for(f=0;f<a.verts.length;f++)i(f);for(f=0;f<a.edges.length;f++)s(f);var l=-1;for(f=0;f<a.pgons.length;f++)l=o(f,l);r("body -1");return u};JSM.ExportBodyToGdl=function(e,t){var n="",r=!1;void 0!==t&&null!==t&&(n+=JSM.ExportMaterialsToGdl(t),r=!0);return n+=JSM.ExportBodyGeometryToGdl(e,r)};JSM.ExportModelToGdl=function(e,t){var n="",r=!1;void 0!==t&&null!==t&&(n+=JSM.ExportMaterialsToGdl(t),r=!0);var i,s;for(i=0;i<e.BodyCount();i++)s=e.GetBody(i),n+=JSM.ExportBodyGeometryToGdl(s,r);return n};JSM.TriangleBody=function(e){this.name=e;this.vertices=[];this.normals=[];this.triangles=[]};JSM.TriangleBody.prototype.SetName=function(e){this.name=e};JSM.TriangleBody.prototype.GetName=function(){return this.name};JSM.TriangleBody.prototype.AddVertex=function(e,t,n){this.vertices.push(new JSM.Coord(e,t,n));return this.vertices.length-1};JSM.TriangleBody.prototype.GetVertex=function(e){return this.vertices[e]};JSM.TriangleBody.prototype.SetVertex=function(e,t,n,r){this.vertices[e]=new JSM.Coord(t,n,r)};JSM.TriangleBody.prototype.VertexCount=function(){return this.vertices.length};JSM.TriangleBody.prototype.AddNormal=function(e,t,n){this.normals.push(new JSM.Coord(e,t,n));return this.normals.length-1};JSM.TriangleBody.prototype.GetNormal=function(e){return this.normals[e]};JSM.TriangleBody.prototype.NormalCount=function(){return this.normals.length};JSM.TriangleBody.prototype.AddTriangle=function(e,t,n,r,i,s,o,u,a,f,l){this.triangles.push({v0:e,v1:t,v2:n,n0:r,n1:i,n2:s,u0:o,u1:u,u2:a,mat:f,curve:l});return this.triangles.length-1};JSM.TriangleBody.prototype.GetTriangle=function(e){return this.triangles[e]};JSM.TriangleBody.prototype.TriangleCount=function(){return this.triangles.length};JSM.TriangleBody.prototype.Finalize=function(e){function t(t,n,r,s){function o(e,t,n,r,i){var s=new JSM.Vector(0,0,0),o=0;n=e.GetTriangle(n);t=i[t];var u,a;for(i=0;i<t.length;i++)u=t[i],a=e.GetTriangle(u),n.curve==a.curve&&(s=JSM.CoordAdd(s,r[u]),o+=1);s=JSM.VectorMultiply(s,1/o);s=JSM.VectorNormalize(s);return e.AddNormal(s.x,s.y,s.z)}var u=t.triangles[i];void 0===u.mat&&(u.mat=e.AddDefaultMaterial());if(void 0===u.n0||void 0===u.n1||void 0===u.n2)void 0===u.curve||0===u.curve?(n=r[i],t=t.AddNormal(n.x,n.y,n.z),u.n0=t,u.n1=t,u.n2=t):(u.n0=o(t,u.v0,n,r,s),u.n1=o(t,u.v1,n,r,s),u.n2=o(t,u.v2,n,r,s))}var n=[],r={},i;for(i=0;i<this.vertices.length;i++)r[i]=[];var s,o;for(i=0;i<this.triangles.length;i++)s=this.triangles[i],o=JSM.CalculateTriangleNormal(this.vertices[s.v0],this.vertices[s.v1],this.vertices[s.v2]),n.push(o),r[s.v0].push(i),r[s.v1].push(i),r[s.v2].push(i);for(i=0;i<this.triangles.length;i++)t(this,i,n,r)};JSM.TriangleBody.prototype.Clone=function(){var e=new JSM.TriangleBody(this.name),t,n;for(t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].Clone());for(t=0;t<this.normals.length;t++)e.normals.push(this.normals[t].Clone());for(t=0;t<this.triangles.length;t++)n=this.triangles[t],e.triangles.push({v0:n.v0,v1:n.v1,v2:n.v2,n0:n.n0,n1:n.n1,n2:n.n2,u0:n.u0,u1:n.u1,u2:n.u2,mat:n.mat,curve:n.curve});return e};JSM.TriangleModel=function(){this.materials=[];this.bodies=[];this.defaultMaterial=-1};JSM.TriangleModel.prototype.AddMaterial=function(e,t,n,r,i){this.materials.push({name:e,ambient:t,diffuse:n,specular:r,opacity:i});return this.materials.length-1};JSM.TriangleModel.prototype.GetMaterial=function(e){return this.materials[e]};JSM.TriangleModel.prototype.AddDefaultMaterial=function(){-1==this.defaultMaterial&&(this.materials.push({name:"Default",ambient:{r:.5,g:.5,b:.5},diffuse:{r:.5,g:.5,b:.5},specular:{r:.1,g:.1,b:.1},opacity:1}),this.defaultMaterial=this.materials.length-1);return this.defaultMaterial};JSM.TriangleModel.prototype.GetDefaultMaterialIndex=function(){return this.AddDefaultMaterial()};JSM.TriangleModel.prototype.MaterialCount=function(){return this.materials.length};JSM.TriangleModel.prototype.AddBody=function(e){this.bodies.push(e);return this.bodies.length-1};JSM.TriangleModel.prototype.AddBodyToIndex=function(e,t){this.bodies.splice(t,0,e);return t};JSM.TriangleModel.prototype.GetBody=function(e){return this.bodies[e]};JSM.TriangleModel.prototype.BodyCount=function(){return this.bodies.length};JSM.TriangleModel.prototype.GetBody=function(e){return this.bodies[e]};JSM.TriangleModel.prototype.Finalize=function(){var e,t;for(e=0;e<this.bodies.length;e++)t=this.bodies[e],t.Finalize(this)};JSM.BinaryReader=function(e,t){this.arrayBuffer=e;this.dataView=new DataView(e);this.isLittleEndian=t;this.position=0};JSM.BinaryReader.prototype.GetPosition=function(){return this.position};JSM.BinaryReader.prototype.GetByteLength=function(){return this.arrayBuffer.byteLength};JSM.BinaryReader.prototype.Skip=function(e){this.position+=e};JSM.BinaryReader.prototype.End=function(){return this.position>=this.arrayBuffer.byteLength};JSM.BinaryReader.prototype.ReadBoolean=function(){var e=this.dataView.getInt8(this.position,this.isLittleEndian);this.position+=1;return e?!0:!1};JSM.BinaryReader.prototype.ReadCharacter=function(){var e=this.dataView.getInt8(this.position,this.isLittleEndian);this.position+=1;return e};JSM.BinaryReader.prototype.ReadUnsignedCharacter=function(){var e=this.dataView.getUint8(this.position,this.isLittleEndian);this.position+=1;return e};JSM.BinaryReader.prototype.ReadInteger16=function(){var e=this.dataView.getInt16(this.position,this.isLittleEndian);this.position+=2;return e};JSM.BinaryReader.prototype.ReadUnsignedInteger16=function(){var e=this.dataView.getUint16(this.position,this.isLittleEndian);this.position+=2;return e};JSM.BinaryReader.prototype.ReadInteger32=function(){var e=this.dataView.getInt32(this.position,this.isLittleEndian);this.position+=4;return e};JSM.BinaryReader.prototype.ReadUnsignedInteger32=function(){var e=this.dataView.getUint32(this.position,this.isLittleEndian);this.position+=4;return e};JSM.BinaryReader.prototype.ReadFloat32=function(){var e=this.dataView.getFloat32(this.position,this.isLittleEndian);this.position+=4;return e};JSM.BinaryReader.prototype.ReadDouble64=function(){var e=this.dataView.getFloat64(this.position,this.isLittleEndian);this.position+=8;return e};JSM.GetArrayBufferFromURL=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="arraybuffer";n.onload=function(){var e=n.response;e&&t(e)};n.send(null)};JSM.GetArrayBufferFromFile=function(e,t){var n=new FileReader;n.onloadend=function(e){e.target.readyState==FileReader.DONE&&t(e.target.result)};n.readAsArrayBuffer(e)};JSM.GetStringBufferFromURL=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="text";n.onload=function(){var e=n.response;e&&t(e)};n.send(null)};JSM.LoadMultipleBuffers=function(e,t,n,r,i){n>=e.length?i(t):r(e[n],function(s){t.push(s);JSM.LoadMultipleBuffers(e,t,n+1,r,i)})};JSM.GetStringBufferFromFile=function(e,t){var n=new FileReader;n.onloadend=function(e){e.target.readyState==FileReader.DONE&&t(e.target.result)};n.readAsText(e)};JSM.GetStringBuffersFromURLList=function(e,t){JSM.LoadMultipleBuffers(e,[],0,JSM.GetStringBufferFromURL,function(e){t(e)})};JSM.GetStringBuffersFromFileList=function(e,t){JSM.LoadMultipleBuffers(e,[],0,JSM.GetStringBufferFromFile,function(e){t(e)})};JSM.ConvertTriangleModelToJsonData=function(e){function t(e,t,n){var r=[],i=e.MaterialCount(),s;for(e=0;e<t.VertexCount();e++)s=t.GetVertex(e),n.vertices.push(s.x,s.y,s.z);for(e=0;e<t.NormalCount();e++)s=t.GetNormal(e),n.normals.push(s.x,s.y,s.z);n.uvs.push(0,0);for(e=0;e<i;e++)r.push([]);for(e=0;e<t.TriangleCount();e++)s=t.GetTriangle(e),void 0===s.mat||0>s.mat||s.mat>=i||r[s.mat].push(e);var o,u;for(e=0;e<r.length;e++)if(o=r[e],0!==o.length){u={material:e,parameters:[]};for(i=0;i<o.length;i++)s=t.GetTriangle(o[i]),u.parameters.push(s.v0,s.v1,s.v2,s.n0,s.n1,s.n2,0,0,0);n.triangles.push(u)}}var n={version:1,materials:[],meshes:[]};(function(e,t){var n,r;for(n=0;n<e.MaterialCount();n++)r=e.GetMaterial(n),t.push({name:r.name,ambient:[r.ambient.r,r.ambient.g,r.ambient.b],diffuse:[r.diffuse.r,r.diffuse.g,r.diffuse.b],specular:[r.specular.r,r.specular.g,r.specular.b],opacity:r.opacity})})(e,n.materials);var r,i,s;for(r=0;r<e.BodyCount();r++)i=e.GetBody(r),0!==i.TriangleCount()&&(s={name:i.GetName(),vertices:[],normals:[],uvs:[],triangles:[]},t(e,i,s),n.meshes.push(s));return n};JSM.MergeJsonDataMeshes=function(e){function t(e,t,n){function r(e,t,n){var r=t.material,u=n[r];void 0===u&&(e.triangles.push({material:r,parameters:[]}),u=e.triangles.length-1,n[r]=u);e=e.triangles[u].parameters;for(n=0;n<t.parameters.length;n+=9)e.push(t.parameters[n]+i,t.parameters[n+1]+i,t.parameters[n+2]+i,t.parameters[n+3]+s,t.parameters[n+4]+s,t.parameters[n+5]+s,t.parameters[n+6]+o,t.parameters[n+7]+o,t.parameters[n+8]+o)}var i=e.vertices.length/3,s=e.normals.length/3,o=e.uvs.length/2;(function(e,t){var n;for(n=0;n<t.vertices.length;n++)e.vertices.push(t.vertices[n]);for(n=0;n<t.normals.length;n++)e.normals.push(t.normals[n]);for(n=0;n<t.uvs.length;n++)e.uvs.push(t.uvs[n])})(e,t);var u,a;for(u=0;u<t.triangles.length;u++)a=t.triangles[u],r(e,a,n)}var n={version:e.version,materials:e.materials,meshes:[]},r={name:"Merged",vertices:[],normals:[],uvs:[],triangles:[]},i={},s,o;for(s=0;s<e.meshes.length;s++)o=e.meshes[s],t(r,o,i);n.meshes.push(r);return n};JSM.Read3dsFile=function(e,t){function D(e,n){if(void 0!==t.onLog&&null!==t.onLog)t.onLog(e,n)}function P(e){for(var t="",n=0,r=0;64>r;){n=e.ReadCharacter();if(0===n)break;t+=String.fromCharCode(n);r+=1}return t}function H(e){var t=[],n;for(n=0;3>n;n++)t[n]=e.ReadFloat32();return t}function B(e,t,n){for(;e.GetPosition()<=t-6;){var r=e,i=n,s=r.ReadUnsignedInteger16(),r=r.ReadUnsignedInteger32();i(s,r)}}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;if(void 0===t||null===t)t={};n=15677;r=45055;i=40960;s=40976;o=40992;u=41008;a=41024;f=41040;l=16;c=17;h=18;p=19;d=48;v=49;m=16384;g=16640;y=17920;b=18176;w=16656;E=16672;S=16736;x=16688;T=16720;N=45056;C=45058;k=45072;L=45075;A=45088;O=45089;M=45090;_=45104;(function(e){function j(e,t,n){var r={};t=e.GetPosition()+n-6;var i=!1;B(e,t,function(t,n){t==c?i||(r.r=e.ReadUnsignedCharacter()/255,r.g=e.ReadUnsignedCharacter()/255,r.b=e.ReadUnsignedCharacter()/255):t==h?(r.r=e.ReadUnsignedCharacter()/255,r.g=e.ReadUnsignedCharacter()/255,r.b=e.ReadUnsignedCharacter()/255,i=!0):t==l?i||(r.r=e.ReadFloat32(),r.g=e.ReadFloat32(),r.b=e.ReadFloat32()):t==p?(r.r=e.ReadFloat32(),r.g=e.ReadFloat32(),r.b=e.ReadFloat32(),i=!0):e.Skip(n-6)});return r}function R(e,t,n){var r=0;t=e.GetPosition()+n-6;B(e,t,function(t,n){t==d?r=e.ReadUnsignedInteger16()/100:t==v?r=e.ReadFloat32():e.Skip(n-6)});return r}function U(e,n,r){D("Read material chunk ("+n.toString(16)+", "+r+")",2);var l={},c=e.GetPosition()+r-6;B(e,c,function(t,c){t==i?(D("Read material name chunk ("+n.toString(16)+", "+r+")",3),l.name=P(e)):t==s?(D("Read material ambient chunk ("+n.toString(16)+", "+r+")",3),l.ambient=j(e,t,c)):t==o?(D("Read material diffuse chunk ("+n.toString(16)+", "+r+")",3),l.diffuse=j(e,t,c)):t==u?(D("Read material specular chunk ("+n.toString(16)+", "+r+")",3),l.specular=j(e,t,c)):t==a?(D("Read material shininess chunk ("+n.toString(16)+", "+r+")",3),l.shininess=R(e,t,c)):t==f?(D("Read material transparency chunk ("+n.toString(16)+", "+r+")",3),l.transparency=R(e,t,c)):(D("Skip chunk ("+t.toString(16)+", "+c+")",3),e.Skip(c-6))});if(void 0!==t.onMaterial&&null!==t.onMaterial)t.onMaterial(l)}function W(e,n,r){D("Read faces chunk ("+n.toString(16)+", "+r+")",4);n=e.GetPosition()+r-6;var i=e.ReadUnsignedInteger16(),s,o,u,a;for(r=0;r<i;r++)if(s=e.ReadUnsignedInteger16(),o=e.ReadUnsignedInteger16(),u=e.ReadUnsignedInteger16(),a=e.ReadUnsignedInteger16(),void 0!==t.onFace&&null!==t.onFace)t.onFace(s,o,u,a);B(e,n,function(n,r){if(n==x){D("Read face materials chunk ("+n.toString(16)+", "+r+")",5);var s=P(e),o=e.ReadUnsignedInteger16(),u,a;for(u=0;u<o;u++)if(a=e.ReadUnsignedInteger16(),void 0!==t.onFaceMaterial&&null!==t.onFaceMaterial)t.onFaceMaterial(a,s)}else if(n==T){D("Read face smoothing groups chunk ("+n.toString(16)+", "+r+")",5);for(s=0;s<i;s++)if(o=e.ReadUnsignedInteger32(),void 0!==t.onFaceSmoothingGroup&&null!==t.onFaceSmoothingGroup)t.onFaceSmoothingGroup(s,o)}else D("Skip chunk ("+n.toString(16)+", "+r+")",5),e.Skip(r-6)})}function X(e,n,r,i){D("Read mesh chunk ("+n+", "+r.toString(16)+", "+i+")",3);if(void 0!==t.onMesh&&null!==t.onMesh)t.onMesh(n);n=e.GetPosition()+i-6;B(e,n,function(n,r){if(n==w){D("Read vertices chunk ("+n.toString(16)+", "+r+")",4);var i=e.ReadUnsignedInteger16(),s,o,u,a;for(s=0;s<i;s++)if(o=e.ReadFloat32(),u=e.ReadFloat32(),a=e.ReadFloat32(),void 0!==t.onVertex&&null!==t.onVertex)t.onVertex(o,u,a)}else if(n==E)W(e,n,r);else if(n==S){D("Read transformation chunk ("+n.toString(16)+", "+r+")",4);i=[];for(s=0;4>s;s++){for(o=0;3>o;o++)i.push(e.ReadFloat32());3>s?i.push(0):i.push(1)}if(void 0!==t.onTransformation&&null!==t.onTransformation)t.onTransformation(i)}else D("Skip chunk ("+n.toString(16)+", "+r+")",4),e.Skip(r-6)})}function V(e,t,n){D("Read object chunk ("+t.toString(16)+", "+n+")",2);t=e.GetPosition()+n-6;var r=P(e);B(e,t,function(t,n){t==g?X(e,r,t,n):(t==y?D("Skip light chunk ("+r+", "+t.toString(16)+", "+n+")",3):t==b?D("Skip camera chunk ("+r+", "+t.toString(16)+", "+n+")",3):D("Skip chunk ("+t.toString(16)+", "+n+")",3),e.Skip(n-6))})}function $(e,t,n){D("Read editor chunk ("+t.toString(16)+", "+n+")",1);t=e.GetPosition()+n-6;B(e,t,function(t,n){t==r?U(e,t,n):t==m?V(e,t,n):(D("Skip chunk ("+t.toString(16)+", "+n+")",2),e.Skip(n-6))})}function Q(e,n,r){function i(e,t){var n=[];e.Skip(10);var r,i,s,o=e.ReadInteger32();for(r=0;r<o;r++)e.ReadInteger32(),i=e.ReadUnsignedInteger16(),0!==i&&e.ReadFloat32(),t==O?(s=e.ReadFloat32(),i=H(e),i[3]=s):i=H(e),n.push(i);return n}D("Read object node chunk ("+n.toString(16)+", "+r+")",2);var s={name:"",nodeId:-1,flags:-1,userId:-1,pivot:[0,0,0],positions:[],rotations:[],scales:[]};n=e.GetPosition()+r-6;B(e,n,function(t,n){t==k?(s.name=P(e),s.flags=e.ReadUnsignedInteger32(),s.userId=e.ReadUnsignedInteger16()):t==L?s.pivot=H(e):t==A?s.positions=i(e,A):t==O?s.rotations=i(e,O):t==M?s.scales=i(e,M):t==_?s.nodeId=e.ReadUnsignedInteger16():(D("Skip chunk ("+t.toString(16)+", "+n+")",3),e.Skip(n-6))});if(void 0!==t.onObjectNode&&null!==t.onObjectNode)t.onObjectNode(s)}function Y(e,t,n){D("Read keyframe chunk ("+t.toString(16)+", "+n+")",1);t=e.GetPosition()+n-6;B(e,t,function(t,n){t==C?Q(e,t,n):(D("Skip chunk ("+t.toString(16)+", "+n+")",2),e.Skip(n-6))})}function Z(e,t,r){D("Read main chunk ("+t.toString(16)+", "+r+")",0);t=e.GetPosition()+r-6;B(e,t,function(t,r){t==n?$(e,t,r):t==N?Y(e,t,r):(D("Skip chunk ("+t.toString(16)+", "+r+")",1),e.Skip(r-6))})}var et=e.GetByteLength();B(e,et,function(t,n){19789==t?Z(e,t,n):(D("Skip chunk ("+t.toString(16)+", "+n+")",0),e.Skip(n-6))})})(new JSM.BinaryReader(e,!0))};JSM.Convert3dsToJsonData=function(e){var t=new JSM.TriangleModel,n=null,r={},i={},s={nodes:[],nodeIdToIndex:{}};JSM.Read3dsFile(e,{onMaterial:function(e){function n(e){return void 0===e||null===e?{r:0,g:0,b:0}:e}var i=t.AddMaterial(e.name,n(e.ambient),n(e.diffuse),n(e.specular),void 0===e.transparency||null===e.transparency?1:1-e.transparency);void 0===r[e.name]&&(r[e.name]=i)},onMesh:function(e){var r=t.AddBody(new JSM.TriangleBody(e));n=t.GetBody(r);n.meshData={faceToMaterial:{},faceToSmoothingGroup:{},objectNodes:[],transformation:null};i[e]=r},onTransformation:function(e){null!==n&&(n.meshData.transformation=e)},onObjectNode:function(e){var n=s.nodes.length;s.nodes.push(e);s.nodeIdToIndex[e.nodeId]=n;e=i[e.name];void 0!==e&&t.GetBody(e).meshData.objectNodes.push(n)},onVertex:function(e,t,r){null!==n&&n.AddVertex(e,t,r)},onFace:function(e,t,r){null!==n&&n.AddTriangle(e,t,r)},onFaceMaterial:function(e,t){null!==n&&(n.meshData.faceToMaterial[e]=t)},onFaceSmoothingGroup:function(e,t){null!==n&&(n.meshData.faceToSmoothingGroup[e]=t)}});(function(e,t,n){function r(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],s;for(s=0;4>s;s++)e[0+s]*=n,e[4+s]*=r,e[8+s]*=i;return e}function i(e,t){var n=t[0],r=t[1],i=t[2],s;for(s=0;3>s;s++)e[12+s]+=e[0+s]*n+e[4+s]*r+e[8+s]*i;return e}function s(e,t){var n,r;for(n=0;n<e.VertexCount();n++)r=e.GetVertex(n),r=JSM.ApplyTransformation(t,r),e.SetVertex(n,r.x,r.y,r.z)}function o(e,t,n){var i=JSM.MatrixDeterminant(t);JSM.IsNegative(i)&&(t=JSM.MatrixClone(t),r(t,[-1,1,1]),n=JSM.MatrixMultiply(n,t),s(e,n))}function u(e,t){if(void 0!==e.matrix)return e.matrix;var n=JSM.MatrixIdentity(),s;s=0===e.positions.length?[0,0,0]:e.positions[0];n=i(n,s);if(0===e.rotations.length)s=[0,0,0,0];else{s=e.rotations[0];var o=[0,0,0,1],a=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);JSM.IsPositive(a)&&(o=-.5*s[3],a=Math.sin(o)/a,o=[a*s[0],a*s[1],a*s[2],Math.cos(o)]);s=o}s=JSM.MatrixRotationQuaternion(s);n=JSM.MatrixMultiply(s,n);s=0===e.scales.length?[0,0,0,0]:e.scales[0];n=r(n,s);65535!=e.userId&&(s=t.nodeIdToIndex[e.userId],void 0!==s&&(s=u(t.nodes[s],t),n=JSM.MatrixMultiply(n,s)));return e.matrix=n}var a=e.meshData;a=void 0===a||null===a?null:a.transformation;if(null!==a){var f=null,f=null!==t?u(t,n):a;n=JSM.MatrixClone(f);f=JSM.MatrixClone(a);a=JSM.MatrixInvert(f);null!==a&&(o(e,f,a),t=void 0===t||null===t?[0,0,0]:t.pivot,i(n,[-t[0],-t[1],-t[2]]),t=JSM.MatrixMultiply(a,n),s(e,t))}}function i(e,t,n,i){r(e,t,i);t=e.meshData;var s,o;for(i=0;i<e.TriangleCount();i++)s=e.GetTriangle(i),o=t.faceToMaterial[i],void 0!==o&&(o=n[o],void 0!==o&&(s.mat=o)),o=t.faceToSmoothingGroup[i],void 0!==o&&(s.curve=o)}function s(e,t,n,r){t=t.Clone();t.SetName(t.GetName()+" ("+r+")");n<e.BodyCount()?e.AddBodyToIndex(t,n):e.AddBody(t);return t}var o,u,a,f,l,c,h;for(o=0;o<t.BodyCount();o++)if(a=t.GetBody(o),f=a.meshData,0===f.objectNodes.length)i(a,null,n,e);else{c=e.nodes[f.objectNodes[0]];for(u=1;u<f.objectNodes.length;u++)l=e.nodes[f.objectNodes[u]],h=s(t,a,o+1,u+1),h.meshData=a.meshData,i(h,l,n,e),o+=1;i(a,c,n,e)}})(s,t,r);t.Finalize();return JSM.ConvertTriangleModelToJsonData(t)};JSM.ReadObjFile=function(e,t){function n(e){e=e.split("\n");var r,i;for(r=0;r<e.length;r++){var s=i=e[r].trim();if(0!==s.length&&"#"!=s[0]&&(i=s.split(/\s+/),!(0===i.length||"#"==i[0][0]))){var o=void 0,o=void 0;if("g"==i[0]){if(!(2>i.length)){s="";for(o=1;o<i.length;o++)s+=i[o],o<i.length-1&&(s+=" ");if(void 0!==t.onMesh&&null!==t.onMesh)t.onMesh(s)}}else if("v"==i[0]){if(!(4>i.length)&&(o=parseFloat(i[1]),s=parseFloat(i[2]),i=parseFloat(i[3]),void 0!==t.onVertex&&null!==t.onVertex))t.onVertex(o,s,i)}else if("vn"==i[0]){if(!(4>i.length)&&(o=parseFloat(i[1]),s=parseFloat(i[2]),i=parseFloat(i[3]),void 0!==t.onNormal&&null!==t.onNormal))t.onNormal(o,s,i)}else if("f"==i[0]){if(!(4>i.length)){for(var s=[],u=[],a=void 0,o=1;o<i.length;o++)a=i[o].split("/"),s.push(parseInt(a[0],10)-1),2<a.length&&0<a[2].length&&u.push(parseInt(a[2],10)-1);if(void 0!==t.onFace&&null!==t.onFace)t.onFace(s,u)}}else if("usemtl"==i[0]){if(!(2>i.length)&&void 0!==t.onUseMaterial&&null!==t.onUseMaterial)t.onUseMaterial(i[1])}else if("newmtl"==i[0]){if(!(2>i.length)&&void 0!==t.onNewMaterial&&null!==t.onNewMaterial)t.onNewMaterial(i[1])}else if("Ka"==i[0]||"Kd"==i[0]||"Ks"==i[0]){if(!(4>i.length)&&(o=parseFloat(i[1]),s=parseFloat(i[2]),u=parseFloat(i[3]),void 0!==t.onMaterialComponent&&null!==t.onMaterialComponent))t.onMaterialComponent(i[0],o,s,u)}else if("Ka"==i[0]||"Kd"==i[0]||"Ks"==i[0]){if(!(4>i.length)&&(o=parseFloat(i[1]),s=parseFloat(i[2]),u=parseFloat(i[3]),void 0!==t.onMaterialComponent&&null!==t.onMaterialComponent))t.onMaterialComponent(i[0],o,s,u)}else"mtllib"==i[0]&&!(2>i.length)&&(i=s.indexOf("mtllib")+6,o=s.substr(i,s.length-i).trim(),i=o.trim(),i=void 0!==t.onFileRequested&&null!==t.onFileRequested?t.onFileRequested(i):null,null!==i&&n(i))}}}n(e)};JSM.ConvertObjToJsonData=function(e,t){var n=new JSM.TriangleModel,r=n.AddBody(new JSM.TriangleBody("Default")),i=n.GetBody(r),s={},o=null,u=null,a=[],f=[];JSM.ReadObjFile(e,{onNewMaterial:function(e){var t=n.AddMaterial(e,{r:1,g:0,b:0},{r:1,g:0,b:0},{r:0,g:0,b:0},1);o=n.GetMaterial(t);s[e]=t},onMaterialComponent:function(e,t,n,r){null!==o&&("Ka"==e?(e=o.ambient,e.r=t,e.g=n,e.b=r):"Kd"==e?(e=o.diffuse,e.r=t,e.g=n,e.b=r):"Ks"==e&&(e=o.specular,e.r=t,e.g=n,e.b=r))},onUseMaterial:function(e){e=s[e];void 0!==e&&(u=e)},onMesh:function(e){e=n.AddBody(new JSM.TriangleBody(e));i=n.GetBody(e)},onVertex:function(e,t,n){a.push(new JSM.Coord(e,t,n))},onNormal:function(e,t,n){f.push(new JSM.Coord(e,t,n))},onFace:function(e,t){var n,r,s=e.length==t.length,o=e.length;for(n=0;n<o-2;n++)r=i.AddTriangle(e[0],e[(n+1)%o],e[(n+2)%o]),r=i.GetTriangle(r),s&&(r.n0=t[0],r.n1=t[(n+1)%o],r.n2=t[(n+2)%o]),null!==u&&(r.mat=u)},onFileRequested:function(e){return void 0!==t.onFileRequested&&null!==t.onFileRequested?t.onFileRequested(e):null}});(function(e,t,n){function r(e,t,n,r,i){if(void 0!==n){var s=r[n];if(void 0!==s)return s;t=t[n];0===i?s=e.AddVertex(t.x,t.y,t.z):1===i&&(s=e.AddNormal(t.x,t.y,t.z));return r[n]=s}}var i,s,o,u,a,f;for(i=0;i<e.BodyCount();i++){o=e.GetBody(i);a={};f={};for(s=0;s<o.TriangleCount();s++)u=o.GetTriangle(s),u.v0=r(o,t,u.v0,a,0),u.v1=r(o,t,u.v1,a,0),u.v2=r(o,t,u.v2,a,0),u.n0=r(o,n,u.n0,f,1),u.n1=r(o,n,u.n1,f,1),u.n2=r(o,n,u.n2,f,1)}})(n,a,f);n.Finalize();return JSM.ConvertTriangleModelToJsonData(n)};JSM.ReadBinaryStlFile=function(e,t){function n(e){var t=[],n;for(n=0;3>n;n++)t[n]=e.ReadFloat32();return t}var r=new JSM.BinaryReader(e,!0);r.Skip(80);var i=r.ReadUnsignedInteger32(),s,o,u,a,f;for(s=0;s<i;s++)if(f=n(r),o=n(r),u=n(r),a=n(r),r.Skip(2),void 0!==t.onFace&&null!==t.onFace)t.onFace(o,u,a,f)};JSM.ReadAsciiStlFile=function(e,t){function n(e,n){var r=e[n].trim();if(0===r.length)return n+1;r=r.split(/\s+/);if(0===r.length)return n+1;if("solid"!=r[0]&&"facet"==r[0]&&"normal"==r[1]){if(5>r.length)return-1;var r=[parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4])],i=[],s,o;for(s=n+1;s<e.length&&3>i.length;s++)if(o=e[s].trim(),0!==o.length&&(o=o.split(/\s+/),0!==o.length&&"vertex"==o[0]))if(4>o.length)break;else o=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])],i.push(o);s+=1;if(3!=i.length)return-1;if(void 0!==t.onFace&&null!==t.onFace)t.onFace(i[0],i[1],i[2],r);return s}return n+1}for(var r=0,i=e.split("\n");r<i.length&&-1!=r;)r=n(i,r)};JSM.ConvertStlToJsonData=function(e){var t=new JSM.TriangleModel,n=t.AddBody(new JSM.TriangleBody("Default")),r=t.GetBody(n);(function(e){var t=e.byteLength;if(84>t)return!1;e=new JSM.BinaryReader(e,!0);e.Skip(80);e=e.ReadUnsignedInteger32();return t!=50*e+84?!1:!0})(e)?JSM.ReadBinaryStlFile(e,{onFace:function(e,t,n,i){e=r.AddVertex(e[0],e[1],e[2]);t=r.AddVertex(t[0],t[1],t[2]);n=r.AddVertex(n[0],n[1],n[2]);i=JSM.VectorNormalize(new JSM.Vector(i[0],i[1],i[2]));i=r.AddNormal(i.x,i.y,i.z);r.AddTriangle(e,t,n,i,i,i)}}):(e=String.fromCharCode.apply(null,new Uint8Array(e)),JSM.ReadAsciiStlFile(e,{onFace:function(e,t,n,i){e=r.AddVertex(e[0],e[1],e[2]);t=r.AddVertex(t[0],t[1],t[2]);n=r.AddVertex(n[0],n[1],n[2]);i=JSM.VectorNormalize(new JSM.Vector(i[0],i[1],i[2]));i=r.AddNormal(i.x,i.y,i.z);r.AddTriangle(e,t,n,i,i,i)}}));t.Finalize();return JSM.ConvertTriangleModelToJsonData(t)};JSM.ImportFileList=function(){this.descriptors=null};JSM.ImportFileList.prototype.Init=function(e){this.descriptors=[];var t,n;for(t=0;t<e.length;t++)n=e[t],n={originalObject:n,originalFileName:n.name,fileName:n.name.toUpperCase(),extension:this.GetFileExtension(n.name)},this.descriptors.push(n)};JSM.ImportFileList.prototype.GetFileDescriptor=function(e){return this.descriptors[e]};JSM.ImportFileList.prototype.GetMainFileIndex=function(e){var t;for(e=0;e<this.descriptors.length;e++)if(t=this.descriptors[e],this.IsSupportedExtension(t.extension))return e;return-1};JSM.ImportFileList.prototype.GetFileIndexByName=function(e){var t,n;for(t=0;t<this.descriptors.length;t++)if(n=this.descriptors[t],n.fileName==e.toUpperCase())return t;return-1};JSM.ImportFileList.prototype.IsSupportedExtension=function(e){return".3DS"==e||".OBJ"==e||".STL"==e?!0:!1};JSM.ImportFileList.prototype.GetFileExtension=function(e){var t=e.lastIndexOf(".");if(-1==t)return"";e=e.substr(t);return e=e.toUpperCase()};JSM.ConvertFileListToJsonData=function(e,t){function n(e,n){if(void 0!==t.onReady&&null!==t.onReady)t.onReady(e,n)}var r=new JSM.ImportFileList;r.Init(e);var i=r.GetMainFileIndex();if(-1===i){if(void 0!==t.onError&&null!==t.onError)t.onError()}else{var s=r.GetFileDescriptor(i),o={main:s.originalFileName,requested:[],missing:[]};".3DS"==s.extension?JSM.GetArrayBufferFromFile(s.originalObject,function(e){e=JSM.Convert3dsToJsonData(e);n(o,e)}):".OBJ"==s.extension?JSM.GetStringBuffersFromFileList(e,function(e){var t=JSM.ConvertObjToJsonData(e[i],{onFileRequested:function(t){var n=r.GetFileIndexByName(t);if(-1==n)return o.missing.push(t),null;o.requested.push(t);return e[n]}});n(o,t)}):".STL"==s.extension&&JSM.GetArrayBufferFromFile(s.originalObject,function(e){e=JSM.ConvertStlToJsonData(e);n(o,e)})}};JSM.GenerateSolidWithRadius=function(e,t){var n=new JSM.Body,r=!0;"Tetrahedron"===e?n=JSM.GenerateTetrahedron():"Hexahedron"===e?n=JSM.GenerateHexahedron():"Octahedron"===e?n=JSM.GenerateOctahedron():"Dodecahedron"===e?n=JSM.GenerateDodecahedron():"Icosahedron"===e?n=JSM.GenerateIcosahedron():"TruncatedTetrahedron"===e?n=JSM.GenerateTruncatedTetrahedron():"Cuboctahedron"===e?n=JSM.GenerateCuboctahedron():"TruncatedCube"===e?n=JSM.GenerateTruncatedCube():"TruncatedOctahedron"===e?n=JSM.GenerateTruncatedOctahedron():"Rhombicuboctahedron"===e?n=JSM.GenerateRhombicuboctahedron():"TruncatedCuboctahedron"===e?n=JSM.GenerateTruncatedCuboctahedron():"SnubCube"===e?n=JSM.GenerateSnubCube():"Icosidodecahedron"===e?n=JSM.GenerateIcosidodecahedron():"TruncatedDodecahedron"===e?n=JSM.GenerateTruncatedDodecahedron():"TruncatedIcosahedron"===e?n=JSM.GenerateTruncatedIcosahedron():"Rhombicosidodecahedron"===e?n=JSM.GenerateRhombicosidodecahedron():"TruncatedIcosidodecahedron"===e?n=JSM.GenerateTruncatedIcosidodecahedron():"SnubDodecahedron"===e?n=JSM.GenerateSnubDodecahedron():"TetrakisHexahedron"===e?(n=JSM.GenerateTetrakisHexahedron(),r=!1):"RhombicDodecahedron"===e?(n=JSM.GenerateRhombicDodecahedron(),r=!1):"PentakisDodecahedron"===e?(n=JSM.GeneratePentakisDodecahedron(),r=!1):"SmallStellatedDodecahedron"===e?(n=JSM.GenerateSmallStellatedDodecahedron(),r=!1):"GreatDodecahedron"===e?(n=JSM.GenerateGreatDodecahedron(),r=!1):"SmallTriambicIcosahedron"===e?(n=JSM.GenerateSmallTriambicIcosahedron(),r=!1):"GreatStellatedDodecahedron"===e?(n=JSM.GenerateGreatStellatedDodecahedron(),r=!1):"SmallTriakisOctahedron"===e?(n=JSM.GenerateSmallTriakisOctahedron(),r=!1):"StellaOctangula"===e?(n=JSM.GenerateStellaOctangula(),r=!1):"TriakisTetrahedron"===e&&(n=JSM.GenerateTriakisTetrahedron(),r=!1);if(0<n.VertexCount()){var i=0;if(r)i=JSM.VectorLength(n.GetVertexPosition(0));else for(var s,r=0;r<n.VertexCount();r++)s=JSM.VectorLength(n.GetVertexPosition(r)),JSM.IsGreater(s,i)&&(i=s);i=t/i;for(r=0;r<n.VertexCount();r++)s=n.GetVertex(r),s.SetPosition(JSM.VectorMultiply(s.GetPosition(),i))}return n};JSM.GenerateTetrahedron=function(){var e=new JSM.Body;e.AddVertex(new JSM.BodyVertex(new JSM.Coord(1,1,1)));e.AddVertex(new JSM.BodyVertex(new JSM.Coord(-1,-1,1)));e.AddVertex(new JSM.BodyVertex(new JSM.Coord(-1,1,-1)));e.AddVertex(new JSM.BodyVertex(new JSM.Coord(1,-1,-1)));e.AddPolygon(new JSM.BodyPolygon([0,1,3]));e.AddPolygon(new JSM.BodyPolygon([0,2,1]));e.AddPolygon(new JSM.BodyPolygon([0,3,2]));e.AddPolygon(new JSM.BodyPolygon([1,2,3]));return e};JSM.GenerateHexahedron=function(){var e=new JSM.Body;JSM.AddVertexToBody(e,1,1,1);JSM.AddVertexToBody(e,1,1,-1);JSM.AddVertexToBody(e,1,-1,1);JSM.AddVertexToBody(e,-1,1,1);JSM.AddVertexToBody(e,1,-1,-1);JSM.AddVertexToBody(e,-1,1,-1);JSM.AddVertexToBody(e,-1,-1,1);JSM.AddVertexToBody(e,-1,-1,-1);JSM.AddPolygonToBody(e,[0,1,5,3]);JSM.AddPolygonToBody(e,[0,2,4,1]);JSM.AddPolygonToBody(e,[0,3,6,2]);JSM.AddPolygonToBody(e,[1,4,7,5]);JSM.AddPolygonToBody(e,[2,6,7,4]);JSM.AddPolygonToBody(e,[3,5,7,6]);return e};JSM.GenerateOctahedron=function(){var e=new JSM.Body;JSM.AddVertexToBody(e,1,0,0);JSM.AddVertexToBody(e,-1,0,0);JSM.AddVertexToBody(e,0,1,0);JSM.AddVertexToBody(e,0,-1,0);JSM.AddVertexToBody(e,0,0,1);JSM.AddVertexToBody(e,0,0,-1);JSM.AddPolygonToBody(e,[0,2,4]);JSM.AddPolygonToBody(e,[0,3,5]);JSM.AddPolygonToBody(e,[0,4,3]);JSM.AddPolygonToBody(e,[0,5,2]);JSM.AddPolygonToBody(e,[1,2,5]);JSM.AddPolygonToBody(e,[1,3,4]);JSM.AddPolygonToBody(e,[1,4,2]);JSM.AddPolygonToBody(e,[1,5,3]);return e};JSM.GenerateDodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=1/t;JSM.AddVertexToBody(e,1,1,1);JSM.AddVertexToBody(e,1,1,-1);JSM.AddVertexToBody(e,1,-1,1);JSM.AddVertexToBody(e,-1,1,1);JSM.AddVertexToBody(e,1,-1,-1);JSM.AddVertexToBody(e,-1,1,-1);JSM.AddVertexToBody(e,-1,-1,1);JSM.AddVertexToBody(e,-1,-1,-1);JSM.AddVertexToBody(e,0,+n,+t);JSM.AddVertexToBody(e,0,+n,-t);JSM.AddVertexToBody(e,0,-n,+t);JSM.AddVertexToBody(e,0,-n,-t);JSM.AddVertexToBody(e,+n,+t,0);JSM.AddVertexToBody(e,+n,-t,0);JSM.AddVertexToBody(e,-n,+t,0);JSM.AddVertexToBody(e,-n,-t,0);JSM.AddVertexToBody(e,+t,0,+n);JSM.AddVertexToBody(e,-t,0,+n);JSM.AddVertexToBody(e,+t,0,-n);JSM.AddVertexToBody(e,-t,0,-n);JSM.AddPolygonToBody(e,[0,8,10,2,16]);JSM.AddPolygonToBody(e,[0,16,18,1,12]);JSM.AddPolygonToBody(e,[0,12,14,3,8]);JSM.AddPolygonToBody(e,[1,9,5,14,12]);JSM.AddPolygonToBody(e,[1,18,4,11,9]);JSM.AddPolygonToBody(e,[2,10,6,15,13]);JSM.AddPolygonToBody(e,[2,13,4,18,16]);JSM.AddPolygonToBody(e,[3,14,5,19,17]);JSM.AddPolygonToBody(e,[3,17,6,10,8]);JSM.AddPolygonToBody(e,[4,13,15,7,11]);JSM.AddPolygonToBody(e,[5,9,11,7,19]);JSM.AddPolygonToBody(e,[6,17,19,7,15]);return e};JSM.GenerateIcosahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2;JSM.AddVertexToBody(e,0,1,+t);JSM.AddVertexToBody(e,0,1,-t);JSM.AddVertexToBody(e,0,-1,+t);JSM.AddVertexToBody(e,0,-1,-t);JSM.AddVertexToBody(e,1,+t,0);JSM.AddVertexToBody(e,1,-t,0);JSM.AddVertexToBody(e,-1,+t,0);JSM.AddVertexToBody(e,-1,-t,0);JSM.AddVertexToBody(e,+t,0,1);JSM.AddVertexToBody(e,-t,0,1);JSM.AddVertexToBody(e,+t,0,-1);JSM.AddVertexToBody(e,-t,0,-1);JSM.AddPolygonToBody(e,[0,2,8]);JSM.AddPolygonToBody(e,[0,4,6]);JSM.AddPolygonToBody(e,[0,6,9]);JSM.AddPolygonToBody(e,[0,8,4]);JSM.AddPolygonToBody(e,[0,9,2]);JSM.AddPolygonToBody(e,[1,3,11]);JSM.AddPolygonToBody(e,[1,4,10]);JSM.AddPolygonToBody(e,[1,6,4]);JSM.AddPolygonToBody(e,[1,10,3]);JSM.AddPolygonToBody(e,[1,11,6]);JSM.AddPolygonToBody(e,[2,5,8]);JSM.AddPolygonToBody(e,[2,7,5]);JSM.AddPolygonToBody(e,[2,9,7]);JSM.AddPolygonToBody(e,[3,5,7]);JSM.AddPolygonToBody(e,[3,7,11]);JSM.AddPolygonToBody(e,[3,10,5]);JSM.AddPolygonToBody(e,[4,8,10]);JSM.AddPolygonToBody(e,[6,11,9]);JSM.AddPolygonToBody(e,[5,10,8]);JSM.AddPolygonToBody(e,[7,9,11]);return e};JSM.GenerateTruncatedTetrahedron=function(){var e=new JSM.Body;JSM.AddVertexToBody(e,1,1,3);JSM.AddVertexToBody(e,1,-1,-3);JSM.AddVertexToBody(e,-1,-1,3);JSM.AddVertexToBody(e,-1,1,-3);JSM.AddVertexToBody(e,1,3,1);JSM.AddVertexToBody(e,1,-3,-1);JSM.AddVertexToBody(e,-1,-3,1);JSM.AddVertexToBody(e,-1,3,-1);JSM.AddVertexToBody(e,3,1,1);JSM.AddVertexToBody(e,3,-1,-1);JSM.AddVertexToBody(e,-3,-1,1);JSM.AddVertexToBody(e,-3,1,-1);JSM.AddPolygonToBody(e,[0,8,4]);JSM.AddPolygonToBody(e,[1,9,5]);JSM.AddPolygonToBody(e,[2,10,6]);JSM.AddPolygonToBody(e,[3,11,7]);JSM.AddPolygonToBody(e,[0,2,6,5,9,8]);JSM.AddPolygonToBody(e,[0,4,7,11,10,2]);JSM.AddPolygonToBody(e,[1,3,7,4,8,9]);JSM.AddPolygonToBody(e,[1,5,6,10,11,3]);return e};JSM.GenerateCuboctahedron=function(){var e=new JSM.Body;JSM.AddVertexToBody(e,1,1,0);JSM.AddVertexToBody(e,1,-1,0);JSM.AddVertexToBody(e,-1,-1,0);JSM.AddVertexToBody(e,-1,1,0);JSM.AddVertexToBody(e,1,0,1);JSM.AddVertexToBody(e,1,0,-1);JSM.AddVertexToBody(e,-1,0,1);JSM.AddVertexToBody(e,-1,0,-1);JSM.AddVertexToBody(e,0,1,1);JSM.AddVertexToBody(e,0,-1,-1);JSM.AddVertexToBody(e,0,-1,1);JSM.AddVertexToBody(e,0,1,-1);JSM.AddPolygonToBody(e,[0,5,11]);JSM.AddPolygonToBody(e,[0,8,4]);JSM.AddPolygonToBody(e,[1,4,10]);JSM.AddPolygonToBody(e,[1,9,5]);JSM.AddPolygonToBody(e,[2,7,9]);JSM.AddPolygonToBody(e,[2,10,6]);JSM.AddPolygonToBody(e,[3,6,8]);JSM.AddPolygonToBody(e,[3,11,7]);JSM.AddPolygonToBody(e,[0,4,1,5]);JSM.AddPolygonToBody(e,[0,11,3,8]);JSM.AddPolygonToBody(e,[1,10,2,9]);JSM.AddPolygonToBody(e,[2,6,3,7]);JSM.AddPolygonToBody(e,[4,8,6,10]);JSM.AddPolygonToBody(e,[5,9,7,11]);return e};JSM.GenerateTruncatedCube=function(){var e=new JSM.Body,t=Math.sqrt(2)-1;JSM.AddVertexToBody(e,1,1,+t);JSM.AddVertexToBody(e,1,1,-t);JSM.AddVertexToBody(e,1,-1,+t);JSM.AddVertexToBody(e,-1,1,+t);JSM.AddVertexToBody(e,1,-1,-t);JSM.AddVertexToBody(e,-1,1,-t);JSM.AddVertexToBody(e,-1,-1,+t);JSM.AddVertexToBody(e,-1,-1,-t);JSM.AddVertexToBody(e,1,+t,1);JSM.AddVertexToBody(e,1,+t,-1);JSM.AddVertexToBody(e,1,-t,1);JSM.AddVertexToBody(e,-1,+t,1);JSM.AddVertexToBody(e,1,-t,-1);JSM.AddVertexToBody(e,-1,+t,-1);JSM.AddVertexToBody(e,-1,-t,1);JSM.AddVertexToBody(e,-1,-t,-1);JSM.AddVertexToBody(e,+t,1,1);JSM.AddVertexToBody(e,+t,1,-1);JSM.AddVertexToBody(e,+t,-1,1);JSM.AddVertexToBody(e,-t,1,1);JSM.AddVertexToBody(e,+t,-1,-1);JSM.AddVertexToBody(e,-t,1,-1);JSM.AddVertexToBody(e,-t,-1,1);JSM.AddVertexToBody(e,-t,-1,-1);JSM.AddPolygonToBody(e,[0,16,8]);JSM.AddPolygonToBody(e,[1,9,17]);JSM.AddPolygonToBody(e,[2,10,18]);JSM.AddPolygonToBody(e,[3,11,19]);JSM.AddPolygonToBody(e,[4,20,12]);JSM.AddPolygonToBody(e,[5,21,13]);JSM.AddPolygonToBody(e,[6,22,14]);JSM.AddPolygonToBody(e,[7,15,23]);JSM.AddPolygonToBody(e,[0,1,17,21,5,3,19,16]);JSM.AddPolygonToBody(e,[0,8,10,2,4,12,9,1]);JSM.AddPolygonToBody(e,[2,18,22,6,7,23,20,4]);JSM.AddPolygonToBody(e,[3,5,13,15,7,6,14,11]);JSM.AddPolygonToBody(e,[8,16,19,11,14,22,18,10]);JSM.AddPolygonToBody(e,[9,12,20,23,15,13,21,17]);return e};JSM.GenerateTruncatedOctahedron=function(){var e=new JSM.Body;JSM.AddVertexToBody(e,0,1,2);JSM.AddVertexToBody(e,0,1,-2);JSM.AddVertexToBody(e,0,-1,2);JSM.AddVertexToBody(e,0,-1,-2);JSM.AddVertexToBody(e,0,2,1);JSM.AddVertexToBody(e,0,-2,1);JSM.AddVertexToBody(e,0,2,-1);JSM.AddVertexToBody(e,0,-2,-1);JSM.AddVertexToBody(e,1,0,2);JSM.AddVertexToBody(e,1,0,-2);JSM.AddVertexToBody(e,-1,0,2);JSM.AddVertexToBody(e,-1,0,-2);JSM.AddVertexToBody(e,1,2,0);JSM.AddVertexToBody(e,1,-2,0);JSM.AddVertexToBody(e,-1,2,0);JSM.AddVertexToBody(e,-1,-2,0);JSM.AddVertexToBody(e,2,0,1);JSM.AddVertexToBody(e,-2,0,1);JSM.AddVertexToBody(e,2,0,-1);JSM.AddVertexToBody(e,-2,0,-1);JSM.AddVertexToBody(e,2,1,0);JSM.AddVertexToBody(e,-2,1,0);JSM.AddVertexToBody(e,2,-1,0);JSM.AddVertexToBody(e,-2,-1,0);JSM.AddPolygonToBody(e,[0,10,2,8]);JSM.AddPolygonToBody(e,[1,9,3,11]);JSM.AddPolygonToBody(e,[4,12,6,14]);JSM.AddPolygonToBody(e,[5,15,7,13]);JSM.AddPolygonToBody(e,[16,22,18,20]);JSM.AddPolygonToBody(e,[17,21,19,23]);JSM.AddPolygonToBody(e,[0,4,14,21,17,10]);JSM.AddPolygonToBody(e,[0,8,16,20,12,4]);JSM.AddPolygonToBody(e,[1,6,12,20,18,9]);JSM.AddPolygonToBody(e,[1,11,19,21,14,6]);JSM.AddPolygonToBody(e,[2,5,13,22,16,8]);JSM.AddPolygonToBody(e,[2,10,17,23,15,5]);JSM.AddPolygonToBody(e,[3,7,15,23,19,11]);JSM.AddPolygonToBody(e,[3,9,18,22,13,7]);return e};JSM.GenerateRhombicuboctahedron=function(){var e=new JSM.Body,t=1+Math.sqrt(2);JSM.AddVertexToBody(e,1,1,+t);JSM.AddVertexToBody(e,1,1,-t);JSM.AddVertexToBody(e,1,-1,+t);JSM.AddVertexToBody(e,-1,1,+t);JSM.AddVertexToBody(e,1,-1,-t);JSM.AddVertexToBody(e,-1,1,-t);JSM.AddVertexToBody(e,-1,-1,+t);JSM.AddVertexToBody(e,-1,-1,-t);JSM.AddVertexToBody(e,1,+t,1);JSM.AddVertexToBody(e,1,+t,-1);JSM.AddVertexToBody(e,1,-t,1);JSM.AddVertexToBody(e,-1,+t,1);JSM.AddVertexToBody(e,1,-t,-1);JSM.AddVertexToBody(e,-1,+t,-1);JSM.AddVertexToBody(e,-1,-t,1);JSM.AddVertexToBody(e,-1,-t,-1);JSM.AddVertexToBody(e,+t,1,1);JSM.AddVertexToBody(e,+t,1,-1);JSM.AddVertexToBody(e,+t,-1,1);JSM.AddVertexToBody(e,-t,1,1);JSM.AddVertexToBody(e,+t,-1,-1);JSM.AddVertexToBody(e,-t,1,-1);JSM.AddVertexToBody(e,-t,-1,1);JSM.AddVertexToBody(e,-t,-1,-1);JSM.AddPolygonToBody(e,[0,16,8]);JSM.AddPolygonToBody(e,[1,9,17]);JSM.AddPolygonToBody(e,[2,10,18]);JSM.AddPolygonToBody(e,[3,11,19]);JSM.AddPolygonToBody(e,[4,20,12]);JSM.AddPolygonToBody(e,[5,21,13]);JSM.AddPolygonToBody(e,[6,22,14]);JSM.AddPolygonToBody(e,[7,15,23]);JSM.AddPolygonToBody(e,[0,2,18,16]);JSM.AddPolygonToBody(e,[0,3,6,2]);JSM.AddPolygonToBody(e,[0,8,11,3]);JSM.AddPolygonToBody(e,[1,4,7,5]);JSM.AddPolygonToBody(e,[1,5,13,9]);JSM.AddPolygonToBody(e,[1,17,20,4]);JSM.AddPolygonToBody(e,[2,6,14,10]);JSM.AddPolygonToBody(e,[3,19,22,6]);JSM.AddPolygonToBody(e,[4,12,15,7]);JSM.AddPolygonToBody(e,[5,7,23,21]);JSM.AddPolygonToBody(e,[8,9,13,11]);JSM.AddPolygonToBody(e,[8,16,17,9]);JSM.AddPolygonToBody(e,[10,12,20,18]);JSM.AddPolygonToBody(e,[10,14,15,12]);JSM.AddPolygonToBody(e,[11,13,21,19]);JSM.AddPolygonToBody(e,[14,22,23,15]);JSM.AddPolygonToBody(e,[16,18,20,17]);JSM.AddPolygonToBody(e,[19,21,23,22]);return e};JSM.GenerateTruncatedCuboctahedron=function(){var e=new JSM.Body,t=1+Math.sqrt(2),n=1+2*Math.sqrt(2);JSM.AddVertexToBody(e,1,+t,+n);JSM.AddVertexToBody(e,1,+t,-n);JSM.AddVertexToBody(e,1,-t,+n);JSM.AddVertexToBody(e,-1,+t,+n);JSM.AddVertexToBody(e,1,-t,-n);JSM.AddVertexToBody(e,-1,+t,-n);JSM.AddVertexToBody(e,-1,-t,+n);JSM.AddVertexToBody(e,-1,-t,-n);JSM.AddVertexToBody(e,1,+n,+t);JSM.AddVertexToBody(e,1,-n,+t);JSM.AddVertexToBody(e,1,+n,-t);JSM.AddVertexToBody(e,-1,+n,+t);JSM.AddVertexToBody(e,1,-n,-t);JSM.AddVertexToBody(e,-1,-n,+t);JSM.AddVertexToBody(e,-1,+n,-t);JSM.AddVertexToBody(e,-1,-n,-t);JSM.AddVertexToBody(e,+t,1,+n);JSM.AddVertexToBody(e,+t,1,-n);JSM.AddVertexToBody(e,-t,1,+n);JSM.AddVertexToBody(e,+t,-1,+n);JSM.AddVertexToBody(e,-t,1,-n);JSM.AddVertexToBody(e,+t,-1,-n);JSM.AddVertexToBody(e,-t,-1,+n);JSM.AddVertexToBody(e,-t,-1,-n);JSM.AddVertexToBody(e,+t,+n,1);JSM.AddVertexToBody(e,+t,-n,1);JSM.AddVertexToBody(e,-t,+n,1);JSM.AddVertexToBody(e,+t,+n,-1);JSM.AddVertexToBody(e,-t,-n,1);JSM.AddVertexToBody(e,+t,-n,-1);JSM.AddVertexToBody(e,-t,+n,-1);JSM.AddVertexToBody(e,-t,-n,-1);JSM.AddVertexToBody(e,+n,1,+t);JSM.AddVertexToBody(e,-n,1,+t);JSM.AddVertexToBody(e,+n,1,-t);JSM.AddVertexToBody(e,+n,-1,+t);JSM.AddVertexToBody(e,-n,1,-t);JSM.AddVertexToBody(e,-n,-1,+t);JSM.AddVertexToBody(e,+n,-1,-t);JSM.AddVertexToBody(e,-n,-1,-t);JSM.AddVertexToBody(e,+n,+t,1);JSM.AddVertexToBody(e,-n,+t,1);JSM.AddVertexToBody(e,+n,-t,1);JSM.AddVertexToBody(e,+n,+t,-1);JSM.AddVertexToBody(e,-n,-t,1);JSM.AddVertexToBody(e,-n,+t,-1);JSM.AddVertexToBody(e,+n,-t,-1);JSM.AddVertexToBody(e,-n,-t,-1);JSM.AddPolygonToBody(e,[0,8,11,3]);JSM.AddPolygonToBody(e,[1,5,14,10]);JSM.AddPolygonToBody(e,[2,6,13,9]);JSM.AddPolygonToBody(e,[4,12,15,7]);JSM.AddPolygonToBody(e,[16,19,35,32]);JSM.AddPolygonToBody(e,[17,34,38,21]);JSM.AddPolygonToBody(e,[18,33,37,22]);JSM.AddPolygonToBody(e,[23,39,36,20]);JSM.AddPolygonToBody(e,[24,40,43,27]);JSM.AddPolygonToBody(e,[25,29,46,42]);JSM.AddPolygonToBody(e,[26,30,45,41]);JSM.AddPolygonToBody(e,[28,44,47,31]);JSM.AddPolygonToBody(e,[0,16,32,40,24,8]);JSM.AddPolygonToBody(e,[1,10,27,43,34,17]);JSM.AddPolygonToBody(e,[2,9,25,42,35,19]);JSM.AddPolygonToBody(e,[3,11,26,41,33,18]);JSM.AddPolygonToBody(e,[4,21,38,46,29,12]);JSM.AddPolygonToBody(e,[5,20,36,45,30,14]);JSM.AddPolygonToBody(e,[6,22,37,44,28,13]);JSM.AddPolygonToBody(e,[7,15,31,47,39,23]);JSM.AddPolygonToBody(e,[0,3,18,22,6,2,19,16]);JSM.AddPolygonToBody(e,[1,17,21,4,7,23,20,5]);JSM.AddPolygonToBody(e,[8,24,27,10,14,30,26,11]);JSM.AddPolygonToBody(e,[9,13,28,31,15,12,29,25]);JSM.AddPolygonToBody(e,[32,35,42,46,38,34,43,40]);JSM.AddPolygonToBody(e,[33,41,45,36,39,47,44,37]);return e};JSM.GenerateSnubCube=function(){var e=new JSM.Body,t=1/3*(Math.pow(17+3*Math.sqrt(33),1/3)-Math.pow(-17+3*Math.sqrt(33),1/3)-1),n=1/t;JSM.AddVertexToBody(e,1,+t,-n);JSM.AddVertexToBody(e,1,-t,+n);JSM.AddVertexToBody(e,-1,+t,+n);JSM.AddVertexToBody(e,-1,-t,-n);JSM.AddVertexToBody(e,+t,-n,1);JSM.AddVertexToBody(e,-t,+n,1);JSM.AddVertexToBody(e,+t,+n,-1);JSM.AddVertexToBody(e,-t,-n,-1);JSM.AddVertexToBody(e,-n,1,+t);JSM.AddVertexToBody(e,+n,1,-t);JSM.AddVertexToBody(e,+n,-1,+t);JSM.AddVertexToBody(e,-n,-1,-t);JSM.AddVertexToBody(e,1,+n,+t);JSM.AddVertexToBody(e,1,-n,-t);JSM.AddVertexToBody(e,-1,+n,-t);JSM.AddVertexToBody(e,-1,-n,+t);JSM.AddVertexToBody(e,+t,1,+n);JSM.AddVertexToBody(e,-t,1,-n);JSM.AddVertexToBody(e,-t,-1,+n);JSM.AddVertexToBody(e,+t,-1,-n);JSM.AddVertexToBody(e,+n,+t,1);JSM.AddVertexToBody(e,-n,-t,1);JSM.AddVertexToBody(e,+n,-t,-1);JSM.AddVertexToBody(e,-n,+t,-1);JSM.AddPolygonToBody(e,[0,6,9]);JSM.AddPolygonToBody(e,[0,9,22]);JSM.AddPolygonToBody(e,[0,17,6]);JSM.AddPolygonToBody(e,[0,22,19]);JSM.AddPolygonToBody(e,[1,4,10]);JSM.AddPolygonToBody(e,[1,10,20]);JSM.AddPolygonToBody(e,[1,18,4]);JSM.AddPolygonToBody(e,[1,20,16]);JSM.AddPolygonToBody(e,[2,5,8]);JSM.AddPolygonToBody(e,[2,8,21]);JSM.AddPolygonToBody(e,[2,16,5]);JSM.AddPolygonToBody(e,[2,21,18]);JSM.AddPolygonToBody(e,[3,7,11]);JSM.AddPolygonToBody(e,[3,11,23]);JSM.AddPolygonToBody(e,[3,19,7]);JSM.AddPolygonToBody(e,[3,23,17]);JSM.AddPolygonToBody(e,[4,13,10]);JSM.AddPolygonToBody(e,[4,18,15]);JSM.AddPolygonToBody(e,[5,14,8]);JSM.AddPolygonToBody(e,[5,16,12]);JSM.AddPolygonToBody(e,[6,12,9]);JSM.AddPolygonToBody(e,[6,17,14]);JSM.AddPolygonToBody(e,[7,15,11]);JSM.AddPolygonToBody(e,[7,19,13]);JSM.AddPolygonToBody(e,[8,14,23]);JSM.AddPolygonToBody(e,[9,12,20]);JSM.AddPolygonToBody(e,[10,13,22]);JSM.AddPolygonToBody(e,[11,15,21]);JSM.AddPolygonToBody(e,[12,16,20]);JSM.AddPolygonToBody(e,[13,19,22]);JSM.AddPolygonToBody(e,[14,17,23]);JSM.AddPolygonToBody(e,[15,18,21]);JSM.AddPolygonToBody(e,[0,19,3,17]);JSM.AddPolygonToBody(e,[1,16,2,18]);JSM.AddPolygonToBody(e,[4,15,7,13]);JSM.AddPolygonToBody(e,[5,12,6,14]);JSM.AddPolygonToBody(e,[8,23,11,21]);JSM.AddPolygonToBody(e,[9,20,10,22]);return e};JSM.GenerateIcosidodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=t/2,r=(1+t)/2;JSM.AddVertexToBody(e,0,0,+t);JSM.AddVertexToBody(e,0,0,-t);JSM.AddVertexToBody(e,0,+t,0);JSM.AddVertexToBody(e,0,-t,0);JSM.AddVertexToBody(e,+t,0,0);JSM.AddVertexToBody(e,-t,0,0);JSM.AddVertexToBody(e,.5,+n,+r);JSM.AddVertexToBody(e,.5,+n,-r);JSM.AddVertexToBody(e,.5,-n,+r);JSM.AddVertexToBody(e,-.5,+n,+r);JSM.AddVertexToBody(e,.5,-n,-r);JSM.AddVertexToBody(e,-.5,+n,-r);JSM.AddVertexToBody(e,-.5,-n,+r);JSM.AddVertexToBody(e,-.5,-n,-r);JSM.AddVertexToBody(e,+n,+r,.5);JSM.AddVertexToBody(e,+n,-r,.5);JSM.AddVertexToBody(e,-n,+r,.5);JSM.AddVertexToBody(e,+n,+r,-.5);JSM.AddVertexToBody(e,-n,-r,.5);JSM.AddVertexToBody(e,+n,-r,-.5);JSM.AddVertexToBody(e,-n,+r,-.5);JSM.AddVertexToBody(e,-n,-r,-.5);JSM.AddVertexToBody(e,+r,.5,+n);JSM.AddVertexToBody(e,-r,.5,+n);JSM.AddVertexToBody(e,+r,.5,-n);JSM.AddVertexToBody(e,+r,-.5,+n);JSM.AddVertexToBody(e,-r,.5,-n);JSM.AddVertexToBody(e,-r,-.5,+n);JSM.AddVertexToBody(e,+r,-.5,-n);JSM.AddVertexToBody(e,-r,-.5,-n);JSM.AddPolygonToBody(e,[0,6,9]);JSM.AddPolygonToBody(e,[0,12,8]);JSM.AddPolygonToBody(e,[1,10,13]);JSM.AddPolygonToBody(e,[1,11,7]);JSM.AddPolygonToBody(e,[2,14,17]);JSM.AddPolygonToBody(e,[2,20,16]);JSM.AddPolygonToBody(e,[3,18,21]);JSM.AddPolygonToBody(e,[3,19,15]);JSM.AddPolygonToBody(e,[4,22,25]);JSM.AddPolygonToBody(e,[4,28,24]);JSM.AddPolygonToBody(e,[5,26,29]);JSM.AddPolygonToBody(e,[5,27,23]);JSM.AddPolygonToBody(e,[6,22,14]);JSM.AddPolygonToBody(e,[7,17,24]);JSM.AddPolygonToBody(e,[8,15,25]);JSM.AddPolygonToBody(e,[9,16,23]);JSM.AddPolygonToBody(e,[10,28,19]);JSM.AddPolygonToBody(e,[11,26,20]);JSM.AddPolygonToBody(e,[12,27,18]);JSM.AddPolygonToBody(e,[13,21,29]);JSM.AddPolygonToBody(e,[0,8,25,22,6]);JSM.AddPolygonToBody(e,[0,9,23,27,12]);JSM.AddPolygonToBody(e,[1,7,24,28,10]);JSM.AddPolygonToBody(e,[1,13,29,26,11]);JSM.AddPolygonToBody(e,[2,16,9,6,14]);JSM.AddPolygonToBody(e,[2,17,7,11,20]);JSM.AddPolygonToBody(e,[3,15,8,12,18]);JSM.AddPolygonToBody(e,[3,21,13,10,19]);JSM.AddPolygonToBody(e,[4,24,17,14,22]);JSM.AddPolygonToBody(e,[4,25,15,19,28]);JSM.AddPolygonToBody(e,[5,23,16,20,26]);JSM.AddPolygonToBody(e,[5,29,21,18,27]);return e};JSM.GenerateTruncatedDodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=1/t,r=2+t,i=2*t,s=Math.pow(t,2);JSM.AddVertexToBody(e,0,+n,+r);JSM.AddVertexToBody(e,0,+n,-r);JSM.AddVertexToBody(e,0,-n,+r);JSM.AddVertexToBody(e,0,-n,-r);JSM.AddVertexToBody(e,+r,0,+n);JSM.AddVertexToBody(e,-r,0,+n);JSM.AddVertexToBody(e,+r,0,-n);JSM.AddVertexToBody(e,-r,0,-n);JSM.AddVertexToBody(e,+n,+r,0);JSM.AddVertexToBody(e,+n,-r,0);JSM.AddVertexToBody(e,-n,+r,0);JSM.AddVertexToBody(e,-n,-r,0);JSM.AddVertexToBody(e,+n,+t,+i);JSM.AddVertexToBody(e,+n,+t,-i);JSM.AddVertexToBody(e,+n,-t,+i);JSM.AddVertexToBody(e,-n,+t,+i);JSM.AddVertexToBody(e,+n,-t,-i);JSM.AddVertexToBody(e,-n,+t,-i);JSM.AddVertexToBody(e,-n,-t,+i);JSM.AddVertexToBody(e,-n,-t,-i);JSM.AddVertexToBody(e,+i,+n,+t);JSM.AddVertexToBody(e,+i,+n,-t);JSM.AddVertexToBody(e,+i,-n,+t);JSM.AddVertexToBody(e,-i,+n,+t);JSM.AddVertexToBody(e,+i,-n,-t);JSM.AddVertexToBody(e,-i,+n,-t);JSM.AddVertexToBody(e,-i,-n,+t);JSM.AddVertexToBody(e,-i,-n,-t);JSM.AddVertexToBody(e,+t,+i,+n);JSM.AddVertexToBody(e,+t,+i,-n);JSM.AddVertexToBody(e,+t,-i,+n);JSM.AddVertexToBody(e,-t,+i,+n);JSM.AddVertexToBody(e,+t,-i,-n);JSM.AddVertexToBody(e,-t,+i,-n);JSM.AddVertexToBody(e,-t,-i,+n);JSM.AddVertexToBody(e,-t,-i,-n);JSM.AddVertexToBody(e,+t,2,+s);JSM.AddVertexToBody(e,+t,2,-s);JSM.AddVertexToBody(e,+t,-2,+s);JSM.AddVertexToBody(e,-t,2,+s);JSM.AddVertexToBody(e,+t,-2,-s);JSM.AddVertexToBody(e,-t,2,-s);JSM.AddVertexToBody(e,-t,-2,+s);JSM.AddVertexToBody(e,-t,-2,-s);JSM.AddVertexToBody(e,+s,+t,2);JSM.AddVertexToBody(e,+s,+t,-2);JSM.AddVertexToBody(e,+s,-t,2);JSM.AddVertexToBody(e,-s,+t,2);JSM.AddVertexToBody(e,+s,-t,-2);JSM.AddVertexToBody(e,-s,+t,-2);JSM.AddVertexToBody(e,-s,-t,2);JSM.AddVertexToBody(e,-s,-t,-2);JSM.AddVertexToBody(e,2,+s,+t);JSM.AddVertexToBody(e,2,+s,-t);JSM.AddVertexToBody(e,2,-s,+t);JSM.AddVertexToBody(e,-2,+s,+t);JSM.AddVertexToBody(e,2,-s,-t);JSM.AddVertexToBody(e,-2,+s,-t);JSM.AddVertexToBody(e,-2,-s,+t);JSM.AddVertexToBody(e,-2,-s,-t);JSM.AddPolygonToBody(e,[0,12,15]);JSM.AddPolygonToBody(e,[1,17,13]);JSM.AddPolygonToBody(e,[2,18,14]);JSM.AddPolygonToBody(e,[3,16,19]);JSM.AddPolygonToBody(e,[4,20,22]);JSM.AddPolygonToBody(e,[5,26,23]);JSM.AddPolygonToBody(e,[6,24,21]);JSM.AddPolygonToBody(e,[7,25,27]);JSM.AddPolygonToBody(e,[8,28,29]);JSM.AddPolygonToBody(e,[9,32,30]);JSM.AddPolygonToBody(e,[10,33,31]);JSM.AddPolygonToBody(e,[11,34,35]);JSM.AddPolygonToBody(e,[36,44,52]);JSM.AddPolygonToBody(e,[37,53,45]);JSM.AddPolygonToBody(e,[38,54,46]);JSM.AddPolygonToBody(e,[39,55,47]);JSM.AddPolygonToBody(e,[40,48,56]);JSM.AddPolygonToBody(e,[41,49,57]);JSM.AddPolygonToBody(e,[42,50,58]);JSM.AddPolygonToBody(e,[43,59,51]);JSM.AddPolygonToBody(e,[0,2,14,38,46,22,20,44,36,12]);JSM.AddPolygonToBody(e,[0,15,39,47,23,26,50,42,18,2]);JSM.AddPolygonToBody(e,[1,3,19,43,51,27,25,49,41,17]);JSM.AddPolygonToBody(e,[1,13,37,45,21,24,48,40,16,3]);JSM.AddPolygonToBody(e,[4,6,21,45,53,29,28,52,44,20]);JSM.AddPolygonToBody(e,[4,22,46,54,30,32,56,48,24,6]);JSM.AddPolygonToBody(e,[5,7,27,51,59,35,34,58,50,26]);JSM.AddPolygonToBody(e,[5,23,47,55,31,33,57,49,25,7]);JSM.AddPolygonToBody(e,[8,10,31,55,39,15,12,36,52,28]);JSM.AddPolygonToBody(e,[8,29,53,37,13,17,41,57,33,10]);JSM.AddPolygonToBody(e,[9,11,35,59,43,19,16,40,56,32]);JSM.AddPolygonToBody(e,[9,30,54,38,14,18,42,58,34,11]);return e};JSM.GenerateTruncatedIcosahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=3*t,r=1+2*t,i=2+t,s=2*t;JSM.AddVertexToBody(e,0,1,+n);JSM.AddVertexToBody(e,0,1,-n);JSM.AddVertexToBody(e,0,-1,+n);JSM.AddVertexToBody(e,0,-1,-n);JSM.AddVertexToBody(e,1,+n,0);JSM.AddVertexToBody(e,1,-n,0);JSM.AddVertexToBody(e,-1,+n,0);JSM.AddVertexToBody(e,-1,-n,0);JSM.AddVertexToBody(e,+n,0,1);JSM.AddVertexToBody(e,-n,0,1);JSM.AddVertexToBody(e,+n,0,-1);JSM.AddVertexToBody(e,-n,0,-1);JSM.AddVertexToBody(e,2,+r,+t);JSM.AddVertexToBody(e,2,+r,-t);JSM.AddVertexToBody(e,2,-r,+t);JSM.AddVertexToBody(e,-2,+r,+t);JSM.AddVertexToBody(e,2,-r,-t);JSM.AddVertexToBody(e,-2,+r,-t);JSM.AddVertexToBody(e,-2,-r,+t);JSM.AddVertexToBody(e,-2,-r,-t);JSM.AddVertexToBody(e,+r,+t,2);JSM.AddVertexToBody(e,+r,-t,2);JSM.AddVertexToBody(e,-r,+t,2);JSM.AddVertexToBody(e,+r,+t,-2);JSM.AddVertexToBody(e,-r,-t,2);JSM.AddVertexToBody(e,+r,-t,-2);JSM.AddVertexToBody(e,-r,+t,-2);JSM.AddVertexToBody(e,-r,-t,-2);JSM.AddVertexToBody(e,+t,2,+r);JSM.AddVertexToBody(e,-t,2,+r);JSM.AddVertexToBody(e,+t,2,-r);JSM.AddVertexToBody(e,+t,-2,+r);JSM.AddVertexToBody(e,-t,2,-r);JSM.AddVertexToBody(e,-t,-2,+r);JSM.AddVertexToBody(e,+t,-2,-r);JSM.AddVertexToBody(e,-t,-2,-r);JSM.AddVertexToBody(e,1,+i,+s);JSM.AddVertexToBody(e,1,+i,-s);JSM.AddVertexToBody(e,1,-i,+s);JSM.AddVertexToBody(e,-1,+i,+s);JSM.AddVertexToBody(e,1,-i,-s);JSM.AddVertexToBody(e,-1,+i,-s);JSM.AddVertexToBody(e,-1,-i,+s);JSM.AddVertexToBody(e,-1,-i,-s);JSM.AddVertexToBody(e,+i,+s,1);JSM.AddVertexToBody(e,+i,-s,1);JSM.AddVertexToBody(e,-i,+s,1);JSM.AddVertexToBody(e,+i,+s,-1);JSM.AddVertexToBody(e,-i,-s,1);JSM.AddVertexToBody(e,+i,-s,-1);JSM.AddVertexToBody(e,-i,+s,-1);JSM.AddVertexToBody(e,-i,-s,-1);JSM.AddVertexToBody(e,+s,1,+i);JSM.AddVertexToBody(e,-s,1,+i);JSM.AddVertexToBody(e,+s,1,-i);JSM.AddVertexToBody(e,+s,-1,+i);JSM.AddVertexToBody(e,-s,1,-i);JSM.AddVertexToBody(e,-s,-1,+i);JSM.AddVertexToBody(e,+s,-1,-i);JSM.AddVertexToBody(e,-s,-1,-i);JSM.AddPolygonToBody(e,[0,28,36,39,29]);JSM.AddPolygonToBody(e,[1,32,41,37,30]);JSM.AddPolygonToBody(e,[2,33,42,38,31]);JSM.AddPolygonToBody(e,[3,34,40,43,35]);JSM.AddPolygonToBody(e,[4,12,44,47,13]);JSM.AddPolygonToBody(e,[5,16,49,45,14]);JSM.AddPolygonToBody(e,[6,17,50,46,15]);JSM.AddPolygonToBody(e,[7,18,48,51,19]);JSM.AddPolygonToBody(e,[8,20,52,55,21]);JSM.AddPolygonToBody(e,[9,24,57,53,22]);JSM.AddPolygonToBody(e,[10,25,58,54,23]);JSM.AddPolygonToBody(e,[11,26,56,59,27]);JSM.AddPolygonToBody(e,[0,2,31,55,52,28]);JSM.AddPolygonToBody(e,[0,29,53,57,33,2]);JSM.AddPolygonToBody(e,[1,3,35,59,56,32]);JSM.AddPolygonToBody(e,[1,30,54,58,34,3]);JSM.AddPolygonToBody(e,[4,6,15,39,36,12]);JSM.AddPolygonToBody(e,[4,13,37,41,17,6]);JSM.AddPolygonToBody(e,[5,7,19,43,40,16]);JSM.AddPolygonToBody(e,[5,14,38,42,18,7]);JSM.AddPolygonToBody(e,[8,10,23,47,44,20]);JSM.AddPolygonToBody(e,[8,21,45,49,25,10]);JSM.AddPolygonToBody(e,[9,11,27,51,48,24]);JSM.AddPolygonToBody(e,[9,22,46,50,26,11]);JSM.AddPolygonToBody(e,[12,36,28,52,20,44]);JSM.AddPolygonToBody(e,[13,47,23,54,30,37]);JSM.AddPolygonToBody(e,[14,45,21,55,31,38]);JSM.AddPolygonToBody(e,[15,46,22,53,29,39]);JSM.AddPolygonToBody(e,[16,40,34,58,25,49]);JSM.AddPolygonToBody(e,[17,41,32,56,26,50]);JSM.AddPolygonToBody(e,[18,42,33,57,24,48]);JSM.AddPolygonToBody(e,[19,51,27,59,35,43]);return e};JSM.GenerateRhombicosidodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=Math.pow(t,2),r=Math.pow(t,3),i=2*t,s=2+t;JSM.AddVertexToBody(e,1,1,+r);JSM.AddVertexToBody(e,1,1,-r);JSM.AddVertexToBody(e,1,-1,+r);JSM.AddVertexToBody(e,-1,1,+r);JSM.AddVertexToBody(e,1,-1,-r);JSM.AddVertexToBody(e,-1,1,-r);JSM.AddVertexToBody(e,-1,-1,+r);JSM.AddVertexToBody(e,-1,-1,-r);JSM.AddVertexToBody(e,+r,1,1);JSM.AddVertexToBody(e,+r,1,-1);JSM.AddVertexToBody(e,+r,-1,1);JSM.AddVertexToBody(e,-r,1,1);JSM.AddVertexToBody(e,+r,-1,-1);JSM.AddVertexToBody(e,-r,1,-1);JSM.AddVertexToBody(e,-r,-1,1);JSM.AddVertexToBody(e,-r,-1,-1);JSM.AddVertexToBody(e,1,+r,1);JSM.AddVertexToBody(e,1,+r,-1);JSM.AddVertexToBody(e,1,-r,1);JSM.AddVertexToBody(e,-1,+r,1);JSM.AddVertexToBody(e,1,-r,-1);JSM.AddVertexToBody(e,-1,+r,-1);JSM.AddVertexToBody(e,-1,-r,1);JSM.AddVertexToBody(e,-1,-r,-1);JSM.AddVertexToBody(e,+n,+t,+i);JSM.AddVertexToBody(e,+n,+t,-i);JSM.AddVertexToBody(e,+n,-t,+i);JSM.AddVertexToBody(e,-n,+t,+i);JSM.AddVertexToBody(e,+n,-t,-i);JSM.AddVertexToBody(e,-n,+t,-i);JSM.AddVertexToBody(e,-n,-t,+i);JSM.AddVertexToBody(e,-n,-t,-i);JSM.AddVertexToBody(e,+i,+n,+t);JSM.AddVertexToBody(e,+i,+n,-t);JSM.AddVertexToBody(e,+i,-n,+t);JSM.AddVertexToBody(e,-i,+n,+t);JSM.AddVertexToBody(e,+i,-n,-t);JSM.AddVertexToBody(e,-i,+n,-t);JSM.AddVertexToBody(e,-i,-n,+t);JSM.AddVertexToBody(e,-i,-n,-t);JSM.AddVertexToBody(e,+t,+i,+n);JSM.AddVertexToBody(e,+t,+i,-n);JSM.AddVertexToBody(e,+t,-i,+n);JSM.AddVertexToBody(e,-t,+i,+n);JSM.AddVertexToBody(e,+t,-i,-n);JSM.AddVertexToBody(e,-t,+i,-n);JSM.AddVertexToBody(e,-t,-i,+n);JSM.AddVertexToBody(e,-t,-i,-n);JSM.AddVertexToBody(e,+s,0,+n);JSM.AddVertexToBody(e,+s,0,-n);JSM.AddVertexToBody(e,-s,0,+n);JSM.AddVertexToBody(e,-s,0,-n);JSM.AddVertexToBody(e,+n,+s,0);JSM.AddVertexToBody(e,-n,+s,0);JSM.AddVertexToBody(e,+n,-s,0);JSM.AddVertexToBody(e,-n,-s,0);JSM.AddVertexToBody(e,0,+n,+s);JSM.AddVertexToBody(e,0,-n,+s);JSM.AddVertexToBody(e,0,+n,-s);JSM.AddVertexToBody(e,0,-n,-s);JSM.AddPolygonToBody(e,[0,56,3]);JSM.AddPolygonToBody(e,[1,5,58]);JSM.AddPolygonToBody(e,[2,6,57]);JSM.AddPolygonToBody(e,[4,59,7]);JSM.AddPolygonToBody(e,[8,48,10]);JSM.AddPolygonToBody(e,[9,12,49]);JSM.AddPolygonToBody(e,[11,14,50]);JSM.AddPolygonToBody(e,[13,51,15]);JSM.AddPolygonToBody(e,[16,52,17]);JSM.AddPolygonToBody(e,[18,20,54]);JSM.AddPolygonToBody(e,[19,21,53]);JSM.AddPolygonToBody(e,[22,55,23]);JSM.AddPolygonToBody(e,[24,32,40]);JSM.AddPolygonToBody(e,[25,41,33]);JSM.AddPolygonToBody(e,[26,42,34]);JSM.AddPolygonToBody(e,[27,43,35]);JSM.AddPolygonToBody(e,[28,36,44]);JSM.AddPolygonToBody(e,[29,37,45]);JSM.AddPolygonToBody(e,[30,38,46]);JSM.AddPolygonToBody(e,[31,47,39]);JSM.AddPolygonToBody(e,[0,3,6,2]);JSM.AddPolygonToBody(e,[0,24,40,56]);JSM.AddPolygonToBody(e,[1,4,7,5]);JSM.AddPolygonToBody(e,[1,58,41,25]);JSM.AddPolygonToBody(e,[2,57,42,26]);JSM.AddPolygonToBody(e,[3,56,43,27]);JSM.AddPolygonToBody(e,[4,28,44,59]);JSM.AddPolygonToBody(e,[5,29,45,58]);JSM.AddPolygonToBody(e,[6,30,46,57]);JSM.AddPolygonToBody(e,[7,59,47,31]);JSM.AddPolygonToBody(e,[8,10,12,9]);JSM.AddPolygonToBody(e,[8,32,24,48]);JSM.AddPolygonToBody(e,[9,49,25,33]);JSM.AddPolygonToBody(e,[10,48,26,34]);JSM.AddPolygonToBody(e,[11,13,15,14]);JSM.AddPolygonToBody(e,[11,50,27,35]);JSM.AddPolygonToBody(e,[12,36,28,49]);JSM.AddPolygonToBody(e,[13,37,29,51]);JSM.AddPolygonToBody(e,[14,38,30,50]);JSM.AddPolygonToBody(e,[15,51,31,39]);JSM.AddPolygonToBody(e,[16,17,21,19]);JSM.AddPolygonToBody(e,[16,40,32,52]);JSM.AddPolygonToBody(e,[17,52,33,41]);JSM.AddPolygonToBody(e,[18,22,23,20]);JSM.AddPolygonToBody(e,[18,54,34,42]);JSM.AddPolygonToBody(e,[19,53,35,43]);JSM.AddPolygonToBody(e,[20,44,36,54]);JSM.AddPolygonToBody(e,[21,45,37,53]);JSM.AddPolygonToBody(e,[22,46,38,55]);JSM.AddPolygonToBody(e,[23,55,39,47]);JSM.AddPolygonToBody(e,[0,2,26,48,24]);JSM.AddPolygonToBody(e,[1,25,49,28,4]);JSM.AddPolygonToBody(e,[3,27,50,30,6]);JSM.AddPolygonToBody(e,[5,7,31,51,29]);JSM.AddPolygonToBody(e,[8,9,33,52,32]);JSM.AddPolygonToBody(e,[10,34,54,36,12]);JSM.AddPolygonToBody(e,[11,35,53,37,13]);JSM.AddPolygonToBody(e,[14,15,39,55,38]);JSM.AddPolygonToBody(e,[16,19,43,56,40]);JSM.AddPolygonToBody(e,[17,41,58,45,21]);JSM.AddPolygonToBody(e,[18,42,57,46,22]);JSM.AddPolygonToBody(e,[20,23,47,59,44]);return e};JSM.GenerateTruncatedIcosidodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=1/t,r=3+t,i=2/t,s=1+2*t,o=Math.pow(t,2),u=-1+3*t,a=-1+2*t,f=2+t,l=2*t;JSM.AddVertexToBody(e,+n,+n,+r);JSM.AddVertexToBody(e,+n,+n,-r);JSM.AddVertexToBody(e,+n,-n,+r);JSM.AddVertexToBody(e,-n,+n,+r);JSM.AddVertexToBody(e,+n,-n,-r);JSM.AddVertexToBody(e,-n,+n,-r);JSM.AddVertexToBody(e,-n,-n,+r);JSM.AddVertexToBody(e,-n,-n,-r);JSM.AddVertexToBody(e,+n,+r,+n);JSM.AddVertexToBody(e,+n,-r,+n);JSM.AddVertexToBody(e,-n,+r,+n);JSM.AddVertexToBody(e,+n,+r,-n);JSM.AddVertexToBody(e,-n,-r,+n);JSM.AddVertexToBody(e,+n,-r,-n);JSM.AddVertexToBody(e,-n,+r,-n);JSM.AddVertexToBody(e,-n,-r,-n);JSM.AddVertexToBody(e,+r,+n,+n);JSM.AddVertexToBody(e,-r,+n,+n);JSM.AddVertexToBody(e,+r,+n,-n);JSM.AddVertexToBody(e,+r,-n,+n);JSM.AddVertexToBody(e,-r,+n,-n);JSM.AddVertexToBody(e,-r,-n,+n);JSM.AddVertexToBody(e,+r,-n,-n);JSM.AddVertexToBody(e,-r,-n,-n);JSM.AddVertexToBody(e,+i,+t,+s);JSM.AddVertexToBody(e,+i,+t,-s);JSM.AddVertexToBody(e,+i,-t,+s);JSM.AddVertexToBody(e,-i,+t,+s);JSM.AddVertexToBody(e,+i,-t,-s);JSM.AddVertexToBody(e,-i,+t,-s);JSM.AddVertexToBody(e,-i,-t,+s);JSM.AddVertexToBody(e,-i,-t,-s);JSM.AddVertexToBody(e,+t,+s,+i);JSM.AddVertexToBody(e,+t,-s,+i);JSM.AddVertexToBody(e,-t,+s,+i);JSM.AddVertexToBody(e,+t,+s,-i);JSM.AddVertexToBody(e,-t,-s,+i);JSM.AddVertexToBody(e,+t,-s,-i);JSM.AddVertexToBody(e,-t,+s,-i);JSM.AddVertexToBody(e,-t,-s,-i);JSM.AddVertexToBody(e,+s,+i,+t);JSM.AddVertexToBody(e,-s,+i,+t);JSM.AddVertexToBody(e,+s,+i,-t);JSM.AddVertexToBody(e,+s,-i,+t);JSM.AddVertexToBody(e,-s,+i,-t);JSM.AddVertexToBody(e,-s,-i,+t);JSM.AddVertexToBody(e,+s,-i,-t);JSM.AddVertexToBody(e,-s,-i,-t);JSM.AddVertexToBody(e,+n,+o,+u);JSM.AddVertexToBody(e,+n,+o,-u);JSM.AddVertexToBody(e,+n,-o,+u);JSM.AddVertexToBody(e,-n,+o,+u);JSM.AddVertexToBody(e,+n,-o,-u);JSM.AddVertexToBody(e,-n,+o,-u);JSM.AddVertexToBody(e,-n,-o,+u);JSM.AddVertexToBody(e,-n,-o,-u);JSM.AddVertexToBody(e,+o,+u,+n);JSM.AddVertexToBody(e,+o,-u,+n);JSM.AddVertexToBody(e,-o,+u,+n);JSM.AddVertexToBody(e,+o,+u,-n);JSM.AddVertexToBody(e,-o,-u,+n);JSM.AddVertexToBody(e,+o,-u,-n);JSM.AddVertexToBody(e,-o,+u,-n);JSM.AddVertexToBody(e,-o,-u,-n);JSM.AddVertexToBody(e,+u,+n,+o);JSM.AddVertexToBody(e,-u,+n,+o);JSM.AddVertexToBody(e,+u,+n,-o);JSM.AddVertexToBody(e,+u,-n,+o);JSM.AddVertexToBody(e,-u,+n,-o);JSM.AddVertexToBody(e,-u,-n,+o);JSM.AddVertexToBody(e,+u,-n,-o);JSM.AddVertexToBody(e,-u,-n,-o);JSM.AddVertexToBody(e,+a,2,+f);JSM.AddVertexToBody(e,+a,2,-f);JSM.AddVertexToBody(e,+a,-2,+f);JSM.AddVertexToBody(e,-a,2,+f);JSM.AddVertexToBody(e,+a,-2,-f);JSM.AddVertexToBody(e,-a,2,-f);JSM.AddVertexToBody(e,-a,-2,+f);JSM.AddVertexToBody(e,-a,-2,-f);JSM.AddVertexToBody(e,2,+f,+a);JSM.AddVertexToBody(e,2,-f,+a);JSM.AddVertexToBody(e,-2,+f,+a);JSM.AddVertexToBody(e,2,+f,-a);JSM.AddVertexToBody(e,-2,-f,+a);JSM.AddVertexToBody(e,2,-f,-a);JSM.AddVertexToBody(e,-2,+f,-a);JSM.AddVertexToBody(e,-2,-f,-a);JSM.AddVertexToBody(e,+f,+a,2);JSM.AddVertexToBody(e,-f,+a,2);JSM.AddVertexToBody(e,+f,+a,-2);JSM.AddVertexToBody(e,+f,-a,2);JSM.AddVertexToBody(e,-f,+a,-2);JSM.AddVertexToBody(e,-f,-a,2);JSM.AddVertexToBody(e,+f,-a,-2);JSM.AddVertexToBody(e,-f,-a,-2);JSM.AddVertexToBody(e,+t,3,+l);JSM.AddVertexToBody(e,+t,3,-l);JSM.AddVertexToBody(e,+t,-3,+l);JSM.AddVertexToBody(e,-t,3,+l);JSM.AddVertexToBody(e,+t,-3,-l);JSM.AddVertexToBody(e,-t,3,-l);JSM.AddVertexToBody(e,-t,-3,+l);JSM.AddVertexToBody(e,-t,-3,-l);JSM.AddVertexToBody(e,3,+l,+t);JSM.AddVertexToBody(e,3,-l,+t);JSM.AddVertexToBody(e,-3,+l,+t);JSM.AddVertexToBody(e,3,+l,-t);JSM.AddVertexToBody(e,-3,-l,+t);JSM.AddVertexToBody(e,3,-l,-t);JSM.AddVertexToBody(e,-3,+l,-t);JSM.AddVertexToBody(e,-3,-l,-t);JSM.AddVertexToBody(e,+l,+t,3);JSM.AddVertexToBody(e,-l,+t,3);JSM.AddVertexToBody(e,+l,+t,-3);JSM.AddVertexToBody(e,+l,-t,3);JSM.AddVertexToBody(e,-l,+t,-3);JSM.AddVertexToBody(e,-l,-t,3);JSM.AddVertexToBody(e,+l,-t,-3);JSM.AddVertexToBody(e,-l,-t,-3);JSM.AddPolygonToBody(e,[0,3,6,2]);JSM.AddPolygonToBody(e,[1,4,7,5]);JSM.AddPolygonToBody(e,[8,11,14,10]);JSM.AddPolygonToBody(e,[9,12,15,13]);JSM.AddPolygonToBody(e,[16,19,22,18]);JSM.AddPolygonToBody(e,[17,20,23,21]);JSM.AddPolygonToBody(e,[24,72,96,48]);JSM.AddPolygonToBody(e,[25,49,97,73]);JSM.AddPolygonToBody(e,[26,50,98,74]);JSM.AddPolygonToBody(e,[27,51,99,75]);JSM.AddPolygonToBody(e,[28,76,100,52]);JSM.AddPolygonToBody(e,[29,77,101,53]);JSM.AddPolygonToBody(e,[30,78,102,54]);JSM.AddPolygonToBody(e,[31,55,103,79]);JSM.AddPolygonToBody(e,[32,80,104,56]);JSM.AddPolygonToBody(e,[33,57,105,81]);JSM.AddPolygonToBody(e,[34,58,106,82]);JSM.AddPolygonToBody(e,[35,59,107,83]);JSM.AddPolygonToBody(e,[36,84,108,60]);JSM.AddPolygonToBody(e,[37,85,109,61]);JSM.AddPolygonToBody(e,[38,86,110,62]);JSM.AddPolygonToBody(e,[39,63,111,87]);JSM.AddPolygonToBody(e,[40,88,112,64]);JSM.AddPolygonToBody(e,[41,65,113,89]);JSM.AddPolygonToBody(e,[42,66,114,90]);JSM.AddPolygonToBody(e,[43,67,115,91]);JSM.AddPolygonToBody(e,[44,92,116,68]);JSM.AddPolygonToBody(e,[45,93,117,69]);JSM.AddPolygonToBody(e,[46,94,118,70]);JSM.AddPolygonToBody(e,[47,71,119,95]);JSM.AddPolygonToBody(e,[0,24,48,51,27,3]);JSM.AddPolygonToBody(e,[1,5,29,53,49,25]);JSM.AddPolygonToBody(e,[2,6,30,54,50,26]);JSM.AddPolygonToBody(e,[4,28,52,55,31,7]);JSM.AddPolygonToBody(e,[8,32,56,59,35,11]);JSM.AddPolygonToBody(e,[9,13,37,61,57,33]);JSM.AddPolygonToBody(e,[10,14,38,62,58,34]);JSM.AddPolygonToBody(e,[12,36,60,63,39,15]);JSM.AddPolygonToBody(e,[16,40,64,67,43,19]);JSM.AddPolygonToBody(e,[17,21,45,69,65,41]);JSM.AddPolygonToBody(e,[18,22,46,70,66,42]);JSM.AddPolygonToBody(e,[20,44,68,71,47,23]);JSM.AddPolygonToBody(e,[72,112,88,104,80,96]);JSM.AddPolygonToBody(e,[73,97,83,107,90,114]);JSM.AddPolygonToBody(e,[74,98,81,105,91,115]);JSM.AddPolygonToBody(e,[75,99,82,106,89,113]);JSM.AddPolygonToBody(e,[76,118,94,109,85,100]);JSM.AddPolygonToBody(e,[78,117,93,108,84,102]);JSM.AddPolygonToBody(e,[79,103,87,111,95,119]);JSM.AddPolygonToBody(e,[86,101,77,116,92,110]);JSM.AddPolygonToBody(e,[0,2,26,74,115,67,64,112,72,24]);JSM.AddPolygonToBody(e,[1,25,73,114,66,70,118,76,28,4]);JSM.AddPolygonToBody(e,[3,27,75,113,65,69,117,78,30,6]);JSM.AddPolygonToBody(e,[5,7,31,79,119,71,68,116,77,29]);JSM.AddPolygonToBody(e,[8,10,34,82,99,51,48,96,80,32]);JSM.AddPolygonToBody(e,[9,33,81,98,50,54,102,84,36,12]);JSM.AddPolygonToBody(e,[11,35,83,97,49,53,101,86,38,14]);JSM.AddPolygonToBody(e,[13,15,39,87,103,55,52,100,85,37]);JSM.AddPolygonToBody(e,[16,18,42,90,107,59,56,104,88,40]);JSM.AddPolygonToBody(e,[17,41,89,106,58,62,110,92,44,20]);JSM.AddPolygonToBody(e,[19,43,91,105,57,61,109,94,46,22]);JSM.AddPolygonToBody(e,[21,23,47,95,111,63,60,108,93,45]);return e};JSM.GenerateSnubDodecahedron=function(){var e=new JSM.Body,t=(1+Math.sqrt(5))/2,n=Math.pow(t/2+.5*Math.sqrt(t-5/27),1/3)+Math.pow(t/2-.5*Math.sqrt(t-5/27),1/3),r=n-1/n,i=n*t+Math.pow(t,2)+t/n,n=2*r,s=2*i,o=r+i/t+t,u=-(r*t)+i+1/t,a=r/t+i*t-1,f=-(r/t)+i*t+1,l=-r+i/t-t,c=r*t+i-1/t,h=-(r/t)+i*t-1,p=r-i/t-t,d=r*t+i+1/t,v=r+i/t-t,m=r*t-i+1/t,t=r/t+i*t+1;JSM.AddVertexToBody(e,+n,2,-s);JSM.AddVertexToBody(e,+n,-2,+s);JSM.AddVertexToBody(e,-n,2,+s);JSM.AddVertexToBody(e,-n,-2,-s);JSM.AddVertexToBody(e,2,-s,+n);JSM.AddVertexToBody(e,-2,+s,+n);JSM.AddVertexToBody(e,2,+s,-n);JSM.AddVertexToBody(e,-2,-s,-n);JSM.AddVertexToBody(e,-s,+n,2);JSM.AddVertexToBody(e,+s,+n,-2);JSM.AddVertexToBody(e,+s,-n,2);JSM.AddVertexToBody(e,-s,-n,-2);JSM.AddVertexToBody(e,+o,+u,-a);JSM.AddVertexToBody(e,+o,-u,+a);JSM.AddVertexToBody(e,-o,+u,+a);JSM.AddVertexToBody(e,-o,-u,-a);JSM.AddVertexToBody(e,+u,-a,+o);JSM.AddVertexToBody(e,-u,+a,+o);JSM.AddVertexToBody(e,+u,+a,-o);JSM.AddVertexToBody(e,-u,-a,-o);JSM.AddVertexToBody(e,-a,+o,+u);JSM.AddVertexToBody(e,+a,+o,-u);JSM.AddVertexToBody(e,+a,-o,+u);JSM.AddVertexToBody(e,-a,-o,-u);JSM.AddVertexToBody(e,+f,+l,-c);JSM.AddVertexToBody(e,+f,-l,+c);JSM.AddVertexToBody(e,-f,+l,+c);JSM.AddVertexToBody(e,-f,-l,-c);JSM.AddVertexToBody(e,+l,-c,+f);JSM.AddVertexToBody(e,-l,+c,+f);JSM.AddVertexToBody(e,+l,+c,-f);JSM.AddVertexToBody(e,-l,-c,-f);JSM.AddVertexToBody(e,-c,+f,+l);JSM.AddVertexToBody(e,+c,+f,-l);JSM.AddVertexToBody(e,+c,-f,+l);JSM.AddVertexToBody(e,-c,-f,-l);JSM.AddVertexToBody(e,+h,+p,-d);JSM.AddVertexToBody(e,+h,-p,+d);JSM.AddVertexToBody(e,-h,+p,+d);JSM.AddVertexToBody(e,-h,-p,-d);JSM.AddVertexToBody(e,+p,-d,+h);JSM.AddVertexToBody(e,-p,+d,+h);JSM.AddVertexToBody(e,+p,+d,-h);JSM.AddVertexToBody(e,-p,-d,-h);JSM.AddVertexToBody(e,-d,+h,+p);JSM.AddVertexToBody(e,+d,+h,-p);JSM.AddVertexToBody(e,+d,-h,+p);JSM.AddVertexToBody(e,-d,-h,-p);JSM.AddVertexToBody(e,+v,+m,-t);JSM.AddVertexToBody(e,+v,-m,+t);JSM.AddVertexToBody(e,-v,+m,+t);JSM.AddVertexToBody(e,-v,-m,-t);JSM.AddVertexToBody(e,+m,-t,+v);JSM.AddVertexToBody(e,-m,+t,+v);JSM.AddVertexToBody(e,+m,+t,-v);JSM.AddVertexToBody(e,-m,-t,-v);JSM.AddVertexToBody(e,-t,+v,+m);JSM.AddVertexToBody(e,+t,+v,-m);JSM.AddVertexToBody(e,+t,-v,+m);JSM.AddVertexToBody(e,-t,-v,-m);JSM.AddPolygonToBody(e,[0,3,51]);JSM.AddPolygonToBody(e,[0,30,12]);JSM.AddPolygonToBody(e,[0,48,3]);JSM.AddPolygonToBody(e,[0,51,30]);JSM.AddPolygonToBody(e,[1,2,50]);JSM.AddPolygonToBody(e,[1,28,13]);JSM.AddPolygonToBody(e,[1,49,2]);JSM.AddPolygonToBody(e,[1,50,28]);JSM.AddPolygonToBody(e,[2,29,14]);JSM.AddPolygonToBody(e,[2,49,29]);JSM.AddPolygonToBody(e,[3,31,15]);JSM.AddPolygonToBody(e,[3,48,31]);JSM.AddPolygonToBody(e,[4,7,55]);JSM.AddPolygonToBody(e,[4,34,16]);JSM.AddPolygonToBody(e,[4,52,7]);JSM.AddPolygonToBody(e,[4,55,34]);JSM.AddPolygonToBody(e,[5,6,54]);JSM.AddPolygonToBody(e,[5,32,17]);JSM.AddPolygonToBody(e,[5,53,6]);JSM.AddPolygonToBody(e,[5,54,32]);JSM.AddPolygonToBody(e,[6,33,18]);JSM.AddPolygonToBody(e,[6,53,33]);JSM.AddPolygonToBody(e,[7,35,19]);JSM.AddPolygonToBody(e,[7,52,35]);JSM.AddPolygonToBody(e,[8,11,59]);JSM.AddPolygonToBody(e,[8,26,20]);JSM.AddPolygonToBody(e,[8,56,11]);JSM.AddPolygonToBody(e,[8,59,26]);JSM.AddPolygonToBody(e,[9,10,58]);JSM.AddPolygonToBody(e,[9,24,21]);JSM.AddPolygonToBody(e,[9,57,10]);JSM.AddPolygonToBody(e,[9,58,24]);JSM.AddPolygonToBody(e,[10,25,22]);JSM.AddPolygonToBody(e,[10,57,25]);JSM.AddPolygonToBody(e,[11,27,23]);JSM.AddPolygonToBody(e,[11,56,27]);JSM.AddPolygonToBody(e,[12,18,21]);JSM.AddPolygonToBody(e,[12,21,24]);JSM.AddPolygonToBody(e,[12,30,18]);JSM.AddPolygonToBody(e,[13,16,22]);JSM.AddPolygonToBody(e,[13,22,25]);JSM.AddPolygonToBody(e,[13,28,16]);JSM.AddPolygonToBody(e,[14,17,20]);JSM.AddPolygonToBody(e,[14,20,26]);JSM.AddPolygonToBody(e,[14,29,17]);JSM.AddPolygonToBody(e,[15,19,23]);JSM.AddPolygonToBody(e,[15,23,27]);JSM.AddPolygonToBody(e,[15,31,19]);JSM.AddPolygonToBody(e,[16,34,22]);JSM.AddPolygonToBody(e,[17,32,20]);JSM.AddPolygonToBody(e,[18,33,21]);JSM.AddPolygonToBody(e,[19,35,23]);JSM.AddPolygonToBody(e,[24,58,36]);JSM.AddPolygonToBody(e,[25,57,37]);JSM.AddPolygonToBody(e,[26,59,38]);JSM.AddPolygonToBody(e,[27,56,39]);JSM.AddPolygonToBody(e,[28,50,40]);JSM.AddPolygonToBody(e,[29,49,41]);JSM.AddPolygonToBody(e,[30,51,42]);JSM.AddPolygonToBody(e,[31,48,43]);JSM.AddPolygonToBody(e,[32,54,44]);JSM.AddPolygonToBody(e,[33,53,45]);JSM.AddPolygonToBody(e,[34,55,46]);JSM.AddPolygonToBody(e,[35,52,47]);JSM.AddPolygonToBody(e,[36,43,48]);JSM.AddPolygonToBody(e,[36,46,43]);JSM.AddPolygonToBody(e,[36,58,46]);JSM.AddPolygonToBody(e,[37,41,49]);JSM.AddPolygonToBody(e,[37,45,41]);JSM.AddPolygonToBody(e,[37,57,45]);JSM.AddPolygonToBody(e,[38,40,50]);JSM.AddPolygonToBody(e,[38,47,40]);JSM.AddPolygonToBody(e,[38,59,47]);JSM.AddPolygonToBody(e,[39,42,51]);JSM.AddPolygonToBody(e,[39,44,42]);JSM.AddPolygonToBody(e,[39,56,44]);JSM.AddPolygonToBody(e,[40,47,52]);JSM.AddPolygonToBody(e,[41,45,53]);JSM.AddPolygonToBody(e,[42,44,54]);JSM.AddPolygonToBody(e,[43,46,55]);JSM.AddPolygonToBody(e,[0,12,24,36,48]);JSM.AddPolygonToBody(e,[1,13,25,37,49]);JSM.AddPolygonToBody(e,[2,14,26,38,50]);JSM.AddPolygonToBody(e,[3,15,27,39,51]);JSM.AddPolygonToBody(e,[4,16,28,40,52]);JSM.AddPolygonToBody(e,[5,17,29,41,53]);JSM.AddPolygonToBody(e,[6,18,30,42,54]);JSM.AddPolygonToBody(e,[7,19,31,43,55]);JSM.AddPolygonToBody(e,[8,20,32,44,56]);JSM.AddPolygonToBody(e,[9,21,33,45,57]);JSM.AddPolygonToBody(e,[10,22,34,46,58]);JSM.AddPolygonToBody(e,[11,23,35,47,59]);return e};JSM.AddCumulatedPolygonToBody=function(e,t,n){var r=new JSM.Coord(0,0,0),i=new JSM.Vector(0,0,0),s=r,o=[],u;for(u=0;u<t.length;u++)o.push(e.GetVertexPosition(t[u]));u=JSM.CalculateCentroid(o);o=JSM.CalculateNormal(o);s.Set(u.x,u.y,u.z);i.Set(o.x,o.y,o.z);r=JSM.CoordOffset(r,i,n);n=e.VertexCount();JSM.AddVertexToBody(e,r.x,r.y,r.z);r=t.length;for(i=0;i<r;i++)s=t[i],o=t[i<r-1?i+1:0],JSM.AddPolygonToBody(e,[s,o,n])};JSM.GenerateCumulatedTetrahedron=function(e){var t=new JSM.Body;t.AddVertex(new JSM.BodyVertex(new JSM.Coord(1,1,1)));t.AddVertex(new JSM.BodyVertex(new JSM.Coord(-1,-1,1)));t.AddVertex(new JSM.BodyVertex(new JSM.Coord(-1,1,-1)));t.AddVertex(new JSM.BodyVertex(new JSM.Coord(1,-1,-1)));e*=2*Math.sqrt(2);JSM.AddCumulatedPolygonToBody(t,[0,1,3],e);JSM.AddCumulatedPolygonToBody(t,[0,2,1],e);JSM.AddCumulatedPolygonToBody(t,[0,3,2],e);JSM.AddCumulatedPolygonToBody(t,[1,2,3],e);return t};JSM.GenerateCumulatedHexahedron=function(e){var t=new JSM.Body;JSM.AddVertexToBody(t,1,1,1);JSM.AddVertexToBody(t,1,1,-1);JSM.AddVertexToBody(t,1,-1,1);JSM.AddVertexToBody(t,-1,1,1);JSM.AddVertexToBody(t,1,-1,-1);JSM.AddVertexToBody(t,-1,1,-1);JSM.AddVertexToBody(t,-1,-1,1);JSM.AddVertexToBody(t,-1,-1,-1);e*=2;JSM.AddCumulatedPolygonToBody(t,[0,1,5,3],e);JSM.AddCumulatedPolygonToBody(t,[0,2,4,1],e);JSM.AddCumulatedPolygonToBody(t,[0,3,6,2],e);JSM.AddCumulatedPolygonToBody(t,[1,4,7,5],e);JSM.AddCumulatedPolygonToBody(t,[2,6,7,4],e);JSM.AddCumulatedPolygonToBody(t,[3,5,7,6],e);return t};JSM.GenerateCumulatedOctahedron=function(e){var t=new JSM.Body;JSM.AddVertexToBody(t,1,0,0);JSM.AddVertexToBody(t,-1,0,0);JSM.AddVertexToBody(t,0,1,0);JSM.AddVertexToBody(t,0,-1,0);JSM.AddVertexToBody(t,0,0,1);JSM.AddVertexToBody(t,0,0,-1);e*=Math.sqrt(2);JSM.AddCumulatedPolygonToBody(t,[0,2,4],e);JSM.AddCumulatedPolygonToBody(t,[0,3,5],e);JSM.AddCumulatedPolygonToBody(t,[0,4,3],e);JSM.AddCumulatedPolygonToBody(t,[0,5,2],e);JSM.AddCumulatedPolygonToBody(t,[1,2,5],e);JSM.AddCumulatedPolygonToBody(t,[1,3,4],e);JSM.AddCumulatedPolygonToBody(t,[1,4,2],e);JSM.AddCumulatedPolygonToBody(t,[1,5,3],e);return t};JSM.GenerateCumulatedDodecahedron=function(e){var t=new JSM.Body,n=(1+Math.sqrt(5))/2,r=1/n;JSM.AddVertexToBody(t,1,1,1);JSM.AddVertexToBody(t,1,1,-1);JSM.AddVertexToBody(t,1,-1,1);JSM.AddVertexToBody(t,-1,1,1);JSM.AddVertexToBody(t,1,-1,-1);JSM.AddVertexToBody(t,-1,1,-1);JSM.AddVertexToBody(t,-1,-1,1);JSM.AddVertexToBody(t,-1,-1,-1);JSM.AddVertexToBody(t,0,+r,+n);JSM.AddVertexToBody(t,0,+r,-n);JSM.AddVertexToBody(t,0,-r,+n);JSM.AddVertexToBody(t,0,-r,-n);JSM.AddVertexToBody(t,+r,+n,0);JSM.AddVertexToBody(t,+r,-n,0);JSM.AddVertexToBody(t,-r,+n,0);JSM.AddVertexToBody(t,-r,-n,0);JSM.AddVertexToBody(t,+n,0,+r);JSM.AddVertexToBody(t,-n,0,+r);JSM.AddVertexToBody(t,+n,0,-r);JSM.AddVertexToBody(t,-n,0,-r);e*=Math.sqrt(5)-1;JSM.AddCumulatedPolygonToBody(t,[0,8,10,2,16],e);JSM.AddCumulatedPolygonToBody(t,[0,16,18,1,12],e);JSM.AddCumulatedPolygonToBody(t,[0,12,14,3,8],e);JSM.AddCumulatedPolygonToBody(t,[1,9,5,14,12],e);JSM.AddCumulatedPolygonToBody(t,[1,18,4,11,9],e);JSM.AddCumulatedPolygonToBody(t,[2,10,6,15,13],e);JSM.AddCumulatedPolygonToBody(t,[2,13,4,18,16],e);JSM.AddCumulatedPolygonToBody(t,[3,14,5,19,17],e);JSM.AddCumulatedPolygonToBody(t,[3,17,6,10,8],e);JSM.AddCumulatedPolygonToBody(t,[4,13,15,7,11],e);JSM.AddCumulatedPolygonToBody(t,[5,9,11,7,19],e);JSM.AddCumulatedPolygonToBody(t,[6,17,19,7,15],e);return t};JSM.GenerateCumulatedIcosahedron=function(e){var t=new JSM.Body,n=(1+Math.sqrt(5))/2;JSM.AddVertexToBody(t,0,1,+n);JSM.AddVertexToBody(t,0,1,-n);JSM.AddVertexToBody(t,0,-1,+n);JSM.AddVertexToBody(t,0,-1,-n);JSM.AddVertexToBody(t,1,+n,0);JSM.AddVertexToBody(t,1,-n,0);JSM.AddVertexToBody(t,-1,+n,0);JSM.AddVertexToBody(t,-1,-n,0);JSM.AddVertexToBody(t,+n,0,1);JSM.AddVertexToBody(t,-n,0,1);JSM.AddVertexToBody(t,+n,0,-1);JSM.AddVertexToBody(t,-n,0,-1);e*=2;JSM.AddCumulatedPolygonToBody(t,[0,2,8],e);JSM.AddCumulatedPolygonToBody(t,[0,4,6],e);JSM.AddCumulatedPolygonToBody(t,[0,6,9],e);JSM.AddCumulatedPolygonToBody(t,[0,8,4],e);JSM.AddCumulatedPolygonToBody(t,[0,9,2],e);JSM.AddCumulatedPolygonToBody(t,[1,3,11],e);JSM.AddCumulatedPolygonToBody(t,[1,4,10],e);JSM.AddCumulatedPolygonToBody(t,[1,6,4],e);JSM.AddCumulatedPolygonToBody(t,[1,10,3],e);JSM.AddCumulatedPolygonToBody(t,[1,11,6],e);JSM.AddCumulatedPolygonToBody(t,[2,5,8],e);JSM.AddCumulatedPolygonToBody(t,[2,7,5],e);JSM.AddCumulatedPolygonToBody(t,[2,9,7],e);JSM.AddCumulatedPolygonToBody(t,[3,5,7],e);JSM.AddCumulatedPolygonToBody(t,[3,7,11],e);JSM.AddCumulatedPolygonToBody(t,[3,10,5],e);JSM.AddCumulatedPolygonToBody(t,[4,8,10],e);JSM.AddCumulatedPolygonToBody(t,[6,11,9],e);JSM.AddCumulatedPolygonToBody(t,[5,10,8],e);JSM.AddCumulatedPolygonToBody(t,[7,9,11],e);return t};JSM.GenerateTetrakisHexahedron=function(){return JSM.GenerateCumulatedHexahedron(.25)};JSM.GenerateRhombicDodecahedron=function(){return JSM.GenerateCumulatedHexahedron(.5)};JSM.GeneratePentakisDodecahedron=function(){var e=Math.sqrt((65+22*Math.sqrt(5))/5)/19;return JSM.GenerateCumulatedDodecahedron(e)};JSM.GenerateSmallStellatedDodecahedron=function(){var e=Math.sqrt((5+2*Math.sqrt(5))/5);return JSM.GenerateCumulatedDodecahedron(e)};JSM.GenerateGreatDodecahedron=function(){var e=Math.sqrt(3)*(Math.sqrt(5)-3)/6;return JSM.GenerateCumulatedIcosahedron(e)};JSM.GenerateSmallTriambicIcosahedron=function(){var e=Math.sqrt(15)/15;return JSM.GenerateCumulatedIcosahedron(e)};JSM.GenerateGreatStellatedDodecahedron=function(){var e=Math.sqrt(3)*(3+Math.sqrt(5))/6;return JSM.GenerateCumulatedIcosahedron(e)};JSM.GenerateSmallTriakisOctahedron=function(){var e=Math.sqrt(3)-2*Math.sqrt(6)/3;return JSM.GenerateCumulatedOctahedron(e)};JSM.GenerateStellaOctangula=function(){var e=Math.sqrt(6)/3;return JSM.GenerateCumulatedOctahedron(e)};JSM.GenerateTriakisTetrahedron=function(){var e=Math.sqrt(6)/15;return JSM.GenerateCumulatedTetrahedron(e)};JSM.LegoDimensions=function(){this.legoWidth=.78;this.legoSmallHeight=.32;this.legoLargeHeight=.96;this.legoWallWidth=.16;this.legoCylinderWidth=.5;this.legoCylinderHeight=.17;this.legoBottomSmallCylinderWidth=.3;this.legoBottomLargeCylinderWidth=.6;this.legoBottomLargeCylinderWallWidth=.1};JSM.GenerateLegoBrick=function(e,t,n,r,i,s,o){function u(e,t){var n,r;for(n=0;n<e.VertexCount();n++)r=e.GetVertex(n),r.position=JSM.CoordAdd(r.position,t)}var a=new JSM.LegoDimensions,f=new JSM.Vector(0,0,1),l=a.legoWidth,c=a.legoLargeHeight;n||(c=a.legoSmallHeight);n=a.legoWallWidth;var h=a.legoCylinderWidth,p=a.legoCylinderHeight,d=a.legoBottomSmallCylinderWidth,v=a.legoBottomLargeCylinderWidth,m=a.legoBottomLargeCylinderWallWidth,g=[];g.push(new JSM.Coord(0,0,0));g.push(new JSM.Coord(l*e,0,0));g.push(new JSM.Coord(l*e,l*t,0));g.push(new JSM.Coord(0,l*t,0));var a=new JSM.Body,y=JSM.GeneratePrismShell(g,f,c-n,n,!0);a.Merge(y);for(y=0;4>y;y++)g[y].z=c-n;y=JSM.GeneratePrism(g,f,n,!0);a.Merge(y);if(r)for(y=0;y<e;y++)for(g=0;g<t;g++)r=new JSM.Coord(l*y+l/2,l*g+l/2,c+p/2),f=JSM.GenerateCylinder(h/2,p,s,!0,o),u(f,r),a.Merge(f);if(i)if(1===e&&1<t||1===t&&1<e){i=t;h=!0;e>t&&(i=e,h=!1);for(y=0;y<i-1;y++)r=h?new JSM.Coord(l/2,l*(y+1),(c-n)/2):new JSM.Coord(l*(y+1),l/2,(c-n)/2),f=JSM.GenerateCylinder(d/2,c-n,s,!0,o),u(f,r),a.Merge(f)}else if(1<e&&1<t)for(y=0;y<e-1;y++)for(g=0;g<t-1;g++)r=new JSM.Coord(l*(y+1),l*(g+1),(c-n)/2),f=JSM.GenerateCylinderShell(v/2,c-n,m,s,!0,o),u(f,r),a.Merge(f);a.SetCubicTextureProjection(new JSM.Coord(0,0,0),new JSM.Coord(1,0,0),new JSM.Coord(0,1,0),new JSM.Coord(0,0,1));return a};JSM.GenerateConvexHullBody=function(e){var t=new JSM.Body,n=JSM.ConvexHull3D(e),r={},i,s,o,u;for(i=0;i<n.length;i++){o=n[i];for(s=0;s<o.length;s++)u=o[s],u in r||(r[u]=t.VertexCount(),t.AddVertex(new JSM.BodyVertex(e[u])))}for(i=0;i<n.length;i++){o=n[i];e=[];for(s=0;s<o.length;s++)u=o[s],e.push(r[u]);t.AddPolygon(new JSM.BodyPolygon(e))}return t};JSM.GenerateSuperShape=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function d(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),n=Math.asin(e.z/t);e=Math.atan2(e.y,e.x);return[t,n,e]}function v(e,t,n,r,i,s,o){t=Math.abs(Math.cos(r*e/4)/t);e=Math.abs(Math.sin(r*e/4)/n);return Math.pow(Math.pow(t,s)+Math.pow(e,o),-1/i)}function m(h,p){var d=new JSM.Coord(0,0,0),m=v(h,o,u,a,f,l,c),g=v(p,e,t,n,r,i,s);d.x=g*Math.cos(p)*m*Math.cos(h);d.y=g*Math.sin(p)*m*Math.cos(h);d.z=m*Math.sin(h);return d}h=JSM.GenerateSphere(1,h,p);var g,y;for(p=0;p<h.VertexCount();p++)g=h.GetVertex(p),y=g.position,y=d(y),y=m(y[1],y[2]),g.SetPosition(y);return h};JSM.OrderPolygons=function(e,t,n){var r=[],i=[],s=[],o=[],u=[],a=[],f=[],l=e.PolygonCount(),c,h;for(c=0;c<l;c++){a.push(c);f.push([]);for(h=0;h<l;h++)f[c].push(null)}(function(){var a=JSM.VectorNormalize(JSM.CoordSub(n,t)),a=JSM.GetPlaneFromCoordAndDirection(t,a),f,l,c,h,p,v;for(f=0;f<e.PolygonCount();f++){p=JSM.Inf;v=-JSM.Inf;c=e.GetPolygon(f);for(l=0;l<c.VertexIndexCount();l++)h=e.GetVertexPosition(c.GetVertexIndex(l)),h=JSM.CoordPlaneDistance(h,a),JSM.IsLower(h,p)&&(p=h),JSM.IsGreater(h,v)&&(v=h);r.push(p);i.push(v);l=e.GetPolygon(f);c=new JSM.Coord(0,0,0);v=p=void 0;for(p=0;p<l.VertexIndexCount();p++)v=e.GetVertexPosition(l.GetVertexIndex(p)),c=JSM.CoordAdd(c,v);l=c=JSM.VectorMultiply(c,1/l.VertexIndexCount());c=JSM.CoordPlaneDistance(l,a);s.push(l);o.push(c);c=JSM.CalculateBodyPolygonNormal(e,f);p=JSM.VectorNormalize(JSM.CoordSub(l,t));p=JSM.VectorDot(c,p);JSM.IsGreaterOrEqual(p,0)&&(c=JSM.VectorMultiply(c,-1));l=JSM.GetPlaneFromCoordAndDirection(l,c);u.push(l)}})();(function(){var e=a.length,t,n;for(t=0;t<e-1;t++)for(n=0;n<e-t-1;n++){var r;r=a[n];var s=a[n+1];r=JSM.IsLower(i[r],i[s])?!0:JSM.IsEqual(i[r],i[s])&&JSM.IsLower(o[r],o[s])?!0:!1;if(r){r=a;var s=n+1,u=r[n];r[n]=r[s];r[s]=u}}})();(function(){var t=a.length,n,s;for(n=0;n<t-1;n++)for(s=0;s<t-n-1;s++){var o;o=a[s];var l=a[s+1];if(null!==f[o][l])o=f[o][l];else{var c;if(c=JSM.IsLowerOrEqual(r[o],i[l])){var h=l;c=u[o];for(var p=u[h],v=void 0,m=void 0,g=!0,y=e.GetPolygon(o),v=0;v<y.VertexIndexCount();v++)if(m=e.GetVertexPosition(y.GetVertexIndex(v)),"CoordInFrontOfPlane"===JSM.CoordPlanePosition(m,p)){g=!1;break}if(g)c=!1;else{p=!0;h=e.GetPolygon(h);for(v=0;v<h.VertexIndexCount();v++)if(m=e.GetVertexPosition(h.GetVertexIndex(v)),"CoordAtBackOfPlane"===JSM.CoordPlanePosition(m,c)){p=!1;break}c=p?!1:!0}}o=c?f[o][l]=!0:f[o][l]=!1}o&&(o=a,l=s+1,c=o[s],o[s]=o[l],o[l]=c)}})();return a};JSM.CanvasDrawer=function(e){this.canvas=e;this.context=this.canvas.getContext("2d")};JSM.CanvasDrawer.prototype.GetWidth=function(){return this.canvas.width};JSM.CanvasDrawer.prototype.GetHeight=function(){return this.canvas.height};JSM.CanvasDrawer.prototype.BeginPath=function(){this.context.beginPath()};JSM.CanvasDrawer.prototype.EndPath=function(){this.context.stroke()};JSM.CanvasDrawer.prototype.Clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="#ffffff";this.context.fillRect(0,0,this.canvas.width,this.canvas.height)};JSM.CanvasDrawer.prototype.DrawLine=function(e,t){this.context.moveTo(e.x,this.canvas.height-e.y);this.context.lineTo(t.x,this.canvas.height-t.y)};JSM.CanvasDrawer.prototype.DrawPolygon=function(e,t){var n=this.context,r=JSM.HexColorToRGBComponents(t);n.fillStyle="rgb("+r[0]+","+r[1]+","+r[2]+")";this.context.beginPath();for(var i,n=0;n<e.VertexCount();n++)r=e.GetVertex(n),0===n?this.context.moveTo(r.x,this.canvas.height-r.y):this.context.lineTo(r.x,this.canvas.height-r.y);this.context.closePath();this.context.fill();this.BeginPath();for(n=0;n<e.VertexCount();n++)r=e.GetVertex(n),i=e.GetVertex(n<e.VertexCount()-1?n+1:0),this.DrawLine(r,i);this.EndPath()};JSM.SVGDrawer=function(e){this.svgObject=e;this.svgNameSpace="http://www.w3.org/2000/svg"};JSM.SVGDrawer.prototype.GetWidth=function(){return this.svgObject.getAttribute("width")};JSM.SVGDrawer.prototype.GetHeight=function(){return this.svgObject.getAttribute("height")};JSM.SVGDrawer.prototype.BeginPath=function(){};JSM.SVGDrawer.prototype.EndPath=function(){};JSM.SVGDrawer.prototype.Clear=function(){for(;this.svgObject.lastChild;)this.svgObject.removeChild(this.svgObject.lastChild)};JSM.SVGDrawer.prototype.DrawLine=function(e,t){var n=document.createElementNS(this.svgNameSpace,"line"),r=this.GetHeight();n.setAttributeNS(null,"stroke","black");n.setAttributeNS(null,"x1",e.x);n.setAttributeNS(null,"y1",r-e.y);n.setAttributeNS(null,"x2",t.x);n.setAttributeNS(null,"y2",r-t.y);this.svgObject.appendChild(n)};JSM.SVGDrawer.prototype.DrawPolygon=function(e,t){var n="",r=this.GetHeight(),i,s;for(i=0;i<e.VertexCount();i++)s=e.GetVertex(i),n=n+s.x+", "+(r-s.y),i<e.VertexCount()-1&&(n+=", ");r=document.createElementNS(this.svgNameSpace,"polygon");r.setAttributeNS(null,"points",n);r.setAttributeNS(null,"fill",function(e){e=JSM.HexColorToRGBComponents(e);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}(t));r.setAttributeNS(null,"fill-opacity","1.0");r.setAttributeNS(null,"stroke","black");this.svgObject.appendChild(r)};JSM.DrawProjectedBody=function(e,t,n,r,i,s){function o(t){var n=new JSM.Polygon2D,r,i,s;for(r=0;r<t.VertexIndexCount();r++)i=e.GetVertexPosition(t.GetVertexIndex(r)),s=JSM.Project(i,a,f,l,c*JSM.DegRad,h,p,d,v),i=s.x,s=s.y,n.AddVertex(i,s);return n}i&&s.Clear();i=s.GetWidth();var u=s.GetHeight(),a=n.eye,f=n.center,l=n.up,c=n.fieldOfView,h=i/u,p=n.nearClippingPlane,d=n.farClippingPlane,v=[0,0,i,u];if("HiddenLinePainter"==r){u=JSM.OrderPolygons(e,a,f);if(void 0===t||null===t)t=new JSM.Materials;for(n=0;n<u.length;n++)i=e.GetPolygon(u[n]),r=o(i),i=i.GetMaterialIndex(),i=t.GetMaterial(i).diffuse,s.DrawPolygon(r,i)}else if("HiddenLineFrontFacing"==r){if(void 0===t||null===t)t=new JSM.Materials;for(n=0;n<e.PolygonCount();n++)i=e.GetPolygon(n),r=o(i),"CounterClockwise"==JSM.PolygonOrientation2D(r)&&(i=i.GetMaterialIndex(),i=t.GetMaterial(i).diffuse,s.DrawPolygon(r,i))}else if("Wireframe"==r){var m,g,y;s.BeginPath();var b=[];for(n=0;n<e.PolygonCount();n++){g=m=null;i=e.GetPolygon(n);u=i.VertexIndexCount();for(t=0;t<=u;t++)y=i.GetVertexIndex(t%u),r=e.GetVertexPosition(y),r=JSM.Project(r,a,f,l,c*JSM.DegRad,h,p,d,v),null!==m&&null!==g&&void 0===b[[g,y]]&&(s.DrawLine(m,r),b[[g,y]]=!0,b[[y,g]]=!0),g=y,m=r}s.EndPath()}return!0};JSM.CatmullClarkSubdivisionOneIteration=function(e){var t=new JSM.Body,n=JSM.CalculateAdjacencyInfo(e);(function(){var r,i;for(r=0;r<n.verts.length;r++)i=e.GetVertex(r).position,t.AddVertex(new JSM.BodyVertex(new JSM.Coord(i.x,i.y,i.z)))})();var r=[];(function(){var i,s,o,u,f;for(i=0;i<n.pgons.length;i++){o=n.pgons[i];f=new JSM.Coord(0,0,0);for(s=0;s<o.verts.length;s++)u=e.GetVertex(o.verts[s]).position,f=JSM.CoordAdd(f,u);f=JSM.VectorMultiply(f,1/o.verts.length);r.push(t.AddVertex(new JSM.BodyVertex(f)))}})();var i=[];(function(){var s,o,u,f,l;for(s=0;s<n.edges.length;s++){u=n.edges[s];f=new JSM.Coord(0,0,0);f=JSM.CoordAdd(f,JSM.VectorMultiply(e.GetVertex(u.vert1).position,.25));f=JSM.CoordAdd(f,JSM.VectorMultiply(e.GetVertex(u.vert2).position,.25));for(o=0;2>o;o++)l=0===o?u.pgon1:u.pgon2,-1===l&&(l=0===o?u.pgon2:u.pgon1),l=t.GetVertex(r[l]).position,f=JSM.CoordAdd(f,JSM.VectorMultiply(l,.25));i.push(t.AddVertex(new JSM.BodyVertex(f)))}})();(function(){var i=[],s,o,u,f;for(u=0;u<n.edges.length;u++)s=n.edges[u],o=JSM.MidCoord(e.GetVertex(s.vert1).position,e.GetVertex(s.vert2).position),i.push(o);var l,h,p;for(u=0;u<n.verts.length;u++){l=n.verts[u];p=new JSM.Coord(0,0,0);s=new JSM.Coord(0,0,0);h=1/l.pgons.length;for(f=0;f<l.pgons.length;f++)o=t.GetVertex(r[l.pgons[f]]).position,p=JSM.CoordAdd(p,JSM.VectorMultiply(o,h));h=1/l.edges.length;for(f=0;f<l.edges.length;f++)o=i[l.edges[f]],s=JSM.CoordAdd(s,JSM.VectorMultiply(o,h));l=l.edges.length;f=t.GetVertex(u).position;f.x=(p.x+2*s.x+(l-3)*f.x)/l;f.y=(p.y+2*s.y+(l-3)*f.y)/l;f.z=(p.z+2*s.z+(l-3)*f.z)/l}})();(function(){var s,o,u,f,l,h,p,v;for(h=0;h<n.pgons.length;h++){v=n.pgons[h];s=v.verts.length;for(p=0;p<s;p++)o=v.pedges[p],u=v.pedges[(p+1)%s],f=r[h],o=i[o.index],l=JSM.GetPolyEdgeStartVertex(u,n),u=i[u.index],f=new JSM.BodyPolygon([f,o,l,u]),u=e.GetPolygon(h),f.material=u.material,f.curved=u.curved,t.AddPolygon(f)}})();return t};JSM.CatmullClarkSubdivision=function(e,t){var n=e,r;for(r=0;r<t;r++)n=JSM.CatmullClarkSubdivisionOneIteration(n);return n};JSM.SvgToModel=function(e,t,n){function r(e,t){function n(e,t,n,r,i,s){e=e.createSVGPoint();e.x=i;e.y=s;r=e.matrixTransform(r.getCTM());e=new JSM.Coord2D(r.x,r.y);i=new JSM.Coord2D(i,s);s=t.VertexCount(n);if(0<s&&JSM.CoordIsEqual2DWithEps(t.GetVertex(n,s-1),e,.1))return i;t.AddVertex(n,r.x,r.y);return i}function r(e,t,r,i,s,o,u){var a=document.createElementNS("http://www.w3.org/2000/svg","path"),f="M "+i.x+" "+i.y+" ",l,c,h,p,d;for(l=0;l<s.length;l++)if(c=s[l],c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS||c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL)h=c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS?"C":"c",f+=h+" "+c.x1+" "+c.y1+" "+c.x2+" "+c.y2+" "+c.x+" "+c.y+" ";else if(c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS||c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL)h=c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS?"Q":"q",f+=h+" "+c.x1+" "+c.y1+" "+c.x+" "+c.y+" ";else if(c.pathSegType==SVGPathSeg.PATHSEG_ARC_ABS||c.pathSegType==SVGPathSeg.PATHSEG_ARC_REL)h=c.pathSegType==SVGPathSeg.PATHSEG_ARC_ABS?"A":"a",p=c.largeArcFlag?1:0,d=c.sweepFlag?1:0,f+=h+" "+c.r1+" "+c.r2+" "+c.angle+" "+p+" "+d+" "+c.x+" "+c.y+" ";else if(c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS||c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL)h=c.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS?"S":"s",f+=h+" "+c.x2+" "+c.y2+" "+c.x+" "+c.y+" ";a.setAttributeNS(null,"d",f);f=a.getTotalLength();s=0;0<r&&(s=parseInt(f/r,10));3>s&&(s=3);r=f/s;for(f=1;f<=s;f++)i=a.getPointAtLength(f*r),i=n(e,o,u,t,i.x,i.y);return i}function i(e,t){var n=e.VertexCount(t);if(0!==n){var r=e.GetVertex(t,0),n=e.GetVertex(t,n-1);JSM.CoordIsEqual2DWithEps(r,n,.1)&&e.GetContour(t).vertices.pop()}}function s(e,t){return 0<e.VertexCount(t)?(i(e,t),e.AddContour(),t+1):t}var o=new JSM.ContourPolygon2D,u=document.createElementNS("http://www.w3.org/2000/svg","svg"),a;if(e instanceof SVGPathElement){var f=new JSM.Coord2D(0,0),l=new JSM.Coord2D(0,0),c=t;e.hasAttribute("segmentlength")&&(c=parseFloat(e.getAttribute("segmentlength")));var h,p,d=0;for(a=0;a<e.pathSegList.numberOfItems;a++)if(h=e.pathSegList.getItem(a),h.pathSegType!=SVGPathSeg.PATHSEG_CLOSEPATH)if(h.pathSegType==SVGPathSeg.PATHSEG_MOVETO_ABS)d=s(o,d),f=n(u,o,d,e,h.x,h.y),l=f.Clone();else if(h.pathSegType==SVGPathSeg.PATHSEG_MOVETO_REL)d=s(o,d),f=n(u,o,d,e,l.x+h.x,l.y+h.y),l=f.Clone();else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_ABS)f=n(u,o,d,e,h.x,h.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_REL)f=n(u,o,d,e,f.x+h.x,f.y+h.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS)f=n(u,o,d,e,h.x,f.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS)f=n(u,o,d,e,f.x,h.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL)f=n(u,o,d,e,f.x+h.x,f.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL)f=n(u,o,d,e,f.x,f.y+h.y);else if(h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL||h.pathSegType==SVGPathSeg.PATHSEG_ARC_ABS||h.pathSegType==SVGPathSeg.PATHSEG_ARC_REL||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL){p=[];if(h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL){for(;a<e.pathSegList.numberOfItems;a++){h=e.pathSegList.getItem(a);if(!(h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS||h.pathSegType==SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL))break;p.push(h)}a-=1}else p.push(h);f=r(u,e,c,f,p,o,d)}i(o,d)}else if(e instanceof SVGRectElement)n(u,o,0,e,e.x.baseVal.value,e.y.baseVal.value),n(u,o,0,e,e.x.baseVal.value+e.width.baseVal.value,e.y.baseVal.value),n(u,o,0,e,e.x.baseVal.value+e.width.baseVal.value,e.y.baseVal.value+e.height.baseVal.value),n(u,o,0,e,e.x.baseVal.value,e.y.baseVal.value+e.height.baseVal.value);else if(e instanceof SVGPolygonElement)for(a=0;a<e.points.numberOfItems;a++)f=e.points.getItem(a),n(u,o,0,e,f.x,f.y);o.color=function(e){for(var t="";null!==e&&void 0!==e&&0===t.length;)t=e.getAttribute("fill"),null===t&&(t=e.style.fill),e=e.parentElement;e=0;if(0===t.length)return e;if("#"==t[0])e=JSM.HexColorToRGBColor(t.substring(1));else{var n=t.indexOf("("),r=t.indexOf(")");if(-1==n||-1==r)return e;t=t.substring(n+1,r).split(", ");if(3!=t.length)return e;e=JSM.RGBComponentsToHexColor(t[0],t[1],t[2])}return e}(e);return o}function i(e,t){function n(e,t){var n=[],r,i;if("Clockwise"==t)for(r=0;r<e.VertexCount();r++)i=e.GetVertex(r),n.push(new JSM.Coord(i.x,0,-i.y));else for(r=e.VertexCount()-1;0<=r;r--)i=e.GetVertex(r),n.push(new JSM.Coord(i.x,0,-i.y));return n}function r(e,t,n){e.push(null);var r;if("CounterClockwise"==n)for(n=0;n<t.VertexCount();n++)r=t.GetVertex(n),e.push(new JSM.Coord(r.x,0,-r.y));else for(n=t.VertexCount()-1;0<=n;n--)r=t.GetVertex(n),e.push(new JSM.Coord(r.x,0,-r.y))}var i=[],s=new JSM.Vector(0,-1,0),o,u;u=e.ContourCount();if(1==u)u=JSM.PolygonOrientation2D(e.GetContour(0)),o=n(e.GetContour(0),u),o=JSM.GeneratePrism(o,s,t,!0),i.push(o);else if(1<u){u=JSM.PolygonOrientation2D(e.GetContour(0));var a=n(e.GetContour(0),u),f=!1,l;for(l=1;l<e.ContourCount();l++)o=JSM.PolygonOrientation2D(e.GetContour(l)),o==u?(o=n(e.GetContour(l),u),o=JSM.GeneratePrism(o,s,t,!0),i.push(o)):(r(a,e.GetContour(l),o),f=!0);o=f?JSM.GeneratePrismWithHole(a,s,t,!0):JSM.GeneratePrism(a,s,t,!0);i.push(o)}s=new JSM.Material({ambient:e.color,diffuse:e.color});return[i,s]}var s=new JSM.Model,o=new JSM.Materials;n=function(e,t){function n(e,t,n){e=e.getElementsByTagName(t);for(t=0;t<e.length;t++)n.push(e[t])}var i=[],s=[];n(e,"path",s);n(e,"rect",s);n(e,"polygon",s);var o=t;e.hasAttribute("segmentlength")&&(o=parseFloat(e.getAttribute("segmentlength")));var u,a;for(u=0;u<s.length;u++)a=r(s[u],o),i.push(a);return i}(e,n);e.hasAttribute("modelheight")&&(t=parseFloat(e.getAttribute("modelheight")));var u,a,f;for(e=0;e<n.length;e++){u=i(n[e],t);a=u[0];u=u[1];o.AddMaterial(u);for(u=0;u<a.length;u++)f=a[u],f.SetPolygonsMaterialIndex(o.Count()-1),s.AddBody(f)}return[s,o]};JSM.BSPPolygonUserData=function(){this.material=this.id=null};JSM.AddBodyToBSPTree=function(e,t,n){var r,i,s;for(r=0;r<e.PolygonCount();r++){s=new JSM.BSPPolygonUserData;s.id=n;i=e;var o=s,u=i.GetPolygon(r);o.material=u.GetMaterialIndex();for(var o=new JSM.Polygon,a=void 0,f=void 0,a=0;a<u.VertexIndexCount();a++)f=i.GetVertexPosition(u.GetVertexIndex(a)),o.AddVertex(f.x,f.y,f.z);i=o;t.AddPolygon(i,s)}};JSM.BooleanOperation=function(e,t,n){function r(e,t,n){function r(e){t.AddVertex(new JSM.BodyVertex(e));return t.VertexCount()-1}var i=new JSM.BodyPolygon([]),s;if(n)for(n=e.VertexCount()-1;0<=n;n--)s=r(e.GetVertex(n)),i.AddVertexIndex(s);else for(n=0;n<e.VertexCount();n++)s=r(e.GetVertex(n)),i.AddVertexIndex(s);void 0!==e.userData&&i.SetMaterialIndex(e.userData.material);t.AddPolygon(i)}function i(e,t,n){var i;for(i=0;i<e.length;i++)r(e[i],t,n)}function s(e,t,n,r,i,s){function o(e,t){var n;for(n=0;n<e.length;n++)e[n].userData=t}var u,a;for(u=0;u<e.length;u++)a=e[u],JSM.ClipPolygonWithBSPTree(a.polygon,t,n,r,i,s),o(n,a.userData),o(r,a.userData),o(i,a.userData),o(s,a.userData)}var o=new JSM.BSPTree,u=new JSM.BSPTree;JSM.AddBodyToBSPTree(t,o,"a");JSM.AddBodyToBSPTree(n,u,"b");t=new JSM.Body;n=[];var a=[],f=[],l=[];s(o.GetNodes(),u,n,a,f,l);var c=[],h=[],p=[];s(u.GetNodes(),o,c,h,p,[]);"Union"==e?(i(n,t,!1),i(f,t,!1),i(l,t,!1),i(c,t,!1),i(p,t,!1)):"Difference"==e?(i(n,t,!1),i(f,t,!1),i(h,t,!0)):"Intersection"==e&&(i(a,t,!1),i(l,t,!1),i(h,t,!1));return t};JSM.GenerateSurface=function(e,t,n,r,i,s,o,u){var a=new JSM.Body,f=e[0],l=t[0],c=(e[1]-e[0])/n,h=(t[1]-t[0])/r;(function(){var e,t,i,s;for(e=0;e<=r;e++)for(t=0;t<=n;t++)i=f+t*c,s=l+e*h,i=o(e,t,i,s,u),a.AddVertex(new JSM.BodyVertex(i))})();(function(){var e,t,o,u,f,l;for(t=0;t<r;t++)for(e=0;e<n;e++)o=t*(n+1)+e,u=o+1,f=o+n+1,l=f+1,i?(u=new JSM.BodyPolygon([o,u,l]),s&&u.SetCurveGroup(0),a.AddPolygon(u),u=new JSM.BodyPolygon([o,l,f])):u=new JSM.BodyPolygon([o,u,l,f]),s&&u.SetCurveGroup(0),a.AddPolygon(u)})();return a};JSM.SurfaceControlPoints=function(e,t){this.n=e;this.m=t;this.points=[];var n,r;for(n=0;n<=this.n;n++){this.points.push([]);for(r=0;r<=this.m;r++)this.points[n].push(new JSM.Coord(0,0,0))}};JSM.SurfaceControlPoints.prototype.GetNValue=function(){return this.n};JSM.SurfaceControlPoints.prototype.GetMValue=function(){return this.m};JSM.SurfaceControlPoints.prototype.GetControlPoint=function(e,t){return this.points[e][t]};JSM.SurfaceControlPoints.prototype.InitPlanar=function(e,t){var n=e/this.n,r=t/this.m,i,s,o;for(i=0;i<=this.n;i++)for(s=0;s<=this.m;s++)o=this.points[i][s],o.x=i*n,o.y=s*r};JSM.GenerateBezierSurface=function(e,t,n,r){return JSM.GenerateSurface([0,1],[0,1],t,n,!1,r,function(e,t,n,r,i){function s(e,t,n){var r=1,i=JSM.Minimum(e,t-e),s;for(s=0;s<i;s++)r*=t-s,r/=s+1;return r*Math.pow(n,e)*Math.pow(1-n,t-e)}var o,u,a,f=i.GetNValue(),l=i.GetMValue();o=new JSM.Coord(0,0,0);for(e=0;e<=f;e++){u=new JSM.Coord(0,0,0);for(t=0;t<=l;t++)a=s(e,f,n)*s(t,l,r),a=JSM.VectorMultiply(i.GetControlPoint(e,t),a),u=JSM.CoordAdd(u,a);o=JSM.CoordAdd(o,u)}return o},e)};JSM.RenderMaterial=function(e,t,n,r,i,s,o){this.ambient=e;this.diffuse=t;this.specular=n;this.shininess=r;this.texture=i;this.textureWidth=s;this.textureHeight=o;this.textureImage=this.textureBuffer=null;this.textureLoaded=!1};JSM.RenderMaterial.prototype.HasTexture=function(){return null!==this.texture&&this.textureLoaded};JSM.RenderMaterial.prototype.Compile=function(e,t){if(null!==this.texture){var n=this;this.textureBuffer=e.createTexture();this.textureImage=new Image;this.textureImage.src=this.texture;this.textureImage.onload=function(){e.bindTexture(e.TEXTURE_2D,n.textureBuffer);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n.textureImage);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null);n.textureLoaded=!0;void 0!==t&&null!==t&&t()}}};JSM.RenderGeometry=function(){this.transformation=new JSM.Transformation;this.uvBuffer=this.normalBuffer=this.vertexBuffer=this.uvArray=this.normalArray=this.vertexArray=this.material=null};JSM.RenderGeometry.prototype.SetMaterial=function(e){this.material=e};JSM.RenderGeometry.prototype.GetMaterial=function(){return this.material};JSM.RenderGeometry.prototype.SetVertexArray=function(e){this.vertexArray=new Float32Array(e)};JSM.RenderGeometry.prototype.SetNormalArray=function(e){this.normalArray=new Float32Array(e)};JSM.RenderGeometry.prototype.SetUVArray=function(e){this.uvArray=new Float32Array(e)};JSM.RenderGeometry.prototype.GetTransformation=function(){return this.transformation};JSM.RenderGeometry.prototype.GetTransformationMatrix=function(){return this.transformation.matrix};JSM.RenderGeometry.prototype.SetTransformation=function(e){this.transformation=e};JSM.RenderGeometry.prototype.GetVertexBuffer=function(){return this.vertexBuffer};JSM.RenderGeometry.prototype.GetNormalBuffer=function(){return this.normalBuffer};JSM.RenderGeometry.prototype.GetUVBuffer=function(){return this.uvBuffer};JSM.RenderGeometry.prototype.VertexCount=function(){return parseInt(this.vertexArray.length/3,10)};JSM.RenderGeometry.prototype.GetVertex=function(e){return new JSM.Coord(this.vertexArray[3*e],this.vertexArray[3*e+1],this.vertexArray[3*e+2])};JSM.RenderGeometry.prototype.GetTransformedVertex=function(e){e=this.GetVertex(e);return this.transformation.Apply(e)};JSM.RenderGeometry.prototype.Compile=function(e,t){this.material.Compile(e,t);this.vertexBuffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW);this.vertexBuffer.itemSize=3;this.vertexBuffer.numItems=parseInt(this.vertexArray.length/3,10);this.normalBuffer=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.normalBuffer);e.bufferData(e.ARRAY_BUFFER,this.normalArray,e.STATIC_DRAW);this.normalBuffer.itemSize=3;this.normalBuffer.numItems=parseInt(this.normalArray.length/3,10);null!==this.uvArray&&(this.uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.uvBuffer.itemSize=2,this.uvBuffer.numItems=parseInt(this.uvArray.length/2,10))};JSM.Renderer=function(){this.geometries=this.light=this.camera=this.texShader=this.shader=this.context=this.canvas=null};JSM.Renderer.prototype.Init=function(e,t,n){return!this.InitContext(e)||!this.InitView(t,n)||!this.InitShaders()||!this.InitBuffers()?!1:!0};JSM.Renderer.prototype.InitContext=function(e){if(!window.WebGLRenderingContext)return!1;this.canvas=document.getElementById(e);if(null===this.canvas||void 0===this.canvas.getContext)return!1;this.context=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");if(null===this.context)return!1;this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height;this.context.viewport(0,0,this.context.viewportWidth,this.context.viewportHeight);this.context.clearColor(1,1,1,1);this.context.enable(this.context.DEPTH_TEST);this.context.depthFunc(this.context.LEQUAL);this.context.enable(this.context.BLEND);this.context.blendEquation(this.context.FUNC_ADD);this.context.blendFunc(this.context.SRC_ALPHA,this.context.ONE_MINUS_SRC_ALPHA);return!0};JSM.Renderer.prototype.InitShaders=function(){function e(e,t,n){n=e.createShader(n);e.shaderSource(n,t);e.compileShader(n);return!e.getShaderParameter(n,e.COMPILE_STATUS)?null:n}function t(t,n,r){n=e(t,n,t.FRAGMENT_SHADER);r=e(t,r,t.VERTEX_SHADER);if(null===n||null===r)return null;var i=t.createProgram();t.attachShader(i,r);t.attachShader(i,n);t.linkProgram(i);return!t.getProgramParameter(i,t.LINK_STATUS)?null:i}function n(e){var t="";e&&(t="#define USETEXTURE");return[t,"uniform highp vec3 uPolygonAmbientColor;\nuniform highp vec3 uPolygonDiffuseColor;\nuniform highp vec3 uPolygonSpecularColor;\nuniform highp float uPolygonShininess;\nuniform highp vec3 uLightAmbientColor;\nuniform highp vec3 uLightDiffuseColor;\nuniform highp vec3 uLightSpecularColor;\nvarying highp vec3 vVertex;\nvarying highp vec3 vNormal;\nvarying highp vec3 vLight;\n#ifdef USETEXTURE\nvarying highp vec2 vUV;\nuniform sampler2D uSampler;\n#endif\nvoid main (void) {\n    highp vec3 N = normalize (vNormal);\n   if (!gl_FrontFacing) {\n        N = -N;\n   }\n highp vec3 L = normalize (-vLight);\n   highp vec3 E = normalize (-vVertex);\n  highp vec3 R = normalize (-reflect (L, N));\n   highp vec3 ambientComponent = uPolygonAmbientColor * uLightAmbientColor;\n  highp vec3 diffuseComponent = uPolygonDiffuseColor * uLightDiffuseColor * max (dot (N, L), 0.0);\n  highp vec3 specularComponent = uPolygonSpecularColor * uLightSpecularColor * pow (max (dot (R, E), 0.0), uPolygonShininess);\n#ifdef USETEXTURE\n   highp vec3 textureColor = texture2D (uSampler, vec2 (vUV.s, vUV.t)).xyz;\n  ambientComponent = textureColor * ambientComponent;\n   diffuseComponent = textureColor * diffuseComponent;\n   specularComponent = textureColor * specularComponent;\n#endif\n ambientComponent = clamp (ambientComponent, 0.0, 1.0);\n    diffuseComponent = clamp (diffuseComponent, 0.0, 1.0);\n    specularComponent = clamp (specularComponent, 0.0, 1.0);\n  gl_FragColor = vec4 (ambientComponent + diffuseComponent + specularComponent, 1.0);\n}"].join("\n")}function r(e){var t="";e&&(t="#define USETEXTURE");return[t,"attribute highp vec3 aVertexPosition;\nattribute highp vec3 aVertexNormal;\nuniform highp mat4 uViewMatrix;\nuniform highp mat4 uModelViewMatrix;\nuniform highp mat4 uProjectionMatrix;\nuniform highp vec3 uLightDirection;\nvarying highp vec3 vVertex;\nvarying highp vec3 vNormal;\nvarying highp vec3 vLight;\n#ifdef USETEXTURE\nattribute highp vec2 aVertexUV;\nvarying highp vec2 vUV;\n#endif\nvoid main (void) {\n vVertex = vec3 (uModelViewMatrix * vec4 (aVertexPosition, 1.0));\n  vNormal = normalize (vec3 (uModelViewMatrix * vec4 (aVertexNormal, 0.0)));\n    vLight = normalize (vec3 (uViewMatrix * vec4 (uLightDirection, 0.0)));\n#ifdef USETEXTURE\n vUV = aVertexUV;\n#endif\n  gl_Position = uProjectionMatrix * vec4 (vVertex, 1.0);\n}"].join("\n")}function i(e,t){t.vertexPositionAttribute=e.getAttribLocation(t,"aVertexPosition");t.vertexNormalAttribute=e.getAttribLocation(t,"aVertexNormal");t.lightAmbientColorUniform=e.getUniformLocation(t,"uLightAmbientColor");t.lightDiffuseColorUniform=e.getUniformLocation(t,"uLightDiffuseColor");t.lightSpecularColorUniform=e.getUniformLocation(t,"uLightSpecularColor");t.lightDirectionUniform=e.getUniformLocation(t,"uLightDirection");t.vMatrixUniform=e.getUniformLocation(t,"uViewMatrix");t.mvMatrixUniform=e.getUniformLocation(t,"uModelViewMatrix");t.pMatrixUniform=e.getUniformLocation(t,"uProjectionMatrix");t.polygonAmbientColorUniform=e.getUniformLocation(t,"uPolygonAmbientColor");t.polygonDiffuseColorUniform=e.getUniformLocation(t,"uPolygonDiffuseColor");t.polygonSpecularColorUniform=e.getUniformLocation(t,"uPolygonSpecularColor");t.polygonShininessUniform=e.getUniformLocation(t,"uPolygonShininess")}this.shader=function(e){var s=n(!1),o=r(!1),s=t(e,s,o);if(null===s)return null;e.useProgram(s);i(e,s);return s}(this.context);if(null===this.shader)return!1;this.texShader=function(e){var s=n(!0),o=r(!0),s=t(e,s,o);if(null===s)return null;e.useProgram(s);i(e,s);s.vertexUVAttribute=e.getAttribLocation(s,"aVertexUV");s.samplerUniform=e.getUniformLocation(s,"uSampler");return s}(this.context);return null===this.texShader?!1:!0};JSM.Renderer.prototype.InitBuffers=function(){this.geometries=[];return!0};JSM.Renderer.prototype.InitView=function(e,t){this.camera=JSM.ValueOrDefault(e,new JSM.Camera);if(!this.camera)return!1;this.light=JSM.ValueOrDefault(t,new JSM.Light);return!this.light?!1:!0};JSM.Renderer.prototype.SetClearColor=function(e,t,n){this.context.clearColor(e,t,n,1)};JSM.Renderer.prototype.AddGeometries=function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.Compile(this.context,this.Render.bind(this)),this.geometries.push(n)};JSM.Renderer.prototype.RemoveGeometries=function(){this.geometries=[]};JSM.Renderer.prototype.Resize=function(){this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height;this.context.viewport(0,0,this.context.viewportWidth,this.context.viewportHeight)};JSM.Renderer.prototype.Render=function(){this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT);var e=JSM.MatrixPerspective(this.camera.fieldOfView*JSM.DegRad,this.context.viewportWidth/this.context.viewportHeight,this.camera.nearClippingPlane,this.camera.farClippingPlane),t=JSM.MatrixView(this.camera.eye,this.camera.center,this.camera.up),n=JSM.MatrixIdentity(),r=JSM.HexColorToNormalizedRGBComponents(this.light.ambient),i=JSM.HexColorToNormalizedRGBComponents(this.light.diffuse),s=JSM.HexColorToNormalizedRGBComponents(this.light.specular);this.light.direction=JSM.VectorNormalize(JSM.CoordSub(this.camera.center,this.camera.eye));var o,u,a,f,l,c;for(o=0;o<this.geometries.length;o++)l=this.geometries[o],n=l.GetMaterial().HasTexture()?this.texShader:this.shader,c!=n&&(c=n,this.context.useProgram(c),this.context.uniformMatrix4fv(c.pMatrixUniform,!1,e),this.context.uniformMatrix4fv(c.vMatrixUniform,!1,t),this.context.uniform3f(c.lightDirectionUniform,this.light.direction.x,this.light.direction.y,this.light.direction.z),this.context.uniform3f(c.lightAmbientColorUniform,r[0],r[1],r[2]),this.context.uniform3f(c.lightDiffuseColorUniform,i[0],i[1],i[2]),this.context.uniform3f(c.lightSpecularColorUniform,s[0],s[1],s[2])),n=l.material.ambient,u=l.material.diffuse,a=l.material.specular,f=l.material.shininess,this.context.uniform3f(c.polygonAmbientColorUniform,n[0],n[1],n[2]),this.context.uniform3f(c.polygonDiffuseColorUniform,u[0],u[1],u[2]),this.context.uniform3f(c.polygonSpecularColorUniform,a[0],a[1],a[2]),this.context.uniform1f(c.polygonShininessUniform,f),c==this.texShader&&(n=l.GetUVBuffer(),this.context.activeTexture(this.context.TEXTURE0),this.context.bindTexture(this.context.TEXTURE_2D,l.material.textureBuffer),this.context.bindBuffer(this.context.ARRAY_BUFFER,n),this.context.vertexAttribPointer(c.vertexUVAttribute,n.itemSize,this.context.FLOAT,!1,0,0),this.context.enableVertexAttribArray(c.vertexUVAttribute),this.context.uniform1i(c.samplerUniform,0)),n=JSM.MatrixMultiply(l.GetTransformationMatrix(),t),this.context.uniformMatrix4fv(c.mvMatrixUniform,!1,n),n=l.GetVertexBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,n),this.context.enableVertexAttribArray(c.vertexPositionAttribute),this.context.vertexAttribPointer(c.vertexPositionAttribute,n.itemSize,this.context.FLOAT,!1,0,0),l=l.GetNormalBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,l),this.context.enableVertexAttribArray(c.vertexNormalAttribute),this.context.vertexAttribPointer(c.vertexNormalAttribute,l.itemSize,this.context.FLOAT,!1,0,0),this.context.drawArrays(this.context.TRIANGLES,0,n.numItems)};JSM.PointCloudRenderer=function(){this.pointSize=this.points=this.camera=this.shader=this.context=this.canvas=null};JSM.PointCloudRenderer.prototype.Init=function(e,t){return!this.InitContext(e)||!this.InitShaders()||!this.InitBuffers()||!this.InitView(t)?!1:!0};JSM.PointCloudRenderer.prototype.InitContext=function(e){if(!window.WebGLRenderingContext)return!1;this.canvas=document.getElementById(e);if(null===this.canvas||void 0===this.canvas.getContext)return!1;this.context=this.canvas.getContext("experimental-webgl");if(null===this.context)return!1;this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height;this.context.clearColor(1,1,1,1);this.context.enable(this.context.DEPTH_TEST);return!0};JSM.PointCloudRenderer.prototype.InitShaders=function(){function e(e,t,n){n=e.createShader(n);e.shaderSource(n,t);e.compileShader(n);return!e.getShaderParameter(n,e.COMPILE_STATUS)?null:n}var t=e(this.context,"varying highp vec3 vColor;\nvoid main (void) {\n    gl_FragColor = vec4 (vColor, 1.0);\n}",this.context.FRAGMENT_SHADER),n=e(this.context,"attribute highp vec3 aVertexPosition;\nattribute highp vec3 aVertexColor;\nuniform highp mat4 uViewMatrix;\nuniform highp mat4 uProjectionMatrix;\nuniform highp float uPointSize;\nvarying highp vec3 vColor;\nvoid main (void) {\n vColor = aVertexColor;\n    gl_PointSize = uPointSize;\n    gl_Position = uProjectionMatrix * uViewMatrix * vec4 (aVertexPosition, 1.0);\n}",this.context.VERTEX_SHADER);if(null===t||null===n)return!1;this.shader=this.context.createProgram();this.context.attachShader(this.shader,n);this.context.attachShader(this.shader,t);this.context.linkProgram(this.shader);if(!this.context.getProgramParameter(this.shader,this.context.LINK_STATUS))return!1;this.context.useProgram(this.shader);this.shader.vertexPositionAttribute=this.context.getAttribLocation(this.shader,"aVertexPosition");this.context.enableVertexAttribArray(this.shader.vertexPositionAttribute);this.shader.vertexColorAttribute=this.context.getAttribLocation(this.shader,"aVertexColor");this.context.enableVertexAttribArray(this.shader.vertexColorAttribute);this.shader.pMatrixUniform=this.context.getUniformLocation(this.shader,"uProjectionMatrix");this.shader.vMatrixUniform=this.context.getUniformLocation(this.shader,"uViewMatrix");this.shader.pointSizeUniform=this.context.getUniformLocation(this.shader,"uPointSize");return!0};JSM.PointCloudRenderer.prototype.InitBuffers=function(){this.points=[];this.pointSize=1;return!0};JSM.PointCloudRenderer.prototype.InitView=function(e){this.camera=JSM.ValueOrDefault(e,new JSM.Camera);return!this.camera?!1:!0};JSM.PointCloudRenderer.prototype.SetClearColor=function(e,t,n){this.context.clearColor(e,t,n,1)};JSM.PointCloudRenderer.prototype.SetPointSize=function(e){this.pointSize=e};JSM.PointCloudRenderer.prototype.AddPoints=function(e,t){var n=this.context.createBuffer(),r=new Float32Array(e);this.context.bindBuffer(this.context.ARRAY_BUFFER,n);this.context.bufferData(this.context.ARRAY_BUFFER,r,this.context.STATIC_DRAW);n.itemSize=3;n.numItems=parseInt(r.length/3,10);var i=this.context.createBuffer(),s=new Float32Array(t);this.context.bindBuffer(this.context.ARRAY_BUFFER,i);this.context.bufferData(this.context.ARRAY_BUFFER,s,this.context.STATIC_DRAW);i.itemSize=3;i.numItems=parseInt(s.length/3,10);this.points.push({pointArray:r,pointBuffer:n,colorBuffer:i})};JSM.PointCloudRenderer.prototype.RemovePoints=function(){this.points=[]};JSM.PointCloudRenderer.prototype.Resize=function(){this.context.viewportWidth=this.canvas.width;this.context.viewportHeight=this.canvas.height};JSM.PointCloudRenderer.prototype.Render=function(){this.context.viewport(0,0,this.context.viewportWidth,this.context.viewportHeight);this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT);var e=JSM.MatrixPerspective(this.camera.fieldOfView*JSM.DegRad,this.context.viewportWidth/this.context.viewportHeight,this.camera.nearClippingPlane,this.camera.farClippingPlane);this.context.uniformMatrix4fv(this.shader.pMatrixUniform,!1,e);e=JSM.MatrixView(this.camera.eye,this.camera.center,this.camera.up);this.context.uniformMatrix4fv(this.shader.vMatrixUniform,!1,e);this.context.uniform1f(this.shader.pointSizeUniform,this.pointSize);for(var t,n,e=0;e<this.points.length;e++)t=this.points[e].pointBuffer,n=this.points[e].colorBuffer,this.context.bindBuffer(this.context.ARRAY_BUFFER,t),this.context.vertexAttribPointer(this.shader.vertexPositionAttribute,t.itemSize,this.context.FLOAT,!1,0,0),this.context.bindBuffer(this.context.ARRAY_BUFFER,n),this.context.vertexAttribPointer(this.shader.vertexColorAttribute,n.itemSize,this.context.FLOAT,!1,0,0),this.context.drawArrays(this.context.POINTS,0,t.numItems)};JSM.ConvertBodyToRenderGeometries=function(e,t){var n=[],r=null,i=null,s=null,o=null;JSM.ExplodeBodyToTriangles(e,t,{hasConvexPolygons:!1,onGeometryStart:function(e){i=[];s=[];o=[];var t=JSM.HexColorToNormalizedRGBComponents(e.ambient),u=JSM.HexColorToNormalizedRGBComponents(e.diffuse),a=JSM.HexColorToNormalizedRGBComponents(e.specular);e=new JSM.RenderMaterial(t,u,a,e.shininess,e.texture,e.textureWidth,e.textureHeight);r=new JSM.RenderGeometry;r.SetMaterial(e);n.push(r)},onGeometryEnd:function(e){r.SetVertexArray(i);r.SetNormalArray(s);null!==e.texture&&r.SetUVArray(o)},onTriangle:function(e,t,n,r,u,a,l,c,h){i.push(e.x,e.y,e.z);i.push(t.x,t.y,t.z);i.push(n.x,n.y,n.z);s.push(r.x,r.y,r.z);s.push(u.x,u.y,u.z);s.push(a.x,a.y,a.z);null!==l&&null!==c&&null!==h&&(o.push(l.x,l.y),o.push(c.x,c.y),o.push(h.x,h.y))}});return n};JSM.ConvertModelToRenderGeometries=function(e,t){var n=[],r,i;for(r=0;r<e.BodyCount();r++){i=e.GetBody(r);var s=JSM.ConvertBodyToRenderGeometries(i,t,n);for(i=0;i<s.length;i++)n.push(s[i])}return n};JSM.JSONFileLoader=function(e){this.onReady=e};JSM.JSONFileLoader.prototype.Load=function(e){var t=this,n=new XMLHttpRequest;n.overrideMimeType("application/json");n.open("GET",e,!0);n.onreadystatechange=function(){4==n.readyState&&t.OnReady(n.responseText)};n.send(null)};JSM.JSONFileLoader.prototype.OnReady=function(e){null!==this.onReady&&(e=JSON.parse(e),this.onReady(e))};JSM.Mouse=function(){this.down=!1;this.button=0;this.alt=this.ctrl=this.shift=!1;this.diffY=this.diffX=this.currY=this.currX=this.prevY=this.prevX=0};JSM.Mouse.prototype.Down=function(e,t){var n=e;void 0===n&&(n=window.event);this.down=!0;this.button=e.which;this.shift=e.shiftKey;this.ctrl=e.ctrlKey;this.alt=e.altKey;this.SetCurrent(n,t);this.prevX=this.currX;this.prevY=this.currY};JSM.Mouse.prototype.Move=function(e,t){var n=e;void 0===n&&(n=window.event);this.shift=e.shiftKey;this.ctrl=e.ctrlKey;this.alt=e.altKey;this.SetCurrent(n,t);this.diffX=this.currX-this.prevX;this.diffY=this.currY-this.prevY;this.prevX=this.currX;this.prevY=this.currY};JSM.Mouse.prototype.Up=function(e,t){var n=e;void 0===n&&(n=window.event);this.down=!1;this.SetCurrent(n,t)};JSM.Mouse.prototype.Out=function(e,t){var n=e;void 0===n&&(n=window.event);this.down=!1;this.SetCurrent(n,t)};JSM.Mouse.prototype.SetCurrent=function(e,t){this.currX=e.clientX;this.currY=e.clientY;void 0!==t&&void 0!==t.offsetLeft&&void 0!==t.offsetTop&&(this.currX-=t.offsetLeft,this.currY-=t.offsetTop)};JSM.Touch=function(){this.down=!1;this.diffY=this.diffX=this.currY=this.currX=this.prevY=this.prevX=0};JSM.Touch.prototype.Start=function(e,t){if(0!==e.touches.length){var n=e.touches[0];this.down=!0;this.SetCurrent(n,t);this.prevX=this.currX;this.prevY=this.currY}};JSM.Touch.prototype.Move=function(e,t){0!==e.touches.length&&(this.SetCurrent(e.touches[0],t),this.diffX=this.currX-this.prevX,this.diffY=this.currY-this.prevY,this.prevX=this.currX,this.prevY=this.currY)};JSM.Touch.prototype.End=function(e,t){if(0!==e.touches.length){var n=e.touches[0];this.down=!1;this.SetCurrent(n,t)}};JSM.Touch.prototype.SetCurrent=function(e,t){this.currX=e.pageX;this.currY=e.pageY;void 0!==t&&void 0!==t.offsetLeft&&void 0!==t.offsetTop&&(this.currX=e.pageX-t.offsetLeft,this.currY=e.pageY-t.offsetTop)};JSM.Navigation=function(){this.orbitCenter=this.cameraEnableZoom=this.cameraEnablePan=this.cameraEnableOrbit=this.cameraFixUp=this.touch=this.mouse=this.resizeCallback=this.drawCallback=this.camera=this.canvas=null};JSM.Navigation.prototype.Init=function(e,t,n,r){this.canvas=e;this.camera=t;this.drawCallback=n;this.resizeCallback=r;this.mouse=new JSM.Mouse;this.touch=new JSM.Touch;this.cameraEnableZoom=this.cameraEnablePan=this.cameraEnableOrbit=this.cameraFixUp=!0;this.orbitCenter=this.camera.center.Clone();var i=this;document.addEventListener&&(document.addEventListener("mousemove",function(e){i.OnMouseMove(e)}),document.addEventListener("mouseup",function(e){i.OnMouseUp(e)}));this.canvas.addEventListener&&(this.canvas.addEventListener("mousedown",function(e){i.OnMouseDown(e)},!1),this.canvas.addEventListener("DOMMouseScroll",function(e){i.OnMouseWheel(e)},!1),this.canvas.addEventListener("mousewheel",function(e){i.OnMouseWheel(e)},!1),this.canvas.addEventListener("touchstart",function(e){i.OnTouchStart(e)},!1),this.canvas.addEventListener("touchmove",function(e){i.OnTouchMove(e)},!1),this.canvas.addEventListener("touchend",function(e){i.OnTouchEnd(e)},!1),this.canvas.addEventListener("contextmenu",function(e){i.OnContextMenu(e)},!1));window.addEventListener&&window.addEventListener("resize",function(e){i.OnResize(e)},!1);return!0};JSM.Navigation.prototype.SetCamera=function(e,t,n){this.camera.Set(e,t,n);this.orbitCenter=this.camera.center.Clone()};JSM.Navigation.prototype.EnableFixUp=function(e){this.cameraFixUp=e};JSM.Navigation.prototype.EnableOrbit=function(e){this.cameraEnableOrbit=e};JSM.Navigation.prototype.EnablePan=function(e){this.cameraEnablePan=e};JSM.Navigation.prototype.EnableZoom=function(e){this.cameraEnableZoom=e};JSM.Navigation.prototype.SetOrbitCenter=function(e){this.orbitCenter=e};JSM.Navigation.prototype.FitInWindow=function(e,t){var n=JSM.CoordSub(this.camera.center,e);this.camera.center=e;this.camera.eye=JSM.CoordSub(this.camera.eye,n);var n=JSM.VectorNormalize(JSM.CoordSub(this.camera.eye,this.camera.center)),r=this.camera.fieldOfView/2;this.canvas.width<this.canvas.height&&(r=r*this.canvas.width/this.canvas.height);r=t/Math.sin(r*JSM.DegRad);this.camera.eye=JSM.CoordOffset(this.camera.center,n,r);this.orbitCenter=this.camera.center.Clone()};JSM.Navigation.prototype.Orbit=function(e,t){var n=e*JSM.DegRad,r=t*JSM.DegRad,i=JSM.VectorNormalize(JSM.CoordSub(this.camera.center,this.camera.eye)),s=JSM.VectorNormalize(JSM.VectorCross(i,this.camera.up)),o=!JSM.CoordIsEqual(this.orbitCenter,this.camera.center);this.cameraFixUp?(i=JSM.GetVectorsAngle(i,this.camera.up)+r,JSM.IsGreater(i,0)&&JSM.IsLower(i,Math.PI)&&(this.camera.eye=JSM.CoordRotate(this.camera.eye,s,-r,this.orbitCenter),o&&(this.camera.center=JSM.CoordRotate(this.camera.center,s,-r,this.orbitCenter))),this.camera.eye=JSM.CoordRotate(this.camera.eye,this.camera.up,-n,this.orbitCenter),o&&(this.camera.center=JSM.CoordRotate(this.camera.center,this.camera.up,-n,this.orbitCenter))):(i=JSM.VectorNormalize(JSM.VectorCross(s,i)),this.camera.eye=JSM.CoordRotate(this.camera.eye,s,-r,this.orbitCenter),this.camera.eye=JSM.CoordRotate(this.camera.eye,i,-n,this.orbitCenter),o&&(this.camera.center=JSM.CoordRotate(this.camera.center,s,-r,this.orbitCenter),this.camera.center=JSM.CoordRotate(this.camera.center,i,-n,this.orbitCenter)),this.camera.up=i)};JSM.Navigation.prototype.Pan=function(e,t){var n=JSM.VectorNormalize(JSM.CoordSub(this.camera.center,this.camera.eye)),r=JSM.VectorNormalize(JSM.VectorCross(n,this.camera.up)),n=JSM.VectorNormalize(JSM.VectorCross(r,n));this.camera.eye=JSM.CoordOffset(this.camera.eye,r,-e);this.camera.center=JSM.CoordOffset(this.camera.center,r,-e);this.camera.eye=JSM.CoordOffset(this.camera.eye,n,t);this.camera.center=JSM.CoordOffset(this.camera.center,n,t)};JSM.Navigation.prototype.Zoom=function(e){var t=JSM.CoordSub(this.camera.center,this.camera.eye),n=JSM.VectorLength(t);if(e&&.1>n)return 0;n*=.1;e||(n*=-1);this.camera.eye=JSM.CoordOffset(this.camera.eye,t,n)};JSM.Navigation.prototype.DrawCallback=function(){void 0!==this.drawCallback&&null!==this.drawCallback&&this.drawCallback()};JSM.Navigation.prototype.ResizeCallback=function(){void 0!==this.resizeCallback&&null!==this.resizeCallback&&this.resizeCallback()};JSM.Navigation.prototype.OnMouseDown=function(e){e.preventDefault();this.mouse.Down(e,this.canvas)};JSM.Navigation.prototype.OnMouseMove=function(e){e.preventDefault();this.mouse.Move(e,this.canvas);this.mouse.down&&(e=0,1==this.mouse.button?this.cameraEnableOrbit&&(e=.5,this.Orbit(this.mouse.diffX*e,this.mouse.diffY*e),this.DrawCallback()):3==this.mouse.button&&this.cameraEnablePan&&(e=.001*JSM.CoordDistance(this.camera.eye,this.camera.center),this.Pan(this.mouse.diffX*e,this.mouse.diffY*e),this.DrawCallback()))};JSM.Navigation.prototype.OnMouseUp=function(e){e.preventDefault();this.mouse.Up(e,this.canvas)};JSM.Navigation.prototype.OnMouseOut=function(e){e.preventDefault();this.mouse.Out(e,this.canvas)};JSM.Navigation.prototype.OnMouseWheel=function(e){e.preventDefault();if(this.cameraEnableZoom){null===e&&(e=window.event);var t=0;e.detail?t=-e.detail:e.wheelDelta&&(t=e.wheelDelta/40);this.Zoom(0<t);this.DrawCallback()}};JSM.Navigation.prototype.OnTouchStart=function(e){e.preventDefault();this.touch.Start(e,this.canvas)};JSM.Navigation.prototype.OnTouchMove=function(e){e.preventDefault();this.touch.Move(e,this.canvas);this.touch.down&&this.cameraEnableOrbit&&(this.Orbit(.5*this.touch.diffX,.5*this.touch.diffY),this.DrawCallback())};JSM.Navigation.prototype.OnTouchEnd=function(e){e.preventDefault();this.touch.End(e,this.canvas)};JSM.Navigation.prototype.OnContextMenu=function(e){e.preventDefault()};JSM.Navigation.prototype.OnResize=function(e){e.preventDefault();this.ResizeCallback()};JSM.SoftwareViewer=function(){this.navigation=this.drawMode=this.drawer=this.bodies=this.camera=this.canvas=null};JSM.SoftwareViewer.prototype.Start=function(e,t){return!this.InitCanvas(e)||!this.InitCamera(t)?!1:!0};JSM.SoftwareViewer.prototype.InitCanvas=function(e){this.bodies=[];this.canvas=document.getElementById(e);if(!this.canvas)return!1;this.canvas instanceof HTMLCanvasElement?this.drawer=new JSM.CanvasDrawer(this.canvas):this.canvas instanceof SVGSVGElement&&(this.drawer=new JSM.SVGDrawer(this.canvas));if(!this.drawer)return!1;this.drawMode="Wireframe";return!0};JSM.SoftwareViewer.prototype.InitCamera=function(e){this.camera=JSM.ValueOrDefault(e,new JSM.Camera);if(!this.camera)return!1;this.navigation=new JSM.Navigation;return!this.navigation.Init(this.canvas,this.camera,this.Draw.bind(this),this.Resize.bind(this))?!1:!0};JSM.SoftwareViewer.prototype.AddBody=function(e,t){this.bodies.push([e,t])};JSM.SoftwareViewer.prototype.RemoveBodies=function(){this.bodies=[]};JSM.SoftwareViewer.prototype.FitInWindow=function(){var e=this.GetCenter(),t=this.GetBoundingSphereRadius(e);this.navigation.FitInWindow(e,t);this.Draw()};JSM.SoftwareViewer.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.SoftwareViewer.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r,i,s;for(n=0;n<this.bodies.length;n++){i=this.bodies[n][0];for(r=0;r<i.VertexCount();r++)s=i.GetVertex(r),e.x=JSM.Minimum(e.x,s.position.x),e.y=JSM.Minimum(e.y,s.position.y),e.z=JSM.Minimum(e.z,s.position.z),t.x=JSM.Maximum(t.x,s.position.x),t.y=JSM.Maximum(t.y,s.position.y),t.z=JSM.Maximum(t.z,s.position.z)}return[e,t]};JSM.SoftwareViewer.prototype.GetBoundingSphereRadius=function(e){if(void 0===e||null===e)e=this.GetCenter();var t=0,n,r,i,s;for(n=0;n<this.bodies.length;n++){i=this.bodies[n][0];for(r=0;r<i.VertexCount();r++)s=i.GetVertex(r),s=JSM.CoordDistance(e,s.position),JSM.IsGreater(s,t)&&(t=s)}return t};JSM.SoftwareViewer.prototype.Resize=function(){this.Draw()};JSM.SoftwareViewer.prototype.Draw=function(){var e,t;this.drawer.Clear();for(e=0;e<this.bodies.length;e++)t=this.bodies[e],JSM.DrawProjectedBody(t[0],t[1],this.camera,this.drawMode,!1,this.drawer);return!0};JSM.SpriteViewer=function(){this.navigation=this.projected=this.points=this.callbacks=this.camera=this.canvas=null};JSM.SpriteViewer.prototype.Start=function(e,t,n){return!this.InitCanvas(e)||!this.InitCamera(t)||!this.InitCallbacks(n)?!1:!0};JSM.SpriteViewer.prototype.InitCanvas=function(e){this.points=[];this.canvas=document.getElementById(e);return!this.canvas?!1:!0};JSM.SpriteViewer.prototype.InitCamera=function(e){this.camera=JSM.ValueOrDefault(e,new JSM.Camera);if(!this.camera)return!1;this.navigation=new JSM.Navigation;return!this.navigation.Init(this.canvas,this.camera,this.Draw.bind(this))?!1:!0};JSM.SpriteViewer.prototype.InitCallbacks=function(e){this.callbacks={onPointDraw:null};void 0!==e&&(void 0!==e.onDrawStart&&(this.callbacks.onDrawStart=e.onDrawStart),void 0!==e.onPointDraw&&(this.callbacks.onPointDraw=e.onPointDraw),void 0!==e.onDrawEnd&&(this.callbacks.onDrawEnd=e.onDrawEnd));return!0};JSM.SpriteViewer.prototype.AddPoint=function(e){this.points.push(e)};JSM.SpriteViewer.prototype.RemovePoints=function(){this.points=[]};JSM.SpriteViewer.prototype.Resize=function(){this.Draw()};JSM.SpriteViewer.prototype.NearestPointUnderPosition=function(e,t,n){t=new JSM.Coord2D(t,n);n=-1;var r=JSM.Inf,i,s,o;for(i=0;i<this.projected.length;i++)s=this.projected[i],o=JSM.CoordDistance2D(new JSM.Coord2D(s.position.x,s.position.y),t),JSM.IsLower(o,e)&&JSM.IsLower(o,r)&&(n=s.originalIndex,r=o);return n};JSM.SpriteViewer.prototype.NearestPointUnderMouse=function(e){return this.NearestPointUnderPosition(e,this.navigation.mouse.currX,this.navigation.mouse.currY)};JSM.SpriteViewer.prototype.NearestPointUnderTouch=function(e){return this.NearestPointUnderPosition(e,this.navigation.touch.currX,this.navigation.touch.currY)};JSM.SpriteViewer.prototype.FitInWindow=function(){var e=this.GetCenter(),t=this.GetBoundingSphereRadius(e);this.navigation.FitInWindow(e,t);this.Draw()};JSM.SpriteViewer.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.SpriteViewer.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r;for(n=0;n<this.points.length;n++)r=this.points[n],e.x=JSM.Minimum(e.x,r.x),e.y=JSM.Minimum(e.y,r.y),e.z=JSM.Minimum(e.z,r.z),t.x=JSM.Maximum(t.x,r.x),t.y=JSM.Maximum(t.y,r.y),t.z=JSM.Maximum(t.z,r.z);return[e,t]};JSM.SpriteViewer.prototype.GetBoundingSphereRadius=function(e){if(void 0===e||null===e)e=this.GetCenter();var t=0,n,r;for(n=0;n<this.points.length;n++)r=this.points[n],r=JSM.CoordDistance(e,r),JSM.IsGreater(r,t)&&(t=r);return t};JSM.SpriteViewer.prototype.Draw=function(){if(null!==this.callbacks.onDrawStart)this.callbacks.onDrawStart(this.canvas);var e=this.canvas.width/this.canvas.height,t=[0,0,this.canvas.width,this.canvas.height];this.projected=[];var n,r;for(n=0;n<this.points.length;n++)r=this.points[n],r=JSM.Project(r,this.camera.eye,this.camera.center,this.camera.up,this.camera.fieldOfView*JSM.DegRad,e,this.camera.nearClippingPlane,this.camera.farClippingPlane,t),r.y=this.canvas.height-r.y,null!==r&&this.projected.push({position:r,originalIndex:n});this.projected.sort(function(e,t){return e.position.z>t.position.z?-1:e.position.z<t.position.z?1:0});for(n=0;n<this.projected.length;n++)if(null!==this.callbacks.onPointDraw)this.callbacks.onPointDraw(this.canvas,this.projected[n].originalIndex,this.projected[n].position);if(null!==this.callbacks.onDrawEnd)this.callbacks.onDrawEnd(this.canvas);return!0};JSM.Viewer=function(){this.navigation=this.renderer=this.canvas=null};JSM.Viewer.prototype.Init=function(e,t,n){return!this.InitRenderer(e,t,n)||!this.InitNavigation()?!1:!0};JSM.Viewer.prototype.InitRenderer=function(e,t,n){this.renderer=new JSM.Renderer;return!this.renderer.Init(e,t,n)?!1:!0};JSM.Viewer.prototype.InitNavigation=function(){this.navigation=new JSM.Navigation;return!this.navigation.Init(this.renderer.canvas,this.renderer.camera,this.Draw.bind(this),this.Resize.bind(this))?!1:!0};JSM.Viewer.prototype.SetClearColor=function(e,t,n){this.renderer.SetClearColor(e,t,n);this.Draw()};JSM.Viewer.prototype.AddGeometries=function(e){this.renderer.AddGeometries(e);this.Draw()};JSM.Viewer.prototype.RemoveGeometries=function(){this.renderer.RemoveGeometries();this.Draw()};JSM.Viewer.prototype.FitInWindow=function(){var e=this.GetCenter(),t=this.GetBoundingSphereRadius(e);this.navigation.FitInWindow(e,t);this.Draw()};JSM.Viewer.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.Viewer.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r,i,s;for(n=0;n<this.renderer.geometries.length;n++){i=this.renderer.geometries[n];for(r=0;r<i.VertexCount();r+=1)s=i.GetTransformedVertex(r),e.x=JSM.Minimum(e.x,s.x),e.y=JSM.Minimum(e.y,s.y),e.z=JSM.Minimum(e.z,s.z),t.x=JSM.Maximum(t.x,s.x),t.y=JSM.Maximum(t.y,s.y),t.z=JSM.Maximum(t.z,s.z)}return[e,t]};JSM.Viewer.prototype.GetBoundingSphereRadius=function(e){if(void 0===e||null===e)e=this.GetCenter();var t=0,n,r,i,s;for(n=0;n<this.renderer.geometries.length;n++){i=this.renderer.geometries[n];for(r=0;r<i.VertexCount();r+=1)s=i.GetTransformedVertex(r),s=JSM.CoordDistance(e,s),JSM.IsGreater(s,t)&&(t=s)}return t};JSM.Viewer.prototype.Resize=function(){this.renderer.Resize();this.Draw()};JSM.Viewer.prototype.Draw=function(){this.renderer.Render()};JSM.PointCloudViewer=function(){this.navigation=this.renderer=this.canvas=null};JSM.PointCloudViewer.prototype.Init=function(e,t){return!this.InitRenderer(e,t)||!this.InitNavigation()?!1:!0};JSM.PointCloudViewer.prototype.InitRenderer=function(e,t){this.renderer=new JSM.PointCloudRenderer;return!this.renderer.Init(e,t)?!1:!0};JSM.PointCloudViewer.prototype.InitNavigation=function(){this.navigation=new JSM.Navigation;return!this.navigation.Init(this.renderer.canvas,this.renderer.camera,this.Draw.bind(this),this.Resize.bind(this))?!1:!0};JSM.PointCloudViewer.prototype.SetClearColor=function(e,t,n){this.renderer.SetClearColor(e,t,n)};JSM.PointCloudViewer.prototype.SetPointSize=function(e){this.renderer.SetPointSize(e)};JSM.PointCloudViewer.prototype.AddPoints=function(e,t){this.renderer.AddPoints(e,t)};JSM.PointCloudViewer.prototype.RemovePoints=function(){this.renderer.RemovePoints()};JSM.PointCloudViewer.prototype.FitInWindow=function(){var e=this.GetCenter(),t=this.GetBoundingSphereRadius(e);this.navigation.FitInWindow(e,t);this.Draw()};JSM.PointCloudViewer.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.PointCloudViewer.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r,i,s;for(n=0;n<this.renderer.points.length;n++){i=this.renderer.points[n].pointArray;for(r=0;r<i.length;r+=3)s=new JSM.Coord(i[r],i[r+1],i[r+2]),e.x=JSM.Minimum(e.x,s.x),e.y=JSM.Minimum(e.y,s.y),e.z=JSM.Minimum(e.z,s.z),t.x=JSM.Maximum(t.x,s.x),t.y=JSM.Maximum(t.y,s.y),t.z=JSM.Maximum(t.z,s.z)}return[e,t]};JSM.PointCloudViewer.prototype.GetBoundingSphereRadius=function(e){if(void 0===e||null===e)e=this.GetCenter();var t=0,n,r,i,s;for(n=0;n<this.renderer.points.length;n++){i=this.renderer.points[n].pointArray;for(r=0;r<i.length;r+=3)s=new JSM.Coord(i[r],i[r+1],i[r+2]),s=JSM.CoordDistance(e,s),JSM.IsGreater(s,t)&&(t=s)}return t};JSM.PointCloudViewer.prototype.Resize=function(){this.renderer.Resize();this.Draw()};JSM.PointCloudViewer.prototype.Draw=function(){this.renderer.Render()};JSM.ConvertBodyToThreeMeshes=function(e,t,n){var r={textureLoadedCallback:null,hasConvexPolygons:!1,doubleSided:!0};void 0!==n&&null!==n&&(r.textureLoadedCallback=JSM.ValueOrDefault(n.textureLoadedCallback,r.textureLoadedCallback),r.hasConvexPolygons=JSM.ValueOrDefault(n.hasConvexPolygons,r.hasConvexPolygons),r.doubleSided=JSM.ValueOrDefault(n.doubleSided,r.doubleSided));var i=[],s=null;JSM.ExplodeBodyToTriangles(e,t,{hasConvexPolygons:r.hasConvexPolygons,onGeometryStart:function(){s=new THREE.Geometry},onGeometryEnd:function(e){var t=null!==e.texture,n=1!==e.opacity,o=new THREE.MeshPhongMaterial({ambient:e.ambient,color:e.diffuse,specular:e.specular});r.doubleSided&&(o.side=THREE.DoubleSide);n&&(o.opacity=e.opacity,o.transparent=!0);t&&(e=THREE.ImageUtils.loadTexture(e.texture,new THREE.UVMapping,function(){null!==r.textureLoadedCallback&&r.textureLoadedCallback()}),e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,o.map=e);s.computeFaceNormals();o=new THREE.Mesh(s,o);i.push(o)},onTriangle:function(e,t,n,r,i,o,u,a,l){var c=s.vertices.length;s.vertices.push(new THREE.Vector3(e.x,e.y,e.z));s.vertices.push(new THREE.Vector3(t.x,t.y,t.z));s.vertices.push(new THREE.Vector3(n.x,n.y,n.z));e=new THREE.Face3(c+0,c+1,c+2);s.faces.push(e);null!==r&&null!==i&&null!==o&&(e=[],e.push(new THREE.Vector3(r.x,r.y,r.z)),e.push(new THREE.Vector3(i.x,i.y,i.z)),e.push(new THREE.Vector3(o.x,o.y,o.z)),s.faces[s.faces.length-1].vertexNormals=e);null!==u&&null!==a&&null!==l&&(r=[],r.push(new THREE.Vector2(u.x,-u.y)),r.push(new THREE.Vector2(a.x,-a.y)),r.push(new THREE.Vector2(l.x,-l.y)),s.faceVertexUvs[0].push(r))}});return i};JSM.ConvertModelToThreeMeshes=function(e,t,n){var r=[],i=[],s,o;for(s=0;s<e.BodyCount();s++){i=e.GetBody(s);i=JSM.ConvertBodyToThreeMeshes(i,t,n);for(o=0;o<i.length;o++)r.push(i[o])}return r};JSM.ConvertJSONDataToThreeMeshes=function(e,t,n){function r(e,n){function r(e){var r=e.parameters,l=s[e.material];e=l.texture;var c=l.offset,p=l.scale,d=new THREE.Color,v=new THREE.Color,m=new THREE.Color;d.setRGB(l.ambient[0],l.ambient[1],l.ambient[2]);v.setRGB(l.diffuse[0],l.diffuse[1],l.diffuse[2]);m.setRGB(l.specular[0],l.specular[1],l.specular[2]);void 0!==e&&(d.setRGB(1,1,1),v.setRGB(1,1,1),m.setRGB(1,1,1),void 0===c&&(c=[0,0]),void 0===p&&(p=[1,1]));d=new THREE.MeshPhongMaterial({ambient:v.getHex(),color:v.getHex(),specular:m.getHex(),side:THREE.DoubleSide});1!==l.opacity&&(d.opacity=l.opacity,d.transparent=!0);void 0!==e&&(l=THREE.ImageUtils.loadTexture(e,new THREE.UVMapping,function(){void 0!==t&&null!==t&&t()}),l.wrapS=THREE.RepeatWrapping,l.wrapT=THREE.RepeatWrapping,d.map=l);var l=new THREE.Geometry,y,w,E,S,x,T,N,C,k,L;for(L=0;L<r.length;L+=9)y=3*r[L+0],w=3*r[L+1],E=3*r[L+2],S=3*r[L+3],x=3*r[L+4],T=3*r[L+5],v=2*r[L+6],m=2*r[L+7],N=2*r[L+8],C=l.vertices.length,k=l.faces.length,l.vertices.push(new THREE.Vector3(o[y+0],o[y+1],o[y+2])),l.vertices.push(new THREE.Vector3(o[w+0],o[w+1],o[w+2])),l.vertices.push(new THREE.Vector3(o[E+0],o[E+1],o[E+2])),l.faces.push(new THREE.Face3(C+0,C+1,C+2)),y=[],y.push(new THREE.Vector3(u[S+0],u[S+1],u[S+2])),y.push(new THREE.Vector3(u[x+0],u[x+1],u[x+2])),y.push(new THREE.Vector3(u[T+0],u[T+1],u[T+2])),l.faces[k].vertexNormals=y,void 0!==e&&(S=[],S.push(new THREE.Vector2(c[0]+a[v+0]*p[0],c[1]+a[v+1]*p[1])),S.push(new THREE.Vector2(c[0]+a[m+0]*p[0],c[1]+a[m+1]*p[1])),S.push(new THREE.Vector2(c[0]+a[N+0]*p[0],c[1]+a[N+1]*p[1])),l.faceVertexUvs[0].push(S));r=new THREE.Mesh(l,d);r.originalJsonIndex=n;i.push(r)}var o=e.vertices;if(void 0!==o){var u=e.normals;if(void 0!==u){var a=e.uvs;if(void 0!==a){var l=e.triangles,c;for(c=0;c<l.length;c++)r(l[c])}}}}var i=[],s=e.materials;if(void 0===s)return i;var o=e.meshes;if(void 0===o)return i;var u=0;JSM.AsyncRunTask(function(){r(o[u],u);u+=1;return!0},n,o.length,0,i);return i};JSM.JSONFileConverter=function(e,t){this.onReady=e;this.onTextureLoaded=t};JSM.JSONFileConverter.prototype.Convert=function(e){(new JSM.JSONFileLoader(this.OnReady.bind(this))).Load(e)};JSM.JSONFileConverter.prototype.OnReady=function(e){null!==this.onReady&&(e=JSM.ConvertJSONDataToThreeMeshes(e,this.onTextureLoaded),this.onReady(e))};JSM.ThreeViewer=function(){this.enableDraw=this.drawLoop=this.settings=this.navigation=this.cameraMove=this.runAfterRender=this.runBeforeRender=this.directionalLight=this.ambientLight=this.renderer=this.camera=this.scene=this.canvas=null};JSM.ThreeViewer.prototype.Start=function(e,t){if(!this.IsWebGLEnabled()||!this.InitSettings(t)||!this.InitThree(e)||!this.InitCamera(t)||!this.InitLights())return!1;this.drawLoop=!1;this.enableDraw=!0;this.DrawIfNeeded();return!0};JSM.ThreeViewer.prototype.IsWebGLEnabled=function(){return!window.WebGLRenderingContext||!document.createElement("canvas").getContext("experimental-webgl")?!1:!0};JSM.ThreeViewer.prototype.InitSettings=function(e){this.settings={cameraEyePosition:new JSM.Coord(1,1,1),cameraCenterPosition:new JSM.Coord(0,0,0),cameraUpVector:new JSM.Coord(0,0,1),lightAmbientColor:[.5,.5,.5],lightDiffuseColor:[.5,.5,.5]};void 0!==e&&(void 0!==e.cameraEyePosition&&(this.settings.cameraEyePosition=JSM.CoordFromArray(e.cameraEyePosition)),void 0!==e.cameraCenterPosition&&(this.settings.cameraCenterPosition=JSM.CoordFromArray(e.cameraCenterPosition)),void 0!==e.cameraUpVector&&(this.settings.cameraUpVector=JSM.CoordFromArray(e.cameraUpVector)),void 0!==e.lightAmbientColor&&(this.settings.lightAmbientColor=e.lightAmbientColor),void 0!==e.lightDiffuseColor&&(this.settings.lightDiffuseColor=e.lightDiffuseColor));return!0};JSM.ThreeViewer.prototype.InitThree=function(e){this.canvas=document.getElementById(e);if(!this.canvas||!this.canvas.getContext)return!1;this.scene=new THREE.Scene;if(!this.scene)return!1;this.renderer=new THREE.WebGLRenderer({canvas:this.canvas,antialias:!0});if(!this.renderer)return!1;this.renderer.setClearColor(new THREE.Color(16777215));this.renderer.setSize(this.canvas.width,this.canvas.height);return!0};JSM.ThreeViewer.prototype.InitCamera=function(e){this.cameraMove=new JSM.Camera(JSM.CoordFromArray(e.cameraEyePosition),JSM.CoordFromArray(e.cameraCenterPosition),JSM.CoordFromArray(e.cameraUpVector),e.fieldOfView,e.nearClippingPlane,e.farClippingPlane);if(!this.cameraMove)return!1;this.navigation=new JSM.Navigation;if(!this.navigation.Init(this.canvas,this.cameraMove,this.DrawIfNeeded.bind(this),this.Resize.bind(this)))return!1;this.camera=new THREE.PerspectiveCamera(this.cameraMove.fieldOfView,this.canvas.width/this.canvas.height,this.cameraMove.nearClippingPlane,this.cameraMove.farClippingPlane);if(!this.camera)return!1;this.scene.add(this.camera);return!0};JSM.ThreeViewer.prototype.InitLights=function(){var e=new THREE.Color,t=new THREE.Color;e.setRGB(this.settings.lightAmbientColor[0],this.settings.lightAmbientColor[1],this.settings.lightAmbientColor[2]);t.setRGB(this.settings.lightDiffuseColor[0],this.settings.lightDiffuseColor[1],this.settings.lightDiffuseColor[2]);this.ambientLight=new THREE.AmbientLight(e.getHex());if(!this.ambientLight)return!1;this.scene.add(this.ambientLight);this.directionalLight=new THREE.DirectionalLight(t.getHex());if(!this.directionalLight)return!1;e=(new THREE.Vector3).subVectors(this.cameraMove.eye,this.cameraMove.center);this.directionalLight.position.set(e.x,e.y,e.z);this.scene.add(this.directionalLight);return!0};JSM.ThreeViewer.prototype.SetRunBeforeRender=function(e){this.runBeforeRender=e};JSM.ThreeViewer.prototype.SetRunAfterRender=function(e){this.runAfterRender=e};JSM.ThreeViewer.prototype.SetClearColor=function(e){this.renderer.setClearColor(new THREE.Color(e));this.DrawIfNeeded()};JSM.ThreeViewer.prototype.AddMesh=function(e){this.scene.add(e);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.AddMeshes=function(e){var t;for(t=0;t<e.length;t++)this.scene.add(e[t]);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.MeshCount=function(){var e=0;this.scene.traverse(function(t){t instanceof THREE.Mesh&&(e+=1)});return e};JSM.ThreeViewer.prototype.VertexCount=function(){var e=0;this.scene.traverse(function(t){t instanceof THREE.Mesh&&(e+=t.geometry.vertices.length)});return e};JSM.ThreeViewer.prototype.FaceCount=function(){var e=0;this.scene.traverse(function(t){t instanceof THREE.Mesh&&(e+=t.geometry.faces.length)});return e};JSM.ThreeViewer.prototype.GetMesh=function(e){var t=null,n=0,r;for(r=0;r<this.scene.children.length;r++)if(t=this.scene.children[r],t instanceof THREE.Mesh){if(n==e)return t;n+=1}return null};JSM.ThreeViewer.prototype.RemoveMesh=function(e){this.scene.remove(e);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.RemoveMeshes=function(){var e,t;for(t=0;t<this.scene.children.length;t++)e=this.scene.children[t],e instanceof THREE.Mesh&&(this.scene.remove(e),t--);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.RemoveLastMesh=function(){var e=null;this.scene.traverse(function(t){t instanceof THREE.Mesh&&(e=t)});null!==e&&this.scene.remove(e);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.SetCamera=function(e,t,n){this.navigation.SetCamera(e,t,n);this.navigation.SetOrbitCenter(t.Clone());this.DrawIfNeeded()};JSM.ThreeViewer.prototype.Resize=function(){this.camera.aspect=this.canvas.width/this.canvas.height;this.camera.updateProjectionMatrix();this.renderer.setSize(this.canvas.width,this.canvas.height);this.DrawIfNeeded()};JSM.ThreeViewer.prototype.FitInWindow=function(){if(0!==this.MeshCount()){var e=this.GetCenter(),t=this.GetBoundingSphereRadius(e);this.navigation.FitInWindow(e,t);this.DrawIfNeeded()}};JSM.ThreeViewer.prototype.AdjustClippingPlanes=function(e){var t=this.GetCenter();this.GetBoundingSphereRadius(t)<e?(this.camera.near=.1,this.camera.far=1e3):(this.camera.near=10,this.camera.far=1e6);this.camera.updateProjectionMatrix();this.Draw()};JSM.ThreeViewer.prototype.GetCenter=function(){var e=this.GetBoundingBox();return JSM.MidCoord(e[0],e[1])};JSM.ThreeViewer.prototype.GetBoundingBox=function(){var e=new JSM.Coord(JSM.Inf,JSM.Inf,JSM.Inf),t=new JSM.Coord(-JSM.Inf,-JSM.Inf,-JSM.Inf),n,r;this.scene.traverse(function(i){if(i instanceof THREE.Mesh){n=i.geometry;var s;for(s=0;s<n.vertices.length;s++)r=n.vertices[s].clone(),r.add(i.position),e.x=JSM.Minimum(e.x,r.x),e.y=JSM.Minimum(e.y,r.y),e.z=JSM.Minimum(e.z,r.z),t.x=JSM.Maximum(t.x,r.x),t.y=JSM.Maximum(t.y,r.y),t.z=JSM.Maximum(t.z,r.z)}});return[e,t]};JSM.ThreeViewer.prototype.GetBoundingSphereRadius=function(e){if(void 0===e||null===e)e=this.GetCenter();var t=0,n,r,i;this.scene.traverse(function(s){if(s instanceof THREE.Mesh){n=s.geometry;var o;for(o=0;o<n.vertices.length;o++)r=n.vertices[o].clone(),r.add(s.position),i=JSM.CoordDistance(e,new JSM.Coord(r.x,r.y,r.z)),JSM.IsGreater(i,t)&&(t=i)}});return t};JSM.ThreeViewer.prototype.GetObjectsUnderPosition=function(e,t){var n=2*(e/this.canvas.width)-1,r=2*-(t/this.canvas.height)+1,i=new THREE.Projector,s=this.camera.position,n=new THREE.Vector3(n,r,.5);i.unprojectVector(n,this.camera);n.sub(s);n.normalize();return(new THREE.Raycaster(s,n)).intersectObjects(this.scene.children)};JSM.ThreeViewer.prototype.GetObjectsUnderMouse=function(){return this.GetObjectsUnderPosition(this.navigation.mouse.currX,this.navigation.mouse.currY)};JSM.ThreeViewer.prototype.GetObjectsUnderTouch=function(){return this.GetObjectsUnderPosition(this.navigation.touch.currX,this.navigation.touch.currY)};JSM.ThreeViewer.prototype.ProjectVector=function(e,t,n){var r=this.canvas.width/2,i=this.canvas.height/2,s=new THREE.Projector;e=new THREE.Vector3(e,t,n);s.projectVector(e,this.camera);e.x=e.x*r+r;e.y=-(e.y*i)+i;return e};JSM.ThreeViewer.prototype.EnableDraw=function(e){this.enableDraw=e};JSM.ThreeViewer.prototype.Draw=function(){if(this.enableDraw){null!==this.runBeforeRender&&this.runBeforeRender();this.camera.position.set(this.cameraMove.eye.x,this.cameraMove.eye.y,this.cameraMove.eye.z);this.camera.up.set(this.cameraMove.up.x,this.cameraMove.up.y,this.cameraMove.up.z);this.camera.lookAt(new THREE.Vector3(this.cameraMove.center.x,this.cameraMove.center.y,this.cameraMove.center.z));var e=(new THREE.Vector3).subVectors(this.cameraMove.eye,this.cameraMove.center);this.directionalLight.position.set(e.x,e.y,e.z);this.renderer.render(this.scene,this.camera);null!==this.runAfterRender&&this.runAfterRender();this.drawLoop&&requestAnimationFrame(this.Draw.bind(this))}};JSM.ThreeViewer.prototype.DrawIfNeeded=function(){this.drawLoop||this.Draw()};JSM.ThreeViewer.prototype.StartDrawLoop=function(){this.drawLoop=!0;this.Draw()};var Ammo=function(){function l(e){throw"NO_DYNAMIC_EXECUTION was set, cannot eval"}function R(e,t){if(!e){Cm("Assertion failed: "+t)}}function z(t){var n=e["_"+t];if(!n){Cm("NO_DYNAMIC_EXECUTION was set, cannot eval - ccall/cwrap are not functional")}R(n,"Cannot call unknown function "+t+" (perhaps LLVM optimizations or closure removed it?)");return n}function V(e,t,n,r){n=n||"i8";if(n.charAt(n.length-1)==="*")n="i32";switch(n){case"i1":ht[e>>0]=t;break;case"i8":ht[e>>0]=t;break;case"i16":dt[e>>1]=t;break;case"i32":mt[e>>2]=t;break;case"i64":A=[t>>>0,(k=t,+on(k)>=+1?k>+0?(Sn(+yn(k/+4294967296),+4294967295)|0)>>>0:~~+gn((k- +(~~k>>>0))/+4294967296)>>>0:0)],mt[e>>2]=A[0],mt[e+4>>2]=A[1];break;case"float":yt[e>>2]=t;break;case"double":bt[e>>3]=t;break;default:Cm("invalid type for setValue: "+n)}}function $(e,t,n){t=t||"i8";if(t.charAt(t.length-1)==="*")t="i32";switch(t){case"i1":return ht[e>>0];case"i8":return ht[e>>0];case"i16":return dt[e>>1];case"i32":return mt[e>>2];case"i64":return mt[e>>2];case"float":return yt[e>>2];case"double":return bt[e>>3];default:Cm("invalid type for setValue: "+t)}return null}function Z(e,t,n,r){var i,s;if(typeof e==="number"){i=true;s=e}else{i=false;s=e.length}var o=typeof t==="string"?t:null;var u;if(n==Y){u=r}else{u=[br,c.stackAlloc,c.staticAlloc,c.dynamicAlloc][n===undefined?Q:n](Math.max(s,o?1:t.length))}if(i){var r=u,a;R((u&3)==0);a=u+(s&~3);for(;r<a;r+=4){mt[r>>2]=0}a=u+s;while(r<a){ht[r++>>0]=0}return u}if(o==="i8"){if(e.subarray||e.slice){pt.set(e,u)}else{pt.set(new Uint8Array(e),u)}return u}var f=0,l,h,p;while(f<s){var d=e[f];if(typeof d==="function"){d=c.getFunctionIndex(d)}l=o||t[f];if(l===0){f++;continue}if(l=="i64")l="i32";V(u+f,d,l);if(p!==l){h=c.getNativeTypeSize(l);p=l}f+=h}return u}function et(e,t){var n=false;var r;var i=0;while(1){r=pt[e+i>>0];if(r>=128)n=true;else if(r==0&&!t)break;i++;if(t&&i==t)break}if(!t)t=i;var s="";if(!n){var o=1024;var u;while(t>0){u=String.fromCharCode.apply(String,pt.subarray(e,e+Math.min(t,o)));s=s?s+u:u;e+=o;t-=o}return s}var a=new c.UTF8Processor;for(i=0;i<t;i++){r=pt[e+i>>0];s+=a.processCChar(r)}return s}function tt(e){var t=0;var n="";while(1){var r=dt[e+t*2>>1];if(r==0)return n;++t;n+=String.fromCharCode(r)}}function nt(e,t){for(var n=0;n<e.length;++n){var r=e.charCodeAt(n);dt[t+n*2>>1]=r}dt[t+e.length*2>>1]=0}function rt(e){var t=0;var n="";while(1){var r=mt[e+t*4>>2];if(r==0)return n;++t;if(r>=65536){var i=r-65536;n+=String.fromCharCode(55296|i>>10,56320|i&1023)}else{n+=String.fromCharCode(r)}}}function it(e,t){var n=0;for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);if(i>=55296&&i<=57343){var s=e.charCodeAt(++r);i=65536+((i&1023)<<10)|s&1023}mt[t+n*4>>2]=i;++n}mt[t+n*4>>2]=0}function st(t){function h(n){if(n)e.print(n);e.print(t);var r="";for(var i=0;i<u;i++)r+=" ";e.print(r+"^")}function p(){u++;if(t[u]==="K")u++;var e=[];while(t[u]!=="E"){if(t[u]==="S"){u++;var n=t.indexOf("_",u);var r=t.substring(u,n)||0;e.push(f[r]||"?");u=n+1;continue}if(t[u]==="C"){e.push(e[e.length-1]);u+=2;continue}var i=parseInt(t.substr(u));var s=i.toString().length;if(!i||!s){u--;break}var o=t.substr(u+s,i);e.push(o);f.push(o);u+=s+i}u++;return e}function d(e,n,r){function o(){return"("+s.join(", ")+")"}n=n||Infinity;var i="",s=[];var f;if(t[u]==="N"){f=p().join("::");n--;if(n===0)return e?[f]:f}else{if(t[u]==="K"||l&&t[u]==="L")u++;var c=parseInt(t.substr(u));if(c){var h=c.toString().length;f=t.substr(u+h,c);u+=h+c}}l=false;if(t[u]==="I"){u++;var v=d(true);var m=d(true,1,true);i+=m[0]+" "+f+"<"+v.join(", ")+">"}else{i=f}e:while(u<t.length&&n-->0){var g=t[u++];if(g in a){s.push(a[g])}else{switch(g){case"P":s.push(d(true,1,true)[0]+"*");break;case"R":s.push(d(true,1,true)[0]+"&");break;case"L":{u++;var y=t.indexOf("E",u);var c=y-u;s.push(t.substr(u,c));u+=c+2;break};case"A":{var c=parseInt(t.substr(u));u+=c.toString().length;if(t[u]!=="_")throw"?";u++;s.push(d(true,1,true)[0]+" ["+c+"]");break};case"E":break e;default:i+="?"+g;break e}}}if(!r&&s.length===1&&s[0]==="void")s=[];if(e){if(i){s.push(i+"?")}return s}else{return i+o()}}var n=!!e["___cxa_demangle"];if(n){try{var r=br(t.length);en(t.substr(1),r);var i=br(4);var s=e["___cxa_demangle"](r,0,0,i);if($(i,"i32")===0&&s){return et(s)}}catch(o){}finally{if(r)ef(r);if(i)ef(i);if(s)ef(s)}}var u=3;var a={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."};var f=[];var l=true;var v=t;try{if(t=="Object._main"||t=="_main"){return"main()"}if(typeof t==="number")t=et(t);if(t[0]!=="_")return t;if(t[1]!=="_")return t;if(t[2]!=="Z")return t;switch(t[3]){case"n":return"operator new()";case"d":return"operator delete()"}v=d()}catch(o){v+="?"}if(v.indexOf("?")>=0&&!n){c.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling")}return v}function ot(e){return e.replace(/__Z[\w\d_]+/g,function(e){var t=st(e);return e===t?e:e+" ["+t+"]"})}function ut(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack){return"(no stack trace available)"}}return e.stack.toString()}function at(){return ot(ut())}function lt(e){return e+4095&-4096}function Lt(){Cm("Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+Ot+", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs.")}function Pt(e){while(e.length>0){var t=e.shift();if(typeof t=="function"){t();continue}var n=t.func;if(typeof n==="number"){if(t.arg===undefined){c.dynCall("v",n)}else{c.dynCall("vi",n,[t.arg])}}else{n(t.arg===undefined?null:t.arg)}}}function Ut(){if(e["preRun"]){if(typeof e["preRun"]=="function")e["preRun"]=[e["preRun"]];while(e["preRun"].length){$t(e["preRun"].shift())}}Pt(Ht)}function zt(){if(qt)return;qt=true;Pt(Bt)}function Wt(){Pt(jt)}function Xt(){Pt(Ft);Rt=true}function Vt(){if(e["postRun"]){if(typeof e["postRun"]=="function")e["postRun"]=[e["postRun"]];while(e["postRun"].length){Gt(e["postRun"].shift())}}Pt(It)}function $t(e){Ht.unshift(e)}function Jt(e){Bt.unshift(e)}function Kt(e){jt.unshift(e)}function Qt(e){Ft.unshift(e)}function Gt(e){It.unshift(e)}function Yt(e,t,n){var r=(new c.UTF8Processor).processJSString(e);if(n){r.length=n}if(!t){r.push(0)}return r}function Zt(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(r>255){r&=255}t.push(String.fromCharCode(r))}return t.join("")}function en(e,t,n){var r=Yt(e,n);var i=0;while(i<r.length){var s=r[i];ht[t+i>>0]=s;i=i+1}}function tn(e,t){for(var n=0;n<e.length;n++){ht[t+n>>0]=e[n]}}function nn(e,t,n){for(var r=0;r<e.length;r++){ht[t+r>>0]=e.charCodeAt(r)}if(!n)ht[t+e.length>>0]=0}function rn(e,t,n){if(e>=0){return e}return t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function sn(e,t,n){if(e<=0){return e}var r=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);if(e>=r&&(t<=32||e>r)){e=-2*r+e}return e}function Cn(t){xn++;if(e["monitorRunDependencies"]){e["monitorRunDependencies"](xn)}}function kn(t){xn--;if(e["monitorRunDependencies"]){e["monitorRunDependencies"](xn)}if(xn==0){if(Tn!==null){clearInterval(Tn);Tn=null}if(Nn){var n=Nn;Nn=null;n()}}}function On(e){ht[An]=ht[e];ht[An+1]=ht[e+1];ht[An+2]=ht[e+2];ht[An+3]=ht[e+3]}function Mn(e){ht[An]=ht[e];ht[An+1]=ht[e+1];ht[An+2]=ht[e+2];ht[An+3]=ht[e+3];ht[An+4]=ht[e+4];ht[An+5]=ht[e+5];ht[An+6]=ht[e+6];ht[An+7]=ht[e+7]}function Hn(e){mt[Pn>>2]=e;return e}function jn(e){switch(e){case 30:return ft;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:{if(typeof navigator==="object")return navigator["hardwareConcurrency"]||1;return 1}}Hn(Bn.EINVAL);return-1}function Fn(){return!!Fn.uncaught_exception}function qn(e){if(!In.last){In.last=e}In.clearRef(In.deAdjust(e));throw e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function Rn(){var t=In.last;if(!t){return(wi["setTempRet0"](0),0)|0}var n=In.infos[t];var r=n.type;if(!r){return(wi["setTempRet0"](0),t)|0}var i=Array.prototype.slice.call(arguments);var s=e["___cxa_is_pointer_type"](r);if(!Rn.buffer)Rn.buffer=br(4);mt[Rn.buffer>>2]=t;t=Rn.buffer;for(var o=0;o<i.length;o++){if(i[o]&&e["___cxa_can_catch"](i[o],r,t)){t=mt[t>>2];n.adjusted=t;return(wi["setTempRet0"](i[o]),t)|0}}t=mt[t>>2];return(wi["setTempRet0"](r),t)|0}function Un(e,t,n){In.infos[e]={ptr:e,adjusted:e,type:t,destructor:n,refcount:0};In.last=e;if(!("uncaught_exception"in Fn)){Fn.uncaught_exception=1}else{Fn.uncaught_exception++}throw e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function zn(){e["abort"]()}function Wn(e,t){if(!Wn.seen)Wn.seen={};if(e in Wn.seen)return;c.dynCall("v",t);Wn.seen[e]=1}function Kn(e,t,n,r){var i=Jn.getSocket(e);if(!i){Hn(Bn.EBADF);return-1}return Gn(e,t,n)}function Qn(e,t,n,r){var i=$n.getStream(e);if(!i){Hn(Bn.EBADF);return-1}try{var s=ht;return $n.write(i,s,t,n,r)}catch(o){$n.handleFSError(o);return-1}}function Gn(e,t,n){var r=$n.getStream(e);if(!r){Hn(Bn.EBADF);return-1}try{var i=ht;return $n.write(r,i,t,n)}catch(s){$n.handleFSError(s);return-1}}function Yn(e){e=$n.getStreamFromPtr(e);if(!e)return-1;return e.fd}function Zn(e,t){var n=rn(e&255);ht[Zn.ret>>0]=n;var r=Yn(t);var i=Gn(r,Zn.ret,1);if(i==-1){var s=$n.getStreamFromPtr(t);if(s)s.error=true;return-1}else{return n}}function tr(e){return er[e]||0}function rr(e,t){if(e==0){return Bn.EINVAL}mt[e>>2]=nr;er[nr]=0;nr++;return 0}function sr(e,t){return e%t}function or(){return sr.apply(null,arguments)}function ur(e,t){if(!(e in er)){return Bn.EINVAL}er[e]=t;return 0}function fr(){p=true;throw"Pure virtual function called!"}function lr(){}function hr(e){if(!ht[e>>0]){ht[e>>0]=1;return 1}return 0}function pr(e){var t=Date.now();mt[e>>2]=t/1e3|0;mt[e+4>>2]=t%1e3*1e3|0;return 0}function dr(e){var t=Array.prototype.slice.call(arguments,1);return+c.getAsmConst(e,t.length).apply(null,t)}function vr(e){Fn.uncaught_exception--;In.caught.push(e);In.addRef(In.deAdjust(e));return e}function gr(e,t,n){pt.set(pt.subarray(t,t+n),e);return e}function yr(e){var t=yr;if(!t.called){kt=lt(kt);t.called=true;R(c.dynamicAlloc);t.alloc=c.dynamicAlloc;c.dynamicAlloc=function(){Cm("cannot dynamically allocate, sbrk now has control")}}var n=kt;if(e!=0)t.alloc(e);return n}function br(e){var t=c.dynamicAlloc(e+8);return t+8&4294967288}function wr(e){return br(e)}function Er(){return Pn}function Sr(){Cm("trap!")}function xr(e){var t=Date.now()/1e3|0;if(e){mt[e>>2]=t}return t}function Nr(e,t,n,r){var i=n*t;if(i==0)return 0;var s=Yn(r);var o=Gn(s,e,i);if(o==-1){var u=$n.getStreamFromPtr(r);if(u)u.error=true;return 0}else{return o/t|0}}function Cr(e){return e<0||e===0&&1/e===-Infinity}function kr(e,t){function i(e){var n;if(e==="double"){n=(mt[An>>2]=mt[t+r>>2],mt[An+4>>2]=mt[t+(r+4)>>2],+bt[An>>3])}else if(e=="i64"){n=[mt[t+r>>2],mt[t+(r+4)>>2]]}else{e="i32";n=mt[t+r>>2]}r+=c.getNativeFieldSize(e);return n}var n=e;var r=0;var s=[];var o,u,a;while(1){var f=n;o=ht[n>>0];if(o===0)break;u=ht[n+1>>0];if(o==37){var l=false;var h=false;var p=false;var d=false;var v=false;e:while(1){switch(u){case 43:l=true;break;case 45:h=true;break;case 35:p=true;break;case 48:if(d){break e}else{d=true;break};case 32:v=true;break;default:break e}n++;u=ht[n+1>>0]}var m=0;if(u==42){m=i("i32");n++;u=ht[n+1>>0]}else{while(u>=48&&u<=57){m=m*10+(u-48);n++;u=ht[n+1>>0]}}var g=false,y=-1;if(u==46){y=0;g=true;n++;u=ht[n+1>>0];if(u==42){y=i("i32");n++}else{while(1){var b=ht[n+1>>0];if(b<48||b>57)break;y=y*10+(b-48);n++}}u=ht[n+1>>0]}if(y<0){y=6;g=false}var w;switch(String.fromCharCode(u)){case"h":var E=ht[n+2>>0];if(E==104){n++;w=1}else{w=2}break;case"l":var E=ht[n+2>>0];if(E==108){n++;w=8}else{w=4}break;case"L":case"q":case"j":w=8;break;case"z":case"t":case"I":w=4;break;default:w=null}if(w)n++;u=ht[n+1>>0];switch(String.fromCharCode(u)){case"d":case"i":case"u":case"o":case"x":case"X":case"p":{var S=u==100||u==105;w=w||4;var a=i("i"+w*8);var x=a;var T;if(w==8){a=c.makeBigInt(a[0],a[1],u==117)}if(w<=4){var N=Math.pow(256,w)-1;a=(S?sn:rn)(a&N,w*8)}var C=Math.abs(a);var k="";if(u==100||u==105){if(w==8&&ym)T=ym.stringify(x[0],x[1],null);else T=sn(a,8*w,1).toString(10)}else if(u==117){if(w==8&&ym)T=ym.stringify(x[0],x[1],true);else T=rn(a,8*w,1).toString(10);a=Math.abs(a)}else if(u==111){T=(p?"0":"")+C.toString(8)}else if(u==120||u==88){k=p&&a!=0?"0x":"";if(w==8&&ym){if(x[1]){T=(x[1]>>>0).toString(16);var L=(x[0]>>>0).toString(16);while(L.length<8)L="0"+L;T+=L}else{T=(x[0]>>>0).toString(16)}}else if(a<0){a=-a;T=(C-1).toString(16);var A=[];for(var O=0;O<T.length;O++){A.push((15-parseInt(T[O],16)).toString(16))}T=A.join("");while(T.length<w*2)T="f"+T}else{T=C.toString(16)}if(u==88){k=k.toUpperCase();T=T.toUpperCase()}}else if(u==112){if(C===0){T="(nil)"}else{k="0x";T=C.toString(16)}}if(g){while(T.length<y){T="0"+T}}if(a>=0){if(l){k="+"+k}else if(v){k=" "+k}}if(T.charAt(0)=="-"){k="-"+k;T=T.substr(1)}while(k.length+T.length<m){if(h){T+=" "}else{if(d){T="0"+T}else{k=" "+k}}}T=k+T;T.split("").forEach(function(e){s.push(e.charCodeAt(0))});break};case"f":case"F":case"e":case"E":case"g":case"G":{var a=i("double");var T;if(isNaN(a)){T="nan";d=false}else if(!isFinite(a)){T=(a<0?"-":"")+"inf";d=false}else{var M=false;var _=Math.min(y,20);if(u==103||u==71){M=true;y=y||1;var D=parseInt(a.toExponential(_).split("e")[1],10);if(y>D&&D>=-4){u=(u==103?"f":"F").charCodeAt(0);y-=D+1}else{u=(u==103?"e":"E").charCodeAt(0);y--}_=Math.min(y,20)}if(u==101||u==69){T=a.toExponential(_);if(/[eE][-+]\d$/.test(T)){T=T.slice(0,-1)+"0"+T.slice(-1)}}else if(u==102||u==70){T=a.toFixed(_);if(a===0&&Cr(a)){T="-"+T}}var P=T.split("e");if(M&&!p){while(P[0].length>1&&P[0].indexOf(".")!=-1&&(P[0].slice(-1)=="0"||P[0].slice(-1)==".")){P[0]=P[0].slice(0,-1)}}else{if(p&&T.indexOf(".")==-1)P[0]+=".";while(y>_++)P[0]+="0"}T=P[0]+(P.length>1?"e"+P[1]:"");if(u==69)T=T.toUpperCase();if(a>=0){if(l){T="+"+T}else if(v){T=" "+T}}}while(T.length<m){if(h){T+=" "}else{if(d&&(T[0]=="-"||T[0]=="+")){T=T[0]+"0"+T.slice(1)}else{T=(d?"0":" ")+T}}}if(u<97)T=T.toUpperCase();T.split("").forEach(function(e){s.push(e.charCodeAt(0))});break};case"s":{var H=i("i8*");var B=H?Si(H):"(null)".length;if(g)B=Math.min(B,y);if(!h){while(B<m--){s.push(32)}}if(H){for(var O=0;O<B;O++){s.push(pt[H++>>0])}}else{s=s.concat(Yt("(null)".substr(0,B),true))}if(h){while(B<m--){s.push(32)}}break};case"c":{if(h)s.push(i("i8"));while(--m>0){s.push(32)}if(!h)s.push(i("i8"));break};case"n":{var j=i("i32*");mt[j>>2]=s.length;break};case"%":{s.push(o);break};default:{for(var O=f;O<n+2;O++){s.push(ht[O>>0])}}}n+=2}else{s.push(o);n+=1}}return s}function Lr(e,t,n){var r=kr(t,n);var i=c.stackSave();var s=Nr(Z(r,"i8",K),1,r.length,e);c.stackRestore(i);return s}function Ar(e,t,n){return Lr(e,t,mt[n>>2])}function Dr(t,n,r,i,s,o){try{e["dynCall_viiiii"](t,n,r,i,s,o)}catch(u){if(typeof u!=="number"&&u!=="longjmp")throw u;wi["setThrew"](1,0)}}function Pr(t,n,r){try{e["dynCall_vid"](t,n,r)}catch(i){if(typeof i!=="number"&&i!=="longjmp")throw i;wi["setThrew"](1,0)}}function Hr(t,n){try{e["dynCall_vi"](t,n)}catch(r){if(typeof r!=="number"&&r!=="longjmp")throw r;wi["setThrew"](1,0)}}function Br(t,n,r,i,s,o,u){try{e["dynCall_viiidii"](t,n,r,i,s,o,u)}catch(a){if(typeof a!=="number"&&a!=="longjmp")throw a;wi["setThrew"](1,0)}}function jr(t,n,r){try{e["dynCall_vii"](t,n,r)}catch(i){if(typeof i!=="number"&&i!=="longjmp")throw i;wi["setThrew"](1,0)}}function Fr(t,n,r,i,s,o,u,a,f,l,c){try{return e["dynCall_iiiiiiiiiii"](t,n,r,i,s,o,u,a,f,l,c)}catch(h){if(typeof h!=="number"&&h!=="longjmp")throw h;wi["setThrew"](1,0)}}function Ir(t,n){try{return e["dynCall_ii"](t,n)}catch(r){if(typeof r!=="number"&&r!=="longjmp")throw r;wi["setThrew"](1,0)}}function qr(t,n,r,i,s){try{e["dynCall_viidi"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function Rr(t,n,r,i,s,o,u){try{e["dynCall_viddiii"](t,n,r,i,s,o,u)}catch(a){if(typeof a!=="number"&&a!=="longjmp")throw a;wi["setThrew"](1,0)}}function Ur(t,n,r,i,s){try{e["dynCall_vidii"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function zr(t,n,r,i,s){try{return e["dynCall_iiiii"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function Wr(t,n,r,i){try{e["dynCall_vidi"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function Xr(t,n,r,i,s,o,u,a,f){try{return e["dynCall_diiiiiiii"](t,n,r,i,s,o,u,a,f)}catch(l){if(typeof l!=="number"&&l!=="longjmp")throw l;wi["setThrew"](1,0)}}function Vr(t,n,r,i,s,o,u,a,f,l,c,h){try{e["dynCall_viiiiddddiid"](t,n,r,i,s,o,u,a,f,l,c,h)}catch(p){if(typeof p!=="number"&&p!=="longjmp")throw p;wi["setThrew"](1,0)}}function $r(t,n,r,i,s,o){try{return e["dynCall_diiiii"](t,n,r,i,s,o)}catch(u){if(typeof u!=="number"&&u!=="longjmp")throw u;wi["setThrew"](1,0)}}function Jr(t,n,r,i){try{return e["dynCall_iiii"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function Kr(t,n,r,i,s,o,u){try{e["dynCall_viiiiii"](t,n,r,i,s,o,u)}catch(a){if(typeof a!=="number"&&a!=="longjmp")throw a;wi["setThrew"](1,0)}}function Qr(t,n,r,i){try{return e["dynCall_iiid"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function Gr(t,n){try{return e["dynCall_di"](t,n)}catch(r){if(typeof r!=="number"&&r!=="longjmp")throw r;wi["setThrew"](1,0)}}function Yr(t,n,r,i,s,o,u){try{return e["dynCall_iiiiiii"](t,n,r,i,s,o,u)}catch(a){if(typeof a!=="number"&&a!=="longjmp")throw a;wi["setThrew"](1,0)}}function Zr(t,n,r,i,s,o,u){try{return e["dynCall_diiidii"](t,n,r,i,s,o,u)}catch(a){if(typeof a!=="number"&&a!=="longjmp")throw a;wi["setThrew"](1,0)}}function ei(t,n,r,i,s,o){try{e["dynCall_viidii"](t,n,r,i,s,o)}catch(u){if(typeof u!=="number"&&u!=="longjmp")throw u;wi["setThrew"](1,0)}}function ti(t,n,r,i,s,o,u,a){try{e["dynCall_viiiiiii"](t,n,r,i,s,o,u,a)}catch(f){if(typeof f!=="number"&&f!=="longjmp")throw f;wi["setThrew"](1,0)}}function ni(t,n,r,i,s,o,u,a,f,l){try{e["dynCall_viiiiiiiii"](t,n,r,i,s,o,u,a,f,l)}catch(c){if(typeof c!=="number"&&c!=="longjmp")throw c;wi["setThrew"](1,0)}}function ri(t,n,r,i,s,o,u,a,f,l,c){try{e["dynCall_viiiiiiiiii"](t,n,r,i,s,o,u,a,f,l,c)}catch(h){if(typeof h!=="number"&&h!=="longjmp")throw h;wi["setThrew"](1,0)}}function ii(t,n,r){try{return e["dynCall_iii"](t,n,r)}catch(i){if(typeof i!=="number"&&i!=="longjmp")throw i;wi["setThrew"](1,0)}}function si(t,n,r,i){try{return e["dynCall_diii"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function oi(t,n,r,i,s,o,u,a,f,l,c){try{return e["dynCall_diiiiiiiiii"](t,n,r,i,s,o,u,a,f,l,c)}catch(h){if(typeof h!=="number"&&h!=="longjmp")throw h;wi["setThrew"](1,0)}}function ui(t,n,r,i,s,o){try{e["dynCall_viiiid"](t,n,r,i,s,o)}catch(u){if(typeof u!=="number"&&u!=="longjmp")throw u;wi["setThrew"](1,0)}}function ai(t,n,r,i,s,o,u,a,f,l){try{return e["dynCall_diiiiiiiii"](t,n,r,i,s,o,u,a,f,l)}catch(c){if(typeof c!=="number"&&c!=="longjmp")throw c;wi["setThrew"](1,0)}}function fi(t,n,r){try{return e["dynCall_did"](t,n,r)}catch(i){if(typeof i!=="number"&&i!=="longjmp")throw i;wi["setThrew"](1,0)}}function li(t,n,r,i,s,o,u,a,f,l,c,h,p){try{e["dynCall_viiiidddddidi"](t,n,r,i,s,o,u,a,f,l,c,h,p)}catch(d){if(typeof d!=="number"&&d!=="longjmp")throw d;wi["setThrew"](1,0)}}function ci(t,n,r,i,s,o){try{return e["dynCall_diidii"](t,n,r,i,s,o)}catch(u){if(typeof u!=="number"&&u!=="longjmp")throw u;wi["setThrew"](1,0)}}function hi(t,n,r,i,s){try{return e["dynCall_diiii"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function pi(t,n,r,i,s,o,u,a,f,l){try{return e["dynCall_iiiiiiiiii"](t,n,r,i,s,o,u,a,f,l)}catch(c){if(typeof c!=="number"&&c!=="longjmp")throw c;wi["setThrew"](1,0)}}function di(t,n,r,i,s){try{e["dynCall_viiid"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function vi(t,n,r,i){try{e["dynCall_viii"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function mi(t){try{e["dynCall_v"](t)}catch(n){if(typeof n!=="number"&&n!=="longjmp")throw n;wi["setThrew"](1,0)}}function gi(t,n,r,i){try{e["dynCall_viid"](t,n,r,i)}catch(s){if(typeof s!=="number"&&s!=="longjmp")throw s;wi["setThrew"](1,0)}}function yi(t,n,r,i,s){try{return e["dynCall_iidid"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function bi(t,n,r,i,s){try{e["dynCall_viiii"](t,n,r,i,s)}catch(o){if(typeof o!=="number"&&o!=="longjmp")throw o;wi["setThrew"](1,0)}}function wm(e){this.name="ExitStatus";this.message="Program terminated with exit("+e+")";this.status=e}function Tm(t){function n(){if(e["calledRun"])return;e["calledRun"]=true;if(p)return;zt();Wt();if(i&&Sm!==null){e.printErr("pre-main prep time: "+(Date.now()-Sm)+" ms")}if(e["_main"]&&km){e["callMain"](t)}Vt()}t=t||e["arguments"];if(Sm===null)Sm=Date.now();if(xn>0){e.printErr("run() called, but dependencies remain, so not running");return}Ut();if(xn>0)return;if(e["calledRun"])return;if(e["setStatus"]){e["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){e["setStatus"]("")},1);n()},1)}else{n()}}function Nm(t){if(e["noExitRuntime"]){return}p=true;d=t;Tt=Em;Xt();if(r){process["stdout"]["once"]("drain",function(){process["exit"](t)});console.log(" ");setTimeout(function(){process["exit"](t)},500)}else if(o&&typeof quit==="function"){quit(t)}throw new wm(t)}function Cm(t){if(t){e.print(t);e.printErr(t)}p=true;d=1;var n="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";throw"abort() at "+at()+n}function Lm(){}function Am(e){return(e||Lm).__cache__}function Om(e,t){var n=Am(t);var r=n[e];if(r)return r;r=Object.create((t||Lm).prototype);r.ptr=e;return n[e]=r}function Mm(e,t){return Om(e.ptr,t)}function _m(e){if(!e["__destroy__"])throw"Error: Cannot destroy object. (Did you create it yourself?)";e["__destroy__"]();delete Am(e.__class__)[e.ptr]}function Dm(e,t){return e.ptr===t.ptr}function Pm(e){return e.ptr}function Hm(e){return e.__class__}function Bm(e){if(typeof e=="string")return Z(Yt(e),"i8",K);return e}function jm(){throw"cannot construct a btMatrix3x3, no constructor in IDL"}function Fm(){this.ptr=mc();Am(Fm)[this.ptr]=this}function Im(e,t,n){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(n===undefined){this.ptr=rp(e,t);Am(Im)[this.ptr]=this;return}this.ptr=ip(e,t,n);Am(Im)[this.ptr]=this}function qm(){this.ptr=qa();Am(qm)[this.ptr]=this}function Rm(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Um(){this.ptr=sl();Am(Um)[this.ptr]=this}function zm(){throw"cannot construct a btDispatcherInfo, no constructor in IDL"}function Wm(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=eh(e,t);Am(Wm)[this.ptr]=this}function Xm(){throw"cannot construct a btCollisionConfiguration, no constructor in IDL"}function Vm(e,t,n,r,i){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(n===undefined){this.ptr=hu(e,t);Am(Vm)[this.ptr]=this;return}if(r===undefined){this.ptr=pu(e,t,n);Am(Vm)[this.ptr]=this;return}if(i===undefined){this.ptr=mu(e,t,n,r);Am(Vm)[this.ptr]=this;return}this.ptr=gu(e,t,n,r,i);Am(Vm)[this.ptr]=this}function $m(){this.ptr=Es();Am($m)[this.ptr]=this}function Jm(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(r===undefined){this.ptr=Ml(e,t,n);Am(Jm)[this.ptr]=this;return}this.ptr=Dl(e,t,n,r);Am(Jm)[this.ptr]=this}function Km(){throw"cannot construct a btManifoldPoint, no constructor in IDL"}function Qm(e,t,n,r,i){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(r===undefined){this.ptr=Os(e,t,n);Am(Qm)[this.ptr]=this;return}if(i===undefined){this.ptr=_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_4(e,t,n,r);Am(Qm)[this.ptr]=this;return}this.ptr=As(e,t,n,r,i);Am(Qm)[this.ptr]=this}function Gm(){throw"cannot construct a btStridingMeshInterface, no constructor in IDL"}function Ym(){throw"cannot construct a btBroadphaseInterface, no constructor in IDL"}function Zm(){throw"cannot construct a btCollisionObject, no constructor in IDL"}function eg(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);this.ptr=Ci(e,t,n,r);Am(eg)[this.ptr]=this}function tg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(t===undefined){this.ptr=Fs(e);Am(tg)[this.ptr]=this;return}this.ptr=js(e,t);Am(tg)[this.ptr]=this}function ng(){throw"cannot construct a ConvexResultCallback, no constructor in IDL"}function rg(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(n===undefined){this.ptr=Xh(e,t);Am(rg)[this.ptr]=this;return}if(r===undefined){this.ptr=_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_3(e,t,n);Am(rg)[this.ptr]=this;return}this.ptr=Wh(e,t,n,r);Am(rg)[this.ptr]=this}function ig(){throw"cannot construct a btMotionState, no constructor in IDL"}function sg(e,t,n,r,i){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(r===undefined){this.ptr=ev(e,t,n);Am(sg)[this.ptr]=this;return}if(i===undefined){this.ptr=_emscripten_bind_btSliderConstraint_btSliderConstraint_4(e,t,n,r);Am(sg)[this.ptr]=this;return}this.ptr=Zd(e,t,n,r,i);Am(sg)[this.ptr]=this}function og(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(n===undefined){this.ptr=Ou(e,t);Am(og)[this.ptr]=this;return}if(r===undefined){this.ptr=_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_3(e,t,n);Am(og)[this.ptr]=this;return}this.ptr=_u(e,t,n,r);Am(og)[this.ptr]=this}function ug(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=ru(e,t);Am(ug)[this.ptr]=this}function ag(){throw"cannot construct a btConvexShape, no constructor in IDL"}function fg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){this.ptr=mh();Am(fg)[this.ptr]=this;return}this.ptr=gh(e);Am(fg)[this.ptr]=this}function lg(){throw"cannot construct a ContactResultCallback, no constructor in IDL"}function cg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=oc(e,t);Am(cg)[this.ptr]=this}function hg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=Nu(e,t);Am(hg)[this.ptr]=this}function pg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(e===undefined){this.ptr=md();Am(pg)[this.ptr]=this;return}if(t===undefined){this.ptr=Ma(e);Am(pg)[this.ptr]=this;return}this.ptr=yd(e,t);Am(pg)[this.ptr]=this}function dg(){this.ptr=Iu();Am(dg)[this.ptr]=this}function vg(){this.ptr=uh();Am(vg)[this.ptr]=this}function mg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=Ts(e);Am(mg)[this.ptr]=this}function gg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=ss(e);Am(gg)[this.ptr]=this}function yg(){this.ptr=Od();Am(yg)[this.ptr]=this}function bg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){this.ptr=df();Am(bg)[this.ptr]=this;return}this.ptr=vf(e);Am(bg)[this.ptr]=this}function wg(){throw"cannot construct a btCollisionObjectWrapper, no constructor in IDL"}function Eg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=bc(e,t);Am(Eg)[this.ptr]=this}function Sg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(e===undefined){this.ptr=Ju();Am(Sg)[this.ptr]=this;return}if(t===undefined){this.ptr=Ku(e);Am(Sg)[this.ptr]=this;return}this.ptr=$u(e,t);Am(Sg)[this.ptr]=this}function xg(){throw"cannot construct a btTriangleMeshShape, no constructor in IDL"}function Tg(){throw"cannot construct a btDispatcher, no constructor in IDL"}function Ng(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=fh(e,t);Am(Ng)[this.ptr]=this}function Cg(){throw"cannot construct a btDynamicsWorld, no constructor in IDL"}function kg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=Qs(e,t);Am(kg)[this.ptr]=this}function Lg(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);this.ptr=as(e,t,n,r);Am(Lg)[this.ptr]=this}function Ag(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=Yd(e,t);Am(Ag)[this.ptr]=this}function Og(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=rl(e);Am(Og)[this.ptr]=this}function Mg(){throw"cannot construct a RayResultCallback, no constructor in IDL"}function _g(){throw"cannot construct a btWheelInfo, no constructor in IDL"}function Dg(){throw"cannot construct a btConcaveShape, no constructor in IDL"}function Pg(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(e===undefined){this.ptr=yv();Am(Pg)[this.ptr]=this;return}if(t===undefined){this.ptr=_emscripten_bind_btVector4_btVector4_1(e);Am(Pg)[this.ptr]=this;return}if(n===undefined){this.ptr=_emscripten_bind_btVector4_btVector4_2(e,t);Am(Pg)[this.ptr]=this;return}if(r===undefined){this.ptr=_emscripten_bind_btVector4_btVector4_3(e,t,n);Am(Pg)[this.ptr]=this;return}this.ptr=wv(e,t,n,r);Am(Pg)[this.ptr]=this}function Hg(e,t,n,r){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(r===undefined){this.ptr=yh(e,t,n);Am(Hg)[this.ptr]=this;return}this.ptr=la(e,t,n,r);Am(Hg)[this.ptr]=this}function Bg(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);this.ptr=gf(e,t);Am(Bg)[this.ptr]=this}function jg(){throw"cannot construct a btActionInterface, no constructor in IDL"}function Fg(){throw"cannot construct a btOverlappingPairCache, no constructor in IDL"}function Ig(e,t,n){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(e===undefined){this.ptr=zc();Am(Ig)[this.ptr]=this;return}if(t===undefined){this.ptr=_emscripten_bind_btVector3_btVector3_1(e);Am(Ig)[this.ptr]=this;return}if(n===undefined){this.ptr=_emscripten_bind_btVector3_btVector3_2(e,t);Am(Ig)[this.ptr]=this;return}this.ptr=Uc(e,t,n);Am(Ig)[this.ptr]=this}function qg(){throw"cannot construct a btVehicleRaycaster, no constructor in IDL"}function Rg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=Kf(e);Am(Rg)[this.ptr]=this}function Ug(){this.ptr=dc();Am(Ug)[this.ptr]=this}function zg(e,t,n,r,i,s,o){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(s&&typeof s==="object")s=s.ptr;else s=Bm(s);if(o&&typeof o==="object")o=o.ptr;else o=Bm(o);if(n===undefined){this.ptr=qf(e,t);Am(zg)[this.ptr]=this;return}if(r===undefined){this.ptr=Rf(e,t,n);Am(zg)[this.ptr]=this;return}if(i===undefined){this.ptr=Ff(e,t,n,r);Am(zg)[this.ptr]=this;return}if(s===undefined){this.ptr=If(e,t,n,r,i);Am(zg)[this.ptr]=this;return}if(o===undefined){this.ptr=Bf(e,t,n,r,i,s);Am(zg)[this.ptr]=this;return}this.ptr=jf(e,t,n,r,i,s,o);Am(zg)[this.ptr]=this}function Wg(){throw"cannot construct a btCollisionShape, no constructor in IDL"}function Xg(){this.ptr=xv();Am(Xg)[this.ptr]=this}function Vg(){this.ptr=nu();Am(Vg)[this.ptr]=this}function $g(){throw"cannot construct a LocalShapeInfo, no constructor in IDL"}function Jg(){throw"cannot construct a btConstraintSolver, no constructor in IDL"}function Kg(e,t,n){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);this.ptr=Yu(e,t,n);Am(Kg)[this.ptr]=this}function Qg(e,t,n,r,i){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);this.ptr=Oo(e,t,n,r,i);Am(Qg)[this.ptr]=this}function Gg(){throw"cannot construct a btOverlappingPairCallback, no constructor in IDL"}function Yg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=Ip(e);Am(Yg)[this.ptr]=this}function Zg(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=Xf(e);Am(Zg)[this.ptr]=this}function ey(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=hf(e);Am(ey)[this.ptr]=this}function ty(e,t){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(e===undefined){this.ptr=uo();Am(ty)[this.ptr]=this;return}if(t===undefined){this.ptr=_emscripten_bind_btTransform_btTransform_1(e);Am(ty)[this.ptr]=this;return}this.ptr=oo(e,t);Am(ty)[this.ptr]=this}function ny(){throw"cannot construct a btCollisionWorld, no constructor in IDL"}function ry(){throw"cannot construct a btQuadWord, no constructor in IDL"}function iy(e){if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);this.ptr=El(e);Am(iy)[this.ptr]=this}function sy(){this.ptr=Nv();Am(sy)[this.ptr]=this}function oy(){throw"cannot construct a btTypedConstraint, no constructor in IDL"}var e=this;var e;if(!e)e=(typeof e!=="undefined"?e:null)||{};var t={};for(var n in e){if(e.hasOwnProperty(n)){t[n]=e[n]}}var r=typeof process==="object"&&typeof require==="function";var i=typeof window==="object";var s=typeof importScripts==="function";var o=!i&&!r&&!s;if(r){if(!e["print"])e["print"]=function(t){process["stdout"].write(t+"\n")};if(!e["printErr"])e["printErr"]=function(t){process["stderr"].write(t+"\n")};var u=require("fs");var a=require("path");e["read"]=function(t,n){t=a["normalize"](t);var r=u["readFileSync"](t);if(!r&&t!=a["resolve"](t)){t=path.join(__dirname,"..","src",t);r=u["readFileSync"](t)}if(r&&!n)r=r.toString();return r};e["readBinary"]=function(n){return e["read"](n,true)};e["load"]=function(t){l(read(t))};e["thisProgram"]=process["argv"][1].replace(/\\/g,"/");e["arguments"]=process["argv"].slice(2);if(typeof module!=="undefined"){module["exports"]=e}process["on"]("uncaughtException",function(e){if(!(e instanceof wm)){throw e}})}else if(o){if(!e["print"])e["print"]=print;if(typeof printErr!="undefined")e["printErr"]=printErr;if(typeof read!="undefined"){e["read"]=read}else{e["read"]=function(){throw"no read() available (jsc?)"}}e["readBinary"]=function(t){if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(t))}var n=read(t,"binary");R(typeof n==="object");return n};if(typeof scriptArgs!="undefined"){e["arguments"]=scriptArgs}else if(typeof arguments!="undefined"){e["arguments"]=arguments}this["Module"]=e}else if(i||s){e["read"]=function(t){var n=new XMLHttpRequest;n.open("GET",t,false);n.send(null);return n.responseText};if(typeof arguments!="undefined"){e["arguments"]=arguments}if(typeof console!=="undefined"){if(!e["print"])e["print"]=function(t){console.log(t)};if(!e["printErr"])e["printErr"]=function(t){console.log(t)}}else{var f=false;if(!e["print"])e["print"]=f&&typeof dump!=="undefined"?function(e){dump(e)}:function(e){}}if(i){window["Module"]=e}else{e["load"]=importScripts}}else{throw"Unknown runtime environment. Where are we?"}if(!e["load"]&&e["read"]){e["load"]=function(n){l(e["read"](n))}}if(!e["print"]){e["print"]=function(){}}if(!e["printErr"]){e["printErr"]=e["print"]}if(!e["arguments"]){e["arguments"]=[]}if(!e["thisProgram"]){e["thisProgram"]="./this.program"}e.print=e["print"];e.printErr=e["printErr"];e["preRun"]=[];e["postRun"]=[];for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}var c={setTempRet0:function(e){M=e},getTempRet0:function(){return M},stackSave:function(){return Tt},stackRestore:function(e){Tt=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(e[e.length-1]==="*"){return c.QUANTUM_SIZE}else if(e[0]==="i"){var t=parseInt(e.substr(1));R(t%8===0);return t/8}else{return 0}}}},getNativeFieldSize:function(e){return Math.max(c.getNativeTypeSize(e),c.QUANTUM_SIZE)},STACK_ALIGN:16,getAlignSize:function(e,t,n){if(!n&&(e=="i64"||e=="double"))return 8;if(!e)return Math.min(t,8);return Math.min(t||(e?c.getNativeFieldSize(e):0),c.QUANTUM_SIZE)},dynCall:function(t,n,r){if(r&&r.length){if(!r.splice)r=Array.prototype.slice.call(r);r.splice(0,0,n);return e["dynCall_"+t].apply(null,r)}else{return e["dynCall_"+t].call(null,n)}},functionPointers:[],addFunction:function(e){for(var t=0;t<c.functionPointers.length;t++){if(!c.functionPointers[t]){c.functionPointers[t]=e;return 2*(1+t)}}throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){c.functionPointers[(e-2)/2]=null},getAsmConst:function(e,t){if(!c.asmConstCache)c.asmConstCache={};var n=c.asmConstCache[e];if(n)return n;var r=[];for(var i=0;i<t;i++){r.push(String.fromCharCode(36)+i)}var s=et(e);if(s[0]==='"'){if(s.indexOf('"',1)===s.length-1){s=s.substr(1,s.length-2)}else{Cm("invalid EM_ASM input |"+s+"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)")}}Cm("NO_DYNAMIC_EXECUTION was set, cannot eval, so EM_ASM is not functional");return c.asmConstCache[e]=evalled},warnOnce:function(t){if(!c.warnOnce.shown)c.warnOnce.shown={};if(!c.warnOnce.shown[t]){c.warnOnce.shown[t]=1;e.printErr(t)}},funcWrappers:{},getFuncWrapper:function(e,t){R(t);if(!c.funcWrappers[t]){c.funcWrappers[t]={}}var n=c.funcWrappers[t];if(!n[e]){n[e]=function(){return c.dynCall(t,e,arguments)}}return n[e]},UTF8Processor:function(){var e=[];var t=0;this.processCChar=function(n){n=n&255;if(e.length==0){if((n&128)==0){return String.fromCharCode(n)}e.push(n);if((n&224)==192){t=1}else if((n&240)==224){t=2}else{t=3}return""}if(t){e.push(n);t--;if(t>0)return""}var r=e[0];var i=e[1];var s=e[2];var o=e[3];var u;if(e.length==2){u=String.fromCharCode((r&31)<<6|i&63)}else if(e.length==3){u=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63)}else{var a=(r&7)<<18|(i&63)<<12|(s&63)<<6|o&63;u=String.fromCharCode(((a-65536)/1024|0)+55296,(a-65536)%1024+56320)}e.length=0;return u};this.processJSString=function(t){t=unescape(encodeURIComponent(t));var n=[];for(var r=0;r<t.length;r++){n.push(t.charCodeAt(r))}return n}},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=Tt;Tt=Tt+e|0;Tt=Tt+15&-16;return t},staticAlloc:function(e){var t=Et;Et=Et+e|0;Et=Et+15&-16;return t},dynamicAlloc:function(e){var t=kt;kt=kt+e|0;kt=kt+15&-16;if(kt>=Ot)Lt();return t},alignMemory:function(e,t){var n=e=Math.ceil(e/(t?t:16))*(t?t:16);return n},makeBigInt:function(e,t,n){var r=n?+(e>>>0)+ +(t>>>0)*+4294967296:+(e>>>0)+ +(t|0)*+4294967296;return r},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};e["Runtime"]=c;var h=0;var p=false;var d=0;var v=0;var m,g,y,b,w,E,S,x,T,N,C,k,L;var A,O;var M,_,D,P,H,B,j,F,I,q;var U=this;var W,X;(function(){function i(e){var t=e.toString().match(r).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var e=0;var t={stackSave:function(){e=c.stackSave()},stackRestore:function(){c.stackRestore(e)},arrayToC:function(e){var t=c.stackAlloc(e.length);tn(e,t);return t},stringToC:function(e){var t=0;if(e!==null&&e!==undefined&&e!==0){t=c.stackAlloc((e.length<<2)+1);en(e,t)}return t}};var n={string:t["stringToC"],array:t["arrayToC"]};X=function(i,s,o,u){var a=z(i);var f=[];if(u){for(var l=0;l<u.length;l++){var h=n[o[l]];if(h){if(e===0)e=c.stackSave();f[l]=h(u[l])}else{f[l]=u[l]}}}var p=a.apply(null,f);if(s==="string")p=et(p);if(e!==0)t["stackRestore"]();return p};var r=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;var s={};for(var o in t){if(t.hasOwnProperty(o)){s[o]=i(t[o])}}W=function(t,n,r){r=r||[];var o=z(t);var u=r.every(function(e){return e==="number"});var a=n!=="string";if(a&&u){return o}var f=r.map(function(e,t){return"$"+t});var l="(function("+f.join(",")+") {";var c=r.length;if(!u){l+=s["stackSave"].body+";";for(var h=0;h<c;h++){var p=f[h],d=r[h];if(d==="number")continue;var v=s[d+"ToC"];l+="var "+v.arguments+" = "+p+";";l+=v.body+";";l+=p+"="+v.returnValue+";"}}var m=i(function(){return o}).returnValue;l+="var ret = "+m+"("+f.join(",")+");";if(!a){var g=i(function(){return et}).returnValue;l+="ret = "+g+"(ret);"}if(!u){l+=s["stackRestore"].body+";"}l+="return ret})";Cm("NO_DYNAMIC_EXECUTION was set, cannot eval - ccall is not functional")}})();e["cwrap"]=W;e["ccall"]=X;e["setValue"]=V;e["getValue"]=$;var J=0;var K=1;var Q=2;var G=3;var Y=4;e["ALLOC_NORMAL"]=J;e["ALLOC_STACK"]=K;e["ALLOC_STATIC"]=Q;e["ALLOC_DYNAMIC"]=G;e["ALLOC_NONE"]=Y;e["allocate"]=Z;e["Pointer_stringify"]=et;e["UTF16ToString"]=tt;e["stringToUTF16"]=nt;e["UTF32ToString"]=rt;e["stringToUTF32"]=it;e["stackTrace"]=at;var ft=4096;var ct;var ht,pt,dt,vt,mt,gt,yt,bt;var wt=0,Et=0,St=false;var xt=0,Tt=0,Nt=0;var Ct=0,kt=0;var At=e["TOTAL_STACK"]||5242880;var Ot=e["TOTAL_MEMORY"]||67108864;var Mt=e["FAST_MEMORY"]||2097152;var _t=64*1024;while(_t<Ot||_t<2*At){if(_t<16*1024*1024){_t*=2}else{_t+=16*1024*1024}}if(_t!==Ot){e.printErr("increasing TOTAL_MEMORY to "+_t+" to be compliant with the asm.js spec");Ot=_t}R(typeof Int32Array!=="undefined"&&typeof Float64Array!=="undefined"&&!!(new Int32Array(1))["subarray"]&&!!(new Int32Array(1))["set"],"JS engine does not provide full typed array support");var Dt=new ArrayBuffer(Ot);ht=new Int8Array(Dt);dt=new Int16Array(Dt);mt=new Int32Array(Dt);pt=new Uint8Array(Dt);vt=new Uint16Array(Dt);gt=new Uint32Array(Dt);yt=new Float32Array(Dt);bt=new Float64Array(Dt);mt[0]=255;R(pt[0]===255&&pt[3]===0,"Typed arrays 2 must be run on a little-endian system");e["HEAP"]=ct;e["HEAP8"]=ht;e["HEAP16"]=dt;e["HEAP32"]=mt;e["HEAPU8"]=pt;e["HEAPU16"]=vt;e["HEAPU32"]=gt;e["HEAPF32"]=yt;e["HEAPF64"]=bt;var Ht=[];var Bt=[];var jt=[];var Ft=[];var It=[];var qt=false;var Rt=false;e["addOnPreRun"]=e.addOnPreRun=$t;e["addOnInit"]=e.addOnInit=Jt;e["addOnPreMain"]=e.addOnPreMain=Kt;e["addOnExit"]=e.addOnExit=Qt;e["addOnPostRun"]=e.addOnPostRun=Gt;e["intArrayFromString"]=Yt;e["intArrayToString"]=Zt;e["writeStringToMemory"]=en;e["writeArrayToMemory"]=tn;e["writeAsciiToMemory"]=nn;if(!Math["imul"]||Math["imul"](4294967295,5)!==-5)Math["imul"]=function(t,n){var r=t>>>16;var i=t&65535;var s=n>>>16;var o=n&65535;return i*o+(r*o+i*s<<16)|0};Math.imul=Math["imul"];var on=Math.abs;var un=Math.cos;var an=Math.sin;var fn=Math.tan;var ln=Math.acos;var cn=Math.asin;var hn=Math.atan;var pn=Math.atan2;var dn=Math.exp;var vn=Math.log;var mn=Math.sqrt;var gn=Math.ceil;var yn=Math.floor;var bn=Math.pow;var wn=Math.imul;var En=Math.fround;var Sn=Math.min;var xn=0;var Tn=null;var Nn=null;e["addRunDependency"]=Cn;e["removeRunDependency"]=kn;e["preloadedImages"]={};e["preloadedAudios"]={};var Ln=null;wt=8;Et=wt+c.alignMemory(21635);Bt.push({func:function(){Av()}});Z([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,49,55,98,116,84,121,112,101,100,67,111,110,115,116,114,97,105,110,116,0,0,0,0,0,49,51,98,116,84,121,112,101,100,79,98,106,101,99,116,0,184,81,0,0,136,0,0,0,64,82,0,0,112,0,0,0,0,0,0,0,1,0,0,0,152,0,0,0,2,4,0,0,0,0,0,0,24,1,0,0,4,0,0,0,5,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,49,57,98,116,71,104,111,115,116,80,97,105,114,67,97,108,108,98,97,99,107,0,0,0,50,53,98,116,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,67,97,108,108,98,97,99,107,0,0,0,0,0,184,81,0,0,240,0,0,0,224,81,0,0,216,0,0,0,16,1,0,0,0,0,0,0,49,56,98,116,86,101,104,105,99,108,101,82,97,121,99,97,115,116,101,114,0,0,0,0,184,81,0,0,40,1,0,0,0,0,0,0,192,1,0,0,6,0,0,0,7,0,0,0,1,0,0,0,1,0,0,0,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,52,67,108,111,115,101,115,116,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,0,0,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,49,55,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,0,184,81,0,0,144,1,0,0,224,81,0,0,96,1,0,0,184,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,152,2,0,0,8,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,50,48,98,116,68,101,102,97,117,108,116,77,111,116,105,111,110,83,116,97,116,101,0,0,49,51,98,116,77,111,116,105,111,110,83,116,97,116,101,0,184,81,0,0,128,2,0,0,224,81,0,0,104,2,0,0,144,2,0,0,0,0,0,0,0,0,0,0,48,3,0,0,10,0,0,0,11,0,0,0,2,0,0,0,2,0,0,0,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,55,67,108,111,115,101,115,116,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,0,0,0,0,0,0,0,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,48,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,0,0,0,0,0,0,184,81,0,0,248,2,0,0,224,81,0,0,192,2,0,0,40,3,0,0,0,0,0,0,0,0,0,0,176,3,0,0,12,0,0,0,13,0,0,0,3,0,0,0,1,0,0,0,50,57,67,111,110,99,114,101,116,101,67,111,110,116,97,99,116,82,101,115,117,108,116,67,97,108,108,98,97,99,107,0,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,49,67,111,110,116,97,99,116,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,0,0,0,0,0,184,81,0,0,120,3,0,0,224,81,0,0,88,3,0,0,168,3,0,0,0,0,0,0,123,32,118,97,114,32,115,101,108,102,32,61,32,77,111,100,117,108,101,91,39,103,101,116,67,97,99,104,101,39,93,40,77,111,100,117,108,101,91,39,67,111,110,99,114,101,116,101,67,111,110,116,97,99,116,82,101,115,117,108,116,67,97,108,108,98,97,99,107,39,93,41,91,36,48,93,59,32,105,102,32,40,33,115,101,108,102,46,104,97,115,79,119,110,80,114,111,112,101,114,116,121,40,39,97,100,100,83,105,110,103,108,101,82,101,115,117,108,116,39,41,41,32,116,104,114,111,119,32,39,97,32,74,83,73,109,112,108,101,109,101,110,116,97,116,105,111,110,32,109,117,115,116,32,105,109,112,108,101,109,101,110,116,32,97,108,108,32,102,117,110,99,116,105,111,110,115,44,32,121,111,117,32,102,111,114,103,111,116,32,67,111,110,99,114,101,116,101,67,111,110,116,97,99,116,82,101,115,117,108,116,67,97,108,108,98,97,99,107,58,58,97,100,100,83,105,110,103,108,101,82,101,115,117,108,116,46,39,59,32,114,101,116,117,114,110,32,115,101,108,102,46,97,100,100,83,105,110,103,108,101,82,101,115,117,108,116,40,36,49,44,36,50,44,36,51,44,36,52,44,36,53,44,36,54,44,36,55,41,59,32,125,0,0,0,0,0,0,0,0,56,5,0,0,14,0,0,0,15,0,0,0,16,0,0,0,1,0,0,0,3,0,0,0,4,0,0,0,2,0,0,0,1,0,0,0,3,0,0,0,2,0,0,0,3,0,0,0,2,0,0,0,50,49,98,116,67,111,110,101,84,119,105,115,116,67,111,110,115,116,114,97,105,110,116,0,224,81,0,0,32,5,0,0,160,0,0,0,0,0,0,0,98,116,67,111,110,101,84,119,105,115,116,67,111,110,115,116,114,97,105,110,116,68,97,116,97,0,0,0,0,0,0,0,0,0,0,0,48,8,0,0,17,0,0,0,18,0,0,0,19,0,0,0,20,0,0,0,5,0,0,0,3,0,0,0,21,0,0,0,1,0,0,0,2,0,0,0,3,0,0,0,6,0,0,0,22,0,0,0,7,0,0,0,1,0,0,0,3,0,0,0,8,0,0,0,9,0,0,0,10,0,0,0,11,0,0,0,12,0,0,0,23,0,0,0,13,0,0,0,4,0,0,0,14,0,0,0,15,0,0,0,4,0,0,0,5,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,24,0,0,0,16,0,0,0,17,0,0,0,18,0,0,0,19,0,0,0,1,0,0,0,2,0,0,0,25,0,0,0,20,0,0,0,3,0,0,0,4,0,0,0,5,0,0,0,26,0,0,0,21,0,0,0,6,0,0,0,0,0,0,0,100,101,98,117,103,68,114,97,119,87,111,114,108,100,0,0,115,121,110,99,104,114,111,110,105,122,101,77,111,116,105,111,110,83,116,97,116,101,115,0,115,116,101,112,83,105,109,117,108,97,116,105,111,110,0,0,105,110,116,101,114,110,97,108,83,105,110,103,108,101,83,116,101,112,83,105,109,117,108,97,116,105,111,110,0,0,0,0,117,112,100,97,116,101,65,99,116,105,111,110,115,0,0,0,117,112,100,97,116,101,65,99,116,105,118,97,116,105,111,110,83,116,97,116,101,0,0,0,115,111,108,118,101,67,111,110,115,116,114,97,105,110,116,115,0,0,0,0,0,0,0,0,99,97,108,99,117,108,97,116,101,83,105,109,117,108,97,116,105,111,110,73,115,108,97,110,100,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,114,101,97,116,101,80,114,101,100,105,99,116,105,118,101,67,111,110,116,97,99,116,115,0,0,0,0,0,0,0,0,114,101,108,101,97,115,101,32,112,114,101,100,105,99,116,105,118,101,32,99,111,110,116,97,99,116,32,109,97,110,105,102,111,108,100,115,0,0,0,0,112,114,101,100,105,99,116,105,118,101,32,99,111,110,118,101,120,83,119,101,101,112,84,101,115,116,0,0,0,0,0,0,105,110,116,101,103,114,97,116,101,84,114,97,110,115,102,111,114,109,115,0,0,0,0,0,67,67,68,32,109,111,116,105,111,110,32,99,108,97,109,112,105,110,103,0,0,0,0,0,97,112,112,108,121,32,115,112,101,99,117,108,97,116,105,118,101,32,99,111,110,116,97,99,116,32,114,101,115,116,105,116,117,116,105,111,110,0,0,0,112,114,101,100,105,99,116,85,110,99,111,110,115,116,114,97,105,110,116,77,111,116,105,111,110,0,0,0,0,0,0,0,98,116,68,121,110,97,109,105,99,115,87,111,114,108,100,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,0,0,50,51,98,116,68,105,115,99,114,101,116,101,68,121,110,97,109,105,99,115,87,111,114,108,100,0,0,0,0,0,0,0,49,53,98,116,68,121,110,97,109,105,99,115,87,111,114,108,100,0,0,0,0,0,0,0,224,81,0,0,8,8,0,0,184,29,0,0,0,0,0,0,224,81,0,0,232,7,0,0,32,8,0,0,0,0,0,0,98,116,67,111,110,118,101,120,73,110,116,101,114,110,97,108,83,104,97,112,101,68,97,116,97,0,0,0,0,0,0,0,83,80,72,69,82,69,0,0,0,0,0,0,168,8,0,0,27,0,0,0,28,0,0,0,6,0,0,0,4,0,0,0,51,52,98,116,67,108,111,115,101,115,116,78,111,116,77,101,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,0,0,0,0,224,81,0,0,128,8,0,0,48,3,0,0,0,0,0,0,0,0,0,0,40,9,0,0,29,0,0,0,30,0,0,0,1,0,0,0,0,0,0,0,50,55,73,110,112,108,97,99,101,83,111,108,118,101,114,73,115,108,97,110,100,67,97,108,108,98,97,99,107,0,0,0,78,50,53,98,116,83,105,109,117,108,97,116,105,111,110,73,115,108,97,110,100,77,97,110,97,103,101,114,49,52,73,115,108,97,110,100,67,97,108,108,98,97,99,107,69,0,0,0,184,81,0,0,240,8,0,0,224,81,0,0,208,8,0,0,32,9,0,0,0,0,0,0,0,0,0,0,144,9,0,0,31,0,0,0,32,0,0,0,33,0,0,0,1,0,0,0,22,0,0,0,23,0,0,0,1,0,0,0,2,0,0,0,5,0,0,0,7,0,0,0,4,0,0,0,34,0,0,0,50,51,98,116,71,101,110,101,114,105,99,54,68,111,102,67,111,110,115,116,114,97,105,110,116,0,0,0,0,0,0,0,224,81,0,0,112,9,0,0,160,0,0,0,0,0,0,0,98,116,71,101,110,101,114,105,99,54,68,111,102,67,111,110,115,116,114,97,105,110,116,68,97,116,97,0,0,0,0,0,0,0,0,0,16,10,0,0,35,0,0,0,36,0,0,0,37,0,0,0,1,0,0,0,24,0,0,0,25,0,0,0,1,0,0,0,3,0,0,0,6,0,0,0,8,0,0,0,5,0,0,0,0,0,0,0,49,55,98,116,72,105,110,103,101,67,111,110,115,116,114,97,105,110,116,0,0,0,0,0,224,81,0,0,248,9,0,0,160,0,0,0,0,0,0,0,98,116,72,105,110,103,101,67,111,110,115,116,114,97,105,110,116,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,0,0,0,0,56,11,0,0,38,0,0,0,39,0,0,0,1,0,0,0,26,0,0,0,27,0,0,0,2,0,0,0,28,0,0,0,29,0,0,0,30,0,0,0,3,0,0,0,9,0,0,0,40,0,0,0,10,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,51,48,98,116,75,105,110,101,109,97,116,105,99,67,104,97,114,97,99,116,101,114,67,111,110,116,114,111,108,108,101,114,0,0,0,0,0,0,0,0,51,48,98,116,67,104,97,114,97,99,116,101,114,67,111,110,116,114,111,108,108,101,114,73,110,116,101,114,102,97,99,101,0,0,0,0,0,0,0,0,49,55,98,116,65,99,116,105,111,110,73,110,116,101,114,102,97,99,101,0,0,0,0,0,184,81,0,0,8,11,0,0,224,81,0,0,224,10,0,0,32,11,0,0,0,0,0,0,224,81,0,0,184,10,0,0,40,11,0,0,0,0,0,0,0,0,0,0,144,11,0,0,41,0,0,0,42,0,0,0,2,0,0,0,7,0,0,0,52,51,98,116,75,105,110,101,109,97,116,105,99,67,108,111,115,101,115,116,78,111,116,77,101,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,0,0,0,224,81,0,0,96,11,0,0,48,3,0,0,0,0,0,0,0,0,0,0,248,11,0,0,43,0,0,0,44,0,0,0,45,0,0,0,1,0,0,0,32,0,0,0,33,0,0,0,1,0,0,0,4,0,0,0,8,0,0,0,11,0,0,0,6,0,0,0,0,0,0,0,50,51,98,116,80,111,105,110,116,50,80,111,105,110,116,67,111,110,115,116,114,97,105,110,116,0,0,0,0,0,0,0,224,81,0,0,216,11,0,0,160,0,0,0,0,0,0,0,98,116,80,111,105,110,116,50,80,111,105,110,116,67,111,110,115,116,114,97,105,110,116,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,14,0,0,46,0,0,0,47,0,0,0,4,0,0,0,34,0,0,0,7,0,0,0,8,0,0,0,5,0,0,0,0,0,0,0,49,54,98,116,82,97,121,99,97,115,116,86,101,104,105,99,108,101,0,0,0,0,0,0,224,81,0,0,200,14,0,0,32,11,0,0,0,0,0,0,0,0,0,0,40,15,0,0,48,0,0,0,49,0,0,0,2,0,0,0,0,0,0,0,50,53,98,116,68,101,102,97,117,108,116,86,101,104,105,99,108,101,82,97,121,99,97,115,116,101,114,0,0,0,0,0,224,81,0,0,8,15,0,0,64,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,152,15,0,0,7,0,0,0,50,0,0,0,51,0,0,0,35,0,0,0,12,0,0,0,7,0,0,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,98,116,82,105,103,105,100,66,111,100,121,70,108,111,97,116,68,97,116,97,0,0,0,0,49,49,98,116,82,105,103,105,100,66,111,100,121,0,0,0,224,81,0,0,136,15,0,0,160,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,144,16,0,0,52,0,0,0,53,0,0,0,4,0,0,0,1,0,0,0,5,0,0,0,54,0,0,0,13,0,0,0,6,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,115,111,108,118,101,71,114,111,117,112,67,97,99,104,101,70,114,105,101,110,100,108,121,83,101,116,117,112,0,0,0,0,115,111,108,118,101,71,114,111,117,112,67,97,99,104,101,70,114,105,101,110,100,108,121,73,116,101,114,97,116,105,111,110,115,0,0,0,0,0,0,0,115,111,108,118,101,71,114,111,117,112,0,0,0,0,0,0,51,53,98,116,83,101,113,117,101,110,116,105,97,108,73,109,112,117,108,115,101,67,111,110,115,116,114,97,105,110,116,83,111,108,118,101,114,0,0,0,49,56,98,116,67,111,110,115,116,114,97,105,110,116,83,111,108,118,101,114,0,0,0,0,184,81,0,0,112,16,0,0,224,81,0,0,72,16,0,0,136,16,0,0,0,0,0,0,0,0,0,0,240,16,0,0,55,0,0,0,56,0,0,0,3,0,0,0,1,0,0,0,37,0,0,0,38,0,0,0,1,0,0,0,5,0,0,0,9,0,0,0,14,0,0,0,8,0,0,0,0,0,0,0,49,56,98,116,83,108,105,100,101,114,67,111,110,115,116,114,97,105,110,116,0,0,0,0,224,81,0,0,216,16,0,0,160,0,0,0,0,0,0,0,98,116,83,108,105,100,101,114,67,111,110,115,116,114,97,105,110,116,68,97,116,97,0,0,98,116,84,121,112,101,100,67,111,110,115,116,114,97,105,110,116,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,72,20,0,0,57,0,0,0,58,0,0,0,1,0,0,0,6,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,8,0,0,0,39,0,0,0,15,0,0,0,16,0,0,0,7,0,0,0,40,0,0,0,59,0,0,0,49,50,98,116,65,120,105,115,83,119,101,101,112,51,0,0,50,48,98,116,65,120,105,115,83,119,101,101,112,51,73,110,116,101,114,110,97,108,73,116,69,0,0,0,0,0,0,0,50,49,98,116,66,114,111,97,100,112,104,97,115,101,73,110,116,101,114,102,97,99,101,0,184,81,0,0,24,20,0,0,224,81,0,0,248,19,0,0,48,20,0,0,0,0,0,0,224,81,0,0,232,19,0,0,56,20,0,0,0,0,0,0,0,0,0,0,56,20,0,0,60,0,0,0,61,0,0,0,1,0,0,0,6,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,8,0,0,0,39,0,0,0,15,0,0,0,16,0,0,0,7,0,0,0,40,0,0,0,59,0,0,0,0,0,0,0,48,21,0,0,62,0,0,0,63,0,0,0,9,0,0,0,3,0,0,0,8,0,0,0,17,0,0,0,18,0,0,0,19,0,0,0,9,0,0,0,20,0,0,0,10,0,0,0,41,0,0,0,11,0,0,0,10,0,0,0,21,0,0,0,42,0,0,0,43,0,0,0,0,0,0,0,49,53,98,116,78,117,108,108,80,97,105,114,67,97,99,104,101,0,0,0,0,0,0,0,50,50,98,116,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,67,97,99,104,101,0,0,0,0,0,0,0,0,224,81,0,0,0,21,0,0,16,1,0,0,0,0,0,0,224,81,0,0,232,20,0,0,32,21,0,0,0,0,0,0,0,0,0,0,216,21,0,0,64,0,0,0,65,0,0,0,9,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,44,0,0,0,22,0,0,0,1,0,0,0,23,0,0,0,45,0,0,0,9,0,0,0,2,0,0,0,24,0,0,0,11,0,0,0,46,0,0,0,13,0,0,0,14,0,0,0,2,0,0,0,10,0,0,0,11,0,0,0,25,0,0,0,15,0,0,0,8,0,0,0,26,0,0,0,27,0,0,0,12,0,0,0,16,0,0,0,28,0,0,0,13,0,0,0,1,0,0,0,17,0,0,0,49,48,98,116,66,111,120,83,104,97,112,101,0,0,0,0,224,81,0,0,200,21,0,0,128,62,0,0,0,0,0,0,66,111,120,0,0,0,0,0,0,0,0,0,136,22,0,0,66,0,0,0,67,0,0,0,14,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,47,0,0,0,29,0,0,0,2,0,0,0,30,0,0,0,45,0,0,0,10,0,0,0,3,0,0,0,31,0,0,0,12,0,0,0,46,0,0,0,15,0,0,0,18,0,0,0,19,0,0,0,48,0,0,0,49,0,0,0,0,0,0,0,98,116,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,68,97,116,97,0,50,50,98,116,66,118,104,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,0,0,0,0,0,0,0,0,224,81,0,0,104,22,0,0,112,68,0,0,0,0,0,0,66,86,72,84,82,73,65,78,71,76,69,77,69,83,72,0,0,0,0,0,80,23,0,0,68,0,0,0,69,0,0,0,20,0,0,0,0,0,0,0,90,78,75,50,50,98,116,66,118,104,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,49,57,112,114,111,99,101,115,115,65,108,108,84,114,105,97,110,103,108,101,115,69,80,49,56,98,116,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,69,50,49,77,121,78,111,100,101,79,118,101,114,108,97,112,67,97,108,108,98,97,99,107,0,0,0,50,49,98,116,78,111,100,101,79,118,101,114,108,97,112,67,97,108,108,98,97,99,107,0,184,81,0,0,48,23,0,0,224,81,0,0,192,22,0,0,72,23,0,0,0,0,0,0,0,0,0,0,240,23,0,0,70,0,0,0,71,0,0,0,21,0,0,0,0,0,0,0,90,78,50,50,98,116,66,118,104,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,49,55,112,101,114,102,111,114,109,67,111,110,118,101,120,99,97,115,116,69,80,49,56,98,116,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,83,52,95,83,52,95,69,50,49,77,121,78,111,100,101,79,118,101,114,108,97,112,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,0,224,81,0,0,120,23,0,0,72,23,0,0,0,0,0,0,0,0,0,0,128,24,0,0,72,0,0,0,73,0,0,0,22,0,0,0,0,0,0,0,90,78,50,50,98,116,66,118,104,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,49,52,112,101,114,102,111,114,109,82,97,121,99,97,115,116,69,80,49,56,98,116,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,69,50,49,77,121,78,111,100,101,79,118,101,114,108,97,112,67,97,108,108,98,97,99,107,0,224,81,0,0,24,24,0,0,72,23,0,0,0,0,0,0,0,0,0,0,224,25,0,0,74,0,0,0,75,0,0,0,16,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,50,0,0,0,22,0,0,0,3,0,0,0,32,0,0,0,51,0,0,0,11,0,0,0,2,0,0,0,33,0,0,0,13,0,0,0,46,0,0,0,23,0,0,0,24,0,0,0,2,0,0,0,17,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,8,26,0,0,76,0,0,0,77,0,0,0,16,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,50,0,0,0,22,0,0,0,3,0,0,0,35,0,0,0,51,0,0,0,11,0,0,0,2,0,0,0,33,0,0,0,13,0,0,0,46,0,0,0,23,0,0,0,24,0,0,0,2,0,0,0,17,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,48,26,0,0,78,0,0,0,79,0,0,0,16,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,50,0,0,0,22,0,0,0,3,0,0,0,36,0,0,0,51,0,0,0,11,0,0,0,2,0,0,0,33,0,0,0,13,0,0,0,46,0,0,0,23,0,0,0,24,0,0,0,2,0,0,0,17,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,49,52,98,116,67,97,112,115,117,108,101,83,104,97,112,101,0,0,0,0,0,0,0,0,224,81,0,0,200,25,0,0,104,41,0,0,0,0,0,0,49,53,98,116,67,97,112,115,117,108,101,83,104,97,112,101,88,0,0,0,0,0,0,0,224,81,0,0,240,25,0,0,224,25,0,0,0,0,0,0,49,53,98,116,67,97,112,115,117,108,101,83,104,97,112,101,90,0,0,0,0,0,0,0,224,81,0,0,24,26,0,0,224,25,0,0,0,0,0,0,67,97,112,115,117,108,101,90,0,0,0,0,0,0,0,0,67,97,112,115,117,108,101,88,0,0,0,0,0,0,0,0,98,116,67,97,112,115,117,108,101,83,104,97,112,101,68,97,116,97,0,0,0,0,0,0,67,97,112,115,117,108,101,83,104,97,112,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,26,0,0,80,0,0,0,81,0,0,0,4,0,0,0,14,0,0,0,52,0,0,0,53,0,0,0,15,0,0,0,16,0,0,0,18,0,0,0,37,0,0,0,9,0,0,0,38,0,0,0,39,0,0,0,40,0,0,0,10,0,0,0,54,0,0,0,50,49,98,116,67,111,108,108,105,115,105,111,110,68,105,115,112,97,116,99,104,101,114,0,224,81,0,0,216,26,0,0,88,50,0,0,0,0,0,0,0,0,0,0,88,27,0,0,82,0,0,0,83,0,0,0,11,0,0,0,0,0,0,0,50,51,98,116,67,111,108,108,105,115,105,111,110,80,97,105,114,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,49,55,98,116,79,118,101,114,108,97,112,67,97,108,108,98,97,99,107,0,0,0,0,0,184,81,0,0,56,27,0,0,224,81,0,0,24,27,0,0,80,27,0,0,0,0,0,0,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,49,55,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,0,0,0,0,0,184,81,0,0,136,27,0,0,98,116,67,111,108,108,105,115,105,111,110,83,104,97,112,101,68,97,116,97,0,0,0,0,49,54,98,116,67,111,108,108,105,115,105,111,110,83,104,97,112,101,0,0,0,0,0,0,184,81,0,0,192,27,0,0,0,0,0,0,184,29,0,0,84,0,0,0,85,0,0,0,19,0,0,0,20,0,0,0,5,0,0,0,3,0,0,0,86,0,0,0,1,0,0,0,2,0,0,0,19,0,0,0,55,0,0,0,22,0,0,0,56,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,79,118,101,114,102,108,111,119,32,105,110,32,65,65,66,66,44,32,111,98,106,101,99,116,32,114,101,109,111,118,101,100,32,102,114,111,109,32,115,105,109,117,108,97,116,105,111,110,0,0,0,0,0,0,0,0,73,102,32,121,111,117,32,99,97,110,32,114,101,112,114,111,100,117,99,101,32,116,104,105,115,44,32,112,108,101,97,115,101,32,101,109,97,105,108,32,98,117,103,115,64,99,111,110,116,105,110,117,111,117,115,112,104,121,115,105,99,115,46,99,111,109,10,0,0,0,0,0,80,108,101,97,115,101,32,105,110,99,108,117,100,101,32,97,98,111,118,101,32,105,110,102,111,114,109,97,116,105,111,110,44,32,121,111,117,114,32,80,108,97,116,102,111,114,109,44,32,118,101,114,115,105,111,110,32,111,102,32,79,83,46,10,0,0,0,0,0,0,0,0,84,104,97,110,107,115,46,10,0,0,0,0,0,0,0,0,117,112,100,97,116,101,65,97,98,98,115,0,0,0,0,0,99,97,108,99,117,108,97,116,101,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,115,0,0,0,0,0,0,0,112,101,114,102,111,114,109,68,105,115,99,114,101,116,101,67,111,108,108,105,115,105,111,110,68,101,116,101,99,116,105,111,110,0,0,0,0,0,0,0,100,105,115,112,97,116,99,104,65,108,108,67,111,108,108,105,115,105,111,110,80,97,105,114,115,0,0,0,0,0,0,0,99,111,110,118,101,120,83,119,101,101,112,67,111,109,112,111,117,110,100,0,0,0,0,0,99,111,110,118,101,120,83,119,101,101,112,84,101,115,116,0,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,0,0,0,0,0,0,184,81,0,0,160,29,0,0,0,0,0,0,8,30,0,0,87,0,0,0,88,0,0,0,20,0,0,0,21,0,0,0,252,255,255,255,8,30,0,0,89,0,0,0,90,0,0,0,22,0,0,0,0,0,0,0,49,55,68,101,98,117,103,68,114,97,119,99,97,108,108,98,97,99,107,0,0,0,0,0,64,82,0,0,240,29,0,0,0,0,0,0,2,0,0,0,88,67,0,0,2,0,0,0,136,67,0,0,2,4,0,0,0,0,0,0,104,30,0,0,91,0,0,0,92,0,0,0,26,0,0,0,27,0,0,0,3,0,0,0,0,0,0,0,50,51,98,116,66,114,105,100,103,101,100,77,97,110,105,102,111,108,100,82,101,115,117,108,116,0,0,0,0,0,0,0,224,81,0,0,72,30,0,0,240,52,0,0,0,0,0,0,50,52,98,116,66,114,111,97,100,112,104,97,115,101,65,97,98,98,67,97,108,108,98,97,99,107,0,0,0,0,0,0,184,81,0,0,120,30,0,0,0,0,0,0,0,31,0,0,93,0,0,0,94,0,0,0,12,0,0,0,0,0,0,0,50,49,98,116,83,105,110,103,108,101,83,119,101,101,112,67,97,108,108,98,97,99,107,0,50,51,98,116,66,114,111,97,100,112,104,97,115,101,82,97,121,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,224,81,0,0,208,30,0,0,152,30,0,0,0,0,0,0,224,81,0,0,184,30,0,0,240,30,0,0,0,0,0,0,0,0,0,0,64,31,0,0,95,0,0,0,96,0,0,0,13,0,0,0,0,0,0,0,49,57,98,116,83,105,110,103,108,101,82,97,121,67,97,108,108,98,97,99,107,0,0,0,224,81,0,0,40,31,0,0,240,30,0,0,0,0,0,0,0,0,0,0,8,32,0,0,97,0,0,0,98,0,0,0,14,0,0,0,10,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,53,111,98,106,101,99,116,81,117,101,114,121,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,80,75,49,51,98,116,67,111,110,118,101,120,83,104,97,112,101,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,53,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,50,48,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,102,69,49,52,76,111,99,97,108,73,110,102,111,65,100,100,101,114,95,49,0,0,224,81,0,0,104,31,0,0,40,3,0,0,0,0,0,0,0,0,0,0,232,32,0,0,99,0,0,0,100,0,0,0,23,0,0,0,1,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,53,111,98,106,101,99,116,81,117,101,114,121,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,80,75,49,51,98,116,67,111,110,118,101,120,83,104,97,112,101,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,53,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,50,48,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,102,69,51,50,66,114,105,100,103,101,84,114,105,97,110,103,108,101,67,111,110,118,101,120,99,97,115,116,67,97,108,108,98,97,99,107,95,48,0,0,0,0,0,0,0,0,224,81,0,0,48,32,0,0,224,63,0,0,0,0,0,0,0,0,0,0,192,33,0,0,101,0,0,0,102,0,0,0,23,0,0,0,2,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,53,111,98,106,101,99,116,81,117,101,114,121,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,80,75,49,51,98,116,67,111,110,118,101,120,83,104,97,112,101,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,53,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,50,48,67,111,110,118,101,120,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,102,69,51,50,66,114,105,100,103,101,84,114,105,97,110,103,108,101,67,111,110,118,101,120,99,97,115,116,67,97,108,108,98,97,99,107,0,0,224,81,0,0,16,33,0,0,224,63,0,0,0,0,0,0,0,0,0,0,112,34,0,0,103,0,0,0,104,0,0,0,15,0,0,0,11,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,49,114,97,121,84,101,115,116,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,50,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,49,55,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,69,49,53,76,111,99,97,108,73,110,102,111,65,100,100,101,114,50,0,0,0,0,224,81,0,0,232,33,0,0,184,1,0,0,0,0,0,0,0,0,0,0,72,35,0,0,105,0,0,0,106,0,0,0,28,0,0,0,57,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,49,114,97,121,84,101,115,116,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,50,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,49,55,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,69,57,82,97,121,84,101,115,116,101,114,95,49,0,78,54,98,116,68,98,118,116,56,73,67,111,108,108,105,100,101,69,0,0,0,0,0,0,184,81,0,0,40,35,0,0,224,81,0,0,168,34,0,0,64,35,0,0,0,0,0,0,0,0,0,0,8,36,0,0,107,0,0,0,108,0,0,0,24,0,0,0,1,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,49,114,97,121,84,101,115,116,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,50,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,49,55,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,69,50,57,66,114,105,100,103,101,84,114,105,97,110,103,108,101,82,97,121,99,97,115,116,67,97,108,108,98,97,99,107,95,48,0,0,0,0,224,81,0,0,112,35,0,0,176,63,0,0,0,0,0,0,0,0,0,0,200,36,0,0,109,0,0,0,110,0,0,0,24,0,0,0,2,0,0,0,90,78,49,54,98,116,67,111,108,108,105,115,105,111,110,87,111,114,108,100,50,49,114,97,121,84,101,115,116,83,105,110,103,108,101,73,110,116,101,114,110,97,108,69,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,50,95,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,82,78,83,95,49,55,82,97,121,82,101,115,117,108,116,67,97,108,108,98,97,99,107,69,69,50,57,66,114,105,100,103,101,84,114,105,97,110,103,108,101,82,97,121,99,97,115,116,67,97,108,108,98,97,99,107,0,0,0,0,0,0,224,81,0,0,48,36,0,0,176,63,0,0,0,0,0,0,0,0,0,0,24,37,0,0,12,0,0,0,58,0,0,0,29,0,0,0,111,0,0,0,112,0,0,0,0,0,0,0,78,49,50,98,116,67,111,110,118,101,120,67,97,115,116,49,48,67,97,115,116,82,101,115,117,108,116,69,0,0,0,0,184,81,0,0,248,36,0,0,0,0,0,0,192,37,0,0,113,0,0,0,114,0,0,0,25,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,59,0,0,0,41,0,0,0,4,0,0,0,42,0,0,0,45,0,0,0,13,0,0,0,4,0,0,0,43,0,0,0,17,0,0,0,46,0,0,0,60,0,0,0,115,0,0,0,98,116,67,111,109,112,111,117,110,100,83,104,97,112,101,67,104,105,108,100,68,97,116,97,0,0,0,0,0,0,0,0,98,116,67,111,109,112,111,117,110,100,83,104,97,112,101,68,97,116,97,0,0,0,0,0,49,53,98,116,67,111,109,112,111,117,110,100,83,104,97,112,101,0,0,0,0,0,0,0,224,81,0,0,168,37,0,0,216,27,0,0,0,0,0,0,67,111,109,112,111,117,110,100,0,0,0,0,0,0,0,0,0,0,0,0,40,39,0,0,116,0,0,0,117,0,0,0,26,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,61,0,0,0,22,0,0,0,5,0,0,0,44,0,0,0,62,0,0,0,14,0,0,0,2,0,0,0,45,0,0,0,18,0,0,0,46,0,0,0,30,0,0,0,31,0,0,0,2,0,0,0,27,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,72,39,0,0,118,0,0,0,119,0,0,0,26,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,61,0,0,0,22,0,0,0,5,0,0,0,46,0,0,0,63,0,0,0,14,0,0,0,2,0,0,0,45,0,0,0,18,0,0,0,46,0,0,0,30,0,0,0,31,0,0,0,2,0,0,0,27,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,104,39,0,0,120,0,0,0,121,0,0,0,26,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,61,0,0,0,22,0,0,0,5,0,0,0,47,0,0,0,64,0,0,0,14,0,0,0,2,0,0,0,45,0,0,0,18,0,0,0,46,0,0,0,30,0,0,0,31,0,0,0,2,0,0,0,27,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,49,49,98,116,67,111,110,101,83,104,97,112,101,0,0,0,224,81,0,0,24,39,0,0,104,41,0,0,0,0,0,0,49,50,98,116,67,111,110,101,83,104,97,112,101,90,0,0,224,81,0,0,56,39,0,0,40,39,0,0,0,0,0,0,49,50,98,116,67,111,110,101,83,104,97,112,101,88,0,0,224,81,0,0,88,39,0,0,40,39,0,0,0,0,0,0,67,111,110,101,88,0,0,0,67,111,110,101,90,0,0,0,98,116,67,111,110,101,83,104,97,112,101,68,97,116,97,0,67,111,110,101,0,0,0,0,0,0,0,0,216,39,0,0,122,0,0,0,123,0,0,0,1,0,0,0,0,0,0,0,50,55,98,116,67,111,110,116,105,110,117,111,117,115,67,111,110,118,101,120,67,111,108,108,105,115,105,111,110,0,0,0,224,81,0,0,184,39,0,0,120,40,0,0,0,0,0,0,0,0,0,0,88,40,0,0,124,0,0,0,125,0,0,0,32,0,0,0,33,0,0,0,4],"i8",Y,c.GLOBAL_BASE);Z([49,54,98,116,80,111,105,110,116,67,111,108,108,101,99,116,111,114,0,0,0,0,0,0,78,51,54,98,116,68,105,115,99,114,101,116,101,67,111,108,108,105,115,105,111,110,68,101,116,101,99,116,111,114,73,110,116,101,114,102,97,99,101,54,82,101,115,117,108,116,69,0,184,81,0,0,32,40,0,0,224,81,0,0,8,40,0,0,80,40,0,0,0,0,0,0,49,50,98,116,67,111,110,118,101,120,67,97,115,116,0,0,184,81,0,0,104,40,0,0,0,0,0,0,56,41,0,0,126,0,0,0,127,0,0,0,28,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,65,0,0,0,22,0,0,0,6,0,0,0,48,0,0,0,45,0,0,0,14,0,0,0,2,0,0,0,49,0,0,0,19,0,0,0,46,0,0,0,34,0,0,0,35,0,0,0,2,0,0,0,29,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,8,0,0,0,50,0,0,0,51,0,0,0,30,0,0,0,36,0,0,0,52,0,0,0,31,0,0,0,2,0,0,0,1,0,0,0,98,116,67,111,110,118,101,120,72,117,108,108,83,104,97,112,101,68,97,116,97,0,0,0,49,55,98,116,67,111,110,118,101,120,72,117,108,108,83,104,97,112,101,0,0,0,0,0,224,81,0,0,32,41,0,0,184,62,0,0,0,0,0,0,67,111,110,118,101,120,0,0,50,49,98,116,67,111,110,118,101,120,73,110,116,101,114,110,97,108,83,104,97,112,101,0,224,81,0,0,80,41,0,0,136,41,0,0,0,0,0,0,49,51,98,116,67,111,110,118,101,120,83,104,97,112,101,0,224,81,0,0,120,41,0,0,216,27,0,0,0,0,0,0,0,0,0,0,64,42,0,0,128,0,0,0,129,0,0,0,28,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,66,0,0,0,53,0,0,0,6,0,0,0,54,0,0,0,45,0,0,0,14,0,0,0,2,0,0,0,24,0,0,0,11,0,0,0,46,0,0,0,37,0,0,0,38,0,0,0,2,0,0,0,32,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,8,0,0,0,55,0,0,0,56,0,0,0,33,0,0,0,39,0,0,0,57,0,0,0,34,0,0,0,3,0,0,0,0,0,0,0,50,53,98,116,67,111,110,118,101,120,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,0,0,0,0,0,224,81,0,0,32,42,0,0,184,62,0,0,0,0,0,0,67,111,110,118,101,120,84,114,105,109,101,115,104,0,0,0,0,0,0,0,152,42,0,0,130,0,0,0,131,0,0,0,35,0,0,0,0,0,0,0,50,54,76,111,99,97,108,83,117,112,112,111,114,116,86,101,114,116,101,120,67,97,108,108,98,97,99,107,0,0,0,0,224,81,0,0,120,42,0,0,136,67,0,0,0,0,0,0,0,0,0,0,248,43,0,0,132,0,0,0,133,0,0,0,36,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,67,0,0,0,22,0,0,0,7,0,0,0,58,0,0,0,68,0,0,0,15,0,0,0,2,0,0,0,59,0,0,0,20,0,0,0,46,0,0,0,40,0,0,0,41,0,0,0,2,0,0,0,37,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,5,0,0,0,0,0,0,0,32,44,0,0,134,0,0,0,135,0,0,0,36,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,67,0,0,0,22,0,0,0,7,0,0,0,60,0,0,0,68,0,0,0,15,0,0,0,2,0,0,0,59,0,0,0,20,0,0,0,46,0,0,0,40,0,0,0,42,0,0,0,2,0,0,0,38,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,6,0,0,0,0,0,0,0,72,44,0,0,136,0,0,0,137,0,0,0,36,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,67,0,0,0,22,0,0,0,7,0,0,0,61,0,0,0,68,0,0,0,15,0,0,0,2,0,0,0,59,0,0,0,20,0,0,0,46,0,0,0,40,0,0,0,43,0,0,0,2,0,0,0,39,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,7,0,0,0,49,53,98,116,67,121,108,105,110,100,101,114,83,104,97,112,101,0,0,0,0,0,0,0,224,81,0,0,224,43,0,0,104,41,0,0,0,0,0,0,49,54,98,116,67,121,108,105,110,100,101,114,83,104,97,112,101,88,0,0,0,0,0,0,224,81,0,0,8,44,0,0,248,43,0,0,0,0,0,0,49,54,98,116,67,121,108,105,110,100,101,114,83,104,97,112,101,90,0,0,0,0,0,0,224,81,0,0,48,44,0,0,248,43,0,0,0,0,0,0,67,121,108,105,110,100,101,114,90,0,0,0,0,0,0,0,67,121,108,105,110,100,101,114,88,0,0,0,0,0,0,0,98,116,67,121,108,105,110,100,101,114,83,104,97,112,101,68,97,116,97,0,0,0,0,0,67,121,108,105,110,100,101,114,89,0,0,0,0,0,0,0,0,0,0,0,248,44,0,0,138,0,0,0,139,0,0,0,2,0,0,0,44,0,0,0,3,0,0,0,40,0,0,0,3,0,0,0,41,0,0,0,69,0,0,0,62,0,0,0,63,0,0,0,45,0,0,0,70,0,0,0,140,0,0,0,49,54,98,116,68,98,118,116,66,114,111,97,100,112,104,97,115,101,0,0,0,0,0,0,224,81,0,0,224,44,0,0,48,20,0,0,0,0,0,0,0,0,0,0,72,45,0,0,141,0,0,0,142,0,0,0,28,0,0,0,71,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,50,48,66,114,111,97,100,112,104,97,115,101,65,97,98,98,84,101,115,116,101,114,0,0,224,81,0,0,48,45,0,0,64,35,0,0,0,0,0,0,0,0,0,0,152,45,0,0,143,0,0,0,144,0,0,0,28,0,0,0,72,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,49,57,66,114,111,97,100,112,104,97,115,101,82,97,121,84,101,115,116,101,114,0,0,0,224,81,0,0,128,45,0,0,64,35,0,0,0,0,0,0,0,0,0,0,232,45,0,0,145,0,0,0,146,0,0,0,46,0,0,0,73,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,49,56,98,116,68,98,118,116,84,114,101,101,67,111,108,108,105,100,101,114,0,0,0,0,224,81,0,0,208,45,0,0,64,35,0,0,0,0,0,0,0,0,0,0,104,46,0,0,147,0,0,0,148,0,0,0,64,0,0,0,65,0,0,0,21,0,0,0,66,0,0,0,51,49,98,116,68,101,102,97,117,108,116,67,111,108,108,105,115,105,111,110,67,111,110,102,105,103,117,114,97,116,105,111,110,0,0,0,0,0,0,0,50,52,98,116,67,111,108,108,105,115,105,111,110,67,111,110,102,105,103,117,114,97,116,105,111,110,0,0,0,0,0,0,184,81,0,0,64,46,0,0,224,81,0,0,24,46,0,0,96,46,0,0,0,0,0,0,0,0,0,0,240,46,0,0,149,0,0,0,150,0,0,0,5,0,0,0,0,0,0,0,78,51,49,98,116,67,111,110,118,101,120,80,108,97,110,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,51,48,98,116,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,67,114,101,97,116,101,70,117,110,99,0,0,0,0,0,0,0,0,184,81,0,0,192,46,0,0,224,81,0,0,144,46,0,0,232,46,0,0,0,0,0,0,0,0,0,0,72,47,0,0,151,0,0,0,152,0,0,0,6,0,0,0,0,0,0,0,78,50,54,98,116,66,111,120,66,111,120,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,224,81,0,0,24,47,0,0,232,46,0,0,0,0,0,0,0,0,0,0,168,47,0,0,153,0,0,0,154,0,0,0,7,0,0,0,0,0,0,0,78,51,52,98,116,83,112,104,101,114,101,84,114,105,97,110,103,108,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,224,81,0,0,112,47,0,0,232,46,0,0,0,0,0,0,0,0,0,0,8,48,0,0,155,0,0,0,156,0,0,0,8,0,0,0,0,0,0,0,78,51,50,98,116,83,112,104,101,114,101,83,112,104,101,114,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,0,0,224,81,0,0,208,47,0,0,232,46,0,0,0,0,0,0,0,0,0,0,88,48,0,0,157,0,0,0,158,0,0,0,9,0,0,0,0,0,0,0,78,49,54,98,116,69,109,112,116,121,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,0,0,224,81,0,0,48,48,0,0,232,46,0,0,0,0,0,0,0,0,0,0,184,48,0,0,159,0,0,0,160,0,0,0,10,0,0,0,0,0,0,0,78,50,56,98,116,67,111,109,112,111,117,110,100,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,55,83,119,97,112,112,101,100,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,224,81,0,0,128,48,0,0,232,46,0,0,0,0,0,0,0,0,0,0,24,49,0,0,161,0,0,0,162,0,0,0,11,0,0,0,0,0,0,0,78,51,54,98,116,67,111,109,112,111,117,110,100,67,111,109,112,111,117,110,100,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,224,81,0,0,224,48,0,0,232,46,0,0,0,0,0,0,0,0,0,0,112,49,0,0,163,0,0,0,164,0,0,0,12,0,0,0,0,0,0,0,78,50,56,98,116,67,111,109,112,111,117,110,100,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,224,81,0,0,64,49,0,0,232,46,0,0,0,0,0,0,0,0,0,0,216,49,0,0,165,0,0,0,166,0,0,0,13,0,0,0,0,0,0,0,78,51,51,98,116,67,111,110,118,101,120,67,111,110,99,97,118,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,55,83,119,97,112,112,101,100,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,0,0,224,81,0,0,152,49,0,0,232,46,0,0,0,0,0,0,0,0,0,0,56,50,0,0,167,0,0,0,168,0,0,0,14,0,0,0,0,0,0,0,78,51,51,98,116,67,111,110,118,101,120,67,111,110,99,97,118,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,0,0,0,0,0,0,224,81,0,0,0,50,0,0,232,46,0,0,0,0,0,0,49,50,98,116,68,105,115,112,97,116,99,104,101,114,0,0,184,81,0,0,72,50,0,0,0,0,0,0,184,50,0,0,169,0,0,0,170,0,0,0,4,0,0,0,1,0,0,0,74,0,0,0,0,0,0,0,49,54,98,116,69,109,112,116,121,65,108,103,111,114,105,116,104,109,0,0,0,0,0,0,50,48,98,116,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,184,81,0,0,152,50,0,0,224,81,0,0,128,50,0,0,176,50,0,0,0,0,0,0,0,0,0,0,56,51,0,0,18,0,0,0,171,0,0,0,172,0,0,0,35,0,0,0,67,0,0,0,22,0,0,0,75,0,0,0,47,0,0,0,42,0,0,0,0,0,0,0,0,0,0,0,104,51,0,0,18,0,0,0,173,0,0,0,174,0,0,0,35,0,0,0,67,0,0,0,22,0,0,0,75,0,0,0,48,0,0,0,43,0,0,0,0,0,0,0,49,51,98,116,71,104,111,115,116,79,98,106,101,99,116,0,224,81,0,0,40,51,0,0,160,27,0,0,0,0,0,0,50,52,98,116,80,97,105,114,67,97,99,104,105,110,103,71,104,111,115,116,79,98,106,101,99,116,0,0,0,0,0,0,224,81,0,0,72,51,0,0,56,51,0,0,0,0,0,0,0,0,0,0,168,51,0,0,175,0,0,0,176,0,0,0,2,0,0,0,0,0,0,0,49,53,98,116,71,106,107,67,111,110,118,101,120,67,97,115,116,0,0,0,0,0,0,0,224,81,0,0,144,51,0,0,120,40,0,0,0,0,0,0,0,0,0,0,40,52,0,0,177,0,0,0,178,0,0,0,1,0,0,0,0,0,0,0,51,48,98,116,71,106,107,69,112,97,80,101,110,101,116,114,97,116,105,111,110,68,101,112,116,104,83,111,108,118,101,114,0,0,0,0,0,0,0,0,51,48,98,116,67,111,110,118,101,120,80,101,110,101,116,114,97,116,105,111,110,68,101,112,116,104,83,111,108,118,101,114,0,0,0,0,0,0,0,0,184,81,0,0,248,51,0,0,224,81,0,0,208,51,0,0,32,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,168,52,0,0,179,0,0,0,180,0,0,0,5,0,0,0,0,0,0,0,49,55,98,116,71,106,107,80,97,105,114,68,101,116,101,99,116,111,114,0,0,0,0,0,51,54,98,116,68,105,115,99,114,101,116,101,67,111,108,108,105,115,105,111,110,68,101,116,101,99,116,111,114,73,110,116,101,114,102,97,99,101,0,0,184,81,0,0,120,52,0,0,224,81,0,0,96,52,0,0,160,52,0,0,0,0,0,0,0,0,0,0,240,52,0,0,181,0,0,0,182,0,0,0,26,0,0,0,27,0,0,0,5,0,0,0,0,0,0,0,49,54,98,116,77,97,110,105,102,111,108,100,82,101,115,117,108,116,0,0,0,0,0,0,224,81,0,0,216,52,0,0,80,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,57,0,0,183,0,0,0,184,0,0,0,2,0,0,0,0,0,0,0,51,51,98,116,77,105,110,107,111,119,115,107,105,80,101,110,101,116,114,97,116,105,111,110,68,101,112,116,104,83,111,108,118,101,114,0,0,0,0,0,224,81,0,0,0,57,0,0,32,52,0,0,0,0,0,0,0,0,0,0,8,58,0,0,185,0,0,0,186,0,0,0,49,0,0,0,50,0,0,0,6,0,0,0,0,0,0,0,90,78,51,51,98,116,77,105,110,107,111,119,115,107,105,80,101,110,101,116,114,97,116,105,111,110,68,101,112,116,104,83,111,108,118,101,114,49,50,99,97,108,99,80,101,110,68,101,112,116,104,69,82,50,50,98,116,86,111,114,111,110,111,105,83,105,109,112,108,101,120,83,111,108,118,101,114,80,75,49,51,98,116,67,111,110,118,101,120,83,104,97,112,101,83,52,95,82,75,49,49,98,116,84,114,97,110,115,102,111,114,109,83,55,95,82,57,98,116,86,101,99,116,111,114,51,83,57,95,83,57,95,80,49,50,98,116,73,68,101,98,117,103,68,114,97,119,69,50,48,98,116,73,110,116,101,114,109,101,100,105,97,116,101,82,101,115,117,108,116,0,0,0,0,0,0,224,81,0,0,88,57,0,0,80,40,0,0,0,0,0,0,0,0,0,0,88,58,0,0,187,0,0,0,188,0,0,0,15,0,0,0,68,0,0,0,23,0,0,0,76,0,0,0,77,0,0,0,16,0,0,0,49,52,98,116,79,112,116,105,109,105,122,101,100,66,118,104,0,0,0,0,0,0,0,0,224,81,0,0,64,58,0,0,112,63,0,0,0,0,0,0,0,0,0,0,224,58,0,0,189,0,0,0,190,0,0,0,44,0,0,0,0,0,0,0,90,78,49,52,98,116,79,112,116,105,109,105,122,101,100,66,118,104,53,98,117,105,108,100,69,80,50,51,98,116,83,116,114,105,100,105,110,103,77,101,115,104,73,110,116,101,114,102,97,99,101,98,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,69,50,48,78,111,100,101,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,95,48,0,0,0,0,224,81,0,0,128,58,0,0,136,67,0,0,0,0,0,0,0,0,0,0,112,59,0,0,191,0,0,0,192,0,0,0,45,0,0,0,0,0,0,0,90,78,49,52,98,116,79,112,116,105,109,105,122,101,100,66,118,104,53,98,117,105,108,100,69,80,50,51,98,116,83,116,114,105,100,105,110,103,77,101,115,104,73,110,116,101,114,102,97,99,101,98,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,69,50,57,81,117,97,110,116,105,122,101,100,78,111,100,101,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,0,0,0,0,0,224,81,0,0,8,59,0,0,136,67,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,60,0,0,193,0,0,0,194,0,0,0,24,0,0,0,17,0,0,0,51,0,0,0,69,0,0,0,70,0,0,0,71,0,0,0,52,0,0,0,72,0,0,0,53,0,0,0,78,0,0,0,54,0,0,0,25,0,0,0,73,0,0,0,79,0,0,0,80,0,0,0,0,0,0,0,50,56,98,116,72,97,115,104,101,100,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,67,97,99,104,101,0,0,224,81,0,0,240,59,0,0,32,21,0,0,0,0,0,0,0,0,0,0,192,60,0,0,195,0,0,0,196,0,0,0,19,0,0,0,0,0,0,0,90,78,50,56,98,116,72,97,115,104,101,100,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,67,97,99,104,101,51,55,114,101,109,111,118,101,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,115,67,111,110,116,97,105,110,105,110,103,80,114,111,120,121,69,80,49,55,98,116,66,114,111,97,100,112,104,97,115,101,80,114,111,120,121,80,49,50,98,116,68,105,115,112,97,116,99,104,101,114,69,49,56,82,101,109,111,118,101,80,97,105,114,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,0,224,81,0,0,56,60,0,0,80,27,0,0,0,0,0,0,0,0,0,0,88,61,0,0,197,0,0,0,198,0,0,0,20,0,0,0,0,0,0,0,90,78,50,56,98,116,72,97,115,104,101,100,79,118,101,114,108,97,112,112,105,110,103,80,97,105,114,67,97,99,104,101,49,57,99,108,101,97,110,80,114,111,120,121,70,114,111,109,80,97,105,114,115,69,80,49,55,98,116,66,114,111,97,100,112,104,97,115,101,80,114,111,120,121,80,49,50,98,116,68,105,115,112,97,116,99,104,101,114,69,49,55,67,108,101,97,110,80,97,105,114,67,97,108,108,98,97,99,107,0,0,0,224,81,0,0,232,60,0,0,80,27,0,0,0,0,0,0,10,215,163,60,0,0,0,0,0,0,0,0,128,62,0,0,199,0,0,0,200,0,0,0,26,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,81,0,0,0,22,0,0,0,6,0,0,0,1,0,0,0,45,0,0,0,14,0,0,0,2,0,0,0,24,0,0,0,11,0,0,0,46,0,0,0,23,0,0,0,55,0,0,0,2,0,0,0,46,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,8,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,50,51,98,116,80,111,108,121,104,101,100,114,97,108,67,111,110,118,101,120,83,104,97,112,101,0,0,0,0,0,0,0,224,81,0,0,96,62,0,0,104,41,0,0,0,0,0,0,51,52,98,116,80,111,108,121,104,101,100,114,97,108,67,111,110,118,101,120,65,97,98,98,67,97,99,104,105,110,103,83,104,97,112,101,0,0,0,0,224,81,0,0,144,62,0,0,128,62,0,0,0,0,0,0,0,0,0,0,112,63,0,0,201,0,0,0,202,0,0,0,15,0,0,0,68,0,0,0,23,0,0,0,76,0,0,0,77,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,98,116,79,112,116,105,109,105,122,101,100,66,118,104,78,111,100,101,68,97,116,97,0,0,98,116,81,117,97,110,116,105,122,101,100,66,118,104,78,111,100,101,68,97,116,97,0,0,98,116,66,118,104,83,117,98,116,114,101,101,73,110,102,111,68,97,116,97,0,0,0,0,98,116,81,117,97,110,116,105,122,101,100,66,118,104,70,108,111,97,116,68,97,116,97,0,49,52,98,116,81,117,97,110,116,105,122,101,100,66,118,104,0,0,0,0,0,0,0,0,184,81,0,0,88,63,0,0,0,0,0,0,224,63,0,0,203,0,0,0,204,0,0,0,23,0,0,0,1,0,0,0,50,53,98,116,84,114,105,97,110,103,108,101,82,97,121,99,97,115,116,67,97,108,108,98,97,99,107,0,0,0,0,0,224,81,0,0,144,63,0,0,88,67,0,0,0,0,0,0,50,56,98,116,84,114,105,97,110,103,108,101,67,111,110,118,101,120,99,97,115,116,67,97,108,108,98,97,99,107,0,0,224,81,0,0,192,63,0,0,88,67,0,0,0,0,0,0,0,0,0,0,144,64,0,0,205,0,0,0,206,0,0,0,47,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,81,0,0,0,22,0,0,0,8,0,0,0,74,0,0,0,45,0,0,0,14,0,0,0,2,0,0,0,24,0,0,0,11,0,0,0,46,0,0,0,23,0,0,0,56,0,0,0,2,0,0,0,48,0,0,0,11,0,0,0,75,0,0,0,57,0,0,0,8,0,0,0,76,0,0,0,77,0,0,0,49,0,0,0,58,0,0,0,78,0,0,0,50,0,0,0,4,0,0,0,51,0,0,0,49,53,98,116,84,114,105,97,110,103,108,101,83,104,97,112,101,0,0,0,0,0,0,0,224,81,0,0,120,64,0,0,128,62,0,0,0,0,0,0,84,114,105,97,110,103,108,101,0,0,0,0,0,0,0,0,0,0,0,0,24,65,0,0,207,0,0,0,208,0,0,0,59,0,0,0,82,0,0,0,105,115,108,97,110,100,85,110,105,111,110,70,105,110,100,65,110,100,81,117,105,99,107,83,111,114,116,0,0,0,0,0,112,114,111,99,101,115,115,73,115,108,97,110,100,115,0,0,50,53,98,116,83,105,109,117,108,97,116,105,111,110,73,115,108,97,110,100,77,97,110,97,103,101,114,0,0,0,0,0,184,81,0,0,248,64,0,0,0,0,0,0,152,65,0,0,209,0,0,0,210,0,0,0,52,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,81,0,0,0,22,0,0,0,9,0,0,0,79,0,0,0,45,0,0,0,16,0,0,0,8,0,0,0,24,0,0,0,11,0,0,0,46,0,0,0,60,0,0,0,61,0,0,0,2,0,0,0,53,0,0,0,11,0,0,0,34,0,0,0,25,0,0,0,0,0,0,0,49,51,98,116,83,112,104,101,114,101,83,104,97,112,101,0,224,81,0,0,136,65,0,0,104,41,0,0,0,0,0,0,0,0,0,0,240,65,0,0,211,0,0,0,212,0,0,0,6,0,0,0,2,0,0,0,83,0,0,0,0,0,0,0,51,50,98,116,83,112,104,101,114,101,83,112,104,101,114,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,0,0,224,81,0,0,200,65,0,0,208,69,0,0,0,0,0,0,0,0,0,0,72,66,0,0,213,0,0,0,214,0,0,0,7,0,0,0,3,0,0,0,84,0,0,0,0,0,0,0,51,52,98,116,83,112,104,101,114,101,84,114,105,97,110,103,108,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,224,81,0,0,32,66,0,0,208,69,0,0,0,0,0,0,0,0,0,0,192,66,0,0,215,0,0,0,216,0,0,0,54,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,85,0,0,0,80,0,0,0,10,0,0,0,81,0,0,0,45,0,0,0,10,0,0,0,3,0,0,0,82,0,0,0,26,0,0,0,46,0,0,0,55,0,0,0,0,0,0,0,49,56,98,116,83,116,97,116,105,99,80,108,97,110,101,83,104,97,112,101,0,0,0,0,224,81,0,0,168,66,0,0,232,71,0,0,0,0,0,0,98,116,83,116,97,116,105,99,80,108,97,110,101,83,104,97,112,101,68,97,116,97,0,0,83,84,65,84,73,67,80,76,65,78,69,0,0,0,0,0,0,0,0,0,48,67,0,0,217,0,0,0,218,0,0,0,3,0,0,0,0,0,0,0,50,50,98,116,83,117,98,115,105,109,112,108,101,120,67,111,110,118,101,120,67,97,115,116,0,0,0,0,0,0,0,0,224,81,0,0,16,67,0,0,120,40,0,0,0,0,0,0,49,56,98,116,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,0,0,0,0,184,81,0,0,64,67,0,0,51,49,98,116,73,110,116,101,114,110,97,108,84,114,105,97,110,103,108,101,73,110,100,101,120,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,184,81,0,0,96,67,0,0,0,0,0,0,240,67,0,0,219,0,0,0,220,0,0,0,56,0,0,0,1,0,0,0,2,0,0,0,86,0,0,0,87,0,0,0,83,0,0,0,88,0,0,0,89,0,0,0,84,0,0,0,62,0,0,0,63,0,0,0,85,0,0,0,27,0,0,0,0,0,0,0,49,52,98,116,84,114,105,97,110,103,108,101,77,101,115,104,0,0,0,0,0,0,0,0,224,81,0,0,216,67,0,0,32,78,0,0,0,0,0,0,0,0,0,0,112,68,0,0,221,0,0,0,222,0,0,0,14,0,0,0,12,0,0,0,1,0,0,0,1,0,0,0,90,0,0,0,29,0,0,0,2,0,0,0,86,0,0,0,45,0,0,0,10,0,0,0,3,0,0,0,87,0,0,0,28,0,0,0,46,0,0,0,57,0,0,0,18,0,0,0,19,0,0,0,0,0,0,0,49,57,98,116,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,0,0,0,224,81,0,0,88,68,0,0,232,71,0,0,0,0,0,0,84,82,73,65,78,71,76,69,77,69,83,72,0,0,0,0,0,0,0,0,192,68,0,0,223,0,0,0,224,0,0,0,58,0,0,0,0,0,0,0,50,49,83,117,112,112,111,114,116,86,101,114,116,101,120,67,97,108,108,98,97,99,107,0,224,81,0,0,168,68,0,0,88,67,0,0,0,0,0,0,0,0,0,0,80,69,0,0,225,0,0,0,226,0,0,0,59,0,0,0,0,0,0,0,90,78,75,49,57,98,116,84,114,105,97,110,103,108,101,77,101,115,104,83,104,97,112,101,49,57,112,114,111,99,101,115,115,65,108,108,84,114,105,97,110,103,108,101,115,69,80,49,56,98,116,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,82,75,57,98,116,86,101,99,116,111,114,51,83,52,95,69,49,54,70,105,108,116,101,114,101,100,67,97,108,108,98,97,99,107,0,0,0,224,81,0,0,232,68,0,0,136,67,0,0,0,0,0,0,0,0,0,0,152,69,0,0,227,0,0,0,228,0,0,0,8,0,0,0,0,0,0,0,50,50,83,112,104,101,114,101,84,114,105,97,110,103,108,101,68,101,116,101,99,116,111,114,0,0,0,0,0,0,0,0,224,81,0,0,120,69,0,0,160,52,0,0,0,0,0,0,51,48,98,116,65,99,116,105,118,97,116,105,110,103,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,0,0,0,0,224,81,0,0,168,69,0,0,176,50,0,0,0,0,0,0,0,0,0,0,32,70,0,0,229,0,0,0,230,0,0,0,9,0,0,0,4,0,0,0,91,0,0,0,0,0,0,0,50,54,98,116,66,111,120,66,111,120,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,224,81,0,0,0,70,0,0,208,69,0,0,0,0,0,0,0,0,0,0,96,70,0,0,231,0,0,0,232,0,0,0,10,0,0,0,0,0,0,0,49,54,98,116,66,111,120,66,111,120,68,101,116,101,99,116,111,114,0,0,0,0,0,0,224,81,0,0,72,70,0,0,160,52,0,0,0,0,0,0,0,0,0,0,176,70,0,0,233,0,0,0,234,0,0,0,11,0,0,0,5,0,0,0,92,0,0,0,0,0,0,0,50,56,98,116,67,111,109,112,111,117,110,100,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,224,81,0,0,144,70,0,0,208,69,0,0,0,0,0,0,0,0,0,0,8,71,0,0,235,0,0,0,236,0,0,0,28,0,0,0,93,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,50,50,98,116,67,111,109,112,111,117,110,100,76,101,97,102,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,0,224,81,0,0,232,70,0,0,64,35,0,0,0,0,0,0,0,0,0,0,96,71,0,0,237,0,0,0,238,0,0,0,12,0,0,0,6,0,0,0,94,0,0,0,0,0,0,0,51,54,98,116,67,111,109,112,111,117,110,100,67,111,109,112,111,117,110,100,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,224,81,0,0,56,71,0,0,208,69,0,0,0,0,0,0,0,0,0,0,192,71,0,0,239,0,0,0,240,0,0,0,64,0,0,0,95,0,0,0,5,0,0,0,16,0,0,0,17,0,0,0,0,0,0,0,51,48,98,116,67,111,109,112,111,117,110,100,67,111,109,112,111,117,110,100,76,101,97,102,67,97,108,108,98,97,99,107,0,0,0,0,0,0,0,0,224,81,0,0,152,71,0,0,64,35,0,0,0,0,0,0,49,52,98,116,67,111,110,99,97,118,101,83,104,97,112,101,0,0,0,0,0,0,0,0,224,81,0,0,208,71,0,0,216,27,0,0,0,0,0,0,0,0,0,0,88,72,0,0,241,0,0,0,242,0,0,0,13,0,0,0,7,0,0,0,96,0,0,0,0,0,0,0,0,0,0,0,136,72,0,0,243,0,0,0,244,0,0,0,60,0,0,0,0,0,0,0,51,51,98,116,67,111,110,118,101,120,67,111,110,99,97,118,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,0,224,81,0,0,48,72,0,0,208,69,0,0,0,0,0,0,50,52,98,116,67,111,110,118,101,120,84,114,105,97,110,103,108,101,67,97,108,108,98,97,99,107,0,0,0,0,0,0,224,81,0,0,104,72,0,0,88,67,0,0,0,0,0,0,0,0,0,0,80,73,0,0,245,0,0,0,246,0,0,0,61,0,0,0,0,0,0,0,90,78,51,51,98,116,67,111,110,118,101,120,67,111,110,99,97,118,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,50,49,99,97,108,99,117,108,97,116,101,84,105,109,101,79,102,73,109,112,97,99,116,69,80,49,55,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,83,49,95,82,75,49,54,98,116,68,105,115,112,97,116,99,104,101,114,73,110,102,111,80,49,54,98,116,77,97,110,105,102,111,108,100,82,101,115,117,108,116,69,51,49,76,111,99,97,108,84,114,105,97,110,103,108,101,83,112,104,101,114,101,67,97,115,116,67,97,108,108,98,97,99,107,0,0,0,224,81,0,0,176,72,0,0,88,67,0,0,0,0,0,0,0,0,0,0,240,73,0,0,247,0,0,0,248,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,184,73,0,0,249,0,0,0,250,0,0,0,14,0,0,0,8,0,0,0,97,0,0,0,0,0,0,0,50,51,98,116,67,111,110,118,101,120,67,111,110,118,101,120,65,108,103,111,114,105,116,104,109,0,0,0,0,0,0,0,224,81,0,0,152,73,0,0,208,69,0,0,0,0,0,0,78,50,51,98,116,67,111,110,118,101,120,67,111,110,118,101,120,65,108,103,111,114,105,116,104,109,49,48,67,114,101,97,116,101,70,117,110,99,69,0,224,81,0,0,200,73,0,0,232,46,0,0,0,0,0,0,0,0,0,0,64,74,0,0,251,0,0,0,252,0,0,0,26,0,0,0,27,0,0,0,7,0,0,0,0,0,0,0,50,52,98,116,80,101,114,116,117,114,98,101,100,67,111,110,116,97,99,116,82,101,115,117,108,116,0,0,0,0,0,0,224,81,0,0,32,74,0,0,240,52,0,0,0,0,0,0,0,0,0,0,0,75,0,0,253,0,0,0,254,0,0,0,65,0,0,0,66,0,0,0,8,0,0,0,0,0,0,0,90,78,50,51,98,116,67,111,110,118,101,120,67,111,110,118,101,120,65,108,103,111,114,105,116,104,109,49,54,112,114,111,99,101,115,115,67,111,108,108,105,115,105,111,110,69,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,83,50,95,82,75,49,54,98,116,68,105,115,112,97,116,99,104,101,114,73,110,102,111,80,49,54,98,116,77,97,110,105,102,111,108,100,82,101,115,117,108,116,69,50,49,98,116,87,105,116,104,111,117,116,77,97,114,103,105,110,82,101,115,117,108,116,95,48,0,0,224,81,0,0,112,74,0,0,80,40,0,0,0,0,0,0,0,0,0,0,184,75,0,0,255,0,0,0,0,1,0,0,67,0,0,0,68,0,0,0,9,0,0,0,0,0,0,0,90,78,50,51,98,116,67,111,110,118,101,120,67,111,110,118,101,120,65,108,103,111,114,105,116,104,109,49,54,112,114,111,99,101,115,115,67,111,108,108,105,115,105,111,110,69,80,75,50,52,98,116,67,111,108,108,105,115,105,111,110,79,98,106,101,99,116,87,114,97,112,112,101,114,83,50,95,82,75,49,54,98,116,68,105,115,112,97,116,99,104,101,114,73,110,102,111,80,49,54,98,116,77,97,110,105,102,111,108,100,82,101,115,117,108,116,69,49,51,98,116,68,117,109,109,121,82,101,115,117,108,116,0,0,0,0,224,81,0,0,48,75,0,0,80,40,0,0,0,0,0,0,0,0,0,0,16,76,0,0,1,1,0,0,2,1,0,0,15,0,0,0,9,0,0,0,98,0,0,0,0,0,0,0,51,49,98,116,67,111,110,118,101,120,80,108,97,110,101,67,111,108,108,105,115,105,111,110,65,108,103,111,114,105,116,104,109,0,0,0,0,0,0,0,224,81,0,0,232,75,0,0,176,50,0,0,0,0,0,0,0,0,0,0,72,76,0,0,3,1,0,0,4,1,0,0,49,56,98,116,67,111,110,118,101,120,80,111,108,121,104,101,100,114,111,110,0,0,0,0,184,81,0,0,48,76,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,76,0,0,5,1,0,0,6,1,0,0,29,0,0,0,30,0,0,0,88,0,0,0,0,0,0,0,50,51,98,116,72,97,115,104,101,100,83,105,109,112,108,101,80,97,105,114,67,97,99,104,101,0,0,0,0,0,0,0,184,81,0,0,168,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,98,116,73,110,116,73,110,100,101,120,68,97,116,97,0,0,98,116,83,104,111,114,116,73,110,116,73,110,100,101,120,84,114,105,112,108,101,116,68,97,116,97,0,0,0,0,0,0,98,116,67,104,97,114,73,110,100,101,120,84,114,105,112,108,101,116,68,97,116,97,0,0,98,116,86,101,99,116,111,114,51,70,108,111,97,116,68,97,116,97,0,0,0,0,0,0,98,116,86,101,99,116,111,114,51,68,111,117,98,108,101,68,97,116,97,0,0,0,0,0,98,116,77,101,115,104,80,97,114,116,68,97,116,97,0,0,98,116,83,116,114,105,100,105,110,103,77,101,115,104,73,110,116,101,114,102,97,99,101,68,97,116,97,0,0,0,0,0,50,51,98,116,83,116,114,105,100,105,110,103,77,101,115,104,73,110,116,101,114,102,97,99,101,0,0,0,0,0,0,0,184,81,0,0,144,77,0,0,0,0,0,0,32,78,0,0,7,1,0,0,8,1,0,0,56,0,0,0,1,0,0,0,2,0,0,0,86,0,0,0,87,0,0,0,83,0,0,0,99,0,0,0,100,0,0,0,84,0,0,0,62,0,0,0,63,0,0,0,85,0,0,0,27,0,0,0,0,0,0,0,50,54,98,116,84,114,105,97,110,103,108,101,73,110,100,101,120,86,101,114,116,101,120,65,114,114,97,121,0,0,0,0,224,81,0,0,0,78,0,0,176,77,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,82,111,111,116,0,0,0,0,72,78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,117,110,99,97,117,103,104,116,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,58,32,37,115,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,102,111,114,101,105,103,110,32,101,120,99,101,112,116,105,111,110,0,0,0,116,101,114,109,105,110,97,116,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,116,104,114,101,97,100,95,111,110,99,101,32,102,97,105,108,117,114,101,32,105,110,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,95,102,97,115,116,40,41,0,0,0,0,0,0,0,0,99,97,110,110,111,116,32,99,114,101,97,116,101,32,112,116,104,114,101,97,100,32,107,101,121,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,99,97,110,110,111,116,32,122,101,114,111,32,111,117,116,32,116,104,114,101,97,100,32,118,97,108,117,101,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,0,40,80,0,0,9,1,0,0,10,1,0,0,89],"i8",Y,c.GLOBAL_BASE+10240);Z([115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,0,83,116,57,98,97,100,95,97,108,108,111,99,0,0,0,0,224,81,0,0,24,80,0,0,176,80,0,0,0,0,0,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,114,101,116,117,114,110,101,100,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,116,104,114,101,119,32,97,110,32,101,120,99,101,112,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,116,57,101,120,99,101,112,116,105,111,110,0,0,0,0,184,81,0,0,160,80,0,0,83,116,57,116,121,112,101,95,105,110,102,111,0,0,0,0,184,81,0,0,184,80,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,0,224,81,0,0,208,80,0,0,200,80,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,224,81,0,0,8,81,0,0,248,80,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,57,95,95,112,111,105,110,116,101,114,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,112,98,97,115,101,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,224,81,0,0,104,81,0,0,248,80,0,0,0,0,0,0,224,81,0,0,64,81,0,0,144,81,0,0,0,0,0,0,0,0,0,0,48,81,0,0,11,1,0,0,12,1,0,0,13,1,0,0,14,1,0,0,31,0,0,0,4,0,0,0,16,0,0,0,62,0,0,0,0,0,0,0,40,82,0,0,11,1,0,0,15,1,0,0,13,1,0,0,14,1,0,0,31,0,0,0,5,0,0,0,17,0,0,0,63,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,224,81,0,0,0,82,0,0,48,81,0,0,0,0,0,0,0,0,0,0,136,82,0,0,11,1,0,0,16,1,0,0,13,1,0,0,14,1,0,0,31,0,0,0,6,0,0,0,18,0,0,0,64,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,224,81,0,0,96,82,0,0,48,81,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",Y,c.GLOBAL_BASE+20480);var An=c.alignMemory(Z(12,"i8",Q),8);R(An%8==0);var _n=un;e["_i64Subtract"]=_a;var Dn=on;var Pn=0;var Bn={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};var In={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||In.infos[e])return e;for(var t in In.infos){var n=In.infos[t];if(n.adjusted===e){return t}}return e},addRef:function(e){if(!e)return;var t=In.infos[e];t.refcount++},decRef:function(e){if(!e)return;var t=In.infos[e];R(t.refcount>0);t.refcount--;if(t.refcount===0){if(t.destructor){c.dynCall("vi",t.destructor,[e])}delete In.infos[e];___cxa_free_exception(e)}},clearRef:function(e){if(!e)return;var t=In.infos[e];t.refcount=0}};e["_memset"]=dd;var Xn=ln;e["_strlen"]=Si;var Vn=mn;var $n=undefined;var Jn=undefined;var er={};e["_i64Add"]=ph;var nr=1;var ir=bn;var ar=pn;var cr=cn;var mr=an;e["_memcpy"]=Zh;e["_memmove"]=kf;e["_malloc"]=br;e["_llvm_bswap_i32"]=Gp;var Tr=true;var Or=Z(1,"i32*",Q);Pn=c.staticAlloc(4);mt[Pn>>2]=0;Zn.ret=Z([0],"i8",Q);xt=Tt=c.alignMemory(Et);St=true;Nt=xt+At;Ct=kt=c.alignMemory(Nt);R(Ct<Ot,"TOTAL_MEMORY not big enough for stack");var Mr=Z([8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",G);var _r=Z([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",G);var Sn=Math.min;var wi=function(e,t,n){"use asm";function In(e){e=e|0;var t=0;t=c;c=c+e|0;c=c+15&-16;return t|0}function qn(){return c|0}function Rn(e){e=e|0;c=e}function Un(e,t){e=e|0;t=t|0;if((y|0)==0){y=e;b=t}}function zn(e){e=e|0;r[p>>0]=r[e>>0];r[p+1>>0]=r[e+1>>0];r[p+2>>0]=r[e+2>>0];r[p+3>>0]=r[e+3>>0]}function Wn(e){e=e|0;r[p>>0]=r[e>>0];r[p+1>>0]=r[e+1>>0];r[p+2>>0]=r[e+2>>0];r[p+3>>0]=r[e+3>>0];r[p+4>>0]=r[e+4>>0];r[p+5>>0]=r[e+5>>0];r[p+6>>0]=r[e+6>>0];r[p+7>>0]=r[e+7>>0]}function Xn(e){e=e|0;D=e}function Vn(){return D|0}function $n(e){e=e|0;return 52}function Jn(e,t,n,r){e=e|0;t=+t;n=+n;r=+r;var i=0,s=0,o=0;i=+$(+t);s=+$(+n);o=+$(+r);t=+J(+t);n=+J(+n);r=+J(+r);f[e>>2]=s*o;f[e+4>>2]=n*t*o-i*r;f[e+8>>2]=n*i*o+t*r;f[e+12>>2]=0;f[e+16>>2]=s*r;f[e+20>>2]=n*t*r+i*o;f[e+24>>2]=n*i*r-t*o;f[e+28>>2]=0;f[e+32>>2]=-n;f[e+36>>2]=s*t;f[e+40>>2]=s*i;f[e+44>>2]=0;return}function Kn(e,t){e=e|0;t=t|0;var n=0;n=c;Qn(e,t);c=n;return}function Qn(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,s=0,o=0,u=0,a=0,l=0;n=c;c=c+16|0;s=+f[e>>2];i=+f[e+20>>2];r=+f[e+40>>2];if(s+i+r>0){s=+X(+(s+i+r+1));f[n+12>>2]=s*.5;u=(+f[e+36>>2]- +f[e+24>>2])*(.5/s);f[n>>2]=u;r=(+f[e+8>>2]- +f[e+32>>2])*(.5/s);f[n+4>>2]=r;i=(+f[e+16>>2]- +f[e+4>>2])*(.5/s);f[n+8>>2]=i;s=s*.5;f[t>>2]=u;o=t+4|0;f[o>>2]=r;o=t+8|0;f[o>>2]=i;o=t+12|0;f[o>>2]=s;c=n;return}if(s<i)o=i<r?2:1;else o=s<r?2:0;l=((o+1|0)>>>0)%3|0;a=((o+2|0)>>>0)%3|0;r=+X(+(+f[e+(o<<4)+(o<<2)>>2]- +f[e+(l<<4)+(l<<2)>>2]- +f[e+(a<<4)+(a<<2)>>2]+1));f[n+(o<<2)>>2]=r*.5;f[n+12>>2]=(+f[e+(a<<4)+(l<<2)>>2]- +f[e+(l<<4)+(a<<2)>>2])*(.5/r);f[n+(l<<2)>>2]=(+f[e+(l<<4)+(o<<2)>>2]+ +f[e+(o<<4)+(l<<2)>>2])*(.5/r);f[n+(a<<2)>>2]=(+f[e+(a<<4)+(o<<2)>>2]+ +f[e+(o<<4)+(a<<2)>>2])*(.5/r);r=+f[n>>2];i=+f[n+4>>2];s=+f[n+8>>2];u=+f[n+12>>2];f[t>>2]=r;o=t+4|0;f[o>>2]=i;o=t+8|0;f[o>>2]=s;o=t+12|0;f[o>>2]=u;c=n;return}function Gn(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Yn(){var e=0,t=0,n=0;e=c;t=cM(8)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(8)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);n=t;s[n>>2]=0;s[n+4>>2]=0;i[t+4>>1]=1;i[t+6>>1]=-1;s[t>>2]=840;c=e;return t|0}function Zn(e,t,n,r,i,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;var f=0,l=0;l=c;f=+wD[s[(s[e>>2]|0)+12>>2]&1](e,t,n,r,i,o,u,a);c=l;return+f}function er(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function tr(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(95)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}jm(r,e,t,1);c=n;return r|0}function nr(e){e=e|0;hn(e|0)|0;BC()}function rr(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;s[5004]=(s[5004]|0)+1;i=cM(95)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}jm(i,e,t,n);c=r;return i|0}function ir(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function sr(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function or(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function ur(){var e=0,t=0;e=c;t=cM(196)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(196)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);LL(t,0);c=e;return t|0}function ar(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function fr(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function lr(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(215)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}s[t>>2]=4024;r[t+20>>0]=1;s[t+16>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;r[t+40>>0]=1;s[t+36>>2]=0;s[t+28>>2]=0;s[t+32>>2]=0;r[t+60>>0]=1;s[t+56>>2]=0;s[t+48>>2]=0;s[t+52>>2]=0;r[t+80>>0]=1;s[t+76>>2]=0;s[t+68>>2]=0;s[t+72>>2]=0;r[t+100>>0]=1;s[t+96>>2]=0;s[t+88>>2]=0;s[t+92>>2]=0;r[t+120>>0]=1;s[t+116>>2]=0;s[t+108>>2]=0;s[t+112>>2]=0;r[t+140>>0]=1;s[t+136>>2]=0;s[t+128>>2]=0;s[t+132>>2]=0;r[t+160>>0]=1;s[t+156>>2]=0;s[t+148>>2]=0;s[t+152>>2]=0;r[t+180>>0]=1;s[t+176>>2]=0;s[t+168>>2]=0;s[t+172>>2]=0;s[t+192>>2]=0;c=e;return t|0}function cr(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function hr(e){e=e|0;return+(+f[e>>2])}function pr(e,t){e=e|0;t=+t;f[e>>2]=t;return}function dr(e){e=e|0;return s[e+4>>2]|0}function vr(e,t){e=e|0;t=t|0;s[e+4>>2]=t;return}function mr(e){e=e|0;return s[e+8>>2]|0}function gr(e,t){e=e|0;t=t|0;s[e+8>>2]=t;return}function yr(e){e=e|0;return+(+f[e+12>>2])}function br(e,t){e=e|0;t=+t;f[e+12>>2]=t;return}function wr(e){e=e|0;return(r[e+16>>0]&1)!=0|0}function Er(e,t){e=e|0;t=t|0;r[e+16>>0]=t&1;return}function Sr(e){e=e|0;return(r[e+24>>0]&1)!=0|0}function xr(e,t){e=e|0;t=t|0;r[e+24>>0]=t&1;return}function Tr(e){e=e|0;return(r[e+25>>0]&1)!=0|0}function Nr(e,t){e=e|0;t=t|0;r[e+25>>0]=t&1;return}function Cr(e){e=e|0;return(r[e+26>>0]&1)!=0|0}function kr(e,t){e=e|0;t=t|0;r[e+26>>0]=t&1;return}function Lr(e){e=e|0;return+(+f[e+28>>2])}function Ar(e,t){e=e|0;t=+t;f[e+28>>2]=t;return}function Or(e){e=e|0;return(r[e+32>>0]&1)!=0|0}function Mr(e,t){e=e|0;t=t|0;r[e+32>>0]=t&1;return}function _r(e){e=e|0;return+(+f[e+36>>2])}function Dr(e,t){e=e|0;t=+t;f[e+36>>2]=t;return}function Pr(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Hr(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(75)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;s[r>>2]=6296;s[r+4>>2]=10;s[r+52>>2]=1;f[r+28>>2]=e;f[r+32>>2]=t*.5;f[r+36>>2]=e;f[r+40>>2]=0;c=n;return r|0}function Br(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function jr(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Fr(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ir(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function qr(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(135)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}Ov(r,e,t,16384,0,0);c=n;return r|0}function Rr(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;s[5004]=(s[5004]|0)+1;i=cM(135)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}Ov(i,e,t,n&65535,0,0);c=r;return i|0}function Ur(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;i=c;s[5004]=(s[5004]|0)+1;o=cM(135)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}Ov(o,e,t,n&65535,r,0);c=i;return o|0}function zr(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0;o=c;s[5004]=(s[5004]|0)+1;u=cM(135)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}Ov(u,e,t,n&65535,r,i);c=o;return u|0}function Wr(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Xr(){var e=0,t=0,n=0,i=0,o=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(307)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}f[t+164>>2]=1;f[t+168>>2]=1;f[t+172>>2]=1;f[t+176>>2]=0;s[t+180>>2]=0;f[t+184>>2]=0xde0b6b000000000;o=t+188|0;n=t+204|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;s[n>>2]=1;s[t+208>>2]=-1;s[t+212>>2]=-1;s[t+216>>2]=1;f[t+220>>2]=0;f[t+224>>2]=.5;f[t+228>>2]=0;f[t+232>>2]=0;n=t+236|0;s[t+240>>2]=0;f[t+244>>2]=1;o=t+248|0;i=t+4|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=t+8|0;o=t+24|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;f[o>>2]=1;o=t+28|0;i=t+44|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=t+48|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;r[t+280>>0]=1;s[t+276>>2]=0;s[t+268>>2]=0;s[t+272>>2]=0;s[n>>2]=4;s[t>>2]=13056;s[5004]=(s[5004]|0)+1;n=cM(95)|0;if((n|0)==0){i=0;o=t+284|0;s[o>>2]=i;c=e;return t|0}s[(n+19&-16)+ -4>>2]=n;if((n+19&-16|0)==0){i=0;o=t+284|0;s[o>>2]=i;c=e;return t|0}kO(n+19&-16);i=n+19&-16;o=t+284|0;s[o>>2]=i;c=e;return t|0}function Vr(e){e=e|0;return s[e+192>>2]|0}function $r(e,t){e=e|0;t=+t;f[e+184>>2]=t;return}function Jr(e,t){e=e|0;t=t|0;var n=0;n=c;if(((s[e+216>>2]|0)+ -4|0)>>>0<2){c=n;return}s[e+216>>2]=t;c=n;return}function Kr(e,t){e=e|0;t=t|0;s[e+216>>2]=t;return}function Qr(e){e=e|0;var t=0;t=c;if((s[e+204>>2]&3|0)!=0){c=t;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=t;return}function Gr(e,t){e=e|0;t=t|0;var n=0;n=c;if(!t?(s[e+204>>2]&3|0)!=0:0){c=n;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=n;return}function Yr(e){e=e|0;e=s[e+216>>2]|0;return((e|0)==2?0:(e|0)!=5)|0}function Zr(e){e=e|0;return(s[e+204>>2]&2|0)!=0|0}function ei(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+228>>2]=t;return}function ti(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+224>>2]=t;return}function ni(e){e=e|0;return e+4|0}function ri(e){e=e|0;return s[e+204>>2]|0}function ii(e,t){e=e|0;t=t|0;s[e+204>>2]=t;return}function si(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];c=n;return}function oi(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function ui(e){e=e|0;return s[e+268>>2]|0}function ai(e,t){e=e|0;t=t|0;return s[(s[e+276>>2]|0)+(t<<2)>>2]|0}function fi(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+8>>2]&511](e);c=t;return}function li(e,t,n){e=+e;t=t|0;n=n|0;var i=0,o=0,u=0,a=0;i=c;o=cM(140)|0;e:do if((o|0)==0){while(1){o=s[5158]|0;s[5158]=o+0;if((o|0)==0)break;XD[o&3]();o=cM(140)|0;if((o|0)!=0)break e}a=On(4)|0;s[a>>2]=20472;Ln(a|0,20520,265)}while(0);f[o>>2]=e;s[o+4>>2]=t;t=o+8|0;u=o+56|0;a=t;do a=a+16|0;while((a|0)!=(u|0));s[o+72>>2]=n;u=o+76|0;a=o+100|0;s[u+0>>2]=0;s[u+4>>2]=0;s[u+8>>2]=0;s[u+12>>2]=0;s[u+16>>2]=0;s[u+20>>2]=0;f[a>>2]=.5;f[o+104>>2]=0;f[o+108>>2]=0;f[o+112>>2]=.800000011920929;f[o+116>>2]=1;r[o+120>>0]=0;f[o+124>>2]=.004999999888241291;f[o+128>>2]=.009999999776482582;f[o+132>>2]=.009999999776482582;f[o+136>>2]=.009999999776482582;yp(t);c=i;return o|0}function ci(e,t,n,i){e=+e;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0;o=c;u=cM(140)|0;e:do if((u|0)==0){while(1){u=s[5158]|0;s[5158]=u+0;if((u|0)==0)break;XD[u&3]();u=cM(140)|0;if((u|0)!=0)break e}l=On(4)|0;s[l>>2]=20472;Ln(l|0,20520,265)}while(0);f[u>>2]=e;s[u+4>>2]=t;t=u+8|0;a=u+56|0;l=t;do l=l+16|0;while((l|0)!=(a|0));s[u+72>>2]=n;l=u+76|0;s[l+0>>2]=s[i+0>>2];s[l+4>>2]=s[i+4>>2];s[l+8>>2]=s[i+8>>2];s[l+12>>2]=s[i+12>>2];f[u+92>>2]=0;f[u+96>>2]=0;f[u+100>>2]=.5;f[u+104>>2]=0;f[u+108>>2]=0;f[u+112>>2]=.800000011920929;f[u+116>>2]=1;r[u+120>>0]=0;f[u+124>>2]=.004999999888241291;f[u+128>>2]=.009999999776482582;f[u+132>>2]=.009999999776482582;f[u+136>>2]=.009999999776482582;yp(t);c=o;return u|0}function hi(e){e=e|0;return+(+f[e+92>>2])}function pi(e,t){e=e|0;t=+t;f[e+92>>2]=t;return}function di(e){e=e|0;return+(+f[e+96>>2])}function vi(e,t){e=e|0;t=+t;f[e+96>>2]=t;return}function mi(e){e=e|0;return+(+f[e+100>>2])}function gi(e,t){e=e|0;t=+t;f[e+100>>2]=t;return}function yi(e){e=e|0;return+(+f[e+104>>2])}function bi(e,t){e=e|0;t=+t;f[e+104>>2]=t;return}function wi(e){e=e|0;return+(+f[e+108>>2])}function Ei(e,t){e=e|0;t=+t;f[e+108>>2]=t;return}function Si(e){e=e|0;return+(+f[e+112>>2])}function xi(e,t){e=e|0;t=+t;f[e+112>>2]=t;return}function Ti(e){e=e|0;return+(+f[e+116>>2])}function Ni(e,t){e=e|0;t=+t;f[e+116>>2]=t;return}function Ci(e){e=e|0;return(r[e+120>>0]&1)!=0|0}function ki(e,t){e=e|0;t=t|0;r[e+120>>0]=t&1;return}function Li(e){e=e|0;return+(+f[e+124>>2])}function Ai(e,t){e=e|0;t=+t;f[e+124>>2]=t;return}function Oi(e){e=e|0;return+(+f[e+128>>2])}function Mi(e,t){e=e|0;t=+t;f[e+128>>2]=t;return}function _i(e){e=e|0;return+(+f[e+132>>2])}function Di(e,t){e=e|0;t=+t;f[e+132>>2]=t;return}function Pi(e){e=e|0;return+(+f[e+136>>2])}function Hi(e,t){e=e|0;t=+t;f[e+136>>2]=t;return}function Bi(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function ji(e){e=e|0;return e+48|0}function Fi(e){e=e|0;return e+32|0}function Ii(e){e=e|0;return e|0}function qi(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+0>>2]=s[t+0>>2];s[e+4>>2]=s[t+4>>2];s[e+8>>2]=s[t+8>>2];s[e+12>>2]=s[t+12>>2];c=n;return}function Ri(e){e=e|0;return e+16|0}function Ui(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+16>>2]=s[t+0>>2];s[e+20>>2]=s[t+4>>2];s[e+24>>2]=s[t+8>>2];s[e+28>>2]=s[t+12>>2];c=n;return}function zi(e){e=e|0;return e+32|0}function Wi(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+32>>2]=s[t+0>>2];s[e+36>>2]=s[t+4>>2];s[e+40>>2]=s[t+8>>2];s[e+44>>2]=s[t+12>>2];c=n;return}function Xi(e){e=e|0;return e+48|0}function Vi(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+48>>2]=s[t+0>>2];s[e+52>>2]=s[t+4>>2];s[e+56>>2]=s[t+8>>2];s[e+60>>2]=s[t+12>>2];c=n;return}function $i(e){e=e|0;return e+64|0}function Ji(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+64>>2]=s[t+0>>2];s[e+68>>2]=s[t+4>>2];s[e+72>>2]=s[t+8>>2];s[e+76>>2]=s[t+12>>2];c=n;return}function Ki(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Qi(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;i=c;c=c+96|0;s[5004]=(s[5004]|0)+1;o=cM(1331)|0;if((o|0)==0)a=0;else{s[(o+19&-16)+ -4>>2]=o;a=o+19&-16}if((r[5024]|0)==0?(Zt(5024)|0)!=0:0){s[i+80>>2]=0;s[i+84>>2]=0;s[i+88>>2]=0;s[i+92>>2]=0;aS(4408,0,0,0,i+80|0);sn(5024)}s[i+64>>2]=0;s[i+68>>2]=0;s[i+72>>2]=0;s[i+76>>2]=0;fS(4408,0,i+64|0);s[a+4>>2]=6;s[a+8>>2]=-1;s[a+12>>2]=-1;f[a+16>>2]=3.4028234663852886e38;r[a+20>>0]=1;r[a+21>>0]=0;s[a+24>>2]=-1;u=a+28|0;s[u>>2]=4408;o=a+32|0;s[o>>2]=e;f[a+36>>2]=0;f[a+40>>2]=.30000001192092896;s[a+44>>2]=0;s[a>>2]=2368;l=a+112|0;s[l+0>>2]=s[t+0>>2];s[l+4>>2]=s[t+4>>2];s[l+8>>2]=s[t+8>>2];s[l+12>>2]=s[t+12>>2];d=a+128|0;s[d+0>>2]=s[t+16>>2];s[d+4>>2]=s[t+20>>2];s[d+8>>2]=s[t+24>>2];s[d+12>>2]=s[t+28>>2];d=a+144|0;s[d+0>>2]=s[t+32>>2];s[d+4>>2]=s[t+36>>2];s[d+8>>2]=s[t+40>>2];s[d+12>>2]=s[t+44>>2];d=a+160|0;s[d+0>>2]=s[t+48>>2];s[d+4>>2]=s[t+52>>2];s[d+8>>2]=s[t+56>>2];s[d+12>>2]=s[t+60>>2];d=a+48|0;v=a+740|0;h=a+756|0;t=a+680|0;p=t+48|0;do{s[t>>2]=0;t=t+4|0}while((t|0)<(p|0));s[v+0>>2]=0;s[v+4>>2]=0;s[v+8>>2]=0;s[v+12>>2]=0;f[h>>2]=.20000000298023224;f[a+760>>2]=.20000000298023224;f[a+764>>2]=.20000000298023224;p=a+768|0;v=a+728|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;f[v>>2]=.699999988079071;f[a+732>>2]=1;f[a+736>>2]=.5;r[a+788>>0]=0;f[a+792>>2]=0;f[a+808>>2]=0;r[a+789>>0]=0;f[a+796>>2]=0;f[a+812>>2]=0;r[a+790>>0]=0;f[a+800>>2]=0;f[a+816>>2]=0;f[a+928>>2]=0;f[a+876>>2]=0;f[a+880>>2]=.10000000149011612;f[a+884>>2]=300;f[a+868>>2]=1;f[a+872>>2]=-1;f[a+896>>2]=0;f[a+900>>2]=.20000000298023224;f[a+904>>2]=0;f[a+908>>2]=0;f[a+888>>2]=1;f[a+892>>2]=.5;s[a+924>>2]=0;f[a+916>>2]=0;r[a+912>>0]=0;f[a+992>>2]=0;f[a+940>>2]=0;f[a+944>>2]=.10000000149011612;f[a+948>>2]=300;f[a+932>>2]=1;f[a+936>>2]=-1;f[a+960>>2]=0;f[a+964>>2]=.20000000298023224;f[a+968>>2]=0;f[a+972>>2]=0;f[a+952>>2]=1;f[a+956>>2]=.5;s[a+988>>2]=0;f[a+980>>2]=0;r[a+976>>0]=0;f[a+1056>>2]=0;f[a+1004>>2]=0;f[a+1008>>2]=.10000000149011612;f[a+1012>>2]=300;f[a+996>>2]=1;f[a+1e3>>2]=-1;f[a+1024>>2]=0;f[a+1028>>2]=.20000000298023224;f[a+1032>>2]=0;f[a+1036>>2]=0;f[a+1016>>2]=1;f[a+1020>>2]=.5;s[a+1052>>2]=0;f[a+1044>>2]=0;r[a+1040>>0]=0;r[a+1300>>0]=n&1;r[a+1301>>0]=1;s[a+1304>>2]=0;r[a+1308>>0]=0;bd(i,e+4|0,l);s[d+0>>2]=s[i+0>>2];s[d+4>>2]=s[i+4>>2];s[d+8>>2]=s[i+8>>2];s[d+12>>2]=s[i+12>>2];v=a+64|0;s[v+0>>2]=s[i+16>>2];s[v+4>>2]=s[i+20>>2];s[v+8>>2]=s[i+24>>2];s[v+12>>2]=s[i+28>>2];v=a+80|0;s[v+0>>2]=s[i+32>>2];s[v+4>>2]=s[i+36>>2];s[v+8>>2]=s[i+40>>2];s[v+12>>2]=s[i+44>>2];v=a+96|0;s[v+0>>2]=s[i+48>>2];s[v+4>>2]=s[i+52>>2];s[v+8>>2]=s[i+56>>2];s[v+12>>2]=s[i+60>>2];zw(a,(s[u>>2]|0)+4|0,(s[o>>2]|0)+4|0);c=i;return a|0}function Gi(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0;u=c;s[5004]=(s[5004]|0)+1;a=cM(1331)|0;if((a|0)==0)l=0;else{s[(a+19&-16)+ -4>>2]=a;l=a+19&-16}s[l+4>>2]=6;s[l+8>>2]=-1;s[l+12>>2]=-1;f[l+16>>2]=3.4028234663852886e38;r[l+20>>0]=1;r[l+21>>0]=0;s[l+24>>2]=-1;a=l+28|0;s[a>>2]=e;e=l+32|0;s[e>>2]=t;f[l+36>>2]=0;f[l+40>>2]=.30000001192092896;s[l+44>>2]=0;s[l>>2]=2368;h=l+48|0;s[h+0>>2]=s[n+0>>2];s[h+4>>2]=s[n+4>>2];s[h+8>>2]=s[n+8>>2];s[h+12>>2]=s[n+12>>2];h=l+64|0;s[h+0>>2]=s[n+16>>2];s[h+4>>2]=s[n+20>>2];s[h+8>>2]=s[n+24>>2];s[h+12>>2]=s[n+28>>2];h=l+80|0;s[h+0>>2]=s[n+32>>2];s[h+4>>2]=s[n+36>>2];s[h+8>>2]=s[n+40>>2];s[h+12>>2]=s[n+44>>2];h=l+96|0;s[h+0>>2]=s[n+48>>2];s[h+4>>2]=s[n+52>>2];s[h+8>>2]=s[n+56>>2];s[h+12>>2]=s[n+60>>2];n=l+112|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];n=l+128|0;s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];n=l+144|0;s[n+0>>2]=s[i+32>>2];s[n+4>>2]=s[i+36>>2];s[n+8>>2]=s[i+40>>2];s[n+12>>2]=s[i+44>>2];n=l+160|0;s[n+0>>2]=s[i+48>>2];s[n+4>>2]=s[i+52>>2];s[n+8>>2]=s[i+56>>2];s[n+12>>2]=s[i+60>>2];n=l+740|0;i=l+756|0;h=l+680|0;t=h+48|0;do{s[h>>2]=0;h=h+4|0}while((h|0)<(t|0));s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;f[i>>2]=.20000000298023224;f[l+760>>2]=.20000000298023224;f[l+764>>2]=.20000000298023224;i=l+768|0;h=l+728|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;f[h>>2]=.699999988079071;f[l+732>>2]=1;f[l+736>>2]=.5;r[l+788>>0]=0;f[l+792>>2]=0;f[l+808>>2]=0;r[l+789>>0]=0;f[l+796>>2]=0;f[l+812>>2]=0;r[l+790>>0]=0;f[l+800>>2]=0;f[l+816>>2]=0;f[l+928>>2]=0;f[l+876>>2]=0;f[l+880>>2]=.10000000149011612;f[l+884>>2]=300;f[l+868>>2]=1;f[l+872>>2]=-1;f[l+896>>2]=0;f[l+900>>2]=.20000000298023224;f[l+904>>2]=0;f[l+908>>2]=0;f[l+888>>2]=1;f[l+892>>2]=.5;s[l+924>>2]=0;f[l+916>>2]=0;r[l+912>>0]=0;f[l+992>>2]=0;f[l+940>>2]=0;f[l+944>>2]=.10000000149011612;f[l+948>>2]=300;f[l+932>>2]=1;f[l+936>>2]=-1;f[l+960>>2]=0;f[l+964>>2]=.20000000298023224;f[l+968>>2]=0;f[l+972>>2]=0;f[l+952>>2]=1;f[l+956>>2]=.5;s[l+988>>2]=0;f[l+980>>2]=0;r[l+976>>0]=0;f[l+1056>>2]=0;f[l+1004>>2]=0;f[l+1008>>2]=.10000000149011612;f[l+1012>>2]=300;f[l+996>>2]=1;f[l+1e3>>2]=-1;f[l+1024>>2]=0;f[l+1028>>2]=.20000000298023224;f[l+1032>>2]=0;f[l+1036>>2]=0;f[l+1016>>2]=1;f[l+1020>>2]=.5;s[l+1052>>2]=0;f[l+1044>>2]=0;r[l+1040>>0]=0;r[l+1300>>0]=o&1;r[l+1301>>0]=1;s[l+1304>>2]=0;r[l+1308>>0]=0;zw(l,(s[a>>2]|0)+4|0,(s[e>>2]|0)+4|0);c=u;return l|0}function Yi(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Zi(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function es(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function ts(e){e=e|0;return s[e+192>>2]|0}function ns(e,t){e=e|0;t=+t;f[e+184>>2]=t;return}function rs(e,t){e=e|0;t=t|0;var n=0;n=c;if(((s[e+216>>2]|0)+ -4|0)>>>0<2){c=n;return}s[e+216>>2]=t;c=n;return}function is(e,t){e=e|0;t=t|0;s[e+216>>2]=t;return}function ss(e){e=e|0;var t=0;t=c;if((s[e+204>>2]&3|0)!=0){c=t;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=t;return}function os(e,t){e=e|0;t=t|0;var n=0;n=c;if(!t?(s[e+204>>2]&3|0)!=0:0){c=n;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=n;return}function us(e){e=e|0;e=s[e+216>>2]|0;return((e|0)==2?0:(e|0)!=5)|0}function as(e){e=e|0;return(s[e+204>>2]&2|0)!=0|0}function fs(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+228>>2]=t;return}function ls(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+224>>2]=t;return}function cs(e){e=e|0;return e+4|0}function hs(e){e=e|0;return s[e+204>>2]|0}function ps(e,t){e=e|0;t=t|0;s[e+204>>2]=t;return}function ds(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];c=n;return}function vs(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function ms(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+8>>2]&511](e);c=t;return}function gs(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0;i=c;s[5004]=(s[5004]|0)+1;o=cM(343)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}r[o+20>>0]=1;s[o+16>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;s[o+24>>2]=e;f[o+28>>2]=0;s[o+32>>2]=0;s[o+36>>2]=1;f[o+40>>2]=1;r[o+44>>0]=1;s[o+48>>2]=0;r[o+52>>0]=0;r[o+53>>0]=1;r[o+54>>0]=1;f[o+56>>2]=.03999999910593033;r[o+60>>0]=0;f[o+64>>2]=0;s[o+68>>2]=t;s[o+72>>2]=0;r[o+76>>0]=1;s[o+80>>2]=0;s[o+84>>2]=0;s[o+88>>2]=0;f[o+92>>2]=.6000000238418579;f[o+96>>2]=1;f[o+100>>2]=.30000001192092896;f[o+104>>2]=.01666666753590107;f[o+108>>2]=0;f[o+116>>2]=20;s[o+112>>2]=10;f[o+124>>2]=.20000000298023224;f[o+128>>2]=.800000011920929;f[o+132>>2]=0;f[o+120>>2]=1;s[o+136>>2]=1;f[o+140>>2]=-.03999999910593033;f[o+144>>2]=.10000000149011612;f[o+148>>2]=0;f[o+152>>2]=.8500000238418579;s[o+156>>2]=260;s[o+160>>2]=2;s[o+164>>2]=128;f[o+168>>2]=100;f[o+172>>2]=1.0000000150474662e30;s[o>>2]=1392;r[o+192>>0]=1;s[o+188>>2]=0;s[o+180>>2]=0;s[o+184>>2]=0;t=o+196|0;s[t>>2]=0;u=o+200|0;s[u>>2]=n;r[o+224>>0]=1;s[o+220>>2]=0;s[o+212>>2]=0;s[o+216>>2]=0;r[o+244>>0]=1;s[o+240>>2]=0;s[o+232>>2]=0;s[o+236>>2]=0;f[o+248>>2]=0;f[o+252>>2]=-10;h=o+256|0;r[o+274>>0]=0;r[o+275>>0]=0;l=o+292|0;s[h+0>>2]=0;s[h+4>>2]=0;s[h+8>>2]=0;s[h+12>>2]=0;r[l>>0]=1;s[o+288>>2]=0;s[o+280>>2]=0;s[o+284>>2]=0;s[o+296>>2]=0;r[o+300>>0]=1;r[o+320>>0]=1;s[o+316>>2]=0;s[o+308>>2]=0;s[o+312>>2]=0;if((n|0)==0){s[5004]=(s[5004]|0)+1;n=cM(215)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[n>>2]=4024;r[n+20>>0]=1;s[n+16>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;r[n+40>>0]=1;s[n+36>>2]=0;s[n+28>>2]=0;s[n+32>>2]=0;r[n+60>>0]=1;s[n+56>>2]=0;s[n+48>>2]=0;s[n+52>>2]=0;r[n+80>>0]=1;s[n+76>>2]=0;s[n+68>>2]=0;s[n+72>>2]=0;r[n+100>>0]=1;s[n+96>>2]=0;s[n+88>>2]=0;s[n+92>>2]=0;r[n+120>>0]=1;s[n+116>>2]=0;s[n+108>>2]=0;s[n+112>>2]=0;r[n+140>>0]=1;s[n+136>>2]=0;s[n+128>>2]=0;s[n+132>>2]=0;r[n+160>>0]=1;s[n+156>>2]=0;s[n+148>>2]=0;s[n+152>>2]=0;r[n+180>>0]=1;s[n+176>>2]=0;s[n+168>>2]=0;s[n+172>>2]=0;s[n+192>>2]=0;s[u>>2]=n;r[o+273>>0]=1}else r[o+273>>0]=0;s[5004]=(s[5004]|0)+1;n=cM(87)|0;if((n|0)!=0?(a=n+19&-16,s[a+ -4>>2]=n,(n+19&-16|0)!=0):0){s[(n+19&-16)>>2]=16568;r[a+20>>0]=1;s[a+16>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;r[a+40>>0]=1;s[a+36>>2]=0;s[a+28>>2]=0;s[a+32>>2]=0;r[a+60>>0]=1;s[a+56>>2]=0;s[a+48>>2]=0;s[a+52>>2]=0;r[a+64>>0]=1;a=n+19&-16}else a=0;s[o+204>>2]=a;r[o+272>>0]=1;s[5004]=(s[5004]|0)+1;a=cM(107)|0;if((a|0)==0){h=0;s[t>>2]=h;c=i;return o|0}n=a+19&-16;s[n+ -4>>2]=a;if((a+19&-16|0)==0){h=0;s[t>>2]=h;c=i;return o|0}h=s[u>>2]|0;s[(a+19&-16)>>2]=2240;s[n+4>>2]=0;s[n+8>>2]=h;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=e;r[n+44>>0]=1;s[n+40>>2]=0;s[n+32>>2]=0;s[n+36>>2]=0;r[n+64>>0]=1;s[n+60>>2]=0;s[n+52>>2]=0;s[n+56>>2]=0;r[n+84>>0]=1;s[n+80>>2]=0;s[n+72>>2]=0;s[n+76>>2]=0;h=a+19&-16;s[t>>2]=h;c=i;return o|0}function ys(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+72>>2]&127](e,t);c=n;return}function bs(e){e=e|0;var t=0;t=c;c=c+16|0;if((r[24]|0)==0?(Zt(24)|0)!=0:0)sn(24);hD[s[(s[e>>2]|0)+76>>2]&127](t,e);s[2]=s[t+0>>2];s[3]=s[t+4>>2];s[4]=s[t+8>>2];s[5]=s[t+12>>2];c=t;return 8}function ws(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+84>>2]&127](e,t);c=n;return}function Es(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+88>>2]&127](e,t,n,r);c=i;return}function Ss(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+92>>2]&127](e,t);c=n;return}function xs(e,t){e=e|0;t=t|0;var n=0;n=c;WD[s[(s[e>>2]|0)+56>>2]&127](e,t,0);c=n;return}function Ts(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;WD[s[(s[e>>2]|0)+56>>2]&127](e,t,n);c=r;return}function Ns(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+60>>2]&127](e,t);c=n;return}function Cs(e,t){e=e|0;t=+t;var n=0;n=c;e=$D[s[(s[e>>2]|0)+52>>2]&1](e,t,1,.01666666753590107)|0;c=n;return e|0}function ks(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;e=$D[s[(s[e>>2]|0)+52>>2]&1](e,t,n,.01666666753590107)|0;c=r;return e|0}function Ls(e,t,n,r){e=e|0;t=+t;n=n|0;r=+r;var i=0;i=c;e=$D[s[(s[e>>2]|0)+52>>2]&1](e,t,n,r)|0;c=i;return e|0}function As(e){e=e|0;return s[e+24>>2]|0}function Os(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+32>>2]&127](e,t,n,r);c=i;return}function Ms(e){e=e|0;var t=0;t=c;e=s[e+68>>2]|0;e=dD[s[(s[e>>2]|0)+36>>2]&127](e)|0;c=t;return e|0}function _s(e){e=e|0;return e+28|0}function Ds(e,t){e=e|0;t=t|0;var n=0;n=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,2,-3);c=n;return}function Ps(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,-3);c=r;return}function Hs(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,r);c=i;return}function Bs(e){e=e|0;return s[e+68>>2]|0}function js(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;var o=0;o=c;yy(e,t,n,r,i,s);c=o;return}function Fs(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;wy(e,t,n,r);c=i;return}function Is(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+64>>2]&127](e,t);c=n;return}function qs(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Rs(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(115)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[n+8>>2]=0;f[n+12>>2]=1;f[n+16>>2]=1;f[n+20>>2]=1;f[n+24>>2]=0;f[n+44>>2]=.03999999910593033;s[n+52>>2]=0;f[n+56>>2]=1;f[n+60>>2]=1;f[n+64>>2]=1;f[n+68>>2]=0;f[n+72>>2]=-1;f[n+76>>2]=-1;f[n+80>>2]=-1;f[n+84>>2]=0;r[n+88>>0]=0;s[n>>2]=10656;s[n+92>>2]=e;s[n+4>>2]=3;_S(n);c=t;return n|0}function Us(e,t){e=e|0;t=t|0;var n=0,i=0;n=c;s[5004]=(s[5004]|0)+1;i=cM(115)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}s[i+8>>2]=0;f[i+12>>2]=1;f[i+16>>2]=1;f[i+20>>2]=1;f[i+24>>2]=0;f[i+44>>2]=.03999999910593033;s[i+52>>2]=0;f[i+56>>2]=1;f[i+60>>2]=1;f[i+64>>2]=1;f[i+68>>2]=0;f[i+72>>2]=-1;f[i+76>>2]=-1;f[i+80>>2]=-1;f[i+84>>2]=0;r[i+88>>0]=0;s[i>>2]=10656;s[i+92>>2]=e;s[i+4>>2]=3;if(!t){c=n;return i|0}_S(i);c=n;return i|0}function zs(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Ws(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Xs(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Vs(e){e=e|0;return+f[e+4>>2]<1|0}function $s(e){e=e|0;return i[e+8>>1]|0}function Js(e,t){e=e|0;t=t|0;i[e+8>>1]=t;return}function Ks(e){e=e|0;return i[e+10>>1]|0}function Qs(e,t){e=e|0;t=t|0;i[e+10>>1]=t;return}function Gs(e){e=e|0;return+(+f[e+4>>2])}function Ys(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function Zs(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function eo(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;n=c;s[5004]=(s[5004]|0)+1;i=cM(379)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}Lv(i,3,e);s[i>>2]=2984;p=i+300|0;s[p+0>>2]=s[t+0>>2];s[p+4>>2]=s[t+4>>2];s[p+8>>2]=s[t+8>>2];s[p+12>>2]=s[t+12>>2];h=+f[t>>2];l=+f[t+4>>2];a=+f[t+8>>2];u=h*+f[e+20>>2]+l*+f[e+24>>2]+a*+f[e+28>>2]+ +f[e+56>>2];o=h*+f[e+36>>2]+l*+f[e+40>>2]+a*+f[e+44>>2]+ +f[e+60>>2];f[i+316>>2]=h*+f[e+4>>2]+l*+f[e+8>>2]+a*+f[e+12>>2]+ +f[e+52>>2];f[i+320>>2]=u;f[i+324>>2]=o;f[i+328>>2]=0;s[i+332>>2]=0;r[i+344>>0]=0;f[i+348>>2]=.30000001192092896;f[i+352>>2]=1;f[i+356>>2]=0;c=n;return i|0}function to(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0;o=c;s[5004]=(s[5004]|0)+1;u=cM(379)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}s[u+4>>2]=3;s[u+8>>2]=-1;s[u+12>>2]=-1;f[u+16>>2]=3.4028234663852886e38;r[u+20>>0]=1;r[u+21>>0]=0;s[u+24>>2]=-1;s[u+28>>2]=e;s[u+32>>2]=t;f[u+36>>2]=0;f[u+40>>2]=.30000001192092896;s[u+44>>2]=0;s[u>>2]=2984;t=u+300|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];n=u+316|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];s[u+332>>2]=0;r[u+344>>0]=0;f[u+348>>2]=.30000001192092896;f[u+352>>2]=1;f[u+356>>2]=0;c=o;return u|0}function no(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+300>>2]=s[t+0>>2];s[e+304>>2]=s[t+4>>2];s[e+308>>2]=s[t+8>>2];s[e+312>>2]=s[t+12>>2];c=n;return}function ro(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+316>>2]=s[t+0>>2];s[e+320>>2]=s[t+4>>2];s[e+324>>2]=s[t+8>>2];s[e+328>>2]=s[t+12>>2];c=n;return}function io(e){e=e|0;return e+300|0}function so(e){e=e|0;return e+316|0}function oo(e,t){e=e|0;t=t|0;r[e+21>>0]=t&1;return}function uo(e){e=e|0;return e+348|0}function ao(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+348>>2]=s[t+0>>2];s[e+352>>2]=s[t+4>>2];s[e+356>>2]=s[t+8>>2];c=n;return}function fo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function lo(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+8>>2]&127](e,t);c=n;return}function co(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function ho(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function po(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0;i=c;c=c+96|0;s[5004]=(s[5004]|0)+1;o=cM(1147)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}if((r[5024]|0)==0?(Zt(5024)|0)!=0:0){s[i+80>>2]=0;s[i+84>>2]=0;s[i+88>>2]=0;s[i+92>>2]=0;aS(4408,0,0,0,i+80|0);sn(5024)}s[i+64>>2]=0;s[i+68>>2]=0;s[i+72>>2]=0;s[i+76>>2]=0;fS(4408,0,i+64|0);s[o+4>>2]=7;s[o+8>>2]=-1;s[o+12>>2]=-1;f[o+16>>2]=3.4028234663852886e38;r[o+20>>0]=1;r[o+21>>0]=0;s[o+24>>2]=-1;a=o+28|0;s[a>>2]=4408;u=o+32|0;s[u>>2]=e;f[o+36>>2]=0;f[o+40>>2]=.30000001192092896;s[o+44>>2]=0;s[o>>2]=4264;r[o+48>>0]=0;l=o+116|0;s[l+0>>2]=s[t+0>>2];s[l+4>>2]=s[t+4>>2];s[l+8>>2]=s[t+8>>2];s[l+12>>2]=s[t+12>>2];h=o+132|0;s[h+0>>2]=s[t+16>>2];s[h+4>>2]=s[t+20>>2];s[h+8>>2]=s[t+24>>2];s[h+12>>2]=s[t+28>>2];h=o+148|0;s[h+0>>2]=s[t+32>>2];s[h+4>>2]=s[t+36>>2];s[h+8>>2]=s[t+40>>2];s[h+12>>2]=s[t+44>>2];h=o+164|0;s[h+0>>2]=s[t+48>>2];s[h+4>>2]=s[t+52>>2];s[h+8>>2]=s[t+56>>2];s[h+12>>2]=s[t+60>>2];r[o+180>>0]=n&1;t=o+52|0;bd(i,e+4|0,l);s[t+0>>2]=s[i+0>>2];s[t+4>>2]=s[i+4>>2];s[t+8>>2]=s[i+8>>2];s[t+12>>2]=s[i+12>>2];t=o+68|0;s[t+0>>2]=s[i+16>>2];s[t+4>>2]=s[i+20>>2];s[t+8>>2]=s[i+24>>2];s[t+12>>2]=s[i+28>>2];t=o+84|0;s[t+0>>2]=s[i+32>>2];s[t+4>>2]=s[i+36>>2];s[t+8>>2]=s[i+40>>2];s[t+12>>2]=s[i+44>>2];t=o+100|0;s[t+0>>2]=s[i+48>>2];s[t+4>>2]=s[i+52>>2];s[t+8>>2]=s[i+56>>2];s[t+12>>2]=s[i+60>>2];f[o+184>>2]=1;f[o+188>>2]=-1;f[o+192>>2]=0;f[o+196>>2]=0;f[o+200>>2]=1;f[o+204>>2]=.699999988079071;f[o+208>>2]=0;f[o+212>>2]=0;f[o+216>>2]=1;f[o+220>>2]=.699999988079071;f[o+224>>2]=0;f[o+228>>2]=0;f[o+264>>2]=1;f[o+268>>2]=.699999988079071;f[o+272>>2]=1;f[o+276>>2]=0;f[o+280>>2]=1;f[o+284>>2]=.699999988079071;f[o+288>>2]=1;f[o+292>>2]=0;f[o+232>>2]=1;f[o+236>>2]=.699999988079071;f[o+240>>2]=1;f[o+244>>2]=0;f[o+248>>2]=1;f[o+252>>2]=.699999988079071;f[o+256>>2]=1;f[o+260>>2]=0;r[o+1096>>0]=0;t=o+1100|0;f[o+1116>>2]=0;f[o+1120>>2]=0;f[o+1124>>2]=0;s[o+300>>2]=0;n=o+49|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;r[t+12>>0]=0;r[n>>0]=1;bv(o,(s[a>>2]|0)+4|0,(s[u>>2]|0)+4|0);c=i;return o|0}function vo(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0;u=c;s[5004]=(s[5004]|0)+1;a=cM(1147)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}s[a+4>>2]=7;s[a+8>>2]=-1;s[a+12>>2]=-1;f[a+16>>2]=3.4028234663852886e38;r[a+20>>0]=1;r[a+21>>0]=0;s[a+24>>2]=-1;l=a+28|0;s[l>>2]=e;e=a+32|0;s[e>>2]=t;f[a+36>>2]=0;f[a+40>>2]=.30000001192092896;s[a+44>>2]=0;s[a>>2]=4264;r[a+48>>0]=0;t=a+52|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];t=a+68|0;s[t+0>>2]=s[n+16>>2];s[t+4>>2]=s[n+20>>2];s[t+8>>2]=s[n+24>>2];s[t+12>>2]=s[n+28>>2];t=a+84|0;s[t+0>>2]=s[n+32>>2];s[t+4>>2]=s[n+36>>2];s[t+8>>2]=s[n+40>>2];s[t+12>>2]=s[n+44>>2];t=a+100|0;s[t+0>>2]=s[n+48>>2];s[t+4>>2]=s[n+52>>2];s[t+8>>2]=s[n+56>>2];s[t+12>>2]=s[n+60>>2];n=a+116|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];n=a+132|0;s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];n=a+148|0;s[n+0>>2]=s[i+32>>2];s[n+4>>2]=s[i+36>>2];s[n+8>>2]=s[i+40>>2];s[n+12>>2]=s[i+44>>2];n=a+164|0;s[n+0>>2]=s[i+48>>2];s[n+4>>2]=s[i+52>>2];s[n+8>>2]=s[i+56>>2];s[n+12>>2]=s[i+60>>2];r[a+180>>0]=o&1;f[a+184>>2]=1;f[a+188>>2]=-1;f[a+192>>2]=0;f[a+196>>2]=0;f[a+200>>2]=1;f[a+204>>2]=.699999988079071;f[a+208>>2]=0;f[a+212>>2]=0;f[a+216>>2]=1;f[a+220>>2]=.699999988079071;f[a+224>>2]=0;f[a+228>>2]=0;f[a+264>>2]=1;f[a+268>>2]=.699999988079071;f[a+272>>2]=1;f[a+276>>2]=0;f[a+280>>2]=1;f[a+284>>2]=.699999988079071;f[a+288>>2]=1;f[a+292>>2]=0;f[a+232>>2]=1;f[a+236>>2]=.699999988079071;f[a+240>>2]=1;f[a+244>>2]=0;f[a+248>>2]=1;f[a+252>>2]=.699999988079071;f[a+256>>2]=1;f[a+260>>2]=0;r[a+1096>>0]=0;i=a+1100|0;f[a+1116>>2]=0;f[a+1120>>2]=0;f[a+1124>>2]=0;s[a+300>>2]=0;o=a+49|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;r[i+12>>0]=0;r[o>>0]=1;bv(a,(s[l>>2]|0)+4|0,(s[e>>2]|0)+4|0);c=u;return a|0}function mo(e,t){e=e|0;t=+t;f[e+184>>2]=t;return}function go(e,t){e=e|0;t=+t;f[e+188>>2]=t;return}function yo(e,t){e=e|0;t=+t;var n=0;n=c;t=+rn(+t,6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;f[e+192>>2]=t;c=n;return}function bo(e,t){e=e|0;t=+t;var n=0;n=c;t=+rn(+t,6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;f[e+196>>2]=t;c=n;return}function wo(e,t){e=e|0;t=t|0;r[e+21>>0]=t&1;return}function Eo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function So(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0;n=c;s[5004]=(s[5004]|0)+1;i=cM(627)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}Lv(i,5,e);s[i>>2]=1264;a=i+300|0;s[a+0>>2]=s[t+0>>2];s[a+4>>2]=s[t+4>>2];s[a+8>>2]=s[t+8>>2];s[a+12>>2]=s[t+12>>2];u=i+316|0;s[u+0>>2]=s[t+16>>2];s[u+4>>2]=s[t+20>>2];s[u+8>>2]=s[t+24>>2];s[u+12>>2]=s[t+28>>2];o=i+332|0;s[o+0>>2]=s[t+32>>2];s[o+4>>2]=s[t+36>>2];s[o+8>>2]=s[t+40>>2];s[o+12>>2]=s[t+44>>2];e=i+348|0;s[e+0>>2]=s[t+48>>2];s[e+4>>2]=s[t+52>>2];s[e+8>>2]=s[t+56>>2];s[e+12>>2]=s[t+60>>2];e=i+364|0;t=i+524|0;r[i+527>>0]=0;s[e+0>>2]=s[a+0>>2];s[e+4>>2]=s[a+4>>2];s[e+8>>2]=s[a+8>>2];s[e+12>>2]=s[a+12>>2];e=i+380|0;s[e+0>>2]=s[u+0>>2];s[e+4>>2]=s[u+4>>2];s[e+8>>2]=s[u+8>>2];s[e+12>>2]=s[u+12>>2];e=i+396|0;s[e+0>>2]=s[o+0>>2];s[e+4>>2]=s[o+4>>2];s[e+8>>2]=s[o+8>>2];s[e+12>>2]=s[o+12>>2];e=i+412|0;r[t>>0]=0;r[i+525>>0]=0;r[i+526>>0]=0;r[i+552>>0]=0;t=i+572|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;f[t>>2]=-1;f[i+444>>2]=0xde0b6b000000000;f[i+448>>2]=0xde0b6b000000000;f[i+452>>2]=0xde0b6b000000000;f[i+428>>2]=1;f[i+432>>2]=.30000001192092896;f[i+436>>2]=1;f[i+440>>2]=.009999999776482582;f[i+456>>2]=.05000000074505806;s[i+592>>2]=0;f[i+596>>2]=0;f[i+600>>2]=.699999988079071;f[i+604>>2]=0;c=n;return i|0}function xo(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0;o=c;s[5004]=(s[5004]|0)+1;u=cM(627)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}s[u+4>>2]=5;s[u+8>>2]=-1;s[u+12>>2]=-1;f[u+16>>2]=3.4028234663852886e38;r[u+20>>0]=1;r[u+21>>0]=0;s[u+24>>2]=-1;s[u+28>>2]=e;s[u+32>>2]=t;f[u+36>>2]=0;f[u+40>>2]=.30000001192092896;s[u+44>>2]=0;s[u>>2]=1264;t=u+300|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];t=u+316|0;s[t+0>>2]=s[n+16>>2];s[t+4>>2]=s[n+20>>2];s[t+8>>2]=s[n+24>>2];s[t+12>>2]=s[n+28>>2];t=u+332|0;s[t+0>>2]=s[n+32>>2];s[t+4>>2]=s[n+36>>2];s[t+8>>2]=s[n+40>>2];s[t+12>>2]=s[n+44>>2];t=u+348|0;s[t+0>>2]=s[n+48>>2];s[t+4>>2]=s[n+52>>2];s[t+8>>2]=s[n+56>>2];s[t+12>>2]=s[n+60>>2];n=u+364|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];n=u+380|0;s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];n=u+396|0;s[n+0>>2]=s[i+32>>2];s[n+4>>2]=s[i+36>>2];s[n+8>>2]=s[i+40>>2];s[n+12>>2]=s[i+44>>2];n=u+412|0;s[n+0>>2]=s[i+48>>2];s[n+4>>2]=s[i+52>>2];s[n+8>>2]=s[i+56>>2];s[n+12>>2]=s[i+60>>2];i=u+524|0;r[u+552>>0]=0;r[i>>0]=0;r[i+1>>0]=0;r[i+2>>0]=0;r[i+3>>0]=0;f[u+572>>2]=-1;f[u+444>>2]=0xde0b6b000000000;f[u+448>>2]=0xde0b6b000000000;f[u+452>>2]=0xde0b6b000000000;f[u+428>>2]=1;f[u+432>>2]=.30000001192092896;f[u+436>>2]=1;f[u+440>>2]=.009999999776482582;f[u+456>>2]=.05000000074505806;s[u+592>>2]=0;f[u+596>>2]=0;f[u+600>>2]=.699999988079071;f[u+604>>2]=0;c=o;return u|0}function To(e,t,n){e=e|0;t=t|0;n=+n;var r=0;r=c;if((t|0)==4)f[e+448>>2]=n;else if((t|0)==3)f[e+452>>2]=n;else if((t|0)==5)f[e+444>>2]=n;c=r;return}function No(e,t){e=e|0;t=t|0;r[e+524>>0]=t&1;return}function Co(e,t){e=e|0;t=+t;f[e+440>>2]=t;return}function ko(e,t){e=e|0;t=t|0;r[e+552>>0]=t&1;return}function Lo(e,t){e=e|0;t=+t;f[e+572>>2]=t;r[e+553>>0]=0;return}function Ao(e,t){e=e|0;t=+t;f[e+572>>2]=t;r[e+553>>0]=1;return}function Oo(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,s=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;n=c;c=c+48|0;Qn(e+364|0,n+16|0);o=-+f[n+16>>2];i=-+f[n+20>>2];h=-+f[n+24>>2];l=+f[n+28>>2];s=+f[t>>2];p=+f[t+12>>2];a=+f[t+8>>2];u=+f[t+4>>2];Qn(e+300|0,n);v=+f[n>>2];m=+f[n+12>>2];r=+f[n+8>>2];d=+f[n+4>>2];f[n+32>>2]=v*(l*p-s*o-u*i-a*h)+(l*s+p*o+a*i-u*h)*m+(s*h+(p*i+l*u)-a*o)*r-(p*h+l*a+u*o-s*i)*d;f[n+36>>2]=v*(p*h+l*a+u*o-s*i)+(m*(s*h+(p*i+l*u)-a*o)+(l*p-s*o-u*i-a*h)*d)-(l*s+p*o+a*i-u*h)*r;f[n+40>>2]=m*(p*h+l*a+u*o-s*i)+(l*p-s*o-u*i-a*h)*r+(l*s+p*o+a*i-u*h)*d-v*(s*h+(p*i+l*u)-a*o);f[n+44>>2]=(l*p-s*o-u*i-a*h)*m-v*(l*s+p*o+a*i-u*h)-(s*h+(p*i+l*u)-a*o)*d-(p*h+l*a+u*o-s*i)*r;Hd(e,n+32|0);c=n;return}function Mo(e,t){e=e|0;t=t|0;var n=0;n=c;Hd(e,t);c=n;return}function _o(e,t){e=e|0;t=t|0;r[e+21>>0]=t&1;return}function Do(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Po(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(95)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;s[r>>2]=9704;f[r+56>>2]=e;f[r+60>>2]=t;s[r+4>>2]=11;s[r+64>>2]=0;s[r+68>>2]=1;s[r+72>>2]=2;f[r+28>>2]=e;f[r+32>>2]=t;f[r+36>>2]=e;f[r+52>>2]=e/+X(+(e*e+t*t));c=n;return r|0}function Ho(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Bo(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function jo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Fo(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Io(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function qo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ro(){var e=0,t=0;e=c;c=c+32|0;t=cM(92)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(92)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);s[e>>2]=0;s[e+4>>2]=0;s[e+8>>2]=4096;s[e+12>>2]=4096;s[e+16>>2]=0;s[e+20>>2]=1;nA(t,e);c=e;return t|0}function Uo(e){e=e|0;var t=0,n=0;t=c;n=cM(92)|0;e:do if((n|0)==0){while(1){n=s[5158]|0;s[5158]=n+0;if((n|0)==0)break;XD[n&3]();n=cM(92)|0;if((n|0)!=0)break e}n=On(4)|0;s[n>>2]=20472;Ln(n|0,20520,265)}while(0);nA(n,e);c=t;return n|0}function zo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Wo(e,t,n,r,i,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;var f=0,l=0;l=c;f=+wD[s[(s[e>>2]|0)+12>>2]&1](e,t,n,r,i,o,u,a);c=l;return+f}function Xo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Vo(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(95)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;f[r+56>>2]=e;f[r+60>>2]=t;s[r+4>>2]=11;f[r+52>>2]=e/+X(+(e*e+t*t));s[r>>2]=9808;s[r+64>>2]=0;s[r+68>>2]=2;s[r+72>>2]=1;f[r+28>>2]=e;f[r+36>>2]=t;f[r+32>>2]=e;c=n;return r|0}function $o(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Jo(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Ko(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Qo(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(95)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;f[r+56>>2]=e;f[r+60>>2]=t;s[r+4>>2]=11;f[r+52>>2]=e/+X(+(e*e+t*t));s[r>>2]=9912;s[r+64>>2]=1;s[r+68>>2]=0;s[r+72>>2]=2;f[r+32>>2]=e;f[r+28>>2]=t;f[r+36>>2]=e;c=n;return r|0}function Go(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Yo(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Zo(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function eu(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(191)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}Jx(t,1,1);c=e;return t|0}function tu(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(191)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}Jx(n,e,1);c=t;return n|0}function nu(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(191)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}Jx(r,e,t);c=n;return r|0}function ru(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;i=c;o=s[e+32>>2]|0;s[o>>2]=(s[o>>2]|0)+1;Kx(e,Qx(e,t,0)|0);Kx(e,Qx(e,n,0)|0);Kx(e,Qx(e,r,0)|0);c=i;return}function iu(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0;o=c;u=s[e+32>>2]|0;s[u>>2]=(s[u>>2]|0)+1;Kx(e,Qx(e,t,i)|0);Kx(e,Qx(e,n,i)|0);Kx(e,Qx(e,r,i)|0);c=o;return}function su(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function ou(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(131)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}s[t+8>>2]=0;f[t+12>>2]=1;f[t+16>>2]=1;f[t+20>>2]=1;f[t+24>>2]=0;f[t+44>>2]=.03999999910593033;s[t+52>>2]=0;f[t+56>>2]=1;f[t+60>>2]=1;f[t+64>>2]=1;f[t+68>>2]=0;f[t+72>>2]=-1;f[t+76>>2]=-1;f[t+80>>2]=-1;f[t+84>>2]=0;r[t+88>>0]=0;s[t>>2]=10376;r[t+108>>0]=1;s[t+104>>2]=0;s[t+100>>2]=0;s[t+4>>2]=4;s[t+96>>2]=0;_S(t);c=e;return t|0}function uu(e,t){e=e|0;t=t|0;var n=0;n=c;fk(e,t,1);c=n;return}function au(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;fk(e,t,n);c=r;return}function fu(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function lu(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function cu(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function hu(){var e=0,t=0,n=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(791)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}s[t>>2]=1025;s[t+116>>2]=0;r[t+120>>0]=0;n=t+124|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;s[t+300>>2]=0;r[t+304>>0]=0;n=t+308|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;s[t+484>>2]=0;r[t+488>>0]=0;n=t+492|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;s[t+668>>2]=0;r[t+672>>0]=0;n=t+676|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;s[t+740>>2]=0;s[t+744>>2]=0;s[t+748>>2]=0;s[t+768>>2]=0;c=e;return t|0}function pu(e){e=e|0;return s[e+740>>2]|0}function du(e){e=e|0;return s[e+744>>2]|0}function vu(e){e=e|0;return s[e+748>>2]|0}function mu(e,t){e=e|0;t=t|0;return e+(t*184|0)+4|0}function gu(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function yu(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(75)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[n+8>>2]=0;o=n+12|0;f[o>>2]=1;r=n+16|0;f[r>>2]=1;i=n+20|0;f[i>>2]=1;f[n+24>>2]=0;u=n+44|0;f[u>>2]=.03999999910593033;s[n+52>>2]=0;s[n>>2]=5448;s[n+4>>2]=0;l=+f[e>>2];h=+f[e+4>>2];a=+f[e+8>>2];if(l<h)p=l<a?0:2;else p=h<a?1:2;a=+f[e+(p<<2)>>2]*.10000000149011612;if(a<.03999999910593033){g=+xm(n);v=+CD[s[(s[n>>2]|0)+48>>2]&15](n);h=+CD[s[(s[n>>2]|0)+48>>2]&15](n);m=n+28|0;g=g+ +f[m>>2];d=n+32|0;v=v+ +f[d>>2];p=n+36|0;h=h+ +f[p>>2];f[u>>2]=a;a=+CD[s[(s[n>>2]|0)+48>>2]&15](n);l=+CD[s[(s[n>>2]|0)+48>>2]&15](n);h=h- +CD[s[(s[n>>2]|0)+48>>2]&15](n);f[m>>2]=g-a;f[d>>2]=v-l;f[p>>2]=h;f[n+40>>2]=0;u=s[n>>2]|0}else u=5448|0;h=+CD[s[u+48>>2]&15](n);v=+CD[s[(s[n>>2]|0)+48>>2]&15](n);g=+CD[s[(s[n>>2]|0)+48>>2]&15](n);v=+f[e+4>>2]*+f[r>>2]-v;g=+f[e+8>>2]*+f[i>>2]-g;f[n+28>>2]=+f[e>>2]*+f[o>>2]-h;f[n+32>>2]=v;f[n+36>>2]=g;f[n+40>>2]=0;c=t;return n|0}function bu(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function wu(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Eu(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Su(e){e=e|0;var t=0,n=0,i=0,o=0,u=0;t=c;i=cM(5260)|0;e:do if((i|0)==0){while(1){n=s[5158]|0;s[5158]=n+0;if((n|0)==0)break;XD[n&3]();i=cM(5260)|0;if((i|0)!=0)break e}o=On(4)|0;s[o>>2]=20472;Ln(o|0,20520,265)}while(0);s[i>>2]=6808;s[i+4>>2]=2;r[i+24>>0]=1;s[i+20>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;s[i+28>>2]=13504;n=i+5256|0;s[n>>2]=e;s[i+60>>2]=69;s[i+64>>2]=dD[s[(s[e>>2]|0)+12>>2]&127](e)|0;s[i+68>>2]=dD[s[(s[e>>2]|0)+8>>2]&127](e)|0;e=0;do{o=0;do{u=s[n>>2]|0;s[i+(e*144|0)+(o<<2)+72>>2]=xD[s[(s[u>>2]|0)+16>>2]&31](u,e,o)|0;o=o+1|0}while((o|0)<36);e=e+1|0}while((e|0)<36);c=t;return i|0}function xu(e){e=e|0;var t=0;t=c;e=dD[s[(s[e>>2]|0)+36>>2]&127](e)|0;c=t;return e|0}function Tu(e,t){e=e|0;t=t|0;var n=0;n=c;e=DD[s[(s[e>>2]|0)+40>>2]&31](e,t)|0;c=n;return e|0}function Nu(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Cu(){var e=0,t=0;e=c;t=cM(24)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(24)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);f[t>>2]=5.880000114440918;f[t+4>>2]=.8299999833106995;f[t+8>>2]=.8799999952316284;f[t+12>>2]=500;f[t+16>>2]=10.5;f[t+20>>2]=6e3;c=e;return t|0}function ku(e){e=e|0;return+(+f[e>>2])}function Lu(e,t){e=e|0;t=+t;f[e>>2]=t;return}function Au(e){e=e|0;return+(+f[e+4>>2])}function Ou(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function Mu(e){e=e|0;return+(+f[e+8>>2])}function _u(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function Du(e){e=e|0;return+(+f[e+12>>2])}function Pu(e,t){e=e|0;t=+t;f[e+12>>2]=t;return}function Hu(e){e=e|0;return+(+f[e+16>>2])}function Bu(e,t){e=e|0;t=+t;f[e+16>>2]=t;return}function ju(e){e=e|0;return+(+f[e+20>>2])}function Fu(e,t){e=e|0;t=+t;f[e+20>>2]=t;return}function Iu(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(111)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}yb(t,1);c=e;return t|0}function qu(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(111)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}yb(n,e);c=t;return n|0}function Ru(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;u=c;c=c+128|0;s[e+68>>2]=(s[e+68>>2]|0)+1;s[u+0>>2]=s[t+0>>2];s[u+4>>2]=s[t+4>>2];s[u+8>>2]=s[t+8>>2];s[u+12>>2]=s[t+12>>2];s[u+16>>2]=s[t+16>>2];s[u+20>>2]=s[t+20>>2];s[u+24>>2]=s[t+24>>2];s[u+28>>2]=s[t+28>>2];s[u+32>>2]=s[t+32>>2];s[u+36>>2]=s[t+36>>2];s[u+40>>2]=s[t+40>>2];s[u+44>>2]=s[t+44>>2];s[u+48>>2]=s[t+48>>2];s[u+52>>2]=s[t+52>>2];s[u+56>>2]=s[t+56>>2];s[u+60>>2]=s[t+60>>2];i=s[n+4>>2]|0;o=+CD[s[(s[n>>2]|0)+48>>2]&15](n);JD[s[(s[n>>2]|0)+8>>2]&127](n,t,u+112|0,u+96|0);v=+f[u+112>>2];if(+f[e+32>>2]>v)f[e+32>>2]=v;v=+f[u+96>>2];if(+f[e+48>>2]<v)f[e+48>>2]=v;v=+f[u+116>>2];if(+f[e+36>>2]>v)f[e+36>>2]=v;v=+f[u+100>>2];if(+f[e+52>>2]<v)f[e+52>>2]=v;v=+f[u+120>>2];if(+f[e+40>>2]>v)f[e+40>>2]=v;v=+f[u+104>>2];if(+f[e+56>>2]<v)f[e+56>>2]=v;t=s[e+64>>2]|0;if((t|0)==0){t=e+16|0;l=0}else{s[u+64>>2]=s[u+112>>2];s[u+68>>2]=s[u+116>>2];s[u+72>>2]=s[u+120>>2];s[u+76>>2]=s[u+124>>2];s[u+80>>2]=s[u+96>>2];s[u+84>>2]=s[u+100>>2];s[u+88>>2]=s[u+104>>2];s[u+92>>2]=s[u+108>>2];h=s[e+16>>2]|0;l=s[t+4>>2]|0;if((l|0)==0){s[5004]=(s[5004]|0)+1;d=cM(63)|0;if((d|0)!=0?(s[(d+19&-16)+ -4>>2]=d,(d+19&-16|0)!=0):0){l=(d+19&-16)+0|0;p=l+44|0;do{s[l>>2]=0;l=l+4|0}while((l|0)<(p|0));l=d+19&-16}else l=0}else s[t+4>>2]=0;s[l+32>>2]=0;s[l+36>>2]=h;s[l+40>>2]=0;s[l+0>>2]=s[u+64>>2];s[l+4>>2]=s[u+68>>2];s[l+8>>2]=s[u+72>>2];s[l+12>>2]=s[u+76>>2];s[l+16>>2]=s[u+80>>2];s[l+20>>2]=s[u+84>>2];s[l+24>>2]=s[u+88>>2];s[l+28>>2]=s[u+92>>2];CL(t,s[t>>2]|0,l);s[t+12>>2]=(s[t+12>>2]|0)+1;t=e+16|0}d=s[t>>2]|0;if((d|0)==(s[e+20>>2]|0)?(a=(d|0)==0?1:d<<1,(d|0)<(a|0)):0){if((a|0)==0)h=0;else{s[5004]=(s[5004]|0)+1;h=cM((a*80|3)+16|0)|0;if((h|0)==0)h=0;else{s[(h+19&-16)+ -4>>2]=h;h=h+19&-16}d=s[t>>2]|0}if((d|0)>0){p=0;do{m=h+(p*80|0)|0;g=s[e+24>>2]|0;y=g+(p*80|0)|0;s[m+0>>2]=s[y+0>>2];s[m+4>>2]=s[y+4>>2];s[m+8>>2]=s[y+8>>2];s[m+12>>2]=s[y+12>>2];m=h+(p*80|0)+16|0;y=g+(p*80|0)+16|0;s[m+0>>2]=s[y+0>>2];s[m+4>>2]=s[y+4>>2];s[m+8>>2]=s[y+8>>2];s[m+12>>2]=s[y+12>>2];m=h+(p*80|0)+32|0;y=g+(p*80|0)+32|0;s[m+0>>2]=s[y+0>>2];s[m+4>>2]=s[y+4>>2];s[m+8>>2]=s[y+8>>2];s[m+12>>2]=s[y+12>>2];m=h+(p*80|0)+48|0;y=g+(p*80|0)+48|0;s[m+0>>2]=s[y+0>>2];s[m+4>>2]=s[y+4>>2];s[m+8>>2]=s[y+8>>2];s[m+12>>2]=s[y+12>>2];m=h+(p*80|0)+64|0;g=g+(p*80|0)+64|0;s[m+0>>2]=s[g+0>>2];s[m+4>>2]=s[g+4>>2];s[m+8>>2]=s[g+8>>2];s[m+12>>2]=s[g+12>>2];p=p+1|0}while((p|0)!=(d|0))}p=s[e+24>>2]|0;if((p|0)!=0){if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[p+ -4>>2]|0)}s[e+24>>2]=0}r[e+28>>0]=1;s[e+24>>2]=h;s[e+20>>2]=a;d=s[t>>2]|0}y=s[e+24>>2]|0;g=y+(d*80|0)|0;s[g+0>>2]=s[u+0>>2];s[g+4>>2]=s[u+4>>2];s[g+8>>2]=s[u+8>>2];s[g+12>>2]=s[u+12>>2];g=y+(d*80|0)+16|0;s[g+0>>2]=s[u+16>>2];s[g+4>>2]=s[u+20>>2];s[g+8>>2]=s[u+24>>2];s[g+12>>2]=s[u+28>>2];g=y+(d*80|0)+32|0;s[g+0>>2]=s[u+32>>2];s[g+4>>2]=s[u+36>>2];s[g+8>>2]=s[u+40>>2];s[g+12>>2]=s[u+44>>2];g=y+(d*80|0)+48|0;s[g+0>>2]=s[u+48>>2];s[g+4>>2]=s[u+52>>2];s[g+8>>2]=s[u+56>>2];s[g+12>>2]=s[u+60>>2];y=y+(d*80|0)+64|0;s[y>>2]=n;s[y+4>>2]=i;f[y+8>>2]=o;s[y+12>>2]=l;s[t>>2]=(s[t>>2]|0)+1;c=u;return}function Uu(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function zu(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Wu(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Xu(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;n=c;r=cM(80)|0;e:do if((r|0)==0){while(1){r=s[5158]|0;s[5158]=r+0;if((r|0)==0)break;XD[r&3]();r=cM(80)|0;if((r|0)!=0)break e}r=On(4)|0;s[r>>2]=20472;Ln(r|0,20520,265)}while(0);f[r+4>>2]=1;i[r+8>>1]=1;i[r+10>>1]=-1;s[r>>2]=688;o=r+12|0;s[o+0>>2]=s[e+0>>2];s[o+4>>2]=s[e+4>>2];s[o+8>>2]=s[e+8>>2];s[o+12>>2]=s[e+12>>2];e=r+28|0;s[e+0>>2]=s[t+0>>2];s[e+4>>2]=s[t+4>>2];s[e+8>>2]=s[t+8>>2];s[e+12>>2]=s[t+12>>2];s[r+76>>2]=0;c=n;return r|0}function Vu(e){e=e|0;return+f[e+4>>2]<1|0}function $u(e){e=e|0;return e+12|0}function Ju(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+12>>2]=s[t+0>>2];s[e+16>>2]=s[t+4>>2];s[e+20>>2]=s[t+8>>2];s[e+24>>2]=s[t+12>>2];c=n;return}function Ku(e){e=e|0;return e+28|0}function Qu(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+28>>2]=s[t+0>>2];s[e+32>>2]=s[t+4>>2];s[e+36>>2]=s[t+8>>2];s[e+40>>2]=s[t+12>>2];c=n;return}function Gu(e){e=e|0;return e+44|0}function Yu(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+44>>2]=s[t+0>>2];s[e+48>>2]=s[t+4>>2];s[e+52>>2]=s[t+8>>2];s[e+56>>2]=s[t+12>>2];c=n;return}function Zu(e){e=e|0;return e+60|0}function ea(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+60>>2]=s[t+0>>2];s[e+64>>2]=s[t+4>>2];s[e+68>>2]=s[t+8>>2];s[e+72>>2]=s[t+12>>2];c=n;return}function ta(e){e=e|0;return i[e+8>>1]|0}function na(e,t){e=e|0;t=t|0;i[e+8>>1]=t;return}function ra(e){e=e|0;return i[e+10>>1]|0}function ia(e,t){e=e|0;t=t|0;i[e+10>>1]=t;return}function sa(e){e=e|0;return+(+f[e+4>>2])}function oa(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function ua(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function aa(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(219)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}la();la();fa(t,464,464);c=e;return t|0}function fa(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;s[e>>2]=600;i=e+4|0;do i=i+16|0;while((i|0)!=(e+52|0));s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];i=e+68|0;do i=i+16|0;while((i|0)!=(e+116|0));s[e+68>>2]=s[n+0>>2];s[e+72>>2]=s[n+4>>2];s[e+76>>2]=s[n+8>>2];s[e+80>>2]=s[n+12>>2];s[e+84>>2]=s[n+16>>2];s[e+88>>2]=s[n+20>>2];s[e+92>>2]=s[n+24>>2];s[e+96>>2]=s[n+28>>2];s[e+100>>2]=s[n+32>>2];s[e+104>>2]=s[n+36>>2];s[e+108>>2]=s[n+40>>2];s[e+112>>2]=s[n+44>>2];s[e+116>>2]=s[n+48>>2];s[e+120>>2]=s[n+52>>2];s[e+124>>2]=s[n+56>>2];s[e+128>>2]=s[n+60>>2];n=e+132|0;do n=n+16|0;while((n|0)!=(e+180|0));s[e+132>>2]=s[t+0>>2];s[e+136>>2]=s[t+4>>2];s[e+140>>2]=s[t+8>>2];s[e+144>>2]=s[t+12>>2];s[e+148>>2]=s[t+16>>2];s[e+152>>2]=s[t+20>>2];s[e+156>>2]=s[t+24>>2];s[e+160>>2]=s[t+28>>2];s[e+164>>2]=s[t+32>>2];s[e+168>>2]=s[t+36>>2];s[e+172>>2]=s[t+40>>2];s[e+176>>2]=s[t+44>>2];s[e+180>>2]=s[t+48>>2];s[e+184>>2]=s[t+52>>2];s[e+188>>2]=s[t+56>>2];s[e+192>>2]=s[t+60>>2];s[e+196>>2]=0;c=r;return}function la(){var e=0,t=0;e=c;c=c+48|0;if((r[528]|0)!=0){c=e;return}if((Zt(528)|0)==0){c=e;return}if((r[584]|0)==0?(Zt(584)|0)!=0:0){f[e+32>>2]=1;f[e+28>>2]=0;f[e+24>>2]=0;f[e+20>>2]=0;f[e+16>>2]=1;f[e+12>>2]=0;f[e+8>>2]=0;f[e+4>>2]=0;f[e>>2]=1;dd(536,e+32|0,e+28|0,e+24|0,e+20|0,e+16|0,e+12|0,e+8|0,e+4|0,e);sn(584);t=464}else t=464;do t=t+16|0;while((t|0)!=512);s[116]=s[134];s[117]=s[135];s[118]=s[136];s[119]=s[137];s[120]=s[138];s[121]=s[139];s[122]=s[140];s[123]=s[141];s[124]=s[142];s[125]=s[143];s[126]=s[144];s[127]=s[145];s[128]=0;s[129]=0;s[130]=0;s[131]=0;sn(528);c=e;return}function ca(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(219)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}la();fa(n,e,464);c=t;return n|0}function ha(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(219)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}fa(r,e,t);c=n;return r|0}function pa(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+8>>2]&127](e,t);c=n;return}function da(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function va(e){e=e|0;return e+4|0}function ma(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];c=n;return}function ga(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function ya(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function ba(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function wa(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ea(e){e=e|0;var t=0;t=c;e=dD[s[(s[e>>2]|0)+36>>2]&127](e)|0;c=t;return e|0}function Sa(e,t){e=e|0;t=t|0;var n=0;n=c;e=DD[s[(s[e>>2]|0)+40>>2]&31](e,t)|0;c=n;return e|0}function xa(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ta(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;n=c;r=cM(84)|0;e:do if((r|0)==0){while(1){r=s[5158]|0;s[5158]=r+0;if((r|0)==0)break;XD[r&3]();r=cM(84)|0;if((r|0)!=0)break e}r=On(4)|0;s[r>>2]=20472;Ln(r|0,20520,265)}while(0);f[r+4>>2]=1;s[r+8>>2]=0;i[r+12>>1]=1;i[r+14>>1]=-1;s[r+16>>2]=0;s[r>>2]=336;o=r+20|0;s[o+0>>2]=s[e+0>>2];s[o+4>>2]=s[e+4>>2];s[o+8>>2]=s[e+8>>2];s[o+12>>2]=s[e+12>>2];e=r+36|0;s[e+0>>2]=s[t+0>>2];s[e+4>>2]=s[t+4>>2];s[e+8>>2]=s[t+8>>2];s[e+12>>2]=s[t+12>>2];c=n;return r|0}function Na(e){e=e|0;return(s[e+8>>2]|0)!=0|0}function Ca(e){e=e|0;return e+20|0}function ka(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+20>>2]=s[t+0>>2];s[e+24>>2]=s[t+4>>2];s[e+28>>2]=s[t+8>>2];s[e+32>>2]=s[t+12>>2];c=n;return}function La(e){e=e|0;return e+36|0}function Aa(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+36>>2]=s[t+0>>2];s[e+40>>2]=s[t+4>>2];s[e+44>>2]=s[t+8>>2];s[e+48>>2]=s[t+12>>2];c=n;return}function Oa(e){e=e|0;return e+52|0}function Ma(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+52>>2]=s[t+0>>2];s[e+56>>2]=s[t+4>>2];s[e+60>>2]=s[t+8>>2];s[e+64>>2]=s[t+12>>2];c=n;return}function _a(e){e=e|0;return e+68|0}function Da(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+68>>2]=s[t+0>>2];s[e+72>>2]=s[t+4>>2];s[e+76>>2]=s[t+8>>2];s[e+80>>2]=s[t+12>>2];c=n;return}function Pa(e){e=e|0;return i[e+12>>1]|0}function Ha(e,t){e=e|0;t=t|0;i[e+12>>1]=t;return}function Ba(e){e=e|0;return i[e+14>>1]|0}function ja(e,t){e=e|0;t=t|0;i[e+14>>1]=t;return}function Fa(e){e=e|0;return s[e+8>>2]|0}function Ia(e,t){e=e|0;t=t|0;s[e+8>>2]=t;return}function qa(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ra(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+64>>2]&127](e,t);c=n;return}function Ua(e){e=e|0;return s[e+24>>2]|0}function za(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+32>>2]&127](e,t,n,r);c=i;return}function Wa(e){e=e|0;var t=0;t=c;e=s[e+68>>2]|0;e=dD[s[(s[e>>2]|0)+36>>2]&127](e)|0;c=t;return e|0}function Xa(e){e=e|0;return e+28|0}function Va(e,t){e=e|0;t=t|0;var n=0;n=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,1,-1);c=n;return}function $a(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,-1);c=r;return}function Ja(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,r);c=i;return}function Ka(e){e=e|0;return s[e+68>>2]|0}function Qa(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;var o=0;o=c;yy(e,t,n,r,i,s);c=o;return}function Ga(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;wy(e,t,n,r);c=i;return}function Ya(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Za(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(75)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;s[r+4>>2]=10;s[r>>2]=6400;s[r+52>>2]=0;f[r+28>>2]=t*.5;f[r+32>>2]=e;f[r+36>>2]=e;f[r+40>>2]=0;c=n;return r|0}function ef(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function tf(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function nf(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function rf(e,t,n,r){e=+e;t=+t;n=+n;r=+r;var i=0,o=0;i=c;o=cM(16)|0;e:do if((o|0)==0){while(1){o=s[5158]|0;s[5158]=o+0;if((o|0)==0)break;XD[o&3]();o=cM(16)|0;if((o|0)!=0)break e}o=On(4)|0;s[o>>2]=20472;Ln(o|0,20520,265)}while(0);f[o>>2]=e;f[o+4>>2]=t;f[o+8>>2]=n;f[o+12>>2]=r;c=i;return o|0}function sf(e,t,n,r,i){e=e|0;t=+t;n=+n;r=+r;i=+i;f[e>>2]=t;f[e+4>>2]=n;f[e+8>>2]=r;f[e+12>>2]=i;return}function of(e){e=e|0;return+(+f[e>>2])}function uf(e){e=e|0;return+(+f[e+4>>2])}function af(e){e=e|0;return+(+f[e+8>>2])}function ff(e){e=e|0;return+(+f[e+12>>2])}function lf(e,t){e=e|0;t=+t;f[e>>2]=t;return}function cf(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function hf(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function pf(e,t){e=e|0;t=+t;f[e+12>>2]=t;return}function df(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function vf(e,t){e=+e;t=+t;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(75)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}s[r+8>>2]=0;f[r+12>>2]=1;f[r+16>>2]=1;f[r+20>>2]=1;f[r+24>>2]=0;f[r+44>>2]=.03999999910593033;s[r+4>>2]=10;s[r>>2]=6504;s[r+52>>2]=2;f[r+28>>2]=e;f[r+32>>2]=e;f[r+36>>2]=t*.5;f[r+40>>2]=0;c=n;return r|0}function mf(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function gf(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function yf(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function bf(e){e=e|0;var t=0,n=0;t=c;n=cM(8)|0;e:do if((n|0)==0){while(1){n=s[5158]|0;s[5158]=n+0;if((n|0)==0)break;XD[n&3]();n=cM(8)|0;if((n|0)!=0)break e}n=On(4)|0;s[n>>2]=20472;Ln(n|0,20520,265)}while(0);s[n>>2]=3832;s[n+4>>2]=e;c=t;return n|0}function wf(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Ef(e){e=e|0;return(s[e+8>>2]|0)!=0|0}function Sf(e){e=e|0;return i[e+12>>1]|0}function xf(e,t){e=e|0;t=t|0;i[e+12>>1]=t;return}function Tf(e){e=e|0;return i[e+14>>1]|0}function Nf(e,t){e=e|0;t=t|0;i[e+14>>1]=t;return}function Cf(e){e=e|0;return s[e+8>>2]|0}function kf(e,t){e=e|0;t=t|0;s[e+8>>2]=t;return}function Lf(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Af(e){e=e|0;return+(+f[e+216>>2])}function Of(e,t){e=e|0;t=+t;f[e+216>>2]=t;return}function Mf(e){e=e|0;return+(+f[e+228>>2])}function _f(e,t){e=e|0;t=+t;f[e+228>>2]=t;return}function Df(e){e=e|0;return+(+f[e+244>>2])}function Pf(e,t){e=e|0;t=+t;f[e+244>>2]=t;return}function Hf(e){e=e|0;return+(+f[e+204>>2])}function Bf(e,t){e=e|0;t=+t;f[e+204>>2]=t;return}function jf(e){e=e|0;return+(+f[e+212>>2])}function Ff(e,t){e=e|0;t=+t;f[e+212>>2]=t;return}function If(e){e=e|0;return+(+f[e+220>>2])}function qf(e,t){e=e|0;t=+t;f[e+220>>2]=t;return}function Rf(e){e=e|0;return+(+f[e+224>>2])}function Uf(e,t){e=e|0;t=+t;f[e+224>>2]=t;return}function zf(e){e=e|0;return+(+f[e+232>>2])}function Wf(e,t){e=e|0;t=+t;f[e+232>>2]=t;return}function Xf(e){e=e|0;return+(+f[e+248>>2])}function Vf(e,t){e=e|0;t=+t;f[e+248>>2]=t;return}function $f(e){e=e|0;return+(+f[e+208>>2])}function Jf(e,t){e=e|0;t=+t;f[e+208>>2]=t;return}function Kf(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Qf(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Gf(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Yf(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Zf(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(35)|0;if((t|0)==0){t=0;c=e;return t|0}s[(t+19&-16)+ -4>>2]=t;t=t+19&-16;c=e;return t|0}function el(e,t,n,r){e=+e;t=+t;n=+n;r=+r;var i=0,o=0;i=c;s[5004]=(s[5004]|0)+1;o=cM(35)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}f[o>>2]=e;f[o+4>>2]=t;f[o+8>>2]=n;f[o+12>>2]=r;c=i;return o|0}function tl(e){e=e|0;return+(+f[e+12>>2])}function nl(e,t,n,r,i){e=e|0;t=+t;n=+n;r=+r;i=+i;f[e>>2]=t;f[e+4>>2]=n;f[e+8>>2]=r;f[e+12>>2]=i;return}function rl(e){e=e|0;var t=0,n=0,r=0;r=+f[e>>2];n=+f[e+4>>2];t=+f[e+8>>2];t=+X(+(r*r+n*n+t*t));return+t}function il(e){e=e|0;return+(+f[e>>2])}function sl(e){e=e|0;return+(+f[e+4>>2])}function ol(e){e=e|0;return+(+f[e+8>>2])}function ul(e,t){e=e|0;t=+t;f[e>>2]=t;return}function al(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function fl(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function ll(e,t){e=e|0;t=+t;f[e>>2]=+f[e>>2]*t;f[e+4>>2]=+f[e+4>>2]*t;f[e+8>>2]=+f[e+8>>2]*t;return e|0}function cl(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function hl(e,t,n){e=e|0;t=t|0;n=+n;var i=0,o=0,u=0,a=0;i=c;s[5004]=(s[5004]|0)+1;o=cM(203)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}s[o>>2]=2632;r[o+144>>0]=1;s[o+140>>2]=0;s[o+132>>2]=0;s[o+136>>2]=0;s[o+176>>2]=1;f[o+56>>2]=.019999999552965164;a=o+60|0;u=o+170|0;s[a+0>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;r[u>>0]=1;s[o+8>>2]=e;f[o+52>>2]=n;f[o+48>>2]=0;s[o+12>>2]=t;r[o+171>>0]=1;f[o+172>>2]=0;f[o+16>>2]=0;f[o+20>>2]=0;f[o+44>>2]=29.399999618530273;f[o+24>>2]=55;f[o+28>>2]=10;r[o+168>>0]=0;r[o+169>>0]=0;r[o+180>>0]=1;f[o+36>>2]=.7853981852531433;f[o+40>>2]=.7071067690849304;f[o+108>>2]=0;r[o+181>>0]=0;r[o+182>>0]=0;c=i;return o|0}function pl(e,t,n,i){e=e|0;t=t|0;n=+n;i=i|0;var o=0,u=0,a=0;o=c;s[5004]=(s[5004]|0)+1;u=cM(203)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}s[u>>2]=2632;r[u+144>>0]=1;s[u+140>>2]=0;s[u+132>>2]=0;s[u+136>>2]=0;s[u+176>>2]=i;f[u+56>>2]=.019999999552965164;a=u+60|0;i=u+170|0;s[a+0>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;r[i>>0]=1;s[u+8>>2]=e;f[u+52>>2]=n;f[u+48>>2]=0;s[u+12>>2]=t;r[u+171>>0]=1;f[u+172>>2]=0;f[u+16>>2]=0;f[u+20>>2]=0;f[u+44>>2]=29.399999618530273;f[u+24>>2]=55;f[u+28>>2]=10;r[u+168>>0]=0;r[u+169>>0]=0;r[u+180>>0]=1;f[u+36>>2]=.7853981852531433;f[u+40>>2]=.7071067690849304;f[u+108>>2]=0;r[u+181>>0]=0;r[u+182>>0]=0;c=o;return u|0}function dl(e,t){e=e|0;t=t|0;if((t|0)<0)t=0;else t=(t|0)>2?2:t;s[e+176>>2]=t;return}function vl(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+16>>2]&127](e,t);c=n;return}function ml(e,t,n){e=e|0;t=t|0;n=+n;var r=0;r=c;VD[s[(s[e>>2]|0)+20>>2]&7](e,t,n);c=r;return}function gl(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+28>>2]&127](e,t);c=n;return}function yl(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+32>>2]&127](e,t);c=n;return}function bl(e,t,n){e=e|0;t=t|0;n=+n;var r=0;r=c;VD[s[(s[e>>2]|0)+36>>2]&7](e,t,n);c=r;return}function wl(e,t){e=e|0;t=+t;f[e+24>>2]=t;return}function El(e,t){e=e|0;t=+t;f[e+28>>2]=t;return}function Sl(e,t){e=e|0;t=+t;f[e+32>>2]=t;return}function xl(e){e=e|0;var t=0;t=c;e=dD[s[(s[e>>2]|0)+40>>2]&127](e)|0;c=t;return e|0}function Tl(e){e=e|0;var t=0;t=c;lD[s[(s[e>>2]|0)+44>>2]&511](e);c=t;return}function Nl(e,t){e=e|0;t=+t;f[e+44>>2]=t;return}function Cl(e){e=e|0;return+(+f[e+44>>2])}function kl(e,t){e=e|0;t=+t;f[e+36>>2]=t;f[e+40>>2]=+$(+t);return}function Ll(e){e=e|0;return+(+f[e+36>>2])}function Al(e){e=e|0;return s[e+8>>2]|0}function Ol(e,t){e=e|0;t=t|0;r[e+170>>0]=t&1;return}function Ml(e){e=e|0;var t=0;t=c;e=dD[s[(s[e>>2]|0)+48>>2]&127](e)|0;c=t;return e|0}function _l(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Dl(e,t){e=e|0;t=+t;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(103)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}i=r+4|0;s[i>>2]=35;s[r+8>>2]=0;f[r+12>>2]=0;s[r>>2]=16992;h=+f[e>>2];l=+f[e+4>>2];a=+f[e+8>>2];o=+f[e+12>>2];u=1/+X(+(h*h+l*l+a*a));f[r+48>>2]=h*u;f[r+52>>2]=l*u;f[r+56>>2]=a*u;f[r+60>>2]=o;f[r+64>>2]=t;e=r+68|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[i>>2]=28;c=n;return r|0}function Pl(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function Hl(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Bl(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function jl(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Fl(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+60>>2]&127](e,t);c=n;return}function Il(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function ql(){var e=0,t=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(35)|0;if((t|0)==0){t=0;c=e;return t|0}s[(t+19&-16)+ -4>>2]=t;t=t+19&-16;c=e;return t|0}function Rl(e,t,n){e=+e;t=+t;n=+n;var r=0,i=0;r=c;s[5004]=(s[5004]|0)+1;i=cM(35)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}f[i>>2]=e;f[i+4>>2]=t;f[i+8>>2]=n;f[i+12>>2]=0;c=r;return i|0}function Ul(e){e=e|0;var t=0,n=0,r=0;r=+f[e>>2];n=+f[e+4>>2];t=+f[e+8>>2];t=+X(+(r*r+n*n+t*t));return+t}function zl(e){e=e|0;return+(+f[e>>2])}function Wl(e){e=e|0;return+(+f[e+4>>2])}function Xl(e){e=e|0;return+(+f[e+8>>2])}function Vl(e,t){e=e|0;t=+t;f[e>>2]=t;return}function $l(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function Jl(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function Kl(e,t,n,r){e=e|0;t=+t;n=+n;r=+r;f[e>>2]=t;f[e+4>>2]=n;f[e+8>>2]=r;f[e+12>>2]=0;return}function Ql(e,t){e=e|0;t=+t;f[e>>2]=+f[e>>2]*t;f[e+4>>2]=+f[e+4>>2]*t;f[e+8>>2]=+f[e+8>>2]*t;return e|0}function Gl(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Yl(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Zl(e){e=+e;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(71)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[n+8>>2]=0;f[n+12>>2]=1;f[n+16>>2]=1;f[n+20>>2]=1;f[n+24>>2]=0;s[n>>2]=16680;s[n+4>>2]=8;f[n+28>>2]=e;f[n+44>>2]=e;c=t;return n|0}function ec(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function tc(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function nc(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function rc(){var e=0,t=0;e=c;t=cM(24)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(24)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);s[t>>2]=0;s[t+4>>2]=0;s[t+8>>2]=4096;s[t+12>>2]=4096;s[t+16>>2]=0;s[t+20>>2]=1;c=e;return t|0}function ic(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function sc(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;s[5004]=(s[5004]|0)+1;r=cM(783)|0;if((r|0)==0)r=0;else{s[(r+19&-16)+ -4>>2]=r;r=r+19&-16}aE(r,e,t,0);c=n;return r|0}function oc(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;s[5004]=(s[5004]|0)+1;i=cM(783)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}aE(i,e,t,n);c=r;return i|0}function uc(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0;o=c;s[5004]=(s[5004]|0)+1;u=cM(783)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}s[u+4>>2]=4;s[u+8>>2]=-1;s[u+12>>2]=-1;f[u+16>>2]=3.4028234663852886e38;r[u+20>>0]=1;r[u+21>>0]=0;s[u+24>>2]=-1;s[u+28>>2]=e;s[u+32>>2]=t;f[u+36>>2]=0;f[u+40>>2]=.30000001192092896;s[u+44>>2]=0;s[u>>2]=2504;t=u+552|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];t=u+568|0;s[t+0>>2]=s[n+16>>2];s[t+4>>2]=s[n+20>>2];s[t+8>>2]=s[n+24>>2];s[t+12>>2]=s[n+28>>2];t=u+584|0;s[t+0>>2]=s[n+32>>2];s[t+4>>2]=s[n+36>>2];s[t+8>>2]=s[n+40>>2];s[t+12>>2]=s[n+44>>2];t=u+600|0;s[t+0>>2]=s[n+48>>2];s[t+4>>2]=s[n+52>>2];s[t+8>>2]=s[n+56>>2];s[t+12>>2]=s[n+60>>2];n=u+616|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];n=u+632|0;s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];n=u+648|0;s[n+0>>2]=s[i+32>>2];s[n+4>>2]=s[i+36>>2];s[n+8>>2]=s[i+40>>2];s[n+12>>2]=s[i+44>>2];n=u+664|0;s[n+0>>2]=s[i+48>>2];s[n+4>>2]=s[i+52>>2];s[n+8>>2]=s[i+56>>2];s[n+12>>2]=s[i+60>>2];f[u+688>>2]=0;f[u+692>>2]=-1;f[u+696>>2]=.8999999761581421;f[u+700>>2]=.30000001192092896;f[u+704>>2]=1;f[u+708>>2]=0;f[u+712>>2]=0;r[u+716>>0]=0;r[u+736>>0]=0;r[u+737>>0]=0;r[u+738>>0]=0;r[u+739>>0]=1;r[u+740>>0]=0;s[u+748>>2]=0;f[u+732>>2]=1;c=o;return u|0}function ac(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0;u=c;s[5004]=(s[5004]|0)+1;a=cM(783)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}s[a+4>>2]=4;s[a+8>>2]=-1;s[a+12>>2]=-1;f[a+16>>2]=3.4028234663852886e38;r[a+20>>0]=1;r[a+21>>0]=0;s[a+24>>2]=-1;s[a+28>>2]=e;s[a+32>>2]=t;f[a+36>>2]=0;f[a+40>>2]=.30000001192092896;s[a+44>>2]=0;s[a>>2]=2504;t=a+552|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];t=a+568|0;s[t+0>>2]=s[n+16>>2];s[t+4>>2]=s[n+20>>2];s[t+8>>2]=s[n+24>>2];s[t+12>>2]=s[n+28>>2];t=a+584|0;s[t+0>>2]=s[n+32>>2];s[t+4>>2]=s[n+36>>2];s[t+8>>2]=s[n+40>>2];s[t+12>>2]=s[n+44>>2];t=a+600|0;s[t+0>>2]=s[n+48>>2];s[t+4>>2]=s[n+52>>2];s[t+8>>2]=s[n+56>>2];s[t+12>>2]=s[n+60>>2];n=a+616|0;s[n+0>>2]=s[i+0>>2];s[n+4>>2]=s[i+4>>2];s[n+8>>2]=s[i+8>>2];s[n+12>>2]=s[i+12>>2];n=a+632|0;s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];n=a+648|0;s[n+0>>2]=s[i+32>>2];s[n+4>>2]=s[i+36>>2];s[n+8>>2]=s[i+40>>2];s[n+12>>2]=s[i+44>>2];n=a+664|0;s[n+0>>2]=s[i+48>>2];s[n+4>>2]=s[i+52>>2];s[n+8>>2]=s[i+56>>2];s[n+12>>2]=s[i+60>>2];f[a+688>>2]=0;f[a+692>>2]=-1;f[a+696>>2]=.8999999761581421;f[a+700>>2]=.30000001192092896;f[a+704>>2]=1;f[a+708>>2]=0;f[a+712>>2]=0;r[a+716>>0]=0;r[a+736>>0]=0;r[a+737>>0]=0;r[a+738>>0]=0;r[a+739>>0]=1;r[a+740>>0]=o&1;s[a+748>>2]=0;f[a+732>>2]=o?-1:1;c=u;return a|0}function fc(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;var u=0,a=0;u=c;s[5004]=(s[5004]|0)+1;a=cM(783)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}uE(a,e,t,n,r,i,o,0);c=u;return a|0}function lc(e,t,n,r,i,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;var a=0,f=0;a=c;s[5004]=(s[5004]|0)+1;f=cM(783)|0;if((f|0)==0)f=0;else{s[(f+19&-16)+ -4>>2]=f;f=f+19&-16}uE(f,e,t,n,r,i,o,u);c=a;return f|0}function cc(e,t,n,r,i){e=e|0;t=+t;n=+n;r=+r;i=+i;var s=0;s=c;f[e+692>>2]=(n-t)*.5;t=+rn(+((n-t)*.5+t),6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;f[e+688>>2]=t;f[e+696>>2]=r;f[e+700>>2]=i;f[e+704>>2]=1;c=s;return}function hc(e,t,n,r,i,s){e=e|0;t=+t;n=+n;r=+r;i=+i;s=+s;var o=0;o=c;f[e+692>>2]=(n-t)*.5;t=+rn(+((n-t)*.5+t),6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;f[e+688>>2]=t;f[e+696>>2]=r;f[e+700>>2]=i;f[e+704>>2]=s;c=o;return}function pc(e,t){e=e|0;t=t|0;r[e+21>>0]=t&1;return}function dc(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function vc(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function mc(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function gc(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function yc(){var e=0,t=0;e=c;t=cM(12)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(12)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);f[t>>2]=.30000001192092896;f[t+4>>2]=1;f[t+8>>2]=0;c=e;return t|0}function bc(e){e=e|0;return+(+f[e>>2])}function wc(e,t){e=e|0;t=+t;f[e>>2]=t;return}function Ec(e){e=e|0;return+(+f[e+4>>2])}function Sc(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function xc(e){e=e|0;return+(+f[e+8>>2])}function Tc(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function Nc(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Cc(){var e=0,t=0,n=0,i=0,o=0;e=c;s[5004]=(s[5004]|0)+1;t=cM(303)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}f[t+164>>2]=1;f[t+168>>2]=1;f[t+172>>2]=1;f[t+176>>2]=0;s[t+180>>2]=0;f[t+184>>2]=0xde0b6b000000000;o=t+188|0;n=t+204|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;s[n>>2]=1;s[t+208>>2]=-1;s[t+212>>2]=-1;s[t+216>>2]=1;f[t+220>>2]=0;f[t+224>>2]=.5;f[t+228>>2]=0;f[t+232>>2]=0;n=t+236|0;s[t+240>>2]=0;f[t+244>>2]=1;o=t+248|0;i=t+4|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=t+8|0;o=t+24|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;f[o>>2]=1;o=t+28|0;i=t+44|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=t+48|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;s[t>>2]=13008;r[t+280>>0]=1;s[t+276>>2]=0;s[t+268>>2]=0;s[t+272>>2]=0;s[n>>2]=4;c=e;return t|0}function kc(e){e=e|0;return s[e+268>>2]|0}function Lc(e,t){e=e|0;t=t|0;return s[(s[e+276>>2]|0)+(t<<2)>>2]|0}function Ac(e){e=e|0;return s[e+192>>2]|0}function Oc(e,t){e=e|0;t=+t;f[e+184>>2]=t;return}function Mc(e,t){e=e|0;t=t|0;var n=0;n=c;if(((s[e+216>>2]|0)+ -4|0)>>>0<2){c=n;return}s[e+216>>2]=t;c=n;return}function _c(e,t){e=e|0;t=t|0;s[e+216>>2]=t;return}function Dc(e){e=e|0;var t=0;t=c;if((s[e+204>>2]&3|0)!=0){c=t;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=t;return}function Pc(e,t){e=e|0;t=t|0;var n=0;n=c;if(!t?(s[e+204>>2]&3|0)!=0:0){c=n;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=n;return}function Hc(e){e=e|0;e=s[e+216>>2]|0;return((e|0)==2?0:(e|0)!=5)|0}function Bc(e){e=e|0;return(s[e+204>>2]&2|0)!=0|0}function jc(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+228>>2]=t;return}function Fc(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+224>>2]=t;return}function Ic(e){e=e|0;return e+4|0}function qc(e){e=e|0;return s[e+204>>2]|0}function Rc(e,t){e=e|0;t=t|0;s[e+204>>2]=t;return}function Uc(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];c=n;return}function zc(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function Wc(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+8>>2]&511](e);c=t;return}function Xc(e){e=e|0;return s[e>>2]|0}function Vc(e,t){e=e|0;t=t|0;s[e>>2]=t;return}function $c(e){e=e|0;return s[e+4>>2]|0}function Jc(e,t){e=e|0;t=t|0;s[e+4>>2]=t;return}function Kc(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Qc(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Gc(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;e=c;i=cM(152)|0;e:do if((i|0)==0){while(1){i=s[5158]|0;s[5158]=i+0;if((i|0)==0)break;XD[i&3]();i=cM(152)|0;if((i|0)!=0)break e}i=On(4)|0;s[i>>2]=20472;Ln(i|0,20520,265)}while(0);s[i>>2]=3752;r[i+20>>0]=1;s[i+16>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;r[i+40>>0]=1;s[i+36>>2]=0;s[i+28>>2]=0;s[i+32>>2]=0;r[i+60>>0]=1;s[i+56>>2]=0;s[i+48>>2]=0;s[i+52>>2]=0;r[i+80>>0]=1;s[i+76>>2]=0;s[i+68>>2]=0;s[i+72>>2]=0;s[i+100>>2]=n;f[i+104>>2]=0;r[i+148>>0]=1;s[i+144>>2]=0;s[i+136>>2]=0;s[i+140>>2]=0;s[i+116>>2]=t;s[i+120>>2]=0;s[i+124>>2]=2;s[i+128>>2]=1;f[i+112>>2]=0;f[i+108>>2]=0;c=e;return i|0}function Yc(e,t,n){e=e|0;t=+t;n=n|0;f[(s[e+144>>2]|0)+(n*284|0)+252>>2]=t;return}function Zc(e,t,n){e=e|0;t=+t;n=n|0;f[(s[e+144>>2]|0)+(n*284|0)+232>>2]=t;return}function eh(e,t){e=e|0;t=t|0;return(s[e+144>>2]|0)+(t*284|0)+92|0}function th(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;QE(s[e+116>>2]|0,s[e+144>>2]|0,t,n);c=r;return}function nh(e,t,n,i,o,u,a,l){e=e|0;t=t|0;n=n|0;i=i|0;o=+o;u=+u;a=a|0;l=l|0;var h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;h=c;c=c+288|0;s[h+144>>2]=s[t+0>>2];s[h+148>>2]=s[t+4>>2];s[h+152>>2]=s[t+8>>2];s[h+156>>2]=s[t+12>>2];S=h+160|0;s[S+0>>2]=s[n+0>>2];s[S+4>>2]=s[n+4>>2];s[S+8>>2]=s[n+8>>2];s[S+12>>2]=s[n+12>>2];E=h+176|0;s[E+0>>2]=s[i+0>>2];s[E+4>>2]=s[i+4>>2];s[E+8>>2]=s[i+8>>2];s[E+12>>2]=s[i+12>>2];d=+f[a>>2];v=+f[a+4>>2];m=+f[a+8>>2];g=+f[a+16>>2];p=+f[a+12>>2];b=+f[a+20>>2];s[h+0>>2]=s[h+144>>2];s[h+4>>2]=s[h+148>>2];s[h+8>>2]=s[h+152>>2];s[h+12>>2]=s[h+156>>2];s[h+16>>2]=s[S+0>>2];s[h+20>>2]=s[S+4>>2];s[h+24>>2]=s[S+8>>2];s[h+28>>2]=s[S+12>>2];s[h+32>>2]=s[E+0>>2];s[h+36>>2]=s[E+4>>2];s[h+40>>2]=s[E+8>>2];s[h+44>>2]=s[E+12>>2];E=s[e+136>>2]|0;if((E|0)==(s[e+140>>2]|0)?(y=(E|0)==0?1:E<<1,(E|0)<(y|0)):0){if((y|0)==0)t=0;else{s[5004]=(s[5004]|0)+1;a=cM((y*284|3)+16|0)|0;if((a|0)==0)t=0;else{s[(a+19&-16)+ -4>>2]=a;t=a+19&-16}E=s[e+136>>2]|0}if((E|0)>0){S=0;do{a=t+(S*284|0)|0;if((a|0)!=0){w=s[e+144>>2]|0;n=a+0|0;a=w+(S*284|0)+0|0;i=n+92|0;do{s[n>>2]=s[a>>2];n=n+4|0;a=a+4|0}while((n|0)<(i|0));n=t+(S*284|0)+92|0;a=w+(S*284|0)+92|0;s[n+0>>2]=s[a+0>>2];s[n+4>>2]=s[a+4>>2];s[n+8>>2]=s[a+8>>2];s[n+12>>2]=s[a+12>>2];n=t+(S*284|0)+108|0;a=w+(S*284|0)+108|0;s[n+0>>2]=s[a+0>>2];s[n+4>>2]=s[a+4>>2];s[n+8>>2]=s[a+8>>2];s[n+12>>2]=s[a+12>>2];n=t+(S*284|0)+124|0;a=w+(S*284|0)+124|0;s[n+0>>2]=s[a+0>>2];s[n+4>>2]=s[a+4>>2];s[n+8>>2]=s[a+8>>2];s[n+12>>2]=s[a+12>>2];n=t+(S*284|0)+140|0;a=w+(S*284|0)+140|0;s[n+0>>2]=s[a+0>>2];s[n+4>>2]=s[a+4>>2];s[n+8>>2]=s[a+8>>2];s[n+12>>2]=s[a+12>>2];n=t+(S*284|0)+156|0;a=w+(S*284|0)+156|0;i=n+128|0;do{s[n>>2]=s[a>>2];n=n+4|0;a=a+4|0}while((n|0)<(i|0))}S=S+1|0}while((S|0)!=(E|0))}a=s[e+144>>2]|0;if((a|0)!=0){if((r[e+148>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+144>>2]=0}r[e+148>>0]=1;s[e+144>>2]=t;s[e+140>>2]=y;E=s[e+136>>2]|0}y=s[e+144>>2]|0;a=y+(E*284|0)|0;if((a|0)==0){S=E;t=y;E=S+1|0;s[e+136>>2]=E;S=t+(S*284|0)|0;t=e+116|0;E=s[t>>2]|0;KE(E,S,0);E=s[e+136>>2]|0;E=E+ -1|0;t=s[t>>2]|0;w=s[e+144>>2]|0;QE(t,w,E,0);c=h;return S|0}n=a+0|0;a=h+48|0;i=n+92|0;do{s[n>>2]=s[a>>2];n=n+4|0;a=a+4|0}while((n|0)<(i|0));n=y+(E*284|0)+92|0;s[n+0>>2]=s[h+240>>2];s[n+4>>2]=s[h+244>>2];s[n+8>>2]=s[h+248>>2];s[n+12>>2]=s[h+252>>2];n=y+(E*284|0)+108|0;s[n+0>>2]=s[h+224>>2];s[n+4>>2]=s[h+228>>2];s[n+8>>2]=s[h+232>>2];s[n+12>>2]=s[h+236>>2];n=y+(E*284|0)+124|0;s[n+0>>2]=s[h+208>>2];s[n+4>>2]=s[h+212>>2];s[n+8>>2]=s[h+216>>2];s[n+12>>2]=s[h+220>>2];n=y+(E*284|0)+140|0;s[n+0>>2]=s[h+192>>2];s[n+4>>2]=s[h+196>>2];s[n+8>>2]=s[h+200>>2];s[n+12>>2]=s[h+204>>2];y=y+(E*284|0)+156|0;n=y+0|0;a=h+0|0;i=n+48|0;do{s[n>>2]=s[a>>2];n=n+4|0;a=a+4|0}while((n|0)<(i|0));f[y+48>>2]=o;f[y+52>>2]=p;f[y+56>>2]=u;f[y+60>>2]=d;f[y+64>>2]=v;f[y+68>>2]=m;f[y+72>>2]=g;f[y+76>>2]=0;f[y+80>>2]=0;f[y+84>>2]=0;f[y+88>>2]=.10000000149011612;f[y+92>>2]=b;f[y+96>>2]=0;f[y+100>>2]=0;r[y+104>>0]=l&1;n=y+105|0;a=h+256|0;i=n+23|0;do{r[n>>0]=r[a>>0]|0;n=n+1|0;a=a+1|0}while((n|0)<(i|0));S=s[e+136>>2]|0;t=s[e+144>>2]|0;E=S+1|0;s[e+136>>2]=E;S=t+(S*284|0)|0;t=e+116|0;E=s[t>>2]|0;KE(E,S,0);E=s[e+136>>2]|0;E=E+ -1|0;t=s[t>>2]|0;w=s[e+144>>2]|0;QE(t,w,E,0);c=h;return S|0}function rh(e){e=e|0;return s[e+136>>2]|0}function ih(e){e=e|0;return s[e+116>>2]|0}function sh(e,t){e=e|0;t=t|0;return(s[e+144>>2]|0)+(t*284|0)|0}function oh(e,t,n){e=e|0;t=+t;n=n|0;f[(s[e+144>>2]|0)+(n*284|0)+256>>2]=t;return}function uh(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+24>>2]&127](e,t,n,r);c=i;return}function ah(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function fh(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;var o=0,u=0;o=c;u=cM(44)|0;e:do if((u|0)==0){while(1){u=s[5158]|0;s[5158]=u+0;if((u|0)==0)break;XD[u&3]();u=cM(44)|0;if((u|0)!=0)break e}u=On(4)|0;s[u>>2]=20472;Ln(u|0,20520,265)}while(0);s[u>>2]=e;s[u+4>>2]=t;t=u+8|0;s[t+0>>2]=s[n+0>>2];s[t+4>>2]=s[n+4>>2];s[t+8>>2]=s[n+8>>2];s[t+12>>2]=s[n+12>>2];n=u+24|0;s[n+0>>2]=s[r+0>>2];s[n+4>>2]=s[r+4>>2];s[n+8>>2]=s[r+8>>2];s[n+12>>2]=s[r+12>>2];f[u+40>>2]=i;c=o;return u|0}function lh(e){e=e|0;return s[e>>2]|0}function ch(e,t){e=e|0;t=t|0;s[e>>2]=t;return}function hh(e){e=e|0;return s[e+4>>2]|0}function ph(e,t){e=e|0;t=t|0;s[e+4>>2]=t;return}function dh(e){e=e|0;return e+8|0}function vh(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+8>>2]=s[t+0>>2];s[e+12>>2]=s[t+4>>2];s[e+16>>2]=s[t+8>>2];s[e+20>>2]=s[t+12>>2];c=n;return}function mh(e){e=e|0;return e+24|0}function gh(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+24>>2]=s[t+0>>2];s[e+28>>2]=s[t+4>>2];s[e+32>>2]=s[t+8>>2];s[e+36>>2]=s[t+12>>2];c=n;return}function yh(e){e=e|0;return+(+f[e+40>>2])}function bh(e,t){e=e|0;t=+t;f[e+40>>2]=t;return}function wh(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Eh(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Sh(e){e=e|0;var t=0,n=0,i=0,o=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(635)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}f[n+164>>2]=1;f[n+168>>2]=1;f[n+172>>2]=1;f[n+176>>2]=0;s[n+180>>2]=0;f[n+184>>2]=0xde0b6b000000000;i=n+188|0;o=n+204|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[o>>2]=1;s[n+208>>2]=-1;s[n+212>>2]=-1;s[n+216>>2]=1;f[n+220>>2]=0;f[n+224>>2]=.5;f[n+228>>2]=0;f[n+232>>2]=0;s[n+236>>2]=1;s[n+240>>2]=0;f[n+244>>2]=1;o=n+248|0;i=n+4|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=n+8|0;o=n+24|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;f[o>>2]=1;o=n+28|0;i=n+44|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;f[i>>2]=1;i=n+48|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;s[n>>2]=3912;r[n+500>>0]=1;s[n+496>>2]=0;s[n+488>>2]=0;s[n+492>>2]=0;uS(n,e);c=t;return n|0}function xh(e){e=e|0;return e+4|0}function Th(e,t){e=e|0;t=t|0;var n=0;n=c;lS(e,t);c=n;return}function Nh(e,t,n){e=e|0;t=+t;n=+n;f[e+472>>2]=t;f[e+476>>2]=n;return}function Ch(e,t,n){e=e|0;t=+t;n=+n;if(t<0)t=0;else t=t>1?1:t;f[e+444>>2]=t;if(n<0)n=0;else n=n>1?1:n;f[e+448>>2]=n;return}function kh(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;fS(e,t,n);c=r;return}function Lh(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0;n=c;s[e+348>>2]=s[t+0>>2];s[e+352>>2]=s[t+4>>2];s[e+356>>2]=s[t+8>>2];s[e+360>>2]=s[t+12>>2];o=+f[e+344>>2];i=+f[e+352>>2]*o;r=+f[e+356>>2]*o;f[e+560>>2]=+f[e+348>>2]*o;f[e+564>>2]=i;f[e+568>>2]=r;f[e+572>>2]=0;c=n;return}function Ah(e,t){e=e|0;t=t|0;var n=0,r=0;r=+f[t+4>>2]*+f[e+548>>2];n=+f[t+8>>2]*+f[e+552>>2];f[e+428>>2]=+f[e+428>>2]+ +f[t>>2]*+f[e+544>>2];f[e+432>>2]=+f[e+432>>2]+r;f[e+436>>2]=+f[e+436>>2]+n;return}function Oh(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0,l=0;r=+f[e+348>>2];s=+f[e+352>>2];o=+f[t+4>>2]*s;u=+f[e+356>>2];a=+f[t+8>>2]*u;f[e+412>>2]=+f[e+412>>2]+ +f[t>>2]*r;f[e+416>>2]=+f[e+416>>2]+o;f[e+420>>2]=+f[e+420>>2]+a;r=+f[t>>2]*r;s=+f[t+4>>2]*s;u=+f[t+8>>2]*u;a=+f[n+4>>2];o=+f[n+8>>2];l=+f[n>>2];i=(o*r-l*u)*+f[e+548>>2];r=(l*s-a*r)*+f[e+552>>2];f[e+428>>2]=+f[e+428>>2]+(a*u-o*s)*+f[e+544>>2];f[e+432>>2]=+f[e+432>>2]+i;f[e+436>>2]=+f[e+436>>2]+r;return}function Mh(e,t){e=e|0;t=t|0;var n=0,r=0;r=+f[t+4>>2]*+f[e+352>>2];n=+f[t+8>>2]*+f[e+356>>2];f[e+412>>2]=+f[e+412>>2]+ +f[t>>2]*+f[e+348>>2];f[e+416>>2]=+f[e+416>>2]+r;f[e+420>>2]=+f[e+420>>2]+n;return}function _h(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,s=0,o=0;o=+f[t>>2];s=+f[t+4>>2];i=+f[t+8>>2];r=(+f[e+280>>2]*o+ +f[e+284>>2]*s+ +f[e+288>>2]*i)*+f[e+548>>2];n=(+f[e+296>>2]*o+ +f[e+300>>2]*s+ +f[e+304>>2]*i)*+f[e+552>>2];f[e+328>>2]=+f[e+328>>2]+(+f[e+264>>2]*o+ +f[e+268>>2]*s+ +f[e+272>>2]*i)*+f[e+544>>2];f[e+332>>2]=+f[e+332>>2]+r;f[e+336>>2]=+f[e+336>>2]+n;return}function Dh(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;Ph(e,t,n);c=r;return}function Ph(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0,l=0,h=0,p=0;r=c;if(!(+f[e+344>>2]!=0)){c=r;return}Bh(e,t);o=+f[t>>2]*+f[e+348>>2];a=+f[t+4>>2]*+f[e+352>>2];h=+f[t+8>>2]*+f[e+356>>2];u=+f[n+4>>2];p=+f[n+8>>2];l=+f[n>>2];s=(+f[e+280>>2]*(u*h-p*a)+ +f[e+284>>2]*(p*o-l*h)+ +f[e+288>>2]*(l*a-u*o))*+f[e+548>>2];i=(+f[e+296>>2]*(u*h-p*a)+ +f[e+300>>2]*(p*o-l*h)+ +f[e+304>>2]*(l*a-u*o))*+f[e+552>>2];f[e+328>>2]=+f[e+328>>2]+(+f[e+264>>2]*(u*h-p*a)+ +f[e+268>>2]*(p*o-l*h)+ +f[e+272>>2]*(l*a-u*o))*+f[e+544>>2];f[e+332>>2]=+f[e+332>>2]+s;f[e+336>>2]=+f[e+336>>2]+i;c=r;return}function Hh(e,t){e=e|0;t=t|0;var n=0;n=c;Bh(e,t);c=n;return}function Bh(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;i=+f[e+344>>2];r=+f[t+4>>2]*+f[e+352>>2]*i;n=+f[t+8>>2]*+f[e+356>>2]*i;f[e+312>>2]=+f[e+312>>2]+ +f[t>>2]*+f[e+348>>2]*i;f[e+316>>2]=+f[e+316>>2]+r;f[e+320>>2]=+f[e+320>>2]+n;return}function jh(e){e=e|0;var t=0,n=0,r=0,i=0,s=0,o=0,u=0,a=0,l=0,c=0,h=0,p=0;p=+f[e+4>>2];o=+f[e+396>>2];h=+f[e+8>>2];i=+f[e+400>>2];c=+f[e+12>>2];n=+f[e+404>>2];l=+f[e+20>>2];a=+f[e+24>>2];u=+f[e+28>>2];s=+f[e+36>>2];r=+f[e+40>>2];t=+f[e+44>>2];f[e+264>>2]=p*p*o+h*h*i+c*c*n;f[e+268>>2]=p*o*l+h*i*a+c*n*u;f[e+272>>2]=p*o*s+h*i*r+c*n*t;f[e+276>>2]=0;f[e+280>>2]=p*o*l+h*i*a+c*n*u;f[e+284>>2]=l*o*l+a*i*a+u*n*u;f[e+288>>2]=o*l*s+i*a*r+n*u*t;f[e+292>>2]=0;f[e+296>>2]=p*o*s+h*i*r+c*n*t;f[e+300>>2]=l*o*s+a*i*r+u*n*t;f[e+304>>2]=s*o*s+r*i*r+t*n*t;f[e+308>>2]=0;return}function Fh(e){e=e|0;return e+312|0}function Ih(e){e=e|0;return e+328|0}function qh(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+312>>2]=s[t+0>>2];s[e+316>>2]=s[t+4>>2];s[e+320>>2]=s[t+8>>2];s[e+324>>2]=s[t+12>>2];c=n;return}function Rh(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+328>>2]=s[t+0>>2];s[e+332>>2]=s[t+4>>2];s[e+336>>2]=s[t+8>>2];s[e+340>>2]=s[t+12>>2];c=n;return}function Uh(e){e=e|0;return s[e+480>>2]|0}function zh(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+544>>2]=s[t+0>>2];s[e+548>>2]=s[t+4>>2];s[e+552>>2]=s[t+8>>2];s[e+556>>2]=s[t+12>>2];c=n;return}function Wh(e,t){e=e|0;t=t|0;if((s[t+236>>2]&2|0)==0)t=0;return t|0}function Xh(e){e=e|0;return s[e+192>>2]|0}function Vh(e,t){e=e|0;t=+t;f[e+184>>2]=t;return}function $h(e,t){e=e|0;t=t|0;var n=0;n=c;if(((s[e+216>>2]|0)+ -4|0)>>>0<2){c=n;return}s[e+216>>2]=t;c=n;return}function Jh(e,t){e=e|0;t=t|0;s[e+216>>2]=t;return}function Kh(e){e=e|0;var t=0;t=c;if((s[e+204>>2]&3|0)!=0){c=t;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=t;return}function Qh(e,t){e=e|0;t=t|0;var n=0;n=c;if(!t?(s[e+204>>2]&3|0)!=0:0){c=n;return}if(!(((s[e+216>>2]|0)+ -4|0)>>>0<2))s[e+216>>2]=1;f[e+220>>2]=0;c=n;return}function Gh(e){e=e|0;e=s[e+216>>2]|0;return((e|0)==2?0:(e|0)!=5)|0}function Yh(e){e=e|0;return(s[e+204>>2]&2|0)!=0|0}function Zh(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+228>>2]=t;return}function ep(e,t){e=e|0;t=+t;s[e+260>>2]=(s[e+260>>2]|0)+1;f[e+224>>2]=t;return}function tp(e){e=e|0;return e+4|0}function np(e){e=e|0;return s[e+204>>2]|0}function rp(e,t){e=e|0;t=t|0;s[e+204>>2]=t;return}function ip(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[t+16>>2];s[e+24>>2]=s[t+20>>2];s[e+28>>2]=s[t+24>>2];s[e+32>>2]=s[t+28>>2];s[e+36>>2]=s[t+32>>2];s[e+40>>2]=s[t+36>>2];s[e+44>>2]=s[t+40>>2];s[e+48>>2]=s[t+44>>2];s[e+52>>2]=s[t+48>>2];s[e+56>>2]=s[t+52>>2];s[e+60>>2]=s[t+56>>2];s[e+64>>2]=s[t+60>>2];c=n;return}function sp(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=n;return}function op(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+8>>2]&511](e);c=t;return}function up(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(75)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}Qk(n,e);s[n>>2]=11032;s[n+52>>2]=0;c=t;return n|0}function ap(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function fp(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function lp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function cp(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(75)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}Qk(n,e);s[n>>2]=11136;s[n+52>>2]=2;c=t;return n|0}function hp(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function pp(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function dp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function vp(){var e=0,t=0,n=0,r=0;e=c;r=cM(64)|0;e:do if((r|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();r=cM(64)|0;if((r|0)!=0)break e}r=On(4)|0;s[r>>2]=20472;Ln(r|0,20520,265)}while(0);t=r+48|0;n=r;do n=n+16|0;while((n|0)!=(t|0));c=e;return r|0}function mp(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0;n=c;r=cM(64)|0;e:do if((r|0)==0){while(1){r=s[5158]|0;s[5158]=r+0;if((r|0)==0)break;XD[r&3]();r=cM(64)|0;if((r|0)!=0)break e}o=On(4)|0;s[o>>2]=20472;Ln(o|0,20520,265)}while(0);i=r+48|0;o=r;do o=o+16|0;while((o|0)!=(i|0));fd(r,e);s[i+0>>2]=s[t+0>>2];s[i+4>>2]=s[t+4>>2];s[i+8>>2]=s[t+8>>2];s[i+12>>2]=s[t+12>>2];c=n;return r|0}function gp(e){e=e|0;var t=0;t=c;yp(e);c=t;return}function yp(e){e=e|0;var t=0;t=c;f[e>>2]=1;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;f[e+20>>2]=1;s[e+24>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;s[e+36>>2]=0;f[e+40>>2]=1;f[e+44>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;s[e+60>>2]=0;c=t;return}function bp(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+48>>2]=s[t+0>>2];s[e+52>>2]=s[t+4>>2];s[e+56>>2]=s[t+8>>2];s[e+60>>2]=s[t+12>>2];c=n;return}function wp(e,t){e=e|0;t=t|0;var n=0;n=c;fd(e,t);c=n;return}function Ep(e){e=e|0;return e+48|0}function Sp(e){e=e|0;var t=0;t=c;c=c+16|0;if((r[48]|0)==0?(Zt(48)|0)!=0:0)sn(48);Qn(e,t);s[8]=s[t+0>>2];s[9]=s[t+4>>2];s[10]=s[t+8>>2];s[11]=s[t+12>>2];c=t;return 32}function xp(e){e=e|0;return e|0}function Tp(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Np(e){e=e|0;return s[e+24>>2]|0}function Cp(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+32>>2]&127](e,t,n,r);c=i;return}function kp(e){e=e|0;var t=0;t=c;e=s[e+68>>2]|0;e=dD[s[(s[e>>2]|0)+36>>2]&127](e)|0;c=t;return e|0}function Lp(e){e=e|0;return e+28|0}function Ap(e,t){e=e|0;t=t|0;var n=0;n=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,1,-1);c=n;return}function Op(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,-1);c=r;return}function Mp(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,r);c=i;return}function _p(e){e=e|0;return s[e+68>>2]|0}function Dp(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;var o=0;o=c;yy(e,t,n,r,i,s);c=o;return}function Pp(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;wy(e,t,n,r);c=i;return}function Hp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Bp(e){e=e|0;return+(+f[e>>2])}function jp(e){e=e|0;return+(+f[e+4>>2])}function Fp(e){e=e|0;return+(+f[e+8>>2])}function Ip(e){e=e|0;return+(+f[e+12>>2])}function qp(e,t){e=e|0;t=+t;f[e>>2]=t;return}function Rp(e,t){e=e|0;t=+t;f[e+4>>2]=t;return}function Up(e,t){e=e|0;t=+t;f[e+8>>2]=t;return}function zp(e,t){e=e|0;t=+t;f[e+12>>2]=t;return}function Wp(e){e=e|0;var t=0;t=c;if((e|0)!=0)hM(e);c=t;return}function Xp(e){e=e|0;var t=0,n=0;t=c;s[5004]=(s[5004]|0)+1;n=cM(75)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}Qk(n,e);c=t;return n|0}function Vp(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+24>>2]&127](e,t);c=n;return}function $p(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;bD[s[(s[e>>2]|0)+32>>2]&15](e,t,n);c=r;return}function Jp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Kp(){var e=0,t=0,n=0;e=c;t=cM(4)|0;if((t|0)!=0){n=t;s[n>>2]=192;c=e;return n|0}while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0){t=4;break}XD[t&3]();n=cM(4)|0;if((n|0)!=0){t=5;break}}if((t|0)==4){n=On(4)|0;s[n>>2]=20472;Ln(n|0,20520,265)}else if((t|0)==5){s[n>>2]=192;c=e;return n|0}return 0}function Qp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Gp(e,t){e=e|0;t=t|0;r[e+21>>0]=t&1;return}function Yp(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}lD[s[(s[e>>2]|0)+4>>2]&511](e);c=t;return}function Zp(e){e=e|0;return}function ed(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function td(e){e=e|0;return}function nd(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;return}function rd(e,t,n,r){e=e|0;t=t|0;n=n|0;r=+r;return}function id(e){e=e|0;return}function sd(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function od(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;e=c;i=s[t>>2]|0;r=s[n>>2]|0;if((s[i+236>>2]|0)!=4)i=0;if((s[r+236>>2]|0)!=4)r=0;if((i|0)!=0)WD[s[(s[i>>2]|0)+28>>2]&127](i,n,t);if((r|0)==0){c=e;return 0}WD[s[(s[r>>2]|0)+28>>2]&127](r,t,n);c=e;return 0}function ud(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;e=c;o=s[t>>2]|0;i=s[n>>2]|0;if((s[o+236>>2]|0)!=4)o=0;if((s[i+236>>2]|0)!=4)i=0;if((o|0)!=0)JD[s[(s[o>>2]|0)+32>>2]&127](o,n,r,t);if((i|0)==0){c=e;return 0}JD[s[(s[i>>2]|0)+32>>2]&127](i,t,r,n);c=e;return 0}function ad(e,t,n){e=e|0;t=t|0;n=n|0;return}function fd(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,s=0,o=0,u=0,a=0;s=+f[t>>2];r=+f[t+4>>2];a=+f[t+8>>2];o=+f[t+12>>2];i=s*(2/(s*s+r*r+a*a+o*o));n=r*(2/(s*s+r*r+a*a+o*o));u=a*(2/(s*s+r*r+a*a+o*o));f[e>>2]=1-(r*n+a*u);f[e+4>>2]=s*n-o*u;f[e+8>>2]=s*u+o*n;f[e+12>>2]=0;f[e+16>>2]=s*n+o*u;f[e+20>>2]=1-(s*i+a*u);f[e+24>>2]=r*u-o*i;f[e+28>>2]=0;f[e+32>>2]=s*u-o*n;f[e+36>>2]=r*u+o*i;f[e+40>>2]=1-(s*i+r*n);f[e+44>>2]=0;return}function ld(e){e=e|0;return}function cd(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function hd(e,t){e=e|0;t=t|0;var n=0;n=c;if((i[t+4>>1]&i[e+14>>1])<<16>>16==0){t=0;c=n;return t|0}t=(i[e+12>>1]&i[t+6>>1])<<16>>16!=0;c=n;return t|0}function pd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;f[e+4>>2]=+f[t+24>>2];r=s[t>>2]|0;s[e+8>>2]=r;if(n){s[e+52>>2]=s[t+8>>2];s[e+56>>2]=s[t+12>>2];s[e+60>>2]=s[t+16>>2];s[e+64>>2]=s[t+20>>2]}else{l=+f[t+8>>2];a=+f[t+12>>2];u=+f[t+16>>2];o=+f[r+20>>2]*l+ +f[r+24>>2]*a+ +f[r+28>>2]*u;i=+f[r+36>>2]*l+ +f[r+40>>2]*a+ +f[r+44>>2]*u;f[e+52>>2]=+f[r+4>>2]*l+ +f[r+8>>2]*a+ +f[r+12>>2]*u;f[e+56>>2]=o;f[e+60>>2]=i;f[e+64>>2]=0}l=+f[t+24>>2];f[e+68>>2]=(1-l)*+f[e+20>>2]+ +f[e+36>>2]*l;f[e+72>>2]=(1-l)*+f[e+24>>2]+l*+f[e+40>>2];f[e+76>>2]=(1-l)*+f[e+28>>2]+l*+f[e+44>>2];return+(+f[t+24>>2])}function dd(e,t,n,r,i,s,o,u,a,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;l=l|0;var h=0,p=0;p=c;h=e;do h=h+16|0;while((h|0)!=(e+48|0));f[e>>2]=+f[t>>2];f[e+4>>2]=+f[n>>2];f[e+8>>2]=+f[r>>2];f[e+12>>2]=0;f[e+16>>2]=+f[i>>2];f[e+20>>2]=+f[s>>2];f[e+24>>2]=+f[o>>2];f[e+28>>2]=0;f[e+32>>2]=+f[u>>2];f[e+36>>2]=+f[a>>2];f[e+40>>2]=+f[l>>2];f[e+44>>2]=0;c=p;return}function vd(e){e=e|0;return}function md(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function gd(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0;n=c;c=c+176|0;dd(n+128|0,e+68|0,e+84|0,e+100|0,e+72|0,e+88|0,e+104|0,e+76|0,e+92|0,e+108|0);l=-+f[e+116>>2];a=-+f[e+120>>2];o=-+f[e+124>>2];r=+f[n+128>>2]*l+ +f[n+132>>2]*a+ +f[n+136>>2]*o;i=+f[n+144>>2]*l+ +f[n+148>>2]*a+ +f[n+152>>2]*o;o=+f[n+160>>2]*l+ +f[n+164>>2]*a+ +f[n+168>>2]*o;u=n;do u=u+16|0;while((u|0)!=(n+48|0));s[n+0>>2]=s[n+128>>2];s[n+4>>2]=s[n+132>>2];s[n+8>>2]=s[n+136>>2];s[n+12>>2]=s[n+140>>2];s[n+16>>2]=s[n+144>>2];s[n+20>>2]=s[n+148>>2];s[n+24>>2]=s[n+152>>2];s[n+28>>2]=s[n+156>>2];s[n+32>>2]=s[n+160>>2];s[n+36>>2]=s[n+164>>2];s[n+40>>2]=s[n+168>>2];s[n+44>>2]=s[n+172>>2];f[n+48>>2]=r;f[n+52>>2]=i;f[n+56>>2]=o;f[n+60>>2]=0;bd(n+64|0,n,e+4|0);s[t+0>>2]=s[n+64>>2];s[t+4>>2]=s[n+68>>2];s[t+8>>2]=s[n+72>>2];s[t+12>>2]=s[n+76>>2];s[t+16>>2]=s[n+80>>2];s[t+20>>2]=s[n+84>>2];s[t+24>>2]=s[n+88>>2];s[t+28>>2]=s[n+92>>2];s[t+32>>2]=s[n+96>>2];s[t+36>>2]=s[n+100>>2];s[t+40>>2]=s[n+104>>2];s[t+44>>2]=s[n+108>>2];s[t+48>>2]=s[n+112>>2];s[t+52>>2]=s[n+116>>2];s[t+56>>2]=s[n+120>>2];s[t+60>>2]=s[n+124>>2];c=n;return}function yd(e,t){e=e|0;t=t|0;var n=0;n=c;c=c+64|0;bd(n,t,e+68|0);s[e+4>>2]=s[n+0>>2];s[e+8>>2]=s[n+4>>2];s[e+12>>2]=s[n+8>>2];s[e+16>>2]=s[n+12>>2];s[e+20>>2]=s[n+16>>2];s[e+24>>2]=s[n+20>>2];s[e+28>>2]=s[n+24>>2];s[e+32>>2]=s[n+28>>2];s[e+36>>2]=s[n+32>>2];s[e+40>>2]=s[n+36>>2];s[e+44>>2]=s[n+40>>2];s[e+48>>2]=s[n+44>>2];s[e+52>>2]=s[n+48>>2];s[e+56>>2]=s[n+52>>2];s[e+60>>2]=s[n+56>>2];s[e+64>>2]=s[n+60>>2];c=n;return}function bd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;r=c;c=c+96|0;y=+f[n>>2];o=+f[t>>2];g=+f[n+16>>2];u=+f[t+4>>2];m=+f[n+32>>2];l=+f[t+8>>2];f[r+80>>2]=y*o+g*u+m*l;v=+f[n+4>>2];d=+f[n+20>>2];p=+f[n+36>>2];f[r+76>>2]=v*o+d*u+p*l;h=+f[n+8>>2];i=+f[n+24>>2];a=+f[n+40>>2];f[r+72>>2]=h*o+i*u+a*l;l=+f[t+16>>2];u=+f[t+20>>2];o=+f[t+24>>2];f[r+68>>2]=y*l+g*u+m*o;f[r+64>>2]=v*l+d*u+p*o;f[r+60>>2]=h*l+i*u+a*o;o=+f[t+32>>2];u=+f[t+36>>2];l=+f[t+40>>2];f[r+56>>2]=y*o+g*u+m*l;f[r+52>>2]=v*o+d*u+p*l;f[r+48>>2]=h*o+i*u+a*l;dd(r,r+80|0,r+76|0,r+72|0,r+68|0,r+64|0,r+60|0,r+56|0,r+52|0,r+48|0);l=+f[n+48>>2];a=+f[n+52>>2];u=+f[n+56>>2];i=l*+f[t>>2]+a*+f[t+4>>2]+u*+f[t+8>>2]+ +f[t+48>>2];o=l*+f[t+16>>2]+a*+f[t+20>>2]+u*+f[t+24>>2]+ +f[t+52>>2];u=l*+f[t+32>>2]+a*+f[t+36>>2]+u*+f[t+40>>2]+ +f[t+56>>2];t=e;do t=t+16|0;while((t|0)!=(e+48|0));s[e+0>>2]=s[r+0>>2];s[e+4>>2]=s[r+4>>2];s[e+8>>2]=s[r+8>>2];s[e+12>>2]=s[r+12>>2];s[e+16>>2]=s[r+16>>2];s[e+20>>2]=s[r+20>>2];s[e+24>>2]=s[r+24>>2];s[e+28>>2]=s[r+28>>2];s[e+32>>2]=s[r+32>>2];s[e+36>>2]=s[r+36>>2];s[e+40>>2]=s[r+40>>2];s[e+44>>2]=s[r+44>>2];f[e+48>>2]=i;f[e+52>>2]=o;f[e+56>>2]=u;f[e+60>>2]=0;c=r;return}function wd(e){e=e|0;return}function Ed(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Sd(e,t){e=e|0;t=t|0;var n=0;n=c;if((i[t+4>>1]&i[e+10>>1])<<16>>16==0){t=0;c=n;return t|0}t=(i[e+8>>1]&i[t+6>>1])<<16>>16!=0;c=n;return t|0}function xd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0;r=c;f[e+4>>2]=+f[t+40>>2];i=s[t>>2]|0;s[e+76>>2]=i;if(n){s[e+44>>2]=s[t+8>>2];s[e+48>>2]=s[t+12>>2];s[e+52>>2]=s[t+16>>2];s[e+56>>2]=s[t+20>>2];n=e+60|0;e=t+24|0;s[n+0>>2]=s[e+0>>2];s[n+4>>2]=s[e+4>>2];s[n+8>>2]=s[e+8>>2];s[n+12>>2]=s[e+12>>2];o=+f[t+40>>2];c=r;return+o}else{h=+f[t+8>>2];l=+f[t+12>>2];a=+f[t+16>>2];u=+f[i+20>>2]*h+ +f[i+24>>2]*l+ +f[i+28>>2]*a;o=+f[i+36>>2]*h+ +f[i+40>>2]*l+ +f[i+44>>2]*a;f[e+44>>2]=+f[i+4>>2]*h+ +f[i+8>>2]*l+ +f[i+12>>2]*a;f[e+48>>2]=u;f[e+52>>2]=o;f[e+56>>2]=0;n=e+60|0;e=t+24|0;s[n+0>>2]=s[e+0>>2];s[n+4>>2]=s[e+4>>2];s[n+8>>2]=s[e+8>>2];s[n+12>>2]=s[e+12>>2];o=+f[t+40>>2];c=r;return+o}return 0}function Td(e){e=e|0;return}function Nd(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Cd(e,t){e=e|0;t=t|0;var n=0;n=c;if((i[t+4>>1]&i[e+6>>1])<<16>>16==0){t=0;c=n;return t|0}t=(i[e+4>>1]&i[t+6>>1])<<16>>16!=0;c=n;return t|0}function kd(e,t,n,r,i,s,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;var a=0,f=0;f=c;a=+Jt(960,e|0,t|0,n|0,r|0,i|0,s|0,o|0,u|0);c=f;return+a}function Ld(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0;n=c;if((r[e+527>>0]|0)!=0){s[t>>2]=0;s[t+4>>2]=0;c=n;return}s[t>>2]=3;s[t+4>>2]=3;l=s[e+28>>2]|0;a=s[e+32>>2]|0;Ad(e,l+4|0,a+4|0,l+264|0,a+264|0);if(((r[e+526>>0]|0)!=0?(i=s[t>>2]|0,s[t>>2]=i+1,o=s[t+4>>2]|0,s[t+4>>2]=o+ -1,u=+f[e+456>>2],+f[e+444>>2]<u):0)?+f[e+448>>2]<u:0){s[t>>2]=i+2;s[t+4>>2]=o+ -2}if((r[e+525>>0]|0)==0){c=n;return}s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1;c=n;return}function Ad(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,K=0,G=0,Y=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0,ut=0,at=0,ft=0,lt=0,ct=0,ht=0;u=c;c=c+272|0;f[e+504>>2]=0;f[e+500>>2]=0;r[e+525>>0]=0;r[e+526>>0]=0;if((r[e+552>>0]|0)!=0?(r[e+527>>0]|0)==0:0){at=+f[e+556>>2];tt=+f[e+560>>2];ft=+f[e+564>>2];nt=+f[e+568>>2];it=at*(2/(at*at+tt*tt+ft*ft+nt*nt));ct=tt*(2/(at*at+tt*tt+ft*ft+nt*nt));st=ft*(2/(at*at+tt*tt+ft*ft+nt*nt));bd(u+208|0,t,e+300|0);bd(u+144|0,n,e+364|0);D=+f[u+144>>2];H=+f[u+148>>2];h=+f[u+152>>2];z=(1-(tt*ct+ft*st))*D+(at*ct+nt*st)*H+(at*st-nt*ct)*h;V=(at*ct-nt*st)*D+(1-(at*it+ft*st))*H+(tt*st+nt*it)*h;K=(at*st+nt*ct)*D+(tt*st-nt*it)*H+(1-(at*it+tt*ct))*h;B=+f[u+160>>2];j=+f[u+164>>2];l=+f[u+168>>2];G=(1-(tt*ct+ft*st))*B+(at*ct+nt*st)*j+(at*st-nt*ct)*l;Y=(at*ct-nt*st)*B+(1-(at*it+ft*st))*j+(tt*st+nt*it)*l;et=(at*st+nt*ct)*B+(tt*st-nt*it)*j+(1-(at*it+tt*ct))*l;F=+f[u+176>>2];I=+f[u+180>>2];q=+f[u+184>>2];ut=(1-(tt*ct+ft*st))*F+(at*ct+nt*st)*I+(at*st-nt*ct)*q;ft=(at*ct-nt*st)*F+(1-(at*it+ft*st))*I+(tt*st+nt*it)*q;ct=(at*st+nt*ct)*F+(tt*st-nt*it)*I+(1-(at*it+tt*ct))*q;tt=+f[u+208>>2];it=+f[u+224>>2];at=+f[u+240>>2];nt=+f[u+212>>2];st=+f[u+228>>2];lt=+f[u+244>>2];rt=+f[u+216>>2];ot=+f[u+232>>2];ht=+f[u+248>>2];R=-+f[u+256>>2];U=-+f[u+260>>2];a=-+f[u+264>>2];h=D*0+H*0+h*0+ +f[u+192>>2]+(K*(rt*R+ot*U+ht*a)+(z*(tt*R+it*U+at*a)+V*(nt*R+st*U+lt*a)));l=B*0+j*0+l*0+ +f[u+196>>2]+(et*(rt*R+ot*U+ht*a)+(G*(tt*R+it*U+at*a)+Y*(nt*R+st*U+lt*a)));a=F*0+I*0+q*0+ +f[u+200>>2]+(ct*(rt*R+ot*U+ht*a)+(ut*(tt*R+it*U+at*a)+ft*(nt*R+st*U+lt*a)));f[u+80>>2]=z*tt+V*nt+K*rt;f[u+84>>2]=z*it+V*st+K*ot;f[u+88>>2]=z*at+V*lt+K*ht;f[u+92>>2]=0;f[u+96>>2]=G*tt+Y*nt+et*rt;f[u+100>>2]=G*it+Y*st+et*ot;f[u+104>>2]=G*at+Y*lt+et*ht;f[u+108>>2]=0;f[u+112>>2]=ut*tt+ft*nt+ct*rt;f[u+116>>2]=ut*it+ft*st+ct*ot;f[u+120>>2]=ut*at+ft*lt+ct*ht;f[u+124>>2]=0;f[u+128>>2]=h;f[u+132>>2]=l;f[u+136>>2]=a;f[u+140>>2]=0;Qn(u+80|0,u+64|0);a=+f[u+64>>2];l=+f[u+68>>2];h=+f[u+72>>2];if(+W(+(a*a+l*l+h*h))<1.1920928955078125e-7){c=u;return}f[e+472>>2]=0;ht=1/+X(+(a*a+l*l+h*h));f[e+460>>2]=a*ht;f[e+464>>2]=l*ht;f[e+468>>2]=h*ht;ht=+f[u+76>>2];ht=ht<-1?-1:ht;ht=+Q(+(ht>1?1:ht))*2;f[e+504>>2]=ht;if(+W(+ht)<1.1920928955078125e-7){c=u;return}r[e+526>>0]=1;c=u;return}Qn(t,u+48|0);Qn(e+300|0,u+32|0);k=+f[u+60>>2];x=+f[u+32>>2];A=+f[u+48>>2];N=+f[u+44>>2];C=+f[u+52>>2];w=+f[u+40>>2];T=+f[u+56>>2];L=+f[u+36>>2];Qn(n,u+16|0);Qn(e+364|0,u);v=+f[u+28>>2];l=+f[u>>2];g=+f[u+16>>2];p=+f[u+12>>2];d=+f[u+20>>2];y=+f[u+8>>2];h=+f[u+24>>2];m=+f[u+4>>2];a=-(v*l+g*p+d*y-h*m);E=-(l*h+(p*d+v*m)-g*y);b=-(v*y+p*h+g*m-l*d);F=(k*x+A*N+C*w-T*L)*(v*p-l*g-d*m-y*h)+(k*N-x*A-C*L-w*T)*a+(k*w+N*T+A*L-x*C)*E-(x*T+(N*C+k*L)-A*w)*b;q=(k*x+A*N+C*w-T*L)*b+((x*T+(N*C+k*L)-A*w)*(v*p-l*g-d*m-y*h)+(k*N-x*A-C*L-w*T)*E)-(k*w+N*T+A*L-x*C)*a;D=(x*T+(N*C+k*L)-A*w)*a+((k*w+N*T+A*L-x*C)*(v*p-l*g-d*m-y*h)+(k*N-x*A-C*L-w*T)*b)-(k*x+A*N+C*w-T*L)*E;R=(k*N-x*A-C*L-w*T)*(v*p-l*g-d*m-y*h)-(k*x+A*N+C*w-T*L)*a-(x*T+(N*C+k*L)-A*w)*E-(k*w+N*T+A*L-x*C)*b;O=-F-q*0-D*0;_=(D+R*0-F*0)*-D+(R*(R+q*0-D*0)+O*-F)-(R*0+F*0-q)*-q;j=(R*0+F*0-q)*-F+(R*(D+R*0-F*0)+O*-q)-(R+q*0-D*0)*-D;O=(R+q*0-D*0)*-q+(R*(R*0+F*0-q)+O*-D)-(D+R*0-F*0)*-F;B=1/+X(+(O*O+(_*_+j*j)));if(B*O*0+(B*j*0+B*_)<-.9999998807907104)if(+W(0)>.7071067690849304){M=0;O=S;I=S;_=0}else{M=-0;O=1;I=0;_=0}else{ht=+X(+((B*O*0+(B*j*0+B*_)+1)*2));M=(B*O*0-B*j*0)*(1/ht);O=(B*_*0-B*O)*(1/ht);I=(B*j-B*_*0)*(1/ht);_=ht*.5}U=1/+X(+(_*_+(I*I+(O*O+M*M))));B=M*U;j=O*U;I=I*U;U=_*U;ht=1/+X(+((R*U-F*-B-q*-j-D*-I)*(R*U-F*-B-q*-j-D*-I)+((q*-B+(D*U+R*-I)-F*-j)*(q*-B+(D*U+R*-I)-F*-j)+((D*-j+(F*U+R*-B)-q*-I)*(D*-j+(F*U+R*-B)-q*-I)+(F*-I+(q*U+R*-j)-D*-B)*(F*-I+(q*U+R*-j)-D*-B)))));_=ht*(D*-j+(F*U+R*-B)-q*-I);M=ht*(F*-I+(q*U+R*-j)-D*-B);O=ht*(q*-B+(D*U+R*-I)-F*-j);D=ht*(R*U-F*-B-q*-j-D*-I);F=+f[e+444>>2];q=+f[e+456>>2];if(F>=q?(H=+f[e+448>>2],H>=q):0){q=U<-1?-1:U;q=+Q(+(q>1?1:q))*2;if(q>1.1920928955078125e-7){U=1/+X(+(I*I+(B*B+j*j)));if(+W(+(j*U))>1.1920928955078125e-7){R=+X(+((I*U*I*U/(j*U*j*U)+1)/(1/(H*H)+I*U*I*U/(j*U*j*U)/(F*F))));j=j*U;I=I*U;B=B*U}else{R=F;j=j*U;I=I*U;B=B*U}}else{R=0;j=0;I=0;B=0}z=+f[e+428>>2];U=R*z;if(q>U){r[e+526>>0]=1;if(q<R&z<.9999998807907104)R=(q-U)/(R-U);else R=1;f[e+528>>2]=R;f[e+504>>2]=q-U;if(+W(+j)>1.1920928955078125e-7){H=+W(+(j*-I/j*(H/F)));if(!(I<-0))H=-H;I=1/+X(+(j*j+B*B+H*H));B=B*I;j=j*I;I=-(H*I)}ct=-B;lt=-j;ft=-I;ut=(l*h+(p*d+v*m)-g*y)*ft+(v*p-l*g-d*m-y*h)*ct-(v*y+p*h+g*m-l*d)*lt;ht=(v*p-l*g-d*m-y*h)*lt+(v*y+p*h+g*m-l*d)*ct-(v*l+g*p+d*y-h*m)*ft;at=(v*p-l*g-d*m-y*h)*ft+(v*l+g*p+d*y-h*m)*lt-(l*h+(p*d+v*m)-g*y)*ct;ft=-((v*l+g*p+d*y-h*m)*ct)-(l*h+(p*d+v*m)-g*y)*lt-(v*y+p*h+g*m-l*d)*ft;lt=ht*b+((v*p-l*g-d*m-y*h)*ut+ft*a)-at*E;ct=at*a+((v*p-l*g-d*m-y*h)*ht+ft*E)-ut*b;ht=ut*E+((v*p-l*g-d*m-y*h)*at+ft*b)-ht*a;f[e+460>>2]=lt;f[e+464>>2]=ct;f[e+468>>2]=ht;f[e+472>>2]=0;s[e+536>>2]=0;s[e+540>>2]=0;s[e+544>>2]=0;s[e+548>>2]=0;f[e+492>>2]=1/(lt*(+f[i>>2]*lt+ +f[i+16>>2]*ct+ +f[i+32>>2]*ht)+ct*(lt*+f[i+4>>2]+ct*+f[i+20>>2]+ht*+f[i+36>>2])+ht*(lt*+f[i+8>>2]+ct*+f[i+24>>2]+ht*+f[i+40>>2])+(lt*(lt*+f[o>>2]+ct*+f[o+16>>2]+ht*+f[o+32>>2])+ct*(lt*+f[o+4>>2]+ct*+f[o+20>>2]+ht*+f[o+36>>2])+ht*(lt*+f[o+8>>2]+ct*+f[o+24>>2]+ht*+f[o+40>>2])))}}else P=23;e:do if((P|0)==23){I=+f[e+300>>2];R=+f[e+316>>2];B=+f[e+332>>2];K=+f[t>>2];V=+f[t+4>>2];z=+f[t+8>>2];F=+f[t+16>>2];j=+f[t+20>>2];H=+f[t+24>>2];q=+f[t+32>>2];U=+f[t+36>>2];G=+f[t+40>>2];rt=+f[e+304>>2];nt=+f[e+320>>2];tt=+f[e+336>>2];ot=+f[e+308>>2];st=+f[e+324>>2];it=+f[e+340>>2];ft=+f[e+364>>2];ct=+f[e+380>>2];ut=+f[e+396>>2];Y=ft*+f[n>>2]+ct*+f[n+4>>2]+ut*+f[n+8>>2];et=ft*+f[n+16>>2]+ct*+f[n+20>>2]+ut*+f[n+24>>2];ut=ft*+f[n+32>>2]+ct*+f[n+36>>2]+ut*+f[n+40>>2];ct=(I*K+R*V+B*z)*Y+(I*F+R*j+B*H)*et+(I*q+R*U+B*G)*ut;ft=(K*rt+V*nt+z*tt)*Y+(F*rt+j*nt+H*tt)*et+(q*rt+U*nt+G*tt)*ut;at=(K*ot+V*st+z*it)*Y+(F*ot+j*st+H*it)*et+(q*ot+U*st+G*it)*ut;lt=+f[e+444>>2];ht=+f[e+456>>2];do if(lt<ht){lt=+f[e+448>>2];if(lt<ht){if(+W(+ft)<1.1920928955078125e-7?+W(+at)<1.1920928955078125e-7:0)break e;r[e+526>>0]=1;f[e+460>>2]=-((I*q+R*U+B*G)*et-(I*F+R*j+B*H)*ut);f[e+464>>2]=-((I*K+R*V+B*z)*ut-(I*q+R*U+B*G)*Y);f[e+468>>2]=-((I*F+R*j+B*H)*Y-(I*K+R*V+B*z)*et);f[e+472>>2]=0;break e}if(+W(+ct)<1.1920928955078125e-7?+W(+at)<1.1920928955078125e-7:0)break;r[e+526>>0]=1;if(lt>=ht){ft=+Z(+at,+ct);if(ft>lt){ct=+$(+lt);ft=0;at=+J(+lt);break}if(ft<-lt){ct=+$(+lt);ft=0;at=-+J(+lt)}else ft=0}}else{if(+W(+ct)<1.1920928955078125e-7?+W(+ft)<1.1920928955078125e-7:0)break;r[e+526>>0]=1;if(lt>=ht){at=+Z(+ft,+ct);if(at>lt){ct=+$(+lt);ft=+J(+lt);at=0;break}if(at<-lt){ct=+$(+lt);ft=-+J(+lt);at=0}else at=0}}while(0);lt=(K*ot+V*st+z*it)*at+((K*rt+V*nt+z*tt)*ft+(I*K+R*V+B*z)*ct);K=(F*ot+j*st+H*it)*at+((F*rt+j*nt+H*tt)*ft+(I*F+R*j+B*H)*ct);ft=(q*ot+U*st+G*it)*at+((q*rt+U*nt+G*tt)*ft+(I*q+R*U+B*G)*ct);ct=1/+X(+(ft*ft+(lt*lt+K*K)));f[e+472>>2]=0;ht=+X(+((et*ct*ft-ut*ct*K)*(et*ct*ft-ut*ct*K)+(ut*ct*lt-Y*ct*ft)*(ut*ct*lt-Y*ct*ft)+(Y*ct*K-et*ct*lt)*(Y*ct*K-et*ct*lt)));f[e+504>>2]=ht;f[e+460>>2]=-((et*ct*ft-ut*ct*K)*(1/ht));f[e+464>>2]=-((ut*ct*lt-Y*ct*ft)*(1/ht));f[e+468>>2]=-((Y*ct*K-et*ct*lt)*(1/ht))}while(0);H=+f[e+452>>2];if(!(H>=0)){f[e+512>>2]=0;c=u;return}B=D<-1?-1:D;B=+Q(+(B>1?1:B))*2;if(B>3.1415927410125732){D=D>1?-1:-D;D=+Q(+(D>1?1:D))*2;_=-_;M=-M;O=-O}else D=B;f[e+512>>2]=D;if(D>1.1920928955078125e-7){ht=1/+X(+(O*O+(M*M+_*_)));_=_*ht;M=M*ht;O=O*ht}j=+f[e+428>>2];if(D>H*j){r[e+525>>0]=1;B=D-H*j;if(D<H&j<.9999998807907104)D=B/(H-H*j);else D=1;f[e+532>>2]=D;f[e+508>>2]=B;ct=-_;lt=-M;ft=-O;ut=(l*h+(p*d+v*m)-g*y)*ft+(v*p-l*g-d*m-y*h)*ct-(v*y+p*h+g*m-l*d)*lt;ht=(v*p-l*g-d*m-y*h)*lt+(v*y+p*h+g*m-l*d)*ct-(v*l+g*p+d*y-h*m)*ft;at=(v*p-l*g-d*m-y*h)*ft+(v*l+g*p+d*y-h*m)*lt-(l*h+(p*d+v*m)-g*y)*ct;ft=-((v*l+g*p+d*y-h*m)*ct)-(l*h+(p*d+v*m)-g*y)*lt-(v*y+p*h+g*m-l*d)*ft;lt=ht*b+((v*p-l*g-d*m-y*h)*ut+ft*a)-at*E;ct=at*a+((v*p-l*g-d*m-y*h)*ht+ft*E)-ut*b;ht=ut*E+((v*p-l*g-d*m-y*h)*at+ft*b)-ht*a;f[e+476>>2]=lt;f[e+480>>2]=ct;f[e+484>>2]=ht;f[e+488>>2]=0;f[e+496>>2]=1/(lt*(+f[i>>2]*lt+ +f[i+16>>2]*ct+ +f[i+32>>2]*ht)+ct*(lt*+f[i+4>>2]+ct*+f[i+20>>2]+ht*+f[i+36>>2])+ht*(lt*+f[i+8>>2]+ct*+f[i+24>>2]+ht*+f[i+40>>2])+(lt*(lt*+f[o>>2]+ct*+f[o+16>>2]+ht*+f[o+32>>2])+ct*(lt*+f[o+4>>2]+ct*+f[o+20>>2]+ht*+f[o+36>>2])+ht*(lt*+f[o+8>>2]+ct*+f[o+24>>2]+ht*+f[o+40>>2])))}if((r[e+526>>0]|0)==0){c=u;return}ut=-_;ht=-M;ft=-O;ot=(x*T+(N*C+k*L)-A*w)*ft+(k*N-x*A-C*L-w*T)*ut-(k*w+N*T+A*L-x*C)*ht;ct=(k*N-x*A-C*L-w*T)*ht+(k*w+N*T+A*L-x*C)*ut-(k*x+A*N+C*w-T*L)*ft;at=(k*N-x*A-C*L-w*T)*ft+(k*x+A*N+C*w-T*L)*ht-(x*T+(N*C+k*L)-A*w)*ut;ft=-((k*x+A*N+C*w-T*L)*ut)-(x*T+(N*C+k*L)-A*w)*ht-(k*w+N*T+A*L-x*C)*ft;ht=-(k*x+A*N+C*w-T*L);ut=-(x*T+(N*C+k*L)-A*w);lt=-(k*w+N*T+A*L-x*C);f[e+536>>2]=ct*lt+((k*N-x*A-C*L-w*T)*ot+ft*ht)-at*ut;f[e+540>>2]=at*ht+((k*N-x*A-C*L-w*T)*ct+ft*ut)-ot*lt;f[e+544>>2]=ot*ut+((k*N-x*A-C*L-w*T)*at+ft*lt)-ct*ht;f[e+548>>2]=0;c=u;return}function Od(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;n=c;c=c+64|0;a=s[e+28>>2]|0;d=s[e+32>>2]|0;Ad(e,a+4|0,d+4|0,a+264|0,d+264|0);l=s[t+8>>2]|0;f[l>>2]=1;h=s[t+24>>2]|0;f[l+(h+1<<2)>>2]=1;f[l+((h<<1)+2<<2)>>2]=1;m=+f[e+348>>2];S=+f[e+352>>2];b=+f[e+356>>2];w=+f[a+4>>2]*m+ +f[a+8>>2]*S+ +f[a+12>>2]*b;g=m*+f[a+20>>2]+S*+f[a+24>>2]+b*+f[a+28>>2];b=m*+f[a+36>>2]+S*+f[a+40>>2]+b*+f[a+44>>2];l=s[t+12>>2]|0;f[l>>2]=0;f[l+4>>2]=b;f[l+8>>2]=-g;f[l+12>>2]=0;f[l+(h<<2)>>2]=-b;f[l+(h+1<<2)>>2]=0;f[l+(h+2<<2)>>2]=w;f[l+(h+3<<2)>>2]=0;f[l+(h<<1<<2)>>2]=g;f[l+((h<<1|1)<<2)>>2]=-w;f[l+((h<<1)+2<<2)>>2]=0;f[l+((h<<1)+3<<2)>>2]=0;l=s[t+16>>2]|0;f[l>>2]=-1;f[l+(h+1<<2)>>2]=-1;f[l+((h<<1)+2<<2)>>2]=-1;S=+f[e+412>>2];m=+f[e+416>>2];v=+f[e+420>>2];E=+f[d+4>>2]*S+ +f[d+8>>2]*m+ +f[d+12>>2]*v;y=S*+f[d+20>>2]+m*+f[d+24>>2]+v*+f[d+28>>2];v=S*+f[d+36>>2]+m*+f[d+40>>2]+v*+f[d+44>>2];l=s[t+20>>2]|0;f[l>>2]=0;f[l+4>>2]=-v;f[l+8>>2]=y;f[l+12>>2]=0;f[l+(h<<2)>>2]=v;f[l+(h+1<<2)>>2]=0;f[l+(h+2<<2)>>2]=-E;f[l+(h+3<<2)>>2]=0;f[l+(h<<1<<2)>>2]=-y;f[l+((h<<1|1)<<2)>>2]=E;f[l+((h<<1)+2<<2)>>2]=0;f[l+((h<<1)+3<<2)>>2]=0;h=s[e+592>>2]|0;m=+f[((h&2|0)==0?t+4|0:e+600|0)>>2]*+f[t>>2];i=s[t+24>>2]|0;p=s[t+28>>2]|0;u=s[t+36>>2]|0;o=s[t+40>>2]|0;f[p>>2]=m*(E+ +f[d+52>>2]-w- +f[a+52>>2]);f[u>>2]=-3.4028234663852886e38;f[o>>2]=3.4028234663852886e38;if((h&1|0)==0){f[p+(i<<2)>>2]=m*(y+ +f[d+56>>2]-g- +f[a+56>>2]);f[u+(i<<2)>>2]=-3.4028234663852886e38;f[o+(i<<2)>>2]=3.4028234663852886e38;f[p+(i<<1<<2)>>2]=m*(v+ +f[d+60>>2]-b- +f[a+60>>2]);f[u+(i<<1<<2)>>2]=-3.4028234663852886e38;f[o+(i<<1<<2)>>2]=3.4028234663852886e38}else{x=s[t+32>>2]|0;f[x>>2]=+f[e+596>>2];f[p+(i<<2)>>2]=m*(y+ +f[d+56>>2]-g- +f[a+56>>2]);f[u+(i<<2)>>2]=-3.4028234663852886e38;f[o+(i<<2)>>2]=3.4028234663852886e38;f[x+(i<<2)>>2]=+f[e+596>>2];f[p+(i<<1<<2)>>2]=m*(v+ +f[d+60>>2]-b- +f[a+60>>2]);f[u+(i<<1<<2)>>2]=-3.4028234663852886e38;f[o+(i<<1<<2)>>2]=3.4028234663852886e38;f[x+(i<<1<<2)>>2]=+f[e+596>>2]}do if((r[e+526>>0]|0)==0)i=i*3|0;else{d=s[t+12>>2]|0;S=+f[e+456>>2];if(+f[e+444>>2]<S?+f[e+448>>2]<S:0){bd(n,a+4|0,e+300|0);m=+f[n+4>>2];g=+f[n+20>>2];y=+f[n+36>>2];w=+f[n+8>>2];E=+f[n+24>>2];S=+f[n+40>>2];h=s[t+24>>2]|0;x=h+(i*3|0)|0;f[d+(i*3<<2)>>2]=m;f[d+((i*3|0)+1<<2)>>2]=g;f[d+((i*3|0)+2<<2)>>2]=y;f[d+(x<<2)>>2]=w;f[d+(x+1<<2)>>2]=E;f[d+(x+2<<2)>>2]=S;f[l+(i*3<<2)>>2]=-m;f[l+((i*3|0)+1<<2)>>2]=-g;f[l+((i*3|0)+2<<2)>>2]=-y;f[l+(x<<2)>>2]=-w;f[l+(x+1<<2)>>2]=-E;f[l+(x+2<<2)>>2]=-S;b=+f[t>>2]*+f[e+436>>2];p=s[t+28>>2]|0;f[p+(i*3<<2)>>2]=b*(m*+f[e+460>>2]+g*+f[e+464>>2]+y*+f[e+468>>2]);f[p+(x<<2)>>2]=b*(w*+f[e+460>>2]+E*+f[e+464>>2]+S*+f[e+468>>2]);u=s[t+36>>2]|0;f[u+(i*3<<2)>>2]=-3.4028234663852886e38;o=s[t+40>>2]|0;f[o+(i*3<<2)>>2]=3.4028234663852886e38;f[u+(x<<2)>>2]=-3.4028234663852886e38;f[o+(x<<2)>>2]=3.4028234663852886e38;i=h+x|0;break}S=+f[e+436>>2];w=S*+f[e+460>>2]*S;E=S*S*+f[e+464>>2];S=S*S*+f[e+468>>2];f[d+(i*3<<2)>>2]=w;f[d+((i*3|0)+1<<2)>>2]=E;f[d+((i*3|0)+2<<2)>>2]=S;f[l+(i*3<<2)>>2]=-w;f[l+((i*3|0)+1<<2)>>2]=-E;f[l+((i*3|0)+2<<2)>>2]=-S;f[p+(i*3<<2)>>2]=+f[t>>2]*+f[e+432>>2]*+f[e+504>>2];if((h&4|0)!=0)f[(s[t+32>>2]|0)+(i*3<<2)>>2]=+f[e+604>>2];f[u+(i*3<<2)>>2]=0;f[o+(i*3<<2)>>2]=3.4028234663852886e38;i=i+(i*3|0)|0}while(0);if((r[e+525>>0]|0)==0){c=n;return}S=+f[e+436>>2];w=S*+f[e+476>>2]*S;E=S*S*+f[e+480>>2];S=S*S*+f[e+484>>2];l=s[t+12>>2]|0;d=s[t+20>>2]|0;f[l+(i<<2)>>2]=w;h=i+1|0;f[l+(h<<2)>>2]=E;x=i+2|0;f[l+(x<<2)>>2]=S;f[d+(i<<2)>>2]=-w;f[d+(h<<2)>>2]=-E;f[d+(x<<2)>>2]=-S;f[p+(i<<2)>>2]=+f[t>>2]*+f[e+432>>2]*+f[e+508>>2];if((s[e+592>>2]&4|0)!=0)f[(s[t+32>>2]|0)+(i<<2)>>2]=+f[e+604>>2];if(!(+f[e+452>>2]>0)){f[u+(i<<2)>>2]=-3.4028234663852886e38;f[o+(i<<2)>>2]=3.4028234663852886e38;c=n;return}t=u+(i<<2)|0;if(+f[e+508>>2]>0){f[t>>2]=0;f[o+(i<<2)>>2]=3.4028234663852886e38;c=n;return}else{f[t>>2]=-3.4028234663852886e38;f[o+(i<<2)>>2]=0;c=n;return}}function Md(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0;t=c;c=c+176|0;if((r[e+527>>0]|0)==0){c=t;return}f[e+36>>2]=0;f[e+520>>2]=0;f[e+516>>2]=0;s[e+576>>2]=0;s[e+580>>2]=0;s[e+584>>2]=0;s[e+588>>2]=0;e:do if((r[e+524>>0]|0)==0){j=s[e+28>>2]|0;C=+f[e+348>>2];N=+f[e+352>>2];i=+f[e+356>>2];n=C*+f[j+20>>2]+N*+f[j+24>>2]+i*+f[j+28>>2]+ +f[j+56>>2];T=s[e+32>>2]|0;u=+f[e+412>>2];a=+f[T+4>>2];l=+f[e+416>>2];h=+f[T+8>>2];p=+f[e+420>>2];x=+f[T+12>>2];m=+f[T+20>>2];g=+f[T+24>>2];y=+f[T+28>>2];w=+f[T+36>>2];E=+f[T+40>>2];S=+f[T+44>>2];v=+f[T+52>>2];b=+f[T+56>>2];d=+f[T+60>>2];k=u*m+l*g+p*y+b-n;o=C*+f[j+4>>2]+N*+f[j+8>>2]+i*+f[j+12>>2]+ +f[j+52>>2];i=C*+f[j+36>>2]+N*+f[j+40>>2]+i*+f[j+44>>2]+ +f[j+60>>2];N=u*a+l*h+p*x+v-o;C=u*w+l*E+p*S+d-i;if(N*N+k*k+C*C>1.1920928955078125e-7){B=1/+X(+(N*N+k*k+C*C));f[t+128>>2]=N*B;f[t+132>>2]=k*B;f[t+136>>2]=C*B;f[t+140>>2]=0;C=C*B;k=k*B;N=N*B}else{f[t+128>>2]=1;f[t+132>>2]=0;f[t+136>>2]=0;f[t+140>>2]=0;C=0;k=0;N=1}if(+W(+C)>.7071067690849304){D=C*C+k*k;P=1/+X(+D);f[t+144>>2]=0;B=-(P*C);f[t+148>>2]=B;H=P*k;f[t+152>>2]=H;f[t+160>>2]=D*P;f[t+164>>2]=-(N*H);f[t+168>>2]=N*B}else{H=N*N+k*k;B=1/+X(+H);P=-(k*B);f[t+144>>2]=P;D=B*N;f[t+148>>2]=D;f[t+152>>2]=0;f[t+160>>2]=-(C*D);f[t+164>>2]=C*P;f[t+168>>2]=H*B}M=a;k=m;L=w;A=h;O=g;P=E;C=x;B=y;H=S;N=v;D=b;_=d;j=0;while(1){F=s[e+28>>2]|0;f[t+80>>2]=+f[F+4>>2];f[t+84>>2]=+f[F+20>>2];f[t+88>>2]=+f[F+36>>2];f[t+92>>2]=0;f[t+96>>2]=+f[F+8>>2];f[t+100>>2]=+f[F+24>>2];f[t+104>>2]=+f[F+40>>2];f[t+108>>2]=0;f[t+112>>2]=+f[F+12>>2];f[t+116>>2]=+f[F+28>>2];f[t+120>>2]=+f[F+44>>2];f[t+124>>2]=0;f[t+32>>2]=M;f[t+36>>2]=k;f[t+40>>2]=L;f[t+44>>2]=0;f[t+48>>2]=A;f[t+52>>2]=O;f[t+56>>2]=P;f[t+60>>2]=0;f[t+64>>2]=C;f[t+68>>2]=B;f[t+72>>2]=H;f[t+76>>2]=0;H=n- +f[F+56>>2];B=i- +f[F+60>>2];f[t+16>>2]=o- +f[F+52>>2];f[t+20>>2]=H;f[t+24>>2]=B;f[t+28>>2]=0;f[t>>2]=u*a+l*h+p*x+v-N;f[t+4>>2]=u*m+l*g+p*y+b-D;f[t+8>>2]=u*w+l*E+p*S+d-_;f[t+12>>2]=0;Wd(e+(j*84|0)+48|0,t+80|0,t+32|0,t+16|0,t,t+128+(j<<4)|0,F+396|0,+f[F+344>>2],T+396|0,+f[T+344>>2]);j=j+1|0;if((j|0)==3){T=e+32|0;break e}T=s[e+32>>2]|0;M=+f[T+4>>2];k=+f[T+20>>2];L=+f[T+36>>2];A=+f[T+8>>2];O=+f[T+24>>2];P=+f[T+40>>2];C=+f[T+12>>2];B=+f[T+28>>2];H=+f[T+44>>2];N=+f[T+52>>2];D=+f[T+56>>2];_=+f[T+60>>2]}}else T=e+32|0;while(0);j=s[e+28>>2]|0;F=s[T>>2]|0;Ad(e,j+4|0,F+4|0,j+264|0,F+264|0);c=t;return}function _d(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0;o=c;c=c+448|0;if((r[e+527>>0]|0)==0){c=o;return}q=s[e+28>>2]|0;P=+f[e+348>>2];O=+f[e+352>>2];M=+f[e+356>>2];L=+f[q+52>>2];A=P*+f[q+4>>2]+O*+f[q+8>>2]+M*+f[q+12>>2]+L;N=+f[q+56>>2];k=P*+f[q+20>>2]+O*+f[q+24>>2]+M*+f[q+28>>2]+N;v=+f[q+60>>2];M=P*+f[q+36>>2]+O*+f[q+40>>2]+M*+f[q+44>>2]+v;q=s[e+32>>2]|0;O=+f[e+412>>2];P=+f[e+416>>2];T=+f[e+420>>2];S=+f[q+52>>2];E=O*+f[q+4>>2]+P*+f[q+8>>2]+T*+f[q+12>>2]+S;_=+f[q+56>>2];D=O*+f[q+20>>2]+P*+f[q+24>>2]+T*+f[q+28>>2]+_;w=+f[q+60>>2];T=O*+f[q+36>>2]+P*+f[q+40>>2]+T*+f[q+44>>2]+w;if((r[e+524>>0]|0)==0){y=+f[t+192>>2]+ +f[t+80>>2];b=+f[t+196>>2]+ +f[t+84>>2];g=+f[t+200>>2]+ +f[t+88>>2];P=+f[n+192>>2]+ +f[n+80>>2];O=+f[n+196>>2]+ +f[n+84>>2];C=+f[n+200>>2]+ +f[n+88>>2];x=+f[t+176>>2]+ +f[t+64>>2]+((M-v)*b-(k-N)*g)-(+f[n+176>>2]+ +f[n+64>>2]+((T-w)*O-(D-_)*C));C=+f[t+180>>2]+ +f[t+68>>2]+((A-L)*g-(M-v)*y)-(+f[n+180>>2]+ +f[n+68>>2]+((E-S)*C-(T-w)*P));O=+f[t+184>>2]+ +f[t+72>>2]+((k-N)*y-(A-L)*b)-(+f[n+184>>2]+ +f[n+72>>2]+((D-_)*P-(E-S)*O));p=s[t+240>>2]|0;u=0;do{m=1/+f[e+(u*84|0)+128>>2];h=e+(u*84|0)+48|0;y=+f[h>>2];a=e+(u*84|0)+52|0;g=+f[a>>2];l=e+(u*84|0)+56|0;b=+f[l>>2];b=m*(((A-E)*y+(k-D)*g+(M-T)*b)*-.30000001192092896/i)-m*(x*y+C*g+O*b);f[e+36>>2]=+f[e+36>>2]+b;g=+f[l>>2];y=+f[a>>2];m=+f[h>>2];d=s[e+28>>2]|0;P=+f[d+344>>2];if((p|0)!=0){z=((M-v)*m-(A-L)*g)*+f[d+300>>2]+((k-N)*g-(M-v)*y)*+f[d+296>>2]+((A-L)*y-(k-N)*m)*+f[d+304>>2];R=((M-v)*m-(A-L)*g)*+f[d+284>>2]+((k-N)*g-(M-v)*y)*+f[d+280>>2]+((A-L)*y-(k-N)*m)*+f[d+288>>2];U=((M-v)*m-(A-L)*g)*+f[d+268>>2]+((k-N)*g-(M-v)*y)*+f[d+264>>2]+((A-L)*y-(k-N)*m)*+f[d+272>>2];V=b*y*P*+f[t+116>>2];W=b*g*P*+f[t+120>>2];f[t+64>>2]=b*m*P*+f[t+112>>2]+ +f[t+64>>2];f[t+68>>2]=V+ +f[t+68>>2];f[t+72>>2]=W+ +f[t+72>>2];R=R*b*+f[t+100>>2];P=z*b*+f[t+104>>2];f[t+80>>2]=U*b*+f[t+96>>2]+ +f[t+80>>2];f[t+84>>2]=R+ +f[t+84>>2];f[t+88>>2]=P+ +f[t+88>>2]}d=s[e+32>>2]|0;P=+f[d+344>>2];if((s[n+240>>2]|0)!=0){V=((T-w)*m-(E-S)*g)*+f[d+300>>2]+((D-_)*g-(T-w)*y)*+f[d+296>>2]+((E-S)*y-(D-_)*m)*+f[d+304>>2];W=((T-w)*m-(E-S)*g)*+f[d+284>>2]+((D-_)*g-(T-w)*y)*+f[d+280>>2]+((E-S)*y-(D-_)*m)*+f[d+288>>2];z=((T-w)*m-(E-S)*g)*+f[d+268>>2]+((D-_)*g-(T-w)*y)*+f[d+264>>2]+((E-S)*y-(D-_)*m)*+f[d+272>>2];R=P*+f[a>>2]*-b*+f[n+116>>2];U=P*+f[l>>2]*-b*+f[n+120>>2];f[n+64>>2]=+f[n+112>>2]*P*+f[h>>2]*-b+ +f[n+64>>2];f[n+68>>2]=R+ +f[n+68>>2];f[n+72>>2]=U+ +f[n+72>>2];W=W*+f[n+100>>2]*-b;V=V*+f[n+104>>2]*-b;f[n+80>>2]=z*+f[n+96>>2]*-b+ +f[n+80>>2];f[n+84>>2]=W+ +f[n+84>>2];f[n+88>>2]=V+ +f[n+88>>2]}u=u+1|0}while((u|0)!=3)}do if((r[e+552>>0]|0)==0){m=+f[e+440>>2];if(!(m>1.1920928955078125e-7)){p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0;break}N=+f[n+192>>2]+ +f[n+80>>2]-(+f[t+192>>2]+ +f[t+80>>2]);k=+f[n+196>>2]+ +f[n+84>>2]-(+f[t+196>>2]+ +f[t+84>>2]);C=+f[n+200>>2]+ +f[n+88>>2]-(+f[t+200>>2]+ +f[t+88>>2]);if(N*N+k*k+C*C>1.1920928955078125e-7){V=1/+X(+(N*N+k*k+C*C));u=s[e+28>>2]|0;v=+f[u+264>>2];x=+f[u+280>>2];w=+f[u+296>>2];y=+f[u+268>>2];T=+f[u+284>>2];E=+f[u+300>>2];g=+f[u+272>>2];S=+f[u+288>>2];b=+f[u+304>>2];u=s[e+32>>2]|0;V=m*(1/(N*V*(N*V*v+k*V*x+C*V*w)+k*V*(N*V*y+k*V*T+C*V*E)+C*V*(N*V*g+k*V*S+C*V*b)+(N*V*(N*V*+f[u+264>>2]+k*V*+f[u+280>>2]+C*V*+f[u+296>>2])+k*V*(N*V*+f[u+268>>2]+k*V*+f[u+284>>2]+C*V*+f[u+300>>2])+C*V*(N*V*+f[u+272>>2]+k*V*+f[u+288>>2]+C*V*+f[u+304>>2]))));m=+X(+(C*V*C*V+(N*V*N*V+k*V*k*V)));N=1/m*N*V;k=1/m*k*V;C=1/m*C*V;if((s[t+240>>2]|0)!=0){V=m*0*+f[t+116>>2];W=m*0*+f[t+120>>2];f[t+64>>2]=m*0*+f[t+112>>2]+ +f[t+64>>2];f[t+68>>2]=V+ +f[t+68>>2];f[t+72>>2]=W+ +f[t+72>>2];W=(k*T+N*x+C*S)*m*+f[t+100>>2];V=(k*E+N*w+C*b)*m*+f[t+104>>2];f[t+80>>2]=(k*y+N*v+C*g)*m*+f[t+96>>2]+ +f[t+80>>2];f[t+84>>2]=W+ +f[t+84>>2];f[t+88>>2]=V+ +f[t+88>>2];u=s[e+32>>2]|0}if((s[n+240>>2]|0)!=0){V=k*+f[u+300>>2]+N*+f[u+296>>2]+C*+f[u+304>>2];W=k*+f[u+284>>2]+N*+f[u+280>>2]+C*+f[u+288>>2];z=k*+f[u+268>>2]+N*+f[u+264>>2]+C*+f[u+272>>2];R=m*-0*+f[n+116>>2];U=m*-0*+f[n+120>>2];f[n+64>>2]=m*-0*+f[n+112>>2]+ +f[n+64>>2];f[n+68>>2]=R+ +f[n+68>>2];f[n+72>>2]=U+ +f[n+72>>2];W=W*+f[n+100>>2]*-m;V=V*+f[n+104>>2]*-m;f[n+80>>2]=z*+f[n+96>>2]*-m+ +f[n+80>>2];f[n+84>>2]=W+ +f[n+84>>2];f[n+88>>2]=V+ +f[n+88>>2];p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}else{p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}}else{p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}}else{I=s[e+28>>2]|0;s[o+352>>2]=s[I+4>>2];s[o+356>>2]=s[I+8>>2];s[o+360>>2]=s[I+12>>2];s[o+364>>2]=s[I+16>>2];s[o+368>>2]=s[I+20>>2];s[o+372>>2]=s[I+24>>2];s[o+376>>2]=s[I+28>>2];s[o+380>>2]=s[I+32>>2];s[o+384>>2]=s[I+36>>2];s[o+388>>2]=s[I+40>>2];s[o+392>>2]=s[I+44>>2];s[o+396>>2]=s[I+48>>2];s[o+400>>2]=s[I+52>>2];s[o+404>>2]=s[I+56>>2];s[o+408>>2]=s[I+60>>2];s[o+412>>2]=s[I+64>>2];I=s[e+32>>2]|0;s[o+288>>2]=s[I+4>>2];s[o+292>>2]=s[I+8>>2];s[o+296>>2]=s[I+12>>2];s[o+300>>2]=s[I+16>>2];s[o+304>>2]=s[I+20>>2];s[o+308>>2]=s[I+24>>2];s[o+312>>2]=s[I+28>>2];s[o+316>>2]=s[I+32>>2];s[o+320>>2]=s[I+36>>2];s[o+324>>2]=s[I+40>>2];s[o+328>>2]=s[I+44>>2];s[o+332>>2]=s[I+48>>2];s[o+336>>2]=s[I+52>>2];s[o+340>>2]=s[I+56>>2];s[o+344>>2]=s[I+60>>2];s[o+348>>2]=s[I+64>>2];z=+f[t+196>>2]+ +f[t+84>>2];L=+f[t+200>>2]+ +f[t+88>>2];f[o+272>>2]=+f[t+192>>2]+ +f[t+80>>2];f[o+276>>2]=z;f[o+280>>2]=L;f[o+284>>2]=0;L=+f[n+196>>2]+ +f[n+84>>2];z=+f[n+200>>2]+ +f[n+88>>2];f[o+256>>2]=+f[n+192>>2]+ +f[n+80>>2];f[o+260>>2]=L;f[o+264>>2]=z;f[o+268>>2]=0;f[o+192>>2]=1;I=o+196|0;s[I+0>>2]=0;s[I+4>>2]=0;s[I+8>>2]=0;s[I+12>>2]=0;f[o+212>>2]=1;q=o+216|0;s[q+0>>2]=0;s[q+4>>2]=0;s[q+8>>2]=0;s[q+12>>2]=0;f[o+232>>2]=1;j=o+236|0;s[j+0>>2]=0;s[j+4>>2]=0;s[j+8>>2]=0;s[j+12>>2]=0;s[j+16>>2]=0;Dd(o+352|0,0,0,0,o+272|0,i,o+192|0);f[o+128>>2]=1;j=o+132|0;s[j+0>>2]=0;s[j+4>>2]=0;s[j+8>>2]=0;s[j+12>>2]=0;f[o+148>>2]=1;F=o+152|0;s[F+0>>2]=0;s[F+4>>2]=0;s[F+8>>2]=0;s[F+12>>2]=0;f[o+168>>2]=1;B=o+172|0;s[B+0>>2]=0;s[B+4>>2]=0;s[B+8>>2]=0;s[B+12>>2]=0;s[B+16>>2]=0;Dd(o+288|0,0,0,0,o+256|0,i,o+128|0);z=+f[e+556>>2];L=+f[e+560>>2];W=+f[e+564>>2];A=+f[e+568>>2];_=z*(2/(z*z+L*L+W*W+A*A));g=L*(2/(z*z+L*L+W*W+A*A));D=W*(2/(z*z+L*L+W*W+A*A));J=+f[e+364>>2];$=+f[e+368>>2];G=+f[e+372>>2];S=(z*D-A*g)*G+($*(z*g+A*D)+J*(1-(L*g+W*D)));x=G*(L*D+A*_)+(J*(z*g-A*D)+$*(1-(z*_+W*D)));T=J*(z*D+A*g)+$*(L*D-A*_)+G*(1-(z*_+L*g));E=+f[e+380>>2];M=+f[e+384>>2];v=+f[e+388>>2];N=(1-(L*g+W*D))*E+(z*g+A*D)*M+(z*D-A*g)*v;C=(z*g-A*D)*E+(1-(z*_+W*D))*M+(L*D+A*_)*v;k=(z*D+A*g)*E+(L*D-A*_)*M+(1-(z*_+L*g))*v;R=+f[e+396>>2];m=+f[e+400>>2];y=+f[e+404>>2];U=(1-(L*g+W*D))*R+(z*g+A*D)*m+(z*D-A*g)*y;W=(z*g-A*D)*R+(1-(z*_+W*D))*m+(L*D+A*_)*y;g=(z*D+A*g)*R+(L*D-A*_)*m+(1-(z*_+L*g))*y;L=+f[e+300>>2];_=+f[e+316>>2];z=+f[e+332>>2];A=+f[e+304>>2];D=+f[e+320>>2];V=+f[e+336>>2];O=+f[e+308>>2];P=+f[e+324>>2];b=+f[e+340>>2];w=-+f[e+348>>2];et=-+f[e+352>>2];Q=-+f[e+356>>2];G=J*0+$*0+G*0+ +f[e+412>>2]+(T*(O*w+P*et+b*Q)+(S*(L*w+_*et+z*Q)+x*(A*w+D*et+V*Q)));v=E*0+M*0+v*0+ +f[e+416>>2]+(k*(O*w+P*et+b*Q)+(N*(L*w+_*et+z*Q)+C*(A*w+D*et+V*Q)));Q=R*0+m*0+y*0+ +f[e+420>>2]+(g*(O*w+P*et+b*Q)+(U*(L*w+_*et+z*Q)+W*(A*w+D*et+V*Q)));et=+f[o+128>>2];w=+f[j>>2];y=+f[o+136>>2];m=+f[o+144>>2];R=+f[o+148>>2];M=+f[F>>2];E=+f[o+160>>2];$=+f[o+164>>2];J=+f[o+168>>2];K=y*Q+(et*G+w*v)+ +f[o+176>>2];Y=Q*M+(m*G+R*v)+ +f[o+180>>2];Z=G*E+v*$+Q*J+ +f[o+184>>2];f[o+64>>2]=(S*L+x*A+T*O)*et+(N*L+C*A+k*O)*w+(U*L+W*A+g*O)*y;f[o+68>>2]=(S*_+x*D+T*P)*et+(N*_+C*D+k*P)*w+(U*_+W*D+g*P)*y;f[o+72>>2]=(S*z+x*V+T*b)*et+(N*z+C*V+k*b)*w+(U*z+W*V+g*b)*y;f[o+76>>2]=0;f[o+80>>2]=(S*L+x*A+T*O)*m+(N*L+C*A+k*O)*R+(U*L+W*A+g*O)*M;f[o+84>>2]=(S*_+x*D+T*P)*m+(N*_+C*D+k*P)*R+(U*_+W*D+g*P)*M;f[o+88>>2]=(S*z+x*V+T*b)*m+(N*z+C*V+k*b)*R+(U*z+W*V+g*b)*M;f[o+92>>2]=0;f[o+96>>2]=(S*L+x*A+T*O)*E+(N*L+C*A+k*O)*$+(U*L+W*A+g*O)*J;f[o+100>>2]=(S*_+x*D+T*P)*E+(N*_+C*D+k*P)*$+(U*_+W*D+g*P)*J;f[o+104>>2]=(S*z+x*V+T*b)*E+(N*z+C*V+k*b)*$+(U*z+W*V+g*b)*J;f[o+108>>2]=0;f[o+112>>2]=K;f[o+116>>2]=Y;f[o+120>>2]=Z;f[o+124>>2]=0;Z=(U*L+W*A+g*O)*-Q+((S*L+x*A+T*O)*-G+(N*L+C*A+k*O)*-v);Y=(U*_+W*D+g*P)*-Q+((S*_+x*D+T*P)*-G+(N*_+C*D+k*P)*-v);v=(U*z+W*V+g*b)*-Q+((S*z+x*V+T*b)*-G+(N*z+C*V+k*b)*-v);G=+f[o+192>>2];Q=+f[I>>2];K=+f[o+200>>2];J=+f[o+208>>2];$=+f[o+212>>2];E=+f[q>>2];M=+f[o+224>>2];R=+f[o+228>>2];m=+f[o+232>>2];y=Z*G+Y*Q+v*K+ +f[o+240>>2];w=Z*J+Y*$+v*E+ +f[o+244>>2];v=Z*M+Y*R+v*m+ +f[o+248>>2];f[o>>2]=(S*L+x*A+T*O)*G+(S*_+x*D+T*P)*Q+(S*z+x*V+T*b)*K;f[o+4>>2]=(N*L+C*A+k*O)*G+(N*_+C*D+k*P)*Q+(N*z+C*V+k*b)*K;f[o+8>>2]=(U*L+W*A+g*O)*G+(U*_+W*D+g*P)*Q+(U*z+W*V+g*b)*K;f[o+12>>2]=0;f[o+16>>2]=(S*L+x*A+T*O)*J+(S*_+x*D+T*P)*$+(S*z+x*V+T*b)*E;f[o+20>>2]=(N*L+C*A+k*O)*J+(N*_+C*D+k*P)*$+(N*z+C*V+k*b)*E;f[o+24>>2]=(U*L+W*A+g*O)*J+(U*_+W*D+g*P)*$+(U*z+W*V+g*b)*E;f[o+28>>2]=0;f[o+32>>2]=(S*L+x*A+T*O)*M+(S*_+x*D+T*P)*R+(S*z+x*V+T*b)*m;f[o+36>>2]=(N*L+C*A+k*O)*M+(N*_+C*D+k*P)*R+(N*z+C*V+k*b)*m;f[o+40>>2]=(U*L+W*A+g*O)*M+(U*_+W*D+g*P)*R+(U*z+W*V+g*b)*m;f[o+44>>2]=0;f[o+48>>2]=y;f[o+52>>2]=w;f[o+56>>2]=v;f[o+60>>2]=0;zd(o+352|0,o+64|0,o+424|0,o+416|0);v=+f[o+416>>2];w=1/i*+f[o+424>>2]*v;y=1/i*v*+f[o+428>>2];v=1/i*v*+f[o+432>>2];zd(o+288|0,o,o+424|0,o+416|0);m=+f[o+416>>2];w=w- +f[o+272>>2];y=y- +f[o+276>>2];v=v- +f[o+280>>2];b=1/i*+f[o+424>>2]*m- +f[o+256>>2];g=1/i*m*+f[o+428>>2]- +f[o+260>>2];m=1/i*m*+f[o+432>>2]- +f[o+264>>2];if(w*w+y*y+v*v>1.1920928955078125e-7){x=1/+X(+(w*w+y*y+v*v));q=s[e+28>>2]|0;C=w*x*(w*x*+f[q+264>>2]+y*x*+f[q+280>>2]+v*x*+f[q+296>>2])+y*x*(w*x*+f[q+268>>2]+y*x*+f[q+284>>2]+v*x*+f[q+300>>2])+v*x*(w*x*+f[q+272>>2]+y*x*+f[q+288>>2]+v*x*+f[q+304>>2]);E=w*x;T=y*x;x=v*x}else{C=0;E=0;T=0;x=0}if(b*b+g*g+m*m>1.1920928955078125e-7){S=1/+X(+(b*b+g*g+m*m));q=s[e+32>>2]|0;N=b*S*(b*S*+f[q+264>>2]+g*S*+f[q+280>>2]+m*S*+f[q+296>>2])+g*S*(b*S*+f[q+268>>2]+g*S*+f[q+284>>2]+m*S*+f[q+300>>2])+m*S*(b*S*+f[q+272>>2]+g*S*+f[q+288>>2]+m*S*+f[q+304>>2]);L=b*S;k=g*S;S=m*S}else{N=0;L=0;k=0;S=0}E=E*C+L*N;T=T*C+k*N;x=x*C+S*N;if(x*x+(E*E+T*T)>1.1920928955078125e-7){et=1/+X(+(x*x+(E*E+T*T)));a=s[e+28>>2]|0;S=E*et*(E*et*+f[a+264>>2]+T*et*+f[a+280>>2]+x*et*+f[a+296>>2])+T*et*(E*et*+f[a+268>>2]+T*et*+f[a+284>>2]+x*et*+f[a+300>>2])+x*et*(E*et*+f[a+272>>2]+T*et*+f[a+288>>2]+x*et*+f[a+304>>2]);u=s[e+32>>2]|0;E=E*et*(E*et*+f[u+264>>2]+T*et*+f[u+280>>2]+x*et*+f[u+296>>2])+T*et*(E*et*+f[u+268>>2]+T*et*+f[u+284>>2]+x*et*+f[u+300>>2])+x*et*(E*et*+f[u+272>>2]+T*et*+f[u+288>>2]+x*et*+f[u+304>>2]);b=1/((S+E)*(S+E))*(w*S-b*E);g=1/((S+E)*(S+E))*(y*S-g*E);v=1/((S+E)*(S+E))*(v*S-m*E);E=+f[e+572>>2];if(E>=0){if((r[e+553>>0]|0)!=0)E=E/S;y=+f[e+576>>2];m=+f[e+580>>2];w=+f[e+584>>2];S=+X(+((b+y)*(b+y)+(g+m)*(g+m)+(v+w)*(v+w)));if(S>E){b=E*(b+y)*(1/S)-y;g=E*(g+m)*(1/S)-m;v=E*(v+w)*(1/S)-w}f[e+576>>2]=b+y;f[e+580>>2]=g+m;f[e+584>>2]=v+w}m=+X(+(v*v+(g*g+b*b)));y=b*(1/m);g=g*(1/m);v=v*(1/m);if((s[t+240>>2]|0)!=0){et=g*+f[a+300>>2]+y*+f[a+296>>2]+v*+f[a+304>>2];Z=g*+f[a+284>>2]+y*+f[a+280>>2]+v*+f[a+288>>2];Y=g*+f[a+268>>2]+y*+f[a+264>>2]+v*+f[a+272>>2];Q=m*0*+f[t+116>>2];G=m*0*+f[t+120>>2];f[t+64>>2]=m*0*+f[t+112>>2]+ +f[t+64>>2];f[t+68>>2]=Q+ +f[t+68>>2];f[t+72>>2]=G+ +f[t+72>>2];Z=Z*m*+f[t+100>>2];et=et*m*+f[t+104>>2];f[t+80>>2]=Y*m*+f[t+96>>2]+ +f[t+80>>2];f[t+84>>2]=Z+ +f[t+84>>2];f[t+88>>2]=et+ +f[t+88>>2];u=s[e+32>>2]|0}if((s[n+240>>2]|0)!=0){et=g*+f[u+300>>2]+y*+f[u+296>>2]+v*+f[u+304>>2];Z=g*+f[u+284>>2]+y*+f[u+280>>2]+v*+f[u+288>>2];Y=g*+f[u+268>>2]+y*+f[u+264>>2]+v*+f[u+272>>2];Q=m*-0*+f[n+116>>2];G=m*-0*+f[n+120>>2];f[n+64>>2]=m*-0*+f[n+112>>2]+ +f[n+64>>2];f[n+68>>2]=Q+ +f[n+68>>2];f[n+72>>2]=G+ +f[n+72>>2];Z=Z*+f[n+100>>2]*-m;et=et*+f[n+104>>2]*-m;f[n+80>>2]=Y*+f[n+96>>2]*-m+ +f[n+80>>2];f[n+84>>2]=Z+ +f[n+84>>2];f[n+88>>2]=et+ +f[n+88>>2];p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}else{p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}}else{p=t+80|0;I=t+196|0;h=t+84|0;F=t+200|0;d=t+88|0;j=n+192|0;a=n+80|0;B=n+196|0;l=n+84|0;H=n+200|0;u=n+88|0;q=t+192|0}}while(0);v=+f[q>>2]+ +f[p>>2];m=+f[I>>2]+ +f[h>>2];g=+f[F>>2]+ +f[d>>2];y=+f[j>>2]+ +f[a>>2];b=+f[B>>2]+ +f[l>>2];w=+f[H>>2]+ +f[u>>2];if((r[e+526>>0]|0)!=0){N=+f[e+528>>2];S=N*+f[e+504>>2]*+f[e+432>>2]/i;x=+f[e+460>>2];T=+f[e+464>>2];E=+f[e+468>>2];if((y-v)*x+(b-m)*T+(w-g)*E>0)S=S+N*((y-v)*x+(b-m)*T+(w-g)*E)*+f[e+436>>2];Y=+f[e+516>>2];G=Y+S*+f[e+492>>2];G=G>0?G:0;f[e+516>>2]=G;K=+f[e+536>>2];Q=+f[e+540>>2];Z=+f[e+544>>2];et=K*x*(G-Y)+T*(G-Y)*Q+E*(G-Y)*Z;S=+X(+((E*(G-Y)-Z*et)*(E*(G-Y)-Z*et)+((x*(G-Y)-K*et)*(x*(G-Y)-K*et)+(T*(G-Y)-Q*et)*(T*(G-Y)-Q*et))));x=1/S*(x*(G-Y)-K*et);T=1/S*(T*(G-Y)-Q*et);E=1/S*(E*(G-Y)-Z*et);H=s[e+28>>2]|0;if((s[t+240>>2]|0)!=0){et=T*+f[H+300>>2]+x*+f[H+296>>2]+E*+f[H+304>>2];Z=T*+f[H+284>>2]+x*+f[H+280>>2]+E*+f[H+288>>2];Y=T*+f[H+268>>2]+x*+f[H+264>>2]+E*+f[H+272>>2];Q=S*0*+f[t+116>>2];G=S*0*+f[t+120>>2];f[t+64>>2]=S*0*+f[t+112>>2]+ +f[t+64>>2];f[t+68>>2]=Q+ +f[t+68>>2];f[t+72>>2]=G+ +f[t+72>>2];Z=Z*S*+f[t+100>>2];et=et*S*+f[t+104>>2];f[p>>2]=Y*S*+f[t+96>>2]+ +f[p>>2];f[h>>2]=Z+ +f[h>>2];f[d>>2]=et+ +f[d>>2]}H=s[e+32>>2]|0;if((s[n+240>>2]|0)!=0){et=T*+f[H+300>>2]+x*+f[H+296>>2]+E*+f[H+304>>2];Z=T*+f[H+284>>2]+x*+f[H+280>>2]+E*+f[H+288>>2];Y=T*+f[H+268>>2]+x*+f[H+264>>2]+E*+f[H+272>>2];Q=S*-0*+f[n+116>>2];G=S*-0*+f[n+120>>2];f[n+64>>2]=S*-0*+f[n+112>>2]+ +f[n+64>>2];f[n+68>>2]=Q+ +f[n+68>>2];f[n+72>>2]=G+ +f[n+72>>2];Z=Z*+f[n+100>>2]*-S;et=et*+f[n+104>>2]*-S;f[a>>2]=Y*+f[n+96>>2]*-S+ +f[a>>2];f[l>>2]=Z+ +f[l>>2];f[u>>2]=et+ +f[u>>2]}}if((r[e+525>>0]|0)==0){c=o;return}x=+f[e+532>>2];T=x*+f[e+508>>2]*+f[e+432>>2]/i;E=+f[e+476>>2];S=+f[e+480>>2];i=+f[e+484>>2];if((y-v)*E+(b-m)*S+(w-g)*i>0)T=T+x*((y-v)*E+(b-m)*S+(w-g)*i)*+f[e+436>>2];v=+f[e+520>>2];m=v+T*+f[e+496>>2];m=m>0?m:0;f[e+520>>2]=m;H=s[e+28>>2]|0;if((s[t+240>>2]|0)!=0){et=S*+f[H+300>>2]+E*+f[H+296>>2]+i*+f[H+304>>2];Z=S*+f[H+284>>2]+E*+f[H+280>>2]+i*+f[H+288>>2];i=S*+f[H+268>>2]+E*+f[H+264>>2]+i*+f[H+272>>2];S=(m-v)*0*+f[t+116>>2];E=(m-v)*0*+f[t+120>>2];f[t+64>>2]=(m-v)*0*+f[t+112>>2]+ +f[t+64>>2];f[t+68>>2]=S+ +f[t+68>>2];f[t+72>>2]=E+ +f[t+72>>2];E=Z*(m-v)*+f[t+100>>2];S=et*(m-v)*+f[t+104>>2];f[p>>2]=i*(m-v)*+f[t+96>>2]+ +f[p>>2];f[h>>2]=E+ +f[h>>2];f[d>>2]=S+ +f[d>>2];S=+f[e+480>>2];E=+f[e+476>>2];i=+f[e+484>>2]}e=s[e+32>>2]|0;if((s[n+240>>2]|0)==0){c=o;return}et=S*+f[e+300>>2]+E*+f[e+296>>2]+i*+f[e+304>>2];Z=S*+f[e+284>>2]+E*+f[e+280>>2]+i*+f[e+288>>2];Y=S*+f[e+268>>2]+E*+f[e+264>>2]+i*+f[e+272>>2];Q=(m-v)*-0*+f[n+116>>2];G=(m-v)*-0*+f[n+120>>2];f[n+64>>2]=(m-v)*-0*+f[n+112>>2]+ +f[n+64>>2];f[n+68>>2]=Q+ +f[n+68>>2];f[n+72>>2]=G+ +f[n+72>>2];Z=Z*+f[n+100>>2]*-(m-v);et=et*+f[n+104>>2]*-(m-v);f[a>>2]=Y*+f[n+96>>2]*-(m-v)+ +f[a>>2];f[l>>2]=Z+ +f[l>>2];f[u>>2]=et+ +f[u>>2];c=o;return}function Dd(e,t,n,r,i,s,o){e=e|0;t=+t;n=+n;r=+r;i=i|0;s=+s;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;u=c;c=c+16|0;n=n*s+ +f[e+52>>2];r=r*s+ +f[e+56>>2];f[o+48>>2]=t*s+ +f[e+48>>2];f[o+52>>2]=n;f[o+56>>2]=r;f[o+60>>2]=0;r=+f[i>>2];t=+f[i+4>>2];n=+f[i+8>>2];a=+X(+(r*r+t*t+n*n));if(a*s>.7853981852531433)a=.7853981852531433/s;if(a<.0010000000474974513)l=s*.5-a*s*s*s*.02083333395421505*a;else l=+J(+(a*.5*s))/a;d=l*r;t=l*t;n=l*n;m=+$(+(a*s*.5));Qn(e,u);p=+f[u>>2];v=+f[u+12>>2];s=+f[u+8>>2];l=+f[u+4>>2];g=1/+X(+((m*v-d*p-t*l-n*s)*(m*v-d*p-t*l-n*s)+((n*v+m*s+d*l-t*p)*(n*v+m*s+d*l-t*p)+((m*p+d*v+t*s-n*l)*(m*p+d*v+t*s-n*l)+(n*p+(t*v+m*l)-d*s)*(n*p+(t*v+m*l)-d*s)))));r=(m*p+d*v+t*s-n*l)*g;a=g*(n*p+(t*v+m*l)-d*s);h=g*(n*v+m*s+d*l-t*p);s=g*(m*v-d*p-t*l-n*s);n=r*(2/(s*s+(h*h+(r*r+a*a))));l=2/(s*s+(h*h+(r*r+a*a)))*a;t=2/(s*s+(h*h+(r*r+a*a)))*h;f[o>>2]=1-(h*t+a*l);f[o+4>>2]=r*l-s*t;f[o+8>>2]=r*t+s*l;f[o+12>>2]=0;f[o+16>>2]=s*t+r*l;f[o+20>>2]=1-(r*n+h*t);f[o+24>>2]=a*t-s*n;f[o+28>>2]=0;f[o+32>>2]=r*t-s*l;f[o+36>>2]=s*n+a*t;f[o+40>>2]=1-(r*n+a*l);f[o+44>>2]=0;c=u;return}function Pd(e,t,n,r){e=e|0;t=t|0;n=+n;r=+r;var i=0,s=0,o=0,u=0,a=0,l=0,c=0;i=+$(+n);n=+J(+n);s=+f[t+444>>2];if(+W(+i)>1.1920928955078125e-7){a=+f[t+448>>2];o=n*n;u=i*i;s=+X(+((n*n/(i*i)+1)/(1/(a*a)+n*n/(i*i)/(s*s))))}else{o=n*n;u=i*i}l=s*.5;a=+J(+l)/+X(+(u+0+o));l=+$(+l);c=l*r+i*a*0-n*a*-0;u=l*0-n*a*r-a*0*0;s=l*0+a*0*0-i*a*r;o=-(a*0*r)-i*a*0-n*a*-0;f[e>>2]=n*a*u+(l*c+o*-(a*0))-s*-(i*a);f[e+4>>2]=s*-(a*0)+(l*u+o*-(i*a))-n*a*c;f[e+8>>2]=c*-(i*a)+(l*s+n*a*o)-u*-(a*0);f[e+12>>2]=0;return}function Hd(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0;n=c;s[e+556>>2]=s[t+0>>2];s[e+560>>2]=s[t+4>>2];s[e+564>>2]=s[t+8>>2];s[e+568>>2]=s[t+12>>2];v=+f[e+568>>2];g=+f[e+560>>2];m=+f[e+564>>2];u=+f[e+556>>2];r=-u-g*0-m*0;o=(m+v*0-u*0)*-m+(v*(v+g*0-m*0)+r*-u)-(v*0+u*0-g)*-g;a=(v*0+u*0-g)*-u+(v*(m+v*0-u*0)+r*-g)-(v+g*0-m*0)*-m;r=(v+g*0-m*0)*-g+(v*(v*0+u*0-g)+r*-m)-(m+v*0-u*0)*-u;if(r*0+(a*0+o)<-.9999998807907104)if(+W(0)>.7071067690849304){i=0;r=S;a=S;o=0}else{i=-0;r=1;a=0;o=0}else{y=+X(+((r*0+(a*0+o)+1)*2));i=(r*0-a*0)*(1/y);r=(o*0-r)*(1/y);a=(a-o*0)*(1/y);o=y*.5}y=1/+X(+(o*o+(a*a+(r*r+i*i))));l=i*y;h=r*y;d=a*y;a=o*y;y=1/+X(+((a*v-u*-l-g*-h-m*-d)*(a*v-u*-l-g*-h-m*-d)+((v*-d+a*m+g*-l-u*-h)*(v*-d+a*m+g*-l-u*-h)+((a*u+v*-l+m*-h-g*-d)*(a*u+v*-l+m*-h-g*-d)+(u*-d+(v*-h+a*g)-m*-l)*(u*-d+(v*-h+a*g)-m*-l)))));o=(a*u+v*-l+m*-h-g*-d)*y;r=y*(u*-d+(v*-h+a*g)-m*-l);i=y*(v*-d+a*m+g*-l-u*-h);u=y*(a*v-u*-l-g*-h-m*-d);y=+f[e+444>>2];if(y>=.05000000074505806?(p=+f[e+448>>2],p>=.05000000074505806):0){m=a<-1?-1:a;m=+Q(+(m>1?1:m))*2;if(m>1.1920928955078125e-7){v=1/+X(+(d*d+(l*l+h*h)));if(+W(+(h*v))>1.1920928955078125e-7){y=+X(+((d*v*d*v/(h*v*h*v)+1)/(1/(p*p)+d*v*d*v/(h*v*h*v)/(y*y))));g=l*v;p=h*v;v=d*v}else{g=l*v;p=h*v;v=d*v}}else{y=0;g=0;p=0;v=0}if(+W(+m)>1.1920928955078125e-7){if(!(m>y)){a=-y;if(m<a)m=a}else m=y;a=m*.5;d=+J(+a)/+X(+(v*v+(p*p+g*g)));a=+$(+a);l=g*d;h=p*d;d=v*d}}v=+f[e+452>>2];if(v>=.05000000074505806){g=u<-1?-1:u;g=+Q(+(g>1?1:g))*2;if(g>3.1415927410125732){g=u>1?-1:-u;g=+Q(+(g>1?1:g))*2;y=-o;p=-r;m=-i}else{y=o;p=r;m=i}if(g>1.1920928955078125e-7){b=1/+X(+(m*m+(p*p+y*y)));y=y*b;p=p*b;m=m*b}if(+W(+g)>1.1920928955078125e-7){if(!(g>v))if(g<-v)v=-v;else v=g;u=v*.5;r=+J(+u)/+X(+(m*m+(p*p+y*y)));o=y*r;u=+$(+u);i=m*r;r=p*r}}f[e+556>>2]=h*i+(l*u+a*o)-d*r;f[e+560>>2]=d*o+(h*u+a*r)-l*i;f[e+564>>2]=d*u+a*i+l*r-h*o;f[e+568>>2]=a*u-l*o-h*r-d*i;c=n;return}function Bd(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var i=0;i=c;if((t|0)==2|(t|0)==1)if(r>>>0<3){f[e+600>>2]=n;s[e+592>>2]=s[e+592>>2]|2;c=i;return}else{f[e+432>>2]=n;c=i;return}else if((t|0)==4|(t|0)==3)if(r>>>0<3){f[e+596>>2]=n;s[e+592>>2]=s[e+592>>2]|1;c=i;return}else{f[e+604>>2]=n;s[e+592>>2]=s[e+592>>2]|4;c=i;return}else{c=i;return}}function jd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;do if((t|0)==2|(t|0)==1){if(n>>>0<3){i=+f[e+600>>2];break}if((n+ -3|0)>>>0<3)i=+f[e+432>>2];else i=0}else if((t|0)==4|(t|0)==3){if(n>>>0<3){i=+f[e+596>>2];break}if((n+ -3|0)>>>0<3)i=+f[e+604>>2];else i=0}else i=0;while(0);c=r;return+i}function Fd(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;s[e+300>>2]=s[t+0>>2];s[e+304>>2]=s[t+4>>2];s[e+308>>2]=s[t+8>>2];s[e+312>>2]=s[t+12>>2];s[e+316>>2]=s[t+16>>2];s[e+320>>2]=s[t+20>>2];s[e+324>>2]=s[t+24>>2];s[e+328>>2]=s[t+28>>2];s[e+332>>2]=s[t+32>>2];s[e+336>>2]=s[t+36>>2];s[e+340>>2]=s[t+40>>2];s[e+344>>2]=s[t+44>>2];s[e+348>>2]=s[t+48>>2];s[e+352>>2]=s[t+52>>2];s[e+356>>2]=s[t+56>>2];s[e+360>>2]=s[t+60>>2];s[e+364>>2]=s[n+0>>2];s[e+368>>2]=s[n+4>>2];s[e+372>>2]=s[n+8>>2];s[e+376>>2]=s[n+12>>2];s[e+380>>2]=s[n+16>>2];s[e+384>>2]=s[n+20>>2];s[e+388>>2]=s[n+24>>2];s[e+392>>2]=s[n+28>>2];s[e+396>>2]=s[n+32>>2];s[e+400>>2]=s[n+36>>2];s[e+404>>2]=s[n+40>>2];s[e+408>>2]=s[n+44>>2];s[e+412>>2]=s[n+48>>2];s[e+416>>2]=s[n+52>>2];s[e+420>>2]=s[n+56>>2];s[e+424>>2]=s[n+60>>2];lD[s[(s[e>>2]|0)+8>>2]&511](e);c=r;return}function Id(e){e=e|0;return}function qd(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Rd(e){e=e|0;return 212}function Ud(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;Av(e,t,n)|0;f[t+52>>2]=+f[e+300>>2];f[t+56>>2]=+f[e+304>>2];f[t+60>>2]=+f[e+308>>2];f[t+64>>2]=+f[e+312>>2];f[t+68>>2]=+f[e+316>>2];f[t+72>>2]=+f[e+320>>2];f[t+76>>2]=+f[e+324>>2];f[t+80>>2]=+f[e+328>>2];f[t+84>>2]=+f[e+332>>2];f[t+88>>2]=+f[e+336>>2];f[t+92>>2]=+f[e+340>>2];f[t+96>>2]=+f[e+344>>2];f[t+100>>2]=+f[e+348>>2];f[t+104>>2]=+f[e+352>>2];f[t+108>>2]=+f[e+356>>2];f[t+112>>2]=+f[e+360>>2];f[t+116>>2]=+f[e+364>>2];f[t+120>>2]=+f[e+368>>2];f[t+124>>2]=+f[e+372>>2];f[t+128>>2]=+f[e+376>>2];f[t+132>>2]=+f[e+380>>2];f[t+136>>2]=+f[e+384>>2];f[t+140>>2]=+f[e+388>>2];f[t+144>>2]=+f[e+392>>2];f[t+148>>2]=+f[e+396>>2];f[t+152>>2]=+f[e+400>>2];f[t+156>>2]=+f[e+404>>2];f[t+160>>2]=+f[e+408>>2];f[t+164>>2]=+f[e+412>>2];f[t+168>>2]=+f[e+416>>2];f[t+172>>2]=+f[e+420>>2];f[t+176>>2]=+f[e+424>>2];f[t+180>>2]=+f[e+444>>2];f[t+184>>2]=+f[e+448>>2];f[t+188>>2]=+f[e+452>>2];f[t+192>>2]=+f[e+428>>2];f[t+196>>2]=+f[e+432>>2];f[t+200>>2]=+f[e+436>>2];f[t+204>>2]=+f[e+440>>2];c=r;return 1352}function zd(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0;i=c;c=c+64|0;s=+f[e+20>>2];b=+f[e+40>>2];d=+f[e+24>>2];g=+f[e+36>>2];y=+f[e+32>>2];o=+f[e+16>>2];l=+f[e>>2];u=+f[e+4>>2];v=+f[e+8>>2];h=1/((s*b-d*g)*l+u*(d*y-b*o)+(g*o-s*y)*v);N=+f[t>>2];T=+f[t+4>>2];x=+f[t+8>>2];S=+f[t+16>>2];E=+f[t+20>>2];w=+f[t+24>>2];m=+f[t+32>>2];p=+f[t+36>>2];a=+f[t+40>>2];f[i+16>>2]=(s*b-d*g)*h*N+(d*y-b*o)*h*T+(g*o-s*y)*h*x;f[i+20>>2]=N*h*(g*v-b*u)+T*h*(b*l-y*v)+h*(y*u-g*l)*x;f[i+24>>2]=N*h*(d*u-s*v)+T*h*(o*v-d*l)+h*(s*l-o*u)*x;f[i+28>>2]=0;f[i+32>>2]=(s*b-d*g)*h*S+(d*y-b*o)*h*E+(g*o-s*y)*h*w;f[i+36>>2]=h*(g*v-b*u)*S+h*(b*l-y*v)*E+h*(y*u-g*l)*w;f[i+40>>2]=h*(d*u-s*v)*S+h*(o*v-d*l)*E+h*(s*l-o*u)*w;f[i+44>>2]=0;f[i+48>>2]=(s*b-d*g)*h*m+(d*y-b*o)*h*p+(g*o-s*y)*h*a;f[i+52>>2]=h*(g*v-b*u)*m+h*(b*l-y*v)*p+h*(y*u-g*l)*a;f[i+56>>2]=h*(d*u-s*v)*m+h*(o*v-d*l)*p+h*(s*l-o*u)*a;f[i+60>>2]=0;Qn(i+16|0,i);a=+f[i>>2];u=+f[i+4>>2];o=+f[i+8>>2];l=+f[i+12>>2];s=1/+X(+(a*a+u*u+o*o+l*l));f[i>>2]=a*s;f[i+4>>2]=u*s;f[i+8>>2]=o*s;f[i+12>>2]=l*s;l=l*s<-1?-1:l*s;f[r>>2]=+Q(+(l>1?1:l))*2;f[n>>2]=a*s;f[n+4>>2]=u*s;f[n+8>>2]=o*s;f[n+12>>2]=0;if(a*s*a*s+u*s*u*s+o*s*o*s<1.4210854715202004e-14){f[n>>2]=1;f[n+4>>2]=0;f[n+8>>2]=0;f[n+12>>2]=0;c=i;return}else{N=1/+X(+(a*s*a*s+u*s*u*s+o*s*o*s));f[n>>2]=a*s*N;f[n+4>>2]=N*u*s;f[n+8>>2]=N*o*s;c=i;return}}function Wd(e,t,n,r,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=+a;l=l|0;h=+h;var p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0;p=c;s[e+0>>2]=s[o+0>>2];s[e+4>>2]=s[o+4>>2];s[e+8>>2]=s[o+8>>2];s[e+12>>2]=s[o+12>>2];w=+f[r+4>>2];b=+f[e+8>>2];g=+f[r+8>>2];x=+f[e+4>>2];d=+f[e>>2];N=+f[r>>2];T=(w*b-g*x)*+f[t>>2]+ +f[t+4>>2]*(g*d-b*N)+(x*N-w*d)*+f[t+8>>2];S=(w*b-g*x)*+f[t+16>>2]+(g*d-b*N)*+f[t+20>>2]+(x*N-w*d)*+f[t+24>>2];w=(w*b-g*x)*+f[t+32>>2]+(g*d-b*N)*+f[t+36>>2]+(x*N-w*d)*+f[t+40>>2];f[e+16>>2]=T;f[e+20>>2]=S;f[e+24>>2]=w;f[e+28>>2]=0;N=+f[i+4>>2];g=+f[i+8>>2];E=+f[i>>2];y=+f[n>>2]*(N*-b-g*-x)+ +f[n+4>>2]*(g*-d-E*-b)+(E*-x-N*-d)*+f[n+8>>2];m=(N*-b-g*-x)*+f[n+16>>2]+(g*-d-E*-b)*+f[n+20>>2]+(E*-x-N*-d)*+f[n+24>>2];d=(N*-b-g*-x)*+f[n+32>>2]+(g*-d-E*-b)*+f[n+36>>2]+(E*-x-N*-d)*+f[n+40>>2];f[e+32>>2]=y;f[e+36>>2]=m;f[e+40>>2]=d;f[e+44>>2]=0;N=+f[u>>2]*T;x=+f[u+4>>2]*S;E=+f[u+8>>2]*w;f[e+48>>2]=N;f[e+52>>2]=x;f[e+56>>2]=E;f[e+60>>2]=0;b=+f[l>>2]*y;g=+f[l+4>>2]*m;v=+f[l+8>>2]*d;f[e+64>>2]=b;f[e+68>>2]=g;f[e+72>>2]=v;f[e+76>>2]=0;f[e+80>>2]=N*T+x*S+E*w+a+h+(b*y+g*m+v*d);c=p;return}function Xd(e){e=e|0;var t=0;t=c;Vd(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Vd(e){e=e|0;var t=0,n=0,i=0,o=0;t=c;s[e>>2]=1392;if((r[e+272>>0]|0)!=0?(o=s[e+204>>2]|0,lD[s[s[o>>2]>>2]&511](o),o=s[e+204>>2]|0,(o|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}o=s[e+196>>2]|0;if((o|0)!=0?(lD[s[s[o>>2]>>2]&511](o),i=s[e+196>>2]|0,(i|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}if((r[e+273>>0]|0)!=0?(n=s[e+200>>2]|0,lD[s[s[n>>2]>>2]&511](n),n=s[e+200>>2]|0,(n|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+316>>2]|0;if((n|0)!=0){if((r[e+320>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+316>>2]=0}r[e+320>>0]=1;s[e+316>>2]=0;s[e+308>>2]=0;s[e+312>>2]=0;n=s[e+288>>2]|0;if((n|0)!=0){if((r[e+292>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+288>>2]=0}r[e+292>>0]=1;s[e+288>>2]=0;s[e+280>>2]=0;s[e+284>>2]=0;n=s[e+240>>2]|0;if((n|0)!=0){if((r[e+244>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+240>>2]=0}r[e+244>>0]=1;s[e+240>>2]=0;s[e+232>>2]=0;s[e+236>>2]=0;n=s[e+220>>2]|0;if((n|0)!=0){if((r[e+224>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+220>>2]=0}r[e+224>>0]=1;s[e+220>>2]=0;s[e+212>>2]=0;s[e+216>>2]=0;n=s[e+188>>2]|0;if((n|0)==0){r[e+192>>0]=1;s[e+188>>2]=0;s[e+180>>2]=0;o=e+184|0;s[o>>2]=0;sy(e);c=t;return}if((r[e+192>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+188>>2]=0;r[e+192>>0]=1;s[e+188>>2]=0;s[e+180>>2]=0;o=e+184|0;s[o>>2]=0;sy(e);c=t;return}function $d(e,t){e=e|0;t=+t;var n=0,r=0,i=0,o=0,u=0,a=0,l=0;n=c;c=c+32|0;o=s[e+8>>2]|0;if((o|0)<=0){c=n;return}r=0;do{i=s[(s[e+16>>2]|0)+(r<<2)>>2]|0;if((!((i|0)==0?1:(s[i+236>>2]&2|0)==0)?(s[i+216>>2]|0)!=2:0)?!((s[i+204>>2]&2|0)==0|t!=0^1):0){o=s[i+480>>2]|0;if((o|0)==0)o=i+4|0;else{hD[s[(s[o>>2]|0)+8>>2]&127](o,i+4|0);o=i+4|0}a=(+f[i+56>>2]- +f[i+120>>2])*(1/t);l=1/t*(+f[i+60>>2]- +f[i+124>>2]);f[i+312>>2]=(+f[i+52>>2]- +f[i+116>>2])*(1/t);f[i+316>>2]=a;f[i+320>>2]=l;f[i+324>>2]=0;zd(i+68|0,o,n+8|0,n);l=+f[n>>2];a=1/t*l*+f[n+12>>2];u=1/t*l*+f[n+16>>2];f[i+328>>2]=1/t*+f[n+8>>2]*l;f[i+332>>2]=a;f[i+336>>2]=u;f[i+340>>2]=0;s[i+132>>2]=s[i+312>>2];s[i+136>>2]=s[i+316>>2];s[i+140>>2]=s[i+320>>2];s[i+144>>2]=s[i+324>>2];s[i+148>>2]=s[i+328>>2];s[i+152>>2]=s[i+332>>2];s[i+156>>2]=s[i+336>>2];s[i+160>>2]=s[i+340>>2];s[i+68>>2]=s[o+0>>2];s[i+72>>2]=s[o+4>>2];s[i+76>>2]=s[o+8>>2];s[i+80>>2]=s[o+12>>2];s[i+84>>2]=s[i+20>>2];s[i+88>>2]=s[i+24>>2];s[i+92>>2]=s[i+28>>2];s[i+96>>2]=s[i+32>>2];s[i+100>>2]=s[i+36>>2];s[i+104>>2]=s[i+40>>2];s[i+108>>2]=s[i+44>>2];s[i+112>>2]=s[i+48>>2];s[i+116>>2]=s[i+52>>2];s[i+120>>2]=s[i+56>>2];s[i+124>>2]=s[i+60>>2];s[i+128>>2]=s[i+64>>2];o=s[e+8>>2]|0}r=r+1|0}while((r|0)<(o|0));c=n;return}function Jd(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,X=0,V=0;t=c;c=c+1024|0;CC(1576);Ty(e);e:do if((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0?(P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0,((dD[s[(s[P>>2]|0)+48>>2]&127](P)|0)&6144|0)!=0):0){n=t+988|0;d=t+896|0;p=t+832|0;m=t+912|0;v=t+848|0;y=t+928|0;g=t+864|0;w=t+720|0;b=t+656|0;S=t+736|0;E=t+672|0;T=t+752|0;x=t+688|0;i=t+336|0;o=t+352|0;u=t+368|0;a=t+112|0;l=t+128|0;h=t+144|0;k=dD[s[(s[e>>2]|0)+104>>2]&127](e)|0;t:while(1){N=k+ -1|0;if((k|0)<=0)break e;k=DD[s[(s[e>>2]|0)+108>>2]&31](e,N)|0;P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=(dD[s[(s[P>>2]|0)+48>>2]&127](P)|0)>>>11;L=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;L=(dD[s[(s[L>>2]|0)+48>>2]&127](L)|0)>>>12;C=+f[k+40>>2];if(C<=0){k=N;continue}switch(s[k+4>>2]|0){case 3:{f[t+944>>2]=1;s[t+948>>2]=0;s[t+952>>2]=0;s[t+956>>2]=0;s[t+960>>2]=0;f[t+964>>2]=1;s[t+968>>2]=0;s[t+972>>2]=0;s[t+976>>2]=0;s[t+980>>2]=0;f[t+984>>2]=1;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;D=+f[k+300>>2];_=+f[k+304>>2];H=+f[k+308>>2];M=s[k+28>>2]|0;B=D*+f[M+20>>2]+_*+f[M+24>>2]+H*+f[M+28>>2]+ +f[M+56>>2];j=D*+f[M+36>>2]+_*+f[M+40>>2]+H*+f[M+44>>2]+ +f[M+60>>2];f[t+992>>2]=D*+f[M+4>>2]+_*+f[M+8>>2]+H*+f[M+12>>2]+ +f[M+52>>2];f[t+996>>2]=B;f[t+1e3>>2]=j;f[t+1004>>2]=0;M=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[M>>2]|0)+56>>2]&7](M,t+944|0,C);j=+f[k+316>>2];B=+f[k+320>>2];H=+f[k+324>>2];M=s[k+32>>2]|0;_=j*+f[M+20>>2]+B*+f[M+24>>2]+H*+f[M+28>>2]+ +f[M+56>>2];D=j*+f[M+36>>2]+B*+f[M+40>>2]+H*+f[M+44>>2]+ +f[M+60>>2];f[t+992>>2]=j*+f[M+4>>2]+B*+f[M+8>>2]+H*+f[M+12>>2]+ +f[M+52>>2];f[t+996>>2]=_;f[t+1e3>>2]=D;f[t+1004>>2]=0;if((P&1|0)==0){k=N;continue t}k=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[k>>2]|0)+56>>2]&7](k,t+944|0,C);k=N;continue t};case 4:{bd(t+880|0,(s[k+28>>2]|0)+4|0,k+552|0);if((P&1|0)==0){bd(t+816|0,(s[k+32>>2]|0)+4|0,k+616|0);s[t+880>>2]=s[t+816>>2];s[t+884>>2]=s[t+820>>2];s[t+888>>2]=s[t+824>>2];s[t+892>>2]=s[t+828>>2];s[d+0>>2]=s[p+0>>2];s[d+4>>2]=s[p+4>>2];s[d+8>>2]=s[p+8>>2];s[d+12>>2]=s[p+12>>2];s[m+0>>2]=s[v+0>>2];s[m+4>>2]=s[v+4>>2];s[m+8>>2]=s[v+8>>2];s[m+12>>2]=s[v+12>>2];s[y+0>>2]=s[g+0>>2];s[y+4>>2]=s[g+4>>2];s[y+8>>2]=s[g+8>>2];s[y+12>>2]=s[g+12>>2]}else{P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+880|0,C);bd(t+816|0,(s[k+32>>2]|0)+4|0,k+616|0);s[t+880>>2]=s[t+816>>2];s[t+884>>2]=s[t+820>>2];s[t+888>>2]=s[t+824>>2];s[t+892>>2]=s[t+828>>2];s[d+0>>2]=s[p+0>>2];s[d+4>>2]=s[p+4>>2];s[d+8>>2]=s[p+8>>2];s[d+12>>2]=s[p+12>>2];s[m+0>>2]=s[v+0>>2];s[m+4>>2]=s[v+4>>2];s[m+8>>2]=s[v+8>>2];s[m+12>>2]=s[v+12>>2];s[y+0>>2]=s[g+0>>2];s[y+4>>2]=s[g+4>>2];s[y+8>>2]=s[g+8>>2];s[y+12>>2]=s[g+12>>2];P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+880|0,C)}_=+rn(+(+f[k+688>>2]- +f[k+692>>2]),6.2831854820251465);if(!(_<-3.1415927410125732)){if(_>3.1415927410125732)_=_+ -6.2831854820251465}else _=_+6.2831854820251465;D=+rn(+(+f[k+688>>2]+ +f[k+692>>2]),6.2831854820251465);if(!(D<-3.1415927410125732)){if(D>3.1415927410125732)D=D+ -6.2831854820251465}else D=D+6.2831854820251465;if(_==D){k=N;continue t}k=_>D;if((L&1|0)==0){k=N;continue t}f[t+800>>2]=+f[t+888>>2];f[t+804>>2]=+f[t+904>>2];f[t+808>>2]=+f[t+920>>2];f[t+812>>2]=0;f[t+784>>2]=+f[t+880>>2];f[t+788>>2]=+f[t+896>>2];f[t+792>>2]=+f[t+912>>2];f[t+796>>2]=0;P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;M=s[(s[P>>2]|0)+60>>2]|0;s[t+768>>2]=0;s[t+772>>2]=0;s[t+776>>2]=0;s[t+780>>2]=0;ED[M&0](P,y,t+800|0,t+784|0,C,C,k?0:_,k?6.2831854820251465:D,t+768|0,k^1,10);k=N;continue t};case 5:{bd(t+704|0,(s[k+28>>2]|0)+4|0,k+300|0);if((P&1|0)==0){bd(t+640|0,(s[k+32>>2]|0)+4|0,k+364|0);s[t+704>>2]=s[t+640>>2];s[t+708>>2]=s[t+644>>2];s[t+712>>2]=s[t+648>>2];s[t+716>>2]=s[t+652>>2];s[w+0>>2]=s[b+0>>2];s[w+4>>2]=s[b+4>>2];s[w+8>>2]=s[b+8>>2];s[w+12>>2]=s[b+12>>2];s[S+0>>2]=s[E+0>>2];s[S+4>>2]=s[E+4>>2];s[S+8>>2]=s[E+8>>2];s[S+12>>2]=s[E+12>>2];s[T+0>>2]=s[x+0>>2];s[T+4>>2]=s[x+4>>2];s[T+8>>2]=s[x+8>>2];s[T+12>>2]=s[x+12>>2]}else{P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+704|0,C);bd(t+640|0,(s[k+32>>2]|0)+4|0,k+364|0);s[t+704>>2]=s[t+640>>2];s[t+708>>2]=s[t+644>>2];s[t+712>>2]=s[t+648>>2];s[t+716>>2]=s[t+652>>2];s[w+0>>2]=s[b+0>>2];s[w+4>>2]=s[b+4>>2];s[w+8>>2]=s[b+8>>2];s[w+12>>2]=s[b+12>>2];s[S+0>>2]=s[E+0>>2];s[S+4>>2]=s[E+4>>2];s[S+8>>2]=s[E+8>>2];s[S+12>>2]=s[E+12>>2];s[T+0>>2]=s[x+0>>2];s[T+4>>2]=s[x+4>>2];s[T+8>>2]=s[x+8>>2];s[T+12>>2]=s[x+12>>2];P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+704|0,C)}if((L&1|0)==0){k=N;continue t}Pd(t+624|0,k,6.0868353843688965,C);_=+f[t+624>>2];D=+f[t+628>>2];H=+f[t+632>>2];B=_*+f[t+720>>2]+D*+f[t+724>>2]+H*+f[t+728>>2]+ +f[t+756>>2];j=_*+f[t+736>>2]+D*+f[t+740>>2]+H*+f[t+744>>2]+ +f[t+760>>2];f[t+624>>2]=_*+f[t+704>>2]+D*+f[t+708>>2]+H*+f[t+712>>2]+ +f[t+752>>2];f[t+628>>2]=B;f[t+632>>2]=j;f[t+636>>2]=0;L=0;do{Pd(t+608|0,k,+(L|0)*6.283185005187988*.03125,C);_=+f[t+608>>2];D=+f[t+612>>2];H=+f[t+616>>2];B=_*+f[t+720>>2]+D*+f[t+724>>2]+H*+f[t+728>>2]+ +f[t+756>>2];j=_*+f[t+736>>2]+D*+f[t+740>>2]+H*+f[t+744>>2]+ +f[t+760>>2];f[t+608>>2]=_*+f[t+704>>2]+D*+f[t+708>>2]+H*+f[t+712>>2]+ +f[t+752>>2];f[t+612>>2]=B;f[t+616>>2]=j;f[t+620>>2]=0;P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;M=s[(s[P>>2]|0)+8>>2]|0;s[t+592>>2]=0;s[t+596>>2]=0;s[t+600>>2]=0;s[t+604>>2]=0;JD[M&127](P,t+624|0,t+608|0,t+592|0);if((L&3|0)==0){P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;M=s[(s[P>>2]|0)+8>>2]|0;s[t+576>>2]=0;s[t+580>>2]=0;s[t+584>>2]=0;s[t+588>>2]=0;JD[M&127](P,T,t+608|0,t+576|0)}s[t+624>>2]=s[t+608>>2];s[t+628>>2]=s[t+612>>2];s[t+632>>2]=s[t+616>>2];s[t+636>>2]=s[t+620>>2];L=L+1|0}while((L|0)!=32);D=+f[k+452>>2];_=+f[k+512>>2];L=s[k+32>>2]|0;if(+f[L+344>>2]>0){bd(t+512|0,L+4|0,k+364|0);s[t+704>>2]=s[t+512>>2];s[t+708>>2]=s[t+516>>2];s[t+712>>2]=s[t+520>>2];s[t+716>>2]=s[t+524>>2];s[w+0>>2]=s[t+528>>2];s[w+4>>2]=s[t+532>>2];s[w+8>>2]=s[t+536>>2];s[w+12>>2]=s[t+540>>2];s[S+0>>2]=s[t+544>>2];s[S+4>>2]=s[t+548>>2];s[S+8>>2]=s[t+552>>2];s[S+12>>2]=s[t+556>>2];s[T+0>>2]=s[t+560>>2];s[T+4>>2]=s[t+564>>2];s[T+8>>2]=s[t+568>>2];s[T+12>>2]=s[t+572>>2]}else{bd(t+448|0,(s[k+28>>2]|0)+4|0,k+300|0);s[t+704>>2]=s[t+448>>2];s[t+708>>2]=s[t+452>>2];s[t+712>>2]=s[t+456>>2];s[t+716>>2]=s[t+460>>2];s[w+0>>2]=s[t+464>>2];s[w+4>>2]=s[t+468>>2];s[w+8>>2]=s[t+472>>2];s[w+12>>2]=s[t+476>>2];s[S+0>>2]=s[t+480>>2];s[S+4>>2]=s[t+484>>2];s[S+8>>2]=s[t+488>>2];s[S+12>>2]=s[t+492>>2];s[T+0>>2]=s[t+496>>2];s[T+4>>2]=s[t+500>>2];s[T+8>>2]=s[t+504>>2];s[T+12>>2]=s[t+508>>2]}s[t+432>>2]=s[T+0>>2];s[t+436>>2]=s[T+4>>2];s[t+440>>2]=s[T+8>>2];s[t+444>>2]=s[T+12>>2];f[t+416>>2]=+f[t+704>>2];f[t+420>>2]=+f[t+720>>2];f[t+424>>2]=+f[t+736>>2];f[t+428>>2]=0;f[t+400>>2]=+f[t+708>>2];f[t+404>>2]=+f[t+724>>2];f[t+408>>2]=+f[t+740>>2];f[t+412>>2]=0;k=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=s[(s[k>>2]|0)+60>>2]|0;s[t+384>>2]=0;s[t+388>>2]=0;s[t+392>>2]=0;s[t+396>>2]=0;ED[P&0](k,t+432|0,t+416|0,t+400|0,C,C,-_-D,D-_,t+384|0,1,10);k=N;continue t};case 6:case 9:{s[t+320>>2]=s[k+1064>>2];s[t+324>>2]=s[k+1068>>2];s[t+328>>2]=s[k+1072>>2];s[t+332>>2]=s[k+1076>>2];O=k+1080|0;s[i+0>>2]=s[O+0>>2];s[i+4>>2]=s[O+4>>2];s[i+8>>2]=s[O+8>>2];s[i+12>>2]=s[O+12>>2];M=k+1096|0;s[o+0>>2]=s[M+0>>2];s[o+4>>2]=s[M+4>>2];s[o+8>>2]=s[M+8>>2];s[o+12>>2]=s[M+12>>2];A=k+1112|0;s[u+0>>2]=s[A+0>>2];s[u+4>>2]=s[A+4>>2];s[u+8>>2]=s[A+8>>2];s[u+12>>2]=s[A+12>>2];if((P&1|0)==0){s[t+320>>2]=s[k+1128>>2];s[t+324>>2]=s[k+1132>>2];s[t+328>>2]=s[k+1136>>2];s[t+332>>2]=s[k+1140>>2];s[i+0>>2]=s[k+1144>>2];s[i+4>>2]=s[k+1148>>2];s[i+8>>2]=s[k+1152>>2];s[i+12>>2]=s[k+1156>>2];s[o+0>>2]=s[k+1160>>2];s[o+4>>2]=s[k+1164>>2];s[o+8>>2]=s[k+1168>>2];s[o+12>>2]=s[k+1172>>2];s[u+0>>2]=s[k+1176>>2];s[u+4>>2]=s[k+1180>>2];s[u+8>>2]=s[k+1184>>2];s[u+12>>2]=s[k+1188>>2]}else{P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+320|0,C);s[t+320>>2]=s[k+1128>>2];s[t+324>>2]=s[k+1132>>2];s[t+328>>2]=s[k+1136>>2];s[t+332>>2]=s[k+1140>>2];s[i+0>>2]=s[k+1144>>2];s[i+4>>2]=s[k+1148>>2];s[i+8>>2]=s[k+1152>>2];s[i+12>>2]=s[k+1156>>2];s[o+0>>2]=s[k+1160>>2];s[o+4>>2]=s[k+1164>>2];s[o+8>>2]=s[k+1168>>2];s[o+12>>2]=s[k+1172>>2];s[u+0>>2]=s[k+1176>>2];s[u+4>>2]=s[k+1180>>2];s[u+8>>2]=s[k+1184>>2];s[u+12>>2]=s[k+1188>>2];P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[P>>2]|0)+56>>2]&7](P,t+320|0,C)}if((L&1|0)==0){k=N;continue t}s[t+320>>2]=s[k+1064>>2];s[t+324>>2]=s[k+1068>>2];s[t+328>>2]=s[k+1072>>2];s[t+332>>2]=s[k+1076>>2];s[i+0>>2]=s[O+0>>2];s[i+4>>2]=s[O+4>>2];s[i+8>>2]=s[O+8>>2];s[i+12>>2]=s[O+12>>2];s[o+0>>2]=s[M+0>>2];s[o+4>>2]=s[M+4>>2];s[o+8>>2]=s[M+8>>2];s[o+12>>2]=s[M+12>>2];s[u+0>>2]=s[A+0>>2];s[u+4>>2]=s[A+4>>2];s[u+8>>2]=s[A+8>>2];s[u+12>>2]=s[A+12>>2];L=k+1176|0;f[t+304>>2]=+f[t+328>>2];f[t+308>>2]=+f[t+344>>2];f[t+312>>2]=+f[t+360>>2];f[t+316>>2]=0;f[t+288>>2]=+f[t+320>>2];f[t+292>>2]=+f[t+336>>2];f[t+296>>2]=+f[t+352>>2];f[t+300>>2]=0;H=+f[k+932>>2];D=+f[k+936>>2];j=+f[k+996>>2];F=+f[k+1e3>>2];P=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;q=s[(s[P>>2]|0)+64>>2]|0;s[t+272>>2]=0;s[t+276>>2]=0;s[t+280>>2]=0;s[t+284>>2]=0;ID[q&0](P,L,t+304|0,t+288|0,C*.8999999761581421,H,D,j,F,t+272|0,10,1);F=+f[t+324>>2];j=+f[t+340>>2];D=+f[t+356>>2];f[t+288>>2]=F;f[t+292>>2]=j;f[t+296>>2]=D;f[t+300>>2]=0;H=+f[k+1196>>2];B=+f[k+1200>>2];_=+$(+H);H=+J(+H);I=+$(+B);B=+J(+B);f[t+256>>2]=_*I*F+_*B*j-H*D;f[t+260>>2]=I*j-B*F;f[t+264>>2]=H*I*F+H*B*j+_*D;s[t+320>>2]=s[k+1128>>2];s[t+324>>2]=s[k+1132>>2];s[t+328>>2]=s[k+1136>>2];s[t+332>>2]=s[k+1140>>2];s[i+0>>2]=s[k+1144>>2];s[i+4>>2]=s[k+1148>>2];s[i+8>>2]=s[k+1152>>2];s[i+12>>2]=s[k+1156>>2];s[o+0>>2]=s[k+1160>>2];s[o+4>>2]=s[k+1164>>2];s[o+8>>2]=s[k+1168>>2];s[o+12>>2]=s[k+1172>>2];s[u+0>>2]=s[L+0>>2];s[u+4>>2]=s[L+4>>2];s[u+8>>2]=s[L+8>>2];s[u+12>>2]=s[L+12>>2];D=-+f[t+336>>2];_=-+f[t+352>>2];f[t+240>>2]=-+f[t+320>>2];f[t+244>>2]=D;f[t+248>>2]=_;f[t+252>>2]=0;_=+f[k+868>>2];D=+f[k+872>>2];if(!(_>D)){if(_<D){q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=s[(s[q>>2]|0)+60>>2]|0;s[t+208>>2]=0;s[t+212>>2]=0;s[t+216>>2]=0;s[t+220>>2]=0;ED[P&0](q,L,t+240|0,t+256|0,C,C,_,D,t+208|0,1,10)}}else{q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=s[(s[q>>2]|0)+60>>2]|0;s[t+224>>2]=0;s[t+228>>2]=0;s[t+232>>2]=0;s[t+236>>2]=0;ED[P&0](q,L,t+240|0,t+256|0,C,C,-3.1415927410125732,3.1415927410125732,t+224|0,0,10)}s[t+320>>2]=s[k+1064>>2];s[t+324>>2]=s[k+1068>>2];s[t+328>>2]=s[k+1072>>2];s[t+332>>2]=s[k+1076>>2];s[i+0>>2]=s[O+0>>2];s[i+4>>2]=s[O+4>>2];s[i+8>>2]=s[O+8>>2];s[i+12>>2]=s[O+12>>2];s[o+0>>2]=s[M+0>>2];s[o+4>>2]=s[M+4>>2];s[o+8>>2]=s[M+8>>2];s[o+12>>2]=s[M+12>>2];s[u+0>>2]=s[A+0>>2];s[u+4>>2]=s[A+4>>2];s[u+8>>2]=s[A+8>>2];s[u+12>>2]=s[A+12>>2];s[t+192>>2]=s[k+680>>2];s[t+196>>2]=s[k+684>>2];s[t+200>>2]=s[k+688>>2];s[t+204>>2]=s[k+692>>2];s[t+176>>2]=s[k+696>>2];s[t+180>>2]=s[k+700>>2];s[t+184>>2]=s[k+704>>2];s[t+188>>2]=s[k+708>>2];k=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;q=s[(s[k>>2]|0)+72>>2]|0;s[t+160>>2]=0;s[t+164>>2]=0;s[t+168>>2]=0;s[t+172>>2]=0;aD[q&31](k,t+192|0,t+176|0,t+320|0,t+160|0);k=N;continue t};case 7:{s[t+96>>2]=s[k+824>>2];s[t+100>>2]=s[k+828>>2];s[t+104>>2]=s[k+832>>2];s[t+108>>2]=s[k+836>>2];s[a+0>>2]=s[k+840>>2];s[a+4>>2]=s[k+844>>2];s[a+8>>2]=s[k+848>>2];s[a+12>>2]=s[k+852>>2];s[l+0>>2]=s[k+856>>2];s[l+4>>2]=s[k+860>>2];s[l+8>>2]=s[k+864>>2];s[l+12>>2]=s[k+868>>2];s[h+0>>2]=s[k+872>>2];s[h+4>>2]=s[k+876>>2];s[h+8>>2]=s[k+880>>2];s[h+12>>2]=s[k+884>>2];if((P&1|0)==0){s[t+96>>2]=s[k+888>>2];s[t+100>>2]=s[k+892>>2];s[t+104>>2]=s[k+896>>2];s[t+108>>2]=s[k+900>>2];s[a+0>>2]=s[k+904>>2];s[a+4>>2]=s[k+908>>2];s[a+8>>2]=s[k+912>>2];s[a+12>>2]=s[k+916>>2];s[l+0>>2]=s[k+920>>2];s[l+4>>2]=s[k+924>>2];s[l+8>>2]=s[k+928>>2];s[l+12>>2]=s[k+932>>2];s[h+0>>2]=s[k+936>>2];s[h+4>>2]=s[k+940>>2];s[h+8>>2]=s[k+944>>2];s[h+12>>2]=s[k+948>>2]}else{q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[q>>2]|0)+56>>2]&7](q,t+96|0,C);s[t+96>>2]=s[k+888>>2];s[t+100>>2]=s[k+892>>2];s[t+104>>2]=s[k+896>>2];s[t+108>>2]=s[k+900>>2];s[a+0>>2]=s[k+904>>2];s[a+4>>2]=s[k+908>>2];s[a+8>>2]=s[k+912>>2];s[a+12>>2]=s[k+916>>2];s[l+0>>2]=s[k+920>>2];s[l+4>>2]=s[k+924>>2];s[l+8>>2]=s[k+928>>2];s[l+12>>2]=s[k+932>>2];s[h+0>>2]=s[k+936>>2];s[h+4>>2]=s[k+940>>2];s[h+8>>2]=s[k+944>>2];s[h+12>>2]=s[k+948>>2];q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[q>>2]|0)+56>>2]&7](q,t+96|0,C)}if((L&1|0)==0){k=N;continue t}q=(r[k+180>>0]|0)!=0?k+824|0:k+888|0;D=+f[q>>2];j=+f[q+4>>2];H=+f[q+16>>2];I=+f[q+20>>2];B=+f[q+32>>2];F=+f[q+36>>2];V=+f[q+48>>2];W=+f[q+52>>2];U=+f[q+56>>2];_=+f[k+184>>2];X=+f[q+8>>2]*0;z=+f[q+24>>2]*0;R=+f[q+40>>2]*0;f[t+80>>2]=V+(X+(j*0+D*_));f[t+84>>2]=W+(z+(I*0+H*_));f[t+88>>2]=U+(R+(F*0+B*_));f[t+92>>2]=0;_=+f[k+188>>2];f[t+64>>2]=V+(X+(j*0+D*_));f[t+68>>2]=W+(z+(I*0+H*_));f[t+72>>2]=U+(R+(F*0+B*_));f[t+76>>2]=0;q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=s[(s[q>>2]|0)+8>>2]|0;s[t+48>>2]=0;s[t+52>>2]=0;s[t+56>>2]=0;s[t+60>>2]=0;JD[P&127](q,t+80|0,t+64|0,t+48|0);f[t+32>>2]=D;f[t+36>>2]=H;f[t+40>>2]=B;f[t+44>>2]=0;f[t+16>>2]=j;f[t+20>>2]=I;f[t+24>>2]=F;f[t+28>>2]=0;F=+f[k+192>>2];I=+f[k+196>>2];q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;P=s[(s[q>>2]|0)+60>>2]|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;ED[P&0](q,k+936|0,t+32|0,t+16|0,C,C,F,I,t,1,10);k=N;continue t};default:{k=N;continue t}}}}while(0);if(((((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0?(q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0,((dD[s[(s[q>>2]|0)+48>>2]&127](q)|0)&16387|0)!=0):0)?(dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0:0)?(q=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0,(dD[s[(s[q>>2]|0)+48>>2]&127](q)|0)!=0):0)?(s[e+280>>2]|0)>0:0){n=0;do{q=s[(s[e+288>>2]|0)+(n<<2)>>2]|0;hD[s[(s[q>>2]|0)+12>>2]&127](q,s[e+72>>2]|0);n=n+1|0}while((n|0)<(s[e+280>>2]|0))}e=s[5022]|0;q=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=q;if((q|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t+1008|0,0)|0;q=s[5008]|0;f[e+8>>2]=+(((s[t+1012>>2]|0)-(s[q+4>>2]|0)+(((s[t+1008>>2]|0)-(s[q>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function Kd(e){e=e|0;var t=0,n=0,r=0;t=c;if((s[e+232>>2]|0)<=0){c=t;return}n=0;do{r=(s[(s[e+240>>2]|0)+(n<<2)>>2]|0)+412|0;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;n=n+1|0}while((n|0)<(s[e+232>>2]|0));c=t;return}function Qd(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0;t=c;n=s[e+232>>2]|0;if((n|0)<=0){c=t;return}e=s[e+240>>2]|0;r=0;do{i=s[e+(r<<2)>>2]|0;o=s[i+216>>2]|0;if(!((o|0)==2|(o|0)==5)?(s[i+204>>2]&3|0)==0:0){a=+f[i+368>>2]*+f[i+352>>2];u=+f[i+372>>2]*+f[i+356>>2];f[i+412>>2]=+f[i+364>>2]*+f[i+348>>2]+ +f[i+412>>2];f[i+416>>2]=a+ +f[i+416>>2];f[i+420>>2]=u+ +f[i+420>>2]}r=r+1|0}while((r|0)<(n|0));c=t;return}function Gd(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0;t=c;c=c+144|0;CC(1592);if((r[e+274>>0]|0)==0){a=s[e+232>>2]|0;if((a|0)>0){o=0;do{u=s[(s[e+240>>2]|0)+(o<<2)>>2]|0;l=s[u+216>>2]|0;if((!((l|0)==2|(l|0)==5)?(s[u+480>>2]|0)!=0:0)?(s[u+204>>2]&3|0)==0:0){if((r[e+300>>0]|0)!=0?(n=+f[e+268>>2],n!=0):0)i=+f[e+264>>2]-n;else i=+f[e+264>>2]*+f[u+244>>2];Dd(u+68|0,+f[u+132>>2],+f[u+136>>2],+f[u+140>>2],u+148|0,i,t);a=s[u+480>>2]|0;hD[s[(s[a>>2]|0)+12>>2]&127](a,t);a=s[e+232>>2]|0}o=o+1|0}while((o|0)<(a|0))}}else{a=s[e+8>>2]|0;if((a|0)>0){o=0;do{u=s[(s[e+16>>2]|0)+(o<<2)>>2]|0;if((!((u|0)==0?1:(s[u+236>>2]&2|0)==0)?(s[u+480>>2]|0)!=0:0)?(s[u+204>>2]&3|0)==0:0){if((r[e+300>>0]|0)!=0?(i=+f[e+268>>2],i!=0):0)n=+f[e+264>>2]-i;else n=+f[e+264>>2]*+f[u+244>>2];Dd(u+68|0,+f[u+132>>2],+f[u+136>>2],+f[u+140>>2],u+148|0,n,t+64|0);a=s[u+480>>2]|0;hD[s[(s[a>>2]|0)+12>>2]&127](a,t+64|0);a=s[e+8>>2]|0}o=o+1|0}while((o|0)<(a|0))}}e=s[5022]|0;l=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=l;if((l|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t+128|0,0)|0;l=s[5008]|0;f[e+8>>2]=+(((s[t+132>>2]|0)-(s[l+4>>2]|0)+(((s[t+128>>2]|0)-(s[l>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function Yd(e,t,n,i){e=e|0;t=+t;n=n|0;i=+i;var o=0,u=0,a=0,l=0;o=c;c=c+16|0;Pn(s[5008]|0,0)|0;NC(20040);s[5011]=(s[5011]|0)+1;l=s[5014]|0;s[5014]=l+1;if((l|0)==0){Pn(o|0,0)|0;l=s[5008]|0;s[5013]=(s[o+4>>2]|0)-(s[l+4>>2]|0)+(((s[o>>2]|0)-(s[l>>2]|0)|0)*1e6|0)}s[5024]=0;Pn(o|0,0)|0;CC(1616);if((n|0)!=0){f[e+268>>2]=i;a=+f[e+264>>2]+t;f[e+264>>2]=a;if(!(a>=i)){t=i;u=0}else{f[e+264>>2]=a- +(~~(a/i)|0)*i;t=i;u=~~(a/i)}}else{f[e+264>>2]=(r[e+300>>0]|0)!=0?0:t;f[e+268>>2]=0;u=!(+W(+t)<1.1920928955078125e-7)&1;n=u}if((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0){l=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;r[3896]=(dD[s[(s[l>>2]|0)+48>>2]&127](l)|0)>>>4&1}if((u|0)!=0){n=(u|0)>(n|0)?n:u;fD[s[(s[e>>2]|0)+164>>2]&31](e,t*+(n|0));lD[s[(s[e>>2]|0)+168>>2]&511](e);if((n|0)>0){l=0;do{fD[s[(s[e>>2]|0)+160>>2]&31](e,t);lD[s[(s[e>>2]|0)+80>>2]&511](e);l=l+1|0}while((l|0)<(n|0))}}else lD[s[(s[e>>2]|0)+80>>2]&511](e);lD[s[(s[e>>2]|0)+120>>2]&511](e);s[5024]=(s[5024]|0)+1;e=s[5022]|0;l=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=l;if((l|0)!=0){c=o;return u|0}do if((s[e+4>>2]|0)!=0){Pn(o|0,0)|0;l=s[5008]|0;f[e+8>>2]=+(((s[o+4>>2]|0)-(s[l+4>>2]|0)+(((s[o>>2]|0)-(s[l>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=o;return u|0}}while(0);s[5022]=s[e+20>>2];c=o;return u|0}function Zd(e,t){e=e|0;t=+t;var n=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0;n=c;c=c+464|0;CC(1632);v=s[e+84>>2]|0;if((v|0)!=0)fD[v&31](e,t);fD[s[(s[e>>2]|0)+140>>2]&31](e,t);f[e+28>>2]=t;s[e+32>>2]=0;s[e+48>>2]=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;CC(1768);CC(1800);m=s[e+316>>2]|0;if((s[e+308>>2]|0)>0){v=0;do{L=s[e+24>>2]|0;hD[s[(s[L>>2]|0)+16>>2]&127](L,s[m+(v<<2)>>2]|0);v=v+1|0;m=s[e+316>>2]|0}while((v|0)<(s[e+308>>2]|0))}if((m|0)!=0){if((r[e+320>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[m+ -4>>2]|0)}s[e+316>>2]=0}r[e+320>>0]=1;s[e+316>>2]=0;s[e+308>>2]=0;s[e+312>>2]=0;v=s[5022]|0;L=(s[v+16>>2]|0)+ -1|0;s[v+16>>2]=L;do if((L|0)==0){if((s[v+4>>2]|0)!=0){Pn(n+280|0,0)|0;L=s[5008]|0;f[v+8>>2]=+(((s[n+284>>2]|0)-(s[L+4>>2]|0)+(((s[n+280>>2]|0)-(s[L>>2]|0)|0)*1e6|0)-(s[v+12>>2]|0)|0)>>>0)/1e3+ +f[v+8>>2];if((s[v+16>>2]|0)!=0)break;v=s[5022]|0}s[5022]=s[v+20>>2]}while(0);if((s[e+232>>2]|0)>0){v=n+264|0;y=n+164|0;g=n+400|0;m=0;do{b=s[(s[e+240>>2]|0)+(m<<2)>>2]|0;f[b+244>>2]=1;L=s[b+216>>2]|0;do if(((!((L|0)==2|(L|0)==5)?(s[b+204>>2]&3|0)==0:0)?(Dd(b+4|0,+f[b+312>>2],+f[b+316>>2],+f[b+320>>2],b+328|0,t,n+216|0),l=+f[v>>2],o=l- +f[b+52>>2],h=+f[n+268>>2],u=h- +f[b+56>>2],p=+f[n+272>>2],a=p- +f[b+60>>2],(r[e+44>>0]|0)!=0):0)?(T=+f[b+252>>2],T*T!=0?T*T<o*o+u*u+a*a:0):0){CC(1840);if((s[(s[b+192>>2]|0)+4>>2]|0)<20){s[440]=(s[440]|0)+1;k=s[e+68>>2]|0;k=dD[s[(s[k>>2]|0)+36>>2]&127](k)|0;L=s[e+24>>2]|0;f[n+124>>2]=1;i[n+128>>1]=1;i[n+130>>1]=-1;s[n+120>>2]=688;s[n+132>>2]=s[b+52>>2];s[n+136>>2]=s[b+56>>2];s[n+140>>2]=s[b+60>>2];s[n+144>>2]=s[b+64>>2];s[n+148>>2]=s[v+0>>2];s[n+152>>2]=s[v+4>>2];s[n+156>>2]=s[v+8>>2];s[n+160>>2]=s[v+12>>2];s[n+196>>2]=0;s[n+120>>2]=2160;s[n+200>>2]=b;f[n+204>>2]=0;s[n+208>>2]=k;s[n+212>>2]=L;S=+f[b+248>>2];s[n+72>>2]=0;f[n+76>>2]=1;f[n+80>>2]=1;f[n+84>>2]=1;f[n+88>>2]=0;s[n+64>>2]=16680;s[n+68>>2]=8;f[n+92>>2]=S;f[n+108>>2]=S;f[n+204>>2]=+f[e+56>>2];L=s[b+188>>2]|0;i[n+128>>1]=i[L+4>>1]|0;i[n+130>>1]=i[L+6>>1]|0;s[n+48>>2]=s[v+0>>2];s[n+52>>2]=s[v+4>>2];s[n+56>>2]=s[v+8>>2];s[n+60>>2]=s[v+12>>2];s[n+0>>2]=s[b+4>>2];s[n+4>>2]=s[b+8>>2];s[n+8>>2]=s[b+12>>2];s[n+12>>2]=s[b+16>>2];s[n+16>>2]=s[b+20>>2];s[n+20>>2]=s[b+24>>2];s[n+24>>2]=s[b+28>>2];s[n+28>>2]=s[b+32>>2];s[n+32>>2]=s[b+36>>2];s[n+36>>2]=s[b+40>>2];s[n+40>>2]=s[b+44>>2];s[n+44>>2]=s[b+48>>2];yy(e,n+64|0,b+4|0,n,n+120|0,0);S=+f[n+124>>2];if(S<1){E=S*(l- +f[b+52>>2]);w=S*(h- +f[b+56>>2]);S=S*(p- +f[b+60>>2]);T=-(w*+f[n+168>>2])-E*+f[y>>2]-S*+f[n+172>>2];x=s[e+24>>2]|0;x=xD[s[(s[x>>2]|0)+12>>2]&31](x,b,s[n+196>>2]|0)|0;C=s[e+308>>2]|0;if((C|0)==(s[e+312>>2]|0)?(d=(C|0)==0?1:C<<1,(C|0)<(d|0)):0){if((d|0)==0)N=0;else{s[5004]=(s[5004]|0)+1;N=cM((d<<2|3)+16|0)|0;if((N|0)==0)N=0;else{s[(N+19&-16)+ -4>>2]=N;N=N+19&-16}C=s[e+308>>2]|0}if((C|0)>0){k=0;do{L=N+(k<<2)|0;if((L|0)!=0)s[L>>2]=s[(s[e+316>>2]|0)+(k<<2)>>2];k=k+1|0}while((k|0)!=(C|0))}k=s[e+316>>2]|0;if((k|0)!=0){if((r[e+320>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[k+ -4>>2]|0);C=s[e+308>>2]|0}s[e+316>>2]=0}r[e+320>>0]=1;s[e+316>>2]=N;s[e+312>>2]=d}N=(s[e+316>>2]|0)+(C<<2)|0;if((N|0)!=0)s[N>>2]=x;s[e+308>>2]=C+1;A=E+ +f[b+52>>2];E=w+ +f[b+56>>2];S=S+ +f[b+60>>2];L=s[n+196>>2]|0;q=+f[L+4>>2];I=+f[L+20>>2];F=+f[L+36>>2];j=+f[L+8>>2];B=+f[L+24>>2];H=+f[L+40>>2];P=+f[L+12>>2];_=+f[L+28>>2];O=+f[L+44>>2];D=-+f[L+52>>2];M=-+f[L+56>>2];w=-+f[L+60>>2];s[n+280>>2]=0;s[n+284>>2]=0;s[n+288>>2]=0;s[n+292>>2]=0;f[n+296>>2]=A*q+E*I+S*F+(q*D+I*M+F*w);f[n+300>>2]=A*j+E*B+S*H+(j*D+B*M+H*w);f[n+304>>2]=A*P+E*_+S*O+(P*D+_*M+O*w);f[n+308>>2]=0;s[n+344>>2]=s[y+0>>2];s[n+348>>2]=s[y+4>>2];s[n+352>>2]=s[y+8>>2];s[n+356>>2]=s[y+12>>2];f[n+360>>2]=T;f[n+364>>2]=0;f[n+368>>2]=0;f[n+372>>2]=0;s[n+392>>2]=0;r[n+396>>0]=0;s[g+0>>2]=0;s[g+4>>2]=0;s[g+8>>2]=0;s[g+12>>2]=0;s[g+16>>2]=0;s[g+20>>2]=0;s[g+24>>2]=0;s[g+28>>2]=0;L=ZO(x,n+280|0)|0;f[x+(L*184|0)+96>>2]=0;T=+f[b+224>>2]*+f[(s[n+196>>2]|0)+224>>2];T=T<-10?-10:T;f[x+(L*184|0)+88>>2]=T>10?10:T;s[x+(L*184|0)+52>>2]=s[b+52>>2];s[x+(L*184|0)+56>>2]=s[b+56>>2];s[x+(L*184|0)+60>>2]=s[b+60>>2];s[x+(L*184|0)+64>>2]=s[b+64>>2];f[x+(L*184|0)+36>>2]=A;f[x+(L*184|0)+40>>2]=E;f[x+(L*184|0)+44>>2]=S;f[x+(L*184|0)+48>>2]=0}}b=s[5022]|0;L=(s[b+16>>2]|0)+ -1|0;s[b+16>>2]=L;if((L|0)==0){if((s[b+4>>2]|0)!=0){Pn(n+280|0,0)|0;L=s[5008]|0;f[b+8>>2]=+(((s[n+284>>2]|0)-(s[L+4>>2]|0)+(((s[n+280>>2]|0)-(s[L>>2]|0)|0)*1e6|0)-(s[b+12>>2]|0)|0)>>>0)/1e3+ +f[b+8>>2];if((s[b+16>>2]|0)!=0)break;b=s[5022]|0}s[5022]=s[b+20>>2]}}while(0);m=m+1|0}while((m|0)<(s[e+232>>2]|0))}d=s[5022]|0;L=(s[d+16>>2]|0)+ -1|0;s[d+16>>2]=L;do if((L|0)==0){if((s[d+4>>2]|0)!=0){Pn(n+280|0,0)|0;L=s[5008]|0;f[d+8>>2]=+(((s[n+284>>2]|0)-(s[L+4>>2]|0)+(((s[n+280>>2]|0)-(s[L>>2]|0)|0)*1e6|0)-(s[d+12>>2]|0)|0)>>>0)/1e3+ +f[d+8>>2];if((s[d+16>>2]|0)!=0)break;d=s[5022]|0}s[5022]=s[d+20>>2]}while(0);lD[s[(s[e>>2]|0)+44>>2]&511](e);lD[s[(s[e>>2]|0)+148>>2]&511](e);f[e+104>>2]=t;hD[s[(s[e>>2]|0)+152>>2]&127](e,e+92|0);fD[s[(s[e>>2]|0)+144>>2]&31](e,t);CC(1664);if((s[e+280>>2]|0)>0){d=0;do{L=s[(s[e+288>>2]|0)+(d<<2)>>2]|0;VD[s[(s[L>>2]|0)+8>>2]&7](L,e,t);d=d+1|0}while((d|0)<(s[e+280>>2]|0))}d=s[5022]|0;L=(s[d+16>>2]|0)+ -1|0;s[d+16>>2]=L;do if((L|0)==0){if((s[d+4>>2]|0)!=0){Pn(n+280|0,0)|0;L=s[5008]|0;f[d+8>>2]=+(((s[n+284>>2]|0)-(s[L+4>>2]|0)+(((s[n+280>>2]|0)-(s[L>>2]|0)|0)*1e6|0)-(s[d+12>>2]|0)|0)>>>0)/1e3+ +f[d+8>>2];if((s[d+16>>2]|0)!=0)break;d=s[5022]|0}s[5022]=s[d+20>>2]}while(0);fD[s[(s[e>>2]|0)+156>>2]&31](e,t);d=s[e+80>>2]|0;if((d|0)!=0)fD[d&31](e,t);e=s[5022]|0;L=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=L;if((L|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n+280|0,0)|0;L=s[5008]|0;f[e+8>>2]=+(((s[n+284>>2]|0)-(s[L+4>>2]|0)+(((s[n+280>>2]|0)-(s[L>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function ev(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0;n=c;s[e+248>>2]=s[t+0>>2];s[e+252>>2]=s[t+4>>2];s[e+256>>2]=s[t+8>>2];s[e+260>>2]=s[t+12>>2];o=s[e+232>>2]|0;if((o|0)<=0){c=n;return}r=0;do{i=s[(s[e+240>>2]|0)+(r<<2)>>2]|0;a=s[i+216>>2]|0;if(!((a|0)==2|(a|0)==5)?(s[i+504>>2]&1|0)==0:0){u=+f[i+344>>2];if(u!=0){h=1/u*+f[t+4>>2];l=1/u*+f[t+8>>2];f[i+364>>2]=1/u*+f[t>>2];f[i+368>>2]=h;f[i+372>>2]=l;f[i+376>>2]=0}s[i+380>>2]=s[t+0>>2];s[i+384>>2]=s[t+4>>2];s[i+388>>2]=s[t+8>>2];s[i+392>>2]=s[t+12>>2];o=s[e+232>>2]|0}r=r+1|0}while((r|0)<(o|0));c=n;return}function tv(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+0>>2]=s[t+248>>2];s[e+4>>2]=s[t+252>>2];s[e+8>>2]=s[t+256>>2];s[e+12>>2]=s[t+260>>2];c=n;return}function nv(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;oy(e,t,n,r);c=i;return}function rv(e,t){e=e|0;t=t|0;var n=0;n=c;if((t|0)==0?1:(s[t+236>>2]&2|0)==0){ly(e,t);c=n;return}else{hD[s[(s[e>>2]|0)+92>>2]&127](e,t);c=n;return}}function iv(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0;r=c;n=s[e+232>>2]|0;e:do if((n|0)>0){i=s[e+240>>2]|0;o=0;while(1){u=i+(o<<2)|0;a=o+1|0;if((s[u>>2]|0)==(t|0))break;if((a|0)<(n|0))o=a;else break e}if((o|0)<(n|0)){s[u>>2]=s[i+(n+ -1<<2)>>2];s[(s[e+240>>2]|0)+(n+ -1<<2)>>2]=t;s[e+232>>2]=n+ -1}}while(0);ly(e,t);c=r;return}function sv(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;o=s[t+204>>2]|0;if((o&3|0)==0?(s[t+504>>2]&1|0)==0:0){h=+f[t+344>>2];if(h!=0){d=1/h*+f[e+252>>2];p=1/h*+f[e+256>>2];f[t+364>>2]=1/h*+f[e+248>>2];f[t+368>>2]=d;f[t+372>>2]=p;f[t+376>>2]=0}s[t+380>>2]=s[e+248>>2];s[t+384>>2]=s[e+252>>2];s[t+388>>2]=s[e+256>>2];s[t+392>>2]=s[e+260>>2]}if((s[t+192>>2]|0)==0){c=n;return}if((o&1|0)!=0){if(!(((s[t+216>>2]|0)+ -4|0)>>>0<2))s[t+216>>2]=2}else{u=s[e+232>>2]|0;if((u|0)==(s[e+236>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[e+232>>2]|0}if((u|0)>0){a=0;do{l=o+(a<<2)|0;if((l|0)!=0)s[l>>2]=s[(s[e+240>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[e+240>>2]|0;if((a|0)!=0){if((r[e+244>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[e+232>>2]|0}s[e+240>>2]=0}r[e+244>>0]=1;s[e+240>>2]=o;s[e+236>>2]=i}i=(s[e+240>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=t;s[e+232>>2]=u+1;o=s[t+204>>2]|0}if((o&1|0)==0)i=(o&2|0)==0;else i=0;JD[s[(s[e>>2]|0)+36>>2]&127](e,t,i?1:2,i?-1:-3);c=n;return}function ov(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;o=c;a=s[t+204>>2]|0;if((a&3|0)==0?(s[t+504>>2]&1|0)==0:0){d=+f[t+344>>2];if(d!=0){m=1/d*+f[e+252>>2];v=1/d*+f[e+256>>2];f[t+364>>2]=1/d*+f[e+248>>2];f[t+368>>2]=m;f[t+372>>2]=v;f[t+376>>2]=0}s[t+380>>2]=s[e+248>>2];s[t+384>>2]=s[e+252>>2];s[t+388>>2]=s[e+256>>2];s[t+392>>2]=s[e+260>>2]}if((s[t+192>>2]|0)==0){c=o;return}if((a&1|0)!=0){if(!(((s[t+216>>2]|0)+ -4|0)>>>0<2))s[t+216>>2]=2}else{l=s[e+232>>2]|0;if((l|0)==(s[e+236>>2]|0)?(u=(l|0)==0?1:l<<1,(l|0)<(u|0)):0){if((u|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;a=cM((u<<2|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}l=s[e+232>>2]|0}if((l|0)>0){p=0;do{h=a+(p<<2)|0;if((h|0)!=0)s[h>>2]=s[(s[e+240>>2]|0)+(p<<2)>>2];p=p+1|0}while((p|0)!=(l|0))}h=s[e+240>>2]|0;if((h|0)!=0){if((r[e+244>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0);l=s[e+232>>2]|0}s[e+240>>2]=0}r[e+244>>0]=1;s[e+240>>2]=a;s[e+236>>2]=u}u=(s[e+240>>2]|0)+(l<<2)|0;if((u|0)!=0)s[u>>2]=t;s[e+232>>2]=l+1}JD[s[(s[e>>2]|0)+36>>2]&127](e,t,n,i);c=o;return}function uv(e,t){e=e|0;t=+t;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;n=c;c=c+16|0;CC(1680);if((s[e+232>>2]|0)>0){i=(r[3896]|0)==0;o=0;do{a=s[(s[e+240>>2]|0)+(o<<2)>>2]|0;e:do if((a|0)!=0){l=s[a+216>>2]|0;do if(!((l|0)==4|(l|0)==2)){v=+f[a+312>>2];d=+f[a+316>>2];p=+f[a+320>>2];h=+f[a+472>>2];if(v*v+d*d+p*p<h*h?(h=+f[a+328>>2],p=+f[a+332>>2],d=+f[a+336>>2],v=+f[a+476>>2],h*h+p*p+d*d<v*v):0){f[a+220>>2]=+f[a+220>>2]+t;u=10;break}f[a+220>>2]=0;if(!((l+ -4|0)>>>0<2)){s[a+216>>2]=0;l=0}else u=10}else u=10;while(0);if((u|0)==10){u=0;if((l|0)==4)break}do if(i){if(!((l+ -2|0)>>>0<2)?!(+f[a+220>>2]>2):0)break;if((s[a+204>>2]&3|0)!=0){if((l+ -4|0)>>>0<2)break e;s[a+216>>2]=2;break e}if((l|0)==1){s[a+216>>2]=3;break e}if((l|0)!=2)break e;l=(s[a+260>>2]|0)+2|0;s[a+328>>2]=0;s[a+332>>2]=0;s[a+336>>2]=0;s[a+340>>2]=0;s[a+260>>2]=l;s[a+312>>2]=0;s[a+316>>2]=0;s[a+320>>2]=0;s[a+324>>2]=0;break e}while(0);if(!((l+ -4|0)>>>0<2))s[a+216>>2]=1}while(0);o=o+1|0}while((o|0)<(s[e+232>>2]|0))}e=s[5022]|0;l=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=l;if((l|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n|0,0)|0;l=s[5008]|0;f[e+8>>2]=+(((s[n+4>>2]|0)-(s[l+4>>2]|0)+(((s[n>>2]|0)-(s[l>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function av(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0;i=c;a=s[e+212>>2]|0;if((a|0)==(s[e+216>>2]|0)?(o=(a|0)==0?1:a<<1,(a|0)<(o|0)):0){if((o|0)==0)u=0;else{s[5004]=(s[5004]|0)+1;u=cM((o<<2|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+212>>2]|0}if((a|0)>0){f=0;do{l=u+(f<<2)|0;if((l|0)!=0)s[l>>2]=s[(s[e+220>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(a|0))}f=s[e+220>>2]|0;if((f|0)!=0){if((r[e+224>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[f+ -4>>2]|0);a=s[e+212>>2]|0}s[e+220>>2]=0}r[e+224>>0]=1;s[e+220>>2]=u;s[e+216>>2]=o}o=(s[e+220>>2]|0)+(a<<2)|0;if((o|0)!=0)s[o>>2]=t;s[e+212>>2]=a+1;if(!n){c=i;return}hS(s[t+28>>2]|0,t);hS(s[t+32>>2]|0,t);c=i;return}function fv(e,t,n,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;var p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0,Q=0;h=c;c=c+320|0;s[e+188>>2]=-1;CC(4080);s[e+184>>2]=0;if((n|0)>0){v=0;do{s[(s[t+(v<<2)>>2]|0)+212>>2]=-1;v=v+1|0}while((v|0)!=(n|0))}v=s[e+12>>2]|0;if((v|0)<(n+1|0)){if((n+1|0)!=0?(s[5004]=(s[5004]|0)+1,d=cM(((n+1|0)*244|3)+16|0)|0,(d|0)!=0):0){s[(d+19&-16)+ -4>>2]=d;d=d+19&-16}else d=0;v=s[e+8>>2]|0;if((v|0)>0){m=0;do{x=d+(m*244|0)|0;Q=s[e+16>>2]|0;S=Q+(m*244|0)|0;s[x+0>>2]=s[S+0>>2];s[x+4>>2]=s[S+4>>2];s[x+8>>2]=s[S+8>>2];s[x+12>>2]=s[S+12>>2];x=d+(m*244|0)+16|0;S=Q+(m*244|0)+16|0;s[x+0>>2]=s[S+0>>2];s[x+4>>2]=s[S+4>>2];s[x+8>>2]=s[S+8>>2];s[x+12>>2]=s[S+12>>2];x=d+(m*244|0)+32|0;S=Q+(m*244|0)+32|0;s[x+0>>2]=s[S+0>>2];s[x+4>>2]=s[S+4>>2];s[x+8>>2]=s[S+8>>2];s[x+12>>2]=s[S+12>>2];x=d+(m*244|0)+48|0;S=Q+(m*244|0)+48|0;s[x+0>>2]=s[S+0>>2];s[x+4>>2]=s[S+4>>2];s[x+8>>2]=s[S+8>>2];s[x+12>>2]=s[S+12>>2];yM(d+(m*244|0)+64|0,Q+(m*244|0)+64|0,180)|0;m=m+1|0}while((m|0)!=(v|0))}v=s[e+16>>2]|0;if((v|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[v+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=d;s[e+12>>2]=n+1;d=e+8|0;m=n+1|0}else{d=e+8|0;m=v}vM(h+56|0,0,244)|0;v=s[d>>2]|0;if((v|0)<0){if((m|0)<0){m=s[e+16>>2]|0;if((m|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[m+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=0;s[e+12>>2]=0}do{Q=s[e+16>>2]|0;x=Q+(v*244|0)|0;s[x+0>>2]=s[h+56>>2];s[x+4>>2]=s[h+60>>2];s[x+8>>2]=s[h+64>>2];s[x+12>>2]=s[h+68>>2];x=Q+(v*244|0)+16|0;s[x+0>>2]=s[h+72>>2];s[x+4>>2]=s[h+76>>2];s[x+8>>2]=s[h+80>>2];s[x+12>>2]=s[h+84>>2];x=Q+(v*244|0)+32|0;s[x+0>>2]=s[h+88>>2];s[x+4>>2]=s[h+92>>2];s[x+8>>2]=s[h+96>>2];s[x+12>>2]=s[h+100>>2];x=Q+(v*244|0)+48|0;s[x+0>>2]=s[h+104>>2];s[x+4>>2]=s[h+108>>2];s[x+8>>2]=s[h+112>>2];s[x+12>>2]=s[h+116>>2];yM(Q+(v*244|0)+64|0,h+120|0,180)|0;v=v+1|0}while((v|0)!=0)}s[d>>2]=0;if((n|0)>0){d=0;do{v=t+(d<<2)|0;m=NS(e,s[v>>2]|0,+f[l+12>>2])|0;v=s[v>>2]|0;if((!((v|0)==0?1:(s[v+236>>2]&2|0)==0)?+f[v+344>>2]!=0:0)?(p=s[e+16>>2]|0,(s[v+504>>2]&2|0)!=0):0){O=+f[l+76>>2];U=1/+f[v+396>>2];$=1/+f[v+400>>2];M=1/+f[v+404>>2];F=+f[v+4>>2];I=+f[v+8>>2];q=+f[v+12>>2];R=+f[v+20>>2];V=+f[v+24>>2];K=+f[v+28>>2];z=+f[v+36>>2];J=+f[v+40>>2];L=+f[v+44>>2];k=+f[v+328>>2];N=+f[v+332>>2];A=+f[v+336>>2];T=(F*U*F+I*$*I+q*M*q)*k+(U*F*R+$*I*V+M*q*K)*N+(U*F*z+$*I*J+M*q*L)*A;C=(F*U*R+I*$*V+q*M*K)*k+(R*U*R+V*$*V+K*M*K)*N+(U*R*z+$*V*J+M*K*L)*A;L=A*(z*U*z+J*$*J+L*M*L)+(k*(F*U*z+I*$*J+q*M*L)+N*(R*U*z+V*$*J+K*M*L));M=(N*L-A*C)*(N*L-A*C)+(A*T-k*L)*(A*T-k*L)+(k*C-N*T)*(k*C-N*T);if(M>O*O){K=1/+X(+M)*O;O=(N*L-A*C)*K;L=K*(A*T-k*L);T=K*(k*C-N*T)}else{O=N*L-A*C;L=A*T-k*L;T=k*C-N*T}$=+f[l+12>>2];J=(O*+f[v+268>>2]+L*+f[v+284>>2]+T*+f[v+300>>2])*$;K=$*(O*+f[v+272>>2]+L*+f[v+288>>2]+T*+f[v+304>>2]);f[p+(m*244|0)+224>>2]=+f[p+(m*244|0)+224>>2]-(O*+f[v+264>>2]+L*+f[v+280>>2]+T*+f[v+296>>2])*$;f[p+(m*244|0)+228>>2]=+f[p+(m*244|0)+228>>2]-J;f[p+(m*244|0)+232>>2]=+f[p+(m*244|0)+232>>2]-K}d=d+1|0}while((d|0)<(n|0))}if((a|0)>0){n=0;do{Q=s[u+(n<<2)>>2]|0;lD[s[(s[Q>>2]|0)+8>>2]&511](Q);f[Q+36>>2]=0;n=n+1|0}while((n|0)<(a|0))}d=s[e+168>>2]|0;if((d|0)<(a|0)?(s[e+172>>2]|0)<(a|0):0){if((a|0)==0)n=0;else{s[5004]=(s[5004]|0)+1;n=cM((a<<3|3)+16|0)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}d=s[e+168>>2]|0}if((d|0)>0){p=0;do{t=n+(p<<3)|0;if((t|0)!=0){x=(s[e+176>>2]|0)+(p<<3)|0;Q=s[x+4>>2]|0;s[t>>2]=s[x>>2];s[t+4>>2]=Q}p=p+1|0}while((p|0)!=(d|0))}p=s[e+176>>2]|0;if((p|0)!=0){if((r[e+180>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[p+ -4>>2]|0)}s[e+176>>2]=0}r[e+180>>0]=1;s[e+176>>2]=n;s[e+172>>2]=a}s[e+168>>2]=a;if((a|0)>0){n=0;p=0;do{t=s[e+176>>2]|0;d=t+(n<<3)|0;v=u+(n<<2)|0;m=s[v>>2]|0;g=s[m+44>>2]|0;if((g|0)!=0){m=g+0|0;g=m+64|0;do{s[m>>2]=0;m=m+4|0}while((m|0)<(g|0));m=s[v>>2]|0}if((r[m+20>>0]|0)==0){s[d>>2]=0;s[t+(n<<3)+4>>2]=0;t=0}else{hD[s[(s[m>>2]|0)+16>>2]&127](m,d);t=s[d>>2]|0}p=t+p|0;n=n+1|0}while((n|0)<(a|0))}else p=0;d=s[e+48>>2]|0;if((d|0)<(p|0)?(s[e+52>>2]|0)<(p|0):0){if((p|0)==0)n=0;else{s[5004]=(s[5004]|0)+1;n=cM((p*152|3)+16|0)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}d=s[e+48>>2]|0}if((d|0)>0){t=0;do{yM(n+(t*152|0)|0,(s[e+56>>2]|0)+(t*152|0)|0,152)|0;t=t+1|0}while((t|0)!=(d|0))}t=s[e+56>>2]|0;if((t|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=n;s[e+52>>2]=p}s[e+48>>2]=p;if((a|0)>0){d=s[e+176>>2]|0;n=0;p=0;while(1){t=d+(p<<3)|0;if((s[t>>2]|0)==0)t=0;else{E=s[e+56>>2]|0;w=u+(p<<2)|0;b=s[w>>2]|0;d=s[b+28>>2]|0;v=s[b+32>>2]|0;y=NS(e,d,+f[l+12>>2])|0;g=NS(e,v,+f[l+12>>2])|0;m=s[e+16>>2]|0;x=s[b+24>>2]|0;if((x|0)<=0)x=s[l+20>>2]|0;if((x|0)>(s[e+184>>2]|0))s[e+184>>2]=x;if((s[t>>2]|0)>0){S=0;do{Q=S+n|0;vM(E+(Q*152|0)|0,0,152)|0;f[E+(Q*152|0)+120>>2]=-3.4028234663852886e38;f[E+(Q*152|0)+124>>2]=3.4028234663852886e38;f[E+(Q*152|0)+100>>2]=0;f[E+(Q*152|0)+96>>2]=0;s[E+(Q*152|0)+144>>2]=y;s[E+(Q*152|0)+148>>2]=g;s[E+(Q*152|0)+136>>2]=x;S=S+1|0}while((S|0)<(s[t>>2]|0))}s[m+(y*244|0)+64>>2]=0;s[m+(y*244|0)+68>>2]=0;s[m+(y*244|0)+72>>2]=0;s[m+(y*244|0)+76>>2]=0;s[m+(y*244|0)+80>>2]=0;s[m+(y*244|0)+84>>2]=0;s[m+(y*244|0)+88>>2]=0;s[m+(y*244|0)+92>>2]=0;s[m+(y*244|0)+144>>2]=0;s[m+(y*244|0)+148>>2]=0;s[m+(y*244|0)+152>>2]=0;s[m+(y*244|0)+156>>2]=0;s[m+(y*244|0)+160>>2]=0;s[m+(y*244|0)+164>>2]=0;s[m+(y*244|0)+168>>2]=0;s[m+(y*244|0)+172>>2]=0;s[m+(g*244|0)+64>>2]=0;s[m+(g*244|0)+68>>2]=0;s[m+(g*244|0)+72>>2]=0;s[m+(g*244|0)+76>>2]=0;s[m+(g*244|0)+80>>2]=0;s[m+(g*244|0)+84>>2]=0;s[m+(g*244|0)+88>>2]=0;s[m+(g*244|0)+92>>2]=0;s[m+(g*244|0)+144>>2]=0;s[m+(g*244|0)+148>>2]=0;s[m+(g*244|0)+152>>2]=0;s[m+(g*244|0)+156>>2]=0;s[m+(g*244|0)+160>>2]=0;s[m+(g*244|0)+164>>2]=0;s[m+(g*244|0)+168>>2]=0;s[m+(g*244|0)+172>>2]=0;f[h>>2]=1/+f[l+12>>2];f[h+4>>2]=+f[l+32>>2];s[h+8>>2]=E+(n*152|0)+16;s[h+12>>2]=E+(n*152|0);s[h+16>>2]=E+(n*152|0)+48;s[h+20>>2]=E+(n*152|0)+32;s[h+24>>2]=38;s[h+28>>2]=E+(n*152|0)+112;Q=E+(n*152|0)+116|0;f[Q>>2]=+f[l+40>>2];f[h+52>>2]=+f[l+4>>2];s[h+32>>2]=Q;s[h+36>>2]=E+(n*152|0)+120;s[h+40>>2]=E+(n*152|0)+124;s[h+48>>2]=s[l+20>>2];Q=s[w>>2]|0;hD[s[(s[Q>>2]|0)+20>>2]&127](Q,h);if((s[t>>2]|0)>0){S=0;do{x=S+n|0;Q=(s[w>>2]|0)+16|0;T=+f[Q>>2];if(+f[E+(x*152|0)+124>>2]>=T){f[E+(x*152|0)+124>>2]=T;T=+f[Q>>2]}T=-T;if(+f[E+(x*152|0)+120>>2]<=T)f[E+(x*152|0)+120>>2]=T;s[E+(x*152|0)+132>>2]=b;Q=s[b+28>>2]|0;J=+f[E+(x*152|0)>>2];P=+f[E+(x*152|0)+4>>2];H=+f[E+(x*152|0)+8>>2];T=(J*+f[Q+280>>2]+P*+f[Q+284>>2]+H*+f[Q+288>>2])*+f[Q+548>>2];D=(J*+f[Q+296>>2]+P*+f[Q+300>>2]+H*+f[Q+304>>2])*+f[Q+552>>2];f[E+(x*152|0)+64>>2]=(+f[Q+264>>2]*J+ +f[Q+268>>2]*P+ +f[Q+272>>2]*H)*+f[Q+544>>2];f[E+(x*152|0)+68>>2]=T;f[E+(x*152|0)+72>>2]=D;f[E+(x*152|0)+76>>2]=0;Q=s[b+32>>2]|0;D=+f[E+(x*152|0)+32>>2];T=+f[E+(x*152|0)+36>>2];H=+f[E+(x*152|0)+40>>2];P=(D*+f[Q+280>>2]+T*+f[Q+284>>2]+H*+f[Q+288>>2])*+f[Q+548>>2];J=(D*+f[Q+296>>2]+T*+f[Q+300>>2]+H*+f[Q+304>>2])*+f[Q+552>>2];f[E+(x*152|0)+80>>2]=(+f[Q+264>>2]*D+ +f[Q+268>>2]*T+ +f[Q+272>>2]*H)*+f[Q+544>>2];f[E+(x*152|0)+84>>2]=P;f[E+(x*152|0)+88>>2]=J;f[E+(x*152|0)+92>>2]=0;J=+f[d+344>>2];P=+f[E+(x*152|0)+16>>2];D=+f[E+(x*152|0)+20>>2];_=+f[E+(x*152|0)+24>>2];M=+f[E+(x*152|0)>>2];O=+f[E+(x*152|0)+4>>2];A=+f[E+(x*152|0)+8>>2];K=+f[v+344>>2];L=+f[E+(x*152|0)+48>>2];k=+f[E+(x*152|0)+52>>2];C=+f[E+(x*152|0)+56>>2];N=+f[E+(x*152|0)+32>>2];H=P*J*P+D*J*D+_*J*_+(M*(+f[d+264>>2]*M+ +f[d+268>>2]*O+ +f[d+272>>2]*A)+O*(M*+f[d+280>>2]+O*+f[d+284>>2]+A*+f[d+288>>2])+A*(M*+f[d+296>>2]+O*+f[d+300>>2]+A*+f[d+304>>2]))+(L*K*L+k*K*k+C*K*C)+(N*(+f[v+264>>2]*N+ +f[v+268>>2]*T+ +f[v+272>>2]*H)+T*(N*+f[v+280>>2]+T*+f[v+284>>2]+H*+f[v+288>>2])+H*(N*+f[v+296>>2]+T*+f[v+300>>2]+H*+f[v+304>>2]));if(+W(+H)>1.1920928955078125e-7)z=1/H;else z=0;f[E+(x*152|0)+108>>2]=z;if((s[m+(y*244|0)+240>>2]|0)==0){K=0;B=0;j=0;F=0;I=0;q=0}else{K=+f[m+(y*244|0)+208>>2];B=+f[m+(y*244|0)+212>>2];j=+f[m+(y*244|0)+216>>2];F=+f[m+(y*244|0)+224>>2];I=+f[m+(y*244|0)+228>>2];q=+f[m+(y*244|0)+232>>2]}if((s[m+(g*244|0)+240>>2]|0)==0){J=0;$=0;V=0;H=0;U=0;R=0}else{J=+f[m+(g*244|0)+208>>2];$=+f[m+(g*244|0)+212>>2];V=+f[m+(g*244|0)+216>>2];H=+f[m+(g*244|0)+224>>2];U=+f[m+(g*244|0)+228>>2];R=+f[m+(g*244|0)+232>>2]}f[E+(x*152|0)+112>>2]=+f[E+(x*152|0)+112>>2]*z+z*(0- +f[h+52>>2]*((K+ +f[d+312>>2])*P+(B+ +f[d+316>>2])*D+(j+ +f[d+320>>2])*_+((F+ +f[d+328>>2])*M+(I+ +f[d+332>>2])*O+(q+ +f[d+336>>2])*A)+((J+ +f[v+312>>2])*L+($+ +f[v+316>>2])*k+(V+ +f[v+320>>2])*C+((H+ +f[v+328>>2])*N+(U+ +f[v+332>>2])*T+(R+ +f[v+336>>2])*+f[E+(x*152|0)+40>>2]))));f[E+(x*152|0)+100>>2]=0;S=S+1|0}while((S|0)<(s[t>>2]|0))}t=s[e+176>>2]|0;d=t;t=s[t+(p<<3)>>2]|0}p=p+1|0;if((p|0)>=(a|0))break;else n=t+n|0}}JD[s[(s[e>>2]|0)+28>>2]&127](e,i,o,l);i=s[e+48>>2]|0;u=s[e+28>>2]|0;a=s[e+68>>2]|0;n=s[e+128>>2]|0;if((n|0)<(i|0)?(s[e+132>>2]|0)<(i|0):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}n=s[e+128>>2]|0}if((n|0)>0){p=0;do{t=o+(p<<2)|0;if((t|0)!=0)s[t>>2]=s[(s[e+136>>2]|0)+(p<<2)>>2];p=p+1|0}while((p|0)!=(n|0))}n=s[e+136>>2]|0;if((n|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=o;s[e+132>>2]=i}s[e+128>>2]=i;if((s[l+64>>2]&16|0)==0){o=s[e+108>>2]|0;if((o|0)<(u|0)?(s[e+112>>2]|0)<(u|0):0){if((u|0)==0)l=0;else{s[5004]=(s[5004]|0)+1;l=cM((u<<2|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}o=s[e+108>>2]|0}if((o|0)>0){n=0;do{p=l+(n<<2)|0;if((p|0)!=0)s[p>>2]=s[(s[e+116>>2]|0)+(n<<2)>>2];n=n+1|0}while((n|0)!=(o|0))}o=s[e+116>>2]|0;if((o|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=l;s[e+112>>2]=u}s[e+108>>2]=u}else{p=s[e+108>>2]|0;if((p|0)<(u<<1|0)?(s[e+112>>2]|0)<(u<<1|0):0){if((u|0)==0)l=0;else{s[5004]=(s[5004]|0)+1;l=cM((u<<3|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}p=s[e+108>>2]|0}if((p|0)>0){n=0;do{o=l+(n<<2)|0;if((o|0)!=0)s[o>>2]=s[(s[e+116>>2]|0)+(n<<2)>>2];n=n+1|0}while((n|0)!=(p|0))}o=s[e+116>>2]|0;if((o|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=l;s[e+112>>2]=u<<1}s[e+108>>2]=u<<1}n=s[e+148>>2]|0;if((n|0)<(a|0)?(s[e+152>>2]|0)<(a|0):0){if((a|0)==0)l=0;else{s[5004]=(s[5004]|0)+1;l=cM((a<<2|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}n=s[e+148>>2]|0}if((n|0)>0){o=0;do{p=l+(o<<2)|0;if((p|0)!=0)s[p>>2]=s[(s[e+156>>2]|0)+(o<<2)>>2];o=o+1|0}while((o|0)!=(n|0))}o=s[e+156>>2]|0;if((o|0)!=0){if((r[e+160>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+156>>2]=0}r[e+160>>0]=1;s[e+156>>2]=l;s[e+152>>2]=a}s[e+148>>2]=a;if((i|0)>0){o=s[e+136>>2]|0;l=0;do{s[o+(l<<2)>>2]=l;l=l+1|0}while((l|0)!=(i|0))}if((u|0)>0){l=s[e+116>>2]|0;i=0;do{s[l+(i<<2)>>2]=i;i=i+1|0}while((i|0)!=(u|0))}if((a|0)>0){e=s[e+156>>2]|0;l=0;do{s[e+(l<<2)>>2]=l;l=l+1|0}while((l|0)!=(a|0))}e=s[5022]|0;Q=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=Q;if((Q|0)!=0){c=h;return 0}do if((s[e+4>>2]|0)!=0){Pn(h+304|0,0)|0;Q=s[5008]|0;f[e+8>>2]=+(((s[h+308>>2]|0)-(s[Q+4>>2]|0)+(((s[h+304>>2]|0)-(s[Q>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=h;return 0}}while(0);s[5022]=s[e+20>>2];c=h;return 0}function lv(e,t,n,i,o,u,a,l,h,p){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;p=p|0;var d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;u=c;p=s[e+48>>2]|0;n=s[e+28>>2]|0;o=s[e+68>>2]|0;if((s[h+64>>2]&1|0)!=0){if((p|0)>0){i=s[e+136>>2]|0;m=s[e+192>>2]|0;g=0;do{y=i+(g<<2)|0;b=s[y>>2]|0;g=g+1|0;m=(rt(m,1664525)|0)+1013904223|0;if(g>>>0<65537){w=m>>>16^m;if(g>>>0<257)if(g>>>0<17){w=(w>>>8^w)>>>4^(w>>>8^w);if(g>>>0<5)if(g>>>0<3)w=(w>>>2^w)>>>1^(w>>>2^w);else w=w>>>2^w}else w=w>>>8^w}else w=m;w=i+(((w>>>0)%(g>>>0)|0)<<2)|0;s[y>>2]=s[w>>2];s[w>>2]=b}while((g|0)!=(p|0));s[e+192>>2]=m}if((s[h+20>>2]|0)>(t|0)){if((n|0)>0){y=s[e+116>>2]|0;g=s[e+192>>2]|0;m=0;do{i=y+(m<<2)|0;p=s[i>>2]|0;m=m+1|0;g=(rt(g,1664525)|0)+1013904223|0;if(m>>>0<65537){b=g>>>16^g;if(m>>>0<257)if(m>>>0<17){b=(b>>>8^b)>>>4^(b>>>8^b);if(m>>>0<5)if(m>>>0<3)b=(b>>>2^b)>>>1^(b>>>2^b);else b=b>>>2^b}else b=b>>>8^b}else b=g;w=y+(((b>>>0)%(m>>>0)|0)<<2)|0;s[i>>2]=s[w>>2];s[w>>2]=p}while((m|0)!=(n|0));s[e+192>>2]=g}if((o|0)>0){g=s[e+156>>2]|0;m=s[e+192>>2]|0;i=0;do{p=g+(i<<2)|0;n=s[p>>2]|0;i=i+1|0;m=(rt(m,1664525)|0)+1013904223|0;if(i>>>0<65537){y=m>>>16^m;if(i>>>0<257)if(i>>>0<17){y=(y>>>8^y)>>>4^(y>>>8^y);if(i>>>0<5)if(i>>>0<3)y=(y>>>2^y)>>>1^(y>>>2^y);else y=y>>>2^y}else y=y>>>8^y}else y=m;w=g+(((y>>>0)%(i>>>0)|0)<<2)|0;s[p>>2]=s[w>>2];s[w>>2]=n}while((i|0)!=(o|0));s[e+192>>2]=m}}}i=s[e+48>>2]|0;if((s[h+64>>2]&256|0)==0){if((i|0)>0){d=0;do{o=s[(s[e+136>>2]|0)+(d<<2)>>2]|0;v=s[e+56>>2]|0;if((s[v+(o*152|0)+136>>2]|0)>(t|0)){i=s[e+16>>2]|0;yS(i+((s[v+(o*152|0)+144>>2]|0)*244|0)|0,i+((s[v+(o*152|0)+148>>2]|0)*244|0)|0,v+(o*152|0)|0);i=s[e+48>>2]|0}d=d+1|0}while((d|0)<(i|0))}if((s[h+20>>2]|0)<=(t|0)){c=u;return 0}if((l|0)>0){v=0;do{d=a+(v<<2)|0;t=s[d>>2]|0;if((r[t+20>>0]|0)!=0){y=NS(e,s[t+28>>2]|0,+f[h+12>>2])|0;w=NS(e,s[(s[d>>2]|0)+32>>2]|0,+f[h+12>>2])|0;b=s[e+16>>2]|0;g=s[d>>2]|0;zD[s[(s[g>>2]|0)+24>>2]&15](g,b+(y*244|0)|0,b+(w*244|0)|0,+f[h+12>>2])}v=v+1|0}while((v|0)!=(l|0))}h=s[e+28>>2]|0;if((h|0)>0){l=0;do{w=s[(s[e+116>>2]|0)+(l<<2)>>2]|0;b=s[e+36>>2]|0;y=s[e+16>>2]|0;bS(y+((s[b+(w*152|0)+144>>2]|0)*244|0)|0,y+((s[b+(w*152|0)+148>>2]|0)*244|0)|0,b+(w*152|0)|0);l=l+1|0}while((l|0)!=(h|0))}h=s[e+68>>2]|0;if((h|0)>0){l=0;do{a=s[(s[e+156>>2]|0)+(l<<2)>>2]|0;d=s[e+76>>2]|0;E=+f[(s[e+36>>2]|0)+((s[d+(a*152|0)+140>>2]|0)*152|0)+100>>2];if(E>0){E=E*+f[d+(a*152|0)+104>>2];f[d+(a*152|0)+120>>2]=-E;f[d+(a*152|0)+124>>2]=E;w=s[e+16>>2]|0;yS(w+((s[d+(a*152|0)+144>>2]|0)*244|0)|0,w+((s[d+(a*152|0)+148>>2]|0)*244|0)|0,d+(a*152|0)|0)}l=l+1|0}while((l|0)!=(h|0))}h=s[e+88>>2]|0;if((h|0)<=0){c=u;return 0}l=0;do{a=s[e+96>>2]|0;E=+f[(s[e+36>>2]|0)+((s[a+(l*152|0)+140>>2]|0)*152|0)+100>>2];if(E>0){S=+f[a+(l*152|0)+104>>2];E=E*S>S?S:E*S;f[a+(l*152|0)+120>>2]=-E;f[a+(l*152|0)+124>>2]=E;w=s[e+16>>2]|0;yS(w+((s[a+(l*152|0)+144>>2]|0)*244|0)|0,w+((s[a+(l*152|0)+148>>2]|0)*244|0)|0,a+(l*152|0)|0)}l=l+1|0}while((l|0)!=(h|0));c=u;return 0}if((i|0)>0){o=0;do{p=s[(s[e+136>>2]|0)+(o<<2)>>2]|0;n=s[e+56>>2]|0;if((s[n+(p*152|0)+136>>2]|0)>(t|0)){i=s[e+16>>2]|0;yS(i+((s[n+(p*152|0)+144>>2]|0)*244|0)|0,i+((s[n+(p*152|0)+148>>2]|0)*244|0)|0,n+(p*152|0)|0);i=s[e+48>>2]|0}o=o+1|0}while((o|0)<(i|0))}if((s[h+20>>2]|0)<=(t|0)){c=u;return 0}if((l|0)>0){t=0;do{n=a+(t<<2)|0;o=s[n>>2]|0;if((r[o+20>>0]|0)!=0){y=NS(e,s[o+28>>2]|0,+f[h+12>>2])|0;w=NS(e,s[(s[n>>2]|0)+32>>2]|0,+f[h+12>>2])|0;b=s[e+16>>2]|0;g=s[n>>2]|0;zD[s[(s[g>>2]|0)+24>>2]&15](g,b+(y*244|0)|0,b+(w*244|0)|0,+f[h+12>>2])}t=t+1|0}while((t|0)!=(l|0))}p=s[h+64>>2]|0;l=s[e+28>>2]|0;if((p&512|0)!=0){if((l|0)<=0){c=u;return 0}n=0;do{o=s[(s[e+116>>2]|0)+(n<<2)>>2]|0;t=s[e+36>>2]|0;a=s[e+16>>2]|0;bS(a+((s[t+(o*152|0)+144>>2]|0)*244|0)|0,a+((s[t+(o*152|0)+148>>2]|0)*244|0)|0,t+(o*152|0)|0);E=+f[t+(o*152|0)+100>>2];o=rt(n,(p>>>4&1)+1|0)|0;t=s[(s[e+156>>2]|0)+(o<<2)>>2]|0;a=s[e+76>>2]|0;if(E>0){S=E*+f[a+(t*152|0)+104>>2];f[a+(t*152|0)+120>>2]=-S;f[a+(t*152|0)+124>>2]=S;w=s[e+16>>2]|0;yS(w+((s[a+(t*152|0)+144>>2]|0)*244|0)|0,w+((s[a+(t*152|0)+148>>2]|0)*244|0)|0,a+(t*152|0)|0)}if((s[h+64>>2]&16|0)!=0?(d=s[(s[e+156>>2]|0)+(o+1<<2)>>2]|0,v=s[e+76>>2]|0,E>0):0){S=E*+f[v+(d*152|0)+104>>2];f[v+(d*152|0)+120>>2]=-S;f[v+(d*152|0)+124>>2]=S;w=s[e+16>>2]|0;yS(w+((s[v+(d*152|0)+144>>2]|0)*244|0)|0,w+((s[v+(d*152|0)+148>>2]|0)*244|0)|0,v+(d*152|0)|0)}n=n+1|0}while((n|0)!=(l|0));c=u;return 0}if((l|0)>0){h=0;do{w=s[(s[e+116>>2]|0)+(h<<2)>>2]|0;b=s[e+36>>2]|0;y=s[e+16>>2]|0;bS(y+((s[b+(w*152|0)+144>>2]|0)*244|0)|0,y+((s[b+(w*152|0)+148>>2]|0)*244|0)|0,b+(w*152|0)|0);h=h+1|0}while((h|0)!=(l|0))}h=s[e+68>>2]|0;if((h|0)>0){l=0;do{a=s[(s[e+156>>2]|0)+(l<<2)>>2]|0;d=s[e+76>>2]|0;E=+f[(s[e+36>>2]|0)+((s[d+(a*152|0)+140>>2]|0)*152|0)+100>>2];if(E>0){S=E*+f[d+(a*152|0)+104>>2];f[d+(a*152|0)+120>>2]=-S;f[d+(a*152|0)+124>>2]=S;w=s[e+16>>2]|0;yS(w+((s[d+(a*152|0)+144>>2]|0)*244|0)|0,w+((s[d+(a*152|0)+148>>2]|0)*244|0)|0,d+(a*152|0)|0)}l=l+1|0}while((l|0)!=(h|0))}a=s[e+88>>2]|0;if((a|0)<=0){c=u;return 0}l=0;do{h=s[e+96>>2]|0;E=+f[(s[e+36>>2]|0)+((s[h+(l*152|0)+140>>2]|0)*152|0)+100>>2];if(E>0){S=+f[h+(l*152|0)+104>>2];S=E*S>S?S:E*S;f[h+(l*152|0)+120>>2]=-S;f[h+(l*152|0)+124>>2]=S;w=s[e+16>>2]|0;yS(w+((s[h+(l*152|0)+144>>2]|0)*244|0)|0,w+((s[h+(l*152|0)+148>>2]|0)*244|0)|0,h+(l*152|0)|0)}l=l+1|0}while((l|0)!=(a|0));c=u;return 0}function cv(e,t,n,r,i,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;f=f|0;n=c;if((s[a+44>>2]|0)==0){c=n;return}u=s[a+20>>2]|0;if((s[a+64>>2]&256|0)==0){if((u|0)<=0){c=n;return}i=1;while(1){o=s[e+28>>2]|0;if((o|0)>0){u=0;do{r=s[(s[e+116>>2]|0)+(u<<2)>>2]|0;t=s[e+36>>2]|0;f=s[e+16>>2]|0;wS(f+((s[t+(r*152|0)+144>>2]|0)*244|0)|0,f+((s[t+(r*152|0)+148>>2]|0)*244|0)|0,t+(r*152|0)|0);u=u+1|0}while((u|0)!=(o|0));u=s[a+20>>2]|0}if((i|0)>=(u|0))break;i=i+1|0}c=n;return}else{if((u|0)<=0){c=n;return}i=1;while(1){o=s[e+28>>2]|0;if((o|0)>0){u=0;do{r=s[(s[e+116>>2]|0)+(u<<2)>>2]|0;t=s[e+36>>2]|0;f=s[e+16>>2]|0;wS(f+((s[t+(r*152|0)+144>>2]|0)*244|0)|0,f+((s[t+(r*152|0)+148>>2]|0)*244|0)|0,t+(r*152|0)|0);u=u+1|0}while((u|0)!=(o|0));u=s[a+20>>2]|0}if((i|0)>=(u|0))break;i=i+1|0}c=n;return}}function hv(e,t,n,r,i,o,u,a,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;var h=0,p=0,d=0;h=c;c=c+16|0;CC(4112);MD[s[(s[e>>2]|0)+32>>2]&1](e,t,n,r,i,o,u,a,l);d=s[e+184>>2]|0;p=s[a+20>>2]|0;p=(d|0)>(p|0)?d:p;if((p|0)>0){d=0;do{+HD[s[(s[e>>2]|0)+40>>2]&3](e,d,t,n,r,i,o,u,a,l);d=d+1|0}while((d|0)<(p|0))}o=s[5022]|0;d=(s[o+16>>2]|0)+ -1|0;s[o+16>>2]=d;if((d|0)!=0){c=h;return 0}do if((s[o+4>>2]|0)!=0){Pn(h|0,0)|0;d=s[5008]|0;f[o+8>>2]=+(((s[h+4>>2]|0)-(s[d+4>>2]|0)+(((s[h>>2]|0)-(s[d>>2]|0)|0)*1e6|0)-(s[o+12>>2]|0)|0)>>>0)/1e3+ +f[o+8>>2];if((s[o+16>>2]|0)==0){o=s[5022]|0;break}else{c=h;return 0}}while(0);s[5022]=s[o+20>>2];c=h;return 0}function pv(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;t=c;c=c+80|0;u=s[e+28>>2]|0;l=s[i+64>>2]|0;if((l&4|0)!=0&(u|0)>0){n=s[e+36>>2]|0;a=s[e+76>>2]|0;if((l&16|0)==0){l=0;do{m=s[n+(l*152|0)+132>>2]|0;f[m+120>>2]=+f[n+(l*152|0)+100>>2];f[m+124>>2]=+f[a+((s[n+(l*152|0)+140>>2]|0)*152|0)+100>>2];l=l+1|0}while((l|0)!=(u|0))}else{l=0;do{m=s[n+(l*152|0)+132>>2]|0;f[m+120>>2]=+f[n+(l*152|0)+100>>2];v=s[n+(l*152|0)+140>>2]|0;f[m+124>>2]=+f[a+(v*152|0)+100>>2];f[m+128>>2]=+f[a+((v+1|0)*152|0)+100>>2];l=l+1|0}while((l|0)!=(u|0))}}u=s[e+48>>2]|0;if((u|0)>0){a=0;do{n=s[e+56>>2]|0;l=s[n+(a*152|0)+132>>2]|0;m=s[l+44>>2]|0;v=n+(a*152|0)+100|0;if((m|0)!=0){d=+f[v>>2];y=s[l+28>>2]|0;p=1/+f[i+12>>2];h=d*+f[n+(a*152|0)+20>>2]*+f[y+352>>2]*p;g=d*+f[n+(a*152|0)+24>>2]*+f[y+356>>2]*p;f[m>>2]=+f[n+(a*152|0)+16>>2]*d*+f[y+348>>2]*p+ +f[m>>2];f[m+4>>2]=h+ +f[m+4>>2];f[m+8>>2]=g+ +f[m+8>>2];g=+f[v>>2];y=s[l+32>>2]|0;h=1/+f[i+12>>2];p=g*+f[n+(a*152|0)+52>>2]*+f[y+352>>2]*h;d=g*+f[n+(a*152|0)+56>>2]*+f[y+356>>2]*h;f[m+32>>2]=+f[n+(a*152|0)+48>>2]*g*+f[y+348>>2]*h+ +f[m+32>>2];f[m+36>>2]=p+ +f[m+36>>2];f[m+40>>2]=d+ +f[m+40>>2];y=s[l+28>>2]|0;d=+f[v>>2];p=1/+f[i+12>>2];h=+f[n+(a*152|0)+4>>2]*+f[y+548>>2]*d*p;g=d*+f[n+(a*152|0)+8>>2]*+f[y+552>>2]*p;f[m+16>>2]=+f[n+(a*152|0)>>2]*+f[y+544>>2]*d*p+ +f[m+16>>2];f[m+20>>2]=h+ +f[m+20>>2];f[m+24>>2]=g+ +f[m+24>>2];y=s[l+32>>2]|0;g=+f[v>>2];h=1/+f[i+12>>2];p=+f[n+(a*152|0)+36>>2]*+f[y+548>>2]*g*h;d=g*+f[n+(a*152|0)+40>>2]*+f[y+552>>2]*h;f[m+48>>2]=+f[n+(a*152|0)+32>>2]*+f[y+544>>2]*g*h+ +f[m+48>>2];f[m+52>>2]=p+ +f[m+52>>2];f[m+56>>2]=d+ +f[m+56>>2]}f[l+36>>2]=+f[v>>2];g=+W(+(+f[v>>2]));if(g>=+f[l+16>>2])r[l+20>>0]=0;a=a+1|0}while((a|0)!=(u|0))}v=s[e+8>>2]|0;if((v|0)>0){u=s[e+16>>2]|0;n=0;do{a=u+(n*244|0)|0;l=s[u+(n*244|0)+240>>2]|0;if((l|0)!=0){if((s[i+44>>2]|0)==0){y=u+(n*244|0)+176|0;d=+f[u+(n*244|0)+64>>2]+ +f[y>>2];f[y>>2]=d;y=u+(n*244|0)+180|0;p=+f[u+(n*244|0)+68>>2]+ +f[y>>2];f[y>>2]=p;y=u+(n*244|0)+184|0;h=+f[u+(n*244|0)+72>>2]+ +f[y>>2];f[y>>2]=h;y=u+(n*244|0)+192|0;f[y>>2]=+f[u+(n*244|0)+80>>2]+ +f[y>>2];y=u+(n*244|0)+196|0;f[y>>2]=+f[u+(n*244|0)+84>>2]+ +f[y>>2];y=u+(n*244|0)+200|0;f[y>>2]=+f[u+(n*244|0)+88>>2]+ +f[y>>2]}else{p=+f[i+12>>2];h=+f[i+52>>2];l=u+(n*244|0)+176|0;f[l>>2]=+f[u+(n*244|0)+64>>2]+ +f[l>>2];l=u+(n*244|0)+180|0;f[l>>2]=+f[u+(n*244|0)+68>>2]+ +f[l>>2];l=u+(n*244|0)+184|0;f[l>>2]=+f[u+(n*244|0)+72>>2]+ +f[l>>2];l=u+(n*244|0)+192|0;f[l>>2]=+f[u+(n*244|0)+80>>2]+ +f[l>>2];l=u+(n*244|0)+196|0;f[l>>2]=+f[u+(n*244|0)+84>>2]+ +f[l>>2];l=u+(n*244|0)+200|0;f[l>>2]=+f[u+(n*244|0)+88>>2]+ +f[l>>2];l=u+(n*244|0)+144|0;v=u+(n*244|0)+148|0;if(((((!(+f[l>>2]!=0)?!(+f[v>>2]!=0):0)?!(+f[u+(n*244|0)+152>>2]!=0):0)?!(+f[u+(n*244|0)+160>>2]!=0):0)?!(+f[u+(n*244|0)+164>>2]!=0):0)?!(+f[u+(n*244|0)+168>>2]!=0):0)a=u;else o=22;if((o|0)==22){o=0;d=+f[u+(n*244|0)+164>>2]*h;g=+f[u+(n*244|0)+168>>2]*h;f[t>>2]=+f[u+(n*244|0)+160>>2]*h;f[t+4>>2]=d;f[t+8>>2]=g;f[t+12>>2]=0;Dd(a,+f[l>>2],+f[v>>2],+f[u+(n*244|0)+152>>2],t,p,t+16|0);s[a+0>>2]=s[t+16>>2];s[a+4>>2]=s[t+20>>2];s[a+8>>2]=s[t+24>>2];s[a+12>>2]=s[t+28>>2];a=u+(n*244|0)+16|0;s[a+0>>2]=s[t+32>>2];s[a+4>>2]=s[t+36>>2];s[a+8>>2]=s[t+40>>2];s[a+12>>2]=s[t+44>>2];a=u+(n*244|0)+32|0;s[a+0>>2]=s[t+48>>2];s[a+4>>2]=s[t+52>>2];s[a+8>>2]=s[t+56>>2];s[a+12>>2]=s[t+60>>2];a=u+(n*244|0)+48|0;s[a+0>>2]=s[t+64>>2];s[a+4>>2]=s[t+68>>2];s[a+8>>2]=s[t+72>>2];s[a+12>>2]=s[t+76>>2];a=s[e+16>>2]|0}u=a;d=+f[a+(n*244|0)+176>>2];p=+f[a+(n*244|0)+180>>2];h=+f[a+(n*244|0)+184>>2];l=s[a+(n*244|0)+240>>2]|0}g=d+ +f[u+(n*244|0)+208>>2];d=p+ +f[u+(n*244|0)+212>>2];p=h+ +f[u+(n*244|0)+216>>2];m=l+260|0;s[m>>2]=(s[m>>2]|0)+1;f[l+312>>2]=g;f[l+316>>2]=d;f[l+320>>2]=p;f[l+324>>2]=0;m=s[e+16>>2]|0;y=s[m+(n*244|0)+240>>2]|0;p=+f[m+(n*244|0)+192>>2]+ +f[m+(n*244|0)+224>>2];d=+f[m+(n*244|0)+196>>2]+ +f[m+(n*244|0)+228>>2];g=+f[m+(n*244|0)+200>>2]+ +f[m+(n*244|0)+232>>2];s[y+260>>2]=(s[y+260>>2]|0)+1;f[y+328>>2]=p;f[y+332>>2]=d;f[y+336>>2]=g;f[y+340>>2]=0;if((s[i+44>>2]|0)!=0){m=s[e+16>>2]|0;y=s[m+(n*244|0)+240>>2]|0;v=m+(n*244|0)|0;s[y+260>>2]=(s[y+260>>2]|0)+1;s[y+4>>2]=s[v+0>>2];s[y+8>>2]=s[v+4>>2];s[y+12>>2]=s[v+8>>2];s[y+16>>2]=s[v+12>>2];v=m+(n*244|0)+16|0;s[y+20>>2]=s[v+0>>2];s[y+24>>2]=s[v+4>>2];s[y+28>>2]=s[v+8>>2];s[y+32>>2]=s[v+12>>2];v=m+(n*244|0)+32|0;s[y+36>>2]=s[v+0>>2];s[y+40>>2]=s[v+4>>2];s[y+44>>2]=s[v+8>>2];s[y+48>>2]=s[v+12>>2];m=m+(n*244|0)+48|0;s[y+52>>2]=s[m+0>>2];s[y+56>>2]=s[m+4>>2];s[y+60>>2]=s[m+8>>2];s[y+64>>2]=s[m+12>>2]}u=s[e+16>>2]|0;s[(s[u+(n*244|0)+240>>2]|0)+212>>2]=-1;v=s[e+8>>2]|0}n=n+1|0}while((n|0)<(v|0))}if((s[e+28>>2]|0)<0?(s[e+32>>2]|0)<0:0){i=s[e+36>>2]|0;if((i|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+32>>2]=0}s[e+28>>2]=0;if((s[e+48>>2]|0)<0?(s[e+52>>2]|0)<0:0){i=s[e+56>>2]|0;if((i|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=0;s[e+52>>2]=0}s[e+48>>2]=0;if((s[e+68>>2]|0)<0?(s[e+72>>2]|0)<0:0){i=s[e+76>>2]|0;if((i|0)!=0){if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+76>>2]=0}r[e+80>>0]=1;s[e+76>>2]=0;s[e+72>>2]=0}s[e+68>>2]=0;if((s[e+88>>2]|0)<0?(s[e+92>>2]|0)<0:0){i=s[e+96>>2]|0;if((i|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=0;s[e+92>>2]=0}s[e+88>>2]=0;if((s[e+8>>2]|0)>=0){s[e+8>>2]=0;c=t;return 0}if((s[e+12>>2]|0)>=0){s[e+8>>2]=0;c=t;return 0}i=s[e+16>>2]|0;if((i|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=0;s[e+12>>2]=0;s[e+8>>2]=0;c=t;return 0}function dv(e,t,n,r,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;h=c;c=c+16|0;CC(4152);+jD[s[(s[e>>2]|0)+44>>2]&3](e,t,n,r,i,o,u,a,l);+jD[s[(s[e>>2]|0)+48>>2]&3](e,t,n,r,i,o,u,a,l);+RD[s[(s[e>>2]|0)+36>>2]&1](e,t,n,a);u=s[5022]|0;r=(s[u+16>>2]|0)+ -1|0;s[u+16>>2]=r;if((r|0)!=0){c=h;return 0}do if((s[u+4>>2]|0)!=0){Pn(h|0,0)|0;r=s[5008]|0;f[u+8>>2]=+(((s[h+4>>2]|0)-(s[r+4>>2]|0)+(((s[h>>2]|0)-(s[r>>2]|0)|0)*1e6|0)-(s[u+12>>2]|0)|0)>>>0)/1e3+ +f[u+8>>2];if((s[u+16>>2]|0)==0){u=s[5022]|0;break}else{c=h;return 0}}while(0);s[5022]=s[u+20>>2];c=h;return 0}function vv(e){e=e|0;s[e+192>>2]=0;return}function mv(e,t,n){e=e|0;t=t|0;n=n|0;return}function gv(e,t,n){e=e|0;t=t|0;n=n|0;return}function yv(e){e=e|0;return 1}function bv(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;i=c;c=c+256|0;if((r[e+180>>0]|0)==0?(r[e+48>>0]|0)!=0:0){bd(i+64|0,n,e+116|0);s[e+824>>2]=s[i+64>>2];s[e+828>>2]=s[i+68>>2];s[e+832>>2]=s[i+72>>2];s[e+836>>2]=s[i+76>>2];s[e+840>>2]=s[i+80>>2];s[e+844>>2]=s[i+84>>2];s[e+848>>2]=s[i+88>>2];s[e+852>>2]=s[i+92>>2];s[e+856>>2]=s[i+96>>2];s[e+860>>2]=s[i+100>>2];s[e+864>>2]=s[i+104>>2];s[e+868>>2]=s[i+108>>2];s[e+872>>2]=s[i+112>>2];s[e+876>>2]=s[i+116>>2];s[e+880>>2]=s[i+120>>2];s[e+884>>2]=s[i+124>>2];bd(i,t,e+52|0);s[e+888>>2]=s[i+0>>2];s[e+892>>2]=s[i+4>>2];s[e+896>>2]=s[i+8>>2];s[e+900>>2]=s[i+12>>2];s[e+904>>2]=s[i+16>>2];s[e+908>>2]=s[i+20>>2];s[e+912>>2]=s[i+24>>2];s[e+916>>2]=s[i+28>>2];s[e+920>>2]=s[i+32>>2];s[e+924>>2]=s[i+36>>2];s[e+928>>2]=s[i+40>>2];s[e+932>>2]=s[i+44>>2];s[e+936>>2]=s[i+48>>2];s[e+940>>2]=s[i+52>>2];s[e+944>>2]=s[i+56>>2];s[e+948>>2]=s[i+60>>2]}else{bd(i+192|0,t,e+52|0);s[e+824>>2]=s[i+192>>2];s[e+828>>2]=s[i+196>>2];s[e+832>>2]=s[i+200>>2];s[e+836>>2]=s[i+204>>2];s[e+840>>2]=s[i+208>>2];s[e+844>>2]=s[i+212>>2];s[e+848>>2]=s[i+216>>2];s[e+852>>2]=s[i+220>>2];s[e+856>>2]=s[i+224>>2];s[e+860>>2]=s[i+228>>2];s[e+864>>2]=s[i+232>>2];s[e+868>>2]=s[i+236>>2];s[e+872>>2]=s[i+240>>2];s[e+876>>2]=s[i+244>>2];s[e+880>>2]=s[i+248>>2];s[e+884>>2]=s[i+252>>2];bd(i+128|0,n,e+116|0);s[e+888>>2]=s[i+128>>2];s[e+892>>2]=s[i+132>>2];s[e+896>>2]=s[i+136>>2];s[e+900>>2]=s[i+140>>2];s[e+904>>2]=s[i+144>>2];s[e+908>>2]=s[i+148>>2];s[e+912>>2]=s[i+152>>2];s[e+916>>2]=s[i+156>>2];s[e+920>>2]=s[i+160>>2];s[e+924>>2]=s[i+164>>2];s[e+928>>2]=s[i+168>>2];s[e+932>>2]=s[i+172>>2];s[e+936>>2]=s[i+176>>2];s[e+940>>2]=s[i+180>>2];s[e+944>>2]=s[i+184>>2];s[e+948>>2]=s[i+188>>2]}s[e+968>>2]=s[e+872>>2];s[e+972>>2]=s[e+876>>2];s[e+976>>2]=s[e+880>>2];s[e+980>>2]=s[e+884>>2];s[e+984>>2]=s[e+936>>2];s[e+988>>2]=s[e+940>>2];s[e+992>>2]=s[e+944>>2];s[e+996>>2]=s[e+948>>2];a=+f[e+824>>2];u=+f[e+840>>2];o=+f[e+856>>2];f[e+952>>2]=a;f[e+956>>2]=u;f[e+960>>2]=o;f[e+964>>2]=0;if((r[e+180>>0]|0)==0?(r[e+48>>0]|0)==0:0){b=+f[e+968>>2];p=b- +f[e+984>>2];g=+f[e+972>>2];h=g- +f[e+988>>2];m=+f[e+976>>2];l=m- +f[e+992>>2];f[e+1016>>2]=p;f[e+1020>>2]=h;f[e+1024>>2]=l;f[e+1028>>2]=0;v=a*p;y=u*h;y=v+y;v=o*l;v=y+v;y=a*v;u=u*v;a=o*v;o=b+y;u=g+u;a=m+a;t=e+1e3|0;f[t>>2]=o;t=e+1004|0;f[t>>2]=u;t=e+1008|0;f[t>>2]=a;t=e+1012|0;f[t>>2]=0;t=e+1032|0;f[t>>2]=v;t=e+828|0;n=e+844|0;d=e+860|0;a=+f[t>>2];u=+f[n>>2];o=+f[d>>2];a=a*p;u=u*h;u=a+u;o=o*l;o=u+o;d=e+1036|0;f[d>>2]=o;d=e+832|0;n=e+848|0;t=e+864|0;o=+f[d>>2];u=+f[n>>2];a=+f[t>>2];o=o*p;u=u*h;u=o+u;a=a*l;a=u+a;t=e+1040|0;f[t>>2]=a;c=i;return}E=+f[e+968>>2];m=+f[e+984>>2]-E;w=+f[e+972>>2];y=+f[e+988>>2]-w;l=+f[e+976>>2];b=+f[e+992>>2]-l;f[e+1016>>2]=m;f[e+1020>>2]=y;f[e+1024>>2]=b;f[e+1028>>2]=0;g=a*m;h=u*y;h=g+h;g=o*b;g=h+g;h=a*g;p=u*g;v=o*g;h=E+h;p=w+p;v=l+v;d=e+1e3|0;f[d>>2]=h;d=e+1004|0;f[d>>2]=p;d=e+1008|0;f[d>>2]=v;d=e+1012|0;f[d>>2]=0;d=e+1032|0;f[d>>2]=g;d=e+828|0;t=e+844|0;n=e+860|0;g=+f[d>>2];v=+f[t>>2];p=+f[n>>2];g=g*m;v=v*y;v=g+v;p=p*b;p=v+p;n=e+1036|0;f[n>>2]=p;n=e+832|0;t=e+848|0;d=e+864|0;p=+f[n>>2];v=+f[t>>2];g=+f[d>>2];m=p*m;y=v*y;y=m+y;b=g*b;b=y+b;d=e+1040|0;f[d>>2]=b;c=i;return}function wv(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0;n=c;if((r[e+48>>0]|0)!=0){s[t>>2]=0;s[t+4>>2]=0;c=n;return}s[t>>2]=4;s[t+4>>2]=2;bv(e,(s[e+28>>2]|0)+4|0,(s[e+32>>2]|0)+4|0);f[e+1088>>2]=0;r[e+297>>0]=0;i=+f[e+192>>2];o=+f[e+196>>2];do if(i<=o){h=+f[e+892>>2];l=+f[e+908>>2];u=+f[e+924>>2];i=+$w(+Z(+(+f[e+832>>2]*h+ +f[e+848>>2]*l+ +f[e+864>>2]*u),+(+f[e+828>>2]*h+ +f[e+844>>2]*l+ +f[e+860>>2]*u)),i,o);f[e+1084>>2]=i;o=+f[e+192>>2];if(i<o){f[e+1088>>2]=i-o;r[e+297>>0]=1;break}o=+f[e+196>>2];if(i>o){f[e+1088>>2]=i-o;r[e+297>>0]=1}}while(0);r[e+296>>0]=0;o=+f[e+1032>>2];f[e+1080>>2]=o;i=+f[e+184>>2];u=+f[e+188>>2];do if(i<=u){if(o>u){f[e+1032>>2]=o-u;r[e+296>>0]=1;a=14;break}if(o<i){f[e+1032>>2]=o-i;r[e+296>>0]=1;a=14}else a=13}else a=13;while(0);if((a|0)==13?(f[e+1032>>2]=0,(r[e+1096>>0]|0)!=0):0)a=14;if((a|0)==14){s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1}if((r[e+297>>0]|0)==0?(r[e+1112>>0]|0)==0:0){c=n;return}s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1;c=n;return}function Ev(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0;n=c;l=s[e+28>>2]|0;h=s[e+32>>2]|0;i=+f[l+344>>2];o=+f[h+344>>2];w=s[t+24>>2]|0;a=(r[e+180>>0]|0)!=0?1:-1;g=+f[e+936>>2]- +f[e+872>>2];y=+f[e+940>>2]- +f[e+876>>2];b=+f[e+944>>2]- +f[e+880>>2];if(i<1.1920928955078125e-7)d=1;else d=o<1.1920928955078125e-7;if(i+o>0)m=o/(i+o);else m=.5;v=1-m;P=+f[e+824>>2];A=+f[e+840>>2];N=+f[e+856>>2];F=+f[e+888>>2];q=+f[e+904>>2];k=+f[e+920>>2];_=(r[e+49>>0]|0)==0;do if(!_){L=m*P+v*F;j=m*A+v*q;H=m*N+v*k;O=1/+X(+(L*L+j*j+H*H));if(+W(+(H*O))>.7071067690849304){z=1/+X(+(H*O*H*O+j*O*j*O));i=L*O;o=j*O;u=H*O;T=0;C=-(H*O*z);M=j*O*z;B=(H*O*H*O+j*O*j*O)*z;U=-(L*O*j*O*z);z=L*O*-(H*O*z);break}else{z=1/+X(+(L*O*L*O+j*O*j*O));i=L*O;o=j*O;u=H*O;T=-(j*O*z);C=L*O*z;M=0;B=-(H*O*L*O*z);U=H*O*-(j*O*z);z=(L*O*L*O+j*O*j*O)*z;break}}else{i=P;o=A;u=N;T=+f[e+828>>2];C=+f[e+844>>2];M=+f[e+860>>2];B=+f[e+832>>2];U=+f[e+848>>2];z=+f[e+864>>2]}while(0);S=s[t+12>>2]|0;f[S>>2]=T;f[S+4>>2]=C;f[S+8>>2]=M;f[S+(w<<2)>>2]=B;f[S+(w+1<<2)>>2]=U;f[S+(w+2<<2)>>2]=z;O=-T;x=s[t+20>>2]|0;f[x>>2]=O;j=-C;f[x+4>>2]=j;I=-M;f[x+8>>2]=I;L=-B;f[x+(w<<2)>>2]=L;R=-U;f[x+(w+1<<2)>>2]=R;H=-z;f[x+(w+2<<2)>>2]=H;E=s[e+300>>2]|0;V=+f[e+280>>2];if((E&128|0)==0)V=V*+f[t+4>>2];Y=V*+f[t>>2];Z=s[t+28>>2]|0;f[Z>>2]=Y*((A*k-N*q)*T+(N*F-P*k)*C+(P*q-A*F)*M);f[Z+(w<<2)>>2]=Y*((A*k-N*q)*B+(N*F-P*k)*U+(P*q-A*F)*z);if((E&64|0)!=0){Z=s[t+32>>2]|0;f[Z>>2]=+f[e+292>>2];f[Z+(w<<2)>>2]=+f[e+292>>2]}P=+f[l+52>>2];q=+f[l+56>>2];F=+f[l+60>>2];N=+f[h+52>>2];A=+f[h+56>>2];k=+f[h+60>>2];if(_){Y=(A-q)*M-(k-F)*C;G=(k-F)*T-(N-P)*M;Q=(N-P)*C-(A-q)*T;f[S+(w<<1<<2)>>2]=m*Y;f[S+((w<<1|1)<<2)>>2]=m*G;f[S+((w<<1)+2<<2)>>2]=m*Q;f[x+(w<<1<<2)>>2]=v*Y;f[x+((w<<1|1)<<2)>>2]=v*G;f[x+((w<<1)+2<<2)>>2]=v*Q;Q=(A-q)*z-(k-F)*U;G=(k-F)*B-(N-P)*z;Y=(N-P)*U-(A-q)*B;f[S+(w*3<<2)>>2]=m*Q;f[S+((w*3|0)+1<<2)>>2]=m*G;f[S+((w*3|0)+2<<2)>>2]=m*Y;f[x+(w*3<<2)>>2]=v*Q;f[x+((w*3|0)+1<<2)>>2]=v*G;f[x+((w*3|0)+2<<2)>>2]=v*Y;D=s[t+8>>2]|0;f[D+(w<<1<<2)>>2]=T;f[D+((w<<1|1)<<2)>>2]=C;f[D+((w<<1)+2<<2)>>2]=M;f[D+(w*3<<2)>>2]=B;f[D+((w*3|0)+1<<2)>>2]=U;f[D+((w*3|0)+2<<2)>>2]=z;_=s[t+16>>2]|0;f[_+(w<<1<<2)>>2]=O;f[_+((w<<1|1)<<2)>>2]=j;f[_+((w<<1)+2<<2)>>2]=I;f[_+(w*3<<2)>>2]=L;f[_+((w*3|0)+1<<2)>>2]=R;f[_+((w*3|0)+2<<2)>>2]=H;j=0;I=0;R=0;L=0;O=0;H=0;A=A-q;k=k-F;N=N-P}else{N=+f[e+936>>2]-N;L=+f[e+940>>2]-A;A=+f[e+944>>2]-k;O=i*N+o*L+u*A;k=i*O;H=o*O;O=u*O;Q=+f[e+872>>2]-P;G=+f[e+876>>2]-q;Y=+f[e+880>>2]-F;M=i*Q+o*G+u*Y;T=i*M;C=o*M;M=u*M;F=+f[e+1080>>2]- +f[e+1032>>2];P=T+i*F-k;q=C+o*F-H;F=M+u*F-O;R=Q-T+m*P;j=G-C+m*q;I=Y-M+m*F;T=m*(N-k)+v*(Q-T);C=m*(L-H)+v*(G-C);M=m*(A-O)+v*(Y-M);if(T*T+C*C+M*M>1.1920928955078125e-7){Y=1/+X(+(T*T+C*C+M*M));T=T*Y;C=Y*C;M=Y*M}else{T=+f[e+828>>2];C=+f[e+844>>2];M=+f[e+860>>2]}B=o*M-u*C;U=u*T-i*M;z=i*C-o*T;f[S+(w<<1<<2)>>2]=j*M-I*C;f[S+((w<<1|1)<<2)>>2]=I*T-R*M;f[S+((w<<1)+2<<2)>>2]=R*C-j*T;Z=s[t+20>>2]|0;f[Z+(w<<1<<2)>>2]=-((L-H-v*q)*M-(A-O-v*F)*C);f[Z+((w<<1|1)<<2)>>2]=-((A-O-v*F)*T-(N-k-v*P)*M);f[Z+((w<<1)+2<<2)>>2]=-((N-k-v*P)*C-(L-H-v*q)*T);V=(L-H-v*q)*z-(A-O-v*F)*U;J=(A-O-v*F)*B-(N-k-v*P)*z;Y=(N-k-v*P)*U-(L-H-v*q)*B;if(d?(r[e+297>>0]|0)!=0:0){V=v*V;J=v*J;Y=v*Y;G=m*(j*z-I*U);K=m*(I*B-R*z);Q=m*(R*U-j*B)}else{G=j*z-I*U;K=I*B-R*z;Q=R*U-j*B}x=s[t+12>>2]|0;f[x+(w*3<<2)>>2]=G;f[x+((w*3|0)+1<<2)>>2]=K;f[x+((w*3|0)+2<<2)>>2]=Q;x=s[t+20>>2]|0;f[x+(w*3<<2)>>2]=-V;f[x+((w*3|0)+1<<2)>>2]=-J;f[x+((w*3|0)+2<<2)>>2]=-Y;D=s[t+8>>2]|0;f[D+(w<<1<<2)>>2]=T;f[D+((w<<1|1)<<2)>>2]=C;f[D+((w<<1)+2<<2)>>2]=M;f[D+(w*3<<2)>>2]=B;f[D+((w*3|0)+1<<2)>>2]=U;f[D+((w*3|0)+2<<2)>>2]=z;_=s[t+16>>2]|0;f[_+(w<<1<<2)>>2]=-T;f[_+((w<<1|1)<<2)>>2]=-C;f[_+((w<<1)+2<<2)>>2]=-M;f[_+(w*3<<2)>>2]=-B;f[_+((w*3|0)+1<<2)>>2]=-U;f[_+((w*3|0)+2<<2)>>2]=-z;E=s[e+300>>2]|0;L=L-H-v*q;O=A-O-v*F;H=N-k-v*P;A=0;k=0;N=0}P=+f[e+264>>2];if((E&32|0)==0)P=P*+f[t+4>>2];Y=P*+f[t>>2];S=s[t+28>>2]|0;f[S+(w<<1<<2)>>2]=Y*(g*T+y*C+b*M);f[S+(w*3<<2)>>2]=Y*(g*B+y*U+b*z);if((E&16|0)!=0){Z=s[t+32>>2]|0;f[Z+(w<<1<<2)>>2]=+f[e+276>>2];f[Z+(w*3<<2)>>2]=+f[e+276>>2]}if((r[e+296>>0]|0)==0)if((r[e+1096>>0]|0)==0)h=4;else{$=0;Z=0;w=0;g=0;p=30}else{g=a*+f[e+1032>>2];$=1;Z=(r[e+1096>>0]|0)==0;w=g>0?2:1;p=30}if((p|0)==30){p=s[t+24>>2]<<2;f[D+(p<<2)>>2]=i;f[D+((p|1)<<2)>>2]=o;f[D+((p|2)<<2)>>2]=u;f[_+(p<<2)>>2]=-i;f[_+((p|1)<<2)>>2]=-o;f[_+((p|2)<<2)>>2]=-u;if((r[e+49>>0]|0)!=0){if(!d){D=s[t+12>>2]|0;f[D+(p<<2)>>2]=u*j-o*I;f[D+((p|1)<<2)>>2]=i*I-u*R;f[D+((p|2)<<2)>>2]=o*R-i*j;f[x+(p<<2)>>2]=-(u*L-o*O);f[x+((p|1)<<2)>>2]=-(i*O-u*H);f[x+((p|2)<<2)>>2]=-(o*H-i*L)}}else{Q=u*A-o*k;G=i*k-u*N;Y=o*N-i*A;D=s[t+12>>2]|0;f[D+(p<<2)>>2]=m*Q;f[D+((p|1)<<2)>>2]=m*G;f[D+((p|2)<<2)>>2]=m*Y;f[x+(p<<2)>>2]=v*Q;f[x+((p|1)<<2)>>2]=v*G;f[x+((p|2)<<2)>>2]=v*Y}_=+f[e+184>>2]==+f[e+188>>2];f[S+(p<<2)>>2]=0;d=(s[t+36>>2]|0)+(p<<2)|0;f[d>>2]=0;D=(s[t+40>>2]|0)+(p<<2)|0;f[D>>2]=0;v=+f[((E&512|0)==0?t+4|0:e+232|0)>>2];if(!($&_|Z)){if((E&1|0)!=0)f[(s[t+32>>2]|0)+(p<<2)>>2]=+f[e+212>>2];m=+f[e+1100>>2];T=+f[e+1080>>2];N=+f[e+184>>2];b=+f[e+188>>2];y=v*+f[t>>2];e:do if(!(N>b))if(!(N==b)){if(m/y<0){do if(T>=N){if(!(N-m/y>T))break;y=(N-T)/(m/y);break e}while(0);y=T<N?0:1;break}if(m/y>0){do if(T<=b){if(!(b-m/y<T))break;y=(b-T)/(m/y);break e}while(0);y=T>b?0:1}else y=0}else y=0;else y=1;while(0);f[S+(p<<2)>>2]=+f[S+(p<<2)>>2]-a*y*m;f[d>>2]=+f[d>>2]- +f[e+1104>>2]*+f[t>>2];f[D>>2]=+f[e+1104>>2]*+f[t>>2]+ +f[D>>2]}if($){f[S+(p<<2)>>2]=+f[S+(p<<2)>>2]+g*v*+f[t>>2];if((E&256|0)!=0)f[(s[t+32>>2]|0)+(p<<2)>>2]=+f[e+244>>2];do if(!_)if((w|0)==1){f[d>>2]=-3.4028234663852886e38;f[D>>2]=0;break}else{f[d>>2]=0;f[D>>2]=3.4028234663852886e38;break}else{f[d>>2]=-3.4028234663852886e38;f[D>>2]=3.4028234663852886e38}while(0);Y=1- +f[e+240>>2];v=+W(+Y);do if(!(Y!=Y|0!=0|Y==0)){a=a*(i*+f[l+312>>2]+o*+f[l+316>>2]+u*+f[l+320>>2]-(i*+f[h+312>>2]+o*+f[h+316>>2]+u*+f[h+320>>2]));if((w|0)==1){if(!(a<0))break;if(!(+f[S+(p<<2)>>2]<-(v*a)))break;f[S+(p<<2)>>2]=-(v*a);break}else{if(!(a>0))break;if(!(+f[S+(p<<2)>>2]>-(v*a)))break;f[S+(p<<2)>>2]=-(v*a);break}}while(0);f[S+(p<<2)>>2]=+f[e+232>>2]*+f[S+(p<<2)>>2];h=5}else h=5}if((r[e+297>>0]|0)==0)if((r[e+1112>>0]|0)==0){c=n;return}else{p=0;d=0;l=0;a=0}else{a=+f[e+1088>>2];p=1;d=(r[e+1112>>0]|0)==0;l=a>0?1:2}h=rt(s[t+24>>2]|0,h)|0;Z=s[t+12>>2]|0;f[Z+(h<<2)>>2]=i;f[Z+(h+1<<2)>>2]=o;f[Z+(h+2<<2)>>2]=u;f[x+(h<<2)>>2]=-i;f[x+(h+1<<2)>>2]=-o;f[x+(h+2<<2)>>2]=-u;v=+f[e+192>>2];m=+f[e+196>>2];g=+f[((E&2048|0)==0?t+4|0:e+248|0)>>2];if(!(p&v==m|d)){if((E&4|0)==0){T=m;C=v}else{f[(s[t+32>>2]|0)+(h<<2)>>2]=+f[e+228>>2];T=+f[e+196>>2];C=+f[e+192>>2]}N=+f[e+1084>>2];y=+f[e+1116>>2];b=g*+f[t>>2];t:do if(!(C>T))if(!(C==T)){if(y/b<0){do if(N>=C){if(!(C-y/b>N))break;b=(C-N)/(y/b);break t}while(0);b=N<C?0:1;break}if(y/b>0){do if(N<=T){if(!(T-y/b<N))break;b=(T-N)/(y/b);break t}while(0);b=N>T?0:1}else b=0}else b=0;else b=1;while(0);f[S+(h<<2)>>2]=b*y;f[(s[t+36>>2]|0)+(h<<2)>>2]=-(+f[e+1120>>2]*+f[t>>2]);f[(s[t+40>>2]|0)+(h<<2)>>2]=+f[e+1120>>2]*+f[t>>2]}if(!p){c=n;return}f[S+(h<<2)>>2]=+f[S+(h<<2)>>2]+a*g*+f[t>>2];if((E&1024|0)!=0)f[(s[t+32>>2]|0)+(h<<2)>>2]=+f[e+260>>2];do if(!(v==m)){p=(s[t+36>>2]|0)+(h<<2)|0;if((l|0)==1){f[p>>2]=0;f[(s[t+40>>2]|0)+(h<<2)>>2]=3.4028234663852886e38;break}else{f[p>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(h<<2)>>2]=0;break}}else{f[(s[t+36>>2]|0)+(h<<2)>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(h<<2)>>2]=3.4028234663852886e38}while(0);Y=1- +f[e+256>>2];a=+W(+Y);do if(!(Y!=Y|0!=0|Y==0)){$=s[e+28>>2]|0;Z=s[e+32>>2]|0;i=i*+f[$+328>>2]+o*+f[$+332>>2]+u*+f[$+336>>2]-(i*+f[Z+328>>2]+o*+f[Z+332>>2]+u*+f[Z+336>>2]);if((l|0)==1){if(!(i<0))break;if(!(+f[S+(h<<2)>>2]<-(a*i)))break;f[S+(h<<2)>>2]=-(a*i);break}else{if(!(i>0))break;if(!(+f[S+(h<<2)>>2]>-(a*i)))break;f[S+(h<<2)>>2]=-(a*i);break}}while(0);f[S+(h<<2)>>2]=+f[e+248>>2]*+f[S+(h<<2)>>2];c=n;return}function Sv(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var i=0;i=c;if((t|0)==2){if((r|0)<1){f[e+232>>2]=n;s[e+300>>2]=s[e+300>>2]|512;c=i;return}if((r|0)<3){f[e+264>>2]=n;s[e+300>>2]=s[e+300>>2]|32;c=i;return}if((r|0)==3){f[e+248>>2]=n;s[e+300>>2]=s[e+300>>2]|2048;c=i;return}if((r|0)>=6){c=i;return}f[e+280>>2]=n;s[e+300>>2]=s[e+300>>2]|128;c=i;return}else if((t|0)==3){if((r|0)<1){f[e+212>>2]=n;s[e+300>>2]=s[e+300>>2]|1;c=i;return}if((r|0)!=3){c=i;return}f[e+228>>2]=n;s[e+300>>2]=s[e+300>>2]|4;c=i;return}else if((t|0)==4){if((r|0)<1){f[e+244>>2]=n;s[e+300>>2]=s[e+300>>2]|256;c=i;return}if((r|0)<3){f[e+276>>2]=n;s[e+300>>2]=s[e+300>>2]|16;c=i;return}if((r|0)==3){f[e+260>>2]=n;s[e+300>>2]=s[e+300>>2]|1024;c=i;return}if((r|0)>=6){c=i;return}f[e+292>>2]=n;s[e+300>>2]=s[e+300>>2]|64;c=i;return}else{c=i;return}}function xv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;do if((t|0)==2){if((n|0)<1){i=+f[e+232>>2];break}if((n|0)<3){i=+f[e+264>>2];break}if((n|0)==3){i=+f[e+248>>2];break}if((n|0)<6)i=+f[e+280>>2];else i=3.4028234663852886e38}else if((t|0)==4){if((n|0)<1){i=+f[e+244>>2];break}if((n|0)<3){i=+f[e+276>>2];break}if((n|0)==3){i=+f[e+260>>2];break}if((n|0)<6)i=+f[e+292>>2];else i=3.4028234663852886e38}else if((t|0)==3){if((n|0)<1){i=+f[e+212>>2];break}if((n|0)==3)i=+f[e+228>>2];else i=3.4028234663852886e38}else i=3.4028234663852886e38;while(0);c=r;return+i}function Tv(e){e=e|0;return}function Nv(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Cv(e){e=e|0;return 204}function kv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;Av(e,t,n)|0;f[t+52>>2]=+f[e+52>>2];f[t+56>>2]=+f[e+56>>2];f[t+60>>2]=+f[e+60>>2];f[t+64>>2]=+f[e+64>>2];f[t+68>>2]=+f[e+68>>2];f[t+72>>2]=+f[e+72>>2];f[t+76>>2]=+f[e+76>>2];f[t+80>>2]=+f[e+80>>2];f[t+84>>2]=+f[e+84>>2];f[t+88>>2]=+f[e+88>>2];f[t+92>>2]=+f[e+92>>2];f[t+96>>2]=+f[e+96>>2];f[t+100>>2]=+f[e+100>>2];f[t+104>>2]=+f[e+104>>2];f[t+108>>2]=+f[e+108>>2];f[t+112>>2]=+f[e+112>>2];f[t+116>>2]=+f[e+116>>2];f[t+120>>2]=+f[e+120>>2];f[t+124>>2]=+f[e+124>>2];f[t+128>>2]=+f[e+128>>2];f[t+132>>2]=+f[e+132>>2];f[t+136>>2]=+f[e+136>>2];f[t+140>>2]=+f[e+140>>2];f[t+144>>2]=+f[e+144>>2];f[t+148>>2]=+f[e+148>>2];f[t+152>>2]=+f[e+152>>2];f[t+156>>2]=+f[e+156>>2];f[t+160>>2]=+f[e+160>>2];f[t+164>>2]=+f[e+164>>2];f[t+168>>2]=+f[e+168>>2];f[t+172>>2]=+f[e+172>>2];f[t+176>>2]=+f[e+176>>2];f[t+180>>2]=+f[e+188>>2];f[t+184>>2]=+f[e+184>>2];f[t+188>>2]=+f[e+196>>2];f[t+192>>2]=+f[e+192>>2];s[t+196>>2]=o[e+180>>0];s[t+200>>2]=o[e+49>>0];c=r;return 4352}function Lv(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;i=c;c=c+32|0;s[e+4>>2]=t;s[e>>2]=64;s[e+8>>2]=-1;s[e+12>>2]=-1;f[e+16>>2]=3.4028234663852886e38;r[e+20>>0]=1;r[e+21>>0]=0;s[e+24>>2]=-1;s[e+28>>2]=n;if((r[5024]|0)==0?(Zt(5024)|0)!=0:0){s[i+16>>2]=0;s[i+20>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;aS(4408,0,0,0,i+16|0);sn(5024)}s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;fS(4408,0,i);s[e+32>>2]=4408;f[e+36>>2]=0;f[e+40>>2]=.30000001192092896;s[e+44>>2]=0;c=i;return}function Av(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,u=0;r=c;s[t>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+28>>2]|0)|0;s[t+4>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+32>>2]|0)|0;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;u=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t+8>>2]=u;if((u|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+12>>2]=s[e+4>>2];s[t+24>>2]=o[e+21>>0];s[t+40>>2]=s[e+24>>2];f[t+44>>2]=+f[e+16>>2];s[t+48>>2]=o[e+20>>0];s[t+20>>2]=s[e+12>>2];s[t+16>>2]=s[e+8>>2];f[t+28>>2]=+f[e+36>>2];f[t+32>>2]=+f[e+40>>2];s[t+36>>2]=0;i=s[e+28>>2]|0;if((s[i+488>>2]|0)>0){n=0;do{if((s[(s[i+496>>2]|0)+(n<<2)>>2]|0)==(e|0)){s[t+36>>2]=1;i=s[e+28>>2]|0}n=n+1|0}while((n|0)<(s[i+488>>2]|0))}i=s[e+32>>2]|0;if((s[i+488>>2]|0)>0)n=0;else{c=r;return 4376}do{if((s[(s[i+496>>2]|0)+(n<<2)>>2]|0)==(e|0)){s[t+36>>2]=1;i=s[e+32>>2]|0}n=n+1|0}while((n|0)<(s[i+488>>2]|0));c=r;return 4376}function Ov(e,t,n,o,a,l){e=e|0;t=t|0;n=n|0;o=o|0;a=a|0;l=l|0;var h=0,p=0,d=0,v=0,m=0;h=c;s[e>>2]=5216;i[e+4>>1]=-2;i[e+6>>1]=-1;s[e+92>>2]=a;s[e+96>>2]=0;r[e+100>>0]=0;s[e+104>>2]=0;s[e+108>>2]=0;if((a|0)==0){s[5004]=(s[5004]|0)+1;a=cM(95)|0;if((a|0)!=0?(s[(a+19&-16)+ -4>>2]=a,(a+19&-16|0)!=0):0){kO(a+19&-16);a=a+19&-16}else a=0;s[e+92>>2]=a;r[e+100>>0]=1}if(!l){s[5004]=(s[5004]|0)+1;l=cM(43)|0;if((l|0)!=0?(p=l+19&-16,s[p+ -4>>2]=l,(l+19&-16|0)!=0):0){s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;s[p+20>>2]=0;s[(l+19&-16)>>2]=5280;r[p+20>>0]=1;s[p+16>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;p=l+19&-16}else p=0;s[e+112>>2]=p;s[5004]=(s[5004]|0)+1;p=cM(215)|0;if((p|0)!=0?(s[(p+19&-16)+ -4>>2]=p,(p+19&-16|0)!=0):0){LL(p+19&-16,s[e+112>>2]|0);p=p+19&-16}else p=0;s[e+108>>2]=p;r[p+193>>0]=1}s[e+8>>2]=s[t+0>>2];s[e+12>>2]=s[t+4>>2];s[e+16>>2]=s[t+8>>2];s[e+20>>2]=s[t+12>>2];s[e+24>>2]=s[n+0>>2];s[e+28>>2]=s[n+4>>2];s[e+32>>2]=s[n+8>>2];s[e+36>>2]=s[n+12>>2];m=+(u[e+6>>1]|0);v=m/(+f[e+28>>2]- +f[e+12>>2]);d=m/(+f[e+32>>2]- +f[e+16>>2]);f[e+40>>2]=m/(+f[e+24>>2]- +f[e+8>>2]);f[e+44>>2]=v;f[e+48>>2]=d;f[e+52>>2]=0;t=(o&65535)+1&65535;s[5004]=(s[5004]|0)+1;n=cM(t<<6|19)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}if((t|0)!=0){p=n+(t<<6)|0;l=n;do{s[l>>2]=0;s[l+8>>2]=0;l=l+64|0}while((l|0)!=(p|0))}s[e+60>>2]=n;i[e+58>>1]=(o&65535)+1;i[e+56>>1]=0;i[e+64>>1]=1;if(t>>>0>1){o=1;p=1;do{i[n+(o<<6)+48>>1]=o+1;p=p+1<<16>>16;o=p&65535}while(o>>>0<t>>>0)}i[n+(t+ -1<<6)+48>>1]=0;s[5004]=(s[5004]|0)+1;o=cM((t<<3|3)+16|0)|0;if((o|0)!=0){s[(o+19&-16)+ -4>>2]=o;s[e+80>>2]=o+19&-16;if((o+19&-16|0)==0)o=0;else o=o+19&-16}else{s[e+80>>2]=0;o=0}s[e+68>>2]=o;s[5004]=(s[5004]|0)+1;o=cM((t<<3|3)+16|0)|0;if((o|0)!=0){s[(o+19&-16)+ -4>>2]=o;s[e+84>>2]=o+19&-16;if((o+19&-16|0)==0)o=0;else o=o+19&-16}else{s[e+84>>2]=0;o=0}s[e+72>>2]=o;s[5004]=(s[5004]|0)+1;o=cM((t<<3|3)+16|0)|0;if((o|0)!=0){s[(o+19&-16)+ -4>>2]=o;s[e+88>>2]=o+19&-16;if((o+19&-16|0)==0)o=0;else o=o+19&-16}else{s[e+88>>2]=0;o=0}s[e+76>>2]=o;s[s[e+60>>2]>>2]=0;a=s[e+60>>2]|0;i[a+48>>1]=0;i[a+54>>1]=1;l=s[e+68>>2]|0;i[l>>1]=0;i[l+2>>1]=0;i[l+4>>1]=i[e+6>>1]|0;i[l+6>>1]=0;i[a+50>>1]=0;i[a+56>>1]=1;l=s[e+72>>2]|0;i[l>>1]=0;i[l+2>>1]=0;i[l+4>>1]=i[e+6>>1]|0;i[l+6>>1]=0;i[a+52>>1]=0;i[a+58>>1]=1;a=s[e+76>>2]|0;i[a>>1]=0;i[a+2>>1]=0;i[a+4>>1]=i[e+6>>1]|0;i[a+6>>1]=0;s[e>>2]=5040;c=h;return}function Mv(e){e=e|0;var t=0;t=c;Qv(e);c=t;return}function _v(e){e=e|0;var t=0;t=c;Qv(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Dv(e,t,n,r,o,a,l,h,p){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;a=a|0;l=l|0;h=h|0;p=p|0;var d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;d=c;c=c+16|0;$v(e,d+6|0,+f[t>>2],+f[t+4>>2],+f[t+8>>2],0);$v(e,d,+f[n>>2],+f[n+4>>2],+f[n+8>>2],1);v=i[e+64>>1]|0;m=s[e+60>>2]|0;i[e+64>>1]=i[m+((v&65535)<<6)+48>>1]|0;i[e+56>>1]=(i[e+56>>1]|0)+1<<16>>16;s[m+((v&65535)<<6)+12>>2]=v&65535;s[m+((v&65535)<<6)>>2]=o;i[m+((v&65535)<<6)+4>>1]=a;i[m+((v&65535)<<6)+6>>1]=l;s[m+((v&65535)<<6)+8>>2]=p;w=(u[e+56>>1]|0)<<1;E=(w&65534)+ -1|0;y=(s[e+60>>2]|0)+54|0;i[y>>1]=(u[y>>1]|0)+2;y=s[e+68>>2]|0;g=u[y+(E<<2)>>1]|u[y+(E<<2)+2>>1]<<16;i[y+((w&65534|1)<<2)>>1]=g;i[y+((w&65534|1)<<2)+2>>1]=g>>>16;y=s[e+68>>2]|0;i[y+(E<<2)>>1]=i[d+6>>1]|0;i[y+(E<<2)+2>>1]=v;i[y+((w&65534)<<2)>>1]=i[d>>1]|0;i[y+((w&65534)<<2)+2>>1]=v;i[m+((v&65535)<<6)+48>>1]=E;i[m+((v&65535)<<6)+54>>1]=w;y=(s[e+60>>2]|0)+56|0;i[y>>1]=(u[y>>1]|0)+2;y=s[e+72>>2]|0;g=u[y+(E<<2)>>1]|u[y+(E<<2)+2>>1]<<16;i[y+((w&65534|1)<<2)>>1]=g;i[y+((w&65534|1)<<2)+2>>1]=g>>>16;y=s[e+72>>2]|0;i[y+(E<<2)>>1]=i[d+8>>1]|0;i[y+(E<<2)+2>>1]=v;i[y+((w&65534)<<2)>>1]=i[d+2>>1]|0;i[y+((w&65534)<<2)+2>>1]=v;i[m+((v&65535)<<6)+50>>1]=E;i[m+((v&65535)<<6)+56>>1]=w;y=(s[e+60>>2]|0)+58|0;i[y>>1]=(u[y>>1]|0)+2;y=s[e+76>>2]|0;g=u[y+(E<<2)>>1]|u[y+(E<<2)+2>>1]<<16;i[y+((w&65534|1)<<2)>>1]=g;i[y+((w&65534|1)<<2)+2>>1]=g>>>16;y=s[e+76>>2]|0;i[y+(E<<2)>>1]=i[d+10>>1]|0;i[y+(E<<2)+2>>1]=v;i[y+((w&65534)<<2)>>1]=i[d+4>>1]|0;i[y+((w&65534)<<2)+2>>1]=v;i[m+((v&65535)<<6)+52>>1]=E;i[m+((v&65535)<<6)+58>>1]=w;w=s[e+68>>2]|0;E=u[m+((v&65535)<<6)+48>>1]|0;y=s[e+60>>2]|0;g=i[w+(E+ -1<<2)>>1]|0;if((u[w+(E<<2)>>1]|0)<(g&65535)){p=y+((u[w+(E<<2)+2>>1]|0)<<6)+48|0;b=w+(E<<2)|0;w=w+(E+ -1<<2)|0;while(1){E=u[w+2>>1]|0;if((g&1)==0){E=y+(E<<6)+48|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}else{E=y+(E<<6)+54|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}i[p>>1]=(i[p>>1]|0)+ -1<<16>>16;g=u[b>>1]|u[b+2>>1]<<16;E=u[w>>1]|u[w+2>>1]<<16;i[b>>1]=E;i[b+2>>1]=E>>>16;i[w>>1]=g;i[w+2>>1]=g>>>16;b=b+ -4|0;w=w+ -4|0;g=i[w>>1]|0;if(!((u[b>>1]|0)<(g&65535)))break;y=s[e+60>>2]|0}p=s[e+68>>2]|0}else p=w;g=u[m+((v&65535)<<6)+54>>1]|0;w=p+(g<<2)|0;b=p+(g+ -1<<2)|0;y=i[b>>1]|0;e:do if((u[w>>1]|0)<(y&65535)){E=s[e+60>>2]|0;p=E+((u[p+(g<<2)+2>>1]|0)<<6)+54|0;g=E;while(1){E=u[b+2>>1]|0;if((y&1)==0){E=g+(E<<6)+48|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}else{E=g+(E<<6)+54|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}i[p>>1]=(i[p>>1]|0)+ -1<<16>>16;y=u[w>>1]|u[w+2>>1]<<16;E=u[b>>1]|u[b+2>>1]<<16;i[w>>1]=E;i[w+2>>1]=E>>>16;i[b>>1]=y;i[b+2>>1]=y>>>16;w=w+ -4|0;b=b+ -4|0;y=i[b>>1]|0;if(!((u[w>>1]|0)<(y&65535)))break e;g=s[e+60>>2]|0}}while(0);E=s[e+72>>2]|0;w=u[m+((v&65535)<<6)+50>>1]|0;y=s[e+60>>2]|0;g=i[E+(w+ -1<<2)>>1]|0;if((u[E+(w<<2)>>1]|0)<(g&65535)){p=y+((u[E+(w<<2)+2>>1]|0)<<6)+50|0;b=E+(w<<2)|0;w=E+(w+ -1<<2)|0;while(1){E=u[w+2>>1]|0;if((g&1)==0){E=y+(E<<6)+50|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}else{E=y+(E<<6)+56|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}i[p>>1]=(i[p>>1]|0)+ -1<<16>>16;g=u[b>>1]|u[b+2>>1]<<16;E=u[w>>1]|u[w+2>>1]<<16;i[b>>1]=E;i[b+2>>1]=E>>>16;i[w>>1]=g;i[w+2>>1]=g>>>16;b=b+ -4|0;w=w+ -4|0;g=i[w>>1]|0;if(!((u[b>>1]|0)<(g&65535)))break;y=s[e+60>>2]|0}E=s[e+72>>2]|0}p=u[m+((v&65535)<<6)+56>>1]|0;w=E+(p<<2)|0;b=E+(p+ -1<<2)|0;g=i[b>>1]|0;t:do if((u[w>>1]|0)<(g&65535)){y=s[e+60>>2]|0;p=y+((u[E+(p<<2)+2>>1]|0)<<6)+56|0;while(1){E=u[b+2>>1]|0;if((g&1)==0){E=y+(E<<6)+50|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}else{E=y+(E<<6)+56|0;i[E>>1]=(i[E>>1]|0)+1<<16>>16}i[p>>1]=(i[p>>1]|0)+ -1<<16>>16;g=u[w>>1]|u[w+2>>1]<<16;E=u[b>>1]|u[b+2>>1]<<16;i[w>>1]=E;i[w+2>>1]=E>>>16;i[b>>1]=g;i[b+2>>1]=g>>>16;w=w+ -4|0;b=b+ -4|0;g=i[b>>1]|0;if(!((u[w>>1]|0)<(g&65535)))break t;y=s[e+60>>2]|0}}while(0);Jv(e,2,i[m+((v&65535)<<6)+52>>1]|0);Kv(e,2,i[m+((v&65535)<<6)+58>>1]|0,h);m=s[e+60>>2]|0;e=s[e+108>>2]|0;if((e|0)==0){E=m+((v&65535)<<6)|0;c=d;return E|0}s[m+((v&65535)<<6)+60>>2]=UD[s[(s[e>>2]|0)+8>>2]&3](e,t,n,r,o,a,l,h,0)|0;E=m+((v&65535)<<6)|0;c=d;return E|0}function Pv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;r=c;o=s[e+108>>2]|0;if((o|0)!=0)WD[s[(s[o>>2]|0)+12>>2]&127](o,s[t+60>>2]|0,n);o=s[t+12>>2]|0;t=s[e+60>>2]|0;g=s[e+92>>2]|0;if(!(dD[s[(s[g>>2]|0)+56>>2]&127](g)|0)){g=s[e+92>>2]|0;WD[s[(s[g>>2]|0)+16>>2]&127](g,t+((o&65535)<<6)|0,n)}n=u[e+56>>1]|0;a=s[e+60>>2]|0;i[a+54>>1]=(u[a+54>>1]|0)+65534;i[a+56>>1]=(u[a+56>>1]|0)+65534;i[a+58>>1]=(u[a+58>>1]|0)+65534;a=0;do{l=e+(a<<2)+68|0;f=s[l>>2]|0;d=u[t+((o&65535)<<6)+(a<<1)+54>>1]|0;i[f+(d<<2)>>1]=i[e+6>>1]|0;v=i[f+(d+1<<2)+2>>1]|0;if(v<<16>>16==0)d=f;else{h=(s[e+60>>2]|0)+((u[f+(d<<2)+2>>1]|0)<<6)+(a<<1)+54|0;p=f+(d<<2)|0;d=f+(d+1<<2)|0;while(1){g=i[d>>1]|0;if((u[p>>1]|0)<(g&65535))break;m=s[e+60>>2]|0;v=v&65535;if((g&1)==0){g=m+(v<<6)+(a<<1)+48|0;i[g>>1]=(i[g>>1]|0)+ -1<<16>>16}else{g=m+(v<<6)+(a<<1)+54|0;i[g>>1]=(i[g>>1]|0)+ -1<<16>>16}i[h>>1]=(i[h>>1]|0)+1<<16>>16;v=u[p>>1]|u[p+2>>1]<<16;g=u[d>>1]|u[d+2>>1]<<16;i[p>>1]=g;i[p+2>>1]=g>>>16;i[d>>1]=v;i[d+2>>1]=v>>>16;v=i[d+6>>1]|0;if(v<<16>>16==0)break;else{p=p+4|0;d=d+4|0}}d=s[l>>2]|0}v=u[t+((o&65535)<<6)+(a<<1)+48>>1]|0;i[f+(v<<2)>>1]=i[e+6>>1]|0;p=i[d+(v+1<<2)+2>>1]|0;e:do if(!(p<<16>>16==0)){l=(s[e+60>>2]|0)+((u[d+(v<<2)+2>>1]|0)<<6)+(a<<1)+48|0;h=d+(v<<2)|0;d=d+(v+1<<2)|0;while(1){v=i[d>>1]|0;if((u[h>>1]|0)<(v&65535))break e;m=s[e+60>>2]|0;p=p&65535;if((v&1)==0){g=m+(p<<6)+(a<<1)+48|0;i[g>>1]=(i[g>>1]|0)+ -1<<16>>16}else{g=m+(p<<6)+(a<<1)+54|0;i[g>>1]=(i[g>>1]|0)+ -1<<16>>16}i[l>>1]=(i[l>>1]|0)+1<<16>>16;p=u[h>>1]|u[h+2>>1]<<16;g=u[d>>1]|u[d+2>>1]<<16;i[h>>1]=g;i[h+2>>1]=g>>>16;i[d>>1]=p;i[d+2>>1]=p>>>16;p=i[d+6>>1]|0;if(p<<16>>16==0)break;else{h=h+4|0;d=d+4|0}}}while(0);i[f+((n<<1)+ -1<<2)+2>>1]=0;i[f+((n<<1)+ -1<<2)>>1]=i[e+6>>1]|0;a=a+1|0}while((a|0)!=3);i[(s[e+60>>2]|0)+((o&65535)<<6)+48>>1]=i[e+64>>1]|0;i[e+64>>1]=o;i[e+56>>1]=(i[e+56>>1]|0)+ -1<<16>>16;c=r;return}function Hv(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0;a=c;c=c+16|0;s[t+16>>2]=s[n+0>>2];s[t+20>>2]=s[n+4>>2];s[t+24>>2]=s[n+8>>2];s[t+28>>2]=s[n+12>>2];s[t+32>>2]=s[r+0>>2];s[t+36>>2]=s[r+4>>2];s[t+40>>2]=s[r+8>>2];s[t+44>>2]=s[r+12>>2];m=s[e+60>>2]|0;g=s[t+12>>2]&65535;$v(e,a+6|0,+f[n>>2],+f[n+4>>2],+f[n+8>>2],0);$v(e,a,+f[r>>2],+f[r+4>>2],+f[r+8>>2],1);T=0;do{N=i[m+(g<<6)+(T<<1)+48>>1]|0;S=i[m+(g<<6)+(T<<1)+54>>1]|0;M=i[a+6+(T<<1)>>1]|0;C=e+(T<<2)+68|0;P=s[C>>2]|0;D=(M&65535)-(u[P+((N&65535)<<2)>>1]|0)|0;_=i[a+(T<<1)>>1]|0;x=(_&65535)-(u[P+((S&65535)<<2)>>1]|0)|0;i[P+((N&65535)<<2)>>1]=M;i[P+((S&65535)<<2)>>1]=_;if((D|0)<0)Jv(e,T,N);e:do if((x|0)>0?(E=s[C>>2]|0,y=s[e+60>>2]|0,b=u[E+((S&65535)<<2)+2>>1]|0,w=i[E+((S&65535)+1<<2)+2>>1]|0,!(w<<16>>16==0)):0){k=1<<T&3;L=y+(b<<6)+(T<<1)+54|0;P=w;A=E+((S&65535)<<2)|0;O=E+((S&65535)+1<<2)|0;while(1){M=i[O>>1]|0;if((u[A>>1]|0)<(M&65535))break e;_=s[e+60>>2]|0;P=P&65535;if((M&1)==0){if(((((u[y+(b<<6)+(k<<1)+54>>1]|0)>=(u[_+(P<<6)+(k<<1)+48>>1]|0)?(u[_+(P<<6)+(k<<1)+54>>1]|0)>=(u[y+(b<<6)+(k<<1)+48>>1]|0):0)?(u[y+(b<<6)+((1<<k&3)<<1)+54>>1]|0)>=(u[_+(P<<6)+((1<<k&3)<<1)+48>>1]|0):0)?(u[_+(P<<6)+((1<<k&3)<<1)+54>>1]|0)>=(u[y+(b<<6)+((1<<k&3)<<1)+48>>1]|0):0)?(h=s[e+92>>2]|0,p=_+((u[A+2>>1]|0)<<6)|0,xD[s[(s[h>>2]|0)+8>>2]&31](h,p,_+(P<<6)|0)|0,h=s[e+96>>2]|0,(h|0)!=0):0)xD[s[(s[h>>2]|0)+8>>2]&31](h,p,_+(P<<6)|0)|0;P=_+(P<<6)+(T<<1)+48|0;i[P>>1]=(i[P>>1]|0)+ -1<<16>>16}else{P=_+(P<<6)+(T<<1)+54|0;i[P>>1]=(i[P>>1]|0)+ -1<<16>>16}i[L>>1]=(i[L>>1]|0)+1<<16>>16;P=u[A>>1]|u[A+2>>1]<<16;_=u[O>>1]|u[O+2>>1]<<16;i[A>>1]=_;i[A+2>>1]=_>>>16;i[O>>1]=P;i[O+2>>1]=P>>>16;P=i[O+6>>1]|0;if(P<<16>>16==0)break;else{A=A+4|0;O=O+4|0}}}while(0);t:do if((D|0)>0?(d=s[C>>2]|0,v=i[d+((N&65535)+1<<2)+2>>1]|0,!(v<<16>>16==0)):0){k=(s[e+60>>2]|0)+((u[d+((N&65535)<<2)+2>>1]|0)<<6)+(T<<1)+48|0;L=1<<T&3;O=v;C=d+((N&65535)<<2)|0;N=d+((N&65535)+1<<2)|0;while(1){M=i[N>>1]|0;if((u[C>>1]|0)<(M&65535))break t;A=s[e+60>>2]|0;O=O&65535;if((M&1)==0){P=A+(O<<6)+(T<<1)+48|0;i[P>>1]=(i[P>>1]|0)+ -1<<16>>16}else{M=u[C+2>>1]|0;if(((((u[A+(M<<6)+(L<<1)+54>>1]|0)>=(u[A+(O<<6)+(L<<1)+48>>1]|0)?(u[A+(O<<6)+(L<<1)+54>>1]|0)>=(u[A+(M<<6)+(L<<1)+48>>1]|0):0)?(u[A+(M<<6)+((1<<L&3)<<1)+54>>1]|0)>=(u[A+(O<<6)+((1<<L&3)<<1)+48>>1]|0):0)?(u[A+(O<<6)+((1<<L&3)<<1)+54>>1]|0)>=(u[A+(M<<6)+((1<<L&3)<<1)+48>>1]|0):0)?(l=s[e+92>>2]|0,yD[s[(s[l>>2]|0)+12>>2]&31](l,A+(M<<6)|0,A+(O<<6)|0,o)|0,l=s[e+96>>2]|0,(l|0)!=0):0)yD[s[(s[l>>2]|0)+12>>2]&31](l,A+(M<<6)|0,A+(O<<6)|0,o)|0;P=A+(O<<6)+(T<<1)+54|0;i[P>>1]=(i[P>>1]|0)+ -1<<16>>16}i[k>>1]=(i[k>>1]|0)+1<<16>>16;O=u[C>>1]|u[C+2>>1]<<16;P=u[N>>1]|u[N+2>>1]<<16;i[C>>1]=P;i[C+2>>1]=P>>>16;i[N>>1]=O;i[N+2>>1]=O>>>16;O=i[N+6>>1]|0;if(O<<16>>16==0)break;else{C=C+4|0;N=N+4|0}}}while(0);if((x|0)<0)Kv(e,T,S,o);T=T+1|0}while((T|0)!=3);l=s[e+108>>2]|0;if((l|0)==0){c=a;return}aD[s[(s[l>>2]|0)+16>>2]&31](l,s[t+60>>2]|0,n,r,o);c=a;return}function Bv(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;e=c;s[n+0>>2]=s[t+16>>2];s[n+4>>2]=s[t+20>>2];s[n+8>>2]=s[t+24>>2];s[n+12>>2]=s[t+28>>2];s[r+0>>2]=s[t+32>>2];s[r+4>>2]=s[t+36>>2];s[r+8>>2]=s[t+40>>2];s[r+12>>2]=s[t+44>>2];c=e;return}function jv(e,t,n,r,o,a){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;a=a|0;var f=0,l=0;f=c;l=s[e+108>>2]|0;if((l|0)!=0){TD[s[(s[l>>2]|0)+24>>2]&7](l,t,n,r,o,a);c=f;return}l=i[e+56>>1]|0;if(!((l&65535)<<1>>>0>1)){c=f;return}o=1;a=2;while(1){n=s[e+68>>2]|0;if(!((i[n+(o<<2)>>1]&1)==0)){DD[s[(s[r>>2]|0)+8>>2]&31](r,(s[e+60>>2]|0)+((u[n+(o<<2)+2>>1]|0)<<6)|0)|0;l=i[e+56>>1]|0}o=a&65535;if(!(o>>>0<((l&65535)<<1|1)>>>0))break;a=a+1<<16>>16}c=f;return}function Fv(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,a=0,l=0,h=0,p=0,d=0;o=c;a=s[e+108>>2]|0;if((a|0)!=0){JD[s[(s[a>>2]|0)+28>>2]&127](a,t,n,r);c=o;return}h=i[e+56>>1]|0;if(!((h&65535)<<1>>>0>1)){c=o;return}p=1;a=2;while(1){d=s[e+68>>2]|0;if(!((i[d+(p<<2)>>1]&1)==0)){l=s[e+60>>2]|0;p=u[d+(p<<2)+2>>1]|0;if(!(+f[t>>2]>+f[l+(p<<6)+32>>2])?!(+f[n>>2]<+f[l+(p<<6)+16>>2]):0)d=1;else d=0;if(!(!(+f[t+8>>2]>+f[l+(p<<6)+40>>2])?!(+f[n+8>>2]<+f[l+(p<<6)+24>>2]):0))d=0;if(!(+f[t+4>>2]>+f[l+(p<<6)+36>>2])?!(+f[n+4>>2]<+f[l+(p<<6)+20>>2]|d^1):0){DD[s[(s[r>>2]|0)+8>>2]&31](r,l+(p<<6)|0)|0;h=i[e+56>>1]|0}}p=a&65535;if(!(p>>>0<((h&65535)<<1|1)>>>0))break;a=a+1<<16>>16}c=o;return}function Iv(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;r=c;c=c+32|0;g=s[e+92>>2]|0;if(!(dD[s[(s[g>>2]|0)+56>>2]&127](g)|0)){c=r;return}n=s[e+92>>2]|0;n=dD[s[(s[n>>2]|0)+28>>2]&127](n)|0;i=s[n+4>>2]|0;if((i|0)>1){Vv(n,0,i+ -1|0);i=s[n+4>>2]|0}d=i-(s[e+104>>2]|0)|0;s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;Xv(n,d,r+16|0);s[e+104>>2]=0;d=s[n+4>>2]|0;if((d|0)>0){o=0;v=0;h=0;i=0;while(1){a=s[n+12>>2]|0;f=a+(i<<4)|0;p=s[f>>2]|0;a=a+(i<<4)+4|0;l=s[a>>2]|0;if((p|0)==(o|0))if((l|0)==(v|0)){l=v;p=o;o=12}else{p=o;o=8}else o=8;e:do if((o|0)==8){o=0;m=p+54|0;g=p+48|0;v=0;do{if((u[m+(v<<1)>>1]|0)<(u[l+48+(v<<1)>>1]|0)){o=12;break e}if((u[l+54+(v<<1)>>1]|0)<(u[g+(v<<1)>>1]|0)){o=12;break e}v=v+1|0}while((v|0)<3)}while(0);if((o|0)==12){h=s[e+92>>2]|0;WD[s[(s[h>>2]|0)+32>>2]&127](h,f,t);s[f>>2]=0;s[a>>2]=0;h=(s[e+104>>2]|0)+1|0;s[e+104>>2]=h;s[3808]=(s[3808]|0)+ -1;d=s[n+4>>2]|0}i=i+1|0;if((i|0)>=(d|0))break;else{o=p;v=l}}if((d|0)>1){Vv(n,0,d+ -1|0);h=s[e+104>>2]|0;d=s[n+4>>2]|0}}else h=0;g=d-h|0;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;Xv(n,g,r);s[e+104>>2]=0;c=r;return}function qv(e){e=e|0;return s[e+92>>2]|0}function Rv(e){e=e|0;return s[e+92>>2]|0}function Uv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;s[t+0>>2]=s[e+8>>2];s[t+4>>2]=s[e+12>>2];s[t+8>>2]=s[e+16>>2];s[t+12>>2]=s[e+20>>2];s[n+0>>2]=s[e+24>>2];s[n+4>>2]=s[e+28>>2];s[n+8>>2]=s[e+32>>2];s[n+12>>2]=s[e+36>>2];c=r;return}function zv(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;t=c;if((i[e+56>>1]|0)!=0){c=t;return}i[e+64>>1]=1;r=i[e+58>>1]|0;n=s[e+60>>2]|0;if((r&65535)>1){r=1;o=1;while(1){i[n+(r<<6)+48>>1]=r+1;o=o+1<<16>>16;r=i[e+58>>1]|0;if((o&65535)<(r&65535))r=o&65535;else break}}i[n+((r&65535)+ -1<<6)+48>>1]=0;c=t;return}function Wv(e){e=e|0;return}function Xv(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0;i=c;o=s[e+4>>2]|0;if(!((o|0)<=(t|0)&(o|0)<(t|0))){s[e+4>>2]=t;c=i;return}if((s[e+8>>2]|0)<(t|0)){if((t|0)==0){u=0;a=o}else{s[5004]=(s[5004]|0)+1;u=cM((t<<4|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+4>>2]|0}if((a|0)>0){f=0;do{l=s[e+12>>2]|0;s[u+(f<<4)>>2]=s[l+(f<<4)>>2];s[u+(f<<4)+4>>2]=s[l+(f<<4)+4>>2];s[u+(f<<4)+8>>2]=s[l+(f<<4)+8>>2];s[u+(f<<4)+12>>2]=s[l+(f<<4)+12>>2];f=f+1|0}while((f|0)!=(a|0))}a=s[e+12>>2]|0;if((a|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=u;s[e+8>>2]=t;u=e+12|0}else u=e+12|0;do{l=s[u>>2]|0;s[l+(o<<4)>>2]=s[n>>2];s[l+(o<<4)+4>>2]=s[n+4>>2];s[l+(o<<4)+8>>2]=s[n+8>>2];s[l+(o<<4)+12>>2]=s[n+12>>2];o=o+1|0}while((o|0)!=(t|0));s[e+4>>2]=t;c=i;return}function Vv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0;r=c;while(1){a=(t+n|0)/2|0;o=s[e+12>>2]|0;u=s[o+(a<<4)>>2]|0;i=s[o+(a<<4)+4>>2]|0;a=s[o+(a<<4)+8>>2]|0;f=t;d=n;while(1){e:while(1){h=s[o+(f<<4)>>2]|0;if((h|0)==0)m=-1;else m=s[h+12>>2]|0;if((u|0)==0)p=-1;else p=s[u+12>>2]|0;l=s[o+(f<<4)+4>>2]|0;if((l|0)==0)g=-1;else g=s[l+12>>2]|0;if((i|0)==0)v=-1;else v=s[i+12>>2]|0;do if((m|0)<=(p|0)){p=(h|0)==(u|0)&(g|0)>(v|0);if(p|(h|0)==(u|0)^1)if(p)break;else break e;if((l|0)!=(i|0))break e;if(!((s[o+(f<<4)+8>>2]|0)>>>0>a>>>0))break e}while(0);f=f+1|0}t:do if((u|0)==0)while(1){v=s[o+(d<<4)>>2]|0;if((v|0)==0)g=-1;else g=s[v+12>>2]|0;if((i|0)==0)y=-1;else y=s[i+12>>2]|0;p=s[o+(d<<4)+4>>2]|0;if((p|0)==0)m=-1;else m=s[p+12>>2]|0;do if(!((g|0)<-1)){m=(v|0)==0&(y|0)>(m|0);if(m|(v|0)==0^1)if(m)break;else break t;if((i|0)!=(p|0))break t;if(!(a>>>0>(s[o+(d<<4)+8>>2]|0)>>>0))break t}while(0);d=d+ -1|0}else{p=s[u+12>>2]|0;m=d;while(1){v=s[o+(m<<4)>>2]|0;if((v|0)==0)b=-1;else b=s[v+12>>2]|0;if((i|0)==0)g=-1;else g=s[i+12>>2]|0;d=s[o+(m<<4)+4>>2]|0;if((d|0)==0)y=-1;else y=s[d+12>>2]|0;do if((p|0)<=(b|0)){g=(u|0)==(v|0)&(g|0)>(y|0);if(g|(u|0)==(v|0)^1)if(g)break;else{d=m;break t}if((i|0)!=(d|0)){d=m;break t}if(!(a>>>0>(s[o+(m<<4)+8>>2]|0)>>>0)){d=m;break t}}while(0);m=m+ -1|0}}while(0);if((f|0)<=(d|0)){b=o+(f<<4)|0;g=s[o+(f<<4)+8>>2]|0;y=s[o+(f<<4)+12>>2]|0;m=o+(d<<4)|0;s[b+0>>2]=s[m+0>>2];s[b+4>>2]=s[m+4>>2];s[b+8>>2]=s[m+8>>2];s[b+12>>2]=s[m+12>>2];b=s[e+12>>2]|0;s[b+(d<<4)>>2]=h;s[b+(d<<4)+4>>2]=l;s[b+(d<<4)+8>>2]=g;s[b+(d<<4)+12>>2]=y;f=f+1|0;d=d+ -1|0}if((f|0)>(d|0))break;o=s[e+12>>2]|0}if((d|0)>(t|0))Vv(e,t,d);if((f|0)<(n|0))t=f;else break}c=r;return}function $v(e,t,n,r,s,o){e=e|0;t=t|0;n=+n;r=+r;s=+s;o=o|0;var u=0,a=0;u=c;n=(n- +f[e+8>>2])*+f[e+40>>2];r=(r- +f[e+12>>2])*+f[e+44>>2];s=(s- +f[e+16>>2])*+f[e+48>>2];do if(!(n<=0)){a=i[e+6>>1]|0;if(!(n>=+(a&65535|0))){a=i[e+4>>1]&(~~n&65535)&65535|o;break}else{a=i[e+4>>1]&a&65535|o;break}}else a=o;while(0);i[t>>1]=a;do if(!(r<=0)){a=i[e+6>>1]|0;if(!(r>=+(a&65535|0))){a=i[e+4>>1]&(~~r&65535)&65535|o;break}else{a=i[e+4>>1]&a&65535|o;break}}else a=o;while(0);i[t+2>>1]=a;if(s<=0){o=o&65535;a=t+4|0;i[a>>1]=o;c=u;return}a=i[e+6>>1]|0;if(!(s>=+(a&65535|0))){o=i[e+4>>1]&(~~s&65535)&65535|o;o=o&65535;a=t+4|0;i[a>>1]=o;c=u;return}else{o=i[e+4>>1]&a&65535|o;o=o&65535;a=t+4|0;i[a>>1]=o;c=u;return}}function Jv(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0;l=c;v=s[e+(t<<2)+68>>2]|0;r=s[e+60>>2]|0;o=u[v+((n&65535)<<2)+2>>1]|0;p=i[v+((n&65535)+ -1<<2)>>1]|0;if(!((u[v+((n&65535)<<2)>>1]|0)<(p&65535))){c=l;return}h=r;d=v+((n&65535)<<2)|0;v=v+((n&65535)+ -1<<2)|0;while(1){n=u[v+2>>1]|0;if((p&1)==0){n=h+(n<<6)+(t<<1)+48|0;i[n>>1]=(i[n>>1]|0)+1<<16>>16}else{if(((((u[r+(o<<6)+((1<<t&3)<<1)+54>>1]|0)>=(u[h+(n<<6)+((1<<t&3)<<1)+48>>1]|0)?(u[h+(n<<6)+((1<<t&3)<<1)+54>>1]|0)>=(u[r+(o<<6)+((1<<t&3)<<1)+48>>1]|0):0)?(u[r+(o<<6)+((1<<(1<<t&3)&3)<<1)+54>>1]|0)>=(u[h+(n<<6)+((1<<(1<<t&3)&3)<<1)+48>>1]|0):0)?(u[h+(n<<6)+((1<<(1<<t&3)&3)<<1)+54>>1]|0)>=(u[r+(o<<6)+((1<<(1<<t&3)&3)<<1)+48>>1]|0):0)?(a=s[e+92>>2]|0,f=h+(n<<6)|0,xD[s[(s[a>>2]|0)+8>>2]&31](a,r+(o<<6)|0,f)|0,a=s[e+96>>2]|0,(a|0)!=0):0)xD[s[(s[a>>2]|0)+8>>2]&31](a,r+(o<<6)|0,f)|0;n=h+(n<<6)+(t<<1)+54|0;i[n>>1]=(i[n>>1]|0)+1<<16>>16}i[r+(o<<6)+(t<<1)+48>>1]=(i[r+(o<<6)+(t<<1)+48>>1]|0)+ -1<<16>>16;p=u[d>>1]|u[d+2>>1]<<16;n=u[v>>1]|u[v+2>>1]<<16;i[d>>1]=n;i[d+2>>1]=n>>>16;i[v>>1]=p;i[v+2>>1]=p>>>16;d=d+ -4|0;v=v+ -4|0;p=i[v>>1]|0;if(!((u[d>>1]|0)<(p&65535)))break;h=s[e+60>>2]|0}c=l;return}function Kv(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0;a=c;m=s[e+(t<<2)+68>>2]|0;d=i[m+((n&65535)+ -1<<2)>>1]|0;if(!((u[m+((n&65535)<<2)>>1]|0)<(d&65535))){c=a;return}p=s[e+60>>2]|0;o=p+((u[m+((n&65535)<<2)+2>>1]|0)<<6)+(t<<1)+54|0;v=m+((n&65535)<<2)|0;m=m+((n&65535)+ -1<<2)|0;while(1){n=u[m+2>>1]|0;if((d&1)==0){d=u[v+2>>1]|0;if(((((u[p+(d<<6)+((1<<t&3)<<1)+54>>1]|0)>=(u[p+(n<<6)+((1<<t&3)<<1)+48>>1]|0)?(u[p+(n<<6)+((1<<t&3)<<1)+54>>1]|0)>=(u[p+(d<<6)+((1<<t&3)<<1)+48>>1]|0):0)?(u[p+(d<<6)+((1<<(1<<t&3)&3)<<1)+54>>1]|0)>=(u[p+(n<<6)+((1<<(1<<t&3)&3)<<1)+48>>1]|0):0)?(u[p+(n<<6)+((1<<(1<<t&3)&3)<<1)+54>>1]|0)>=(u[p+(d<<6)+((1<<(1<<t&3)&3)<<1)+48>>1]|0):0)?(l=s[e+92>>2]|0,h=p+(d<<6)|0,f=p+(n<<6)|0,yD[s[(s[l>>2]|0)+12>>2]&31](l,h,f,r)|0,l=s[e+96>>2]|0,(l|0)!=0):0)yD[s[(s[l>>2]|0)+12>>2]&31](l,h,f,r)|0;n=p+(n<<6)+(t<<1)+48|0;i[n>>1]=(i[n>>1]|0)+1<<16>>16}else{n=p+(n<<6)+(t<<1)+54|0;i[n>>1]=(i[n>>1]|0)+1<<16>>16}i[o>>1]=(i[o>>1]|0)+ -1<<16>>16;d=u[v>>1]|u[v+2>>1]<<16;n=u[m>>1]|u[m+2>>1]<<16;i[v>>1]=n;i[v+2>>1]=n>>>16;i[m>>1]=d;i[m+2>>1]=d>>>16;v=v+ -4|0;m=m+ -4|0;d=i[m>>1]|0;if(!((u[v>>1]|0)<(d&65535)))break;p=s[e+60>>2]|0}c=a;return}function Qv(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=5216;if((s[e+108>>2]|0)!=0){n=s[e+112>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+112>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+108>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+108>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}}n=s[e+88>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+84>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+80>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+60>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((r[e+100>>0]|0)==0){c=t;return}n=s[e+92>>2]|0;lD[s[s[n>>2]>>2]&511](n);e=s[e+92>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Gv(e){e=e|0;var t=0;t=c;Qv(e);c=t;return}function Yv(e){e=e|0;var t=0;t=c;Qv(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Zv(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=5280;n=s[e+16>>2]|0;if((n|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;c=t;return}function em(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=5280;n=s[e+16>>2]|0;if((n|0)!=0?(r[e+20>>0]|0)!=0:0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}hM(e);c=t;return}function tm(e,t,n){e=e|0;t=t|0;n=n|0;return 0}function nm(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return 0}function rm(e,t,n){e=e|0;t=t|0;n=n|0;return}function im(e){e=e|0;return s[e+16>>2]|0}function sm(e){e=e|0;return s[e+16>>2]|0}function om(e){e=e|0;return e+4|0}function um(e,t,n){e=e|0;t=t|0;n=n|0;return}function am(e){e=e|0;return 0}function fm(e,t,n){e=e|0;t=t|0;n=n|0;return}function lm(e,t){e=e|0;t=t|0;return}function cm(e,t,n){e=e|0;t=t|0;n=n|0;return}function hm(e,t,n){e=e|0;t=t|0;n=n|0;return 0}function pm(e){e=e|0;return 1}function dm(e,t){e=e|0;t=t|0;return}function vm(e,t){e=e|0;t=t|0;return}function mm(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;i=c;a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=a+ +f[e+28>>2];h=a+ +f[e+32>>2];a=a+ +f[e+36>>2];S=+W(+(+f[t>>2]));E=+W(+(+f[t+4>>2]));w=+W(+(+f[t+8>>2]));y=+W(+(+f[t+16>>2]));g=+W(+(+f[t+20>>2]));m=+W(+(+f[t+24>>2]));p=+W(+(+f[t+32>>2]));l=+W(+(+f[t+36>>2]));u=+W(+(+f[t+40>>2]));b=+f[t+48>>2];v=+f[t+52>>2];o=+f[t+56>>2];f[n>>2]=b-(d*S+h*E+a*w);f[n+4>>2]=v-(d*y+h*g+a*m);f[n+8>>2]=o-(d*p+h*l+a*u);f[n+12>>2]=0;f[r>>2]=d*S+h*E+a*w+b;f[r+4>>2]=d*y+h*g+a*m+v;f[r+8>>2]=d*p+h*l+a*u+o;f[r+12>>2]=0;c=i;return}function gm(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;a=+f[e+28>>2];o=+f[e+32>>2];l=+f[e+36>>2];u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);l=(l+ +CD[s[(s[e>>2]|0)+48>>2]&15](e))*2;f[n>>2]=t/12*((o+i)*2*(o+i)*2+l*l);f[n+4>>2]=t/12*((a+u)*2*(a+u)*2+l*l);f[n+8>>2]=t/12*((a+u)*2*(a+u)*2+(o+i)*2*(o+i)*2);f[n+12>>2]=0;c=r;return}function ym(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)==0){c=t;return}lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function bm(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)!=0){lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function wm(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;h=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=(h+ +f[e+28>>2])/+f[e+12>>2];l=(u+ +f[e+32>>2])/+f[e+16>>2];o=(r+ +f[e+36>>2])/+f[e+20>>2];p=+W(+(+f[t>>2]));a=+W(+(+f[t+4>>2]));i=+W(+(+f[t+8>>2]));f[e+12>>2]=p;f[e+16>>2]=a;f[e+20>>2]=i;f[e+24>>2]=0;f[e+28>>2]=d*p-h;f[e+32>>2]=l*a-u;f[e+36>>2]=o*i-r;f[e+40>>2]=0;c=n;return}function Em(e){e=e|0;return 5608}function Sm(e,t){e=e|0;t=+t;var n=0,r=0,i=0,o=0,u=0,a=0;n=c;u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=u+ +f[e+28>>2];i=i+ +f[e+32>>2];a=a+ +f[e+36>>2];f[e+44>>2]=t;o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);t=a- +CD[s[(s[e>>2]|0)+48>>2]&15](e);f[e+28>>2]=u-o;f[e+32>>2]=i-r;f[e+36>>2]=t;f[e+40>>2]=0;c=n;return}function xm(e){e=e|0;return+(+f[e+44>>2])}function Tm(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;a=+f[t+28>>2];l=+f[t+32>>2];i=+f[t+36>>2];u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);o=+CD[s[(s[t>>2]|0)+48>>2]&15](t);i=i+ +CD[s[(s[t>>2]|0)+48>>2]&15](t);o=+f[n+4>>2]>=0?l+o:-(l+o);i=+f[n+8>>2]>=0?i:-i;f[e>>2]=+f[n>>2]>=0?a+u:-(a+u);f[e+4>>2]=o;f[e+8>>2]=i;f[e+12>>2]=0;c=r;return}function Nm(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0;s=+f[t+28>>2];i=+f[t+32>>2];i=+f[n+4>>2]>=0?i:-i;r=+f[t+36>>2];r=+f[n+8>>2]>=0?r:-r;f[e>>2]=+f[n>>2]>=0?s:-s;f[e+4>>2]=i;f[e+8>>2]=r;f[e+12>>2]=0;return}function Cm(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0;i=c;if((r|0)<=0){c=i;return}s=0;do{a=+f[e+28>>2];u=+f[e+32>>2];u=+f[t+(s<<4)+4>>2]>=0?u:-u;o=+f[e+36>>2];o=+f[t+(s<<4)+8>>2]>=0?o:-o;f[n+(s<<4)>>2]=+f[t+(s<<4)>>2]>=0?a:-a;f[n+(s<<4)+4>>2]=u;f[n+(s<<4)+8>>2]=o;f[n+(s<<4)+12>>2]=0;s=s+1|0}while((s|0)!=(r|0));c=i;return}function km(e){e=e|0;return 6}function Lm(e,t,n){e=e|0;t=t|0;n=n|0;e=c;switch(t|0){case 3:{f[n>>2]=0;f[n+4>>2]=-1;f[n+8>>2]=0;f[n+12>>2]=0;c=e;return};case 2:{f[n>>2]=0;f[n+4>>2]=1;f[n+8>>2]=0;f[n+12>>2]=0;c=e;return};case 1:{f[n>>2]=-1;f[n+4>>2]=0;f[n+8>>2]=0;f[n+12>>2]=0;c=e;return};case 4:{f[n>>2]=0;f[n+4>>2]=0;f[n+8>>2]=1;f[n+12>>2]=0;c=e;return};case 0:{f[n>>2]=1;f[n+4>>2]=0;f[n+8>>2]=0;f[n+12>>2]=0;c=e;return};case 5:{f[n>>2]=0;f[n+4>>2]=0;f[n+8>>2]=-1;f[n+12>>2]=0;c=e;return};default:{c=e;return}}}function Am(e){e=e|0;return 8}function Om(e){e=e|0;return 12}function Mm(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;i=c;do switch(t|0){case 7:{o=3;break};case 1:{o=0;t=2;break};case 6:{o=2;break};case 3:{o=2;break};case 0:{o=0;t=1;break};case 11:{o=6;t=7;break};case 8:{o=4;t=5;break};case 10:{o=5;t=7;break};case 4:{o=0;break};case 2:{o=1;t=3;break};case 9:{o=4;t=6;break};case 5:{o=1;break};default:{o=0;t=0}}while(0);WD[s[(s[e>>2]|0)+108>>2]&127](e,o,n);WD[s[(s[e>>2]|0)+108>>2]&127](e,t,r);c=i;return}function _m(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;l=+f[e+28>>2];u=+f[e+32>>2];i=+f[e+36>>2];a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=i+ +CD[s[(s[e>>2]|0)+48>>2]&15](e);f[n>>2]=+(t&1^1|0)*(l+a)- +(t&1|0)*(l+a);f[n+4>>2]=+(t>>>1&1^1|0)*(u+o)- +(t>>>1&1|0)*(u+o);f[n+8>>2]=+(t>>>2&1^1|0)*i- +(t>>>2&1|0)*i;f[n+12>>2]=0;c=r;return}function Dm(e){e=e|0;return 6}function Pm(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0;i=c;c=c+48|0;WD[s[(s[e>>2]|0)+124>>2]&127](e,i+32|0,r);a=+f[i+32>>2];u=+f[i+36>>2];o=+f[i+40>>2];f[t>>2]=a;f[t+4>>2]=u;f[t+8>>2]=o;f[t+12>>2]=0;r=s[(s[e>>2]|0)+64>>2]|0;f[i>>2]=-a;f[i+4>>2]=-u;f[i+8>>2]=-o;f[i+12>>2]=0;WD[r&127](i+16|0,e,i);s[n+0>>2]=s[i+16>>2];s[n+4>>2]=s[i+20>>2];s[n+8>>2]=s[i+24>>2];s[n+12>>2]=s[i+28>>2];c=i;return}function Hm(e,t,n){e=e|0;t=t|0;n=+n;var r=0,i=0,s=0,o=0,u=0,a=0,l=0;r=c;a=+f[e+28>>2];i=+f[e+32>>2];u=+f[e+36>>2];l=+f[t>>2];if((((l<=a+n?l>=-a-n:0)?(o=+f[t+4>>2],o<=i+n):0)?o>=-i-n:0)?(s=+f[t+8>>2],s<=u+n):0)t=s>=-u-n;else t=0;c=r;return t|0}function Bm(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0;r=c;s=+f[e+28>>2];i=+f[e+32>>2];o=+f[e+36>>2];switch(n|0){case 2:{f[t>>2]=0;f[t+4>>2]=1;f[t+8>>2]=0;f[t+12>>2]=-i;c=r;return};case 3:{f[t>>2]=0;f[t+4>>2]=-1;f[t+8>>2]=0;f[t+12>>2]=-i;c=r;return};case 1:{f[t>>2]=-1;f[t+4>>2]=0;f[t+8>>2]=0;f[t+12>>2]=-s;c=r;return};case 0:{f[t>>2]=1;f[t+4>>2]=0;f[t+8>>2]=0;f[t+12>>2]=-s;c=r;return};case 4:{f[t>>2]=0;f[t+4>>2]=0;f[t+8>>2]=1;f[t+12>>2]=-o;c=r;return};case 5:{f[t>>2]=0;f[t+4>>2]=0;f[t+8>>2]=-1;f[t+12>>2]=-o;c=r;return};default:{c=r;return}}}function jm(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;o=c;c=c+48|0;s[e+8>>2]=0;f[e+12>>2]=0;s[e>>2]=17416;s[e+48>>2]=t;s[e+4>>2]=21;if(dD[s[(s[t>>2]|0)+40>>2]&127](t)|0)WD[s[(s[t>>2]|0)+48>>2]&127](t,e+16|0,e+32|0);else{s[o+32>>2]=0;s[o+36>>2]=0;s[o+40>>2]=0;s[o+44>>2]=0;f[o+32>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](o+16|0,e,o+32|0);f[e+32>>2]=+f[o+16>>2]+ +f[e+12>>2];f[o+32>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](o,e,o+32|0);s[o+16>>2]=s[o+0>>2];s[o+20>>2]=s[o+4>>2];s[o+24>>2]=s[o+8>>2];s[o+28>>2]=s[o+12>>2];f[e+16>>2]=+f[o+16>>2]- +f[e+12>>2];s[o+32>>2]=0;s[o+36>>2]=0;s[o+40>>2]=0;s[o+44>>2]=0;f[o+36>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](o+16|0,e,o+32|0);f[e+36>>2]=+f[o+20>>2]+ +f[e+12>>2];f[o+36>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](o,e,o+32|0);s[o+16>>2]=s[o+0>>2];s[o+20>>2]=s[o+4>>2];s[o+24>>2]=s[o+8>>2];s[o+28>>2]=s[o+12>>2];f[e+20>>2]=+f[o+20>>2]- +f[e+12>>2];s[o+32>>2]=0;s[o+36>>2]=0;s[o+40>>2]=0;s[o+44>>2]=0;f[o+40>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](o+16|0,e,o+32|0);f[e+40>>2]=+f[o+24>>2]+ +f[e+12>>2];f[o+40>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](o,e,o+32|0);s[o+16>>2]=s[o+0>>2];s[o+20>>2]=s[o+4>>2];s[o+24>>2]=s[o+8>>2];s[o+28>>2]=s[o+12>>2];f[e+24>>2]=+f[o+24>>2]- +f[e+12>>2]}s[e>>2]=5624;s[e+52>>2]=0;s[e+56>>2]=0;r[e+60>>0]=n&1;r[e+61>>0]=0;s[e+4>>2]=21;if(!i){c=o;return}s[5004]=(s[5004]|0)+1;n=cM(191)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[n+52>>2]=282;r[n+60>>0]=0;r[n+80>>0]=1;s[n+76>>2]=0;s[n+68>>2]=0;s[n+72>>2]=0;r[n+100>>0]=1;s[n+96>>2]=0;s[n+88>>2]=0;s[n+92>>2]=0;r[n+120>>0]=1;s[n+116>>2]=0;s[n+108>>2]=0;s[n+112>>2]=0;r[n+140>>0]=1;s[n+136>>2]=0;s[n+128>>2]=0;s[n+132>>2]=0;s[n+144>>2]=0;r[n+164>>0]=1;s[n+160>>2]=0;s[n+152>>2]=0;s[n+156>>2]=0;s[n+168>>2]=0;f[n+4>>2]=-3.4028234663852886e38;f[n+8>>2]=-3.4028234663852886e38;f[n+12>>2]=-3.4028234663852886e38;f[n+16>>2]=0;f[n+20>>2]=3.4028234663852886e38;f[n+24>>2]=3.4028234663852886e38;f[n+28>>2]=3.4028234663852886e38;f[n+32>>2]=0;s[n>>2]=14880;s[e+52>>2]=n;yO(n,s[e+48>>2]|0,(r[e+60>>0]|0)!=0,e+16|0,e+32|0);r[e+61>>0]=1;c=o;return}function Fm(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=5624;if((r[e+61>>0]|0)!=0){n=s[e+52>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Im(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=5624;if((r[e+61>>0]|0)==0){c=t;return}n=s[e+52>>2]|0;lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function qm(e,t,n,o){e=e|0;t=t|0;n=n|0;o=o|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0;a=c;c=c+80|0;S=s[e+48>>2]|0;s[a>>2]=5808;s[a+4>>2]=S;s[a+8>>2]=t;t=s[e+52>>2]|0;if((r[t+60>>0]|0)==0){p=s[t+56>>2]|0;e:do if((p|0)>0){h=0;l=s[t+96>>2]|0;e=1;while(1){if(!(+f[n>>2]>+f[l+16>>2])?!(+f[o>>2]<+f[l>>2]):0)g=1;else g=0;if(!(!(+f[n+8>>2]>+f[l+24>>2])?!(+f[o+8>>2]<+f[l+8>>2]):0))g=0;if(!(+f[n+4>>2]>+f[l+20>>2])?!(+f[o+4>>2]<+f[l+4>>2]):0){m=s[l+32>>2]|0;if((m|0)==-1&g){WD[s[(s[a>>2]|0)+8>>2]&127](a,s[l+36>>2]|0,s[l+40>>2]|0);p=s[t+56>>2]|0;d=44}else{v=(m|0)==-1;d=43}}else{m=s[l+32>>2]|0;v=(m|0)==-1;g=0;d=43}if((d|0)==43){d=0;if(g|v)d=44;else{h=m+h|0;l=l+(m<<6)|0}}if((d|0)==44){h=h+1|0;l=l+64|0}if((h|0)>=(p|0))break e;e=e+1|0}}else e=0;while(0);if((s[4028]|0)>=(e|0)){c=a;return}s[4028]=e;c=a;return}N=+f[n>>2];A=+f[n+4>>2];D=+f[n+8>>2];_=+f[t+4>>2];N=N<_?_:N;L=+f[t+8>>2];A=A<L?L:A;T=+f[t+12>>2];D=D<T?T:D;P=+f[t+20>>2];O=+f[t+24>>2];C=+f[t+28>>2];M=+f[t+36>>2];k=+f[t+40>>2];x=+f[t+44>>2];n=~~(((P<N?P:N)-_)*M)&65534;i[a+66>>1]=n;l=~~(((O<A?O:A)-L)*k)&65534;i[a+68>>1]=l;e=~~(((C<D?C:D)-T)*x)&65534;i[a+70>>1]=e;D=+f[o>>2];A=+f[o+4>>2];N=+f[o+8>>2];D=D<_?_:D;A=A<L?L:A;N=N<T?T:N;o=(~~(((P<D?P:D)-_)*M+1)&65535|1)&65535;i[a+60>>1]=o;p=(~~(((O<A?O:A)-L)*k+1)&65535|1)&65535;i[a+62>>1]=p;h=(~~(((C<N?C:N)-T)*x+1)&65535|1)&65535;i[a+64>>1]=h;d=s[t+144>>2]|0;if((d|0)==1){if((s[t+152>>2]|0)<=0){c=a;return}d=0;do{m=s[t+160>>2]|0;if(((o&65535)>=(u[m+(d<<5)>>1]|0)?(n&65535)<=(u[m+(d<<5)+6>>1]|0):0)&(e&65535)<=(u[m+(d<<5)+10>>1]|0)&(h&65535)>=(u[m+(d<<5)+4>>1]|0)&(l&65535)<=(u[m+(d<<5)+8>>1]|0)&(p&65535)>=(u[m+(d<<5)+2>>1]|0)){v=s[m+(d<<5)+12>>2]|0;g=s[m+(d<<5)+16>>2]|0;t:do if((g|0)>0){b=v;y=(s[t+136>>2]|0)+(v<<4)|0;m=1;while(1){w=((o&65535)>=(u[y>>1]|0)?(n&65535)<=(u[y+6>>1]|0):0)&(e&65535)<=(u[y+10>>1]|0)&(h&65535)>=(u[y+4>>1]|0)&(l&65535)<=(u[y+8>>1]|0)&(p&65535)>=(u[y+2>>1]|0);E=y+12|0;S=s[E>>2]|0;if((S|0)>-1&w)WD[s[(s[a>>2]|0)+8>>2]&127](a,S>>21,S&2097151);if(w|(S|0)>-1){b=b+1|0;y=y+16|0}else{S=s[E>>2]|0;b=b-S|0;y=y+(0-S<<4)|0}if((b|0)>=(g+v|0))break t;m=m+1|0}}else m=0;while(0);if((s[4028]|0)<(m|0))s[4028]=m}d=d+1|0}while((d|0)<(s[t+152>>2]|0));c=a;return}else if((d|0)==2){RS(s[t+136>>2]|0,a,a+66|0,a+60|0);c=a;return}else if((d|0)==0){d=s[t+56>>2]|0;n:do if((d|0)>0){v=0;m=s[t+136>>2]|0;t=1;while(1){y=((o&65535)>=(u[m>>1]|0)?(n&65535)<=(u[m+6>>1]|0):0)&(e&65535)<=(u[m+10>>1]|0)&(h&65535)>=(u[m+4>>1]|0)&(l&65535)<=(u[m+8>>1]|0)&(p&65535)>=(u[m+2>>1]|0);g=m+12|0;b=s[g>>2]|0;if((b|0)>-1&y)WD[s[(s[a>>2]|0)+8>>2]&127](a,b>>21,b&2097151);if(y|(b|0)>-1){v=v+1|0;m=m+16|0}else{S=s[g>>2]|0;v=v-S|0;m=m+(0-S<<4)|0}if((v|0)>=(d|0))break n;t=t+1|0}}else t=0;while(0);if((s[4028]|0)>=(t|0)){c=a;return}s[4028]=t;c=a;return}else{c=a;return}}function Rm(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0;n=c;l=dD[s[(s[e>>2]|0)+28>>2]&127](e)|0;a=+f[l>>2]- +f[t>>2];u=+f[l+4>>2]- +f[t+4>>2];o=+f[l+8>>2]- +f[t+8>>2];if(!(a*a+u*u+o*o>1.1920928955078125e-7)){c=n;return}fT(e,t);if((r[e+61>>0]|0)!=0?(i=s[e+52>>2]|0,lD[s[s[i>>2]>>2]&511](i),i=s[e+52>>2]|0,(i|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[5004]=(s[5004]|0)+1;i=cM(191)|0;if((i|0)==0)i=0;else{s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}s[i+52>>2]=282;r[i+60>>0]=0;r[i+80>>0]=1;s[i+76>>2]=0;s[i+68>>2]=0;s[i+72>>2]=0;r[i+100>>0]=1;s[i+96>>2]=0;s[i+88>>2]=0;s[i+92>>2]=0;r[i+120>>0]=1;s[i+116>>2]=0;s[i+108>>2]=0;s[i+112>>2]=0;r[i+140>>0]=1;s[i+136>>2]=0;s[i+128>>2]=0;s[i+132>>2]=0;s[i+144>>2]=0;r[i+164>>0]=1;s[i+160>>2]=0;s[i+152>>2]=0;s[i+156>>2]=0;s[i+168>>2]=0;f[i+4>>2]=-3.4028234663852886e38;f[i+8>>2]=-3.4028234663852886e38;f[i+12>>2]=-3.4028234663852886e38;f[i+16>>2]=0;f[i+20>>2]=3.4028234663852886e38;f[i+24>>2]=3.4028234663852886e38;f[i+28>>2]=3.4028234663852886e38;f[i+32>>2]=0;s[i>>2]=14880;s[e+52>>2]=i;yO(i,s[e+48>>2]|0,(r[e+60>>0]|0)!=0,e+16|0,e+32|0);r[e+61>>0]=1;c=n;return}function Um(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0;r=c;o=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;u=DD[s[(s[n>>2]|0)+28>>2]&31](n,o)|0;s[t>>2]=u;if((u|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,o);s[t+4>>2]=s[e+4>>2];u=s[e+48>>2]|0;xD[s[(s[u>>2]|0)+56>>2]&31](u,t+12|0,n)|0;f[t+52>>2]=+f[e+12>>2];do if((s[e+52>>2]|0)!=0?((dD[s[(s[n>>2]|0)+52>>2]&127](n)|0)&1|0)==0:0){o=DD[s[(s[n>>2]|0)+24>>2]&31](n,s[e+52>>2]|0)|0;if((o|0)==0){s[t+40>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+52>>2]|0)|0;s[t+44>>2]=0;o=s[e+52>>2]|0;o=dD[s[(s[o>>2]|0)+12>>2]&127](o)|0;o=xD[s[(s[n>>2]|0)+16>>2]&31](n,o,1)|0;u=s[e+52>>2]|0;u=xD[s[(s[u>>2]|0)+16>>2]&31](u,s[o+8>>2]|0,n)|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,o,u,1213612625,s[e+52>>2]|0);break}else{s[t+40>>2]=o;s[t+44>>2]=0;break}}else i=8;while(0);if((i|0)==8){s[t+40>>2]=0;s[t+44>>2]=0}if((s[e+56>>2]|0)!=0?((dD[s[(s[n>>2]|0)+52>>2]&127](n)|0)&2|0)==0:0){i=DD[s[(s[n>>2]|0)+24>>2]&31](n,s[e+56>>2]|0)|0;if((i|0)==0){s[t+48>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+56>>2]|0)|0;o=s[e+56>>2]|0;o=dD[s[(s[o>>2]|0)+8>>2]&127](o)|0;o=xD[s[(s[n>>2]|0)+16>>2]&31](n,o,1)|0;u=s[e+56>>2]|0;u=xD[s[(s[u>>2]|0)+12>>2]&31](u,s[o+8>>2]|0,n)|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,o,u,1346456916,s[e+56>>2]|0);c=r;return 5712}else{s[t+48>>2]=i;c=r;return 5712}}s[t+48>>2]=0;c=r;return 5712}function zm(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;r=s[e+52>>2]|0;if((r|0)==0){c=n;return}i=dD[s[(s[r>>2]|0)+12>>2]&127](r)|0;i=xD[s[(s[t>>2]|0)+16>>2]&31](t,i,1)|0;r=s[e+52>>2]|0;r=xD[s[(s[r>>2]|0)+16>>2]&31](r,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,r,1213612625,s[e+52>>2]|0);c=n;return}function Wm(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;r=s[e+56>>2]|0;if((r|0)==0){c=n;return}i=dD[s[(s[r>>2]|0)+8>>2]&127](r)|0;i=xD[s[(s[t>>2]|0)+16>>2]&31](t,i,1)|0;r=s[e+56>>2]|0;r=xD[s[(s[r>>2]|0)+12>>2]&31](r,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,r,1346456916,s[e+56>>2]|0);c=n;return}function Xm(e){e=e|0;return 5784}function Vm(e,t){e=e|0;t=+t;f[e+12>>2]=t;return}function $m(e){e=e|0;return+(+f[e+12>>2])}function Jm(e){e=e|0;return 60}function Km(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);c=r;return}function Qm(e){e=e|0;return}function Gm(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Ym(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,a=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;d=c;c=c+32|0;a=s[e+4>>2]|0;_D[s[(s[a>>2]|0)+16>>2]&3](a,d+28|0,d+24|0,d+20|0,d+16|0,d+12|0,d+8|0,d+4|0,d,t);a=s[d+12>>2]|0;h=rt(s[d+8>>2]|0,n)|0;i=s[e+4>>2]|0;p=s[d>>2]|0;r=2;while(1){if((p|0)==2)m=s[a+h+(r<<2)>>2]|0;else if((p|0)==3)m=u[a+h+(r<<1)>>1]|0;else m=o[a+(r+h)>>0]|0;v=s[d+28>>2]|0;m=rt(s[d+16>>2]|0,m)|0;if((s[d+20>>2]|0)==0){y=+f[v+(m+4)>>2]*+f[i+8>>2];g=+f[v+(m+8)>>2]*+f[i+12>>2];f[e+(r<<4)+12>>2]=+f[v+m>>2]*+f[i+4>>2];f[e+(r<<4)+16>>2]=y;f[e+(r<<4)+20>>2]=g;f[e+(r<<4)+24>>2]=0}else{g=+l[v+(m+8)>>3]*+f[i+8>>2];y=+l[v+(m+16)>>3]*+f[i+12>>2];f[e+(r<<4)+12>>2]=+l[v+m>>3]*+f[i+4>>2];f[e+(r<<4)+16>>2]=g;f[e+(r<<4)+20>>2]=y;f[e+(r<<4)+24>>2]=0}if((r|0)>0)r=r+ -1|0;else break}m=s[e+8>>2]|0;JD[s[(s[m>>2]|0)+8>>2]&127](m,e+12|0,t,n);m=s[e+4>>2]|0;hD[s[(s[m>>2]|0)+24>>2]&127](m,t);c=d;return}function Zm(e){e=e|0;return}function eg(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function tg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,a=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;p=c;c=c+80|0;a=s[e+4>>2]|0;_D[s[(s[a>>2]|0)+16>>2]&3](a,p+28|0,p+24|0,p+20|0,p+16|0,p+12|0,p+8|0,p+4|0,p,t);a=s[p+12>>2]|0;o=rt(s[p+8>>2]|0,n)|0;r=s[e+4>>2]|0;h=(s[p+20>>2]|0)==0;i=s[p+28>>2]|0;if((s[p>>2]|0)!=3){d=s[p+16>>2]|0;v=rt(d,s[a+(o+8)>>2]|0)|0;if(h){y=+f[i+(v+4)>>2]*+f[r+8>>2];g=+f[i+(v+8)>>2]*+f[r+12>>2];f[p+64>>2]=+f[i+v>>2]*+f[r+4>>2];f[p+68>>2]=y;f[p+72>>2]=g;f[p+76>>2]=0;m=rt(d,s[a+(o+4)>>2]|0)|0;g=+f[i+(m+4)>>2]*+f[r+8>>2];y=+f[i+(m+8)>>2]*+f[r+12>>2];f[p+48>>2]=+f[i+m>>2]*+f[r+4>>2];f[p+52>>2]=g;f[p+56>>2]=y;f[p+60>>2]=0;m=rt(d,s[a+o>>2]|0)|0;y=+f[i+(m+4)>>2]*+f[r+8>>2];g=+f[i+(m+8)>>2]*+f[r+12>>2];f[p+32>>2]=+f[i+m>>2]*+f[r+4>>2];f[p+36>>2]=y;f[p+40>>2]=g;f[p+44>>2]=0;m=e+8|0;m=s[m>>2]|0;v=s[m>>2]|0;v=v+8|0;v=s[v>>2]|0;JD[v&127](m,p+32|0,t,n);m=s[e+4>>2]|0;v=s[m>>2]|0;v=v+24|0;v=s[v>>2]|0;hD[v&127](m,t);c=p;return}else{g=+l[i+(v+8)>>3]*+f[r+8>>2];y=+l[i+(v+16)>>3]*+f[r+12>>2];f[p+64>>2]=+l[i+v>>3]*+f[r+4>>2];f[p+68>>2]=g;f[p+72>>2]=y;f[p+76>>2]=0;m=rt(d,s[a+(o+4)>>2]|0)|0;y=+l[i+(m+8)>>3]*+f[r+8>>2];g=+l[i+(m+16)>>3]*+f[r+12>>2];f[p+48>>2]=+l[i+m>>3]*+f[r+4>>2];f[p+52>>2]=y;f[p+56>>2]=g;f[p+60>>2]=0;m=rt(d,s[a+o>>2]|0)|0;g=+l[i+(m+8)>>3]*+f[r+8>>2];y=+l[i+(m+16)>>3]*+f[r+12>>2];f[p+32>>2]=+l[i+m>>3]*+f[r+4>>2];f[p+36>>2]=g;f[p+40>>2]=y;f[p+44>>2]=0;m=e+8|0;m=s[m>>2]|0;v=s[m>>2]|0;v=v+8|0;v=s[v>>2]|0;JD[v&127](m,p+32|0,t,n);m=s[e+4>>2]|0;v=s[m>>2]|0;v=v+24|0;v=s[v>>2]|0;hD[v&127](m,t);c=p;return}}d=s[p+16>>2]|0;v=2;while(1){m=rt(d,u[a+o+(v<<1)>>1]|0)|0;if(h){g=+f[i+(m+4)>>2]*+f[r+8>>2];y=+f[i+(m+8)>>2]*+f[r+12>>2];f[p+32+(v<<4)>>2]=+f[i+m>>2]*+f[r+4>>2];f[p+32+(v<<4)+4>>2]=g;f[p+32+(v<<4)+8>>2]=y;f[p+32+(v<<4)+12>>2]=0}else{g=+l[i+(m+8)>>3]*+f[r+8>>2];y=+l[i+(m+16)>>3]*+f[r+12>>2];f[p+32+(v<<4)>>2]=+l[i+m>>3]*+f[r+4>>2];f[p+32+(v<<4)+4>>2]=g;f[p+32+(v<<4)+8>>2]=y;f[p+32+(v<<4)+12>>2]=0}if((v|0)>0)v=v+ -1|0;else break}m=e+8|0;m=s[m>>2]|0;v=s[m>>2]|0;v=v+8|0;v=s[v>>2]|0;JD[v&127](m,p+32|0,t,n);m=s[e+4>>2]|0;v=s[m>>2]|0;v=v+24|0;v=s[v>>2]|0;hD[v&127](m,t);c=p;return}function ng(e){e=e|0;return}function rg(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function ig(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,a=0,h=0,p=0,d=0,v=0,m=0,g=0;p=c;c=c+80|0;h=s[e+4>>2]|0;_D[s[(s[h>>2]|0)+16>>2]&3](h,p+28|0,p+24|0,p+20|0,p+16|0,p+12|0,p+8|0,p+4|0,p,t);h=(s[p+12>>2]|0)+(rt(s[p+8>>2]|0,n)|0)|0;o=s[e+4>>2]|0;r=(s[p>>2]|0)==3;a=(s[p+20>>2]|0)==0;i=s[p+28>>2]|0;d=2;while(1){if(r)v=u[h+(d<<1)>>1]|0;else v=s[h+(d<<2)>>2]|0;v=rt(s[p+16>>2]|0,v)|0;if(a){g=+f[i+(v+4)>>2]*+f[o+8>>2];m=+f[i+(v+8)>>2]*+f[o+12>>2];f[p+32+(d<<4)>>2]=+f[i+v>>2]*+f[o+4>>2];f[p+32+(d<<4)+4>>2]=g;f[p+32+(d<<4)+8>>2]=m;f[p+32+(d<<4)+12>>2]=0}else{m=+l[i+(v+8)>>3]*+f[o+8>>2];g=+l[i+(v+16)>>3]*+f[o+12>>2];f[p+32+(d<<4)>>2]=+l[i+v>>3]*+f[o+4>>2];f[p+32+(d<<4)+4>>2]=m;f[p+32+(d<<4)+8>>2]=g;f[p+32+(d<<4)+12>>2]=0}if((d|0)>0)d=d+ -1|0;else break}v=s[e+8>>2]|0;JD[s[(s[v>>2]|0)+8>>2]&127](v,p+32|0,t,n);v=s[e+4>>2]|0;hD[s[(s[v>>2]|0)+24>>2]&127](v,t);c=p;return}function sg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;r=c;c=c+32|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;i=+f[n>>2];o=+f[n+4>>2];u=+f[n+8>>2];if(i*i+o*o+u*u<9999999747378752e-20){i=1;o=0;u=0}else{m=1/+X(+(i*i+o*o+u*u));i=i*m;o=o*m;u=u*m}n=s[t+52>>2]|0;h=+f[t+(((n+2|0)%3|0)<<2)+28>>2];s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;f[r+16+(n<<2)>>2]=+f[t+(n<<2)+28>>2];l=i*h;a=o*h;h=u*h;m=l+ +f[r+16>>2];p=a+ +f[r+20>>2];d=h+ +f[r+24>>2];v=+CD[s[(s[t>>2]|0)+48>>2]&15](t);m=m-i*v;p=p-o*v;v=d-u*v;d=u*v+(i*m+o*p);if(d>-0xde0b6b000000000){f[e>>2]=m;f[e+4>>2]=p;f[e+8>>2]=v;f[e+12>>2]=0}else d=-0xde0b6b000000000;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;n=s[t+52>>2]|0;f[r+(n<<2)>>2]=-+f[t+(n<<2)+28>>2];l=l+ +f[r>>2];a=a+ +f[r+4>>2];m=h+ +f[r+8>>2];h=+CD[s[(s[t>>2]|0)+48>>2]&15](t);l=l-i*h;a=a-o*h;h=m-u*h;if(!(u*h+(i*l+o*a)>d)){c=r;return}f[e>>2]=l;f[e+4>>2]=a;f[e+8>>2]=h;f[e+12>>2]=0;c=r;return}function og(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;i=c;c=c+32|0;a=s[e+52>>2]|0;o=+f[e+(((a+2|0)%3|0)<<2)+28>>2];if((r|0)<=0){c=i;return}u=0;while(1){h=e+(a<<2)+28|0;s[i+16>>2]=0;s[i+20>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;f[i+16+(a<<2)>>2]=+f[h>>2];h=t+(u<<4)|0;l=t+(u<<4)+4|0;a=t+(u<<4)+8|0;w=o*+f[h>>2]+ +f[i+16>>2];y=o*+f[l>>2]+ +f[i+20>>2];m=o*+f[a>>2]+ +f[i+24>>2];S=+CD[s[(s[e>>2]|0)+48>>2]&15](e);b=+f[h>>2];g=+f[l>>2];E=+f[a>>2];if(b*(w-S*b)+g*(y-S*g)+E*(m-S*E)>-0xde0b6b000000000){f[n+(u<<4)>>2]=w-S*b;f[n+(u<<4)+4>>2]=y-S*g;f[n+(u<<4)+8>>2]=m-S*E;f[n+(u<<4)+12>>2]=0;v=+f[h>>2];d=+f[l>>2];p=+f[a>>2];m=b*(w-S*b)+g*(y-S*g)+E*(m-S*E)}else{v=b;d=g;p=E;m=-0xde0b6b000000000}s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;x=s[e+52>>2]|0;f[i+(x<<2)>>2]=-+f[e+(x<<2)+28>>2];v=o*v+ +f[i>>2];d=o*d+ +f[i+4>>2];g=o*p+ +f[i+8>>2];p=+CD[s[(s[e>>2]|0)+48>>2]&15](e);y=+f[h>>2];b=+f[l>>2];w=+f[a>>2];if(y*(v-p*y)+b*(d-p*b)+w*(g-p*w)>m){f[n+(u<<4)>>2]=v-p*y;f[n+(u<<4)+4>>2]=d-p*b;f[n+(u<<4)+8>>2]=g-p*w;f[n+(u<<4)+12>>2]=0}u=u+1|0;if((u|0)==(r|0))break;a=s[e+52>>2]|0}c=i;return}function ug(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+16|0;a=s[e+52>>2]|0;o=+f[e+(((a+2|0)%3|0)<<2)+28>>2];f[r>>2]=o;f[r+4>>2]=o;f[r+8>>2]=o;f[r+12>>2]=0;f[r+(a<<2)>>2]=+f[e+(a<<2)+28>>2]+ +f[r+(a<<2)>>2];o=(+f[r>>2]+.03999999910593033)*2;i=(+f[r+4>>2]+.03999999910593033)*2;u=(+f[r+8>>2]+.03999999910593033)*2;f[n>>2]=t*.0833333283662796*(i*i+u*u);f[n+4>>2]=t*.0833333283662796*(o*o+u*u);f[n+8>>2]=t*.0833333283662796*(o*o+i*i);c=r;return}function ag(e){e=e|0;return}function fg(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function lg(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;i=c;c=c+16|0;x=s[e+52>>2]|0;a=+f[e+(((x+2|0)%3|0)<<2)+28>>2];f[i>>2]=a;f[i+4>>2]=a;f[i+8>>2]=a;f[i+12>>2]=0;f[i+(x<<2)>>2]=a+ +f[e+(x<<2)+28>>2];a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);p=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=a+ +f[i>>2];f[i>>2]=a;o=o+ +f[i+4>>2];f[i+4>>2]=o;p=p+ +f[i+8>>2];w=+W(+(+f[t>>2]));b=+W(+(+f[t+4>>2]));E=+W(+(+f[t+8>>2]));m=+W(+(+f[t+16>>2]));v=+W(+(+f[t+20>>2]));g=+W(+(+f[t+24>>2]));l=+W(+(+f[t+32>>2]));u=+W(+(+f[t+36>>2]));h=+W(+(+f[t+40>>2]));S=+f[t+48>>2];y=+f[t+52>>2];d=+f[t+56>>2];f[n>>2]=S-(p*E+(w*a+b*o));f[n+4>>2]=y-(p*g+(m*a+v*o));f[n+8>>2]=d-(p*h+(l*a+u*o));f[n+12>>2]=0;f[r>>2]=S+(p*E+(w*a+b*o));f[r+4>>2]=y+(p*g+(m*a+v*o));f[r+8>>2]=d+(p*h+(l*a+u*o));f[r+12>>2]=0;c=i;return}function cg(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;h=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=(h+ +f[e+28>>2])/+f[e+12>>2];l=(u+ +f[e+32>>2])/+f[e+16>>2];o=(r+ +f[e+36>>2])/+f[e+20>>2];p=+W(+(+f[t>>2]));a=+W(+(+f[t+4>>2]));i=+W(+(+f[t+8>>2]));f[e+12>>2]=p;f[e+16>>2]=a;f[e+20>>2]=i;f[e+24>>2]=0;f[e+28>>2]=d*p-h;f[e+32>>2]=l*a-u;f[e+36>>2]=o*i-r;f[e+40>>2]=0;c=n;return}function hg(e){e=e|0;return 6776}function pg(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;f[e+(s[t+52>>2]<<2)>>2]=1;c=n;return}function dg(e,t){e=e|0;t=+t;var n=0,r=0,i=0,o=0,u=0,a=0;n=c;u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=u+ +f[e+28>>2];i=i+ +f[e+32>>2];a=a+ +f[e+36>>2];f[e+44>>2]=t;o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);t=a- +CD[s[(s[e>>2]|0)+48>>2]&15](e);f[e+28>>2]=u-o;f[e+32>>2]=i-r;f[e+36>>2]=t;f[e+40>>2]=0;c=n;return}function vg(e){e=e|0;return 60}function mg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+28>>2]=+f[e+28>>2];f[t+32>>2]=+f[e+32>>2];f[t+36>>2]=+f[e+36>>2];f[t+40>>2]=+f[e+40>>2];f[t+12>>2]=+f[e+12>>2];f[t+16>>2]=+f[e+16>>2];f[t+20>>2]=+f[e+20>>2];f[t+24>>2]=+f[e+24>>2];f[t+44>>2]=+f[e+44>>2];s[t+52>>2]=s[e+52>>2];c=r;return 6752}function gg(e){e=e|0;return}function yg(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function bg(e){e=e|0;return 6736}function wg(e){e=e|0;return}function Eg(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Sg(e){e=e|0;return 6720}function xg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+80|0;i=s[s[e>>2]>>2]|0;o=s[s[e+4>>2]>>2]|0;if(!(xD[s[(s[t>>2]|0)+24>>2]&31](t,i,o)|0)){c=r;return}u=s[i+192>>2]|0;s[r+56>>2]=0;s[r+60>>2]=u;s[r+64>>2]=i;s[r+68>>2]=i+4;s[r+72>>2]=-1;s[r+76>>2]=-1;u=s[o+192>>2]|0;s[r+32>>2]=0;s[r+36>>2]=u;s[r+40>>2]=o;s[r+44>>2]=o+4;s[r+48>>2]=-1;s[r+52>>2]=-1;u=s[e+8>>2]|0;if((u|0)==0){u=yD[s[(s[t>>2]|0)+8>>2]&31](t,r+56|0,r+32|0,0)|0;s[e+8>>2]=u;if((u|0)==0){c=r;return}}s[r>>2]=13504;s[r+4>>2]=0;s[r+8>>2]=r+56;s[r+12>>2]=r+32;if((s[n+8>>2]|0)==1){aD[s[(s[u>>2]|0)+8>>2]&31](u,r+56|0,r+32|0,n,r);c=r;return}a=+SD[s[(s[u>>2]|0)+12>>2]&15](u,i,o,n,r);if(!(+f[n+12>>2]>a)){c=r;return}f[n+12>>2]=a;c=r;return}function Tg(e){e=e|0;return}function Ng(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=6808;n=s[e+20>>2]|0;if((n|0)!=0){if((r[e+24>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+20>>2]=0}r[e+24>>0]=1;s[e+20>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;hM(e);c=t;return}function Cg(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=6808;n=s[e+20>>2]|0;if((n|0)!=0){if((r[e+24>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+20>>2]=0}r[e+24>>0]=1;s[e+20>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;c=t;return}function kg(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;i=c;c=c+16|0;s[1698]=(s[1698]|0)+1;if((s[e+4>>2]&2|0)==0)u=15720;else{u=s[t+192>>2]|0;a=+FD[s[(s[u>>2]|0)+20>>2]&1](u,.019999999552965164);f[i+4>>2]=a;u=s[n+192>>2]|0;l=+FD[s[(s[u>>2]|0)+20>>2]&1](u,.019999999552965164);f[i>>2]=l;u=a<l?i+4|0:i}l=+f[u>>2];d=+f[t+184>>2];a=+f[n+184>>2];a=d<a?d:a;h=s[e+68>>2]|0;u=s[h+8>>2]|0;if((u|0)==0){if((s[e+4>>2]&4|0)!=0){p=0;c=i;return p|0}s[5004]=(s[5004]|0)+1;u=cM(791)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}}else{p=s[h+12>>2]|0;s[h+12>>2]=s[p>>2];s[h+8>>2]=u+ -1;u=p}s[u>>2]=1025;s[u+116>>2]=0;r[u+120>>0]=0;p=u+124|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;s[p+20>>2]=0;s[p+24>>2]=0;s[p+28>>2]=0;s[u+300>>2]=0;r[u+304>>0]=0;p=u+308|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;s[p+20>>2]=0;s[p+24>>2]=0;s[p+28>>2]=0;s[u+484>>2]=0;r[u+488>>0]=0;p=u+492|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;s[p+20>>2]=0;s[p+24>>2]=0;s[p+28>>2]=0;s[u+668>>2]=0;r[u+672>>0]=0;p=u+676|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;s[p+20>>2]=0;s[p+24>>2]=0;s[p+28>>2]=0;s[u+740>>2]=t;s[u+744>>2]=n;s[u+748>>2]=0;f[u+752>>2]=l;f[u+756>>2]=a;s[u+768>>2]=s[e+12>>2];n=s[e+12>>2]|0;if((n|0)==(s[e+16>>2]|0)?(o=(n|0)==0?1:n<<1,(n|0)<(o|0)):0){if((o|0)==0)t=0;else{s[5004]=(s[5004]|0)+1;t=cM((o<<2|3)+16|0)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}n=s[e+12>>2]|0}if((n|0)>0){p=0;do{h=t+(p<<2)|0;if((h|0)!=0)s[h>>2]=s[(s[e+20>>2]|0)+(p<<2)>>2];p=p+1|0}while((p|0)!=(n|0))}h=s[e+20>>2]|0;if((h|0)!=0){if((r[e+24>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0);n=s[e+12>>2]|0}s[e+20>>2]=0}r[e+24>>0]=1;s[e+20>>2]=t;s[e+16>>2]=o}o=(s[e+20>>2]|0)+(n<<2)|0;if((o|0)!=0)s[o>>2]=u;s[e+12>>2]=n+1;p=u;c=i;return p|0}function Lg(e,t){e=e|0;t=t|0;var n=0,r=0;e=c;n=s[t+748>>2]|0;if((n|0)>0){r=0;do r=r+1|0;while((r|0)<(n|0))}s[t+748>>2]=0;c=e;return}function Ag(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0;n=c;s[1698]=(s[1698]|0)+ -1;hD[s[(s[e>>2]|0)+20>>2]&127](e,t);r=s[t+768>>2]|0;i=(s[e+12>>2]|0)+ -1|0;u=s[e+20>>2]|0;o=s[u+(r<<2)>>2]|0;s[u+(r<<2)>>2]=s[u+(i<<2)>>2];s[(s[e+20>>2]|0)+(i<<2)>>2]=o;s[(s[(s[e+20>>2]|0)+(r<<2)>>2]|0)+768>>2]=r;s[e+12>>2]=(s[e+12>>2]|0)+ -1;e=s[e+68>>2]|0;if((t|0)==0){c=n;return}u=s[e+16>>2]|0;if(!(u>>>0>t>>>0)?(u+(rt(s[e>>2]|0,s[e+4>>2]|0)|0)|0)>>>0>t>>>0:0){s[t>>2]=s[e+12>>2];s[e+12>>2]=t;s[e+8>>2]=(s[e+8>>2]|0)+1;c=n;return}s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);c=n;return}function Og(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;c=c+16|0;s[i>>2]=e;s[i+4>>2]=r;r=s[e+((s[(s[t+4>>2]|0)+4>>2]|0)*144|0)+(s[(s[n+4>>2]|0)+4>>2]<<2)+72>>2]|0;r=yD[s[(s[r>>2]|0)+8>>2]&31](r,i,t,n)|0;c=i;return r|0}function Mg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;e=c;t=s[t+204>>2]|0;if((t&4|0)==0?(r=s[n+204>>2]|0,(r&4|0)==0):0)if((t&3|0)==0)n=1;else n=(r&3|0)==0;else n=0;c=e;return n|0}function _g(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;e=c;r=s[t+216>>2]|0;if((r|0)==2|(r|0)==5?(r=s[n+216>>2]|0,(r|0)==2|(r|0)==5):0)t=0;else if((s[t+256>>2]|0)==0)t=1;else t=DD[s[s[t>>2]>>2]&31](t,n)|0;c=e;return t|0}function Dg(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;c=c+16|0;s[i>>2]=6920;s[i+4>>2]=n;s[i+8>>2]=e;WD[s[(s[t>>2]|0)+48>>2]&127](t,i,r);c=i;return}function Pg(e){e=e|0;return}function Hg(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;e=s[e+64>>2]|0;r=s[e+8>>2]|0;if((r|0)!=0){t=s[e+12>>2]|0;s[e+12>>2]=s[t>>2];s[e+8>>2]=r+ -1;r=t;c=n;return r|0}s[5004]=(s[5004]|0)+1;t=cM(t+19|0)|0;if((t|0)==0){r=0;c=n;return r|0}s[(t+19&-16)+ -4>>2]=t;r=t+19&-16;c=n;return r|0}function Bg(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;e=s[e+64>>2]|0;if((t|0)==0){c=n;return}r=s[e+16>>2]|0;if(!(r>>>0>t>>>0)?(r+(rt(s[e>>2]|0,s[e+4>>2]|0)|0)|0)>>>0>t>>>0:0){s[t>>2]=s[e+12>>2];s[e+12>>2]=t;s[e+8>>2]=(s[e+8>>2]|0)+1;c=n;return}s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);c=n;return}function jg(e){e=e|0;return s[e+12>>2]|0}function Fg(e,t){e=e|0;t=t|0;return s[(s[e+20>>2]|0)+(t<<2)>>2]|0}function Ig(e){e=e|0;if((s[e+12>>2]|0)==0)e=0;else e=s[e+20>>2]|0;return e|0}function qg(e){e=e|0;return s[e+68>>2]|0}function Rg(e){e=e|0;return s[e+68>>2]|0}function Ug(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function zg(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;r=s[e+8>>2]|0;WD[s[r+60>>2]&127](t,r,s[e+4>>2]|0);c=n;return 0}function Wg(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Xg(e,t,n){e=e|0;t=t|0;n=n|0;s[e+16>>2]=t;s[e+24>>2]=n;return}function Vg(e,t,n){e=e|0;t=t|0;n=n|0;s[e+20>>2]=t;s[e+28>>2]=n;return}function $g(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0;r=c;f[t+16>>2]=+f[e+4>>2];f[t+20>>2]=+f[e+8>>2];f[t+24>>2]=+f[e+12>>2];f[t+28>>2]=+f[e+16>>2];f[t+32>>2]=+f[e+20>>2];f[t+36>>2]=+f[e+24>>2];f[t+40>>2]=+f[e+28>>2];f[t+44>>2]=+f[e+32>>2];f[t+48>>2]=+f[e+36>>2];f[t+52>>2]=+f[e+40>>2];f[t+56>>2]=+f[e+44>>2];f[t+60>>2]=+f[e+48>>2];f[t+64>>2]=+f[e+52>>2];f[t+68>>2]=+f[e+56>>2];f[t+72>>2]=+f[e+60>>2];f[t+76>>2]=+f[e+64>>2];f[t+80>>2]=+f[e+68>>2];f[t+84>>2]=+f[e+72>>2];f[t+88>>2]=+f[e+76>>2];f[t+92>>2]=+f[e+80>>2];f[t+96>>2]=+f[e+84>>2];f[t+100>>2]=+f[e+88>>2];f[t+104>>2]=+f[e+92>>2];f[t+108>>2]=+f[e+96>>2];f[t+112>>2]=+f[e+100>>2];f[t+116>>2]=+f[e+104>>2];f[t+120>>2]=+f[e+108>>2];f[t+124>>2]=+f[e+112>>2];f[t+128>>2]=+f[e+116>>2];f[t+132>>2]=+f[e+120>>2];f[t+136>>2]=+f[e+124>>2];f[t+140>>2]=+f[e+128>>2];f[t+144>>2]=+f[e+132>>2];f[t+148>>2]=+f[e+136>>2];f[t+152>>2]=+f[e+140>>2];f[t+156>>2]=+f[e+144>>2];f[t+160>>2]=+f[e+148>>2];f[t+164>>2]=+f[e+152>>2];f[t+168>>2]=+f[e+156>>2];f[t+172>>2]=+f[e+160>>2];f[t+176>>2]=+f[e+164>>2];f[t+180>>2]=+f[e+168>>2];f[t+184>>2]=+f[e+172>>2];f[t+188>>2]=+f[e+176>>2];s[t+224>>2]=s[e+180>>2];f[t+192>>2]=+f[e+184>>2];s[t>>2]=0;s[t+4>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+192>>2]|0)|0;s[t+8>>2]=0;s[t+228>>2]=s[e+204>>2];s[t+232>>2]=s[e+208>>2];s[t+236>>2]=s[e+212>>2];s[t+240>>2]=s[e+216>>2];f[t+196>>2]=+f[e+220>>2];f[t+200>>2]=+f[e+224>>2];f[t+204>>2]=+f[e+232>>2];f[t+208>>2]=+f[e+228>>2];s[t+244>>2]=s[e+236>>2];i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t+12>>2]=o;if((o|0)==0){n=e+244|0;u=+f[n>>2];n=t+212|0;f[n>>2]=u;n=e+248|0;u=+f[n>>2];n=t+216|0;f[n>>2]=u;n=e+252|0;u=+f[n>>2];n=t+220|0;f[n>>2]=u;n=e+256|0;n=s[n>>2]|0;o=t+248|0;s[o>>2]=n;c=r;return 7016}hD[s[(s[n>>2]|0)+48>>2]&127](n,i);n=e+244|0;u=+f[n>>2];n=t+212|0;f[n>>2]=u;n=e+248|0;u=+f[n>>2];n=t+216|0;f[n>>2]=u;n=e+252|0;u=+f[n>>2];n=t+220|0;f[n>>2]=u;n=e+256|0;n=s[n>>2]|0;o=t+248|0;s[o>>2]=n;c=r;return 7016}function Jg(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;i=dD[s[(s[e>>2]|0)+16>>2]&127](e)|0;i=xD[s[(s[t>>2]|0)+16>>2]&31](t,i,1)|0;r=xD[s[(s[e>>2]|0)+20>>2]&31](e,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,r,1245859651,e);c=n;return}function Kg(e,t){e=e|0;t=t|0;return 1}function Qg(e){e=e|0;return 256}function Gg(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;r=c;c=c+96|0;f[r+32>>2]=1;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=1;s[r+56>>2]=0;s[r+60>>2]=0;s[r+64>>2]=0;s[r+68>>2]=0;f[r+72>>2]=1;p=r+76|0;s[p+0>>2]=0;s[p+4>>2]=0;s[p+8>>2]=0;s[p+12>>2]=0;s[p+16>>2]=0;JD[s[(s[e>>2]|0)+8>>2]&127](e,r+32|0,r+16|0,r);l=+f[r>>2];h=+f[r+16>>2];u=+f[r+4>>2];a=+f[r+20>>2];i=+f[r+8>>2];o=+f[r+24>>2];f[n>>2]=+X(+((l-h)*(l-h)+(u-a)*(u-a)+(i-o)*(i-o)))*.5;f[t>>2]=(h+l)*.5;f[t+4>>2]=(a+u)*.5;f[t+8>>2]=(o+i)*.5;f[t+12>>2]=0;c=r;return}function Yg(e,t){e=e|0;t=+t;var n=0;n=c;t=+CD[s[(s[e>>2]|0)+16>>2]&15](e)*t;c=n;return+t}function Zg(e){e=e|0;var t=0,n=0,r=0,i=0;t=c;c=c+32|0;WD[s[(s[e>>2]|0)+12>>2]&127](e,t+8|0,t);i=+f[t+8>>2];r=+f[t+12>>2];n=+f[t+16>>2];n=+X(+(i*i+r*r+n*n));c=t;return+(n+ +f[t>>2])}function ey(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;u=c;JD[s[(s[e>>2]|0)+8>>2]&127](e,t,i,o);g=+f[o>>2];v=+f[o+4>>2];a=+f[o+8>>2];h=+f[i>>2];m=+f[i+4>>2];l=+f[i+8>>2];y=+f[n>>2];d=+f[n+4>>2];p=+f[n+8>>2];if(y>0)g=g+y;else h=h+y;if(d>0)v=v+d;else m=m+d;if(p>0)a=a+p;else l=l+p;p=+f[r>>2];d=+f[r+4>>2];y=+f[r+8>>2];y=+X(+(p*p+d*d+y*y));y=y*+CD[s[(s[e>>2]|0)+16>>2]&15](e);f[i>>2]=h;f[i+4>>2]=m;f[i+8>>2]=l;f[i+12>>2]=0;f[o>>2]=g;f[o+4>>2]=v;f[o+8>>2]=a;f[o+12>>2]=0;f[i>>2]=+f[i>>2]-y;f[i+4>>2]=+f[i+4>>2]-y;f[i+8>>2]=+f[i+8>>2]-y;f[o>>2]=y+ +f[o>>2];f[o+4>>2]=y+ +f[o+4>>2];f[o+8>>2]=y+ +f[o+8>>2];c=u;return}function ty(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];c=r;return 7080}function ny(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;i=dD[s[(s[e>>2]|0)+52>>2]&127](e)|0;i=xD[s[(s[t>>2]|0)+16>>2]&31](t,i,1)|0;r=xD[s[(s[e>>2]|0)+56>>2]&31](e,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,r,1346455635,e);c=n;return}function ry(e){e=e|0;return 12}function iy(e){e=e|0;var t=0;t=c;sy(e);hM(e);c=t;return}function sy(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0;t=c;s[e>>2]=7144;n=s[e+8>>2]|0;o=s[e+16>>2]|0;if((n|0)>0){i=0;do{u=(s[o+(i<<2)>>2]|0)+188|0;a=s[u>>2]|0;if((a|0)!=0){n=s[e+68>>2]|0;n=dD[s[(s[n>>2]|0)+36>>2]&127](n)|0;WD[s[(s[n>>2]|0)+40>>2]&127](n,a,s[e+24>>2]|0);n=s[e+68>>2]|0;WD[s[(s[n>>2]|0)+12>>2]&127](n,a,s[e+24>>2]|0);s[u>>2]=0;n=s[e+8>>2]|0;o=s[e+16>>2]|0}i=i+1|0}while((i|0)<(n|0))}if((o|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;a=e+12|0;s[a>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;a=e+12|0;s[a>>2]=0;c=t;return}function oy(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,f=0,l=0,h=0;o=c;c=c+96|0;f=s[e+8>>2]|0;if((f|0)==(s[e+12>>2]|0)?(u=(f|0)==0?1:f<<1,(f|0)<(u|0)):0){if((u|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;a=cM((u<<2|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}f=s[e+8>>2]|0}if((f|0)>0){l=0;do{h=a+(l<<2)|0;if((h|0)!=0)s[h>>2]=s[(s[e+16>>2]|0)+(l<<2)>>2];l=l+1|0}while((l|0)!=(f|0))}l=s[e+16>>2]|0;if((l|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0);f=s[e+8>>2]|0}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=a;s[e+12>>2]=u}u=(s[e+16>>2]|0)+(f<<2)|0;if((u|0)!=0)s[u>>2]=t;s[e+8>>2]=f+1;s[o+32>>2]=s[t+4>>2];s[o+36>>2]=s[t+8>>2];s[o+40>>2]=s[t+12>>2];s[o+44>>2]=s[t+16>>2];s[o+48>>2]=s[t+20>>2];s[o+52>>2]=s[t+24>>2];s[o+56>>2]=s[t+28>>2];s[o+60>>2]=s[t+32>>2];s[o+64>>2]=s[t+36>>2];s[o+68>>2]=s[t+40>>2];s[o+72>>2]=s[t+44>>2];s[o+76>>2]=s[t+48>>2];s[o+80>>2]=s[t+52>>2];s[o+84>>2]=s[t+56>>2];s[o+88>>2]=s[t+60>>2];s[o+92>>2]=s[t+64>>2];h=s[t+192>>2]|0;JD[s[(s[h>>2]|0)+8>>2]&127](h,o+32|0,o+16|0,o);h=s[e+68>>2]|0;s[t+188>>2]=UD[s[(s[h>>2]|0)+8>>2]&3](h,o+16|0,o,s[(s[t+192>>2]|0)+4>>2]|0,t,n,i,s[e+24>>2]|0,0)|0;c=o;return}function uy(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;t=c;c=c+64|0;CC(7424);m=s[e+8>>2]|0;if((m|0)>0){i=0;do{o=s[(s[e+16>>2]|0)+(i<<2)>>2]|0;if(!((r[e+76>>0]|0)==0?(g=s[o+216>>2]|0,(g|0)==2|(g|0)==5):0)){g=s[o+192>>2]|0;JD[s[(s[g>>2]|0)+8>>2]&127](g,o+4|0,t+48|0,t+32|0);a=+f[t+48>>2]+ -.019999999552965164;f[t+48>>2]=a;u=+f[t+52>>2]+ -.019999999552965164;f[t+52>>2]=u;p=+f[t+56>>2]+ -.019999999552965164;f[t+56>>2]=p;d=+f[t+32>>2]+.019999999552965164;f[t+32>>2]=d;h=+f[t+36>>2]+.019999999552965164;f[t+36>>2]=h;l=+f[t+40>>2]+.019999999552965164;f[t+40>>2]=l;if(((r[e+44>>0]|0)!=0?(s[o+236>>2]|0)==2:0)?(s[o+204>>2]&3|0)==0:0){g=s[o+192>>2]|0;JD[s[(s[g>>2]|0)+8>>2]&127](g,o+68|0,t+16|0,t);a=+f[t+16>>2]+ -.019999999552965164;f[t+16>>2]=a;u=+f[t+20>>2]+ -.019999999552965164;f[t+20>>2]=u;p=+f[t+24>>2]+ -.019999999552965164;f[t+24>>2]=p;d=+f[t>>2]+.019999999552965164;f[t>>2]=d;h=+f[t+4>>2]+.019999999552965164;f[t+4>>2]=h;l=+f[t+8>>2]+.019999999552965164;f[t+8>>2]=l;v=+f[t+48>>2];if(a<v)f[t+48>>2]=a;else a=v;v=+f[t+52>>2];if(u<v)f[t+52>>2]=u;else u=v;v=+f[t+56>>2];if(p<v)f[t+56>>2]=p;else p=v;v=+f[t+28>>2];if(v<+f[t+60>>2])f[t+60>>2]=v;v=+f[t+32>>2];if(v<d)f[t+32>>2]=d;else d=v;v=+f[t+36>>2];if(v<h)f[t+36>>2]=h;else h=v;v=+f[t+40>>2];if(v<l)f[t+40>>2]=l;else l=v;v=+f[t+12>>2];if(+f[t+44>>2]<v)f[t+44>>2]=v}m=s[e+68>>2]|0;if((s[o+204>>2]&1|0)==0?(a=d-a,d=h-u,v=l-p,!(a*a+d*d+v*v<999999995904)):0){if(!(((s[o+216>>2]|0)+ -4|0)>>>0<2))s[o+216>>2]=5;if((r[7200]|0)!=0?(n=s[e+72>>2]|0,(n|0)!=0):0){r[7200]=0;hD[s[(s[n>>2]|0)+36>>2]&127](n,7208);g=s[e+72>>2]|0;hD[s[(s[g>>2]|0)+36>>2]&127](g,7264);g=s[e+72>>2]|0;hD[s[(s[g>>2]|0)+36>>2]&127](g,7336);g=s[e+72>>2]|0;hD[s[(s[g>>2]|0)+36>>2]&127](g,7408)}}else aD[s[(s[m>>2]|0)+16>>2]&31](m,s[o+188>>2]|0,t+48|0,t+32|0,s[e+24>>2]|0);m=s[e+8>>2]|0}i=i+1|0}while((i|0)<(m|0))}e=s[5022]|0;g=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=g;if((g|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t+48|0,0)|0;g=s[5008]|0;f[e+8>>2]=+(((s[t+52>>2]|0)-(s[g+4>>2]|0)+(((s[t+48>>2]|0)-(s[g>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function ay(e){e=e|0;var t=0,n=0;t=c;c=c+16|0;CC(7440);n=s[e+68>>2]|0;hD[s[(s[n>>2]|0)+32>>2]&127](n,s[e+24>>2]|0);e=s[5022]|0;n=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=n;if((n|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t|0,0)|0;n=s[5008]|0;f[e+8>>2]=+(((s[t+4>>2]|0)-(s[n+4>>2]|0)+(((s[t>>2]|0)-(s[n>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function fy(e){e=e|0;var t=0,n=0,r=0,i=0;t=c;c=c+16|0;CC(7472);lD[s[(s[e>>2]|0)+8>>2]&511](e);lD[s[(s[e>>2]|0)+12>>2]&511](e);n=s[e+24>>2]|0;CC(7512);if((n|0)!=0){i=s[(s[n>>2]|0)+32>>2]|0;r=s[e+68>>2]|0;r=dD[s[(s[r>>2]|0)+36>>2]&127](r)|0;JD[i&127](n,r,e+28|0,s[e+24>>2]|0)}e=s[5022]|0;i=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=i;do if((i|0)==0){if((s[e+4>>2]|0)!=0){Pn(t|0,0)|0;n=s[5008]|0;f[e+8>>2]=+(((s[t+4>>2]|0)-(s[n+4>>2]|0)+(((s[t>>2]|0)-(s[n>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];n=s[5022]|0;if((s[e+16>>2]|0)==0)e=n;else{e=n;break}}e=s[e+20>>2]|0;s[5022]=e}while(0);n=e+16|0;i=(s[n>>2]|0)+ -1|0;s[n>>2]=i;if((i|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t|0,0)|0;r=s[5008]|0;i=e+8|0;f[i>>2]=+(((s[t+4>>2]|0)-(s[r+4>>2]|0)+(((s[t>>2]|0)-(s[r>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[i>>2];if((s[n>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function ly(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0;r=c;i=s[t+188>>2]|0;if((i|0)!=0){f=s[e+68>>2]|0;f=dD[s[(s[f>>2]|0)+36>>2]&127](f)|0;WD[s[(s[f>>2]|0)+40>>2]&127](f,i,s[e+24>>2]|0);f=s[e+68>>2]|0;WD[s[(s[f>>2]|0)+12>>2]&127](f,i,s[e+24>>2]|0);s[t+188>>2]=0}i=s[e+8>>2]|0;if((i|0)<=0){c=r;return}o=s[e+16>>2]|0;u=0;while(1){a=o+(u<<2)|0;f=u+1|0;if((s[a>>2]|0)==(t|0))break;if((f|0)<(i|0))u=f;else{n=9;break}}if((n|0)==9){c=r;return}if((u|0)>=(i|0)){c=r;return}s[a>>2]=s[o+(i+ -1<<2)>>2];s[(s[e+16>>2]|0)+(i+ -1<<2)>>2]=t;s[e+8>>2]=i+ -1;c=r;return}function cy(e,t,n,o){e=e|0;t=t|0;n=n|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0;u=c;c=c+1392|0;s[u+1192>>2]=0;f[u+1196>>2]=1;f[u+1200>>2]=1;f[u+1204>>2]=1;f[u+1208>>2]=0;s[u+1184>>2]=16680;s[u+1188>>2]=8;f[u+1212>>2]=0;f[u+1228>>2]=0;N=s[n+4>>2]|0;T=s[n+12>>2]|0;C=s[N+4>>2]|0;if((C|0)<20){s[u+1008>>2]=9440;s[u+1176>>2]=0;f[u+1180>>2]=0;f[u+1172>>2]=+f[o+4>>2];f[u+956>>2]=9999999747378752e-20;r[u+980>>0]=0;s[u+632>>2]=17152;s[u+636>>2]=u+648;s[u+640>>2]=u+1184;s[u+644>>2]=N;s[u+616>>2]=13184;s[u+620>>2]=u+648;s[u+624>>2]=u+1184;s[u+628>>2]=N;H=(s[o+16>>2]&4|0)==0?u+616|0:u+632|0;if(!(kD[s[(s[H>>2]|0)+8>>2]&3](H,e,t,T,T,u+1008|0)|0)){c=u;return}T=u+1140|0;h=+f[T>>2];a=+f[u+1144>>2];p=+f[u+1148>>2];if(!(h*h+a*a+p*p>9999999747378752e-20)){c=u;return}l=+f[u+1172>>2];if(!(l<+f[o+4>>2])){c=u;return}D=1/+X(+(h*h+a*a+p*p));f[T>>2]=h*D;f[u+1144>>2]=a*D;f[u+1148>>2]=p*D;s[u+584>>2]=s[n+8>>2];s[u+588>>2]=0;s[u+592>>2]=s[T+0>>2];s[u+596>>2]=s[T+4>>2];s[u+600>>2]=s[T+8>>2];s[u+604>>2]=s[T+12>>2];f[u+608>>2]=l;+PD[s[(s[o>>2]|0)+12>>2]&15](o,u+584|0,1);c=u;return}if((C+ -21|0)>>>0<9){b=+f[T>>2];w=+f[T+16>>2];y=+f[T+32>>2];E=+f[T+4>>2];S=+f[T+20>>2];g=+f[T+36>>2];_=+f[T+8>>2];D=+f[T+24>>2];m=+f[T+40>>2];x=-+f[T+48>>2];O=-+f[T+52>>2];M=-+f[T+56>>2];p=+f[e+48>>2];d=+f[e+52>>2];v=+f[e+56>>2];f[u+568>>2]=b*x+w*O+y*M+(b*p+w*d+y*v);f[u+572>>2]=E*x+S*O+g*M+(E*p+S*d+g*v);f[u+576>>2]=_*x+D*O+m*M+(_*p+D*d+m*v);f[u+580>>2]=0;l=+f[t+48>>2];a=+f[t+52>>2];h=+f[t+56>>2];y=b*x+w*O+y*M+(b*l+w*a+y*h);g=E*x+S*O+g*M+(E*l+S*a+g*h);m=_*x+D*O+m*M+(_*l+D*a+m*h);f[u+552>>2]=y;f[u+556>>2]=g;f[u+560>>2]=m;f[u+564>>2]=0;t=s[N+4>>2]|0;if((t|0)==25){H=s[n+8>>2]|0;P=s[o+16>>2]|0;s[u+316>>2]=s[u+568>>2];s[u+320>>2]=s[u+572>>2];s[u+324>>2]=s[u+576>>2];s[u+328>>2]=s[u+580>>2];s[u+332>>2]=s[u+552>>2];s[u+336>>2]=s[u+556>>2];s[u+340>>2]=s[u+560>>2];s[u+344>>2]=s[u+564>>2];s[u+348>>2]=P;f[u+352>>2]=1;s[u+312>>2]=9248;s[u+356>>2]=o;s[u+360>>2]=H;s[u+364>>2]=N;s[u+368>>2]=s[T+0>>2];s[u+372>>2]=s[T+4>>2];s[u+376>>2]=s[T+8>>2];s[u+380>>2]=s[T+12>>2];s[u+384>>2]=s[T+16>>2];s[u+388>>2]=s[T+20>>2];s[u+392>>2]=s[T+24>>2];s[u+396>>2]=s[T+28>>2];s[u+400>>2]=s[T+32>>2];s[u+404>>2]=s[T+36>>2];s[u+408>>2]=s[T+40>>2];s[u+412>>2]=s[T+44>>2];s[u+416>>2]=s[T+48>>2];s[u+420>>2]=s[T+52>>2];s[u+424>>2]=s[T+56>>2];s[u+428>>2]=s[T+60>>2];f[u+352>>2]=+f[o+4>>2];JD[s[(s[N>>2]|0)+144>>2]&127](N,u+312|0,u+568|0,u+552|0);c=u;return}else if((t|0)==21){H=s[n+8>>2]|0;P=s[o+16>>2]|0;s[u+436>>2]=s[u+568>>2];s[u+440>>2]=s[u+572>>2];s[u+444>>2]=s[u+576>>2];s[u+448>>2]=s[u+580>>2];s[u+452>>2]=s[u+552>>2];s[u+456>>2]=s[u+556>>2];s[u+460>>2]=s[u+560>>2];s[u+464>>2]=s[u+564>>2];s[u+468>>2]=P;f[u+472>>2]=1;s[u+432>>2]=9248;s[u+476>>2]=o;s[u+480>>2]=H;s[u+484>>2]=N;s[u+488>>2]=s[T+0>>2];s[u+492>>2]=s[T+4>>2];s[u+496>>2]=s[T+8>>2];s[u+500>>2]=s[T+12>>2];s[u+504>>2]=s[T+16>>2];s[u+508>>2]=s[T+20>>2];s[u+512>>2]=s[T+24>>2];s[u+516>>2]=s[T+28>>2];s[u+520>>2]=s[T+32>>2];s[u+524>>2]=s[T+36>>2];s[u+528>>2]=s[T+40>>2];s[u+532>>2]=s[T+44>>2];s[u+536>>2]=s[T+48>>2];s[u+540>>2]=s[T+52>>2];s[u+544>>2]=s[T+56>>2];s[u+548>>2]=s[T+60>>2];f[u+472>>2]=+f[o+4>>2];o=s[N+48>>2]|0;s[u+1272>>2]=6152;s[u+1276>>2]=o;s[u+1280>>2]=u+432;o=s[N+52>>2]|0;s[u+1328>>2]=0;s[u+1332>>2]=0;s[u+1336>>2]=0;s[u+1340>>2]=0;s[u+1304>>2]=0;s[u+1308>>2]=0;s[u+1312>>2]=0;s[u+1316>>2]=0;if((r[o+60>>0]|0)==0){US(o,u+1272|0,u+568|0,y,g,m,u+1328|0,u+1304|0);c=u;return}else{zS(o,u+1272|0,u+568|0,y,g,m,u+1328|0,u+1304|0,s[o+56>>2]|0);c=u;return}}else{j=+f[T>>2];B=+f[T+16>>2];y=+f[T+32>>2];b=+f[T+4>>2];w=+f[T+20>>2];E=+f[T+36>>2];M=+f[T+8>>2];_=+f[T+24>>2];D=+f[T+40>>2];S=-+f[T+48>>2];x=-+f[T+52>>2];O=-+f[T+56>>2];g=j*S+B*x+y*O+(j*p+B*d+y*v);m=b*S+w*x+E*O+(b*p+w*d+E*v);d=M*S+_*x+D*O+(M*p+_*d+D*v);v=j*S+B*x+y*O+(j*l+B*a+y*h);p=b*S+w*x+E*O+(b*l+w*a+E*h);a=M*S+_*x+D*O+(M*l+_*a+D*h);H=s[n+8>>2]|0;P=s[o+16>>2]|0;f[u+196>>2]=g;f[u+200>>2]=m;f[u+204>>2]=d;f[u+208>>2]=0;f[u+212>>2]=v;f[u+216>>2]=p;f[u+220>>2]=a;f[u+224>>2]=0;s[u+228>>2]=P;f[u+232>>2]=1;s[u+192>>2]=9056;s[u+236>>2]=o;s[u+240>>2]=H;s[u+244>>2]=N;s[u+248>>2]=s[T+0>>2];s[u+252>>2]=s[T+4>>2];s[u+256>>2]=s[T+8>>2];s[u+260>>2]=s[T+12>>2];s[u+264>>2]=s[T+16>>2];s[u+268>>2]=s[T+20>>2];s[u+272>>2]=s[T+24>>2];s[u+276>>2]=s[T+28>>2];s[u+280>>2]=s[T+32>>2];s[u+284>>2]=s[T+36>>2];s[u+288>>2]=s[T+40>>2];s[u+292>>2]=s[T+44>>2];s[u+296>>2]=s[T+48>>2];s[u+300>>2]=s[T+52>>2];s[u+304>>2]=s[T+56>>2];s[u+308>>2]=s[T+60>>2];f[u+232>>2]=+f[o+4>>2];f[u+176>>2]=g;f[u+180>>2]=m;f[u+184>>2]=d;f[u+188>>2]=0;if(v<g)f[u+176>>2]=v;if(p<m)f[u+180>>2]=p;if(a<d)f[u+184>>2]=a;f[u+160>>2]=g;f[u+164>>2]=m;f[u+168>>2]=d;f[u+172>>2]=0;if(g<v)f[u+160>>2]=v;if(m<p)f[u+164>>2]=p;if(d<a)f[u+168>>2]=a;JD[s[(s[N>>2]|0)+64>>2]&127](N,u+192|0,u+176|0,u+160|0);c=u;return}}if((C|0)!=31){c=u;return}C=s[N+64>>2]|0;H=s[n+8>>2]|0;s[u+128>>2]=8840;s[u+132>>2]=H;s[u+136>>2]=N;s[u+140>>2]=T;s[u+144>>2]=e;s[u+148>>2]=t;s[u+152>>2]=o;if((C|0)==0){o=s[N+16>>2]|0;if((o|0)<=0){c=u;return}n=0;while(1){H=s[N+24>>2]|0;P=s[H+(n*80|0)+64>>2]|0;bd(u+1328|0,T,H+(n*80|0)|0);H=s[u+132>>2]|0;s[u+1304>>2]=0;s[u+1308>>2]=P;s[u+1312>>2]=H;s[u+1316>>2]=u+1328;s[u+1320>>2]=-1;s[u+1324>>2]=n;H=s[u+152>>2]|0;f[u+1276>>2]=1;s[u+1280>>2]=0;i[u+1284>>1]=1;i[u+1286>>1]=-1;s[u+1288>>2]=0;s[u+1272>>2]=8664;s[u+1292>>2]=H;s[u+1296>>2]=n;f[u+1276>>2]=+f[H+4>>2];s[u+1288>>2]=s[H+16>>2];cy(s[u+144>>2]|0,s[u+148>>2]|0,u+1304|0,u+1272|0);n=n+1|0;if((n|0)>=(o|0))break;N=s[u+136>>2]|0;T=s[u+140>>2]|0}c=u;return}py(u+64|0,T,e);v=+f[u+112>>2];m=+f[u+116>>2];d=+f[u+120>>2];py(u,T,t);N=s[C>>2]|0;if((N|0)==0){c=u;return}g=+f[u+48>>2]-v;b=+f[u+52>>2]-m;w=+f[u+56>>2]-d;y=1/+X(+(g*g+b*b+w*w));if(g*y==0)E=0xde0b6b000000000;else E=1/(g*y);if(b*y==0)S=0xde0b6b000000000;else S=1/(b*y);if(w*y==0)x=0xde0b6b000000000;else x=1/(w*y);o=E<0&1;T=S<0&1;n=x<0&1;s[5004]=(s[5004]|0)+1;t=cM(531)|0;if((t|0)==0)L=0;else{s[(t+19&-16)+ -4>>2]=t;L=t+19&-16}e=0;do{t=L+(e<<2)|0;if((t|0)!=0)s[t>>2]=0;e=e+1|0}while((e|0)!=128);s[L>>2]=N;C=128;A=128;N=1;k=126;do{t=N+ -1|0;e=s[L+(t<<2)>>2]|0;s[u+1240>>2]=s[e+0>>2];s[u+1244>>2]=s[e+4>>2];s[u+1248>>2]=s[e+8>>2];s[u+1252>>2]=s[e+12>>2];s[u+1256>>2]=s[e+16>>2];s[u+1260>>2]=s[e+20>>2];s[u+1264>>2]=s[e+24>>2];s[u+1268>>2]=s[e+28>>2];_=E*(+f[u+1240+(o<<4)>>2]-v);O=E*(+f[u+1240+((o^1)<<4)>>2]-v);D=S*(+f[u+1240+(T<<4)+4>>2]-m);M=S*(+f[u+1240+((T^1)<<4)+4>>2]-m);do if(((!(_>M|D>O)?(p=D>_?D:_,l=M<O?M:O,h=x*(+f[u+1240+(n<<4)+8>>2]-d),a=x*(+f[u+1240+((n^1)<<4)+8>>2]-d),!(p>a|h>l)):0)?(h>p?h:p)<g*y*g+b*y*b+w*y*w:0)?(a<l?a:l)>0:0){if((s[e+40>>2]|0)==0){hD[s[(s[u+128>>2]|0)+12>>2]&127](u+128|0,e);N=t;break}if((t|0)>(k|0)){k=C<<1;if((C|0)<(k|0)){do if((A|0)<(k|0)){do if((C|0)==0)A=0;else{s[5004]=(s[5004]|0)+1;A=cM((C<<3|3)+16|0)|0;if((A|0)==0)A=0;else{s[(A+19&-16)+ -4>>2]=A;A=A+19&-16}if((C|0)>0)P=0;else break;do{H=A+(P<<2)|0;if((H|0)!=0)s[H>>2]=s[L+(P<<2)>>2];P=P+1|0}while((P|0)!=(C|0))}while(0);if((L|0)==0){L=A;A=k;break}s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0);L=A;A=k}while(0);do{P=L+(C<<2)|0;if((P|0)!=0)s[P>>2]=0;C=C+1|0}while((C|0)!=(k|0))}C=k;k=k+ -2|0}s[L+(t<<2)>>2]=s[e+36>>2];s[L+(N<<2)>>2]=s[e+40>>2];N=N+1|0}else N=t;while(0)}while((N|0)!=0);if((L|0)==0){c=u;return}s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0);c=u;return}function hy(e){e=e|0;return}function py(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;a=+f[n+48>>2]- +f[t+48>>2];o=+f[n+52>>2]- +f[t+52>>2];i=+f[n+56>>2]- +f[t+56>>2];v=+f[t>>2];T=+f[n>>2];d=+f[t+16>>2];x=+f[n+16>>2];p=+f[t+32>>2];S=+f[n+32>>2];E=+f[n+4>>2];w=+f[n+20>>2];b=+f[n+36>>2];y=+f[n+8>>2];g=+f[n+24>>2];m=+f[n+40>>2];h=+f[t+4>>2];c=+f[t+20>>2];l=+f[t+36>>2];u=+f[t+8>>2];s=+f[t+24>>2];r=+f[t+40>>2];f[e>>2]=v*T+d*x+p*S;f[e+4>>2]=v*E+d*w+p*b;f[e+8>>2]=v*y+d*g+p*m;f[e+12>>2]=0;f[e+16>>2]=T*h+x*c+S*l;f[e+20>>2]=E*h+w*c+b*l;f[e+24>>2]=y*h+g*c+m*l;f[e+28>>2]=0;f[e+32>>2]=T*u+x*s+S*r;f[e+36>>2]=E*u+w*s+b*r;f[e+40>>2]=y*u+g*s+m*r;f[e+44>>2]=0;f[e+48>>2]=a*v+o*d+i*p;f[e+52>>2]=a*h+o*c+i*l;f[e+56>>2]=a*u+o*s+i*r;f[e+60>>2]=0;return}function dy(e,t,n,o,u,a){e=e|0;t=t|0;n=n|0;o=o|0;u=u|0;a=+a;var l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0;l=c;c=c+1664|0;h=s[o+4>>2]|0;p=s[o+12>>2]|0;A=s[h+4>>2]|0;if((A|0)<20){s[l+1424>>2]=9440;s[l+1592>>2]=0;f[l+1596>>2]=a;f[l+1588>>2]=+f[u+4>>2];f[l+1372>>2]=9999999747378752e-20;r[l+1396>>0]=0;s[l+1056>>2]=13248;s[l+1032>>2]=10152;s[l+1036>>2]=l+1064;s[l+1040>>2]=l+1056;s[l+1044>>2]=e;s[l+1048>>2]=h;s[l+1052>>2]=0;if(!(ek(l+1032|0,t,n,p,p,l+1424|0)|0)){c=l;return}h=l+1556|0;m=+f[h>>2];v=+f[l+1560>>2];d=+f[l+1564>>2];if(!(m*m+v*v+d*d>9999999747378752e-20)){c=l;return}a=+f[l+1588>>2];if(!(a<+f[u+4>>2])){c=l;return}L=1/+X(+(m*m+v*v+d*d));f[h>>2]=m*L;f[l+1560>>2]=v*L;f[l+1564>>2]=d*L;s[l+984>>2]=s[o+8>>2];s[l+988>>2]=0;s[l+992>>2]=s[h+0>>2];s[l+996>>2]=s[h+4>>2];s[l+1e3>>2]=s[h+8>>2];s[l+1004>>2]=s[h+12>>2];s[l+1008>>2]=s[l+1572>>2];s[l+1012>>2]=s[l+1576>>2];s[l+1016>>2]=s[l+1580>>2];s[l+1020>>2]=s[l+1584>>2];f[l+1024>>2]=a;+PD[s[(s[u>>2]|0)+12>>2]&15](u,l+984|0,1);c=l;return}if(!((A+ -21|0)>>>0<9)){if((A|0)!=31){c=l;return}CC(7544);if((s[h+16>>2]|0)>0){A=0;do{M=s[h+24>>2]|0;d=+f[M+(A*80|0)>>2];g=+f[M+(A*80|0)+4>>2];w=+f[M+(A*80|0)+8>>2];v=+f[M+(A*80|0)+16>>2];y=+f[M+(A*80|0)+20>>2];S=+f[M+(A*80|0)+24>>2];m=+f[M+(A*80|0)+32>>2];b=+f[M+(A*80|0)+36>>2];T=+f[M+(A*80|0)+40>>2];I=+f[M+(A*80|0)+48>>2];F=+f[M+(A*80|0)+52>>2];L=+f[M+(A*80|0)+56>>2];M=s[M+(A*80|0)+64>>2]|0;j=+f[p>>2];B=+f[p+4>>2];H=+f[p+8>>2];P=+f[p+16>>2];D=+f[p+20>>2];_=+f[p+24>>2];E=+f[p+32>>2];x=+f[p+36>>2];N=+f[p+40>>2];C=I*j+F*B+L*H+ +f[p+48>>2];k=I*P+F*D+L*_+ +f[p+52>>2];L=I*E+F*x+L*N+ +f[p+56>>2];f[l+1600>>2]=d*j+v*B+m*H;f[l+1604>>2]=g*j+y*B+b*H;f[l+1608>>2]=w*j+S*B+T*H;f[l+1612>>2]=0;f[l+1616>>2]=d*P+v*D+m*_;f[l+1620>>2]=g*P+y*D+b*_;f[l+1624>>2]=w*P+S*D+T*_;f[l+1628>>2]=0;f[l+1632>>2]=d*E+v*x+m*N;f[l+1636>>2]=g*E+y*x+b*N;f[l+1640>>2]=w*E+S*x+T*N;f[l+1644>>2]=0;f[l+1648>>2]=C;f[l+1652>>2]=k;f[l+1656>>2]=L;f[l+1660>>2]=0;i[l+32>>1]=1;i[l+34>>1]=-1;s[l+24>>2]=8024;s[l+36>>2]=u;s[l+40>>2]=A;f[l+28>>2]=+f[u+4>>2];O=s[o+8>>2]|0;s[l>>2]=o;s[l+4>>2]=M;s[l+8>>2]=O;s[l+12>>2]=l+1600;s[l+16>>2]=-1;s[l+20>>2]=A;dy(e,t,n,l,l+24|0,a);A=A+1|0}while((A|0)<(s[h+16>>2]|0))}o=s[5022]|0;M=(s[o+16>>2]|0)+ -1|0;s[o+16>>2]=M;if((M|0)!=0){c=l;return}do if((s[o+4>>2]|0)!=0){Pn(l+1600|0,0)|0;M=s[5008]|0;f[o+8>>2]=+(((s[l+1604>>2]|0)-(s[M+4>>2]|0)+(((s[l+1600>>2]|0)-(s[M>>2]|0)|0)*1e6|0)-(s[o+12>>2]|0)|0)>>>0)/1e3+ +f[o+8>>2];if((s[o+16>>2]|0)==0){o=s[5022]|0;break}else{c=l;return}}while(0);s[5022]=s[o+20>>2];c=l;return}if((A|0)==21){E=+f[p>>2];v=+f[p+16>>2];m=+f[p+32>>2];g=+f[p+4>>2];y=+f[p+20>>2];b=+f[p+36>>2];L=+f[p+8>>2];C=+f[p+24>>2];T=+f[p+40>>2];w=-+f[p+48>>2];d=-+f[p+52>>2];S=-+f[p+56>>2];x=+f[t+48>>2];N=+f[t+52>>2];k=+f[t+56>>2];f[l+968>>2]=E*w+v*d+m*S+(E*x+v*N+m*k);f[l+972>>2]=g*w+y*d+b*S+(g*x+y*N+b*k);f[l+976>>2]=L*w+C*d+T*S+(L*x+C*N+T*k);f[l+980>>2]=0;k=+f[n+48>>2];N=+f[n+52>>2];x=+f[n+56>>2];q=+f[n>>2];_=+f[n+16>>2];D=+f[n+32>>2];P=+f[n+4>>2];H=+f[n+20>>2];B=+f[n+36>>2];j=+f[n+8>>2];F=+f[n+24>>2];I=+f[n+40>>2];f[l+904>>2]=E*q+v*_+m*D;f[l+908>>2]=E*P+v*H+m*B;f[l+912>>2]=E*j+v*F+m*I;f[l+916>>2]=0;f[l+920>>2]=g*q+y*_+b*D;f[l+924>>2]=g*P+y*H+b*B;f[l+928>>2]=g*j+y*F+b*I;f[l+932>>2]=0;f[l+936>>2]=L*q+C*_+T*D;f[l+940>>2]=L*P+C*H+T*B;f[l+944>>2]=L*j+C*F+T*I;M=l+948|0;s[M+0>>2]=0;s[M+4>>2]=0;s[M+8>>2]=0;s[M+12>>2]=0;s[M+16>>2]=0;o=s[o+8>>2]|0;I=+CD[s[(s[h>>2]|0)+48>>2]&15](h);s[l+680>>2]=16256;s[l+684>>2]=e;s[l+688>>2]=s[t+0>>2];s[l+692>>2]=s[t+4>>2];s[l+696>>2]=s[t+8>>2];s[l+700>>2]=s[t+12>>2];s[l+704>>2]=s[t+16>>2];s[l+708>>2]=s[t+20>>2];s[l+712>>2]=s[t+24>>2];s[l+716>>2]=s[t+28>>2];s[l+720>>2]=s[t+32>>2];s[l+724>>2]=s[t+36>>2];s[l+728>>2]=s[t+40>>2];s[l+732>>2]=s[t+44>>2];s[l+736>>2]=s[t+48>>2];s[l+740>>2]=s[t+52>>2];s[l+744>>2]=s[t+56>>2];s[l+748>>2]=s[t+60>>2];s[l+752>>2]=s[n+0>>2];s[l+756>>2]=s[n+4>>2];s[l+760>>2]=s[n+8>>2];s[l+764>>2]=s[n+12>>2];s[l+768>>2]=s[n+16>>2];s[l+772>>2]=s[n+20>>2];s[l+776>>2]=s[n+24>>2];s[l+780>>2]=s[n+28>>2];s[l+784>>2]=s[n+32>>2];s[l+788>>2]=s[n+36>>2];s[l+792>>2]=s[n+40>>2];s[l+796>>2]=s[n+44>>2];s[l+800>>2]=s[n+48>>2];s[l+804>>2]=s[n+52>>2];s[l+808>>2]=s[n+56>>2];s[l+812>>2]=s[n+60>>2];s[l+816>>2]=s[p+0>>2];s[l+820>>2]=s[p+4>>2];s[l+824>>2]=s[p+8>>2];s[l+828>>2]=s[p+12>>2];s[l+832>>2]=s[p+16>>2];s[l+836>>2]=s[p+20>>2];s[l+840>>2]=s[p+24>>2];s[l+844>>2]=s[p+28>>2];s[l+848>>2]=s[p+32>>2];s[l+852>>2]=s[p+36>>2];s[l+856>>2]=s[p+40>>2];s[l+860>>2]=s[p+44>>2];s[l+864>>2]=s[p+48>>2];s[l+868>>2]=s[p+52>>2];s[l+872>>2]=s[p+56>>2];s[l+876>>2]=s[p+60>>2];f[l+884>>2]=I;s[l+680>>2]=8448;s[l+892>>2]=u;s[l+896>>2]=o;s[l+900>>2]=h;f[l+880>>2]=+f[u+4>>2];f[l+888>>2]=a;JD[s[(s[e>>2]|0)+8>>2]&127](e,l+904|0,l+664|0,l+648|0);o=s[h+48>>2]|0;s[l+1600>>2]=5992;s[l+1604>>2]=o;s[l+1608>>2]=l+680;o=s[h+52>>2]|0;if((r[o+60>>0]|0)==0){US(o,l+1600|0,l+968|0,E*w+v*d+m*S+(E*k+v*N+m*x),g*w+y*d+b*S+(g*k+y*N+b*x),L*w+C*d+T*S+(L*k+C*N+T*x),l+664|0,l+648|0);c=l;return}else{zS(o,l+1600|0,l+968|0,E*w+v*d+m*S+(E*k+v*N+m*x),g*w+y*d+b*S+(g*k+y*N+b*x),L*w+C*d+T*S+(L*k+C*N+T*x),l+664|0,l+648|0,s[o+56>>2]|0);c=l;return}}else if((A|0)==28){s[l+472>>2]=9440;s[l+640>>2]=0;f[l+644>>2]=a;f[l+636>>2]=+f[u+4>>2];s[l+448>>2]=10152;s[l+452>>2]=0;s[l+456>>2]=0;s[l+460>>2]=e;s[l+464>>2]=0;s[l+468>>2]=h;if(!(ek(l+448|0,t,n,p,p,l+472|0)|0)){c=l;return}h=l+604|0;a=+f[h>>2];d=+f[l+608>>2];v=+f[l+612>>2];if(!(a*a+d*d+v*v>9999999747378752e-20)){c=l;return}m=+f[l+636>>2];if(!(m<+f[u+4>>2])){c=l;return}q=1/+X(+(a*a+d*d+v*v));f[h>>2]=a*q;f[l+608>>2]=d*q;f[l+612>>2]=v*q;s[l+400>>2]=s[o+8>>2];s[l+404>>2]=0;s[l+408>>2]=s[h+0>>2];s[l+412>>2]=s[h+4>>2];s[l+416>>2]=s[h+8>>2];s[l+420>>2]=s[h+12>>2];s[l+424>>2]=s[l+620>>2];s[l+428>>2]=s[l+624>>2];s[l+432>>2]=s[l+628>>2];s[l+436>>2]=s[l+632>>2];f[l+440>>2]=m;+PD[s[(s[u>>2]|0)+12>>2]&15](u,l+400|0,1);c=l;return}else{w=+f[p>>2];E=+f[p+16>>2];S=+f[p+32>>2];x=+f[p+4>>2];T=+f[p+20>>2];N=+f[p+36>>2];H=+f[p+8>>2];j=+f[p+24>>2];I=+f[p+40>>2];D=-+f[p+48>>2];_=-+f[p+52>>2];L=-+f[p+56>>2];C=+f[t+48>>2];k=+f[t+52>>2];v=+f[t+56>>2];b=w*D+E*_+S*L+(w*C+E*k+S*v);m=x*D+T*_+N*L+(x*C+T*k+N*v);v=H*D+j*_+I*L+(H*C+j*k+I*v);k=+f[n+48>>2];C=+f[n+52>>2];d=+f[n+56>>2];y=w*D+E*_+S*L+(w*k+E*C+S*d);g=x*D+T*_+N*L+(x*k+T*C+N*d);d=H*D+j*_+I*L+(H*k+j*C+I*d);C=+f[n>>2];k=+f[n+16>>2];L=+f[n+32>>2];_=+f[n+4>>2];D=+f[n+20>>2];P=+f[n+36>>2];B=+f[n+8>>2];F=+f[n+24>>2];q=+f[n+40>>2];f[l+336>>2]=w*C+E*k+S*L;f[l+340>>2]=w*_+E*D+S*P;f[l+344>>2]=w*B+E*F+S*q;f[l+348>>2]=0;f[l+352>>2]=x*C+T*k+N*L;f[l+356>>2]=x*_+T*D+N*P;f[l+360>>2]=x*B+T*F+N*q;f[l+364>>2]=0;f[l+368>>2]=H*C+j*k+I*L;f[l+372>>2]=H*_+j*D+I*P;f[l+376>>2]=H*B+j*F+I*q;M=l+380|0;s[M+0>>2]=0;s[M+4>>2]=0;s[M+8>>2]=0;s[M+12>>2]=0;s[M+16>>2]=0;M=s[o+8>>2]|0;q=+CD[s[(s[h>>2]|0)+48>>2]&15](h);s[l+112>>2]=16256;s[l+116>>2]=e;s[l+120>>2]=s[t+0>>2];s[l+124>>2]=s[t+4>>2];s[l+128>>2]=s[t+8>>2];s[l+132>>2]=s[t+12>>2];s[l+136>>2]=s[t+16>>2];s[l+140>>2]=s[t+20>>2];s[l+144>>2]=s[t+24>>2];s[l+148>>2]=s[t+28>>2];s[l+152>>2]=s[t+32>>2];s[l+156>>2]=s[t+36>>2];s[l+160>>2]=s[t+40>>2];s[l+164>>2]=s[t+44>>2];s[l+168>>2]=s[t+48>>2];s[l+172>>2]=s[t+52>>2];s[l+176>>2]=s[t+56>>2];s[l+180>>2]=s[t+60>>2];s[l+184>>2]=s[n+0>>2];s[l+188>>2]=s[n+4>>2];s[l+192>>2]=s[n+8>>2];s[l+196>>2]=s[n+12>>2];s[l+200>>2]=s[n+16>>2];s[l+204>>2]=s[n+20>>2];s[l+208>>2]=s[n+24>>2];s[l+212>>2]=s[n+28>>2];s[l+216>>2]=s[n+32>>2];s[l+220>>2]=s[n+36>>2];s[l+224>>2]=s[n+40>>2];s[l+228>>2]=s[n+44>>2];s[l+232>>2]=s[n+48>>2];s[l+236>>2]=s[n+52>>2];s[l+240>>2]=s[n+56>>2];s[l+244>>2]=s[n+60>>2];s[l+248>>2]=s[p+0>>2];s[l+252>>2]=s[p+4>>2];s[l+256>>2]=s[p+8>>2];s[l+260>>2]=s[p+12>>2];s[l+264>>2]=s[p+16>>2];s[l+268>>2]=s[p+20>>2];s[l+272>>2]=s[p+24>>2];s[l+276>>2]=s[p+28>>2];s[l+280>>2]=s[p+32>>2];s[l+284>>2]=s[p+36>>2];s[l+288>>2]=s[p+40>>2];s[l+292>>2]=s[p+44>>2];s[l+296>>2]=s[p+48>>2];s[l+300>>2]=s[p+52>>2];s[l+304>>2]=s[p+56>>2];s[l+308>>2]=s[p+60>>2];f[l+316>>2]=q;s[l+112>>2]=8224;s[l+324>>2]=u;s[l+328>>2]=M;s[l+332>>2]=h;f[l+312>>2]=+f[u+4>>2];f[l+320>>2]=a;JD[s[(s[e>>2]|0)+8>>2]&127](e,l+336|0,l+96|0,l+80|0);f[l+64>>2]=b;f[l+68>>2]=m;f[l+72>>2]=v;f[l+76>>2]=0;if(y<b){f[l+64>>2]=y;E=y}else E=b;if(g<m){f[l+68>>2]=g;w=g}else w=m;if(d<v){f[l+72>>2]=d;a=d}else a=v;f[l+48>>2]=b;f[l+52>>2]=m;f[l+56>>2]=v;f[l+60>>2]=0;if(b<y)f[l+48>>2]=y;else y=b;if(m<g){f[l+52>>2]=g;m=g}if(v<d)f[l+56>>2]=d;else d=v;f[l+64>>2]=+f[l+96>>2]+E;f[l+68>>2]=+f[l+100>>2]+w;f[l+72>>2]=+f[l+104>>2]+a;f[l+48>>2]=+f[l+80>>2]+y;f[l+52>>2]=+f[l+84>>2]+m;f[l+56>>2]=+f[l+88>>2]+d;JD[s[(s[h>>2]|0)+64>>2]&127](h,l+112|0,l+64|0,l+48|0);c=l;return}}function vy(e){e=e|0;return}function my(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;u=c;c=c+256|0;s[u+32>>2]=7960;o=u+68|0;s[o+0>>2]=s[t+0>>2];s[o+4>>2]=s[t+4>>2];s[o+8>>2]=s[t+8>>2];s[o+12>>2]=s[t+12>>2];i=u+84|0;s[i+0>>2]=s[n+0>>2];s[i+4>>2]=s[n+4>>2];s[i+8>>2]=s[n+8>>2];s[i+12>>2]=s[n+12>>2];s[u+244>>2]=e;s[u+248>>2]=r;f[u+100>>2]=1;s[u+104>>2]=0;s[u+108>>2]=0;s[u+112>>2]=0;s[u+116>>2]=0;f[u+120>>2]=1;s[u+124>>2]=0;s[u+128>>2]=0;s[u+132>>2]=0;s[u+136>>2]=0;f[u+140>>2]=1;s[u+144>>2]=0;s[u+148>>2]=s[o+0>>2];s[u+152>>2]=s[o+4>>2];s[u+156>>2]=s[o+8>>2];s[u+160>>2]=s[o+12>>2];f[u+164>>2]=1;s[u+168>>2]=0;s[u+172>>2]=0;s[u+176>>2]=0;s[u+180>>2]=0;f[u+184>>2]=1;s[u+188>>2]=0;s[u+192>>2]=0;s[u+196>>2]=0;s[u+200>>2]=0;f[u+204>>2]=1;s[u+208>>2]=0;s[u+212>>2]=s[n+0>>2];s[u+216>>2]=s[n+4>>2];s[u+220>>2]=s[n+8>>2];s[u+224>>2]=s[n+12>>2];p=+f[n>>2]- +f[t>>2];a=+f[n+4>>2]- +f[t+4>>2];m=+f[n+8>>2]- +f[t+8>>2];l=1/+X(+(p*p+a*a+m*m));if(p*l==0)v=0xde0b6b000000000;else v=1/(p*l);f[u+36>>2]=v;if(a*l==0)d=0xde0b6b000000000;else d=1/(a*l);f[u+40>>2]=d;if(m*l==0)h=0xde0b6b000000000;else h=1/(m*l);f[u+44>>2]=h;s[u+52>>2]=v<0&1;s[u+56>>2]=d<0&1;s[u+60>>2]=h<0&1;f[u+64>>2]=p*l*(+f[i>>2]- +f[o>>2])+a*l*(+f[u+88>>2]- +f[u+72>>2])+m*l*(+f[u+92>>2]- +f[u+76>>2]);r=s[e+68>>2]|0;o=s[(s[r>>2]|0)+24>>2]|0;s[u+16>>2]=0;s[u+20>>2]=0;s[u+24>>2]=0;s[u+28>>2]=0;s[u+0>>2]=0;s[u+4>>2]=0;s[u+8>>2]=0;s[u+12>>2]=0;TD[o&7](r,t,n,u+32|0,u+16|0,u);c=u;return}function gy(e){e=e|0;return}function yy(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=+o;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;u=c;c=c+416|0;CC(7568);s[u+144>>2]=s[n+0>>2];s[u+148>>2]=s[n+4>>2];s[u+152>>2]=s[n+8>>2];s[u+156>>2]=s[n+12>>2];s[u+160>>2]=s[n+16>>2];s[u+164>>2]=s[n+20>>2];s[u+168>>2]=s[n+24>>2];s[u+172>>2]=s[n+28>>2];s[u+176>>2]=s[n+32>>2];s[u+180>>2]=s[n+36>>2];s[u+184>>2]=s[n+40>>2];s[u+188>>2]=s[n+44>>2];a=u+192|0;s[a+0>>2]=s[n+48>>2];s[a+4>>2]=s[n+52>>2];s[a+8>>2]=s[n+56>>2];s[a+12>>2]=s[n+60>>2];s[u+80>>2]=s[r+0>>2];s[u+84>>2]=s[r+4>>2];s[u+88>>2]=s[r+8>>2];s[u+92>>2]=s[r+12>>2];s[u+96>>2]=s[r+16>>2];s[u+100>>2]=s[r+20>>2];s[u+104>>2]=s[r+24>>2];s[u+108>>2]=s[r+28>>2];s[u+112>>2]=s[r+32>>2];s[u+116>>2]=s[r+36>>2];s[u+120>>2]=s[r+40>>2];s[u+124>>2]=s[r+44>>2];l=u+128|0;s[l+0>>2]=s[r+48>>2];s[l+4>>2]=s[r+52>>2];s[l+8>>2]=s[r+56>>2];s[l+12>>2]=s[r+60>>2];zd(u+144|0,u+80|0,u+212|0,u+208|0);w=+f[u+208>>2];h=w*+f[u+216>>2];g=w*+f[u+220>>2];f[u+32>>2]=+f[u+212>>2]*w;f[u+36>>2]=h;f[u+40>>2]=g;f[u+44>>2]=0;s[u+16>>2]=0;s[u+20>>2]=0;s[u+24>>2]=0;s[u+28>>2]=0;f[u+212>>2]=1;E=u+216|0;s[E+0>>2]=0;s[E+4>>2]=0;s[E+8>>2]=0;s[E+12>>2]=0;f[u+232>>2]=1;b=u+236|0;s[b+0>>2]=0;s[b+4>>2]=0;s[b+8>>2]=0;s[b+12>>2]=0;f[u+252>>2]=1;y=u+256|0;s[y+0>>2]=0;s[y+4>>2]=0;s[y+8>>2]=0;s[y+12>>2]=0;s[y+16>>2]=0;Qn(u+144|0,u);g=+f[u>>2];h=+f[u+4>>2];w=+f[u+8>>2];m=+f[u+12>>2];d=g*(2/(g*g+h*h+w*w+m*m));p=h*(2/(g*g+h*h+w*w+m*m));v=w*(2/(g*g+h*h+w*w+m*m));f[u+212>>2]=1-(h*p+w*v);f[E>>2]=g*p-m*v;f[u+220>>2]=g*v+m*p;f[u+224>>2]=0;f[u+228>>2]=g*p+m*v;f[u+232>>2]=1-(g*d+w*v);f[b>>2]=h*v-m*d;f[u+240>>2]=0;f[u+244>>2]=g*v-m*p;f[u+248>>2]=h*v+m*d;f[u+252>>2]=1-(g*d+h*p);f[y>>2]=0;ey(t,u+212|0,u+16|0,u+32|0,u+64|0,u+48|0);s[u+212>>2]=7848;s[u+248>>2]=s[n+0>>2];s[u+252>>2]=s[n+4>>2];s[u+256>>2]=s[n+8>>2];s[u+260>>2]=s[n+12>>2];s[u+264>>2]=s[n+16>>2];s[u+268>>2]=s[n+20>>2];s[u+272>>2]=s[n+24>>2];s[u+276>>2]=s[n+28>>2];s[u+280>>2]=s[n+32>>2];s[u+284>>2]=s[n+36>>2];s[u+288>>2]=s[n+40>>2];s[u+292>>2]=s[n+44>>2];y=u+296|0;s[y+0>>2]=s[n+48>>2];s[y+4>>2]=s[n+52>>2];s[y+8>>2]=s[n+56>>2];s[y+12>>2]=s[n+60>>2];s[u+312>>2]=s[r+0>>2];s[u+316>>2]=s[r+4>>2];s[u+320>>2]=s[r+8>>2];s[u+324>>2]=s[r+12>>2];s[u+328>>2]=s[r+16>>2];s[u+332>>2]=s[r+20>>2];s[u+336>>2]=s[r+24>>2];s[u+340>>2]=s[r+28>>2];s[u+344>>2]=s[r+32>>2];s[u+348>>2]=s[r+36>>2];s[u+352>>2]=s[r+40>>2];s[u+356>>2]=s[r+44>>2];n=u+360|0;s[n+0>>2]=s[r+48>>2];s[n+4>>2]=s[r+52>>2];s[n+8>>2]=s[r+56>>2];s[n+12>>2]=s[r+60>>2];s[u+392>>2]=e;s[u+396>>2]=i;f[u+400>>2]=o;s[u+404>>2]=t;p=+f[n>>2]- +f[y>>2];o=+f[u+364>>2]- +f[u+300>>2];h=+f[u+368>>2]- +f[u+304>>2];d=1/+X(+(p*p+o*o+h*h));if(p*d==0)v=0xde0b6b000000000;else v=1/(p*d);f[u+216>>2]=v;if(o*d==0)m=0xde0b6b000000000;else m=1/(o*d);f[u+220>>2]=m;if(h*d==0)g=0xde0b6b000000000;else g=1/(h*d);f[u+224>>2]=g;s[u+232>>2]=v<0&1;s[u+236>>2]=m<0&1;s[u+240>>2]=g<0&1;f[u+244>>2]=h*h*d+(p*p*d+o*o*d);E=s[e+68>>2]|0;TD[s[(s[E>>2]|0)+24>>2]&7](E,a,l,u+212|0,u+64|0,u+48|0);a=s[5022]|0;E=(s[a+16>>2]|0)+ -1|0;s[a+16>>2]=E;if((E|0)!=0){c=u;return}do if((s[a+4>>2]|0)!=0){Pn(u+212|0,0)|0;E=s[5008]|0;f[a+8>>2]=+(((s[u+216>>2]|0)-(s[E+4>>2]|0)+(((s[u+212>>2]|0)-(s[E>>2]|0)|0)*1e6|0)-(s[a+12>>2]|0)|0)>>>0)/1e3+ +f[a+8>>2];if((s[a+16>>2]|0)==0){a=s[5022]|0;break}else{c=u;return}}while(0);s[5022]=s[a+20>>2];c=u;return}function by(e){e=e|0;return}function wy(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;i=c;c=c+96|0;o=s[t+192>>2]|0;s[i+64>>2]=0;s[i+68>>2]=o;s[i+72>>2]=t;s[i+76>>2]=t+4;s[i+80>>2]=-1;s[i+84>>2]=-1;t=s[n+192>>2]|0;s[i+40>>2]=0;s[i+44>>2]=t;s[i+48>>2]=n;s[i+52>>2]=n+4;s[i+56>>2]=-1;s[i+60>>2]=-1;n=s[e+24>>2]|0;n=yD[s[(s[n>>2]|0)+8>>2]&31](n,i+64|0,i+40|0,0)|0;if((n|0)==0){c=i;return}s[i+4>>2]=0;s[i+8>>2]=i+64;s[i+12>>2]=i+40;s[i>>2]=7728;s[i+32>>2]=r;aD[s[(s[n>>2]|0)+8>>2]&31](n,i+64|0,i+40|0,e+28|0,i);lD[s[s[n>>2]>>2]&511](n);o=s[e+24>>2]|0;hD[s[(s[o>>2]|0)+60>>2]&127](o,n);c=i;return}function Ey(e){e=e|0;return}function Sy(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0;i=c;c=c+480|0;o=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;VD[s[(s[o>>2]|0)+56>>2]&7](o,t,1);o=s[n+4>>2]|0;switch(o|0){case 9:{o=s[n+92>>2]|0;if((o|0)<=0){c=i;return}do{o=o+ -1|0;g=s[n+100>>2]|0;A=+f[g+(o<<4)>>2];L=+f[g+(o<<4)+4>>2];h=+f[g+(o<<4)+8>>2];g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;m=s[(s[g>>2]|0)+16>>2]|0;d=+f[(s[n+120>>2]|0)+(o<<2)>>2];C=+f[t>>2];N=+f[t+4>>2];k=+f[t+8>>2];x=+f[t+16>>2];S=+f[t+20>>2];T=+f[t+24>>2];w=+f[t+32>>2];b=+f[t+36>>2];E=+f[t+40>>2];y=A*C+L*N+h*k+ +f[t+48>>2];l=A*x+L*S+h*T+ +f[t+52>>2];h=A*w+L*b+h*E+ +f[t+56>>2];f[i+320>>2]=C+N*0+k*0;f[i+324>>2]=C*0+N+k*0;f[i+328>>2]=k+(C*0+N*0);f[i+332>>2]=0;f[i+336>>2]=x+S*0+T*0;f[i+340>>2]=x*0+S+T*0;f[i+344>>2]=T+(x*0+S*0);f[i+348>>2]=0;f[i+352>>2]=w+b*0+E*0;f[i+356>>2]=w*0+b+E*0;f[i+360>>2]=E+(w*0+b*0);f[i+364>>2]=0;f[i+368>>2]=y;f[i+372>>2]=l;f[i+376>>2]=h;f[i+380>>2]=0;gD[m&0](g,d,i+320|0,r)}while((o|0)>0);c=i;return};case 8:{A=+CD[s[(s[n>>2]|0)+48>>2]&15](n);g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;gD[s[(s[g>>2]|0)+16>>2]&0](g,A,t,r);c=i;return};case 28:{A=+f[n+64>>2];g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;AD[s[(s[g>>2]|0)+88>>2]&0](g,n+48|0,A,t,r);c=i;return};case 11:{L=+f[n+56>>2];A=+f[n+60>>2];g=s[n+68>>2]|0;m=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;mD[s[(s[m>>2]|0)+84>>2]&0](m,L,A,g,t,r);c=i;return};case 31:{o=s[n+16>>2]|0;if((o|0)<=0){c=i;return}do{o=o+ -1|0;g=s[n+24>>2]|0;l=+f[g+(o*80|0)>>2];y=+f[g+(o*80|0)+4>>2];E=+f[g+(o*80|0)+8>>2];h=+f[g+(o*80|0)+16>>2];b=+f[g+(o*80|0)+20>>2];x=+f[g+(o*80|0)+24>>2];d=+f[g+(o*80|0)+32>>2];w=+f[g+(o*80|0)+36>>2];N=+f[g+(o*80|0)+40>>2];j=+f[g+(o*80|0)+48>>2];B=+f[g+(o*80|0)+52>>2];A=+f[g+(o*80|0)+56>>2];g=s[g+(o*80|0)+64>>2]|0;m=s[(s[e>>2]|0)+28>>2]|0;H=+f[t>>2];P=+f[t+4>>2];D=+f[t+8>>2];_=+f[t+16>>2];M=+f[t+20>>2];O=+f[t+24>>2];S=+f[t+32>>2];T=+f[t+36>>2];C=+f[t+40>>2];k=j*H+B*P+A*D+ +f[t+48>>2];L=j*_+B*M+A*O+ +f[t+52>>2];A=j*S+B*T+A*C+ +f[t+56>>2];f[i+416>>2]=l*H+h*P+d*D;f[i+420>>2]=y*H+b*P+w*D;f[i+424>>2]=E*H+x*P+N*D;f[i+428>>2]=0;f[i+432>>2]=l*_+h*M+d*O;f[i+436>>2]=y*_+b*M+w*O;f[i+440>>2]=E*_+x*M+N*O;f[i+444>>2]=0;f[i+448>>2]=l*S+h*T+d*C;f[i+452>>2]=y*S+b*T+w*C;f[i+456>>2]=E*S+x*T+N*C;f[i+460>>2]=0;f[i+464>>2]=k;f[i+468>>2]=L;f[i+472>>2]=A;f[i+476>>2]=0;JD[m&127](e,i+416|0,g,r)}while((o|0)>0);c=i;return};case 10:{g=s[n+52>>2]|0;B=+f[n+(((g+2|0)%3|0)<<2)+28>>2];j=+f[n+(g<<2)+28>>2];m=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;mD[s[(s[m>>2]|0)+76>>2]&0](m,B,j,g,t,r);c=i;return};case 0:{s[i+400>>2]=s[n+28>>2];s[i+404>>2]=s[n+32>>2];s[i+408>>2]=s[n+36>>2];s[i+412>>2]=s[n+40>>2];H=+CD[s[(s[n>>2]|0)+48>>2]&15](n);B=+CD[s[(s[n>>2]|0)+48>>2]&15](n);j=+CD[s[(s[n>>2]|0)+48>>2]&15](n);H=H+ +f[i+400>>2];f[i+400>>2]=H;B=B+ +f[i+404>>2];f[i+404>>2]=B;j=j+ +f[i+408>>2];f[i+408>>2]=j;g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;m=s[(s[g>>2]|0)+72>>2]|0;f[i+384>>2]=-H;f[i+388>>2]=-B;f[i+392>>2]=-j;f[i+396>>2]=0;aD[m&31](g,i+384|0,i+400|0,t,r);c=i;return};case 13:{g=s[n+52>>2]|0;B=+CD[s[(s[n>>2]|0)+92>>2]&15](n);s[i+304>>2]=s[n+28>>2];s[i+308>>2]=s[n+32>>2];s[i+312>>2]=s[n+36>>2];s[i+316>>2]=s[n+40>>2];P=+CD[s[(s[n>>2]|0)+48>>2]&15](n);H=+CD[s[(s[n>>2]|0)+48>>2]&15](n);j=+CD[s[(s[n>>2]|0)+48>>2]&15](n);f[i+304>>2]=P+ +f[i+304>>2];f[i+308>>2]=H+ +f[i+308>>2];f[i+312>>2]=j+ +f[i+312>>2];j=+f[i+304+(g<<2)>>2];m=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;mD[s[(s[m>>2]|0)+80>>2]&0](m,B,j,g,t,r);c=i;return};default:{e:do if((o|0)<7){u=s[n+52>>2]|0;if((u|0)==0){if((dD[s[(s[n>>2]|0)+100>>2]&127](n)|0)<=0)break;o=0;while(1){JD[s[(s[n>>2]|0)+104>>2]&127](n,o,i+208|0,i+192|0);H=+f[i+208>>2];x=+f[t>>2];D=+f[i+212>>2];T=+f[t+4>>2];M=+f[i+216>>2];N=+f[t+8>>2];k=+f[t+16>>2];L=+f[t+20>>2];A=+f[t+24>>2];_=+f[t+32>>2];P=+f[t+36>>2];B=+f[t+40>>2];C=+f[t+48>>2];O=+f[t+52>>2];j=+f[t+56>>2];f[i+176>>2]=H*x+D*T+M*N+C;f[i+180>>2]=H*k+D*L+M*A+O;f[i+184>>2]=H*_+D*P+M*B+j;f[i+188>>2]=0;M=+f[i+192>>2];D=+f[i+196>>2];H=+f[i+200>>2];f[i+160>>2]=M*x+D*T+H*N+C;f[i+164>>2]=M*k+D*L+H*A+O;f[i+168>>2]=M*_+D*P+H*B+j;f[i+172>>2]=0;g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;JD[s[(s[g>>2]|0)+8>>2]&127](g,i+176|0,i+160|0,r);o=o+1|0;if((o|0)>=(dD[s[(s[n>>2]|0)+100>>2]&127](n)|0))break e}}if((s[u+28>>2]|0)>0){o=0;do{p=s[u+36>>2]|0;a=s[p+(o*36|0)+4>>2]|0;t:do if((a|0)>0){v=s[p+(o*36|0)+12>>2]|0;m=v;d=0;h=0;l=0;v=s[v+(a+ -1<<2)>>2]|0;g=0;while(1){p=s[m+(g<<2)>>2]|0;m=s[u+16>>2]|0;d=d+ +f[m+(p<<4)>>2];h=h+ +f[m+(p<<4)+4>>2];l=l+ +f[m+(p<<4)+8>>2];m=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;F=s[(s[m>>2]|0)+8>>2]|0;I=s[u+16>>2]|0;H=+f[I+(v<<4)>>2];x=+f[t>>2];D=+f[I+(v<<4)+4>>2];T=+f[t+4>>2];M=+f[I+(v<<4)+8>>2];N=+f[t+8>>2];k=+f[t+16>>2];L=+f[t+20>>2];A=+f[t+24>>2];_=+f[t+32>>2];P=+f[t+36>>2];B=+f[t+40>>2];C=+f[t+48>>2];O=+f[t+52>>2];j=+f[t+56>>2];f[i+288>>2]=H*x+D*T+M*N+C;f[i+292>>2]=H*k+D*L+M*A+O;f[i+296>>2]=H*_+D*P+M*B+j;f[i+300>>2]=0;M=+f[I+(p<<4)>>2];D=+f[I+(p<<4)+4>>2];H=+f[I+(p<<4)+8>>2];f[i+272>>2]=M*x+D*T+H*N+C;f[i+276>>2]=M*k+D*L+H*A+O;f[i+280>>2]=M*_+D*P+H*B+j;f[i+284>>2]=0;JD[F&127](m,i+288|0,i+272|0,r);g=g+1|0;v=s[u+36>>2]|0;if((g|0)>=(s[v+(o*36|0)+4>>2]|0))break t;m=s[v+(o*36|0)+12>>2]|0;v=p}}else{d=0;h=0;l=0}while(0);d=d*(1/+(a|0));h=h*(1/+(a|0));l=l*(1/+(a|0));I=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;if(((dD[s[(s[I>>2]|0)+48>>2]&127](I)|0)&16384|0)!=0){f[i+256>>2]=1;f[i+260>>2]=1;f[i+264>>2]=0;f[i+268>>2]=0;I=s[u+36>>2]|0;M=+f[I+(o*36|0)+20>>2];D=+f[I+(o*36|0)+24>>2];H=+f[I+(o*36|0)+28>>2];I=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;F=s[(s[I>>2]|0)+8>>2]|0;x=+f[t>>2];T=+f[t+4>>2];N=+f[t+8>>2];k=+f[t+16>>2];L=+f[t+20>>2];A=+f[t+24>>2];_=+f[t+32>>2];P=+f[t+36>>2];B=+f[t+40>>2];C=+f[t+48>>2];O=+f[t+52>>2];j=+f[t+56>>2];f[i+240>>2]=d*x+h*T+l*N+C;f[i+244>>2]=d*k+h*L+l*A+O;f[i+248>>2]=d*_+h*P+l*B+j;f[i+252>>2]=0;f[i+224>>2]=(d+M)*x+(h+D)*T+(l+H)*N+C;f[i+228>>2]=(d+M)*k+(h+D)*L+(l+H)*A+O;f[i+232>>2]=(d+M)*_+(h+D)*P+(l+H)*B+j;f[i+236>>2]=0;JD[F&127](I,i+240|0,i+224|0,i+256|0)}o=o+1|0}while((o|0)<(s[u+28>>2]|0))}}while(0);o=s[n+4>>2]|0;if((o+ -21|0)>>>0<9){f[i+144>>2]=0xde0b6b000000000;f[i+148>>2]=0xde0b6b000000000;f[i+152>>2]=0xde0b6b000000000;f[i+156>>2]=0;f[i+128>>2]=-0xde0b6b000000000;f[i+132>>2]=-0xde0b6b000000000;f[i+136>>2]=-0xde0b6b000000000;f[i+140>>2]=0;o=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;s[i+32>>2]=7624;s[i+36>>2]=7648;s[i+40>>2]=o;s[i+44>>2]=s[r+0>>2];s[i+48>>2]=s[r+4>>2];s[i+52>>2]=s[r+8>>2];s[i+56>>2]=s[r+12>>2];s[i+60>>2]=s[t+0>>2];s[i+64>>2]=s[t+4>>2];s[i+68>>2]=s[t+8>>2];s[i+72>>2]=s[t+12>>2];s[i+76>>2]=s[t+16>>2];s[i+80>>2]=s[t+20>>2];s[i+84>>2]=s[t+24>>2];s[i+88>>2]=s[t+28>>2];s[i+92>>2]=s[t+32>>2];s[i+96>>2]=s[t+36>>2];s[i+100>>2]=s[t+40>>2];s[i+104>>2]=s[t+44>>2];s[i+108>>2]=s[t+48>>2];s[i+112>>2]=s[t+52>>2];s[i+116>>2]=s[t+56>>2];s[i+120>>2]=s[t+60>>2];JD[s[(s[n>>2]|0)+64>>2]&127](n,i+32|0,i+128|0,i+144|0);o=s[n+4>>2]|0}if((o|0)!=3){c=i;return}f[i+16>>2]=0xde0b6b000000000;f[i+20>>2]=0xde0b6b000000000;f[i+24>>2]=0xde0b6b000000000;f[i+28>>2]=0;f[i>>2]=-0xde0b6b000000000;f[i+4>>2]=-0xde0b6b000000000;f[i+8>>2]=-0xde0b6b000000000;f[i+12>>2]=0;I=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;s[i+32>>2]=7624;s[i+36>>2]=7648;s[i+40>>2]=I;s[i+44>>2]=s[r+0>>2];s[i+48>>2]=s[r+4>>2];s[i+52>>2]=s[r+8>>2];s[i+56>>2]=s[r+12>>2];s[i+60>>2]=s[t+0>>2];s[i+64>>2]=s[t+4>>2];s[i+68>>2]=s[t+8>>2];s[i+72>>2]=s[t+12>>2];s[i+76>>2]=s[t+16>>2];s[i+80>>2]=s[t+20>>2];s[i+84>>2]=s[t+24>>2];s[i+88>>2]=s[t+28>>2];s[i+92>>2]=s[t+32>>2];s[i+96>>2]=s[t+36>>2];s[i+100>>2]=s[t+40>>2];s[i+104>>2]=s[t+44>>2];s[i+108>>2]=s[t+48>>2];s[i+112>>2]=s[t+52>>2];s[i+116>>2]=s[t+56>>2];s[i+120>>2]=s[t+60>>2];I=s[n+92>>2]|0;JD[s[(s[I>>2]|0)+8>>2]&127](I,i+36|0,i,i+16|0);c=i;return}}}function xy(e){e=e|0;return}function Ty(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;t=c;c=c+112|0;if(((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0?(g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0,((dD[s[(s[g>>2]|0)+48>>2]&127](g)|0)&8|0)!=0):0)?(n=s[e+24>>2]|0,n=dD[s[(s[n>>2]|0)+36>>2]&127](n)|0,f[t+96>>2]=1,f[t+100>>2]=1,f[t+104>>2]=0,f[t+108>>2]=0,(n|0)>0):0){m=0;do{o=s[e+24>>2]|0;o=DD[s[(s[o>>2]|0)+40>>2]&31](o,m)|0;u=s[o+748>>2]|0;if((u|0)>0){i=0;do{g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;cD[s[(s[g>>2]|0)+32>>2]&0](g,o+(i*184|0)+36|0,o+(i*184|0)+68|0,+f[o+(i*184|0)+84>>2],s[o+(i*184|0)+152>>2]|0,t+96|0);i=i+1|0}while((i|0)!=(u|0))}m=m+1|0}while((m|0)!=(n|0))}if((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)==0){c=t;return}g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;if(((dD[s[(s[g>>2]|0)+48>>2]&127](g)|0)&3|0)==0){c=t;return}if((s[e+8>>2]|0)<=0){c=t;return}u=t+84|0;o=t+88|0;i=t+92|0;n=0;do{m=s[(s[e+16>>2]|0)+(n<<2)>>2]|0;if((s[m+204>>2]&32|0)==0){if((dD[s[(s[e>>2]|0)+20>>2]&127](e)|0)!=0?(g=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0,((dD[s[(s[g>>2]|0)+48>>2]&127](g)|0)&1|0)!=0):0){f[t+80>>2]=1;f[u>>2]=1;f[o>>2]=1;f[i>>2]=0;switch(s[m+216>>2]|0){case 1:{f[t+80>>2]=1;f[u>>2]=1;f[o>>2]=1;f[i>>2]=0;break};case 4:{f[t+80>>2]=1;f[u>>2]=0;f[o>>2]=0;f[i>>2]=0;break};case 5:{f[t+80>>2]=1;f[u>>2]=1;f[o>>2]=0;f[i>>2]=0;break};case 2:{f[t+80>>2]=0;f[u>>2]=1;f[o>>2]=0;f[i>>2]=0;break};case 3:{f[t+80>>2]=0;f[u>>2]=1;f[o>>2]=1;f[i>>2]=0;break};default:{f[t+80>>2]=1;f[u>>2]=0;f[o>>2]=0;f[i>>2]=0}}JD[s[(s[e>>2]|0)+28>>2]&127](e,m+4|0,s[m+192>>2]|0,t+80|0)}g=s[e+72>>2]|0;if((g|0)!=0?((dD[s[(s[g>>2]|0)+48>>2]&127](g)|0)&2|0)!=0:0){f[t+32>>2]=1;f[t+36>>2]=0;f[t+40>>2]=0;f[t+44>>2]=0;g=s[m+192>>2]|0;JD[s[(s[g>>2]|0)+8>>2]&127](g,m+4|0,t+64|0,t+48|0);f[t+64>>2]=+f[t+64>>2]+ -.019999999552965164;f[t+68>>2]=+f[t+68>>2]+ -.019999999552965164;f[t+72>>2]=+f[t+72>>2]+ -.019999999552965164;f[t+48>>2]=+f[t+48>>2]+.019999999552965164;f[t+52>>2]=+f[t+52>>2]+.019999999552965164;f[t+56>>2]=+f[t+56>>2]+.019999999552965164;do if(((r[e+44>>0]|0)!=0?(s[m+236>>2]|0)==2:0)?(s[m+204>>2]&3|0)==0:0){g=s[m+192>>2]|0;JD[s[(s[g>>2]|0)+8>>2]&127](g,m+68|0,t+16|0,t);v=+f[t+16>>2]+ -.019999999552965164;f[t+16>>2]=v;d=+f[t+20>>2]+ -.019999999552965164;f[t+20>>2]=d;p=+f[t+24>>2]+ -.019999999552965164;f[t+24>>2]=p;h=+f[t>>2]+.019999999552965164;f[t>>2]=h;l=+f[t+4>>2]+.019999999552965164;f[t+4>>2]=l;a=+f[t+8>>2]+.019999999552965164;f[t+8>>2]=a;if(v<+f[t+64>>2])f[t+64>>2]=v;if(d<+f[t+68>>2])f[t+68>>2]=d;if(p<+f[t+72>>2])f[t+72>>2]=p;p=+f[t+28>>2];if(p<+f[t+76>>2])f[t+76>>2]=p;if(+f[t+48>>2]<h)f[t+48>>2]=h;if(+f[t+52>>2]<l)f[t+52>>2]=l;if(+f[t+56>>2]<a)f[t+56>>2]=a;a=+f[t+12>>2];if(!(+f[t+60>>2]<a))break;f[t+60>>2]=a}while(0);g=s[e+72>>2]|0;JD[s[(s[g>>2]|0)+52>>2]&127](g,t+64|0,t+48|0,t+32|0)}}n=n+1|0}while((n|0)<(s[e+8>>2]|0));c=t;return}function Ny(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;a=c;c=c+80|0;g=s[e+8>>2]|0;if((g|0)>0){h=0;do{p=s[(s[e+16>>2]|0)+(h<<2)>>2]|0;if((s[p+236>>2]|0)==1){hD[s[(s[p>>2]|0)+24>>2]&127](p,t);g=s[e+8>>2]|0}h=h+1|0}while((h|0)<(g|0))}r[a+16>>0]=1;s[a+12>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;r[a+36>>0]=1;s[a+32>>2]=0;s[a+24>>2]=0;s[a+28>>2]=0;r[a+56>>0]=1;s[a+52>>2]=0;s[a+44>>2]=0;s[a+48>>2]=0;r[a+76>>0]=1;s[a+72>>2]=0;s[a+64>>2]=0;s[a+68>>2]=0;if((g|0)<=0){ky(a);c=a;return}w=-1;b=0;v=0;y=0;m=0;h=0;while(1){p=s[(s[(s[e+16>>2]|0)+(h<<2)>>2]|0)+192>>2]|0;d=(p+~(p<<15)>>10^p+~(p<<15))*9|0;d=(d>>6^d)+~((d>>6^d)<<11)>>16^(d>>6^d)+~((d>>6^d)<<11);w=d&w;e:do if(w>>>0<b>>>0?(u=s[v+(w<<2)>>2]|0,!((u|0)==-1)):0){w=s[a+72>>2]|0;E=u;while(1){if((p|0)==(s[w+(E<<3)>>2]|0))break;E=s[y+(E<<2)>>2]|0;if((E|0)==-1){i=15;break e}}if(!(!((E|0)==-1)?((s[a+52>>2]|0)+(E<<2)|0)!=0:0))i=15}else i=15;while(0);if((i|0)==15){i=0;g=d&m+ -1;t:do if(g>>>0<b>>>0?(o=s[v+(g<<2)>>2]|0,!((o|0)==-1)):0){b=s[a+72>>2]|0;w=o;while(1){if((p|0)==(s[b+(w<<3)>>2]|0))break;w=s[y+(w<<2)>>2]|0;if((w|0)==-1){i=22;break t}}if(!((w|0)==-1))s[(s[a+52>>2]|0)+(w<<2)>>2]=p;else i=22}else i=22;while(0);if((i|0)==22){i=0;v=s[a+44>>2]|0;if((v|0)==(m|0)){y=(m|0)==0?1:m<<1;if((m|0)<(y|0)){if((y|0)!=0?(s[5004]=(s[5004]|0)+1,l=cM((y<<2|3)+16|0)|0,(l|0)!=0):0){s[(l+19&-16)+ -4>>2]=l;b=l+19&-16}else b=0;if((m|0)>0){w=0;do{E=b+(w<<2)|0;if((E|0)!=0)s[E>>2]=s[(s[a+52>>2]|0)+(w<<2)>>2];w=w+1|0}while((w|0)!=(m|0))}w=s[a+52>>2]|0;if((w|0)!=0){if((r[a+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[w+ -4>>2]|0)}s[a+52>>2]=0}r[a+56>>0]=1;s[a+52>>2]=b;s[a+48>>2]=y;y=m}else y=m}else y=v;b=(s[a+52>>2]|0)+(y<<2)|0;if((b|0)!=0)s[b>>2]=p;s[a+44>>2]=y+1;b=s[a+64>>2]|0;if((b|0)==(s[a+68>>2]|0)?(f=(b|0)==0?1:b<<1,(b|0)<(f|0)):0){if((f|0)!=0?(s[5004]=(s[5004]|0)+1,n=cM((f<<3|3)+16|0)|0,(n|0)!=0):0){s[(n+19&-16)+ -4>>2]=n;y=n+19&-16}else y=0;if((b|0)>0){E=0;do{w=y+(E<<3)|0;if((w|0)!=0){x=(s[a+72>>2]|0)+(E<<3)|0;S=s[x+4>>2]|0;s[w>>2]=s[x>>2];s[w+4>>2]=S}E=E+1|0}while((E|0)!=(b|0))}b=s[a+72>>2]|0;if((b|0)!=0){if((r[a+76>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[b+ -4>>2]|0)}s[a+72>>2]=0}r[a+76>>0]=1;s[a+72>>2]=y;s[a+68>>2]=f;b=s[a+64>>2]|0}y=(s[a+72>>2]|0)+(b<<3)|0;if((y|0)!=0){s[y>>2]=p;s[y+4>>2]=0}s[a+64>>2]=b+1;y=s[a+48>>2]|0;if((m|0)<(y|0)){m=s[a+4>>2]|0;do if((m|0)<(y|0)){if((m|0)<=(y|0)){if((s[a+8>>2]|0)<(y|0)){do if((y|0)==0)g=0;else{s[5004]=(s[5004]|0)+1;g=cM((y<<2|3)+16|0)|0;if((g|0)==0){g=0;break}s[(g+19&-16)+ -4>>2]=g;g=g+19&-16}while(0);E=s[a+12>>2]|0;if((m|0)>0){w=0;do{b=g+(w<<2)|0;if((b|0)!=0)s[b>>2]=s[E+(w<<2)>>2];w=w+1|0}while((w|0)!=(m|0))}if((E|0)!=0){if((r[a+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[E+ -4>>2]|0)}s[a+12>>2]=0}r[a+16>>0]=1;s[a+12>>2]=g;s[a+8>>2]=y}else g=s[a+12>>2]|0;b=m;do{w=g+(b<<2)|0;if((w|0)!=0)s[w>>2]=0;b=b+1|0}while((b|0)!=(y|0))}s[a+4>>2]=y;g=s[a+24>>2]|0;if((g|0)<(y|0)){if((s[a+28>>2]|0)<(y|0)){do if((y|0)==0)b=0;else{s[5004]=(s[5004]|0)+1;b=cM((y<<2|3)+16|0)|0;if((b|0)==0){b=0;break}s[(b+19&-16)+ -4>>2]=b;b=b+19&-16}while(0);E=s[a+32>>2]|0;if((g|0)>0){S=0;do{w=b+(S<<2)|0;if((w|0)!=0)s[w>>2]=s[E+(S<<2)>>2];S=S+1|0}while((S|0)!=(g|0))}if((E|0)!=0){if((r[a+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[E+ -4>>2]|0)}s[a+32>>2]=0}r[a+36>>0]=1;s[a+32>>2]=b;s[a+28>>2]=y}else b=s[a+32>>2]|0;do{w=b+(g<<2)|0;if((w|0)!=0)s[w>>2]=0;g=g+1|0}while((g|0)!=(y|0))}s[a+24>>2]=y;if((y|0)>0){vM(s[a+12>>2]|0,-1,y<<2|0)|0;vM(s[a+32>>2]|0,-1,y<<2|0)|0}if((m|0)<=0){y=s[a+48>>2]|0;break}b=s[a+72>>2]|0;g=s[a+12>>2]|0;E=s[a+32>>2]|0;y=s[a+48>>2]|0;w=0;do{x=s[b+(w<<3)>>2]|0;x=(x+~(x<<15)>>10^x+~(x<<15))*9|0;x=g+((((x>>6^x)+~((x>>6^x)<<11)>>16^(x>>6^x)+~((x>>6^x)<<11))&y+ -1)<<2)|0;s[E+(w<<2)>>2]=s[x>>2];s[x>>2]=w;w=w+1|0}while((w|0)!=(m|0))}while(0);m=y;g=d&y+ -1}else m=y;x=s[a+12>>2]|0;S=x+(g<<2)|0;y=s[a+32>>2]|0;s[y+(v<<2)>>2]=s[S>>2];s[S>>2]=v;v=x}hD[s[(s[p>>2]|0)+60>>2]&127](p,t);g=s[e+8>>2]|0}h=h+1|0;if((h|0)>=(g|0))break;w=m+ -1|0;b=s[a+4>>2]|0}ky(a);c=a;return}function Cy(e,t){e=e|0;t=t|0;var n=0;n=c;lD[s[(s[t>>2]|0)+32>>2]&511](t);Ny(e,t);lD[s[(s[t>>2]|0)+36>>2]&511](t);c=n;return}function ky(e){e=e|0;var t=0,n=0;t=c;n=s[e+72>>2]|0;if((n|0)!=0){if((r[e+76>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+72>>2]=0}r[e+76>>0]=1;s[e+72>>2]=0;s[e+64>>2]=0;s[e+68>>2]=0;n=s[e+52>>2]|0;if((n|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;n=s[e+12>>2]|0;if((n|0)==0){r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;n=e+8|0;s[n>>2]=0;c=t;return}if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+12>>2]=0;r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;n=e+8|0;s[n>>2]=0;c=t;return}function Ly(e){e=e|0;return}function Ay(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Oy(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0;n=c;c=c+96|0;v=+f[t>>2];u=+f[e+28>>2];m=+f[t+4>>2];l=+f[e+32>>2];g=+f[t+8>>2];p=+f[e+36>>2];y=+f[e+44>>2];b=+f[e+48>>2];i=+f[e+52>>2];E=+f[e+60>>2];S=+f[e+64>>2];x=+f[e+68>>2];d=+f[e+76>>2];w=+f[e+80>>2];T=+f[e+84>>2];f[n+80>>2]=v*u+m*l+g*p+d;f[n+84>>2]=v*y+m*b+g*i+w;f[n+88>>2]=v*E+m*S+g*x+T;f[n+92>>2]=0;o=+f[t+16>>2];a=+f[t+20>>2];h=+f[t+24>>2];f[n+64>>2]=o*u+a*l+h*p+d;f[n+68>>2]=o*y+a*b+h*i+w;f[n+72>>2]=o*E+a*S+h*x+T;f[n+76>>2]=0;N=+f[t+32>>2];C=+f[t+36>>2];k=+f[t+40>>2];f[n+48>>2]=N*u+C*l+k*p+d;f[n+52>>2]=N*y+C*b+k*i+w;f[n+56>>2]=N*E+C*S+k*x+T;f[n+60>>2]=0;L=(v*u+m*l+g*p+d+(o*u+a*l+h*p+d)+(N*u+C*l+k*p+d))*.3333333432674408;A=(v*y+m*b+g*i+w+(o*y+a*b+h*i+w)+(N*y+C*b+k*i+w))*.3333333432674408;O=(v*E+m*S+g*x+T+(o*E+a*S+h*x+T)+(N*E+C*S+k*x+T))*.3333333432674408;f[n+32>>2]=L;f[n+36>>2]=A;f[n+40>>2]=O;f[n+44>>2]=0;r=s[e+8>>2]|0;if(((dD[s[(s[r>>2]|0)+48>>2]&127](r)|0)&16384|0)==0){t=s[e+8>>2]|0;M=s[t>>2]|0;M=M+8|0;M=s[M>>2]|0;r=e+12|0;JD[M&127](t,n+80|0,n+64|0,r);t=s[e+8>>2]|0;M=s[t>>2]|0;M=M+8|0;M=s[M>>2]|0;JD[M&127](t,n+64|0,n+48|0,r);t=s[e+8>>2]|0;e=s[t>>2]|0;e=e+8|0;e=s[e>>2]|0;JD[e&127](t,n+48|0,n+80|0,r);c=n;return}D=o*u+a*l+h*p+d-(v*u+m*l+g*p+d);_=o*y+a*b+h*i+w-(v*y+m*b+g*i+w);h=o*E+a*S+h*x+T-(v*E+m*S+g*x+T);d=N*u+C*l+k*p+d-(v*u+m*l+g*p+d);w=N*y+C*b+k*i+w-(v*y+m*b+g*i+w);C=N*E+C*S+k*x+T-(v*E+m*S+g*x+T);k=1/+X(+((D*w-_*d)*(D*w-_*d)+((_*C-h*w)*(_*C-h*w)+(h*d-D*C)*(h*d-D*C))));f[n+16>>2]=1;f[n+20>>2]=1;f[n+24>>2]=0;f[n+28>>2]=0;r=s[e+8>>2]|0;t=s[(s[r>>2]|0)+8>>2]|0;f[n>>2]=k*(_*C-h*w)+L;f[n+4>>2]=k*(h*d-D*C)+A;f[n+8>>2]=k*(D*w-_*d)+O;f[n+12>>2]=0;JD[t&127](r,n+32|0,n,n+16|0);r=s[e+8>>2]|0;t=s[r>>2]|0;t=t+8|0;t=s[t>>2]|0;M=e+12|0;JD[t&127](r,n+80|0,n+64|0,M);r=s[e+8>>2]|0;t=s[r>>2]|0;t=t+8|0;t=s[t>>2]|0;JD[t&127](r,n+64|0,n+48|0,M);r=s[e+8>>2]|0;t=s[r>>2]|0;t=t+8|0;t=s[t>>2]|0;JD[t&127](r,n+48|0,n+80|0,M);c=n;return}function My(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+8>>2]&127](e,t,n,r);c=i;return}function _y(e){e=e|0;var t=0;t=c;hM(e+ -4|0);c=t;return}function Dy(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e+ -4>>2]|0)+8>>2]&127](e+ -4|0,t,n,r);c=i;return}function Py(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Hy(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0;p=c;c=c+192|0;o=s[(s[e+4>>2]|0)+740>>2]|0;u=s[(s[e+8>>2]|0)+8>>2]|0;m=+f[n>>2];a=+f[t>>2]*i+m;d=+f[n+4>>2];l=+f[t+4>>2]*i+d;v=+f[n+8>>2];h=+f[t+8>>2]*i+v;if((o|0)!=(u|0)){S=s[(s[e+12>>2]|0)+8>>2]|0;x=a- +f[S+52>>2];y=l- +f[S+56>>2];b=h- +f[S+60>>2];E=m- +f[u+52>>2];w=d- +f[u+56>>2];g=v- +f[u+60>>2];m=x*+f[S+4>>2]+y*+f[S+20>>2]+b*+f[S+36>>2];d=x*+f[S+8>>2]+y*+f[S+24>>2]+b*+f[S+40>>2];v=x*+f[S+12>>2]+y*+f[S+28>>2]+b*+f[S+44>>2];b=E*+f[u+4>>2]+w*+f[u+20>>2]+g*+f[u+36>>2];y=E*+f[u+8>>2]+w*+f[u+24>>2]+g*+f[u+40>>2];g=E*+f[u+12>>2]+w*+f[u+28>>2]+g*+f[u+44>>2]}else{w=a- +f[o+52>>2];y=l- +f[o+56>>2];b=h- +f[o+60>>2];S=s[(s[e+12>>2]|0)+8>>2]|0;E=m- +f[S+52>>2];x=d- +f[S+56>>2];g=v- +f[S+60>>2];m=w*+f[o+4>>2]+y*+f[o+20>>2]+b*+f[o+36>>2];d=w*+f[o+8>>2]+y*+f[o+24>>2]+b*+f[o+40>>2];v=w*+f[o+12>>2]+y*+f[o+28>>2]+b*+f[o+44>>2];b=E*+f[S+4>>2]+x*+f[S+20>>2]+g*+f[S+36>>2];y=E*+f[S+8>>2]+x*+f[S+24>>2]+g*+f[S+40>>2];g=E*+f[S+12>>2]+x*+f[S+28>>2]+g*+f[S+44>>2]}f[p>>2]=m;f[p+4>>2]=d;f[p+8>>2]=v;f[p+12>>2]=0;f[p+16>>2]=b;f[p+20>>2]=y;f[p+24>>2]=g;f[p+28>>2]=0;s[p+64>>2]=s[t+0>>2];s[p+68>>2]=s[t+4>>2];s[p+72>>2]=s[t+8>>2];s[p+76>>2]=s[t+12>>2];f[p+80>>2]=i;f[p+84>>2]=0;f[p+88>>2]=0;f[p+92>>2]=0;s[p+112>>2]=0;r[p+116>>0]=0;s[p+120>>2]=0;s[p+124>>2]=0;s[p+128>>2]=0;s[p+132>>2]=0;s[p+136>>2]=0;s[p+140>>2]=0;s[p+144>>2]=0;s[p+148>>2]=0;f[p+48>>2]=a;f[p+52>>2]=l;f[p+56>>2]=h;f[p+60>>2]=0;s[p+32>>2]=s[n+0>>2];s[p+36>>2]=s[n+4>>2];s[p+40>>2]=s[n+8>>2];s[p+44>>2]=s[n+12>>2];if((o|0)!=(u|0)){N=s[e+20>>2]|0;s[p+96>>2]=N;n=s[e+16>>2]|0;s[p+100>>2]=n;T=s[e+28>>2]|0;s[p+104>>2]=T;S=s[e+24>>2]|0;s[p+108>>2]=S;t=e+12|0;C=(o|0)!=(u|0)?t:e+8|0;C=s[C>>2]|0;t=(o|0)!=(u|0)?e+8|0:t;t=s[t>>2]|0;u=e+32|0;u=s[u>>2]|0;o=s[u>>2]|0;o=o+12|0;o=s[o>>2]|0;+wD[o&1](u,p,C,N,T,t,n,S);c=p;return}else{n=s[e+16>>2]|0;s[p+96>>2]=n;N=s[e+20>>2]|0;s[p+100>>2]=N;S=s[e+24>>2]|0;s[p+104>>2]=S;C=s[e+28>>2]|0;s[p+108>>2]=C;T=e+12|0;t=(o|0)!=(u|0)?T:e+8|0;t=s[t>>2]|0;T=(o|0)!=(u|0)?e+8|0:T;T=s[T>>2]|0;u=e+32|0;u=s[u>>2]|0;o=s[u>>2]|0;o=o+12|0;o=s[o>>2]|0;+wD[o&1](u,p,t,n,S,T,N,C);c=p;return}}function By(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function jy(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0;n=c;c=c+32|0;r=s[e+184>>2]|0;if(+f[r+4>>2]==0){t=0;c=n;return t|0}t=s[t>>2]|0;if(!(DD[s[(s[r>>2]|0)+8>>2]&31](r,s[t+188>>2]|0)|0)){t=1;c=n;return t|0}o=s[e+192>>2]|0;u=s[t+192>>2]|0;r=s[e+184>>2]|0;i=+f[e+188>>2];s[n>>2]=0;s[n+4>>2]=u;s[n+8>>2]=t;s[n+12>>2]=t+4;s[n+16>>2]=-1;s[n+20>>2]=-1;dy(o,e+36|0,e+100|0,n,r,i);t=1;c=n;return t|0}function Fy(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Iy(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;c=c+32|0;r=s[e+216>>2]|0;if(+f[r+4>>2]==0){t=0;c=n;return t|0}t=s[t>>2]|0;if(!(DD[s[(s[r>>2]|0)+8>>2]&31](r,s[t+188>>2]|0)|0)){t=1;c=n;return t|0}i=s[t+192>>2]|0;r=s[e+216>>2]|0;s[n>>2]=0;s[n+4>>2]=i;s[n+8>>2]=t;s[n+12>>2]=t+4;s[n+16>>2]=-1;s[n+20>>2]=-1;cy(e+68|0,e+132|0,n,r);t=1;c=n;return t|0}function qy(e){e=e|0;return}function Ry(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Uy(e,t){e=e|0;t=t|0;var n=0;n=c;e=s[e+12>>2]|0;e=DD[s[(s[e>>2]|0)+8>>2]&31](e,t)|0;c=n;return e|0}function zy(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;c=c+16|0;s[r>>2]=-1;s[r+4>>2]=s[e+16>>2];if((s[t+4>>2]|0)==0)s[t+4>>2]=r;o=s[e+12>>2]|0;i=+PD[s[(s[o>>2]|0)+12>>2]&15](o,t,n);f[e+4>>2]=+f[(s[e+12>>2]|0)+4>>2];c=r;return+i}function Wy(e){e=e|0;return}function Xy(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Vy(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;o=o|0;var u=0;u=c;c=c+64|0;s[u+48>>2]=i;s[u+52>>2]=o;o=s[e+212>>2]|0;if(!(+f[o+4>>2]>=r)){c=u;return+r}s[u>>2]=s[e+216>>2];s[u+4>>2]=u+48;s[u+8>>2]=s[t+0>>2];s[u+12>>2]=s[t+4>>2];s[u+16>>2]=s[t+8>>2];s[u+20>>2]=s[t+12>>2];s[u+24>>2]=s[n+0>>2];s[u+28>>2]=s[n+4>>2];s[u+32>>2]=s[n+8>>2];s[u+36>>2]=s[n+12>>2];f[u+40>>2]=r;r=+PD[s[(s[o>>2]|0)+12>>2]&15](o,u,0);c=u;return+r}function $y(e){e=e|0;return}function Jy(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Ky(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;o=o|0;var u=0;u=c;c=c+64|0;s[u+48>>2]=i;s[u+52>>2]=o;o=s[e+212>>2]|0;if(!(+f[o+4>>2]>=r)){c=u;return+r}s[u>>2]=s[e+216>>2];s[u+4>>2]=u+48;s[u+8>>2]=s[t+0>>2];s[u+12>>2]=s[t+4>>2];s[u+16>>2]=s[t+8>>2];s[u+20>>2]=s[t+12>>2];s[u+24>>2]=s[n+0>>2];s[u+28>>2]=s[n+4>>2];s[u+32>>2]=s[n+8>>2];s[u+36>>2]=s[n+12>>2];f[u+40>>2]=r;r=+PD[s[(s[o>>2]|0)+12>>2]&15](o,u,1);c=u;return+r}function Qy(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Gy(e){e=e|0;return}function Yy(e){e=e|0;return}function Zy(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function eb(e,t){e=e|0;t=t|0;var n=0;n=c;e=s[e+20>>2]|0;e=DD[s[(s[e>>2]|0)+8>>2]&31](e,t)|0;c=n;return e|0}function tb(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;c=c+16|0;s[r>>2]=-1;s[r+4>>2]=s[e+24>>2];if((s[t+4>>2]|0)==0)s[t+4>>2]=r;o=s[e+20>>2]|0;i=+PD[s[(s[o>>2]|0)+12>>2]&15](o,t,n);f[e+4>>2]=+f[(s[e+20>>2]|0)+4>>2];c=r;return+i}function nb(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function rb(e,t,n){e=e|0;t=t|0;n=n|0;return}function ib(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;n=c;c=c+128|0;r=s[t+36>>2]|0;t=s[(s[e+8>>2]|0)+24>>2]|0;o=s[t+(r*80|0)+64>>2]|0;bd(n+56|0,s[e+12>>2]|0,t+(r*80|0)|0);t=s[e+4>>2]|0;s[n+32>>2]=0;s[n+36>>2]=o;s[n+40>>2]=t;s[n+44>>2]=n+56;s[n+48>>2]=-1;s[n+52>>2]=r;t=s[e+24>>2]|0;f[n+4>>2]=1;s[n+8>>2]=0;i[n+12>>1]=1;i[n+14>>1]=-1;s[n+16>>2]=0;s[n>>2]=8664;s[n+20>>2]=t;s[n+24>>2]=r;f[n+4>>2]=+f[t+4>>2];s[n+16>>2]=s[t+16>>2];cy(s[e+16>>2]|0,s[e+20>>2]|0,n+32|0,n);c=n;return}function sb(e,t,n){e=e|0;t=t|0;n=+n;var r=0;r=c;hD[s[(s[e>>2]|0)+12>>2]&127](e,t);c=r;return}function ob(e,t){e=e|0;t=t|0;return 1}function ub(e,t){e=e|0;t=t|0;return 1}function ab(e){e=e|0;return}function fb(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function lb(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0;o=c;c=c+48|0;s[o+32>>2]=r;s[o+36>>2]=i;p=+f[t>>2];h=+f[t+4>>2];u=+f[t+8>>2];l=+f[e+56>>2]*p+ +f[e+60>>2]*h+ +f[e+64>>2]*u;a=p*+f[e+72>>2]+h*+f[e+76>>2]+u*+f[e+80>>2];u=p*+f[e+88>>2]+h*+f[e+92>>2]+u*+f[e+96>>2];s[o>>2]=s[e+48>>2];s[o+4>>2]=o+32;f[o+8>>2]=l;f[o+12>>2]=a;f[o+16>>2]=u;f[o+20>>2]=0;f[o+24>>2]=n;r=s[e+44>>2]|0;n=+PD[s[(s[r>>2]|0)+12>>2]&15](r,o,1);c=o;return+n}function cb(e){e=e|0;return}function hb(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function pb(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0;o=c;c=c+48|0;s[o+32>>2]=r;s[o+36>>2]=i;p=+f[t>>2];h=+f[t+4>>2];u=+f[t+8>>2];l=+f[e+56>>2]*p+ +f[e+60>>2]*h+ +f[e+64>>2]*u;a=p*+f[e+72>>2]+h*+f[e+76>>2]+u*+f[e+80>>2];u=p*+f[e+88>>2]+h*+f[e+92>>2]+u*+f[e+96>>2];s[o>>2]=s[e+48>>2];s[o+4>>2]=o+32;f[o+8>>2]=l;f[o+12>>2]=a;f[o+16>>2]=u;f[o+20>>2]=0;f[o+24>>2]=n;r=s[e+44>>2]|0;n=+PD[s[(s[r>>2]|0)+12>>2]&15](r,o,1);c=o;return+n}function db(e,t){e=e|0;t=+t;return}function vb(e,t){e=e|0;t=t|0;return}function mb(e,t,n){e=e|0;t=t|0;n=n|0;return}function gb(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function yb(e,t){e=e|0;t=t|0;var n=0,i=0;n=c;s[e+8>>2]=0;s[e>>2]=9512;r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;s[e+20>>2]=0;f[e+32>>2]=0xde0b6b000000000;f[e+36>>2]=0xde0b6b000000000;f[e+40>>2]=0xde0b6b000000000;f[e+44>>2]=0;f[e+48>>2]=-0xde0b6b000000000;f[e+52>>2]=-0xde0b6b000000000;f[e+56>>2]=-0xde0b6b000000000;f[e+60>>2]=0;s[e+64>>2]=0;s[e+68>>2]=1;f[e+72>>2]=0;f[e+76>>2]=1;f[e+80>>2]=1;f[e+84>>2]=1;f[e+88>>2]=0;s[e+4>>2]=31;if(!t){c=n;return}s[5004]=(s[5004]|0)+1;t=cM(79)|0;if((t|0)!=0?(i=t+19&-16,s[i+ -4>>2]=t,(t+19&-16|0)!=0):0){r[i+36>>0]=1;s[i+32>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;r[i+56>>0]=1;s[i+52>>2]=0;s[i+44>>2]=0;s[i+48>>2]=0;s[(t+19&-16)>>2]=0;s[i+4>>2]=0;s[i+8>>2]=-1;s[i+12>>2]=0;s[i+16>>2]=0;i=t+19&-16}else i=0;s[e+64>>2]=i;c=n;return}function bb(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=9512;n=s[e+64>>2]|0;if((n|0)!=0?(xL(n),i=s[e+64>>2]|0,(i|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}n=s[e+24>>2]|0;if((n|0)!=0){if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+24>>2]=0}r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;s[e+20>>2]=0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function wb(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=9512;n=s[e+64>>2]|0;if((n|0)!=0?(xL(n),i=s[e+64>>2]|0,(i|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}n=s[e+24>>2]|0;if((n|0)==0){r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;i=e+20|0;s[i>>2]=0;c=t;return}if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+24>>2]=0;r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;i=e+20|0;s[i>>2]=0;c=t;return}function Eb(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;n=c;c=c+80|0;s[e+68>>2]=(s[e+68>>2]|0)+1;r=s[e+16>>2]|0;if((r|0)<=0){u=s[e>>2]|0;u=u+68|0;u=s[u>>2]|0;lD[u&511](e);c=n;return}u=r;do{r=r+ -1|0;o=s[e+24>>2]|0;if((s[o+(r*80|0)+64>>2]|0)==(t|0)){s[e+68>>2]=(s[e+68>>2]|0)+1;i=s[e+64>>2]|0;if((i|0)!=0){o=s[o+(r*80|0)+76>>2]|0;kL(i,o)|0;u=s[i+4>>2]|0;if((u|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[i+4>>2]=o;s[i+12>>2]=(s[i+12>>2]|0)+ -1;u=s[e+16>>2]|0;o=s[e+24>>2]|0}u=u+ -1|0;h=o+(r*80|0)|0;s[n+0>>2]=s[h+0>>2];s[n+4>>2]=s[h+4>>2];s[n+8>>2]=s[h+8>>2];s[n+12>>2]=s[h+12>>2];l=o+(r*80|0)+16|0;s[n+16>>2]=s[l+0>>2];s[n+20>>2]=s[l+4>>2];s[n+24>>2]=s[l+8>>2];s[n+28>>2]=s[l+12>>2];f=o+(r*80|0)+32|0;s[n+32>>2]=s[f+0>>2];s[n+36>>2]=s[f+4>>2];s[n+40>>2]=s[f+8>>2];s[n+44>>2]=s[f+12>>2];a=o+(r*80|0)+48|0;s[n+48>>2]=s[a+0>>2];s[n+52>>2]=s[a+4>>2];s[n+56>>2]=s[a+8>>2];s[n+60>>2]=s[a+12>>2];i=o+(r*80|0)+64|0;s[n+64>>2]=s[i+0>>2];s[n+68>>2]=s[i+4>>2];s[n+72>>2]=s[i+8>>2];s[n+76>>2]=s[i+12>>2];p=o+(u*80|0)|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2];s[h+12>>2]=s[p+12>>2];h=o+(u*80|0)+16|0;s[l+0>>2]=s[h+0>>2];s[l+4>>2]=s[h+4>>2];s[l+8>>2]=s[h+8>>2];s[l+12>>2]=s[h+12>>2];l=o+(u*80|0)+32|0;s[f+0>>2]=s[l+0>>2];s[f+4>>2]=s[l+4>>2];s[f+8>>2]=s[l+8>>2];s[f+12>>2]=s[l+12>>2];f=o+(u*80|0)+48|0;s[a+0>>2]=s[f+0>>2];s[a+4>>2]=s[f+4>>2];s[a+8>>2]=s[f+8>>2];s[a+12>>2]=s[f+12>>2];o=o+(u*80|0)+64|0;s[i+0>>2]=s[o+0>>2];s[i+4>>2]=s[o+4>>2];s[i+8>>2]=s[o+8>>2];s[i+12>>2]=s[o+12>>2];o=s[e+24>>2]|0;s[o+(u*80|0)+0>>2]=s[n+0>>2];s[o+(u*80|0)+4>>2]=s[n+4>>2];s[o+(u*80|0)+8>>2]=s[n+8>>2];s[o+(u*80|0)+12>>2]=s[n+12>>2];s[o+(u*80|0)+16>>2]=s[n+16>>2];s[o+(u*80|0)+20>>2]=s[n+20>>2];s[o+(u*80|0)+24>>2]=s[n+24>>2];s[o+(u*80|0)+28>>2]=s[n+28>>2];s[o+(u*80|0)+32>>2]=s[n+32>>2];s[o+(u*80|0)+36>>2]=s[n+36>>2];s[o+(u*80|0)+40>>2]=s[n+40>>2];s[o+(u*80|0)+44>>2]=s[n+44>>2];s[o+(u*80|0)+48>>2]=s[n+48>>2];s[o+(u*80|0)+52>>2]=s[n+52>>2];s[o+(u*80|0)+56>>2]=s[n+56>>2];s[o+(u*80|0)+60>>2]=s[n+60>>2];s[o+(u*80|0)+64>>2]=s[n+64>>2];s[o+(u*80|0)+68>>2]=s[n+68>>2];s[o+(u*80|0)+72>>2]=s[n+72>>2];s[o+(u*80|0)+76>>2]=s[n+76>>2];if((s[e+64>>2]|0)!=0)s[(s[(s[e+24>>2]|0)+(r*80|0)+76>>2]|0)+36>>2]=r;u=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=u}}while((r|0)>0);p=s[e>>2]|0;p=p+68|0;p=s[p>>2]|0;lD[p&511](e);c=n;return}function Sb(e){e=e|0;var t=0,n=0,r=0,i=0,o=0;t=c;c=c+32|0;f[e+32>>2]=0xde0b6b000000000;f[e+36>>2]=0xde0b6b000000000;f[e+40>>2]=0xde0b6b000000000;f[e+44>>2]=0;f[e+48>>2]=-0xde0b6b000000000;f[e+52>>2]=-0xde0b6b000000000;f[e+56>>2]=-0xde0b6b000000000;f[e+60>>2]=0;if((s[e+16>>2]|0)<=0){c=t;return}n=0;do{i=s[e+24>>2]|0;o=s[i+(n*80|0)+64>>2]|0;JD[s[(s[o>>2]|0)+8>>2]&127](o,i+(n*80|0)|0,t+16|0,t);r=+f[t+16>>2];if(+f[e+32>>2]>r)f[e+32>>2]=r;r=+f[t>>2];if(+f[e+48>>2]<r)f[e+48>>2]=r;r=+f[t+20>>2];if(+f[e+36>>2]>r)f[e+36>>2]=r;r=+f[t+4>>2];if(+f[e+52>>2]<r)f[e+52>>2]=r;r=+f[t+24>>2];if(+f[e+40>>2]>r)f[e+40>>2]=r;r=+f[t+8>>2];if(+f[e+56>>2]<r)f[e+56>>2]=r;n=n+1|0}while((n|0)<(s[e+16>>2]|0));c=t;return}function xb(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;i=c;b=+f[e+48>>2];E=+f[e+32>>2];O=+f[e+52>>2];S=+f[e+36>>2];M=+f[e+56>>2];a=+f[e+40>>2];_=(s[e+16>>2]|0)==0;x=_?0:(M+a)*.5;N=_?0:(O+S)*.5;k=_?0:(b+E)*.5;d=+CD[s[(s[e>>2]|0)+48>>2]&15](e);h=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=(_?0:(b-E)*.5)+d;h=(_?0:(O-S)*.5)+h;a=(_?0:(M-a)*.5)+ +CD[s[(s[e>>2]|0)+48>>2]&15](e);M=+f[t>>2];S=+W(+M);O=+f[t+4>>2];E=+W(+O);b=+f[t+8>>2];w=+W(+b);A=+f[t+16>>2];y=+W(+A);L=+f[t+20>>2];g=+W(+L);v=+f[t+24>>2];m=+W(+v);C=+f[t+32>>2];p=+W(+C);T=+f[t+36>>2];l=+W(+T);o=+f[t+40>>2];u=+W(+o);b=k*M+N*O+x*b+ +f[t+48>>2];v=k*A+N*L+x*v+ +f[t+52>>2];o=k*C+N*T+x*o+ +f[t+56>>2];f[n>>2]=b-(d*S+h*E+a*w);f[n+4>>2]=v-(d*y+h*g+a*m);f[n+8>>2]=o-(d*p+h*l+a*u);f[n+12>>2]=0;f[r>>2]=d*S+h*E+a*w+b;f[r+4>>2]=d*y+h*g+a*m+v;f[r+8>>2]=d*p+h*l+a*u+o;f[r+12>>2]=0;c=i;return}function Tb(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+96|0;f[r+32>>2]=1;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=1;s[r+56>>2]=0;s[r+60>>2]=0;s[r+64>>2]=0;s[r+68>>2]=0;f[r+72>>2]=1;a=r+76|0;s[a+0>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;JD[s[(s[e>>2]|0)+8>>2]&127](e,r+32|0,r+16|0,r);o=(+f[r>>2]- +f[r+16>>2])*.5*2;i=(+f[r+4>>2]- +f[r+20>>2])*.5*2;u=(+f[r+8>>2]- +f[r+24>>2])*.5*2;f[n>>2]=t/12*(i*i+u*u);f[n+4>>2]=t/12*(o*o+u*u);f[n+8>>2]=t/12*(o*o+i*i);c=r;return}function Nb(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;a=c;c=c+144|0;if((s[e+16>>2]|0)<=0){v=e+76|0;s[v+0>>2]=s[t+0>>2];s[v+4>>2]=s[t+4>>2];s[v+8>>2]=s[t+8>>2];s[v+12>>2]=s[t+12>>2];v=s[e>>2]|0;v=v+68|0;v=s[v>>2]|0;lD[v&511](e);c=a;return}i=a+32|0;o=a+48|0;u=a+64|0;r=0;do{v=s[e+24>>2]|0;d=v+(r*80|0)|0;s[a+16>>2]=s[d+0>>2];s[a+20>>2]=s[d+4>>2];s[a+24>>2]=s[d+8>>2];s[a+28>>2]=s[d+12>>2];d=v+(r*80|0)+16|0;s[i+0>>2]=s[d+0>>2];s[i+4>>2]=s[d+4>>2];s[i+8>>2]=s[d+8>>2];s[i+12>>2]=s[d+12>>2];d=v+(r*80|0)+32|0;s[o+0>>2]=s[d+0>>2];s[o+4>>2]=s[d+4>>2];s[o+8>>2]=s[d+8>>2];s[o+12>>2]=s[d+12>>2];d=v+(r*80|0)+48|0;s[u+0>>2]=s[d+0>>2];s[u+4>>2]=s[d+4>>2];s[u+8>>2]=s[d+8>>2];s[u+12>>2]=s[d+12>>2];v=s[v+(r*80|0)+64>>2]|0;v=dD[s[(s[v>>2]|0)+28>>2]&127](v)|0;s[a+0>>2]=s[v+0>>2];s[a+4>>2]=s[v+4>>2];s[a+8>>2]=s[v+8>>2];m=+f[a+4>>2]*+f[t+4>>2]/+f[e+80>>2];g=+f[a+8>>2]*+f[t+8>>2]/+f[e+84>>2];f[a>>2]=+f[a>>2]*+f[t>>2]/+f[e+76>>2];f[a+4>>2]=m;f[a+8>>2]=g;f[a+12>>2]=0;v=s[(s[e+24>>2]|0)+(r*80|0)+64>>2]|0;hD[s[(s[v>>2]|0)+24>>2]&127](v,a);g=+f[a+68>>2]*+f[t+4>>2]/+f[e+80>>2];m=+f[a+72>>2]*+f[t+8>>2]/+f[e+84>>2];f[a+64>>2]=+f[u>>2]*+f[t>>2]/+f[e+76>>2];f[a+68>>2]=g;f[a+72>>2]=m;f[a+76>>2]=0;v=s[e+24>>2]|0;d=v+(r*80|0)|0;s[d+0>>2]=s[a+16>>2];s[d+4>>2]=s[a+20>>2];s[d+8>>2]=s[a+24>>2];s[d+12>>2]=s[a+28>>2];d=v+(r*80|0)+16|0;s[d+0>>2]=s[i+0>>2];s[d+4>>2]=s[i+4>>2];s[d+8>>2]=s[i+8>>2];s[d+12>>2]=s[i+12>>2];d=v+(r*80|0)+32|0;s[d+0>>2]=s[o+0>>2];s[d+4>>2]=s[o+4>>2];s[d+8>>2]=s[o+8>>2];s[d+12>>2]=s[o+12>>2];v=v+(r*80|0)+48|0;s[v+0>>2]=s[u+0>>2];s[v+4>>2]=s[u+4>>2];s[v+8>>2]=s[u+8>>2];s[v+12>>2]=s[u+12>>2];if((s[e+64>>2]|0)!=0){l=s[(s[e+24>>2]|0)+(r*80|0)+64>>2]|0;JD[s[(s[l>>2]|0)+8>>2]&127](l,a+16|0,a+128|0,a+112|0);s[a+80>>2]=s[a+128>>2];s[a+84>>2]=s[a+132>>2];s[a+88>>2]=s[a+136>>2];s[a+92>>2]=s[a+140>>2];s[a+96>>2]=s[a+112>>2];s[a+100>>2]=s[a+116>>2];s[a+104>>2]=s[a+120>>2];s[a+108>>2]=s[a+124>>2];l=s[e+64>>2]|0;n=s[(s[e+24>>2]|0)+(r*80|0)+76>>2]|0;d=kL(l,n)|0;e:do if((d|0)!=0){h=s[l+8>>2]|0;if(!((h|0)>-1)){d=s[l>>2]|0;break}if((h|0)>0){p=0;while(1){v=s[d+32>>2]|0;p=p+1|0;if((v|0)==0)break e;if((p|0)>=(h|0)){d=v;break}else d=v}}}else d=0;while(0);s[n+0>>2]=s[a+80>>2];s[n+4>>2]=s[a+84>>2];s[n+8>>2]=s[a+88>>2];s[n+12>>2]=s[a+92>>2];s[n+16>>2]=s[a+96>>2];s[n+20>>2]=s[a+100>>2];s[n+24>>2]=s[a+104>>2];s[n+28>>2]=s[a+108>>2];CL(l,d,n)}r=r+1|0}while((r|0)<(s[e+16>>2]|0));v=e+76|0;s[v+0>>2]=s[t+0>>2];s[v+4>>2]=s[t+4>>2];s[v+8>>2]=s[t+8>>2];s[v+12>>2]=s[t+12>>2];v=s[e>>2]|0;v=v+68|0;v=s[v>>2]|0;lD[v&511](e);c=a;return}function Cb(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;a=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=a;if((a|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+20>>2]=+f[e+72>>2];i=s[e+16>>2]|0;s[t+16>>2]=i;s[t+12>>2]=0;if((i|0)==0){c=r;return 9616}i=xD[s[(s[n>>2]|0)+16>>2]&31](n,76,i)|0;a=s[i+8>>2]|0;s[t+12>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,a)|0;if((s[t+16>>2]|0)>0){u=s[e+24>>2]|0;o=0;while(1){f[a+72>>2]=+f[u+(o*80|0)+72>>2];s[a+64>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[u+(o*80|0)+64>>2]|0)|0;if((DD[s[(s[n>>2]|0)+24>>2]&31](n,s[(s[e+24>>2]|0)+(o*80|0)+64>>2]|0)|0)==0){u=s[(s[n>>2]|0)+16>>2]|0;l=s[(s[e+24>>2]|0)+(o*80|0)+64>>2]|0;l=dD[s[(s[l>>2]|0)+52>>2]&127](l)|0;l=xD[u&31](n,l,1)|0;u=s[(s[e+24>>2]|0)+(o*80|0)+64>>2]|0;u=xD[s[(s[u>>2]|0)+56>>2]&31](u,s[l+8>>2]|0,n)|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,l,u,1346455635,s[(s[e+24>>2]|0)+(o*80|0)+64>>2]|0)}u=s[e+24>>2]|0;s[a+68>>2]=s[u+(o*80|0)+68>>2];f[a>>2]=+f[u+(o*80|0)>>2];f[a+4>>2]=+f[u+(o*80|0)+4>>2];f[a+8>>2]=+f[u+(o*80|0)+8>>2];f[a+12>>2]=+f[u+(o*80|0)+12>>2];f[a+16>>2]=+f[u+(o*80|0)+16>>2];f[a+20>>2]=+f[u+(o*80|0)+20>>2];f[a+24>>2]=+f[u+(o*80|0)+24>>2];f[a+28>>2]=+f[u+(o*80|0)+28>>2];f[a+32>>2]=+f[u+(o*80|0)+32>>2];f[a+36>>2]=+f[u+(o*80|0)+36>>2];f[a+40>>2]=+f[u+(o*80|0)+40>>2];f[a+44>>2]=+f[u+(o*80|0)+44>>2];f[a+48>>2]=+f[u+(o*80|0)+48>>2];f[a+52>>2]=+f[u+(o*80|0)+52>>2];f[a+56>>2]=+f[u+(o*80|0)+56>>2];f[a+60>>2]=+f[u+(o*80|0)+60>>2];o=o+1|0;if((o|0)>=(s[t+16>>2]|0)){t=n;break}else a=a+76|0}}else t=n;aD[s[(s[t>>2]|0)+20>>2]&31](n,i,9584,1497453121,s[i+8>>2]|0);c=r;return 9616}function kb(e){e=e|0;return e+76|0}function Lb(e){e=e|0;return 9680}function Ab(e,t){e=e|0;t=+t;f[e+72>>2]=t;return}function Ob(e){e=e|0;return+(+f[e+72>>2])}function Mb(e){e=e|0;return 24}function _b(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;u=c;c=c+48|0;i=+f[t+60>>2]*.5;r=s[t+68>>2]|0;a=+f[n>>2];h=+f[n+4>>2];p=+f[n+8>>2];p=+X(+(a*a+h*h+p*p));o=s[t+64>>2]|0;if(+f[n+(r<<2)>>2]>p*+f[t+52>>2]){f[u+32+(o<<2)>>2]=0;f[u+32+(r<<2)>>2]=i;f[u+32+(s[t+72>>2]<<2)>>2]=0;s[e+0>>2]=s[u+32>>2];s[e+4>>2]=s[u+36>>2];s[e+8>>2]=s[u+40>>2];s[e+12>>2]=s[u+44>>2];c=u;return}a=+f[n+(o<<2)>>2];l=s[t+72>>2]|0;h=+f[n+(l<<2)>>2];p=+X(+(a*a+h*h));if(p>1.1920928955078125e-7){p=+f[t+56>>2]/p;f[u+16+(o<<2)>>2]=a*p;f[u+16+(r<<2)>>2]=-i;f[u+16+(l<<2)>>2]=p*h;s[e+0>>2]=s[u+16>>2];s[e+4>>2]=s[u+20>>2];s[e+8>>2]=s[u+24>>2];s[e+12>>2]=s[u+28>>2];c=u;return}else{f[u+(o<<2)>>2]=0;f[u+(r<<2)>>2]=-i;f[u+(l<<2)>>2]=0;s[e+0>>2]=s[u+0>>2];s[e+4>>2]=s[u+4>>2];s[e+8>>2]=s[u+8>>2];s[e+12>>2]=s[u+12>>2];c=u;return}}function Db(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;_b(e,t,n);c=r;return}function Pb(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0;i=c;c=c+16|0;if((r|0)<=0){c=i;return}o=0;do{u=n+(o<<4)|0;_b(i,e,t+(o<<4)|0);s[u+0>>2]=s[i+0>>2];s[u+4>>2]=s[i+4>>2];s[u+8>>2]=s[i+8>>2];s[u+12>>2]=s[i+12>>2];o=o+1|0}while((o|0)!=(r|0));c=i;return}function Hb(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;_b(e,t,n);if(!(+CD[s[(s[t>>2]|0)+48>>2]&15](t)!=0)){c=r;return}l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function Bb(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0;a=s[e+68>>2]|0;u=s[e+64>>2]|0;o=s[e+72>>2]|0;r=+f[t+(a<<2)>>2]/+f[e+(a<<2)+12>>2]*+f[e+60>>2];f[e+60>>2]=r;i=+f[e+56>>2]*(+f[t+(u<<2)>>2]/+f[e+(u<<2)+12>>2]+ +f[t+(o<<2)>>2]/+f[e+(o<<2)+12>>2])*.5;f[e+56>>2]=i;f[e+52>>2]=i/+X(+(r*r+i*i));i=+W(+(+f[t>>2]));r=+W(+(+f[t+4>>2]));n=+W(+(+f[t+8>>2]));f[e+12>>2]=i;f[e+16>>2]=r;f[e+20>>2]=n;f[e+24>>2]=0;return}function jb(e){e=e|0;return}function Fb(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Ib(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+80>>2]&127](e,t,n,r);c=i;return}function qb(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;c=c+96|0;f[r+32>>2]=1;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=1;s[r+56>>2]=0;s[r+60>>2]=0;s[r+64>>2]=0;s[r+68>>2]=0;f[r+72>>2]=1;l=r+76|0;s[l+0>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;s[l+16>>2]=0;JD[s[(s[e>>2]|0)+8>>2]&127](e,r+32|0,r+16|0,r);u=(+f[r>>2]- +f[r+16>>2])*.5;o=(+f[r+4>>2]- +f[r+20>>2])*.5;a=(+f[r+8>>2]- +f[r+24>>2])*.5;i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);f[n>>2]=t*.0833333283662796*((o+i)*2*(o+i)*2+(a+i)*2*(a+i)*2);f[n+4>>2]=t*.0833333283662796*((u+i)*2*(u+i)*2+(a+i)*2*(a+i)*2);f[n+8>>2]=t*.0833333283662796*((u+i)*2*(u+i)*2+(o+i)*2*(o+i)*2);f[n+12>>2]=0;c=r;return}function Rb(e){e=e|0;return 10136}function Ub(e,t){e=e|0;t=t|0;f[e>>2]=0;f[e+4>>2]=1;f[e+8>>2]=0;f[e+12>>2]=0;return}function zb(e,t){e=e|0;t=+t;f[e+44>>2]=t;return}function Wb(e){e=e|0;return 60}function Xb(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+28>>2]=+f[e+28>>2];f[t+32>>2]=+f[e+32>>2];f[t+36>>2]=+f[e+36>>2];f[t+40>>2]=+f[e+40>>2];f[t+12>>2]=+f[e+12>>2];f[t+16>>2]=+f[e+16>>2];f[t+20>>2]=+f[e+20>>2];f[t+24>>2]=+f[e+24>>2];f[t+44>>2]=+f[e+44>>2];s[t+52>>2]=s[e+68>>2];c=r;return 10120}function Vb(e){e=e|0;return}function $b(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Jb(e){e=e|0;return 10112}function Kb(e,t){e=e|0;t=t|0;f[e>>2]=0;f[e+4>>2]=0;f[e+8>>2]=1;f[e+12>>2]=0;return}function Qb(e){e=e|0;return}function Gb(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Yb(e){e=e|0;return 10104}function Zb(e,t){e=e|0;t=t|0;f[e>>2]=1;f[e+4>>2]=0;f[e+8>>2]=0;f[e+12>>2]=0;return}function ew(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0;n=c;f=s[e+212>>2]|0;e:do if((f|0)>0){i=s[e+220>>2]|0;o=0;while(1){u=i+(o<<2)|0;a=o+1|0;if((s[u>>2]|0)==(t|0))break;if((a|0)<(f|0))o=a;else break e}if((o|0)<(f|0)){s[u>>2]=s[i+(f+ -1<<2)>>2];s[(s[e+220>>2]|0)+(f+ -1<<2)>>2]=t;s[e+212>>2]=f+ -1}}while(0);e=s[t+28>>2]|0;o=s[e+488>>2]|0;t:do if((o|0)>0){i=s[e+496>>2]|0;u=0;while(1){a=i+(u<<2)|0;f=u+1|0;if((s[a>>2]|0)==(t|0))break;if((f|0)<(o|0))u=f;else break t}if((u|0)<(o|0)){s[a>>2]=s[i+(o+ -1<<2)>>2];s[(s[e+496>>2]|0)+(o+ -1<<2)>>2]=t;s[e+488>>2]=o+ -1;o=o+ -1|0}}while(0);s[e+256>>2]=(o|0)>0&1;e=s[t+32>>2]|0;i=s[e+488>>2]|0;if((i|0)<=0){a=i;a=(a|0)>0;a=a&1;f=e+256|0;s[f>>2]=a;c=n;return}u=s[e+496>>2]|0;a=0;while(1){f=u+(a<<2)|0;o=a+1|0;if((s[f>>2]|0)==(t|0))break;if((o|0)<(i|0))a=o;else{r=19;break}}if((r|0)==19){a=(i|0)>0;a=a&1;f=e+256|0;s[f>>2]=a;c=n;return}if((a|0)>=(i|0)){a=i;a=(a|0)>0;a=a&1;f=e+256|0;s[f>>2]=a;c=n;return}s[f>>2]=s[u+(i+ -1<<2)>>2];s[(s[e+496>>2]|0)+(i+ -1<<2)>>2]=t;s[e+488>>2]=i+ -1;a=i+ -1|0;a=(a|0)>0;a=a&1;f=e+256|0;s[f>>2]=a;c=n;return}function tw(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;u=s[e+280>>2]|0;if((u|0)==(s[e+284>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[e+280>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+288>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[e+288>>2]|0;if((a|0)!=0){if((r[e+292>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[e+280>>2]|0}s[e+288>>2]=0}r[e+292>>0]=1;s[e+288>>2]=o;s[e+284>>2]=i}i=(s[e+288>>2]|0)+(u<<2)|0;if((i|0)==0){f=u+1|0;s[e+280>>2]=f;c=n;return}s[i>>2]=t;f=u+1|0;s[e+280>>2]=f;c=n;return}function nw(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0;r=c;i=s[e+280>>2]|0;if((i|0)<=0){c=r;return}o=s[e+288>>2]|0;u=0;while(1){a=o+(u<<2)|0;f=u+1|0;if((s[a>>2]|0)==(t|0))break;if((f|0)<(i|0))u=f;else{n=7;break}}if((n|0)==7){c=r;return}if((u|0)>=(i|0)){c=r;return}s[a>>2]=s[o+(i+ -1<<2)>>2];s[(s[e+288>>2]|0)+(i+ -1<<2)>>2]=t;s[e+280>>2]=i+ -1;c=r;return}function rw(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+64>>2]&127](e,t);c=n;return}function iw(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+68>>2]&127](e,t);c=n;return}function sw(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+64>>2]&127](e,t);c=n;return}function ow(e,t){e=e|0;t=t|0;var n=0;n=c;hD[s[(s[e>>2]|0)+68>>2]&127](e,t);c=n;return}function uw(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;n=c;c=c+16|0;CC(1704);i=s[e+212>>2]|0;o=s[e+180>>2]|0;if((o|0)<(i|0)){if((s[e+184>>2]|0)<(i|0)){if((i|0)==0){a=0;p=o}else{s[5004]=(s[5004]|0)+1;a=cM((i<<2|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}p=s[e+180>>2]|0}if((p|0)>0){l=0;do{h=a+(l<<2)|0;if((h|0)!=0)s[h>>2]=s[(s[e+188>>2]|0)+(l<<2)>>2];l=l+1|0}while((l|0)!=(p|0))}l=s[e+188>>2]|0;if((l|0)!=0){if((r[e+192>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[e+188>>2]=0}r[e+192>>0]=1;s[e+188>>2]=a;s[e+184>>2]=i;a=e+188|0}else a=e+188|0;do{l=(s[a>>2]|0)+(o<<2)|0;if((l|0)!=0)s[l>>2]=0;o=o+1|0}while((o|0)!=(i|0))}s[e+180>>2]=i;i=0;while(1){if((i|0)>=(dD[s[(s[e>>2]|0)+104>>2]&127](e)|0))break;s[(s[e+188>>2]|0)+(i<<2)>>2]=s[(s[e+220>>2]|0)+(i<<2)>>2];i=i+1|0}i=s[e+180>>2]|0;if((i|0)>1)Nw(e+176|0,0,i+ -1|0);if((dD[s[(s[e>>2]|0)+104>>2]&127](e)|0)==0)o=0;else o=s[e+188>>2]|0;i=s[e+196>>2]|0;E=s[e+180>>2]|0;a=dD[s[(s[e>>2]|0)+20>>2]&127](e)|0;s[i+4>>2]=t;s[i+12>>2]=o;s[i+16>>2]=E;s[i+20>>2]=a;a=s[i+32>>2]|0;if((a|0)<0){if((s[i+36>>2]|0)<0){o=s[i+40>>2]|0;if((o|0)!=0){if((r[i+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[i+40>>2]=0}r[i+44>>0]=1;s[i+40>>2]=0;s[i+36>>2]=0;o=a}else o=a;do{a=(s[i+40>>2]|0)+(o<<2)|0;if((a|0)!=0)s[a>>2]=0;o=o+1|0}while((o|0)!=0)}s[i+32>>2]=0;o=s[i+52>>2]|0;if((o|0)<0){if((s[i+56>>2]|0)<0){a=s[i+60>>2]|0;if((a|0)!=0){if((r[i+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[i+60>>2]=0}r[i+64>>0]=1;s[i+60>>2]=0;s[i+56>>2]=0}do{a=(s[i+60>>2]|0)+(o<<2)|0;if((a|0)!=0)s[a>>2]=0;o=o+1|0}while((o|0)!=0)}s[i+52>>2]=0;a=s[i+72>>2]|0;if((a|0)<0){if((s[i+76>>2]|0)<0){o=s[i+80>>2]|0;if((o|0)!=0){if((r[i+84>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[i+80>>2]=0}r[i+84>>0]=1;s[i+80>>2]=0;s[i+76>>2]=0;o=a}else o=a;do{a=(s[i+80>>2]|0)+(o<<2)|0;if((a|0)!=0)s[a>>2]=0;o=o+1|0}while((o|0)!=0)}s[i+72>>2]=0;i=s[e+200>>2]|0;h=s[(s[i>>2]|0)+8>>2]|0;a=s[e+8>>2]|0;o=s[e+24>>2]|0;o=dD[s[(s[o>>2]|0)+36>>2]&127](o)|0;WD[h&127](i,a,o);o=s[e+204>>2]|0;a=s[e+24>>2]|0;i=s[e+196>>2]|0;CC(16584);h=s[o+28>>2]|0;if((h|0)<0){if((s[o+32>>2]|0)<0){l=s[o+36>>2]|0;if((l|0)!=0){if((r[o+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[o+36>>2]=0}r[o+40>>0]=1;s[o+36>>2]=0;s[o+32>>2]=0}do{l=(s[o+36>>2]|0)+(h<<2)|0;if((l|0)!=0)s[l>>2]=0;h=h+1|0}while((h|0)!=0)}s[o+28>>2]=0;l=s[o+8>>2]|0;if((l|0)>0){h=s[o+16>>2]|0;p=0;do{d=h+(p<<3)|0;m=s[d>>2]|0;if((m|0)==(p|0))g=p;else{v=d;do{g=h+(m<<3)|0;s[v>>2]=s[g>>2];g=s[g>>2]|0;v=h+(g<<3)|0;m=s[v>>2]|0}while((g|0)!=(m|0))}s[d>>2]=g;p=p+1|0}while((p|0)!=(l|0));m=s[o+8>>2]|0;if((m|0)>1){ET(o+4|0,0,m+ -1|0);m=s[o+8>>2]|0}if((m|0)>0){v=s[o+16>>2]|0;g=0;while(1){d=s[v+(g<<3)>>2]|0;h=g;do{h=h+1|0;l=(h|0)<(m|0);if(!l)break}while((s[v+(h<<3)>>2]|0)==(d|0));if((g|0)<(h|0)){p=s[e+16>>2]|0;b=1;y=g;do{w=s[p+(s[v+(y<<3)+4>>2]<<2)>>2]|0;if((s[w+208>>2]|0)==(d|0)){E=s[w+216>>2]|0;b=b&(E|0)!=1&(E|0)!=4}y=y+1|0}while((y|0)!=(h|0));if(b){do{y=s[p+(s[v+(g<<3)+4>>2]<<2)>>2]|0;if((s[y+208>>2]|0)==(d|0)?!(((s[y+216>>2]|0)+ -4|0)>>>0<2):0)s[y+216>>2]=2;g=g+1|0}while((g|0)<(h|0))}else do{y=s[p+(s[v+(g<<3)+4>>2]<<2)>>2]|0;if((s[y+208>>2]|0)==(d|0)?(s[y+216>>2]|0)==2:0){s[y+216>>2]=3;f[y+220>>2]=0}g=g+1|0}while((g|0)<(h|0))}if(l)g=h;else break}}}h=dD[s[(s[a>>2]|0)+36>>2]&127](a)|0;if((h|0)>0){l=0;do{p=DD[s[(s[a>>2]|0)+40>>2]&31](a,l)|0;d=s[p+740>>2]|0;v=s[p+744>>2]|0;if((d|0)!=0?(s[d+216>>2]|0)!=2:0)m=101;else m=99;if(((m|0)==99?(m=0,(v|0)!=0):0)?(s[v+216>>2]|0)!=2:0)m=101;if((m|0)==101){E=s[d+204>>2]|0;if((((E&2|0)!=0?(s[d+216>>2]|0)!=2:0)?(E&4|0)==0:0)?(s[v+204>>2]&3|0)==0:0){if(!(((s[v+216>>2]|0)+ -4|0)>>>0<2))s[v+216>>2]=1;f[v+220>>2]=0}E=s[v+204>>2]|0;if((((E&2|0)!=0?(s[v+216>>2]|0)!=2:0)?(E&4|0)==0:0)?(s[d+204>>2]&3|0)==0:0){if(!(((s[d+216>>2]|0)+ -4|0)>>>0<2))s[d+216>>2]=1;f[d+220>>2]=0}if((r[o+64>>0]|0)!=0?xD[s[(s[a>>2]|0)+28>>2]&31](a,d,v)|0:0){v=s[o+28>>2]|0;if((v|0)==(s[o+32>>2]|0)?(u=(v|0)==0?1:v<<1,(v|0)<(u|0)):0){if((u|0)==0)d=0;else{s[5004]=(s[5004]|0)+1;d=cM((u<<2|3)+16|0)|0;if((d|0)==0)d=0;else{s[(d+19&-16)+ -4>>2]=d;d=d+19&-16}v=s[o+28>>2]|0}if((v|0)>0){g=0;do{m=d+(g<<2)|0;if((m|0)!=0)s[m>>2]=s[(s[o+36>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(v|0))}m=s[o+36>>2]|0;if((m|0)!=0){if((r[o+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[m+ -4>>2]|0);v=s[o+28>>2]|0}s[o+36>>2]=0}r[o+40>>0]=1;s[o+36>>2]=d;s[o+32>>2]=u}d=(s[o+36>>2]|0)+(v<<2)|0;if((d|0)!=0)s[d>>2]=p;s[o+28>>2]=v+1}}l=l+1|0}while((l|0)<(h|0))}u=s[5022]|0;E=(s[u+16>>2]|0)+ -1|0;s[u+16>>2]=E;do if((E|0)==0){if((s[u+4>>2]|0)!=0){Pn(n|0,0)|0;E=s[5008]|0;f[u+8>>2]=+(((s[n+4>>2]|0)-(s[E+4>>2]|0)+(((s[n>>2]|0)-(s[E>>2]|0)|0)*1e6|0)-(s[u+12>>2]|0)|0)>>>0)/1e3+ +f[u+8>>2];if((s[u+16>>2]|0)!=0)break;u=s[5022]|0}s[5022]=s[u+20>>2]}while(0);u=s[o+8>>2]|0;CC(16616);if((r[o+64>>0]|0)!=0){a=s[o+28>>2]|0;if((a|0)>1)bx(o+24|0,0,a+ -1|0);if((u|0)>0){p=1;d=0;l=0;do{g=s[o+16>>2]|0;h=s[g+(d<<3)>>2]|0;e:do if((d|0)<(u|0)){m=h;v=1;while(1){if((m|0)!=(h|0))break e;m=s[(s[e+16>>2]|0)+(s[g+(d<<3)+4>>2]<<2)>>2]|0;b=s[o+48>>2]|0;do if((b|0)==(s[o+52>>2]|0)){g=(b|0)==0?1:b<<1;if((b|0)>=(g|0))break;if((g|0)==0)y=0;else{s[5004]=(s[5004]|0)+1;y=cM((g<<2|3)+16|0)|0;if((y|0)==0)y=0;else{s[(y+19&-16)+ -4>>2]=y;y=y+19&-16}b=s[o+48>>2]|0}if((b|0)>0){w=0;do{E=y+(w<<2)|0;if((E|0)!=0)s[E>>2]=s[(s[o+56>>2]|0)+(w<<2)>>2];w=w+1|0}while((w|0)!=(b|0))}w=s[o+56>>2]|0;if((w|0)!=0){if((r[o+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[w+ -4>>2]|0);b=s[o+48>>2]|0}s[o+56>>2]=0}r[o+60>>0]=1;s[o+56>>2]=y;s[o+52>>2]=g}while(0);g=(s[o+56>>2]|0)+(b<<2)|0;if((g|0)!=0)s[g>>2]=m;s[o+48>>2]=b+1;E=s[m+216>>2]|0;v=v&((E|0)==2|(E|0)==5);d=d+1|0;if((d|0)>=(u|0))break e;g=s[o+16>>2]|0;m=s[g+(d<<3)>>2]|0}}else v=1;while(0);if((l|0)<(a|0)){g=s[o+36>>2]|0;m=g+(l<<2)|0;y=s[m>>2]|0;b=s[(s[y+740>>2]|0)+208>>2]|0;if(!((b|0)>-1))b=s[(s[y+744>>2]|0)+208>>2]|0;if((b|0)==(h|0)){y=l;do{y=y+1|0;if((y|0)>=(a|0))break;b=s[g+(y<<2)>>2]|0;p=s[(s[b+740>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[b+744>>2]|0)+208>>2]|0}while((h|0)==(p|0));p=y;g=y-l|0}else{g=0;m=0}}else{g=0;m=0}if(!v)TD[s[(s[i>>2]|0)+8>>2]&7](i,s[o+56>>2]|0,s[o+48>>2]|0,m,g,h);l=(g|0)==0?l:p;v=s[o+48>>2]|0;if((v|0)<0){if((s[o+52>>2]|0)<0){h=s[o+56>>2]|0;if((h|0)!=0){if((r[o+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[o+56>>2]=0}r[o+60>>0]=1;s[o+56>>2]=0;s[o+52>>2]=0}do{h=(s[o+56>>2]|0)+(v<<2)|0;if((h|0)!=0)s[h>>2]=0;v=v+1|0}while((v|0)!=0)}s[o+48>>2]=0}while((d|0)<(u|0))}}else{w=dD[s[(s[a>>2]|0)+44>>2]&127](a)|0;E=dD[s[(s[a>>2]|0)+36>>2]&127](a)|0;TD[s[(s[i>>2]|0)+8>>2]&7](i,s[e+16>>2]|0,s[e+8>>2]|0,w,E,-1)}i=s[5022]|0;E=(s[i+16>>2]|0)+ -1|0;s[i+16>>2]=E;do if((E|0)==0){if((s[i+4>>2]|0)!=0){Pn(n|0,0)|0;E=s[5008]|0;f[i+8>>2]=+(((s[n+4>>2]|0)-(s[E+4>>2]|0)+(((s[n>>2]|0)-(s[E>>2]|0)|0)*1e6|0)-(s[i+12>>2]|0)|0)>>>0)/1e3+ +f[i+8>>2];if((s[i+16>>2]|0)!=0)break;i=s[5022]|0}s[5022]=s[i+20>>2]}while(0);aw(s[e+196>>2]|0);E=s[e+200>>2]|0;WD[s[(s[E>>2]|0)+16>>2]&127](E,t,s[e+72>>2]|0);e=s[5022]|0;E=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=E;if((E|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n|0,0)|0;E=s[5008]|0;f[e+8>>2]=+(((s[n+4>>2]|0)-(s[E+4>>2]|0)+(((s[n>>2]|0)-(s[E>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function aw(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,f=0,l=0;t=c;n=s[e+32>>2]|0;if((n|0)==0)i=0;else i=s[e+40>>2]|0;o=s[e+52>>2]|0;if((o|0)==0)u=0;else u=s[e+60>>2]|0;a=s[e+72>>2]|0;if((a|0)==0)f=0;else f=s[e+80>>2]|0;l=s[e+8>>2]|0;+HD[s[(s[l>>2]|0)+12>>2]&3](l,i,n,u,o,f,a,s[e+4>>2]|0,s[e+20>>2]|0,s[e+24>>2]|0);n=s[e+32>>2]|0;if((n|0)<0){if((s[e+36>>2]|0)<0){i=s[e+40>>2]|0;if((i|0)!=0){if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+40>>2]=0}r[e+44>>0]=1;s[e+40>>2]=0;s[e+36>>2]=0}do{i=(s[e+40>>2]|0)+(n<<2)|0;if((i|0)!=0)s[i>>2]=0;n=n+1|0}while((n|0)!=0)}s[e+32>>2]=0;n=s[e+52>>2]|0;if((n|0)<0){if((s[e+56>>2]|0)<0){i=s[e+60>>2]|0;if((i|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=0;s[e+56>>2]=0}do{i=(s[e+60>>2]|0)+(n<<2)|0;if((i|0)!=0)s[i>>2]=0;n=n+1|0}while((n|0)!=0)}s[e+52>>2]=0;n=s[e+72>>2]|0;if((n|0)>=0){s[e+72>>2]=0;c=t;return}if((s[e+76>>2]|0)<0){i=s[e+80>>2]|0;if((i|0)!=0){if((r[e+84>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+80>>2]=0}r[e+84>>0]=1;s[e+80>>2]=0;s[e+76>>2]=0;i=n}else i=n;do{n=(s[e+80>>2]|0)+(i<<2)|0;if((n|0)!=0)s[n>>2]=0;i=i+1|0}while((i|0)!=0);s[e+72>>2]=0;c=t;return}function fw(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;t=c;c=c+16|0;CC(1728);v=s[e+204>>2]|0;WD[s[(s[v>>2]|0)+8>>2]&127](v,e,s[e+24>>2]|0);if((s[e+308>>2]|0)>0){o=s[e+316>>2]|0;u=0;do{a=s[o+(u<<2)>>2]|0;l=s[a+740>>2]|0;a=s[a+744>>2]|0;if(((l|0)!=0?!((a|0)==0?1:(s[l+204>>2]&3|0)!=0):0)?(s[a+204>>2]&3|0)==0:0){h=s[l+208>>2]|0;l=s[a+208>>2]|0;a=s[(s[e+204>>2]|0)+16>>2]|0;p=s[a+(h<<3)>>2]|0;if((p|0)!=(h|0)){d=a+(h<<3)|0;do{h=a+(p<<3)|0;s[d>>2]=s[h>>2];h=s[h>>2]|0;d=a+(h<<3)|0;p=s[d>>2]|0}while((h|0)!=(p|0))}p=s[a+(l<<3)>>2]|0;if((p|0)!=(l|0)){d=a+(l<<3)|0;do{l=a+(p<<3)|0;s[d>>2]=s[l>>2];l=s[l>>2]|0;d=a+(l<<3)|0;p=s[d>>2]|0}while((l|0)!=(p|0))}if((h|0)!=(l|0)){s[a+(h<<3)>>2]=l;v=a+(l<<3)+4|0;s[v>>2]=(s[v>>2]|0)+(s[a+(h<<3)+4>>2]|0)}}u=u+1|0}while((u|0)<(s[e+308>>2]|0))}o=s[e+212>>2]|0;if((o|0)>0){a=s[e+220>>2]|0;u=0;do{l=s[a+(u<<2)>>2]|0;if((((r[l+20>>0]|0)!=0?(n=s[l+28>>2]|0,i=s[l+32>>2]|0,(n|0)!=0):0)?!((i|0)==0?1:(s[n+204>>2]&3|0)!=0):0)?(s[i+204>>2]&3|0)==0:0){p=s[n+208>>2]|0;h=s[i+208>>2]|0;l=s[(s[e+204>>2]|0)+16>>2]|0;d=s[l+(p<<3)>>2]|0;if((d|0)!=(p|0)){v=l+(p<<3)|0;do{p=l+(d<<3)|0;s[v>>2]=s[p>>2];p=s[p>>2]|0;v=l+(p<<3)|0;d=s[v>>2]|0}while((p|0)!=(d|0))}d=s[l+(h<<3)>>2]|0;if((d|0)!=(h|0)){v=l+(h<<3)|0;do{h=l+(d<<3)|0;s[v>>2]=s[h>>2];h=s[h>>2]|0;v=l+(h<<3)|0;d=s[v>>2]|0}while((h|0)!=(d|0))}if((p|0)!=(h|0)){s[l+(p<<3)>>2]=h;v=l+(h<<3)+4|0;s[v>>2]=(s[v>>2]|0)+(s[l+(p<<3)+4>>2]|0)}}u=u+1|0}while((u|0)!=(o|0))}v=s[e+204>>2]|0;hD[s[(s[v>>2]|0)+12>>2]&127](v,e);e=s[5022]|0;v=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=v;if((v|0)!=0){c=t;return}do if((s[e+4>>2]|0)!=0){Pn(t|0,0)|0;v=s[5008]|0;f[e+8>>2]=+(((s[t+4>>2]|0)-(s[v+4>>2]|0)+(((s[t>>2]|0)-(s[v>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=t;return}}while(0);s[5022]=s[e+20>>2];c=t;return}function lw(e){e=e|0;return}function cw(e){e=e|0;return}function hw(e,t){e=e|0;t=+t;var n=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0;n=c;c=c+352|0;CC(1872);if((s[e+232>>2]|0)>0){m=n+232|0;p=0;do{d=s[(s[e+240>>2]|0)+(p<<2)>>2]|0;f[d+244>>2]=1;C=s[d+216>>2]|0;do if(!((C|0)==2|(C|0)==5)?(s[d+204>>2]&3|0)==0:0){Dd(d+4|0,+f[d+312>>2],+f[d+316>>2],+f[d+320>>2],d+328|0,t,n+184|0);A=+f[m>>2]- +f[d+52>>2];L=+f[n+236>>2]- +f[d+56>>2];k=+f[n+240>>2]- +f[d+60>>2];if((r[e+44>>0]|0)!=0?(O=+f[d+252>>2],O*O!=0?O*O<A*A+L*L+k*k:0):0){CC(1896);if((s[(s[d+192>>2]|0)+4>>2]|0)<20){s[440]=(s[440]|0)+1;N=s[e+68>>2]|0;N=dD[s[(s[N>>2]|0)+36>>2]&127](N)|0;C=s[e+24>>2]|0;f[n+252>>2]=1;i[n+256>>1]=1;i[n+258>>1]=-1;s[n+248>>2]=688;s[n+260>>2]=s[d+52>>2];s[n+264>>2]=s[d+56>>2];s[n+268>>2]=s[d+60>>2];s[n+272>>2]=s[d+64>>2];s[n+276>>2]=s[m+0>>2];s[n+280>>2]=s[m+4>>2];s[n+284>>2]=s[m+8>>2];s[n+288>>2]=s[m+12>>2];s[n+324>>2]=0;s[n+248>>2]=2160;s[n+328>>2]=d;f[n+332>>2]=0;s[n+336>>2]=N;s[n+340>>2]=C;k=+f[d+248>>2];s[n+136>>2]=0;f[n+140>>2]=1;f[n+144>>2]=1;f[n+148>>2]=1;f[n+152>>2]=0;s[n+128>>2]=16680;s[n+132>>2]=8;f[n+156>>2]=k;f[n+172>>2]=k;f[n+332>>2]=+f[e+56>>2];C=s[d+188>>2]|0;i[n+256>>1]=i[C+4>>1]|0;i[n+258>>1]=i[C+6>>1]|0;s[n+112>>2]=s[m+0>>2];s[n+116>>2]=s[m+4>>2];s[n+120>>2]=s[m+8>>2];s[n+124>>2]=s[m+12>>2];s[n+64>>2]=s[d+4>>2];s[n+68>>2]=s[d+8>>2];s[n+72>>2]=s[d+12>>2];s[n+76>>2]=s[d+16>>2];s[n+80>>2]=s[d+20>>2];s[n+84>>2]=s[d+24>>2];s[n+88>>2]=s[d+28>>2];s[n+92>>2]=s[d+32>>2];s[n+96>>2]=s[d+36>>2];s[n+100>>2]=s[d+40>>2];s[n+104>>2]=s[d+44>>2];s[n+108>>2]=s[d+48>>2];yy(e,n+128|0,d+4|0,n+64|0,n+248|0,0);k=+f[n+252>>2];if(k<1){f[d+244>>2]=k;Dd(d+4|0,+f[d+312>>2],+f[d+316>>2],+f[d+320>>2],d+328|0,k*t,n+184|0);f[d+244>>2]=0;lS(d,n+184|0);g=4}else g=0;if((g|0)==0)v=11}else v=11;if((v|0)==11){v=0;g=0}y=s[5022]|0;C=(s[y+16>>2]|0)+ -1|0;s[y+16>>2]=C;do if((C|0)==0){if((s[y+4>>2]|0)!=0){Pn(n+248|0,0)|0;C=s[5008]|0;f[y+8>>2]=+(((s[n+252>>2]|0)-(s[C+4>>2]|0)+(((s[n+248>>2]|0)-(s[C>>2]|0)|0)*1e6|0)-(s[y+12>>2]|0)|0)>>>0)/1e3+ +f[y+8>>2];if((s[y+16>>2]|0)!=0)break;y=s[5022]|0}s[5022]=s[y+20>>2]}while(0);if((g|0)==4)break}lS(d,n+184|0)}while(0);p=p+1|0}while((p|0)<(s[e+232>>2]|0))}do if((r[e+275>>0]|0)!=0){CC(1920);m=s[e+308>>2]|0;if((m|0)>0){p=0;do{d=s[(s[e+316>>2]|0)+(p<<2)>>2]|0;x=s[d+740>>2]|0;if((s[x+236>>2]&2|0)==0)x=0;v=s[d+744>>2]|0;if((s[v+236>>2]&2|0)==0)v=0;N=s[d+748>>2]|0;if((N|0)>0){y=x+52|0;g=x+56|0;m=x+60|0;E=v+52|0;b=v+56|0;w=v+60|0;S=(v|0)==0;if((x|0)==0){x=v+228|0;T=0;do{t=+f[57]*+f[x>>2];if((t>0?(o=+f[d+(T*184|0)+124>>2],o!=0):0)?(u=t*o*+f[d+(T*184|0)+68>>2],a=t*o*+f[d+(T*184|0)+72>>2],l=t*o*+f[d+(T*184|0)+76>>2],f[n+48>>2]=-u,f[n+52>>2]=-a,f[n+56>>2]=-l,f[n+60>>2]=0,O=+f[d+(T*184|0)+56>>2]- +f[g>>2],A=+f[d+(T*184|0)+60>>2]- +f[m>>2],f[n+32>>2]=+f[d+(T*184|0)+52>>2]- +f[y>>2],f[n+36>>2]=O,f[n+40>>2]=A,f[n+44>>2]=0,A=+f[d+(T*184|0)+40>>2]- +f[b>>2],O=+f[d+(T*184|0)+44>>2]- +f[w>>2],f[n+16>>2]=+f[d+(T*184|0)+36>>2]- +f[E>>2],f[n+20>>2]=A,f[n+24>>2]=O,f[n+28>>2]=0,!S):0){f[n>>2]=u;f[n+4>>2]=a;f[n+8>>2]=l;f[n+12>>2]=0;Ph(v,n,n+16|0);N=s[d+748>>2]|0}T=T+1|0}while((T|0)<(N|0))}else{N=x+228|0;C=v+228|0;T=0;do{t=+f[N>>2]*+f[C>>2];if((t>0?(h=+f[d+(T*184|0)+124>>2],h!=0):0)?(A=-(t*h*+f[d+(T*184|0)+72>>2]),O=-(t*h*+f[d+(T*184|0)+76>>2]),f[n+48>>2]=-(t*h*+f[d+(T*184|0)+68>>2]),f[n+52>>2]=A,f[n+56>>2]=O,f[n+60>>2]=0,O=+f[d+(T*184|0)+56>>2]- +f[g>>2],A=+f[d+(T*184|0)+60>>2]- +f[m>>2],f[n+32>>2]=+f[d+(T*184|0)+52>>2]- +f[y>>2],f[n+36>>2]=O,f[n+40>>2]=A,f[n+44>>2]=0,A=+f[d+(T*184|0)+40>>2]- +f[b>>2],O=+f[d+(T*184|0)+44>>2]- +f[w>>2],f[n+16>>2]=+f[d+(T*184|0)+36>>2]- +f[E>>2],f[n+20>>2]=A,f[n+24>>2]=O,f[n+28>>2]=0,Ph(x,n+48|0,n+32|0),!S):0){A=-+f[n+52>>2];O=-+f[n+56>>2];f[n>>2]=-+f[n+48>>2];f[n+4>>2]=A;f[n+8>>2]=O;f[n+12>>2]=0;Ph(v,n,n+16|0)}T=T+1|0}while((T|0)<(s[d+748>>2]|0))}m=s[e+308>>2]|0}p=p+1|0}while((p|0)<(m|0))}e=s[5022]|0;C=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=C;if((C|0)==0){if((s[e+4>>2]|0)!=0){Pn(n+248|0,0)|0;C=s[5008]|0;f[e+8>>2]=+(((s[n+252>>2]|0)-(s[C+4>>2]|0)+(((s[n+248>>2]|0)-(s[C>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)!=0)break;e=s[5022]|0}s[5022]=s[e+20>>2]}}while(0);e=s[5022]|0;C=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=C;if((C|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n+248|0,0)|0;C=s[5008]|0;f[e+8>>2]=+(((s[n+252>>2]|0)-(s[C+4>>2]|0)+(((s[n+248>>2]|0)-(s[C>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function pw(e,t){e=e|0;t=+t;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;n=c;c=c+16|0;CC(1960);y=s[e+232>>2]|0;if((y|0)>0){i=0;do{o=s[(s[e+240>>2]|0)+(i<<2)>>2]|0;if((s[o+204>>2]&3|0)==0){a=+f[o+444>>2];p=+V(+(1-a),+t);v=p*+f[o+312>>2];f[o+312>>2]=v;h=p*+f[o+316>>2];f[o+316>>2]=h;p=p*+f[o+320>>2];f[o+320>>2]=p;u=+f[o+448>>2];m=+V(+(1-u),+t);l=m*+f[o+328>>2];f[o+328>>2]=l;d=m*+f[o+332>>2];f[o+332>>2]=d;m=m*+f[o+336>>2];f[o+336>>2]=m;do if((r[o+452>>0]|0)!=0){if(m*m+(l*l+d*d)<+f[o+464>>2]?v*v+h*h+p*p<+f[o+460>>2]:0){g=+f[o+456>>2];f[o+328>>2]=l*g;f[o+332>>2]=g*d;f[o+336>>2]=g*m;f[o+312>>2]=g*v;f[o+316>>2]=g*h;f[o+320>>2]=g*p;v=g*v;h=g*h;p=g*p;l=l*g;d=g*d;m=g*m}g=+X(+(v*v+h*h+p*p));do if(g<a)if(g>.004999999888241291){v=v-v*(1/g)*.004999999888241291;f[o+312>>2]=v;h=h-h*(1/g)*.004999999888241291;f[o+316>>2]=h;p=p-p*(1/g)*.004999999888241291;f[o+320>>2]=p;break}else{s[o+312>>2]=0;s[o+316>>2]=0;s[o+320>>2]=0;s[o+324>>2]=0;v=0;h=0;p=0;break}while(0);a=+X(+(l*l+d*d+m*m));if(a<u)if(a>.004999999888241291){f[o+328>>2]=l-l*(1/a)*.004999999888241291;f[o+332>>2]=d-d*(1/a)*.004999999888241291;f[o+336>>2]=m-m*(1/a)*.004999999888241291;break}else{s[o+328>>2]=0;s[o+332>>2]=0;s[o+336>>2]=0;s[o+340>>2]=0;break}}while(0);Dd(o+4|0,v,h,p,o+328|0,t,o+68|0);y=s[e+232>>2]|0}i=i+1|0}while((i|0)<(y|0))}e=s[5022]|0;y=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=y;if((y|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n|0,0)|0;y=s[5008]|0;f[e+8>>2]=+(((s[n+4>>2]|0)-(s[y+4>>2]|0)+(((s[n>>2]|0)-(s[y>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function dw(e,t){e=e|0;t=t|0;var n=0,i=0;n=c;if((r[e+273>>0]|0)!=0?(i=s[e+200>>2]|0,(i|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}r[e+273>>0]=0;s[e+200>>2]=t;s[(s[e+196>>2]|0)+8>>2]=t;c=n;return}function vw(e){e=e|0;return s[e+200>>2]|0}function mw(e){e=e|0;return s[e+212>>2]|0}function gw(e,t){e=e|0;t=t|0;return s[(s[e+220>>2]|0)+(t<<2)>>2]|0}function yw(e,t){e=e|0;t=t|0;return s[(s[e+220>>2]|0)+(t<<2)>>2]|0}function bw(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0;n=c;lD[s[(s[t>>2]|0)+32>>2]&511](t);r=xD[s[(s[t>>2]|0)+16>>2]&31](t,104,1)|0;i=s[r+8>>2]|0;o=i+0|0;u=o+104|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(u|0));f[i+88>>2]=+f[e+248>>2];f[i+92>>2]=+f[e+252>>2];f[i+96>>2]=+f[e+256>>2];f[i+100>>2]=+f[e+260>>2];f[i>>2]=+f[e+92>>2];f[i+4>>2]=+f[e+96>>2];f[i+8>>2]=+f[e+100>>2];f[i+12>>2]=+f[e+104>>2];f[i+16>>2]=+f[e+108>>2];f[i+20>>2]=+f[e+116>>2];f[i+24>>2]=+f[e+120>>2];f[i+28>>2]=+f[e+124>>2];f[i+32>>2]=+f[e+128>>2];f[i+36>>2]=+f[e+132>>2];f[i+40>>2]=+f[e+140>>2];f[i+44>>2]=+f[e+144>>2];f[i+48>>2]=+f[e+148>>2];f[i+52>>2]=+f[e+152>>2];f[i+56>>2]=+f[e+168>>2];f[i+60>>2]=+f[e+172>>2];s[i+64>>2]=s[e+112>>2];s[i+68>>2]=s[e+156>>2];s[i+72>>2]=s[e+160>>2];s[i+76>>2]=s[e+164>>2];s[i+80>>2]=s[e+136>>2];aD[s[(s[t>>2]|0)+20>>2]&31](t,r,1992,1145853764,i);i=s[e+8>>2]|0;if((i|0)>0){r=0;do{o=s[(s[e+16>>2]|0)+(r<<2)>>2]|0;if((s[o+236>>2]&2|0)!=0){u=dD[s[(s[o>>2]|0)+16>>2]&127](o)|0;u=xD[s[(s[t>>2]|0)+16>>2]&31](t,u,1)|0;i=xD[s[(s[o>>2]|0)+20>>2]&31](o,s[u+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,u,i,1497645650,o);i=s[e+8>>2]|0}r=r+1|0}while((r|0)<(i|0))}if((s[e+212>>2]|0)<=0){Ny(e,t);u=s[t>>2]|0;u=u+36|0;u=s[u>>2]|0;lD[u&511](t);c=n;return}r=0;do{u=s[(s[e+220>>2]|0)+(r<<2)>>2]|0;i=dD[s[(s[u>>2]|0)+36>>2]&127](u)|0;i=xD[s[(s[t>>2]|0)+16>>2]&31](t,i,1)|0;o=xD[s[(s[u>>2]|0)+40>>2]&31](u,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,o,1397641027,u);r=r+1|0}while((r|0)<(s[e+212>>2]|0));Ny(e,t);u=s[t>>2]|0;u=u+36|0;u=s[u>>2]|0;lD[u&511](t);c=n;return}function ww(e,t){e=e|0;t=t|0;s[e+72>>2]=t;return}function Ew(e){e=e|0;return s[e+72>>2]|0}function Sw(e){e=e|0;return 2}function xw(e,t){e=e|0;t=t|0;return}function Tw(e,t){e=e|0;t=+t;var n=0,r=0,i=0;n=c;c=c+16|0;CC(1664);if((s[e+280>>2]|0)>0){r=0;do{i=s[(s[e+288>>2]|0)+(r<<2)>>2]|0;VD[s[(s[i>>2]|0)+8>>2]&7](i,e,t);r=r+1|0}while((r|0)<(s[e+280>>2]|0))}e=s[5022]|0;i=(s[e+16>>2]|0)+ -1|0;s[e+16>>2]=i;if((i|0)!=0){c=n;return}do if((s[e+4>>2]|0)!=0){Pn(n|0,0)|0;i=s[5008]|0;f[e+8>>2]=+(((s[n+4>>2]|0)-(s[i+4>>2]|0)+(((s[n>>2]|0)-(s[i>>2]|0)|0)*1e6|0)-(s[e+12>>2]|0)|0)>>>0)/1e3+ +f[e+8>>2];if((s[e+16>>2]|0)==0){e=s[5022]|0;break}else{c=n;return}}while(0);s[5022]=s[e+20>>2];c=n;return}function Nw(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;r=c;while(1){i=s[e+12>>2]|0;o=s[i+(((t+n|0)/2|0)<<2)>>2]|0;l=t;f=n;while(1){u=s[(s[o+28>>2]|0)+208>>2]|0;if((u|0)>-1)while(1){a=s[i+(l<<2)>>2]|0;h=s[(s[a+28>>2]|0)+208>>2]|0;if(!((h|0)>-1))h=s[(s[a+32>>2]|0)+208>>2]|0;if((h|0)<(u|0))l=l+1|0;else break}else{h=s[(s[o+32>>2]|0)+208>>2]|0;while(1){a=s[i+(l<<2)>>2]|0;p=s[(s[a+28>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[a+32>>2]|0)+208>>2]|0;if((p|0)<(h|0))l=l+1|0;else break}}if((u|0)>-1)while(1){h=s[i+(f<<2)>>2]|0;p=s[(s[h+28>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[h+32>>2]|0)+208>>2]|0;if((u|0)<(p|0))f=f+ -1|0;else break}else{u=s[(s[o+32>>2]|0)+208>>2]|0;while(1){h=s[i+(f<<2)>>2]|0;p=s[(s[h+28>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[h+32>>2]|0)+208>>2]|0;if((u|0)<(p|0))f=f+ -1|0;else break}}if((l|0)<=(f|0)){s[i+(l<<2)>>2]=h;s[(s[e+12>>2]|0)+(f<<2)>>2]=a;l=l+1|0;f=f+ -1|0}if((l|0)>(f|0))break;i=s[e+12>>2]|0}if((f|0)>(t|0))Nw(e,t,f);if((l|0)<(n|0))t=l;else break}c=r;return}function Cw(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function kw(e){e=e|0;return e+12|0}function Lw(e){e=e|0;return 2144}function Aw(e,t){e=e|0;t=t|0;f[e>>2]=1;f[e+4>>2]=1;f[e+8>>2]=1;f[e+12>>2]=0;return}function Ow(e,t){e=e|0;t=+t;f[e+44>>2]=t;return}function Mw(e){e=e|0;return+(+f[e+28>>2]*+f[e+12>>2])}function _w(e){e=e|0;return 52}function Dw(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+28>>2]=+f[e+28>>2];f[t+32>>2]=+f[e+32>>2];f[t+36>>2]=+f[e+36>>2];f[t+40>>2]=+f[e+40>>2];f[t+12>>2]=+f[e+12>>2];f[t+16>>2]=+f[e+16>>2];f[t+20>>2]=+f[e+20>>2];f[t+24>>2]=+f[e+24>>2];f[t+44>>2]=+f[e+44>>2];c=r;return 2112}function Pw(e){e=e|0;return 0}function Hw(e,t,n){e=e|0;t=t|0;n=n|0;return}function Bw(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function jw(e,t){e=e|0;t=t|0;var n=0,r=0,o=0;n=c;o=s[t>>2]|0;r=s[e+80>>2]|0;if((o|0)==(r|0)){t=0;c=n;return t|0}if((i[e+10>>1]&i[t+4>>1])<<16>>16==0){t=0;c=n;return t|0}if((i[t+6>>1]&i[e+8>>1])<<16>>16==0){t=0;c=n;return t|0}t=s[e+92>>2]|0;t=xD[s[(s[t>>2]|0)+28>>2]&31](t,r,o)|0;c=n;return t|0}function Fw(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0;r=c;i=s[t>>2]|0;if((i|0)==(s[e+80>>2]|0)){o=1;c=r;return+o}if((s[i+204>>2]&4|0)!=0){o=1;c=r;return+o}if((+f[e+28>>2]- +f[e+12>>2])*+f[t+8>>2]+(+f[e+32>>2]- +f[e+16>>2])*+f[t+12>>2]+(+f[e+36>>2]- +f[e+20>>2])*+f[t+16>>2]>=-+f[e+84>>2]){o=1;c=r;return+o}f[e+4>>2]=+f[t+40>>2];s[e+76>>2]=i;if(n){s[e+44>>2]=s[t+8>>2];s[e+48>>2]=s[t+12>>2];s[e+52>>2]=s[t+16>>2];s[e+56>>2]=s[t+20>>2]}else{h=+f[t+8>>2];l=+f[t+12>>2];a=+f[t+16>>2];u=h*+f[i+20>>2]+l*+f[i+24>>2]+a*+f[i+28>>2];o=h*+f[i+36>>2]+l*+f[i+40>>2]+a*+f[i+44>>2];f[e+44>>2]=+f[i+4>>2]*h+ +f[i+8>>2]*l+ +f[i+12>>2]*a;f[e+48>>2]=u;f[e+52>>2]=o;f[e+56>>2]=0}s[e+60>>2]=s[t+24>>2];s[e+64>>2]=s[t+28>>2];s[e+68>>2]=s[t+32>>2];s[e+72>>2]=s[t+36>>2];h=+f[t+40>>2];c=r;return+h}function Iw(e){e=e|0;var t=0;t=c;Uw(e);c=t;return}function qw(e){e=e|0;var t=0;t=c;Uw(e);hM(e);c=t;return}function Rw(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;a=c;if((u|0)<0){g=s[e+8>>2]|0;+HD[s[(s[g>>2]|0)+12>>2]&3](g,t,n,i,o,s[e+12>>2]|0,s[e+16>>2]|0,s[e+4>>2]|0,s[e+20>>2]|0,s[e+24>>2]|0);c=a;return}h=s[e+16>>2]|0;e:do if((h|0)>0){l=s[e+12>>2]|0;d=0;while(1){f=l+(d<<2)|0;v=s[f>>2]|0;p=s[(s[v+28>>2]|0)+208>>2]|0;if((p|0)>-1)v=p;else v=s[(s[v+32>>2]|0)+208>>2]|0;p=d+1|0;if((v|0)==(u|0))break e;if((p|0)<(h|0))d=p;else{d=p;f=0;break}}}else{d=0;f=0}while(0);if((d|0)<(h|0)){p=s[e+12>>2]|0;l=0;do{m=s[p+(d<<2)>>2]|0;v=s[(s[m+28>>2]|0)+208>>2]|0;if(!((v|0)>-1))v=s[(s[m+32>>2]|0)+208>>2]|0;l=((v|0)==(u|0)&1)+l|0;d=d+1|0}while((d|0)<(h|0))}else l=0;u=s[e+4>>2]|0;if((s[u+72>>2]|0)<2){g=s[e+8>>2]|0;+HD[s[(s[g>>2]|0)+12>>2]&3](g,t,n,i,o,f,l,u,s[e+20>>2]|0,s[e+24>>2]|0);c=a;return}if((n|0)>0){d=s[e+32>>2]|0;v=s[e+36>>2]|0;u=0;while(1){h=t+(u<<2)|0;if((d|0)==(v|0)){p=(v|0)==0?1:v<<1;if((v|0)<(p|0)){if((p|0)==0)d=0;else{s[5004]=(s[5004]|0)+1;d=cM((p<<2|3)+16|0)|0;if((d|0)==0)d=0;else{s[(d+19&-16)+ -4>>2]=d;d=d+19&-16}v=s[e+32>>2]|0}if((v|0)>0){g=0;do{m=d+(g<<2)|0;if((m|0)!=0)s[m>>2]=s[(s[e+40>>2]|0)+(g<<2)>>2];g=g+1|0}while((g|0)!=(v|0))}m=s[e+40>>2]|0;if((m|0)!=0){if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[m+ -4>>2]|0);v=s[e+32>>2]|0}s[e+40>>2]=0}r[e+44>>0]=1;s[e+40>>2]=d;s[e+36>>2]=p;d=v}else{d=v;p=v}}else p=v;v=(s[e+40>>2]|0)+(d<<2)|0;if((v|0)!=0)s[v>>2]=s[h>>2];d=d+1|0;s[e+32>>2]=d;u=u+1|0;if((u|0)==(n|0))break;else v=p}}if((o|0)>0){h=s[e+52>>2]|0;p=s[e+56>>2]|0;t=0;while(1){n=i+(t<<2)|0;if((h|0)==(p|0)){u=(p|0)==0?1:p<<1;if((p|0)<(u|0)){if((u|0)==0)h=0;else{s[5004]=(s[5004]|0)+1;h=cM((u<<2|3)+16|0)|0;if((h|0)==0)h=0;else{s[(h+19&-16)+ -4>>2]=h;h=h+19&-16}p=s[e+52>>2]|0}if((p|0)>0){v=0;do{d=h+(v<<2)|0;if((d|0)!=0)s[d>>2]=s[(s[e+60>>2]|0)+(v<<2)>>2];v=v+1|0}while((v|0)!=(p|0))}d=s[e+60>>2]|0;if((d|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[d+ -4>>2]|0);p=s[e+52>>2]|0}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=h;s[e+56>>2]=u;h=p}else{h=p;u=p}}else u=p;p=(s[e+60>>2]|0)+(h<<2)|0;if((p|0)!=0)s[p>>2]=s[n>>2];h=h+1|0;s[e+52>>2]=h;t=t+1|0;if((t|0)==(o|0))break;else p=u}}if((l|0)>0){n=s[e+72>>2]|0;u=s[e+76>>2]|0;i=0;while(1){o=f+(i<<2)|0;if((n|0)==(u|0)){t=(u|0)==0?1:u<<1;if((u|0)<(t|0)){if((t|0)==0)n=0;else{s[5004]=(s[5004]|0)+1;n=cM((t<<2|3)+16|0)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}u=s[e+72>>2]|0}if((u|0)>0){h=0;do{p=n+(h<<2)|0;if((p|0)!=0)s[p>>2]=s[(s[e+80>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(u|0))}h=s[e+80>>2]|0;if((h|0)!=0){if((r[e+84>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0);u=s[e+72>>2]|0}s[e+80>>2]=0}r[e+84>>0]=1;s[e+80>>2]=n;s[e+76>>2]=t;n=u}else{n=u;t=u}}else t=u;u=(s[e+80>>2]|0)+(n<<2)|0;if((u|0)!=0)s[u>>2]=s[o>>2];n=n+1|0;s[e+72>>2]=n;i=i+1|0;if((i|0)==(l|0))break;else u=t}}else n=s[e+72>>2]|0;if(((s[e+52>>2]|0)+n|0)<=(s[(s[e+4>>2]|0)+72>>2]|0)){c=a;return}aw(e);c=a;return}function Uw(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=2240;n=s[e+80>>2]|0;if((n|0)!=0){if((r[e+84>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+80>>2]=0}r[e+84>>0]=1;s[e+80>>2]=0;s[e+72>>2]=0;s[e+76>>2]=0;n=s[e+60>>2]|0;if((n|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;n=s[e+40>>2]|0;if((n|0)==0){r[e+44>>0]=1;s[e+40>>2]=0;s[e+32>>2]=0;n=e+36|0;s[n>>2]=0;c=t;return}if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+40>>2]=0;r[e+44>>0]=1;s[e+40>>2]=0;s[e+32>>2]=0;n=e+36|0;s[n>>2]=0;c=t;return}function zw(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0;i=c;c=c+128|0;bd(i+64|0,t,e+48|0);s[e+1064>>2]=s[i+64>>2];s[e+1068>>2]=s[i+68>>2];s[e+1072>>2]=s[i+72>>2];s[e+1076>>2]=s[i+76>>2];s[e+1080>>2]=s[i+80>>2];s[e+1084>>2]=s[i+84>>2];s[e+1088>>2]=s[i+88>>2];s[e+1092>>2]=s[i+92>>2];s[e+1096>>2]=s[i+96>>2];s[e+1100>>2]=s[i+100>>2];s[e+1104>>2]=s[i+104>>2];s[e+1108>>2]=s[i+108>>2];s[e+1112>>2]=s[i+112>>2];s[e+1116>>2]=s[i+116>>2];s[e+1120>>2]=s[i+120>>2];s[e+1124>>2]=s[i+124>>2];bd(i,n,e+112|0);s[e+1128>>2]=s[i+0>>2];s[e+1132>>2]=s[i+4>>2];s[e+1136>>2]=s[i+8>>2];s[e+1140>>2]=s[i+12>>2];s[e+1144>>2]=s[i+16>>2];s[e+1148>>2]=s[i+20>>2];s[e+1152>>2]=s[i+24>>2];s[e+1156>>2]=s[i+28>>2];s[e+1160>>2]=s[i+32>>2];s[e+1164>>2]=s[i+36>>2];s[e+1168>>2]=s[i+40>>2];s[e+1172>>2]=s[i+44>>2];s[e+1176>>2]=s[i+48>>2];s[e+1180>>2]=s[i+52>>2];s[e+1184>>2]=s[i+56>>2];s[e+1188>>2]=s[i+60>>2];S=+f[e+1176>>2]- +f[e+1112>>2];x=+f[e+1180>>2]- +f[e+1116>>2];b=+f[e+1184>>2]- +f[e+1120>>2];g=+f[e+1084>>2];m=+f[e+1104>>2];h=+f[e+1088>>2];o=+f[e+1100>>2];y=+f[e+1096>>2];p=+f[e+1080>>2];d=+f[e+1064>>2];l=+f[e+1068>>2];a=+f[e+1072>>2];u=1/((g*m-h*o)*d+l*(h*y-m*p)+(o*p-g*y)*a);v=(o*p-g*y)*u;E=(g*m-h*o)*u*S+u*(o*a-m*l)*x+u*(h*l-g*a)*b;w=S*(h*y-m*p)*u+x*u*(m*d-y*a)+u*(p*a-h*d)*b;b=S*v+u*(y*l-o*d)*x+u*(g*d-p*l)*b;f[e+1256>>2]=E;f[e+1260>>2]=w;f[e+1264>>2]=b;f[e+1268>>2]=0;f[e+840>>2]=E;x=+f[e+680>>2];S=+f[e+696>>2];do if(!(x>S)){if(x>E){s[e+856>>2]=2;f[e+824>>2]=E-x;break}if(S<E){s[e+856>>2]=1;f[e+824>>2]=E-S;break}else{s[e+856>>2]=0;f[e+824>>2]=0;break}}else{s[e+856>>2]=0;f[e+824>>2]=0}while(0);f[e+844>>2]=w;S=+f[e+684>>2];E=+f[e+700>>2];do if(!(S>E)){if(S>w){s[e+860>>2]=2;f[e+828>>2]=w-S;break}if(E<w){s[e+860>>2]=1;f[e+828>>2]=w-E;break}else{s[e+860>>2]=0;f[e+828>>2]=0;break}}else{s[e+860>>2]=0;f[e+828>>2]=0}while(0);f[e+848>>2]=b;E=+f[e+688>>2];w=+f[e+704>>2];do if(!(E>w)){if(E>b){s[e+864>>2]=2;f[e+832>>2]=b-E;break}if(w<b){s[e+864>>2]=1;f[e+832>>2]=b-w;break}else{s[e+864>>2]=0;f[e+832>>2]=0;break}}else{s[e+864>>2]=0;f[e+832>>2]=0}while(0);k=+f[e+1128>>2];C=+f[e+1144>>2];S=+f[e+1160>>2];w=+f[e+1132>>2];E=+f[e+1148>>2];x=+f[e+1164>>2];L=(g*m-h*o)*u*w+u*(o*a-m*l)*E+u*(h*l-g*a)*x;b=(h*y-m*p)*u*w+u*(m*d-y*a)*E+u*(p*a-h*d)*x;N=k*v+u*(y*l-o*d)*C+u*(g*d-p*l)*S;T=v*+f[e+1136>>2]+u*(y*l-o*d)*+f[e+1152>>2]+u*(g*d-p*l)*+f[e+1168>>2];do if(N<1)if(N>-1){f[e+1192>>2]=+Z(+-(v*w+u*(y*l-o*d)*E+u*(g*d-p*l)*x),+T);L=N<-1?-1:N;f[e+1196>>2]=+G(+(L>1?1:L));f[e+1200>>2]=+Z(+-(k*(h*y-m*p)*u+C*u*(m*d-y*a)+u*(p*a-h*d)*S),+(k*(g*m-h*o)*u+C*u*(o*a-m*l)+u*(h*l-g*a)*S));break}else{f[e+1192>>2]=-+Z(+L,+b);f[e+1196>>2]=-1.5707963705062866;f[e+1200>>2]=0;break}else{f[e+1192>>2]=+Z(+L,+b);f[e+1196>>2]=1.5707963705062866;f[e+1200>>2]=0}while(0);f[e+1236>>2]=0;b=m*(k*m-S*a)-h*(C*a-k*h);w=a*(C*a-k*h)-m*(S*h-C*m);E=h*(S*h-C*m)-a*(k*m-S*a);f[e+1220>>2]=0;x=C*(C*a-k*h)-S*(k*m-S*a);T=S*(S*h-C*m)-k*(C*a-k*h);N=k*(k*m-S*a)-C*(S*h-C*m);f[e+1252>>2]=0;L=1/+X(+(b*b+w*w+E*E));f[e+1208>>2]=b*L;f[e+1212>>2]=w*L;f[e+1216>>2]=E*L;L=1/+X(+((S*h-C*m)*(S*h-C*m)+(k*m-S*a)*(k*m-S*a)+(C*a-k*h)*(C*a-k*h)));f[e+1224>>2]=(S*h-C*m)*L;f[e+1228>>2]=(k*m-S*a)*L;f[e+1232>>2]=(C*a-k*h)*L;L=1/+X(+(x*x+T*T+N*N));f[e+1240>>2]=x*L;f[e+1244>>2]=T*L;f[e+1248>>2]=N*L;if((r[e+1301>>0]|0)==0){c=i;return}u=+f[(s[e+28>>2]|0)+344>>2];o=+f[(s[e+32>>2]|0)+344>>2];if(u<1.1920928955078125e-7)t=1;else t=o<1.1920928955078125e-7&1;r[e+1280>>0]=t;if(u+o>0){f[e+1272>>2]=o/(u+o);o=o/(u+o)}else{f[e+1272>>2]=.5;o=.5}f[e+1276>>2]=1-o;c=i;return}function Ww(e,t,n,r,i,o,u,a,l){e=e|0;t=t|0;n=n|0;r=+r;i=+i;o=+o;u=+u;a=+a;l=+l;var h=0,p=0;h=c;c=c+128|0;if((t|0)==0){c=h;return}p=s[e+28>>2]|0;f[h+80>>2]=+f[p+4>>2];f[h+84>>2]=+f[p+20>>2];f[h+88>>2]=+f[p+36>>2];f[h+92>>2]=0;f[h+96>>2]=+f[p+8>>2];f[h+100>>2]=+f[p+24>>2];f[h+104>>2]=+f[p+40>>2];f[h+108>>2]=0;f[h+112>>2]=+f[p+12>>2];f[h+116>>2]=+f[p+28>>2];f[h+120>>2]=+f[p+44>>2];f[h+124>>2]=0;e=s[e+32>>2]|0;f[h+32>>2]=+f[e+4>>2];f[h+36>>2]=+f[e+20>>2];f[h+40>>2]=+f[e+36>>2];f[h+44>>2]=0;f[h+48>>2]=+f[e+8>>2];f[h+52>>2]=+f[e+24>>2];f[h+56>>2]=+f[e+40>>2];f[h+60>>2]=0;f[h+64>>2]=+f[e+12>>2];f[h+68>>2]=+f[e+28>>2];f[h+72>>2]=+f[e+44>>2];f[h+76>>2]=0;i=i- +f[p+56>>2];o=o- +f[p+60>>2];f[h+16>>2]=r- +f[p+52>>2];f[h+20>>2]=i;f[h+24>>2]=o;f[h+28>>2]=0;a=a- +f[e+56>>2];l=l- +f[e+60>>2];f[h>>2]=u- +f[e+52>>2];f[h+4>>2]=a;f[h+8>>2]=l;f[h+12>>2]=0;Wd(t,h+80|0,h+32|0,h+16|0,h,n,p+396|0,+f[p+344>>2],e+396|0,+f[e+344>>2]);c=h;return}function Xw(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0;r=c;if((t|0)==0){c=r;return}j=s[e+28>>2]|0;w=+f[j+4>>2];b=+f[j+20>>2];y=+f[j+36>>2];m=+f[j+8>>2];v=+f[j+24>>2];d=+f[j+40>>2];h=+f[j+12>>2];a=+f[j+28>>2];o=+f[j+44>>2];e=s[e+32>>2]|0;B=+f[e+4>>2];H=+f[e+20>>2];P=+f[e+36>>2];_=+f[e+8>>2];M=+f[e+24>>2];O=+f[e+40>>2];L=+f[e+12>>2];C=+f[e+28>>2];T=+f[e+44>>2];s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;l=+f[n>>2];u=+f[n+4>>2];i=+f[n+8>>2];f[t+16>>2]=w*l+b*u+y*i;f[t+20>>2]=m*l+v*u+d*i;f[t+24>>2]=h*l+a*u+o*i;f[t+28>>2]=0;k=-+f[n>>2];N=-+f[n+4>>2];x=-+f[n+8>>2];f[t+32>>2]=B*k+H*N+P*x;f[t+36>>2]=_*k+M*N+O*x;f[t+40>>2]=L*k+C*N+T*x;f[t+44>>2]=0;E=(w*l+b*u+y*i)*+f[j+396>>2];g=(m*l+v*u+d*i)*+f[j+400>>2];p=(h*l+a*u+o*i)*+f[j+404>>2];f[t+48>>2]=E;f[t+52>>2]=g;f[t+56>>2]=p;f[t+60>>2]=0;D=(B*k+H*N+P*x)*+f[e+396>>2];A=(_*k+M*N+O*x)*+f[e+400>>2];S=(L*k+C*N+T*x)*+f[e+404>>2];f[t+64>>2]=D;f[t+68>>2]=A;f[t+72>>2]=S;f[t+76>>2]=0;f[t+80>>2]=(B*k+H*N+P*x)*D+(_*k+M*N+O*x)*A+(L*k+C*N+T*x)*S+(E*(w*l+b*u+y*i)+g*(m*l+v*u+d*i)+p*(h*l+a*u+o*i));c=r;return}function Vw(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0;i=c;o=+$w(+f[e+(t<<2)+1192>>2],+f[e+(t<<6)+868>>2],+f[e+(t<<6)+872>>2]);f[e+(t<<6)+920>>2]=o;u=+f[e+(t<<6)+868>>2];a=+f[e+(t<<6)+872>>2];do if(!(u>a)){if(u>o){s[e+(t<<6)+924>>2]=1;f[e+(t<<6)+916>>2]=o-u;if(o-u>3.1415927410125732){f[e+(t<<6)+916>>2]=o-u+ -6.2831854820251465;break}if(!(o-u<-3.1415927410125732))break;f[e+(t<<6)+916>>2]=o-u+6.2831854820251465;break}if(!(a<o)){s[e+(t<<6)+924>>2]=0;n=14;break}s[e+(t<<6)+924>>2]=2;f[e+(t<<6)+916>>2]=o-a;if(o-a>3.1415927410125732){f[e+(t<<6)+916>>2]=o-a+ -6.2831854820251465;break}if(o-a<-3.1415927410125732)f[e+(t<<6)+916>>2]=o-a+6.2831854820251465}else{s[e+(t<<6)+924>>2]=0;n=14}while(0);if((n|0)==14?(r[e+(t<<6)+912>>0]|0)==0:0){t=0;c=i;return t|0}t=1;c=i;return t|0}function $w(e,t,n){e=+e;t=+t;n=+n;var r=0;r=c;if(t>=n){t=e;c=r;return+t}if(e<t){t=+rn(+(t-e),6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;t=+W(+t);n=+rn(+(n-e),6.2831854820251465);if(!(n<-3.1415927410125732)){if(n>3.1415927410125732)n=n+ -6.2831854820251465}else n=n+6.2831854820251465;if(t<+W(+n)){t=e;c=r;return+t}t=e+6.2831854820251465;c=r;return+t}if(!(e>n)){t=e;c=r;return+t}n=+rn(+(e-n),6.2831854820251465);if(!(n<-3.1415927410125732)){if(n>3.1415927410125732)n=n+ -6.2831854820251465}else n=n+6.2831854820251465;n=+W(+n);t=+rn(+(e-t),6.2831854820251465);if(!(t<-3.1415927410125732)){if(t>3.1415927410125732)t=t+ -6.2831854820251465}else t=t+6.2831854820251465;if(!(+W(+t)<n)){t=e;c=r;return+t}t=e+ -6.2831854820251465;c=r;return+t}function Jw(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;o=c;c=c+16|0;if((r[e+1308>>0]|0)==0){c=o;return}f[e+928>>2]=0;f[e+992>>2]=0;f[e+1056>>2]=0;s[e+712>>2]=0;s[e+716>>2]=0;s[e+720>>2]=0;s[e+724>>2]=0;zw(e,(s[e+28>>2]|0)+4|0,(s[e+32>>2]|0)+4|0);lD[s[(s[e>>2]|0)+44>>2]&511](e);t=+f[e+1284>>2];n=+f[e+1288>>2];i=+f[e+1292>>2];if(+f[e+696>>2]>=+f[e+680>>2]){if((r[e+1300>>0]|0)==0){l=e+1160|0;a=e+1144|0;u=e+1128|0}else{l=e+1096|0;a=e+1080|0;u=e+1064|0}h=+f[l>>2];p=+f[a>>2];f[o>>2]=+f[u>>2];f[o+4>>2]=p;f[o+8>>2]=h;f[o+12>>2]=0;Ww(e,e+176|0,o,t,n,i,t,n,i)}if(+f[e+700>>2]>=+f[e+684>>2]){if((r[e+1300>>0]|0)==0){l=e+1164|0;a=e+1148|0;u=e+1132|0}else{l=e+1100|0;a=e+1084|0;u=e+1068|0}p=+f[l>>2];h=+f[a>>2];f[o>>2]=+f[u>>2];f[o+4>>2]=h;f[o+8>>2]=p;f[o+12>>2]=0;Ww(e,e+260|0,o,t,n,i,t,n,i)}if(+f[e+704>>2]>=+f[e+688>>2]){if((r[e+1300>>0]|0)==0){u=e+1168|0;l=e+1152|0;a=e+1136|0}else{u=e+1104|0;l=e+1088|0;a=e+1072|0}p=+f[u>>2];h=+f[l>>2];f[o>>2]=+f[a>>2];f[o+4>>2]=h;f[o+8>>2]=p;f[o+12>>2]=0;Ww(e,e+344|0,o,t,n,i,t,n,i)}if(Vw(e,0)|0){s[o+0>>2]=s[e+1208>>2];s[o+4>>2]=s[e+1212>>2];s[o+8>>2]=s[e+1216>>2];s[o+12>>2]=s[e+1220>>2];Xw(e,e+428|0,o)}if(Vw(e,1)|0){s[o+0>>2]=s[e+1224>>2];s[o+4>>2]=s[e+1228>>2];s[o+8>>2]=s[e+1232>>2];s[o+12>>2]=s[e+1236>>2];Xw(e,e+512|0,o)}if(!(Vw(e,2)|0)){c=o;return}s[o+0>>2]=s[e+1240>>2];s[o+4>>2]=s[e+1244>>2];s[o+8>>2]=s[e+1248>>2];s[o+12>>2]=s[e+1252>>2];Xw(e,e+596|0,o);c=o;return}function Kw(e,t){e=e|0;t=t|0;var n=0,i=0,o=0;n=c;if((r[e+1308>>0]|0)!=0){s[t>>2]=0;s[t+4>>2]=0;c=n;return}zw(e,(s[e+28>>2]|0)+4|0,(s[e+32>>2]|0)+4|0);s[t>>2]=0;s[t+4>>2]=6;if((s[e+856>>2]|0)==0?(r[e+788>>0]|0)==0:0){o=0;i=6}else{s[t>>2]=1;s[t+4>>2]=5;o=1;i=5}if(!((s[e+860>>2]|0)==0?(r[e+789>>0]|0)==0:0)){o=o+1|0;s[t>>2]=o;i=i+ -1|0;s[t+4>>2]=i}if(!((s[e+864>>2]|0)==0?(r[e+790>>0]|0)==0:0)){s[t>>2]=o+1;s[t+4>>2]=i+ -1}if(Vw(e,0)|0){s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1}if(Vw(e,1)|0){s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1}if(!(Vw(e,2)|0)){c=n;return}s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1;c=n;return}function Qw(e,t){e=e|0;t=t|0;var n=0,i=0,o=0;n=c;o=s[e+28>>2]|0;i=s[e+32>>2]|0;if((r[e+1301>>0]|0)==0){Gw(e,t,Yw(e,t,0,o+4|0,i+4|0,o+312|0,i+312|0,o+328|0,i+328|0)|0,o+4|0,i+4|0,o+312|0,i+312|0,o+328|0,i+328|0)|0;c=n;return}else{Yw(e,t,Gw(e,t,0,o+4|0,i+4|0,o+312|0,i+312|0,o+328|0,i+328|0)|0,o+4|0,i+4|0,o+312|0,i+312|0,o+328|0,i+328|0)|0;c=n;return}}function Gw(e,t,n,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;var p=0,d=0,v=0,m=0;d=c;c=c+16|0;p=0;do{v=e+(p<<6)+868|0;if(!((s[e+(p<<6)+924>>2]|0)==0?(r[e+(p<<6)+912>>0]|0)==0:0)){m=e+(p<<4)+1208|0;s[d+0>>2]=s[m+0>>2];s[d+4>>2]=s[m+4>>2];s[d+8>>2]=s[m+8>>2];s[d+12>>2]=s[m+12>>2];m=s[e+1304>>2]>>(p*3|0)+9;if((m&1|0)==0)f[e+(p<<6)+896>>2]=+f[s[t+32>>2]>>2];if((m&2|0)==0)f[e+(p<<6)+904>>2]=+f[s[t+32>>2]>>2];if((m&4|0)==0)f[e+(p<<6)+900>>2]=+f[t+4>>2];n=(Zw(e,v,i,o,u,a,l,h,t,n,d,1,0)|0)+n|0}p=p+1|0}while((p|0)!=3);c=d;return n|0}function Yw(e,t,n,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;var p=0,d=0,v=0,m=0;p=c;c=c+80|0;f[p+76>>2]=0;f[p+24>>2]=0;f[p+28>>2]=.10000000149011612;f[p+32>>2]=300;f[p+16>>2]=1;f[p+20>>2]=-1;f[p+44>>2]=0;f[p+48>>2]=.20000000298023224;f[p+52>>2]=0;f[p+56>>2]=0;f[p+36>>2]=1;f[p+40>>2]=.5;s[p+72>>2]=0;f[p+64>>2]=0;r[p+60>>0]=0;d=0;do{m=s[e+(d<<2)+856>>2]|0;v=r[e+d+788>>0]|0;do if(!((m|0)==0&v<<24>>24==0)){f[p+56>>2]=0;s[p+72>>2]=m;f[p+68>>2]=+f[e+(d<<2)+840>>2];f[p+64>>2]=+f[e+(d<<2)+824>>2];f[p+36>>2]=+f[e+732>>2];r[p+60>>0]=v;f[p+20>>2]=+f[e+(d<<2)+696>>2];f[p+40>>2]=+f[e+728>>2];f[p+16>>2]=+f[e+(d<<2)+680>>2];f[p+32>>2]=0;f[p+28>>2]=+f[e+(d<<2)+808>>2];f[p+24>>2]=+f[e+(d<<2)+792>>2];f[p>>2]=+f[e+(d<<2)+1064>>2];f[p+4>>2]=+f[e+(d<<2)+1080>>2];f[p+8>>2]=+f[e+(d<<2)+1096>>2];f[p+12>>2]=0;v=s[e+1304>>2]>>d*3;if((v&1|0)==0)m=s[t+32>>2]|0;else m=e+(d<<2)+740|0;f[p+44>>2]=+f[m>>2];if((v&2|0)==0)m=s[t+32>>2]|0;else m=e+(d<<2)+772|0;f[p+52>>2]=+f[m>>2];if((v&4|0)==0)v=t+4|0;else v=e+(d<<2)+756|0;f[p+48>>2]=+f[v>>2];if((r[e+1301>>0]|0)==0){n=(Zw(e,p+16|0,i,o,u,a,l,h,t,n,p,0,0)|0)+n|0;break}m=d+1|0;if((s[e+(((m|0)==3?0:m)<<6)+924>>2]|0)==0)v=1;else v=(s[e+(((d+2|0)%3|0)<<6)+924>>2]|0)==0&1;n=(Zw(e,p+16|0,i,o,u,a,l,h,t,n,p,0,v)|0)+n|0}while(0);d=d+1|0}while((d|0)!=3);c=p;return n|0}function Zw(e,t,n,i,o,u,a,l,h,p,d,v,m){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;p=p|0;d=d|0;v=v|0;m=m|0;var g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0;g=c;y=rt(s[h+24>>2]|0,p)|0;w=(r[t+44>>0]|0)==0;p=s[t+56>>2]|0;if(w&(p|0)==0){i=0;c=g;return i|0}O=s[((v|0)!=0?h+12|0:h+8|0)>>2]|0;A=s[((v|0)!=0?h+20|0:h+16|0)>>2]|0;f[O+(y<<2)>>2]=+f[d>>2];f[O+(y+1<<2)>>2]=+f[d+4>>2];f[O+(y+2<<2)>>2]=+f[d+8>>2];f[A+(y<<2)>>2]=-+f[d>>2];f[A+(y+1<<2)>>2]=-+f[d+4>>2];f[A+(y+2<<2)>>2]=-+f[d+8>>2];do if((v|0)==0){E=+f[e+1176>>2];if((r[e+1301>>0]|0)==0){T=E- +f[n+48>>2];k=+f[e+1180>>2]- +f[n+52>>2];L=+f[e+1184>>2]- +f[n+56>>2];C=+f[d+8>>2];x=+f[d+4>>2];N=+f[d>>2];O=s[h+12>>2]|0;f[O+(y<<2)>>2]=k*C-L*x;f[O+(y+1<<2)>>2]=L*N-T*C;f[O+(y+2<<2)>>2]=T*x-k*N;N=+f[e+1176>>2]- +f[i+48>>2];k=+f[e+1180>>2]- +f[i+52>>2];x=+f[e+1184>>2]- +f[i+56>>2];T=+f[d+8>>2];C=+f[d+4>>2];L=+f[d>>2];O=s[h+20>>2]|0;f[O+(y<<2)>>2]=-(k*T-x*C);f[O+(y+1<<2)>>2]=-(x*L-N*T);f[O+(y+2<<2)>>2]=-(N*C-k*L);break}B=E- +f[i+48>>2];P=+f[e+1180>>2]- +f[i+52>>2];_=+f[e+1184>>2]- +f[i+56>>2];H=+f[d>>2];D=+f[d+4>>2];M=+f[d+8>>2];F=+f[e+1112>>2]- +f[n+48>>2];N=+f[e+1116>>2]- +f[n+52>>2];E=+f[e+1120>>2]- +f[n+56>>2];C=+f[t+52>>2]- +f[t+48>>2];j=H*(H*F+D*N+M*E)+H*C-H*(B*H+P*D+_*M);k=D*(H*F+D*N+M*E)+D*C-D*(B*H+P*D+_*M);C=M*(H*F+D*N+M*E)+M*C-M*(B*H+P*D+_*M);S=+f[e+1272>>2];L=+f[e+1276>>2];T=M*(N-D*(H*F+D*N+M*E)+S*k)-D*(E-M*(H*F+D*N+M*E)+S*C);x=H*(E-M*(H*F+D*N+M*E)+S*C)-M*(F-H*(H*F+D*N+M*E)+S*j);E=D*(F-H*(H*F+D*N+M*E)+S*j)-H*(N-D*(H*F+D*N+M*E)+S*k);N=M*(P-D*(B*H+P*D+_*M)-L*k)-D*(_-M*(B*H+P*D+_*M)-L*C);C=H*(_-M*(B*H+P*D+_*M)-L*C)-M*(B-H*(B*H+P*D+_*M)-L*j);k=D*(B-H*(B*H+P*D+_*M)-L*j)-H*(P-D*(B*H+P*D+_*M)-L*k);if((r[e+1280>>0]|0)!=0&(m|0)==0){N=L*N;C=L*C;k=L*k;T=S*T;x=S*x;E=S*E}O=s[h+12>>2]|0;f[O+(y<<2)>>2]=T;f[O+(y+1<<2)>>2]=x;f[O+(y+2<<2)>>2]=E;O=s[h+20>>2]|0;f[O+(y<<2)>>2]=-N;f[O+(y+1<<2)>>2]=-C;f[O+(y+2<<2)>>2]=-k}while(0);if((p|0)!=0?+f[t>>2]==+f[t+4>>2]:0){w=s[h+28>>2]|0;f[w+(y<<2)>>2]=0}else b=11;do if((b|0)==11){b=s[h+28>>2]|0;f[b+(y<<2)>>2]=0;if(!w){f[(s[h+32>>2]|0)+(y<<2)>>2]=+f[t+28>>2];if((p|0)!=0){w=b;break}E=+f[t+8>>2];if((v|0)!=0)N=E;else N=-E;x=+f[t+52>>2];T=+f[t>>2];S=+f[t+4>>2];C=+f[h>>2]*+f[t+32>>2];do if(!(T>S))if(!(T==S)){N=N/C;if(N<0){if(x>=T?T-N>x:0){S=(T-x)/N;break}S=x<T?0:1;break}if(N>0){if(x<=S?S-N<x:0){S=(S-x)/N;break}S=x>S?0:1}else S=0}else S=0;else S=1;while(0);f[b+(y<<2)>>2]=S*E+ +f[b+(y<<2)>>2];f[(s[h+36>>2]|0)+(y<<2)>>2]=-+f[t+12>>2];f[(s[h+40>>2]|0)+(y<<2)>>2]=+f[t+12>>2]}if((p|0)!=0)w=b;else{O=1;c=g;return O|0}}while(0);E=+f[h>>2]*+f[t+32>>2]*+f[t+48>>2];b=w+(y<<2)|0;S=+f[b>>2];if((v|0)!=0)E=S-E;else E=E+S;f[b>>2]=E;f[(s[h+32>>2]|0)+(y<<2)>>2]=+f[t+36>>2];if(+f[t>>2]==+f[t+4>>2]){f[(s[h+36>>2]|0)+(y<<2)>>2]=-3.4028234663852886e38;f[(s[h+40>>2]|0)+(y<<2)>>2]=3.4028234663852886e38;O=1;c=g;return O|0}w=(s[h+36>>2]|0)+(y<<2)|0;if((p|0)==1){f[w>>2]=0;f[(s[h+40>>2]|0)+(y<<2)>>2]=3.4028234663852886e38}else{f[w>>2]=-3.4028234663852886e38;f[(s[h+40>>2]|0)+(y<<2)>>2]=0}E=+f[t+40>>2];if(!(E>0)){O=1;c=g;return O|0}if((v|0)!=0){j=+f[d>>2];F=+f[d+4>>2];S=+f[d+8>>2];S=+f[a>>2]*j+ +f[a+4>>2]*F+ +f[a+8>>2]*S-(j*+f[l>>2]+F*+f[l+4>>2]+S*+f[l+8>>2])}else{j=+f[d>>2];F=+f[d+4>>2];S=+f[d+8>>2];S=+f[o>>2]*j+ +f[o+4>>2]*F+ +f[o+8>>2]*S-(j*+f[u>>2]+F*+f[u+4>>2]+S*+f[u+8>>2])}if((p|0)==1){if(!(S<0)){O=1;c=g;return O|0}E=-(S*E);if(!(+f[b>>2]<E)){O=1;c=g;return O|0}f[b>>2]=E;O=1;c=g;return O|0}else{if(!(S>0)){O=1;c=g;return O|0}E=-(S*E);if(!(+f[b>>2]>E)){O=1;c=g;return O|0}f[b>>2]=E;O=1;c=g;return O|0}return 0}function eE(e){e=e|0;var t=0,n=0,r=0,i=0;n=+f[(s[e+28>>2]|0)+344>>2];t=+f[(s[e+32>>2]|0)+344>>2];if(t==0)t=1;else t=n/(n+t);i=1-t;r=t*+f[e+1116>>2]+i*+f[e+1180>>2];n=t*+f[e+1120>>2]+i*+f[e+1184>>2];f[e+1284>>2]=t*+f[e+1112>>2]+i*+f[e+1176>>2];f[e+1288>>2]=r;f[e+1292>>2]=n;f[e+1296>>2]=0;return}function tE(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var i=0;i=c;if(r>>>0<3)if((t|0)==2){f[e+(r<<2)+756>>2]=n;s[e+1304>>2]=s[e+1304>>2]|4<<r*3;c=i;return}else if((t|0)==3){f[e+(r<<2)+740>>2]=n;s[e+1304>>2]=s[e+1304>>2]|1<<r*3;c=i;return}else if((t|0)==4){f[e+(r<<2)+772>>2]=n;s[e+1304>>2]=s[e+1304>>2]|2<<r*3;c=i;return}else{c=i;return}if(!((r+ -3|0)>>>0<3)){c=i;return}if((t|0)==3){f[e+(r+ -3<<6)+896>>2]=n;s[e+1304>>2]=s[e+1304>>2]|1<<r*3;c=i;return}else if((t|0)==4){f[e+(r+ -3<<6)+904>>2]=n;s[e+1304>>2]=s[e+1304>>2]|2<<r*3;c=i;return}else if((t|0)==2){f[e+(r+ -3<<6)+900>>2]=n;s[e+1304>>2]=s[e+1304>>2]|4<<r*3;c=i;return}else{c=i;return}}function nE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;do if(n>>>0<3)if((t|0)==2){i=+f[e+(n<<2)+756>>2];break}else if((t|0)==3){i=+f[e+(n<<2)+740>>2];break}else if((t|0)==4){i=+f[e+(n<<2)+772>>2];break}else{i=0;break}else if((n+ -3|0)>>>0<3)if((t|0)==3){i=+f[e+(n+ -3<<6)+896>>2];break}else if((t|0)==4){i=+f[e+(n+ -3<<6)+904>>2];break}else if((t|0)==2){i=+f[e+(n+ -3<<6)+900>>2];break}else{i=0;break}else i=0;while(0);c=r;return+i}function rE(e){e=e|0;return}function iE(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function sE(e){e=e|0;return 252}function oE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;Av(e,t,n)|0;f[t+52>>2]=+f[e+48>>2];f[t+56>>2]=+f[e+52>>2];f[t+60>>2]=+f[e+56>>2];f[t+64>>2]=+f[e+60>>2];f[t+68>>2]=+f[e+64>>2];f[t+72>>2]=+f[e+68>>2];f[t+76>>2]=+f[e+72>>2];f[t+80>>2]=+f[e+76>>2];f[t+84>>2]=+f[e+80>>2];f[t+88>>2]=+f[e+84>>2];f[t+92>>2]=+f[e+88>>2];f[t+96>>2]=+f[e+92>>2];f[t+100>>2]=+f[e+96>>2];f[t+104>>2]=+f[e+100>>2];f[t+108>>2]=+f[e+104>>2];f[t+112>>2]=+f[e+108>>2];f[t+116>>2]=+f[e+112>>2];f[t+120>>2]=+f[e+116>>2];f[t+124>>2]=+f[e+120>>2];f[t+128>>2]=+f[e+124>>2];f[t+132>>2]=+f[e+128>>2];f[t+136>>2]=+f[e+132>>2];f[t+140>>2]=+f[e+136>>2];f[t+144>>2]=+f[e+140>>2];f[t+148>>2]=+f[e+144>>2];f[t+152>>2]=+f[e+148>>2];f[t+156>>2]=+f[e+152>>2];f[t+160>>2]=+f[e+156>>2];f[t+164>>2]=+f[e+160>>2];f[t+168>>2]=+f[e+164>>2];f[t+172>>2]=+f[e+168>>2];f[t+176>>2]=+f[e+172>>2];f[t+228>>2]=+f[e+868>>2];f[t+212>>2]=+f[e+872>>2];f[t+196>>2]=+f[e+680>>2];f[t+180>>2]=+f[e+696>>2];f[t+232>>2]=+f[e+932>>2];f[t+216>>2]=+f[e+936>>2];f[t+200>>2]=+f[e+684>>2];f[t+184>>2]=+f[e+700>>2];f[t+236>>2]=+f[e+996>>2];f[t+220>>2]=+f[e+1e3>>2];f[t+204>>2]=+f[e+688>>2];f[t+188>>2]=+f[e+704>>2];s[t+244>>2]=o[e+1300>>0];s[t+248>>2]=o[e+1301>>0];c=r;return 2464}function uE(e,t,n,i,o,u,a,l){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;var h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0;h=c;s[e+4>>2]=4;s[e+8>>2]=-1;s[e+12>>2]=-1;f[e+16>>2]=3.4028234663852886e38;r[e+20>>0]=1;r[e+21>>0]=0;s[e+24>>2]=-1;s[e+28>>2]=t;s[e+32>>2]=n;f[e+36>>2]=0;f[e+40>>2]=.30000001192092896;s[e+44>>2]=0;s[e>>2]=2504;f[e+688>>2]=0;f[e+692>>2]=-1;f[e+696>>2]=.8999999761581421;f[e+700>>2]=.30000001192092896;f[e+704>>2]=1;f[e+708>>2]=0;f[e+712>>2]=0;r[e+716>>0]=0;r[e+736>>0]=0;r[e+737>>0]=0;r[e+738>>0]=0;r[e+739>>0]=1;r[e+740>>0]=l&1;s[e+748>>2]=0;s[e+600>>2]=s[i+0>>2];s[e+604>>2]=s[i+4>>2];s[e+608>>2]=s[i+8>>2];s[e+612>>2]=s[i+12>>2];w=+f[t+4>>2];S=+f[t+20>>2];b=+f[t+36>>2];v=+f[u>>2];x=+f[u+4>>2];E=+f[u+8>>2];do if(!(w*v+S*x+b*E>=.9999998807907104))if(!(w*v+S*x+b*E<=-.9999998807907104)){y=w*E-b*v;d=x*(b*x-S*E)-v*(w*E-b*v);g=S*v-w*x;p=E*(w*E-b*v)-x*(S*v-w*x);m=b*x-S*E;v=v*(S*v-w*x)-E*(b*x-S*E);break}else{y=+f[t+24>>2];d=+f[t+44>>2];g=+f[t+40>>2];p=+f[t+12>>2];m=+f[t+8>>2];v=+f[t+28>>2];break}else{y=+f[t+24>>2];d=-+f[t+44>>2];g=+f[t+40>>2];p=-+f[t+12>>2];m=+f[t+8>>2];v=-+f[t+28>>2]}while(0);f[e+552>>2]=p;f[e+556>>2]=m;f[e+560>>2]=+f[u>>2];f[e+564>>2]=0;f[e+568>>2]=v;f[e+572>>2]=y;f[e+576>>2]=+f[u+4>>2];f[e+580>>2]=0;f[e+584>>2]=d;f[e+588>>2]=g;f[e+592>>2]=+f[u+8>>2];f[e+596>>2]=0;b=+f[u+4>>2];y=+f[a+8>>2];w=+f[u+8>>2];m=+f[a+4>>2];g=+f[a>>2];x=+f[u>>2];do if(y*w+(b*m+g*x)<-.9999998807907104)if(+W(+w)>.7071067690849304){x=1/+X(+(b*b+w*w));S=0;E=-(w*x);x=b*x;b=0;break}else{w=1/+X(+(b*b+x*x));S=0;E=x*w;x=0;b=-(b*w);break}else{T=+X(+((y*w+(b*m+g*x)+1)*2));S=T*.5;E=(w*g-y*x)*(1/T);x=(m*x-b*g)*(1/T);b=(b*y-w*m)*(1/T)}while(0);k=p*S+d*E-v*x;N=v*S+p*x-d*b;C=d*S+v*b-p*E;v=-(p*b)-v*E-d*x;w=-b;b=-E;E=-x;T=N*E+(S*k+v*w)-C*b;x=C*w+(S*N+v*b)-k*E;S=k*b+(S*C+v*E)-N*w;s[e+664>>2]=s[o+0>>2];s[e+668>>2]=s[o+4>>2];s[e+672>>2]=s[o+8>>2];s[e+676>>2]=s[o+12>>2];f[e+616>>2]=T;f[e+620>>2]=m*S-y*x;f[e+624>>2]=+f[a>>2];f[e+628>>2]=0;f[e+632>>2]=x;f[e+636>>2]=y*T-g*S;f[e+640>>2]=+f[a+4>>2];f[e+644>>2]=0;f[e+648>>2]=S;f[e+652>>2]=g*x-m*T;f[e+656>>2]=+f[a+8>>2];f[e+660>>2]=0;f[e+732>>2]=l?-1:1;c=h;return}function aE(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0;o=c;Lv(e,4,t);s[e>>2]=2504;s[e+552>>2]=s[n+0>>2];s[e+556>>2]=s[n+4>>2];s[e+560>>2]=s[n+8>>2];s[e+564>>2]=s[n+12>>2];s[e+568>>2]=s[n+16>>2];s[e+572>>2]=s[n+20>>2];s[e+576>>2]=s[n+24>>2];s[e+580>>2]=s[n+28>>2];s[e+584>>2]=s[n+32>>2];s[e+588>>2]=s[n+36>>2];s[e+592>>2]=s[n+40>>2];s[e+596>>2]=s[n+44>>2];s[e+600>>2]=s[n+48>>2];s[e+604>>2]=s[n+52>>2];s[e+608>>2]=s[n+56>>2];s[e+612>>2]=s[n+60>>2];s[e+616>>2]=s[n+0>>2];s[e+620>>2]=s[n+4>>2];s[e+624>>2]=s[n+8>>2];s[e+628>>2]=s[n+12>>2];s[e+632>>2]=s[n+16>>2];s[e+636>>2]=s[n+20>>2];s[e+640>>2]=s[n+24>>2];s[e+644>>2]=s[n+28>>2];s[e+648>>2]=s[n+32>>2];s[e+652>>2]=s[n+36>>2];s[e+656>>2]=s[n+40>>2];s[e+660>>2]=s[n+44>>2];s[e+664>>2]=s[n+48>>2];s[e+668>>2]=s[n+52>>2];s[e+672>>2]=s[n+56>>2];s[e+676>>2]=s[n+60>>2];f[e+688>>2]=0;f[e+692>>2]=-1;f[e+696>>2]=.8999999761581421;f[e+700>>2]=.30000001192092896;f[e+704>>2]=1;f[e+708>>2]=0;f[e+712>>2]=0;r[e+716>>0]=0;r[e+736>>0]=0;r[e+737>>0]=0;r[e+738>>0]=0;r[e+739>>0]=1;r[e+740>>0]=i&1;s[e+748>>2]=0;t=s[e+28>>2]|0;p=+f[e+600>>2];h=+f[e+604>>2];l=+f[e+608>>2];a=p*+f[t+20>>2]+h*+f[t+24>>2]+l*+f[t+28>>2]+ +f[t+56>>2];u=p*+f[t+36>>2]+h*+f[t+40>>2]+l*+f[t+44>>2]+ +f[t+60>>2];f[e+664>>2]=p*+f[t+4>>2]+h*+f[t+8>>2]+l*+f[t+12>>2]+ +f[t+52>>2];f[e+668>>2]=a;f[e+672>>2]=u;f[e+676>>2]=0;f[e+732>>2]=i?-1:1;c=o;return}function fE(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0;t=c;c=c+176|0;if((r[e+738>>0]|0)==0){c=t;return}f[e+36>>2]=0;f[e+744>>2]=0;e:do if((r[e+736>>0]|0)==0){j=s[e+28>>2]|0;C=+f[e+600>>2];N=+f[e+604>>2];u=+f[e+608>>2];o=C*+f[j+20>>2]+N*+f[j+24>>2]+u*+f[j+28>>2]+ +f[j+56>>2];T=s[e+32>>2]|0;l=+f[e+664>>2];h=+f[T+4>>2];p=+f[e+668>>2];d=+f[T+8>>2];v=+f[e+672>>2];m=+f[T+12>>2];y=+f[T+20>>2];b=+f[T+24>>2];w=+f[T+28>>2];n=+f[T+36>>2];x=+f[T+40>>2];S=+f[T+44>>2];g=+f[T+52>>2];E=+f[T+56>>2];i=+f[T+60>>2];k=l*y+p*b+v*w+E-o;a=C*+f[j+4>>2]+N*+f[j+8>>2]+u*+f[j+12>>2]+ +f[j+52>>2];u=C*+f[j+36>>2]+N*+f[j+40>>2]+u*+f[j+44>>2]+ +f[j+60>>2];N=l*h+p*d+v*m+g-a;C=l*n+p*x+v*S+i-u;if(N*N+k*k+C*C>1.1920928955078125e-7){B=1/+X(+(N*N+k*k+C*C));f[t+128>>2]=N*B;f[t+132>>2]=k*B;f[t+136>>2]=C*B;f[t+140>>2]=0;C=C*B;k=k*B;N=N*B}else{f[t+128>>2]=1;f[t+132>>2]=0;f[t+136>>2]=0;f[t+140>>2]=0;C=0;k=0;N=1}if(+W(+C)>.7071067690849304){D=C*C+k*k;P=1/+X(+D);f[t+144>>2]=0;B=-(P*C);f[t+148>>2]=B;H=P*k;f[t+152>>2]=H;f[t+160>>2]=D*P;f[t+164>>2]=-(N*H);f[t+168>>2]=N*B}else{H=N*N+k*k;B=1/+X(+H);P=-(k*B);f[t+144>>2]=P;D=B*N;f[t+148>>2]=D;f[t+152>>2]=0;f[t+160>>2]=-(C*D);f[t+164>>2]=C*P;f[t+168>>2]=H*B}L=h;N=y;C=n;k=d;A=b;O=x;M=m;B=w;_=S;H=g;P=E;D=i;j=0;while(1){F=s[e+28>>2]|0;f[t+80>>2]=+f[F+4>>2];f[t+84>>2]=+f[F+20>>2];f[t+88>>2]=+f[F+36>>2];f[t+92>>2]=0;f[t+96>>2]=+f[F+8>>2];f[t+100>>2]=+f[F+24>>2];f[t+104>>2]=+f[F+40>>2];f[t+108>>2]=0;f[t+112>>2]=+f[F+12>>2];f[t+116>>2]=+f[F+28>>2];f[t+120>>2]=+f[F+44>>2];f[t+124>>2]=0;f[t+32>>2]=L;f[t+36>>2]=N;f[t+40>>2]=C;f[t+44>>2]=0;f[t+48>>2]=k;f[t+52>>2]=A;f[t+56>>2]=O;f[t+60>>2]=0;f[t+64>>2]=M;f[t+68>>2]=B;f[t+72>>2]=_;f[t+76>>2]=0;_=o- +f[F+56>>2];B=u- +f[F+60>>2];f[t+16>>2]=a- +f[F+52>>2];f[t+20>>2]=_;f[t+24>>2]=B;f[t+28>>2]=0;f[t>>2]=l*h+p*d+v*m+g-H;f[t+4>>2]=l*y+p*b+v*w+E-P;f[t+8>>2]=l*n+p*x+v*S+i-D;f[t+12>>2]=0;Wd(e+(j*84|0)+48|0,t+80|0,t+32|0,t+16|0,t,t+128+(j<<4)|0,F+396|0,+f[F+344>>2],T+396|0,+f[T+344>>2]);j=j+1|0;if((j|0)==3)break e;T=s[e+32>>2]|0;L=+f[T+4>>2];N=+f[T+20>>2];C=+f[T+36>>2];k=+f[T+8>>2];A=+f[T+24>>2];O=+f[T+40>>2];M=+f[T+12>>2];B=+f[T+28>>2];_=+f[T+44>>2];H=+f[T+52>>2];P=+f[T+56>>2];D=+f[T+60>>2]}}while(0);o=+f[e+560>>2];i=+f[e+576>>2];n=+f[e+592>>2];if(+W(+n)>.7071067690849304){u=1/+X(+(i*i+n*n));d=0;p=-(n*u);h=i*u;l=(i*i+n*n)*u;a=-(o*i*u);u=o*-(n*u)}else{u=1/+X(+(o*o+i*i));d=-(i*u);p=o*u;h=0;l=-(n*o*u);a=n*-(i*u);u=(o*o+i*i)*u}j=s[e+28>>2]|0;v=+f[j+4>>2];M=+f[j+8>>2];C=+f[j+12>>2];y=d*v+p*M+h*C;x=+f[j+20>>2];b=+f[j+24>>2];L=+f[j+28>>2];w=d*x+p*b+h*L;P=+f[j+36>>2];_=+f[j+40>>2];O=+f[j+44>>2];E=d*P+p*_+h*O;H=l*v+a*M+u*C;h=l*x+a*b+u*L;a=l*P+a*_+u*O;F=s[e+32>>2]|0;k=+f[F+4>>2];A=+f[F+20>>2];I=+f[F+36>>2];U=+f[F+8>>2];z=+f[F+24>>2];$=+f[F+40>>2];K=+f[F+12>>2];u=+f[F+28>>2];D=+f[F+44>>2];s[e+300>>2]=0;s[e+304>>2]=0;s[e+308>>2]=0;s[e+312>>2]=0;f[e+316>>2]=v*y+x*w+P*E;f[e+320>>2]=M*y+b*w+_*E;f[e+324>>2]=C*y+L*w+O*E;f[e+328>>2]=0;f[e+332>>2]=k*-y+A*-w+I*-E;f[e+336>>2]=U*-y+z*-w+$*-E;f[e+340>>2]=K*-y+u*-w+D*-E;f[e+344>>2]=0;d=(v*y+x*w+P*E)*+f[j+396>>2];B=(M*y+b*w+_*E)*+f[j+400>>2];m=(C*y+L*w+O*E)*+f[j+404>>2];f[e+348>>2]=d;f[e+352>>2]=B;f[e+356>>2]=m;f[e+360>>2]=0;R=(k*-y+A*-w+I*-E)*+f[F+396>>2];J=(U*-y+z*-w+$*-E)*+f[F+400>>2];l=(K*-y+u*-w+D*-E)*+f[F+404>>2];f[e+364>>2]=R;f[e+368>>2]=J;f[e+372>>2]=l;f[e+376>>2]=0;f[e+380>>2]=(k*-y+A*-w+I*-E)*R+(U*-y+z*-w+$*-E)*J+(K*-y+u*-w+D*-E)*l+(d*(v*y+x*w+P*E)+B*(M*y+b*w+_*E)+m*(C*y+L*w+O*E));F=s[e+28>>2]|0;E=+f[F+4>>2];w=+f[F+20>>2];y=+f[F+36>>2];m=+f[F+8>>2];B=+f[F+24>>2];d=+f[F+40>>2];l=+f[F+12>>2];D=+f[F+28>>2];u=+f[F+44>>2];j=s[e+32>>2]|0;K=+f[j+4>>2];J=+f[j+20>>2];$=+f[j+36>>2];z=+f[j+8>>2];U=+f[j+24>>2];R=+f[j+40>>2];I=+f[j+12>>2];A=+f[j+28>>2];k=+f[j+44>>2];s[e+384>>2]=0;s[e+388>>2]=0;s[e+392>>2]=0;s[e+396>>2]=0;f[e+400>>2]=H*E+h*w+a*y;f[e+404>>2]=H*m+h*B+a*d;f[e+408>>2]=H*l+h*D+a*u;f[e+412>>2]=0;f[e+416>>2]=K*-H+J*-h+$*-a;f[e+420>>2]=z*-H+U*-h+R*-a;f[e+424>>2]=I*-H+A*-h+k*-a;f[e+428>>2]=0;S=(H*E+h*w+a*y)*+f[F+396>>2];g=(H*m+h*B+a*d)*+f[F+400>>2];p=(H*l+h*D+a*u)*+f[F+404>>2];f[e+432>>2]=S;f[e+436>>2]=g;f[e+440>>2]=p;f[e+444>>2]=0;V=(K*-H+J*-h+$*-a)*+f[j+396>>2];q=(z*-H+U*-h+R*-a)*+f[j+400>>2];N=(I*-H+A*-h+k*-a)*+f[j+404>>2];f[e+448>>2]=V;f[e+452>>2]=q;f[e+456>>2]=N;f[e+460>>2]=0;f[e+464>>2]=(K*-H+J*-h+$*-a)*V+(z*-H+U*-h+R*-a)*q+(I*-H+A*-h+k*-a)*N+(S*(H*E+h*w+a*y)+g*(H*m+h*B+a*d)+p*(H*l+h*D+a*u));j=s[e+28>>2]|0;u=+f[j+4>>2];a=+f[j+20>>2];D=+f[j+36>>2];l=+f[j+8>>2];h=+f[j+24>>2];H=+f[j+40>>2];p=+f[j+12>>2];d=+f[j+28>>2];B=+f[j+44>>2];F=s[e+32>>2]|0;m=+f[F+4>>2];g=+f[F+20>>2];y=+f[F+36>>2];w=+f[F+8>>2];E=+f[F+24>>2];S=+f[F+40>>2];N=+f[F+12>>2];k=+f[F+28>>2];A=+f[F+44>>2];s[e+468>>2]=0;s[e+472>>2]=0;s[e+476>>2]=0;s[e+480>>2]=0;D=(v*o+M*i+C*n)*u+(x*o+b*i+L*n)*a+(P*o+_*i+O*n)*D;H=(v*o+M*i+C*n)*l+(x*o+b*i+L*n)*h+(P*o+_*i+O*n)*H;B=(v*o+M*i+C*n)*p+(x*o+b*i+L*n)*d+(P*o+_*i+O*n)*B;f[e+484>>2]=D;f[e+488>>2]=H;f[e+492>>2]=B;f[e+496>>2]=0;C=-(v*o+M*i+C*n);L=-(x*o+b*i+L*n);O=-(P*o+_*i+O*n);f[e+500>>2]=m*C+g*L+y*O;f[e+504>>2]=w*C+E*L+S*O;f[e+508>>2]=N*C+k*L+A*O;f[e+512>>2]=0;_=D*+f[j+396>>2];P=H*+f[j+400>>2];n=B*+f[j+404>>2];f[e+516>>2]=_;f[e+520>>2]=P;f[e+524>>2]=n;f[e+528>>2]=0;b=(m*C+g*L+y*O)*+f[F+396>>2];x=(w*C+E*L+S*O)*+f[F+400>>2];M=(N*C+k*L+A*O)*+f[F+404>>2];f[e+532>>2]=b;f[e+536>>2]=x;f[e+540>>2]=M;f[e+544>>2]=0;f[e+548>>2]=(m*C+g*L+y*O)*b+(w*C+E*L+S*O)*x+(N*C+k*L+A*O)*M+(_*D+P*H+n*B);f[e+724>>2]=0;n=+hE(e,(s[e+28>>2]|0)+4|0,(s[e+32>>2]|0)+4|0);f[e+728>>2]=n;f[e+708>>2]=0;f[e+712>>2]=0;r[e+716>>0]=0;do if(+f[e+692>>2]>=0){n=+rn(+(n- +f[e+688>>2]),6.2831854820251465);if(!(n<-3.1415927410125732)){if(n>3.1415927410125732)n=n+ -6.2831854820251465}else n=n+6.2831854820251465;i=+f[e+692>>2];if(n<-i){r[e+716>>0]=1;f[e+708>>2]=-(n+i);f[e+712>>2]=1;break}if(n>i){r[e+716>>0]=1;f[e+708>>2]=i-n;f[e+712>>2]=-1}}while(0);j=s[e+28>>2]|0;z=+f[e+560>>2];V=+f[e+576>>2];K=+f[e+592>>2];$=z*+f[j+4>>2]+V*+f[j+8>>2]+K*+f[j+12>>2];J=z*+f[j+20>>2]+V*+f[j+24>>2]+K*+f[j+28>>2];K=z*+f[j+36>>2]+V*+f[j+40>>2]+K*+f[j+44>>2];F=s[e+32>>2]|0;f[e+720>>2]=1/($*($*+f[j+264>>2]+J*+f[j+280>>2]+K*+f[j+296>>2])+J*($*+f[j+268>>2]+J*+f[j+284>>2]+K*+f[j+300>>2])+K*($*+f[j+272>>2]+J*+f[j+288>>2]+K*+f[j+304>>2])+($*($*+f[F+264>>2]+J*+f[F+280>>2]+K*+f[F+296>>2])+J*($*+f[F+268>>2]+J*+f[F+284>>2]+K*+f[F+300>>2])+K*($*+f[F+272>>2]+J*+f[F+288>>2]+K*+f[F+304>>2])));c=t;return}function lE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0;n=c;if((r[e+738>>0]|0)!=0){s[t>>2]=0;s[t+4>>2]=0;c=n;return}s[t>>2]=5;s[t+4>>2]=1;o=+hE(e,(s[e+28>>2]|0)+4|0,(s[e+32>>2]|0)+4|0);f[e+728>>2]=o;f[e+708>>2]=0;f[e+712>>2]=0;r[e+716>>0]=0;do if(+f[e+692>>2]>=0){o=+rn(+(o- +f[e+688>>2]),6.2831854820251465);if(!(o<-3.1415927410125732)){if(o>3.1415927410125732)o=o+ -6.2831854820251465}else o=o+6.2831854820251465;u=+f[e+692>>2];if(o<-u){r[e+716>>0]=1;f[e+708>>2]=-(o+u);f[e+712>>2]=1;break}if(!(o>u))if((r[e+716>>0]|0)==0){i=13;break}else break;else{r[e+716>>0]=1;f[e+708>>2]=u-o;f[e+712>>2]=-1;break}}else i=13;while(0);if((i|0)==13?(r[e+737>>0]|0)==0:0){c=n;return}s[t>>2]=(s[t>>2]|0)+1;s[t+4>>2]=(s[t+4>>2]|0)+ -1;c=n;return}function cE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0;n=c;c=c+256|0;i=s[e+28>>2]|0;o=s[e+32>>2]|0;p=s[t+24>>2]|0;if((r[e+739>>0]|0)==0){bd(n+192|0,i+4|0,e+552|0);bd(n+128|0,o+4|0,e+616|0);m=+f[n+240>>2];d=+f[n+244>>2];u=+f[n+248>>2];a=+f[n+176>>2];v=+f[n+180>>2];l=+f[n+184>>2];Q=(r[e+736>>0]|0)==0;if(Q){I=s[t+8>>2]|0;f[I>>2]=1;f[I+(p+1<<2)>>2]=1;f[I+((p<<1)+2<<2)>>2]=1;I=s[t+16>>2]|0;f[I>>2]=-1;f[I+(p+1<<2)>>2]=-1;f[I+((p<<1)+2<<2)>>2]=-1;I=p<<1;Y=p+1|0;G=(p<<1)+2|0}else{I=p<<1;Y=p+1|0;G=(p<<1)+2|0}h=m- +f[i+52>>2];$=d- +f[i+56>>2];V=u- +f[i+60>>2];K=s[t+12>>2]|0;f[K>>2]=0;f[K+4>>2]=V;f[K+8>>2]=-$;f[K+12>>2]=0;f[K+(p<<2)>>2]=-V;f[K+(Y<<2)>>2]=0;f[K+(p+2<<2)>>2]=h;f[K+(p+3<<2)>>2]=0;f[K+(I<<2)>>2]=$;et=I|1;f[K+(et<<2)>>2]=-h;f[K+(G<<2)>>2]=0;Z=I+3|0;f[K+(Z<<2)>>2]=0;h=a- +f[o+52>>2];$=v- +f[o+56>>2];V=l- +f[o+60>>2];J=s[t+20>>2]|0;f[J>>2]=0;f[J+4>>2]=-V;f[J+8>>2]=$;f[J+12>>2]=0;f[J+(p<<2)>>2]=V;f[J+(Y<<2)>>2]=0;f[J+(p+2<<2)>>2]=-h;f[J+(p+3<<2)>>2]=0;f[J+(I<<2)>>2]=-$;f[J+(et<<2)>>2]=h;f[J+(G<<2)>>2]=0;f[J+(Z<<2)>>2]=0;h=+f[t>>2]*+f[t+4>>2];I=s[t+28>>2]|0;if(Q){f[I>>2]=h*(a-m);f[I+(p<<2)>>2]=h*(v-d);f[I+(p<<1<<2)>>2]=h*(l-u)}l=+f[n+200>>2];a=+f[n+216>>2];u=+f[n+232>>2];F=+f[n+192>>2];q=+f[n+208>>2];j=+f[n+224>>2];U=+f[n+196>>2];W=+f[n+212>>2];R=+f[n+228>>2];p=s[t+24>>2]|0;f[K+(p*3<<2)>>2]=F;f[K+((p*3|0)+1<<2)>>2]=q;f[K+((p*3|0)+2<<2)>>2]=j;f[K+(p<<2<<2)>>2]=U;f[K+((p<<2|1)<<2)>>2]=W;f[K+((p<<2|2)<<2)>>2]=R;f[J+(p*3<<2)>>2]=-F;f[J+((p*3|0)+1<<2)>>2]=-q;f[J+((p*3|0)+2<<2)>>2]=-j;f[J+(p<<2<<2)>>2]=-U;f[J+((p<<2|1)<<2)>>2]=-W;f[J+((p<<2|2)<<2)>>2]=-R;V=+f[n+136>>2];z=+f[n+152>>2];$=+f[n+168>>2];f[I+(p*3<<2)>>2]=h*(j*(l*z-a*V)+(F*(a*$-u*z)+q*(u*V-l*$)));f[I+(p<<2<<2)>>2]=h*(R*(l*z-a*V)+(U*(a*$-u*z)+W*(u*V-l*$)));if((r[e+716>>0]|0)==0)if((r[e+737>>0]|0)==0){c=n;return}else{Q=0;Y=0;I=0;h=0}else{h=+f[e+708>>2]*+f[e+732>>2];Q=1;Y=(r[e+737>>0]|0)==0;I=h>0?1:2}f[K+(p*5<<2)>>2]=l;f[K+((p*5|0)+1<<2)>>2]=a;f[K+((p*5|0)+2<<2)>>2]=u;f[J+(p*5<<2)>>2]=-l;f[J+((p*5|0)+1<<2)>>2]=-a;f[J+((p*5|0)+2<<2)>>2]=-u;v=+rn(+(+f[e+688>>2]- +f[e+692>>2]),6.2831854820251465);if(!(v<-3.1415927410125732)){if(v>3.1415927410125732)v=v+ -6.2831854820251465}else v=v+6.2831854820251465;g=+rn(+(+f[e+688>>2]+ +f[e+692>>2]),6.2831854820251465);if(!(g<-3.1415927410125732)){if(g>3.1415927410125732)g=g+ -6.2831854820251465}else g=g+6.2831854820251465;K=v==g;J=(s[t+28>>2]|0)+(p*5<<2)|0;f[J>>2]=0;G=s[e+748>>2]|0;d=+f[((G&2|0)==0?t+4|0:e+760|0)>>2];if(!(Q&K|Y)){if((G&4|0)!=0)f[(s[t+32>>2]|0)+(p*5<<2)>>2]=+f[e+752>>2];y=+f[e+728>>2];m=+f[e+680>>2];Y=v>g;do if(!(Y|K)){b=m/(d*+f[t>>2]);if(b<0){if(y>=v?v-b>y:0){v=(v-y)/b;break}v=y<v?0:1;break}if(b>0){if(y<=g?g-b<y:0){v=(g-y)/b;break}v=y>g?0:1}else v=0}else v=Y?1:0;while(0);f[J>>2]=v*m*+f[e+732>>2]+ +f[J>>2];f[(s[t+36>>2]|0)+(p*5<<2)>>2]=-+f[e+684>>2];f[(s[t+40>>2]|0)+(p*5<<2)>>2]=+f[e+684>>2]}if(!Q){c=n;return}f[J>>2]=+f[J>>2]+h*d*+f[t>>2];if((G&1|0)!=0)f[(s[t+32>>2]|0)+(p*5<<2)>>2]=+f[e+756>>2];do if(!K){K=(s[t+36>>2]|0)+(p*5<<2)|0;if((I|0)==1){f[K>>2]=0;f[(s[t+40>>2]|0)+(p*5<<2)>>2]=3.4028234663852886e38;break}else{f[K>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(p*5<<2)>>2]=0;break}}else{f[(s[t+36>>2]|0)+(p*5<<2)>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(p*5<<2)>>2]=3.4028234663852886e38}while(0);h=+f[e+704>>2];do if(h>0){u=l*+f[i+328>>2]+a*+f[i+332>>2]+u*+f[i+336>>2]-(l*+f[o+328>>2]+a*+f[o+332>>2]+u*+f[o+336>>2]);if((I|0)==1){if(!(u<0))break;if(!(+f[J>>2]<-(h*u)))break;f[J>>2]=-(h*u);break}else{if(!(u>0))break;if(!(+f[J>>2]>-(h*u)))break;f[J>>2]=-(h*u);break}}while(0);f[J>>2]=+f[e+700>>2]*+f[J>>2];c=n;return}bd(n+64|0,i+4|0,e+552|0);bd(n,o+4|0,e+616|0);A=+f[n+48>>2];k=+f[n+112>>2];O=+f[n+52>>2];L=+f[n+116>>2];M=+f[n+56>>2];C=+f[n+120>>2];a=+f[(s[e+28>>2]|0)+344>>2];u=+f[(s[e+32>>2]|0)+344>>2];if(a<1.1920928955078125e-7)I=1;else I=u<1.1920928955078125e-7;if(a+u>0)P=u/(a+u);else P=.5;j=1-P;m=+f[n+72>>2];v=+f[n+88>>2];b=+f[n+104>>2];g=+f[n+8>>2];y=+f[n+24>>2];d=+f[n+40>>2];h=P*m+j*g;a=P*v+j*y;u=P*b+j*d;l=1/+X(+(h*h+a*a+u*u));x=A- +f[o+52>>2];R=O- +f[o+56>>2];W=M- +f[o+60>>2];T=h*l*(x*h*l+R*a*l+W*u*l);U=a*l*(x*h*l+R*a*l+W*u*l);V=u*l*(x*h*l+R*a*l+W*u*l);N=k- +f[i+52>>2];z=L- +f[i+56>>2];$=C- +f[i+60>>2];w=h*l*(h*l*N+a*l*z+u*l*$);E=a*l*(h*l*N+a*l*z+u*l*$);S=u*l*(h*l*N+a*l*z+u*l*$);D=N-w+P*(w-T);_=z-E+P*(E-U);H=$-S+P*(S-V);F=x-T-j*(w-T);B=R-U-j*(E-U);q=W-V-j*(S-V);w=P*(x-T)+j*(N-w);E=P*(R-U)+j*(z-E);S=P*(W-V)+j*($-S);if(w*w+E*E+S*S>1.1920928955078125e-7){N=1/+X(+(w*w+E*E+S*S));w=w*N;E=N*E;N=N*S}else{w=+f[n+68>>2];E=+f[n+84>>2];N=+f[n+100>>2]}T=a*l*N-u*l*E;x=u*l*w-N*h*l;S=E*h*l-a*l*w;et=s[t+12>>2]|0;f[et>>2]=_*N-H*E;f[et+4>>2]=H*w-D*N;f[et+8>>2]=D*E-_*w;et=s[t+20>>2]|0;f[et>>2]=-(B*N-q*E);f[et+4>>2]=-(q*w-F*N);f[et+8>>2]=-(F*E-B*w);if(I?(r[e+716>>0]|0)!=0:0){z=j*(B*S-q*x);U=j*(q*T-F*S);R=j*(F*x-B*T);W=P*(_*S-H*x);V=P*(H*T-D*S);$=P*(D*x-_*T)}else{z=B*S-q*x;U=q*T-F*S;R=F*x-B*T;W=_*S-H*x;V=H*T-D*S;$=D*x-_*T}et=s[t+12>>2]|0;f[et+(p<<2)>>2]=W;f[et+(p+1<<2)>>2]=V;f[et+(p+2<<2)>>2]=$;et=s[t+20>>2]|0;f[et+(p<<2)>>2]=-z;f[et+(p+1<<2)>>2]=-U;f[et+(p+2<<2)>>2]=-R;if(I){R=j*(B*u*l-q*a*l);q=j*(q*h*l-F*u*l);B=j*(F*a*l-B*h*l);j=P*(_*u*l-H*a*l);H=P*(H*h*l-D*u*l);_=P*(D*a*l-_*h*l)}else{R=B*u*l-q*a*l;q=q*h*l-F*u*l;B=F*a*l-B*h*l;j=_*u*l-H*a*l;H=H*h*l-D*u*l;_=D*a*l-_*h*l}I=s[t+12>>2]|0;f[I+(p<<1<<2)>>2]=j;f[I+((p<<1|1)<<2)>>2]=H;f[I+((p<<1)+2<<2)>>2]=_;I=s[t+20>>2]|0;f[I+(p<<1<<2)>>2]=-R;f[I+((p<<1|1)<<2)>>2]=-q;f[I+((p<<1)+2<<2)>>2]=-B;_=+f[t>>2]*+f[t+4>>2];if((r[e+736>>0]|0)==0){K=s[t+8>>2]|0;f[K>>2]=w;f[K+4>>2]=E;f[K+8>>2]=N;K=s[t+8>>2]|0;f[K+(p<<2)>>2]=T;f[K+(p+1<<2)>>2]=x;f[K+(p+2<<2)>>2]=S;K=s[t+8>>2]|0;f[K+(p<<1<<2)>>2]=h*l;f[K+((p<<1|1)<<2)>>2]=a*l;f[K+((p<<1)+2<<2)>>2]=u*l;K=s[t+16>>2]|0;$=-w;f[K>>2]=$;W=-E;f[K+4>>2]=W;V=-N;f[K+8>>2]=V;f[K+(p<<2)>>2]=-T;f[K+(p+1<<2)>>2]=-x;f[K+(p+2<<2)>>2]=-S;f[K+(p<<1<<2)>>2]=-(h*l);f[K+((p<<1|1)<<2)>>2]=-(a*l);f[K+((p<<1)+2<<2)>>2]=-(u*l);K=s[t+28>>2]|0;f[K>>2]=_*((A-k)*w+(O-L)*E+(M-C)*N);f[K+(p<<2)>>2]=_*((A-k)*T+(O-L)*x+(M-C)*S);f[K+(p<<1<<2)>>2]=_*((A-k)*h*l+(O-L)*a*l+(M-C)*u*l);k=-T;L=-x;A=-S;M=W;C=V;O=$;I=s[t+20>>2]|0}else{k=-T;L=-x;A=-S;M=-E;C=-N;O=-w;K=s[t+28>>2]|0}J=s[t+12>>2]|0;f[J+(p*3<<2)>>2]=w;f[J+((p*3|0)+1<<2)>>2]=E;f[J+((p*3|0)+2<<2)>>2]=N;f[J+(p<<2<<2)>>2]=T;f[J+((p<<2|1)<<2)>>2]=x;f[J+((p<<2|2)<<2)>>2]=S;f[I+(p*3<<2)>>2]=O;f[I+((p*3|0)+1<<2)>>2]=M;f[I+((p*3|0)+2<<2)>>2]=C;f[I+(p<<2<<2)>>2]=k;f[I+((p<<2|1)<<2)>>2]=L;f[I+((p<<2|2)<<2)>>2]=A;$=+f[t>>2]*+f[t+4>>2];f[K+(p*3<<2)>>2]=$*((v*d-b*y)*w+(b*g-m*d)*E+(m*y-v*g)*N);f[K+(p<<2<<2)>>2]=$*((v*d-b*y)*T+(b*g-m*d)*x+(m*y-v*g)*S);if((r[e+716>>0]|0)==0)if((r[e+737>>0]|0)==0){c=n;return}else{Q=0;Y=0;p=0;d=0}else{d=+f[e+708>>2]*+f[e+732>>2];Q=1;Y=(r[e+737>>0]|0)==0;p=d>0?1:2}K=(s[t+24>>2]|0)*5|0;f[J+(K<<2)>>2]=h*l;f[J+(K+1<<2)>>2]=a*l;f[J+(K+2<<2)>>2]=u*l;f[I+(K<<2)>>2]=-(h*l);f[I+(K+1<<2)>>2]=-(a*l);f[I+(K+2<<2)>>2]=-(u*l);v=+rn(+(+f[e+688>>2]- +f[e+692>>2]),6.2831854820251465);if(!(v<-3.1415927410125732)){if(v>3.1415927410125732)v=v+ -6.2831854820251465}else v=v+6.2831854820251465;g=+rn(+(+f[e+688>>2]+ +f[e+692>>2]),6.2831854820251465);if(!(g<-3.1415927410125732)){if(g>3.1415927410125732)g=g+ -6.2831854820251465}else g=g+6.2831854820251465;J=v==g;I=(s[t+28>>2]|0)+(K<<2)|0;f[I>>2]=0;G=s[e+748>>2]|0;m=+f[((G&2|0)==0?t+4|0:e+760|0)>>2];if(!(Q&J|Y)){if((G&4|0)!=0)f[(s[t+32>>2]|0)+(K<<2)>>2]=+f[e+752>>2];b=+f[e+728>>2];y=+f[e+680>>2];Y=v>g;do if(!(Y|J)){w=y/(m*+f[t>>2]);if(w<0){if(b>=v?v-w>b:0){v=(v-b)/w;break}v=b<v?0:1;break}if(w>0){if(b<=g?g-w<b:0){v=(g-b)/w;break}v=b>g?0:1}else v=0}else v=Y?1:0;while(0);f[I>>2]=v*y*+f[e+732>>2]+ +f[I>>2];f[(s[t+36>>2]|0)+(K<<2)>>2]=-+f[e+684>>2];f[(s[t+40>>2]|0)+(K<<2)>>2]=+f[e+684>>2]}if(!Q){c=n;return}f[I>>2]=+f[I>>2]+d*m*+f[t>>2];if((G&1|0)!=0)f[(s[t+32>>2]|0)+(K<<2)>>2]=+f[e+756>>2];do if(!J){J=(s[t+36>>2]|0)+(K<<2)|0;if((p|0)==1){f[J>>2]=0;f[(s[t+40>>2]|0)+(K<<2)>>2]=3.4028234663852886e38;break}else{f[J>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(K<<2)>>2]=0;break}}else{f[(s[t+36>>2]|0)+(K<<2)>>2]=-3.4028234663852886e38;f[(s[t+40>>2]|0)+(K<<2)>>2]=3.4028234663852886e38}while(0);d=+f[e+704>>2];do if(d>0){u=+f[i+328>>2]*h*l+ +f[i+332>>2]*a*l+ +f[i+336>>2]*u*l-(h*l*+f[o+328>>2]+a*l*+f[o+332>>2]+u*l*+f[o+336>>2]);if((p|0)==1){if(!(u<0))break;if(!(+f[I>>2]<-(d*u)))break;f[I>>2]=-(d*u);break}else{if(!(u>0))break;if(!(+f[I>>2]>-(d*u)))break;f[I>>2]=-(d*u);break}}while(0);f[I>>2]=+f[e+700>>2]*+f[I>>2];c=n;return}function hE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;E=+f[e+552>>2];w=+f[e+568>>2];b=+f[e+584>>2];y=+f[t>>2];g=+f[t+4>>2];m=+f[t+8>>2];d=+f[t+16>>2];p=+f[t+20>>2];h=+f[t+24>>2];l=+f[t+32>>2];u=+f[t+36>>2];s=+f[t+40>>2];a=+f[e+556>>2];o=+f[e+572>>2];i=+f[e+588>>2];x=+f[e+620>>2];S=+f[e+636>>2];r=+f[e+652>>2];v=x*+f[n>>2]+S*+f[n+4>>2]+r*+f[n+8>>2];c=x*+f[n+16>>2]+S*+f[n+20>>2]+r*+f[n+24>>2];r=x*+f[n+32>>2]+S*+f[n+36>>2]+r*+f[n+40>>2];r=+Z(+((E*y+w*g+b*m)*v+(E*d+w*p+b*h)*c+(E*l+w*u+b*s)*r),+((y*a+g*o+m*i)*v+(d*a+p*o+h*i)*c+(l*a+u*o+s*i)*r));return+(r*+f[e+732>>2])}function pE(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var i=0;i=c;do if((r|0)==5|(r|0)==-1)if((t|0)==2){f[e+760>>2]=n;s[e+748>>2]=s[e+748>>2]|2;break}else if((t|0)==3){f[e+752>>2]=n;s[e+748>>2]=s[e+748>>2]|4;break}else if((t|0)==4){f[e+756>>2]=n;s[e+748>>2]=s[e+748>>2]|1;break}else break;while(0);c=i;return}function dE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;do if((n|0)==5|(n|0)==-1)if((t|0)==2){i=+f[e+760>>2];break}else if((t|0)==4){i=+f[e+756>>2];break}else if((t|0)==3){i=+f[e+752>>2];break}else{i=0;break}else i=0;while(0);c=r;return+i}function vE(e){e=e|0;return}function mE(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function gE(e){e=e|0;return 220}function yE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;Av(e,t,n)|0;f[t+52>>2]=+f[e+552>>2];f[t+56>>2]=+f[e+556>>2];f[t+60>>2]=+f[e+560>>2];f[t+64>>2]=+f[e+564>>2];f[t+68>>2]=+f[e+568>>2];f[t+72>>2]=+f[e+572>>2];f[t+76>>2]=+f[e+576>>2];f[t+80>>2]=+f[e+580>>2];f[t+84>>2]=+f[e+584>>2];f[t+88>>2]=+f[e+588>>2];f[t+92>>2]=+f[e+592>>2];f[t+96>>2]=+f[e+596>>2];f[t+100>>2]=+f[e+600>>2];f[t+104>>2]=+f[e+604>>2];f[t+108>>2]=+f[e+608>>2];f[t+112>>2]=+f[e+612>>2];f[t+116>>2]=+f[e+616>>2];f[t+120>>2]=+f[e+620>>2];f[t+124>>2]=+f[e+624>>2];f[t+128>>2]=+f[e+628>>2];f[t+132>>2]=+f[e+632>>2];f[t+136>>2]=+f[e+636>>2];f[t+140>>2]=+f[e+640>>2];f[t+144>>2]=+f[e+644>>2];f[t+148>>2]=+f[e+648>>2];f[t+152>>2]=+f[e+652>>2];f[t+156>>2]=+f[e+656>>2];f[t+160>>2]=+f[e+660>>2];f[t+164>>2]=+f[e+664>>2];f[t+168>>2]=+f[e+668>>2];f[t+172>>2]=+f[e+672>>2];f[t+176>>2]=+f[e+676>>2];s[t+184>>2]=o[e+736>>0];s[t+188>>2]=o[e+737>>0];f[t+196>>2]=+f[e+684>>2];f[t+192>>2]=+f[e+680>>2];s[t+180>>2]=o[e+740>>0];i=+rn(+(+f[e+688>>2]- +f[e+692>>2]),6.2831854820251465);if(!(i<-3.1415927410125732)){if(i>3.1415927410125732)i=i+ -6.2831854820251465}else i=i+6.2831854820251465;f[t+200>>2]=i;i=+rn(+(+f[e+688>>2]+ +f[e+692>>2]),6.2831854820251465);if(i<-3.1415927410125732){i=i+6.2831854820251465;n=t+204|0;f[n>>2]=i;n=e+696|0;i=+f[n>>2];n=t+208|0;f[n>>2]=i;n=e+700|0;i=+f[n>>2];n=t+212|0;f[n>>2]=i;n=e+704|0;i=+f[n>>2];n=t+216|0;f[n>>2]=i;c=r;return 2592}if(!(i>3.1415927410125732)){n=t+204|0;f[n>>2]=i;n=e+696|0;i=+f[n>>2];n=t+208|0;f[n>>2]=i;n=e+700|0;i=+f[n>>2];n=t+212|0;f[n>>2]=i;n=e+704|0;i=+f[n>>2];n=t+216|0;f[n>>2]=i;c=r;return 2592}i=i+ -6.2831854820251465;n=t+204|0;f[n>>2]=i;n=e+696|0;i=+f[n>>2];n=t+208|0;f[n>>2]=i;n=e+700|0;i=+f[n>>2];n=t+212|0;f[n>>2]=i;n=e+704|0;i=+f[n>>2];n=t+216|0;f[n>>2]=i;c=r;return 2592}function bE(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=2632;n=s[e+140>>2]|0;if((n|0)!=0){if((r[e+144>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}r[e+144>>0]=1;s[e+140>>2]=0;s[e+132>>2]=0;s[e+136>>2]=0;if((e|0)==0){c=t;return}}else{r[e+144>>0]=1;s[e+140>>2]=0;s[e+132>>2]=0;s[e+136>>2]=0}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function wE(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=2632;n=s[e+140>>2]|0;if((n|0)!=0){if((r[e+144>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+140>>2]=0}r[e+144>>0]=1;s[e+140>>2]=0;s[e+132>>2]=0;s[e+136>>2]=0;c=t;return}function EE(e){e=e|0;return}function SE(e,t,n,o,u){e=e|0;t=t|0;n=+n;o=+o;u=+u;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;a=c;c=c+240|0;v=+f[e+96>>2]+o;m=+f[e+100>>2]+u;f[e+112>>2]=+f[e+92>>2]+n;f[e+116>>2]=v;f[e+120>>2]=m;f[e+124>>2]=0;f[a+168>>2]=1;s[a+172>>2]=0;s[a+176>>2]=0;s[a+180>>2]=0;s[a+184>>2]=0;f[a+188>>2]=1;s[a+192>>2]=0;s[a+196>>2]=0;s[a+200>>2]=0;s[a+204>>2]=0;f[a+208>>2]=1;l=a+212|0;s[l+0>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;s[l+16>>2]=0;f[a+104>>2]=1;s[a+108>>2]=0;s[a+112>>2]=0;s[a+116>>2]=0;s[a+120>>2]=0;f[a+124>>2]=1;s[a+128>>2]=0;s[a+132>>2]=0;s[a+136>>2]=0;s[a+140>>2]=0;f[a+144>>2]=1;l=a+148|0;s[l+0>>2]=0;s[l+4>>2]=0;s[l+8>>2]=0;s[l+12>>2]=0;s[l+16>>2]=0;n=1;l=10;while(1){g=l;l=l+ -1|0;if((g|0)<=0){e=12;break}s[a+216>>2]=s[e+92>>2];s[a+220>>2]=s[e+96>>2];s[a+224>>2]=s[e+100>>2];s[a+228>>2]=s[e+104>>2];s[a+152>>2]=s[e+112>>2];s[a+156>>2]=s[e+116>>2];s[a+160>>2]=s[e+120>>2];s[a+164>>2]=s[e+124>>2];v=+f[e+92>>2]- +f[e+112>>2];m=+f[e+96>>2]- +f[e+116>>2];u=+f[e+100>>2]- +f[e+120>>2];g=s[e+8>>2]|0;f[a+4>>2]=1;i[a+8>>1]=1;i[a+10>>1]=-1;s[a+76>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;s[a+20>>2]=0;s[a+24>>2]=0;s[a+28>>2]=0;s[a+32>>2]=0;s[a+36>>2]=0;s[a+40>>2]=0;s[a>>2]=2896;s[a+80>>2]=g;f[a+84>>2]=v;f[a+88>>2]=m;f[a+92>>2]=u;f[a+96>>2]=0;f[a+100>>2]=0;g=s[g+188>>2]|0;i[a+8>>1]=i[g+4>>1]|0;i[a+10>>1]=i[g+6>>1]|0;g=s[e+12>>2]|0;u=+CD[s[(s[g>>2]|0)+48>>2]&15](g);g=s[e+12>>2]|0;fD[s[(s[g>>2]|0)+44>>2]&31](g,u+ +f[e+56>>2]);if((r[e+170>>0]|0)==0)yy(t,s[e+12>>2]|0,a+168|0,a+104|0,a,+f[t+56>>2]);else YA(s[e+8>>2]|0,s[e+12>>2]|0,a+168|0,a+104|0,a,+f[t+56>>2]);g=s[e+12>>2]|0;fD[s[(s[g>>2]|0)+44>>2]&31](g,u);m=+f[a+4>>2];n=n-m;if(!(m<1)){s[e+92>>2]=s[e+112>>2];s[e+96>>2]=s[e+116>>2];s[e+100>>2]=s[e+120>>2];s[e+104>>2]=s[e+124>>2];if(n>.009999999776482582)continue;else{e=12;break}}v=+f[e+112>>2];h=+f[e+92>>2];d=+f[e+116>>2];o=+f[e+96>>2];p=+f[e+120>>2];u=+f[e+100>>2];m=+X(+((v-h)*(v-h)+(d-o)*(d-o)+(p-u)*(p-u)));if(m>1.1920928955078125e-7){E=+f[a+44>>2];b=+f[a+48>>2];x=+f[a+52>>2];S=((v-h)*(1/m)*E+(d-o)*(1/m)*b+(p-u)*(1/m)*x)*2;w=(v-h)*(1/m)-E*S;y=(d-o)*(1/m)-b*S;S=(p-u)*(1/m)-x*S;p=1/+X(+(S*S+(w*w+y*y)));s[e+112>>2]=s[e+92>>2];s[e+116>>2]=s[e+96>>2];s[e+120>>2]=s[e+100>>2];s[e+124>>2]=s[e+104>>2];v=m*(p*w-E*(x*p*S+(E*p*w+b*p*y)))+ +f[e+112>>2];f[e+112>>2]=v;d=m*(p*y-b*(x*p*S+(E*p*w+b*p*y)))+ +f[e+116>>2];f[e+116>>2]=d;p=m*(p*S-x*(x*p*S+(E*p*w+b*p*y)))+ +f[e+120>>2];f[e+120>>2]=p}h=v-h;o=d-o;u=p-u;if(!(h*h+o*o+u*u>1.1920928955078125e-7)){e=12;break}x=1/+X(+(h*h+o*o+u*u));if(!(n>.009999999776482582?!(h*x*+f[e+76>>2]+o*x*+f[e+80>>2]+u*x*+f[e+84>>2]<=0):0)){e=12;break}}if((e|0)==12){c=a;return}}function xE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0;n=c;r[e+171>>0]=1;s[e+60>>2]=s[t+0>>2];s[e+64>>2]=s[t+4>>2];s[e+68>>2]=s[t+8>>2];s[e+72>>2]=s[t+12>>2];i=+f[e+60>>2];a=+f[e+64>>2];o=+f[e+68>>2];u=1/+X(+(i*i+a*a+o*o));if(+X(+(o*u*o*u+(i*u*i*u+a*u*a*u)))<1.1920928955078125e-7){i=0;a=0;u=0;o=0}else{i=i*u;a=a*u;u=o*u;o=+f[e+72>>2]}f[e+76>>2]=i;f[e+80>>2]=a;f[e+84>>2]=u;f[e+88>>2]=o;c=n;return}function TE(e,t,n){e=e|0;t=t|0;n=+n;var i=0,o=0,u=0,a=0,l=0;i=c;r[e+171>>0]=0;s[e+60>>2]=s[t+0>>2];s[e+64>>2]=s[t+4>>2];s[e+68>>2]=s[t+8>>2];s[e+72>>2]=s[t+12>>2];o=+f[e+60>>2];l=+f[e+64>>2];u=+f[e+68>>2];a=1/+X(+(o*o+l*l+u*u));if(+X(+(u*a*u*a+(o*a*o*a+l*a*l*a)))<1.1920928955078125e-7){o=0;l=0;a=0;u=0}else{o=o*a;l=l*a;a=u*a;u=+f[e+72>>2]}f[e+76>>2]=o;f[e+80>>2]=l;f[e+84>>2]=a;f[e+88>>2]=u;f[e+172>>2]=+f[e+172>>2]+n;c=i;return}function NE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0;n=c;f[e+16>>2]=0;f[e+20>>2]=0;r[e+168>>0]=0;r[e+169>>0]=0;f[e+172>>2]=0;s[e+60>>2]=0;s[e+64>>2]=0;s[e+68>>2]=0;s[e+72>>2]=0;e=s[(s[e+8>>2]|0)+284>>2]|0;if((s[(dD[s[(s[e>>2]|0)+28>>2]&127](e)|0)+4>>2]|0)<=0){c=n;return}do{o=s[e>>2]|0;u=s[o+12>>2]|0;o=s[s[(dD[s[o+28>>2]&127](e)|0)+12>>2]>>2]|0;i=s[(s[(dD[s[(s[e>>2]|0)+28>>2]&127](e)|0)+12>>2]|0)+4>>2]|0;yD[u&31](e,o,i,s[t+24>>2]|0)|0}while((s[(dD[s[(s[e>>2]|0)+28>>2]&127](e)|0)+4>>2]|0)>0);c=n;return}function CE(e,t){e=e|0;t=t|0;var n=0;n=c;c=c+32|0;s[n+16>>2]=0;s[n+20>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;s[n+0>>2]=s[t+0>>2];s[n+4>>2]=s[t+4>>2];s[n+8>>2]=s[t+8>>2];s[n+12>>2]=s[t+12>>2];t=s[e+8>>2]|0;s[t+260>>2]=(s[t+260>>2]|0)+1;f[t+4>>2]=1;s[t+8>>2]=s[n+16>>2];s[t+12>>2]=s[n+20>>2];s[t+16>>2]=s[n+24>>2];s[t+20>>2]=0;f[t+24>>2]=1;s[t+28>>2]=0;s[t+32>>2]=0;s[t+36>>2]=0;s[t+40>>2]=0;f[t+44>>2]=1;f[t+48>>2]=0;s[t+52>>2]=s[n+0>>2];s[t+56>>2]=s[n+4>>2];s[t+60>>2]=s[n+8>>2];s[t+64>>2]=s[n+12>>2];c=n;return}function kE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;o=c;c=c+96|0;r[e+148>>0]=0;n=0;while(1){S=s[e+12>>2]|0;JD[s[(s[S>>2]|0)+8>>2]&127](S,(s[e+8>>2]|0)+4|0,o+80|0,o+64|0);S=s[t+68>>2]|0;aD[s[(s[S>>2]|0)+16>>2]&31](S,s[(s[e+8>>2]|0)+188>>2]|0,o+80|0,o+64|0,s[t+24>>2]|0);S=s[t+24>>2]|0;JD[s[(s[S>>2]|0)+32>>2]&127](S,s[(s[e+8>>2]|0)+284>>2]|0,t+28|0,S);S=s[e+8>>2]|0;s[e+92>>2]=s[S+52>>2];s[e+96>>2]=s[S+56>>2];s[e+100>>2]=s[S+60>>2];s[e+104>>2]=s[S+64>>2];S=s[S+284>>2]|0;if((dD[s[(s[S>>2]|0)+36>>2]&127](S)|0)>0){u=0;g=0;d=0;do{l=s[e+132>>2]|0;if((l|0)<0){if((s[e+136>>2]|0)<0){a=s[e+140>>2]|0;if((a|0)!=0){if((r[e+144>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+140>>2]=0}r[e+144>>0]=1;s[e+140>>2]=0;s[e+136>>2]=0}do{a=(s[e+140>>2]|0)+(l<<2)|0;if((a|0)!=0)s[a>>2]=0;l=l+1|0}while((l|0)!=0)}s[e+132>>2]=0;l=s[(s[e+8>>2]|0)+284>>2]|0;l=s[(dD[s[(s[l>>2]|0)+28>>2]&127](l)|0)+12>>2]|0;S=s[s[l+(u<<4)>>2]>>2]|0;a=s[s[l+(u<<4)+4>>2]>>2]|0;if(!((S|0)!=0?(s[S+204>>2]&4|0)!=0:0))i=15;do if((i|0)==15){i=0;if((a|0)!=0?(s[a+204>>2]&4|0)!=0:0)break;a=s[l+(u<<4)+8>>2]|0;if((a|0)!=0)hD[s[(s[a>>2]|0)+16>>2]&127](a,e+128|0);p=s[e+132>>2]|0;if((p|0)>0){h=s[e+140>>2]|0;l=s[e+8>>2]|0;a=0;w=d;while(1){d=s[h+(a<<2)>>2]|0;v=(s[d+740>>2]|0)==(l|0)?-1:1;y=s[d+748>>2]|0;if((y|0)>0){m=0;do{b=+f[d+(m*184|0)+84>>2];if(b<0){E=d+(m*184|0)+68|0;if(b<g){S=d+(m*184|0)+72|0;x=v*+f[S>>2];w=d+(m*184|0)+76|0;g=v*+f[w>>2];f[e+152>>2]=v*+f[E>>2];f[e+156>>2]=x;f[e+160>>2]=g;f[e+164>>2]=0;y=s[d+748>>2]|0;g=b}else{S=d+(m*184|0)+72|0;w=d+(m*184|0)+76|0}T=b*v*+f[S>>2]*.20000000298023224;x=b*v*+f[w>>2]*.20000000298023224;f[e+92>>2]=b*v*+f[E>>2]*.20000000298023224+ +f[e+92>>2];f[e+96>>2]=T+ +f[e+96>>2];f[e+100>>2]=x+ +f[e+100>>2];w=1}m=m+1|0}while((m|0)<(y|0));d=w}else d=w;a=a+1|0;if((a|0)>=(p|0))break;else w=d}}}while(0);u=u+1|0;S=s[(s[e+8>>2]|0)+284>>2]|0}while((u|0)<(dD[s[(s[S>>2]|0)+36>>2]&127](S)|0))}else d=0;S=s[e+8>>2]|0;s[o+0>>2]=s[S+4>>2];s[o+4>>2]=s[S+8>>2];s[o+8>>2]=s[S+12>>2];s[o+12>>2]=s[S+16>>2];s[o+16>>2]=s[S+20>>2];s[o+20>>2]=s[S+24>>2];s[o+24>>2]=s[S+28>>2];s[o+28>>2]=s[S+32>>2];s[o+32>>2]=s[S+36>>2];s[o+36>>2]=s[S+40>>2];s[o+40>>2]=s[S+44>>2];s[o+44>>2]=s[S+48>>2];s[o+48>>2]=s[e+92>>2];s[o+52>>2]=s[e+96>>2];s[o+56>>2]=s[e+100>>2];s[o+60>>2]=s[e+104>>2];s[S+260>>2]=(s[S+260>>2]|0)+1;s[S+4>>2]=s[o+0>>2];s[S+8>>2]=s[o+4>>2];s[S+12>>2]=s[o+8>>2];s[S+16>>2]=s[o+12>>2];s[S+20>>2]=s[o+16>>2];s[S+24>>2]=s[o+20>>2];s[S+28>>2]=s[o+24>>2];s[S+32>>2]=s[o+28>>2];s[S+36>>2]=s[o+32>>2];s[S+40>>2]=s[o+36>>2];s[S+44>>2]=s[o+40>>2];s[S+48>>2]=s[o+44>>2];s[S+52>>2]=s[o+48>>2];s[S+56>>2]=s[o+52>>2];s[S+60>>2]=s[o+56>>2];s[S+64>>2]=s[o+60>>2];if(!d){i=32;break}r[e+148>>0]=1;if((n|0)>3){i=32;break}else n=n+1|0}if((i|0)==32){S=(s[e+8>>2]|0)+52|0;s[e+92>>2]=s[S+0>>2];s[e+96>>2]=s[S+4>>2];s[e+100>>2]=s[S+8>>2];s[e+104>>2]=s[S+12>>2];bM(e+112|0,S|0,16)|0;c=o;return}}function LE(e,t,n){e=e|0;t=t|0;n=+n;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;o=c;c=c+528|0;if((r[e+171>>0]|0)==0?+f[e+172>>2]<=0:0){c=o;return}r[e+168>>0]=(dD[s[(s[e>>2]|0)+48>>2]&127](e)|0)&1;v=+f[e+16>>2]- +f[e+44>>2]*n;f[e+16>>2]=v;if(v>0?(l=+f[e+28>>2],v>l):0)f[e+16>>2]=l;else l=v;if(l<0?(y=+W(+l),a=+W(+(+f[e+24>>2])),y>a):0){f[e+16>>2]=-a;l=-a}f[e+20>>2]=l*n;h=s[e+8>>2]|0;s[o+0>>2]=s[h+4>>2];s[o+4>>2]=s[h+8>>2];s[o+8>>2]=s[h+12>>2];s[o+12>>2]=s[h+16>>2];s[o+16>>2]=s[h+20>>2];s[o+20>>2]=s[h+24>>2];s[o+24>>2]=s[h+28>>2];s[o+28>>2]=s[h+32>>2];s[o+32>>2]=s[h+36>>2];s[o+36>>2]=s[h+40>>2];s[o+40>>2]=s[h+44>>2];s[o+44>>2]=s[h+48>>2];s[o+48>>2]=s[h+52>>2];s[o+52>>2]=s[h+56>>2];s[o+56>>2]=s[h+60>>2];s[o+60>>2]=s[h+64>>2];h=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}v=+f[e+20>>2];v=+f[e+52>>2]+(v>0?v:0);m=+f[2692+(h<<4)>>2]*v+ +f[e+96>>2];y=v*+f[2696+(h<<4)>>2]+ +f[e+100>>2];f[e+112>>2]=+f[e+92>>2]+ +f[2688+(h<<4)>>2]*v;f[e+116>>2]=m;f[e+120>>2]=y;f[e+124>>2]=0;f[o+456>>2]=1;s[o+460>>2]=0;s[o+464>>2]=0;s[o+468>>2]=0;s[o+472>>2]=0;f[o+476>>2]=1;s[o+480>>2]=0;s[o+484>>2]=0;s[o+488>>2]=0;s[o+492>>2]=0;f[o+496>>2]=1;h=o+500|0;s[h+0>>2]=0;s[h+4>>2]=0;s[h+8>>2]=0;s[h+12>>2]=0;s[h+16>>2]=0;f[o+392>>2]=1;s[o+396>>2]=0;s[o+400>>2]=0;s[o+404>>2]=0;s[o+408>>2]=0;f[o+412>>2]=1;s[o+416>>2]=0;s[o+420>>2]=0;s[o+424>>2]=0;s[o+428>>2]=0;f[o+432>>2]=1;h=o+436|0;s[h+0>>2]=0;s[h+4>>2]=0;s[h+8>>2]=0;s[h+12>>2]=0;s[h+16>>2]=0;h=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}p=s[e+12>>2]|0;v=+CD[s[(s[p>>2]|0)+48>>2]&15](p);v=v+ +f[e+56>>2];m=v*+f[2692+(h<<4)>>2]+ +f[e+96>>2];y=v*+f[2696+(h<<4)>>2]+ +f[e+100>>2];f[o+504>>2]=+f[2688+(h<<4)>>2]*v+ +f[e+92>>2];f[o+508>>2]=m;f[o+512>>2]=y;f[o+516>>2]=0;s[o+440>>2]=s[e+112>>2];s[o+444>>2]=s[e+116>>2];s[o+448>>2]=s[e+120>>2];s[o+452>>2]=s[e+124>>2];h=s[e+8>>2]|0;p=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}v=-+f[2688+(p<<4)>>2];m=-+f[2692+(p<<4)>>2];y=-+f[2696+(p<<4)>>2];f[o+292>>2]=1;i[o+296>>1]=1;i[o+298>>1]=-1;g=o+300|0;s[o+364>>2]=0;s[g+0>>2]=0;s[g+4>>2]=0;s[g+8>>2]=0;s[g+12>>2]=0;s[g+16>>2]=0;s[g+20>>2]=0;s[g+24>>2]=0;s[g+28>>2]=0;s[o+288>>2]=2896;s[o+368>>2]=h;f[o+372>>2]=v;f[o+376>>2]=m;f[o+380>>2]=y;f[o+384>>2]=0;f[o+388>>2]=.707099974155426;h=s[e+8>>2]|0;g=s[h+188>>2]|0;i[o+296>>1]=i[g+4>>1]|0;i[o+298>>1]=i[g+6>>1]|0;if((r[e+170>>0]|0)==0)yy(t,s[e+12>>2]|0,o+456|0,o+392|0,o+288|0,0);else YA(h,s[e+12>>2]|0,o+456|0,o+392|0,o+288|0,+f[t+56>>2]);if(+f[o+292>>2]<1){h=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}do if(+f[o+332>>2]*+f[2688+(h<<4)>>2]+ +f[o+336>>2]*+f[2692+(h<<4)>>2]+ +f[o+340>>2]*+f[2696+(h<<4)>>2]>0){a=+f[o+292>>2];f[e+108>>2]=+f[e+52>>2]*a;if((r[e+180>>0]|0)==0){s[e+92>>2]=s[e+112>>2];s[e+96>>2]=s[e+116>>2];s[e+100>>2]=s[e+120>>2];s[e+104>>2]=s[e+124>>2];break}else{f[e+92>>2]=(1-a)*+f[e+92>>2]+a*+f[e+112>>2];f[e+96>>2]=(1-a)*+f[e+96>>2]+a*+f[e+116>>2];f[e+100>>2]=(1-a)*+f[e+100>>2]+a*+f[e+120>>2];break}}while(0);f[e+16>>2]=0;f[e+20>>2]=0}else{f[e+108>>2]=+f[e+52>>2];s[e+92>>2]=s[e+112>>2];s[e+96>>2]=s[e+116>>2];s[e+100>>2]=s[e+120>>2];s[e+104>>2]=s[e+124>>2]}if((r[e+171>>0]|0)==0){m=+f[e+172>>2];y=m>n?n:m;f[e+172>>2]=m-n;SE(e,t,+f[e+60>>2]*y,y*+f[e+64>>2],y*+f[e+68>>2])}else SE(e,t,+f[e+60>>2],+f[e+64>>2],+f[e+68>>2]);s[o+272>>2]=s[e+112>>2];s[o+276>>2]=s[e+116>>2];s[o+280>>2]=s[e+120>>2];s[o+284>>2]=s[e+124>>2];a=+f[e+16>>2];if(a<0)a=-a;else a=0;a=a*n;do if(a>0?(u=+f[e+24>>2],a>u):0){if((r[e+168>>0]|0)==0?(r[e+169>>0]|0)!=0:0){u=a;break}}else u=a;while(0);h=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}l=u+ +f[e+108>>2];a=+f[2688+(h<<4)>>2]*l;u=l*+f[2692+(h<<4)>>2];l=l*+f[2696+(h<<4)>>2];f[e+112>>2]=+f[e+112>>2]-a;f[e+116>>2]=+f[e+116>>2]-u;f[e+120>>2]=+f[e+120>>2]-l;p=s[e+8>>2]|0;d=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}y=+f[e+40>>2];h=o+172|0;f[h>>2]=1;i[o+176>>1]=1;i[o+178>>1]=-1;g=o+180|0;s[o+244>>2]=0;s[g+0>>2]=0;s[g+4>>2]=0;s[g+8>>2]=0;s[g+12>>2]=0;s[g+16>>2]=0;s[g+20>>2]=0;s[g+24>>2]=0;s[g+28>>2]=0;s[o+168>>2]=2896;s[o+248>>2]=p;s[o+252>>2]=s[2688+(d<<4)>>2];s[o+256>>2]=s[2692+(d<<4)>>2];s[o+260>>2]=s[2696+(d<<4)>>2];s[o+264>>2]=s[2700+(d<<4)>>2];f[o+268>>2]=y;d=s[e+8>>2]|0;p=s[d+188>>2]|0;i[o+176>>1]=i[p+4>>1]|0;i[o+178>>1]=i[p+6>>1]|0;p=s[e+176>>2]|0;if((r[2736]|0)==0?(Zt(2736)|0)!=0:0){f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}y=+f[e+40>>2];f[o+68>>2]=1;i[o+72>>1]=1;i[o+74>>1]=-1;g=o+76|0;s[o+140>>2]=0;s[g+0>>2]=0;s[g+4>>2]=0;s[g+8>>2]=0;s[g+12>>2]=0;s[g+16>>2]=0;s[g+20>>2]=0;s[g+24>>2]=0;s[g+28>>2]=0;s[o+64>>2]=2896;s[o+144>>2]=d;s[o+148>>2]=s[2688+(p<<4)>>2];s[o+152>>2]=s[2692+(p<<4)>>2];s[o+156>>2]=s[2696+(p<<4)>>2];s[o+160>>2]=s[2700+(p<<4)>>2];f[o+164>>2]=y;p=s[(s[e+8>>2]|0)+188>>2]|0;i[o+72>>1]=i[p+4>>1]|0;i[o+74>>1]=i[p+6>>1]|0;y=+f[e+112>>2];m=+f[e+116>>2];v=+f[e+120>>2];p=0;while(1){f[o+456>>2]=1;s[o+460>>2]=0;s[o+464>>2]=0;s[o+468>>2]=0;s[o+472>>2]=0;f[o+476>>2]=1;s[o+480>>2]=0;s[o+484>>2]=0;s[o+488>>2]=0;s[o+492>>2]=0;f[o+496>>2]=1;s[o+500>>2]=0;f[o+392>>2]=1;s[o+396>>2]=0;s[o+400>>2]=0;s[o+404>>2]=0;s[o+408>>2]=0;f[o+412>>2]=1;s[o+416>>2]=0;s[o+420>>2]=0;s[o+424>>2]=0;s[o+428>>2]=0;f[o+432>>2]=1;s[o+436>>2]=0;f[o+288>>2]=1;s[o+292>>2]=0;s[o+296>>2]=0;s[o+300>>2]=0;s[o+304>>2]=0;f[o+308>>2]=1;s[o+312>>2]=0;s[o+316>>2]=0;s[o+320>>2]=0;s[o+324>>2]=0;f[o+328>>2]=1;s[o+332>>2]=0;s[o+336>>2]=0;s[o+340>>2]=0;s[o+504>>2]=s[e+92>>2];s[o+508>>2]=s[e+96>>2];s[o+512>>2]=s[e+100>>2];s[o+516>>2]=s[e+104>>2];s[o+440>>2]=s[e+112>>2];s[o+444>>2]=s[e+116>>2];s[o+448>>2]=s[e+120>>2];s[o+452>>2]=s[e+124>>2];f[o+336>>2]=y-a;f[o+340>>2]=m-u;f[o+344>>2]=v-l;f[o+348>>2]=0;if((r[e+170>>0]|0)==0){yy(t,s[e+12>>2]|0,o+456|0,o+392|0,o+168|0,+f[t+56>>2]);if(!(+f[h>>2]<1))yy(t,s[e+12>>2]|0,o+456|0,o+288|0,o+64|0,+f[t+56>>2])}else{YA(s[e+8>>2]|0,s[e+12>>2]|0,o+456|0,o+392|0,o+168|0,+f[t+56>>2]);if(!(+f[h>>2]<1))YA(s[e+8>>2]|0,s[e+12>>2]|0,o+456|0,o+288|0,o+64|0,+f[t+56>>2])}v=+f[e+16>>2];if(v<0)m=-v;else m=0;y=m*n;d=(r[e+182>>0]|0)==0;if(!d?+f[h>>2]<1:0)g=1;else g=+f[o+68>>2]<1;if(!(y>0))break;m=+f[e+52>>2];if(!(y<m)|g^1|p)break;if((r[e+168>>0]|0)==0?(r[e+169>>0]|0)!=0:0){p=0;break}s[e+112>>2]=s[o+272>>2];s[e+116>>2]=s[o+276>>2];s[e+120>>2]=s[o+280>>2];s[e+124>>2]=s[o+284>>2];p=s[e+176>>2]|0;do if((r[2736]|0)==0){if((Zt(2736)|0)==0)break;f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}while(0);y=m+ +f[e+108>>2];m=y*+f[2692+(p<<4)>>2];v=y*+f[2696+(p<<4)>>2];y=+f[e+112>>2]- +f[2688+(p<<4)>>2]*y;f[e+112>>2]=y;m=+f[e+116>>2]-m;f[e+116>>2]=m;v=+f[e+120>>2]-v;f[e+120>>2]=v;p=1}m=+f[h>>2];if(m<1|p){u=+f[e+96>>2];n=(u- +f[o+232>>2])*.5;do if(!d)if((r[e+181>>0]|0)==0){f[e+92>>2]=(1-n)*+f[e+92>>2]+n*+f[e+112>>2];f[e+96>>2]=(1-n)*u+n*+f[e+116>>2];f[e+100>>2]=(1-n)*+f[e+100>>2]+n*+f[e+120>>2];t=e+181|0;break}else{f[e+92>>2]=(1-m)*+f[e+92>>2]+m*+f[e+112>>2];f[e+96>>2]=(1-m)*u+m*+f[e+116>>2];f[e+100>>2]=(1-m)*+f[e+100>>2]+m*+f[e+120>>2];t=e+181|0;break}else{f[e+92>>2]=(1-m)*+f[e+92>>2]+m*+f[e+112>>2];f[e+96>>2]=(1-m)*u+m*+f[e+116>>2];f[e+100>>2]=(1-m)*+f[e+100>>2]+m*+f[e+120>>2];t=e+181|0}while(0);r[t>>0]=0;f[e+16>>2]=0;f[e+20>>2]=0;r[e+169>>0]=0}else{r[e+181>>0]=1;do if(!d){if(v<0)m=-v;else m=0;v=+f[e+24>>2];if(m*n>v){if((r[e+168>>0]|0)==0?(r[e+169>>0]|0)!=0:0)break;f[e+112>>2]=a+ +f[e+112>>2];f[e+116>>2]=u+ +f[e+116>>2];f[e+120>>2]=l+ +f[e+120>>2];t=s[e+176>>2]|0;do if((r[2736]|0)==0){if((Zt(2736)|0)==0)break;f[672]=1;s[673]=0;s[674]=0;s[675]=0;s[676]=0;f[677]=1;s[678]=0;s[679]=0;s[680]=0;s[681]=0;f[682]=1;f[683]=0;sn(2736)}while(0);v=v+ +f[e+108>>2];m=v*+f[2692+(t<<4)>>2];y=v*+f[2696+(t<<4)>>2];f[e+112>>2]=+f[e+112>>2]- +f[2688+(t<<4)>>2]*v;f[e+116>>2]=+f[e+116>>2]-m;f[e+120>>2]=+f[e+120>>2]-y}}while(0);s[e+92>>2]=s[e+112>>2];s[e+96>>2]=s[e+116>>2];s[e+100>>2]=s[e+120>>2];s[e+104>>2]=s[e+124>>2]}s[o+48>>2]=s[e+92>>2];s[o+52>>2]=s[e+96>>2];s[o+56>>2]=s[e+100>>2];s[o+60>>2]=s[e+104>>2];g=s[e+8>>2]|0;s[g+260>>2]=(s[g+260>>2]|0)+1;s[g+4>>2]=s[o+0>>2];s[g+8>>2]=s[o+4>>2];s[g+12>>2]=s[o+8>>2];s[g+16>>2]=s[o+12>>2];s[g+20>>2]=s[o+16>>2];s[g+24>>2]=s[o+20>>2];s[g+28>>2]=s[o+24>>2];s[g+32>>2]=s[o+28>>2];s[g+36>>2]=s[o+32>>2];s[g+40>>2]=s[o+36>>2];s[g+44>>2]=s[o+40>>2];s[g+48>>2]=s[o+44>>2];s[g+52>>2]=s[o+48>>2];s[g+56>>2]=s[o+52>>2];s[g+60>>2]=s[o+56>>2];s[g+64>>2]=s[o+60>>2];c=o;return}function AE(e){e=e|0;var t=0;t=c;e=dD[s[(s[e>>2]|0)+48>>2]&127](e)|0;c=t;return e|0}function OE(e){e=e|0;var t=0;t=c;if(!(dD[s[(s[e>>2]|0)+40>>2]&127](e)|0)){c=t;return}f[e+16>>2]=+f[e+28>>2];r[e+169>>0]=1;c=t;return}function ME(e){e=e|0;var t=0;t=c;if(!(+f[e+16>>2]==0)){e=0;c=t;return e|0}e=+f[e+20>>2]==0;c=t;return e|0}function _E(e,t){e=e|0;t=t|0;return}function DE(e,t){e=e|0;t=t|0;r[e+180>>0]=t&1;return}function PE(e,t,n){e=e|0;t=t|0;n=+n;var r=0;r=c;hD[s[(s[e>>2]|0)+32>>2]&127](e,t);VD[s[(s[e>>2]|0)+36>>2]&7](e,t,n);c=r;return}function HE(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function BE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0;r=c;i=s[t>>2]|0;if((i|0)==(s[e+80>>2]|0)){a=1;c=r;return+a}if((s[i+204>>2]&4|0)!=0){a=1;c=r;return+a}if(n){a=+f[t+8>>2];u=+f[t+12>>2];o=+f[t+16>>2]}else{h=+f[t+8>>2];l=+f[t+12>>2];o=+f[t+16>>2];a=+f[i+4>>2]*h+ +f[i+8>>2]*l+ +f[i+12>>2]*o;u=h*+f[i+20>>2]+l*+f[i+24>>2]+o*+f[i+28>>2];o=h*+f[i+36>>2]+l*+f[i+40>>2]+o*+f[i+44>>2]}if(a*+f[e+84>>2]+u*+f[e+88>>2]+o*+f[e+92>>2]<+f[e+100>>2]){h=1;c=r;return+h}f[e+4>>2]=+f[t+40>>2];s[e+76>>2]=i;if(n){s[e+44>>2]=s[t+8>>2];s[e+48>>2]=s[t+12>>2];s[e+52>>2]=s[t+16>>2];s[e+56>>2]=s[t+20>>2]}else{o=+f[t+8>>2];u=+f[t+12>>2];a=+f[t+16>>2];l=o*+f[i+20>>2]+u*+f[i+24>>2]+a*+f[i+28>>2];h=o*+f[i+36>>2]+u*+f[i+40>>2]+a*+f[i+44>>2];f[e+44>>2]=+f[i+4>>2]*o+ +f[i+8>>2]*u+ +f[i+12>>2]*a;f[e+48>>2]=l;f[e+52>>2]=h;f[e+56>>2]=0}s[e+60>>2]=s[t+24>>2];s[e+64>>2]=s[t+28>>2];s[e+68>>2]=s[t+32>>2];s[e+72>>2]=s[t+36>>2];h=+f[t+40>>2];c=r;return+h}function jE(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;t=c;c=c+144|0;f[e+36>>2]=0;s[t+128>>2]=0;s[t+132>>2]=0;s[t+136>>2]=0;s[t+140>>2]=0;n=0;do{r=t+128+(n<<2)|0;f[r>>2]=1;o=s[e+28>>2]|0;_=+f[o+4>>2];f[t+80>>2]=_;L=+f[o+20>>2];f[t+84>>2]=L;u=+f[o+36>>2];f[t+88>>2]=u;f[t+92>>2]=0;M=+f[o+8>>2];f[t+96>>2]=M;k=+f[o+24>>2];f[t+100>>2]=k;w=+f[o+40>>2];f[t+104>>2]=w;f[t+108>>2]=0;O=+f[o+12>>2];f[t+112>>2]=O;C=+f[o+28>>2];f[t+116>>2]=C;p=+f[o+44>>2];f[t+120>>2]=p;f[t+124>>2]=0;i=s[e+32>>2]|0;x=+f[i+4>>2];f[t+32>>2]=x;b=+f[i+20>>2];f[t+36>>2]=b;d=+f[i+36>>2];f[t+40>>2]=d;f[t+44>>2]=0;S=+f[i+8>>2];f[t+48>>2]=S;y=+f[i+24>>2];f[t+52>>2]=y;h=+f[i+40>>2];f[t+56>>2]=h;f[t+60>>2]=0;E=+f[i+12>>2];f[t+64>>2]=E;g=+f[i+28>>2];f[t+68>>2]=g;a=+f[i+44>>2];f[t+72>>2]=a;f[t+76>>2]=0;T=+f[e+300>>2];m=+f[e+304>>2];l=+f[e+308>>2];A=+f[o+52>>2];N=+f[o+56>>2];v=+f[o+60>>2];f[t+16>>2]=T*_+m*M+l*O+A-A;f[t+20>>2]=T*L+m*k+l*C+N-N;f[t+24>>2]=T*u+m*w+l*p+v-v;f[t+28>>2]=0;v=+f[e+316>>2];p=+f[e+320>>2];l=+f[e+324>>2];w=+f[i+52>>2];m=+f[i+56>>2];u=+f[i+60>>2];f[t>>2]=v*x+p*S+l*E+w-w;f[t+4>>2]=v*b+p*y+l*g+m-m;f[t+8>>2]=v*d+p*h+l*a+u-u;f[t+12>>2]=0;o=s[e+28>>2]|0;Wd(e+(n*84|0)+48|0,t+80|0,t+32|0,t+16|0,t,t+128|0,o+396|0,+f[o+344>>2],i+396|0,+f[i+344>>2]);f[r>>2]=0;n=n+1|0}while((n|0)!=3);c=t;return}function FE(e,t){e=e|0;t=t|0;var n=0;n=c;if((r[e+344>>0]|0)==0){s[t>>2]=3;s[t+4>>2]=3;c=n;return}else{s[t>>2]=0;s[t+4>>2]=0;c=n;return}}function IE(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;n=c;l=s[e+28>>2]|0;h=s[e+32>>2]|0;r=s[t+8>>2]|0;f[r>>2]=1;u=s[t+24>>2]|0;f[r+(u+1<<2)>>2]=1;f[r+((u<<1)+2<<2)>>2]=1;p=+f[e+300>>2];y=+f[e+304>>2];o=+f[e+308>>2];m=+f[l+4>>2]*p+ +f[l+8>>2]*y+ +f[l+12>>2]*o;d=p*+f[l+20>>2]+y*+f[l+24>>2]+o*+f[l+28>>2];o=p*+f[l+36>>2]+y*+f[l+40>>2]+o*+f[l+44>>2];r=s[t+12>>2]|0;f[r>>2]=0;f[r+4>>2]=o;f[r+8>>2]=-d;f[r+12>>2]=0;f[r+(u<<2)>>2]=-o;f[r+(u+1<<2)>>2]=0;f[r+(u+2<<2)>>2]=m;f[r+(u+3<<2)>>2]=0;f[r+(u<<1<<2)>>2]=d;f[r+((u<<1|1)<<2)>>2]=-m;f[r+((u<<1)+2<<2)>>2]=0;f[r+((u<<1)+3<<2)>>2]=0;r=s[t+16>>2]|0;f[r>>2]=-1;f[r+(u+1<<2)>>2]=-1;f[r+((u<<1)+2<<2)>>2]=-1;y=+f[e+316>>2];p=+f[e+320>>2];i=+f[e+324>>2];g=+f[h+4>>2]*y+ +f[h+8>>2]*p+ +f[h+12>>2]*i;v=y*+f[h+20>>2]+p*+f[h+24>>2]+i*+f[h+28>>2];i=y*+f[h+36>>2]+p*+f[h+40>>2]+i*+f[h+44>>2];r=s[t+20>>2]|0;f[r>>2]=0;f[r+4>>2]=-i;f[r+8>>2]=v;f[r+12>>2]=0;f[r+(u<<2)>>2]=i;f[r+(u+1<<2)>>2]=0;f[r+(u+2<<2)>>2]=-g;f[r+(u+3<<2)>>2]=0;f[r+(u<<1<<2)>>2]=-v;f[r+((u<<1|1)<<2)>>2]=g;f[r+((u<<1)+2<<2)>>2]=0;f[r+((u<<1)+3<<2)>>2]=0;u=s[e+332>>2]|0;p=+f[((u&1|0)==0?t+4|0:e+336|0)>>2]*+f[t>>2];r=s[t+24>>2]|0;a=s[t+28>>2]|0;f[a>>2]=p*(g+ +f[h+52>>2]-m- +f[l+52>>2]);f[a+(r<<2)>>2]=p*(v+ +f[h+56>>2]-d- +f[l+56>>2]);f[a+(r<<1<<2)>>2]=p*(i+ +f[h+60>>2]-o- +f[l+60>>2]);if((u&2|0)!=0){h=s[t+32>>2]|0;f[h>>2]=+f[e+340>>2];f[h+(r<<2)>>2]=+f[e+340>>2];f[h+(r<<1<<2)>>2]=+f[e+340>>2]}i=+f[e+356>>2];if(i>0){f[s[t+36>>2]>>2]=-i;f[s[t+40>>2]>>2]=i;o=+f[e+356>>2]}else o=i;if(o>0){f[(s[t+36>>2]|0)+(r<<2)>>2]=-i;f[(s[t+40>>2]|0)+(r<<2)>>2]=i;o=+f[e+356>>2]}if(!(o>0)){h=e+352|0;y=+f[h>>2];h=t+52|0;f[h>>2]=y;c=n;return}f[(s[t+36>>2]|0)+(r<<1<<2)>>2]=-i;f[(s[t+40>>2]|0)+(r<<1<<2)>>2]=i;h=e+352|0;y=+f[h>>2];h=t+52|0;f[h>>2]=y;c=n;return}function qE(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;var i=0;i=c;do if((r|0)==-1)if((t|0)==2|(t|0)==1){f[e+336>>2]=n;s[e+332>>2]=s[e+332>>2]|1;break}else if((t|0)==4|(t|0)==3){f[e+340>>2]=n;s[e+332>>2]=s[e+332>>2]|2;break}else break;while(0);c=i;return}function RE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;do if((n|0)==-1)if((t|0)==2|(t|0)==1){i=+f[e+336>>2];break}else if((t|0)==4|(t|0)==3){i=+f[e+340>>2];break}else{i=3.4028234663852886e38;break}else i=3.4028234663852886e38;while(0);c=r;return+i}function UE(e){e=e|0;return}function zE(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function WE(e){e=e|0;return 84}function XE(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;Av(e,t,n)|0;f[t+52>>2]=+f[e+300>>2];f[t+56>>2]=+f[e+304>>2];f[t+60>>2]=+f[e+308>>2];f[t+64>>2]=+f[e+312>>2];f[t+68>>2]=+f[e+316>>2];f[t+72>>2]=+f[e+320>>2];f[t+76>>2]=+f[e+324>>2];f[t+80>>2]=+f[e+328>>2];c=r;return 3080}function VE(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=3912;n=s[e+496>>2]|0;if((n|0)!=0){if((r[e+500>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+496>>2]=0}r[e+500>>0]=1;s[e+496>>2]=0;s[e+488>>2]=0;s[e+492>>2]=0;c=t;return}function $E(e){e=e|0;var t=0;t=c;JE(e);hM(e);c=t;return}function JE(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=3752;n=s[e+144>>2]|0;if((n|0)!=0){if((r[e+148>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+144>>2]=0}r[e+148>>0]=1;s[e+144>>2]=0;s[e+136>>2]=0;s[e+140>>2]=0;n=s[e+76>>2]|0;if((n|0)!=0){if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+76>>2]=0}r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;s[e+72>>2]=0;n=s[e+56>>2]|0;if((n|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;n=s[e+36>>2]|0;if((n|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}function KE(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;i=c;c=c+64|0;r[t+84>>0]=0;s[i+0>>2]=s[e+4>>2];s[i+4>>2]=s[e+8>>2];s[i+8>>2]=s[e+12>>2];s[i+12>>2]=s[e+16>>2];s[i+16>>2]=s[e+20>>2];s[i+20>>2]=s[e+24>>2];s[i+24>>2]=s[e+28>>2];s[i+28>>2]=s[e+32>>2];s[i+32>>2]=s[e+36>>2];s[i+36>>2]=s[e+40>>2];s[i+40>>2]=s[e+44>>2];s[i+44>>2]=s[e+48>>2];s[i+48>>2]=s[e+52>>2];s[i+52>>2]=s[e+56>>2];s[i+56>>2]=s[e+60>>2];s[i+60>>2]=s[e+64>>2];if(n?(o=s[e+480>>2]|0,(o|0)!=0):0)hD[s[(s[o>>2]|0)+8>>2]&127](o,i);S=+f[t+156>>2];w=+f[i>>2];E=+f[t+160>>2];b=+f[i+4>>2];d=+f[t+164>>2];y=+f[i+8>>2];g=+f[i+16>>2];m=+f[i+20>>2];v=+f[i+24>>2];p=+f[i+32>>2];l=+f[i+36>>2];u=+f[i+40>>2];h=S*g+E*m+d*v+ +f[i+52>>2];a=S*p+E*l+d*u+ +f[i+56>>2];f[t+36>>2]=S*w+E*b+d*y+ +f[i+48>>2];f[t+40>>2]=h;f[t+44>>2]=a;f[t+48>>2]=0;a=+f[t+172>>2];h=+f[t+176>>2];d=+f[t+180>>2];f[t+52>>2]=w*a+b*h+y*d;f[t+56>>2]=a*g+h*m+d*v;f[t+60>>2]=a*p+h*l+d*u;f[t+64>>2]=0;d=+f[t+188>>2];h=+f[t+192>>2];a=+f[t+196>>2];f[t+68>>2]=w*d+b*h+y*a;f[t+72>>2]=d*g+h*m+a*v;f[t+76>>2]=d*p+h*l+a*u;f[t+80>>2]=0;c=i;return}function QE(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0;i=c;KE(e,t+(n*284|0)|0,r);d=+f[t+(n*284|0)+52>>2];u=+f[t+(n*284|0)+56>>2];y=+f[t+(n*284|0)+60>>2];P=+f[t+(n*284|0)+76>>2];k=+f[t+(n*284|0)+72>>2];C=+f[t+(n*284|0)+68>>2];T=1/+X(+((k*-d-C*-u)*(k*-d-C*-u)+((P*-u-k*-y)*(P*-u-k*-y)+(C*-y-P*-d)*(C*-y-P*-d))));x=(P*-u-k*-y)*T;S=T*(C*-y-P*-d);T=T*(k*-d-C*-u);s=+f[t+(n*284|0)+232>>2]*.5;h=+J(+s)/+X(+(d*d+u*u+y*y));s=+$(+s);p=2/(s*s+(h*-y*h*-y+(h*-d*h*-d+h*-u*h*-u)));_=1-(h*-u*h*-u*p+h*-y*h*-y*p);M=h*-d*h*-u*p-s*h*-y*p;D=h*-d*h*-y*p+s*h*-u*p;A=h*-d*h*-u*p+s*h*-y*p;L=1-(h*-d*h*-d*p+h*-y*h*-y*p);O=h*-u*h*-y*p-s*h*-d*p;l=h*-d*h*-y*p-s*h*-u*p;s=h*-u*h*-y*p+s*h*-d*p;p=1-(h*-d*h*-d*p+h*-u*h*-u*p);h=+f[t+(n*284|0)+236>>2]*-.5;N=+J(+h)/+X(+(P*P+(k*k+C*C)));h=+$(+h);b=2/(h*h+(P*N*P*N+(C*N*C*N+k*N*k*N)));v=1-(k*N*k*N*b+P*N*P*N*b);a=C*N*k*N*b-h*P*N*b;E=C*N*P*N*b+h*k*N*b;m=C*N*k*N*b+h*P*N*b;o=1-(C*N*C*N*b+P*N*P*N*b);w=k*N*P*N*b-h*C*N*b;g=C*N*P*N*b-h*k*N*b;h=k*N*P*N*b+h*C*N*b;b=1-(C*N*C*N*b+k*N*k*N*b);N=+f[t+(n*284|0)+72>>2];k=+f[t+(n*284|0)+76>>2];f[t+(n*284|0)+92>>2]=k*(_*E+M*w+D*b)+(C*(D*g+(M*m+_*v))+N*(D*h+(_*a+M*o)));f[t+(n*284|0)+96>>2]=T*(_*E+M*w+D*b)+(x*(D*g+(M*m+_*v))+S*(D*h+(_*a+M*o)));f[t+(n*284|0)+100>>2]=(_*E+M*w+D*b)*-y+((D*g+(M*m+_*v))*-d+(D*h+(_*a+M*o))*-u);f[t+(n*284|0)+104>>2]=0;f[t+(n*284|0)+108>>2]=k*(A*E+L*w+O*b)+(C*(O*g+(L*m+A*v))+N*(O*h+(A*a+L*o)));f[t+(n*284|0)+112>>2]=T*(A*E+L*w+O*b)+(x*(O*g+(L*m+A*v))+S*(O*h+(A*a+L*o)));f[t+(n*284|0)+116>>2]=(A*E+L*w+O*b)*-y+((O*g+(L*m+A*v))*-d+(O*h+(A*a+L*o))*-u);f[t+(n*284|0)+120>>2]=0;f[t+(n*284|0)+124>>2]=k*(l*E+s*w+p*b)+(C*(p*g+(s*m+l*v))+N*(p*h+(l*a+s*o)));f[t+(n*284|0)+128>>2]=T*(l*E+s*w+p*b)+(x*(p*g+(s*m+l*v))+S*(p*h+(l*a+s*o)));f[t+(n*284|0)+132>>2]=(l*E+s*w+p*b)*-y+((p*g+(s*m+l*v))*-d+(p*h+(l*a+s*o))*-u);f[t+(n*284|0)+136>>2]=0;u=+f[t+(n*284|0)+32>>2];o=u*+f[t+(n*284|0)+56>>2]+ +f[t+(n*284|0)+40>>2];s=u*+f[t+(n*284|0)+60>>2]+ +f[t+(n*284|0)+44>>2];f[t+(n*284|0)+140>>2]=+f[t+(n*284|0)+52>>2]*u+ +f[t+(n*284|0)+36>>2];f[t+(n*284|0)+144>>2]=o;f[t+(n*284|0)+148>>2]=s;f[t+(n*284|0)+152>>2]=0;c=i;return}function GE(e,t){e=e|0;t=+t;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;n=c;c=c+112|0;o=s[e+136>>2]|0;if((o|0)>0){i=0;do{QE(s[e+116>>2]|0,s[e+144>>2]|0,i,0);i=i+1|0;o=s[e+136>>2]|0}while((i|0)<(o|0));i=e+116|0}else i=e+116|0;a=s[i>>2]|0;L=+f[a+312>>2];A=+f[a+316>>2];g=+f[a+320>>2];g=+X(+(L*L+A*A+g*g))*3.5999999046325684;f[e+112>>2]=g;T=s[e+128>>2]|0;if(+f[a+(T<<2)+4>>2]*+f[a+312>>2]+ +f[a+(T<<2)+20>>2]*+f[a+316>>2]+ +f[a+(T<<2)+36>>2]*+f[a+320>>2]<0)f[e+112>>2]=g*-1;e:do if((o|0)>0){o=0;do{u=s[e+144>>2]|0;m=u+(o*284|0)|0;KE(a,m,0);w=u+(o*284|0)+204|0;T=u+(o*284|0)+212|0;g=+f[w>>2]+ +f[T>>2];p=u+(o*284|0)+52|0;d=u+(o*284|0)+56|0;v=u+(o*284|0)+60|0;O=u+(o*284|0)+36|0;h=u+(o*284|0)+16|0;L=g*+f[d>>2]+ +f[u+(o*284|0)+40>>2];A=g*+f[v>>2]+ +f[u+(o*284|0)+44>>2];f[u+(o*284|0)+16>>2]=+f[p>>2]*g+ +f[O>>2];l=u+(o*284|0)+20|0;f[l>>2]=L;a=u+(o*284|0)+24|0;f[a>>2]=A;f[u+(o*284|0)+28>>2]=0;f[n+64>>2]=-1;x=s[e+100>>2]|0;O=yD[s[(s[x>>2]|0)+8>>2]&31](x,O,h,n+32|0)|0;x=u+(o*284|0)+88|0;s[x>>2]=0;do if((O|0)!=0){g=g*+f[n+64>>2];s[m+0>>2]=s[n+48>>2];s[m+4>>2]=s[n+52>>2];s[m+8>>2]=s[n+56>>2];s[m+12>>2]=s[n+60>>2];r[u+(o*284|0)+84>>0]=1;if((r[3736]|0)==0?(Zt(3736)|0)!=0:0){s[n+88>>2]=0;s[n+92>>2]=0;s[n+96>>2]=0;s[n+100>>2]=0;aS(3120,0,0,0,n+88|0);sn(3736)}s[n+72>>2]=0;s[n+76>>2]=0;s[n+80>>2]=0;s[n+84>>2]=0;fS(3120,0,n+72|0);s[x>>2]=3120;b=g- +f[T>>2];x=u+(o*284|0)+32|0;f[x>>2]=b;g=+f[w>>2];y=+f[u+(o*284|0)+208>>2]*.009999999776482582;if(b<g-y){f[x>>2]=g-y;b=g-y}if(b>g+y)f[x>>2]=g+y;s[h+0>>2]=s[n+32>>2];s[h+4>>2]=s[n+36>>2];s[h+8>>2]=s[n+40>>2];s[h+12>>2]=s[n+44>>2];y=+f[m>>2];g=+f[u+(o*284|0)+4>>2];b=+f[u+(o*284|0)+8>>2];E=y*+f[p>>2]+g*+f[d>>2]+b*+f[v>>2];p=s[i>>2]|0;S=+f[h>>2]- +f[p+52>>2];N=+f[l>>2]- +f[p+56>>2];L=+f[a>>2]- +f[p+60>>2];A=+f[p+332>>2];C=+f[p+336>>2];k=+f[p+328>>2];if(!(E>=-.10000000149011612)){f[u+(o*284|0)+272>>2]=-1/E*(g*(S*C-L*k+ +f[p+316>>2])+y*(A*L-N*C+ +f[p+312>>2])+b*(N*k-S*A+ +f[p+320>>2]));f[u+(o*284|0)+268>>2]=-1/E;break}else{f[u+(o*284|0)+272>>2]=0;f[u+(o*284|0)+268>>2]=10;break}}else{f[u+(o*284|0)+32>>2]=+f[w>>2];f[u+(o*284|0)+272>>2]=0;L=-+f[d>>2];A=-+f[v>>2];f[m>>2]=-+f[p>>2];f[u+(o*284|0)+4>>2]=L;f[u+(o*284|0)+8>>2]=A;f[u+(o*284|0)+12>>2]=0;f[u+(o*284|0)+268>>2]=1}while(0);o=o+1|0;u=s[e+136>>2]|0;a=s[i>>2]|0}while((o|0)<(u|0));g=1/+f[a+344>>2];if((u|0)>0){h=s[e+144>>2]|0;l=0;do{if((r[h+(l*284|0)+84>>0]|0)!=0){A=+f[h+(l*284|0)+272>>2];A=g*(+f[h+(l*284|0)+216>>2]*(+f[h+(l*284|0)+204>>2]- +f[h+(l*284|0)+32>>2])*+f[h+(l*284|0)+268>>2]-A*+f[(A<0?h+(l*284|0)+220|0:h+(l*284|0)+224|0)>>2]);o=h+(l*284|0)+276|0;f[o>>2]=A;if(A<0)f[o>>2]=0}else f[h+(l*284|0)+276>>2]=0;l=l+1|0}while((l|0)<(u|0));o=0;while(1){k=+f[h+(o*284|0)+276>>2];A=+f[h+(o*284|0)+248>>2];k=k>A?A:k;A=k*+f[h+(o*284|0)+4>>2]*t;L=k*+f[h+(o*284|0)+8>>2]*t;f[n+16>>2]=+f[h+(o*284|0)>>2]*k*t;f[n+20>>2]=A;f[n+24>>2]=L;f[n+28>>2]=0;L=+f[h+(o*284|0)+20>>2]- +f[a+56>>2];A=+f[h+(o*284|0)+24>>2]- +f[a+60>>2];f[n>>2]=+f[h+(o*284|0)+16>>2]- +f[a+52>>2];f[n+4>>2]=L;f[n+8>>2]=A;f[n+12>>2]=0;Ph(a,n+16|0,n);o=o+1|0;if((o|0)>=(s[e+136>>2]|0))break e;h=s[e+144>>2]|0;a=s[i>>2]|0}}}while(0);fD[s[(s[e>>2]|0)+20>>2]&31](e,t);o=s[e+136>>2]|0;if((o|0)<=0){c=n;return}u=s[e+144>>2]|0;i=s[i>>2]|0;a=0;do{b=+f[u+(a*284|0)+36>>2]- +f[i+52>>2];y=+f[u+(a*284|0)+40>>2]- +f[i+56>>2];S=+f[u+(a*284|0)+44>>2]- +f[i+60>>2];g=+f[i+332>>2];E=+f[i+336>>2];N=+f[i+328>>2];if((r[u+(a*284|0)+84>>0]|0)==0){g=+f[u+(a*284|0)+240>>2];O=u+(a*284|0)+236|0;f[O>>2]=g+ +f[O>>2]}else{O=s[e+128>>2]|0;_=+f[i+(O<<2)+4>>2];C=+f[i+(O<<2)+20>>2];L=+f[i+(O<<2)+36>>2];M=+f[u+(a*284|0)>>2];k=+f[u+(a*284|0)+4>>2];A=+f[u+(a*284|0)+8>>2];g=((y*N-b*g+ +f[i+320>>2])*(L-A*(_*M+C*k+L*A))+((g*S-y*E+ +f[i+312>>2])*(_-M*(_*M+C*k+L*A))+(b*E-S*N+ +f[i+316>>2])*(C-k*(_*M+C*k+L*A))))*t/+f[u+(a*284|0)+212>>2];f[u+(a*284|0)+240>>2]=g;O=u+(a*284|0)+236|0;f[O>>2]=g+ +f[O>>2]}f[u+(a*284|0)+240>>2]=g*.9900000095367432;a=a+1|0}while((a|0)<(o|0));c=n;return}function YE(e,t){e=e|0;t=+t;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0;n=c;c=c+384|0;u=s[e+136>>2]|0;if((u|0)==0){c=n;return}a=s[e+8>>2]|0;if((a|0)<(u|0)){if((s[e+12>>2]|0)<(u|0)){s[5004]=(s[5004]|0)+1;l=cM((u<<4|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}h=s[e+8>>2]|0;if((h|0)>0){p=0;do{y=l+(p<<4)|0;m=(s[e+16>>2]|0)+(p<<4)|0;s[y+0>>2]=s[m+0>>2];s[y+4>>2]=s[m+4>>2];s[y+8>>2]=s[m+8>>2];s[y+12>>2]=s[m+12>>2];p=p+1|0}while((p|0)!=(h|0))}h=s[e+16>>2]|0;if((h|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=l;s[e+12>>2]=u;l=e+16|0}else l=e+16|0;do{y=(s[l>>2]|0)+(a<<4)|0;s[y+0>>2]=s[n+144>>2];s[y+4>>2]=s[n+148>>2];s[y+8>>2]=s[n+152>>2];s[y+12>>2]=s[n+156>>2];a=a+1|0}while((a|0)!=(u|0))}s[e+8>>2]=u;a=s[e+28>>2]|0;if((a|0)<(u|0)){if((s[e+32>>2]|0)<(u|0)){s[5004]=(s[5004]|0)+1;l=cM((u<<4|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}p=s[e+28>>2]|0;if((p|0)>0){h=0;do{y=l+(h<<4)|0;m=(s[e+36>>2]|0)+(h<<4)|0;s[y+0>>2]=s[m+0>>2];s[y+4>>2]=s[m+4>>2];s[y+8>>2]=s[m+8>>2];s[y+12>>2]=s[m+12>>2];h=h+1|0}while((h|0)!=(p|0))}h=s[e+36>>2]|0;if((h|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=l;s[e+32>>2]=u;l=e+36|0}else l=e+36|0;do{y=(s[l>>2]|0)+(a<<4)|0;s[y+0>>2]=s[n+128>>2];s[y+4>>2]=s[n+132>>2];s[y+8>>2]=s[n+136>>2];s[y+12>>2]=s[n+140>>2];a=a+1|0}while((a|0)!=(u|0))}s[e+28>>2]=u;a=s[e+48>>2]|0;if((a|0)<(u|0)){if((s[e+52>>2]|0)<(u|0)){s[5004]=(s[5004]|0)+1;l=cM((u<<2|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}h=s[e+48>>2]|0;if((h|0)>0){p=0;do{d=l+(p<<2)|0;if((d|0)!=0)f[d>>2]=+f[(s[e+56>>2]|0)+(p<<2)>>2];p=p+1|0}while((p|0)!=(h|0))}h=s[e+56>>2]|0;if((h|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=l;s[e+52>>2]=u}else l=s[e+56>>2]|0;do{h=l+(a<<2)|0;if((h|0)!=0)f[h>>2]=0;a=a+1|0}while((a|0)!=(u|0))}s[e+48>>2]=u;a=s[e+68>>2]|0;if((a|0)<(u|0)){if((s[e+72>>2]|0)<(u|0)){s[5004]=(s[5004]|0)+1;l=cM((u<<2|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}p=s[e+68>>2]|0;if((p|0)>0){h=0;do{d=l+(h<<2)|0;if((d|0)!=0)f[d>>2]=+f[(s[e+76>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(p|0))}h=s[e+76>>2]|0;if((h|0)!=0){if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+76>>2]=0}r[e+80>>0]=1;s[e+76>>2]=l;s[e+72>>2]=u}else l=s[e+76>>2]|0;do{h=l+(a<<2)|0;if((h|0)!=0)f[h>>2]=0;a=a+1|0}while((a|0)!=(u|0))}s[e+68>>2]=u;h=s[e+136>>2]|0;if((h|0)<=0){c=n;return}a=s[e+76>>2]|0;l=s[e+56>>2]|0;u=0;do{f[a+(u<<2)>>2]=0;f[l+(u<<2)>>2]=0;u=u+1|0}while((u|0)<(h|0));u=0;do{a=s[e+144>>2]|0;l=s[a+(u*284|0)+88>>2]|0;if((l|0)!=0){h=a+(u*284|0)+92|0;s[n+80>>2]=s[h+0>>2];s[n+84>>2]=s[h+4>>2];s[n+88>>2]=s[h+8>>2];s[n+92>>2]=s[h+12>>2];h=a+(u*284|0)+108|0;s[n+96>>2]=s[h+0>>2];s[n+100>>2]=s[h+4>>2];s[n+104>>2]=s[h+8>>2];s[n+108>>2]=s[h+12>>2];h=a+(u*284|0)+124|0;s[n+112>>2]=s[h+0>>2];s[n+116>>2]=s[h+4>>2];s[n+120>>2]=s[h+8>>2];s[n+124>>2]=s[h+12>>2];h=s[e+36>>2]|0;T=s[e+120>>2]|0;v=+f[n+80+(T<<2)+16>>2];N=+f[n+80+(T<<2)+32>>2];f[h+(u<<4)>>2]=+f[n+80+(T<<2)>>2];f[h+(u<<4)+4>>2]=v;f[h+(u<<4)+8>>2]=N;f[h+(u<<4)+12>>2]=0;h=s[e+36>>2]|0;T=h+(u<<4)|0;N=+f[T>>2];p=a+(u*284|0)|0;v=+f[p>>2];d=h+(u<<4)+4|0;x=+f[d>>2];y=a+(u*284|0)+4|0;g=+f[y>>2];h=h+(u<<4)+8|0;w=+f[h>>2];m=a+(u*284|0)+8|0;S=+f[m>>2];b=N-v*(N*v+x*g+w*S);E=x-g*(N*v+x*g+w*S);S=w-S*(N*v+x*g+w*S);w=1/+X(+(b*b+E*E+S*S));f[T>>2]=b*w;f[d>>2]=E*w;f[h>>2]=S*w;h=s[e+16>>2]|0;g=+f[y>>2];x=+f[m>>2];v=+f[p>>2];f[h+(u<<4)>>2]=g*S*w-x*E*w;f[h+(u<<4)+4>>2]=x*b*w-S*w*v;f[h+(u<<4)+8>>2]=E*w*v-g*b*w;f[h+(u<<4)+12>>2]=0;h=s[e+16>>2]|0;p=h+(u<<4)|0;w=+f[p>>2];m=h+(u<<4)+4|0;b=+f[m>>2];h=h+(u<<4)+8|0;g=+f[h>>2];v=1/+X(+(w*w+b*b+g*g));f[p>>2]=w*v;f[m>>2]=b*v;f[h>>2]=g*v;h=s[e+116>>2]|0;m=s[e+36>>2]|0;p=m+(u<<4)|0;y=(s[e+76>>2]|0)+(u<<2)|0;v=+f[p>>2];d=m+(u<<4)+4|0;g=+f[d>>2];m=m+(u<<4)+8|0;b=+f[m>>2];if(v*v+g*g+b*b>1.100000023841858)f[y>>2]=0;else{N=+f[a+(u*284|0)+16>>2];g=N- +f[h+52>>2];b=+f[a+(u*284|0)+20>>2];k=b- +f[h+56>>2];x=+f[a+(u*284|0)+24>>2];A=x- +f[h+60>>2];f[n+360>>2]=g;f[n+364>>2]=k;f[n+368>>2]=A;f[n+372>>2]=0;N=N- +f[l+52>>2];b=b- +f[l+56>>2];x=x- +f[l+60>>2];f[n+344>>2]=N;f[n+348>>2]=b;f[n+352>>2]=x;f[n+356>>2]=0;v=+f[h+332>>2];O=+f[h+336>>2];C=+f[h+328>>2];E=+f[l+332>>2];L=+f[l+336>>2];w=+f[l+328>>2];S=v*A-O*k+ +f[h+312>>2]-(E*x-L*b+ +f[l+312>>2]);x=+f[h+316>>2]+(O*g-A*C)-(+f[l+316>>2]+(L*N-x*w));N=k*C-v*g+ +f[h+320>>2]-(b*w-E*N+ +f[l+320>>2]);f[n+208>>2]=+f[h+4>>2];f[n+212>>2]=+f[h+20>>2];f[n+216>>2]=+f[h+36>>2];f[n+220>>2]=0;f[n+224>>2]=+f[h+8>>2];f[n+228>>2]=+f[h+24>>2];f[n+232>>2]=+f[h+40>>2];f[n+236>>2]=0;f[n+240>>2]=+f[h+12>>2];f[n+244>>2]=+f[h+28>>2];f[n+248>>2]=+f[h+44>>2];f[n+252>>2]=0;f[n+160>>2]=+f[l+4>>2];f[n+164>>2]=+f[l+20>>2];f[n+168>>2]=+f[l+36>>2];f[n+172>>2]=0;f[n+176>>2]=+f[l+8>>2];f[n+180>>2]=+f[l+24>>2];f[n+184>>2]=+f[l+40>>2];f[n+188>>2]=0;f[n+192>>2]=+f[l+12>>2];f[n+196>>2]=+f[l+28>>2];f[n+200>>2]=+f[l+44>>2];f[n+204>>2]=0;Wd(n+256|0,n+208|0,n+160|0,n+360|0,n+344|0,p,h+396|0,+f[h+344>>2],l+396|0,+f[l+344>>2]);f[y>>2]=1/+f[n+336>>2]*(S*+f[p>>2]+x*+f[d>>2]+N*+f[m>>2])*-.20000000298023224}h=s[e+136>>2]|0}u=u+1|0}while((u|0)<(h|0));if((h|0)<=0){c=n;return}d=s[e+144>>2]|0;a=0;u=0;while(1){l=s[d+(u*284|0)+88>>2]|0;if((l|0)!=0){v=+f[d+(u*284|0)+252>>2];if(v!=0){l=s[e+56>>2]|0;m=l+(u<<2)|0;f[m>>2]=0;p=d+(u*284|0)+280|0;f[p>>2]=1;h=d;g=v*t}else{O=+f[d+(u*284|0)+256>>2];O=O!=0?O:0;h=s[e+116>>2]|0;m=s[e+16>>2]|0;x=+f[d+(u*284|0)+16>>2];E=+f[d+(u*284|0)+20>>2];M=+f[d+(u*284|0)+24>>2];D=+f[m+(u<<4)>>2];w=+f[m+(u<<4)+4>>2];g=+f[m+(u<<4)+8>>2];q=x- +f[h+52>>2];R=E- +f[h+56>>2];F=M- +f[h+60>>2];j=+f[h+264>>2]*(R*g-F*w)+ +f[h+280>>2]*(F*D-q*g)+(q*w-R*D)*+f[h+296>>2];U=(R*g-F*w)*+f[h+268>>2]+(F*D-q*g)*+f[h+284>>2]+(q*w-R*D)*+f[h+300>>2];I=(R*g-F*w)*+f[h+272>>2]+(F*D-q*g)*+f[h+288>>2]+(q*w-R*D)*+f[h+304>>2];L=x- +f[l+52>>2];C=E- +f[l+56>>2];b=M- +f[l+60>>2];P=(w*L-D*C)*+f[l+296>>2]+(+f[l+264>>2]*(g*C-w*b)+ +f[l+280>>2]*(D*b-g*L));B=(g*C-w*b)*+f[l+268>>2]+(D*b-g*L)*+f[l+284>>2]+(w*L-D*C)*+f[l+300>>2];H=(g*C-w*b)*+f[l+272>>2]+(D*b-g*L)*+f[l+288>>2]+(w*L-D*C)*+f[l+304>>2];x=x- +f[h+52>>2];E=E- +f[h+56>>2];M=M- +f[h+60>>2];N=+f[h+332>>2];_=+f[h+336>>2];S=+f[h+328>>2];A=+f[l+332>>2];v=+f[l+336>>2];k=+f[l+328>>2];g=-(1/(+f[h+344>>2]+(g*(R*j-q*U)+(D*(F*U-R*I)+w*(q*I-F*j)))+(+f[l+344>>2]+(g*(C*P-L*B)+(D*(b*B-C*H)+w*(L*H-b*P)))))*((M*N-E*_+ +f[h+312>>2]-(b*A-C*v+ +f[l+312>>2]))*D+(+f[h+316>>2]+(x*_-M*S)-(+f[l+316>>2]+(L*v-b*k)))*w+(E*S-x*N+ +f[h+320>>2]-(C*k-L*A+ +f[l+320>>2]))*g));g=O<g?O:g;h=s[e+144>>2]|0;l=s[e+56>>2]|0;m=l+(u<<2)|0;f[m>>2]=0;p=h+(u*284|0)+280|0;f[p>>2]=1;g=g<-O?-O:g}f[p>>2]=1;v=+f[d+(u*284|0)+276>>2]*t*+f[d+(u*284|0)+228>>2];f[m>>2]=g;g=g*.5;b=+f[(s[e+76>>2]|0)+(u<<2)>>2];if(g*g+b*b>v*v){U=v/+X(+(g*g+b*b));f[p>>2]=U*+f[p>>2];a=1}}else{l=s[e+56>>2]|0;f[l+(u<<2)>>2]=0;f[d+(u*284|0)+280>>2]=1;h=d}u=u+1|0;p=s[e+136>>2]|0;if((u|0)>=(p|0))break;else d=h}if(a){if((p|0)<=0){c=n;return}u=s[e+76>>2]|0;a=0;do{d=u+(a<<2)|0;if(+f[d>>2]!=0?(i=h+(a*284|0)+280|0,o=+f[i>>2],o<1):0){T=l+(a<<2)|0;f[T>>2]=o*+f[T>>2];f[d>>2]=+f[i>>2]*+f[d>>2]}a=a+1|0}while((a|0)<(p|0))}if((p|0)<=0){c=n;return}p=0;while(1){d=s[e+116>>2]|0;a=h+(p*284|0)+16|0;i=h+(p*284|0)+20|0;U=+f[i>>2]- +f[d+56>>2];u=h+(p*284|0)+24|0;o=+f[u>>2]- +f[d+60>>2];f[n+64>>2]=+f[a>>2]- +f[d+52>>2];f[n+68>>2]=U;f[n+72>>2]=o;f[n+76>>2]=0;o=+f[l+(p<<2)>>2];if(o!=0){T=s[e+16>>2]|0;R=o*+f[T+(p<<4)+4>>2];U=o*+f[T+(p<<4)+8>>2];f[n+48>>2]=o*+f[T+(p<<4)>>2];f[n+52>>2]=R;f[n+56>>2]=U;f[n+60>>2]=0;Ph(d,n+48|0,n+64|0)}o=+f[(s[e+76>>2]|0)+(p<<2)>>2];if(o!=0){T=s[(s[e+144>>2]|0)+(p*284|0)+88>>2]|0;j=+f[i>>2]- +f[T+56>>2];I=+f[u>>2]- +f[T+60>>2];f[n+32>>2]=+f[a>>2]- +f[T+52>>2];f[n+36>>2]=j;f[n+40>>2]=I;f[n+44>>2]=0;y=s[e+36>>2]|0;I=o*+f[y+(p<<4)+4>>2];j=o*+f[y+(p<<4)+8>>2];f[n+16>>2]=+f[y+(p<<4)>>2]*o;f[n+20>>2]=I;f[n+24>>2]=j;f[n+28>>2]=0;y=s[e+116>>2]|0;m=s[e+124>>2]|0;j=+f[y+(m<<2)+4>>2];I=+f[y+(m<<2)+20>>2];U=+f[y+(m<<2)+36>>2];B=+f[n+64>>2];F=+f[n+68>>2];q=+f[n+72>>2];R=(j*B+I*F+U*q)*(1- +f[h+(p*284|0)+244>>2]);f[n+64>>2]=B-j*R;f[n+68>>2]=F-I*R;f[n+72>>2]=q-U*R;Ph(y,n+16|0,n+64|0);R=-+f[n+20>>2];U=-+f[n+24>>2];f[n>>2]=-+f[n+16>>2];f[n+4>>2]=R;f[n+8>>2]=U;f[n+12>>2]=0;Ph(T,n,n+32|0)}p=p+1|0;if((p|0)>=(s[e+136>>2]|0))break;h=s[e+144>>2]|0;l=s[e+56>>2]|0}c=n;return}function ZE(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0;n=c;c=c+48|0;if((s[e+136>>2]|0)<=0){c=n;return}i=0;do{h=s[e+144>>2]|0;f[n+32>>2]=(r[h+(i*284|0)+84>>0]|0)==0?1:0;f[n+36>>2]=0;f[n+40>>2]=1;f[n+44>>2]=0;l=h+(i*284|0)+140|0;s[n+16>>2]=s[l+0>>2];s[n+20>>2]=s[l+4>>2];s[n+24>>2]=s[l+8>>2];s[n+28>>2]=s[l+12>>2];l=s[e+120>>2]|0;o=s[(s[t>>2]|0)+8>>2]|0;a=+f[h+(i*284|0)+(l<<2)+108>>2]+ +f[n+20>>2];u=+f[h+(i*284|0)+(l<<2)+124>>2]+ +f[n+24>>2];f[n>>2]=+f[h+(i*284|0)+(l<<2)+92>>2]+ +f[n+16>>2];f[n+4>>2]=a;f[n+8>>2]=u;f[n+12>>2]=0;JD[o&127](t,n+16|0,n,n+32|0);JD[s[(s[t>>2]|0)+8>>2]&127](t,n+16|0,(s[e+144>>2]|0)+(i*284|0)+16|0,n+32|0);i=i+1|0}while((i|0)<(s[e+136>>2]|0));c=n;return}function eS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,u=0,a=0,l=0,h=0;o=c;c=c+96|0;f[o+4>>2]=1;s[o+8>>2]=0;i[o+12>>1]=1;i[o+14>>1]=-1;s[o+16>>2]=0;s[o>>2]=336;s[o+20>>2]=s[t+0>>2];s[o+24>>2]=s[t+4>>2];s[o+28>>2]=s[t+8>>2];s[o+32>>2]=s[t+12>>2];s[o+36>>2]=s[n+0>>2];s[o+40>>2]=s[n+4>>2];s[o+44>>2]=s[n+8>>2];s[o+48>>2]=s[n+12>>2];e=s[e+4>>2]|0;JD[s[(s[e>>2]|0)+32>>2]&127](e,t,n,o);n=s[o+8>>2]|0;if((n|0)==0){e=0;c=o;return e|0}if((s[n+236>>2]&2|0)==0){e=0;c=o;return e|0}if((s[n+204>>2]&4|0)!=0){e=0;c=o;return e|0}s[r+0>>2]=s[o+68>>2];s[r+4>>2]=s[o+72>>2];s[r+8>>2]=s[o+76>>2];s[r+12>>2]=s[o+80>>2];s[r+16>>2]=s[o+52>>2];s[r+20>>2]=s[o+56>>2];s[r+24>>2]=s[o+60>>2];s[r+28>>2]=s[o+64>>2];h=+f[r+16>>2];l=+f[r+20>>2];a=+f[r+24>>2];u=1/+X(+(h*h+l*l+a*a));f[r+16>>2]=h*u;f[r+20>>2]=l*u;f[r+24>>2]=a*u;f[r+32>>2]=+f[o+4>>2];e=n;c=o;return e|0}function tS(e,t,n){e=e|0;t=t|0;n=+n;t=c;fD[s[(s[e>>2]|0)+16>>2]&31](e,n);c=t;return}function nS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;s[e+120>>2]=t;s[e+124>>2]=n;s[e+128>>2]=r;return}function rS(e){e=e|0;return}function iS(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function sS(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=3912;n=s[e+496>>2]|0;if((n|0)==0){r[e+500>>0]=1;s[e+496>>2]=0;s[e+488>>2]=0;s[e+492>>2]=0}else{if((r[e+500>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}r[e+500>>0]=1;s[e+496>>2]=0;s[e+488>>2]=0;s[e+492>>2]=0}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function oS(e,t){e=e|0;t=t|0;s[e+260>>2]=(s[e+260>>2]|0)+1;s[e+192>>2]=t;s[e+200>>2]=t;return}function uS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0;n=c;s[e+236>>2]=2;s[e+312>>2]=0;s[e+316>>2]=0;s[e+320>>2]=0;s[e+324>>2]=0;s[e+328>>2]=0;s[e+332>>2]=0;s[e+336>>2]=0;s[e+340>>2]=0;f[e+544>>2]=1;f[e+548>>2]=1;f[e+552>>2]=1;f[e+556>>2]=0;f[e+348>>2]=1;f[e+352>>2]=1;f[e+356>>2]=1;l=e+360|0;a=l+36|0;do{s[l>>2]=0;l=l+4|0}while((l|0)<(a|0));s[e+412>>2]=0;s[e+416>>2]=0;s[e+420>>2]=0;s[e+424>>2]=0;s[e+428>>2]=0;s[e+432>>2]=0;s[e+436>>2]=0;s[e+440>>2]=0;o=+f[t+92>>2];i=+f[t+96>>2];if(o<0)o=0;else o=o>1?1:o;f[e+444>>2]=o;if(i<0)i=0;else i=i>1?1:i;f[e+448>>2]=i;f[e+472>>2]=+f[t+112>>2];f[e+476>>2]=+f[t+116>>2];a=s[t+4>>2]|0;s[e+480>>2]=a;s[e+608>>2]=0;s[e+612>>2]=0;r[e+452>>0]=r[t+120>>0]|0;f[e+456>>2]=+f[t+124>>2];f[e+460>>2]=+f[t+128>>2];f[e+464>>2]=+f[t+132>>2];f[e+468>>2]=+f[t+136>>2];if((a|0)==0){s[e+4>>2]=s[t+8>>2];s[e+8>>2]=s[t+12>>2];s[e+12>>2]=s[t+16>>2];s[e+16>>2]=s[t+20>>2];s[e+20>>2]=s[t+24>>2];s[e+24>>2]=s[t+28>>2];s[e+28>>2]=s[t+32>>2];s[e+32>>2]=s[t+36>>2];s[e+36>>2]=s[t+40>>2];s[e+40>>2]=s[t+44>>2];s[e+44>>2]=s[t+48>>2];s[e+48>>2]=s[t+52>>2];s[e+52>>2]=s[t+56>>2];s[e+56>>2]=s[t+60>>2];s[e+60>>2]=s[t+64>>2];s[e+64>>2]=s[t+68>>2];p=e+52|0;h=e+20|0;a=e+36|0;l=e+4|0}else{hD[s[(s[a>>2]|0)+8>>2]&127](a,e+4|0);p=e+52|0;h=e+20|0;a=e+36|0;l=e+4|0}s[e+68>>2]=s[l+0>>2];s[e+72>>2]=s[l+4>>2];s[e+76>>2]=s[l+8>>2];s[e+80>>2]=s[l+12>>2];s[e+84>>2]=s[h+0>>2];s[e+88>>2]=s[h+4>>2];s[e+92>>2]=s[h+8>>2];s[e+96>>2]=s[h+12>>2];s[e+100>>2]=s[a+0>>2];s[e+104>>2]=s[a+4>>2];s[e+108>>2]=s[a+8>>2];s[e+112>>2]=s[a+12>>2];s[e+116>>2]=s[p+0>>2];s[e+120>>2]=s[p+4>>2];s[e+124>>2]=s[p+8>>2];s[e+128>>2]=s[p+12>>2];s[e+132>>2]=0;s[e+136>>2]=0;s[e+140>>2]=0;s[e+144>>2]=0;s[e+148>>2]=0;s[e+152>>2]=0;s[e+156>>2]=0;s[e+160>>2]=0;f[e+224>>2]=+f[t+100>>2];f[e+232>>2]=+f[t+104>>2];f[e+228>>2]=+f[t+108>>2];hD[s[(s[e>>2]|0)+12>>2]&127](e,s[t+72>>2]|0);a=s[986]|0;s[986]=a+1;s[e+508>>2]=a;o=+f[t>>2];a=s[e+204>>2]|0;if(o==0){s[e+204>>2]=a|1;f[e+344>>2]=0;i=0}else{s[e+204>>2]=a&-2;f[e+344>>2]=1/o;i=1/o}u=o*+f[e+384>>2];d=o*+f[e+388>>2];f[e+364>>2]=o*+f[e+380>>2];f[e+368>>2]=u;f[e+372>>2]=d;f[e+376>>2]=0;o=+f[t+76>>2];if(o!=0)o=1/o;else o=0;u=+f[t+80>>2];if(u!=0)u=1/u;else u=0;d=+f[t+84>>2];if(d!=0)d=1/d;else d=0;f[e+396>>2]=o;f[e+400>>2]=u;f[e+404>>2]=d;f[e+408>>2]=0;A=i*+f[e+352>>2];x=i*+f[e+356>>2];f[e+560>>2]=i*+f[e+348>>2];f[e+564>>2]=A;f[e+568>>2]=x;f[e+572>>2]=0;x=+f[e+4>>2];A=x*o;S=+f[e+8>>2];L=S*u;E=+f[e+12>>2];k=E*d;w=+f[e+20>>2];C=o*w;b=+f[e+24>>2];N=u*b;y=+f[e+28>>2];T=d*y;g=+f[e+36>>2];m=o*g;v=+f[e+40>>2];i=u*v;u=+f[e+44>>2];o=d*u;f[e+264>>2]=x*A+S*L+E*k;f[e+268>>2]=A*w+L*b+k*y;f[e+272>>2]=A*g+L*v+k*u;f[e+276>>2]=0;f[e+280>>2]=x*C+S*N+E*T;f[e+284>>2]=w*C+b*N+y*T;f[e+288>>2]=C*g+N*v+T*u;f[e+292>>2]=0;f[e+296>>2]=x*m+S*i+E*o;f[e+300>>2]=w*m+b*i+y*o;f[e+304>>2]=g*m+v*i+u*o;f[e+308>>2]=0;s[e+504>>2]=0;s[e+512>>2]=0;s[e+516>>2]=0;s[e+520>>2]=0;s[e+524>>2]=0;s[e+528>>2]=0;s[e+532>>2]=0;s[e+536>>2]=0;s[e+540>>2]=0;o=+f[e+344>>2];u=o*+f[e+352>>2];d=o*+f[e+356>>2];f[e+560>>2]=+f[e+348>>2]*o;f[e+564>>2]=u;f[e+568>>2]=d;l=e+572|0;a=l+36|0;do{s[l>>2]=0;l=l+4|0}while((l|0)<(a|0));c=n;return}function aS(e,t,n,i,o){e=e|0;t=+t;n=n|0;i=i|0;o=o|0;var u=0;u=c;c=c+144|0;f[e+164>>2]=1;f[e+168>>2]=1;f[e+172>>2]=1;f[e+176>>2]=0;s[e+180>>2]=0;f[e+184>>2]=0xde0b6b000000000;s[e+188>>2]=0;s[e+192>>2]=0;s[e+196>>2]=0;s[e+200>>2]=0;s[e+204>>2]=1;s[e+208>>2]=-1;s[e+212>>2]=-1;s[e+216>>2]=1;f[e+220>>2]=0;f[e+224>>2]=.5;f[e+228>>2]=0;f[e+232>>2]=0;s[e+236>>2]=1;s[e+240>>2]=0;f[e+244>>2]=1;s[e+248>>2]=0;s[e+252>>2]=0;s[e+256>>2]=0;s[e+260>>2]=0;f[e+4>>2]=1;s[e+8>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;s[e+20>>2]=0;f[e+24>>2]=1;s[e+28>>2]=0;s[e+32>>2]=0;s[e+36>>2]=0;s[e+40>>2]=0;f[e+44>>2]=1;s[e+48>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;s[e+60>>2]=0;s[e+64>>2]=0;s[e>>2]=3912;r[e+500>>0]=1;s[e+496>>2]=0;s[e+488>>2]=0;s[e+492>>2]=0;f[u>>2]=t;s[u+4>>2]=n;s[u+72>>2]=i;s[u+76>>2]=s[o+0>>2];s[u+80>>2]=s[o+4>>2];s[u+84>>2]=s[o+8>>2];s[u+88>>2]=s[o+12>>2];f[u+92>>2]=0;f[u+96>>2]=0;f[u+100>>2]=.5;f[u+104>>2]=0;f[u+108>>2]=0;f[u+112>>2]=.800000011920929;f[u+116>>2]=1;r[u+120>>0]=0;f[u+124>>2]=.004999999888241291;f[u+128>>2]=.009999999776482582;f[u+132>>2]=.009999999776482582;f[u+136>>2]=.009999999776482582;f[u+8>>2]=1;s[u+12>>2]=0;s[u+16>>2]=0;s[u+20>>2]=0;s[u+24>>2]=0;f[u+28>>2]=1;s[u+32>>2]=0;s[u+36>>2]=0;s[u+40>>2]=0;s[u+44>>2]=0;f[u+48>>2]=1;s[u+52>>2]=0;s[u+56>>2]=0;s[u+60>>2]=0;s[u+64>>2]=0;s[u+68>>2]=0;uS(e,u);c=u;return}function fS(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0;u=s[e+204>>2]|0;if(t==0){s[e+204>>2]=u|1;f[e+344>>2]=0;r=0}else{s[e+204>>2]=u&-2;f[e+344>>2]=1/t;r=1/t}i=+f[e+384>>2]*t;o=+f[e+388>>2]*t;f[e+364>>2]=+f[e+380>>2]*t;f[e+368>>2]=i;f[e+372>>2]=o;f[e+376>>2]=0;t=+f[n>>2];if(t!=0)t=1/t;else t=0;i=+f[n+4>>2];if(i!=0)i=1/i;else i=0;o=+f[n+8>>2];if(o!=0)o=1/o;else o=0;f[e+396>>2]=t;f[e+400>>2]=i;f[e+404>>2]=o;f[e+408>>2]=0;i=r*+f[e+352>>2];o=r*+f[e+356>>2];f[e+560>>2]=+f[e+348>>2]*r;f[e+564>>2]=i;f[e+568>>2]=o;f[e+572>>2]=0;return}function lS(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;u=c;if((s[e+204>>2]&2|0)==0){s[e+68>>2]=s[t+0>>2];s[e+72>>2]=s[t+4>>2];s[e+76>>2]=s[t+8>>2];s[e+80>>2]=s[t+12>>2];s[e+84>>2]=s[t+16>>2];s[e+88>>2]=s[t+20>>2];s[e+92>>2]=s[t+24>>2];s[e+96>>2]=s[t+28>>2];s[e+100>>2]=s[t+32>>2];s[e+104>>2]=s[t+36>>2];s[e+108>>2]=s[t+40>>2];s[e+112>>2]=s[t+44>>2];s[e+116>>2]=s[t+48>>2];s[e+120>>2]=s[t+52>>2];s[e+124>>2]=s[t+56>>2];s[e+128>>2]=s[t+60>>2];l=e+20|0;h=t+16|0;n=e+36|0;a=t+32|0;i=e+52|0;o=t+48|0;r=e+4|0}else{s[e+68>>2]=s[e+4>>2];s[e+72>>2]=s[e+8>>2];s[e+76>>2]=s[e+12>>2];s[e+80>>2]=s[e+16>>2];s[e+84>>2]=s[e+20>>2];s[e+88>>2]=s[e+24>>2];s[e+92>>2]=s[e+28>>2];s[e+96>>2]=s[e+32>>2];s[e+100>>2]=s[e+36>>2];s[e+104>>2]=s[e+40>>2];s[e+108>>2]=s[e+44>>2];s[e+112>>2]=s[e+48>>2];s[e+116>>2]=s[e+52>>2];s[e+120>>2]=s[e+56>>2];s[e+124>>2]=s[e+60>>2];s[e+128>>2]=s[e+64>>2];l=e+20|0;h=t+16|0;n=e+36|0;a=t+32|0;i=e+52|0;o=t+48|0;r=e+4|0}s[e+132>>2]=s[e+312>>2];s[e+136>>2]=s[e+316>>2];s[e+140>>2]=s[e+320>>2];s[e+144>>2]=s[e+324>>2];s[e+148>>2]=s[e+328>>2];s[e+152>>2]=s[e+332>>2];s[e+156>>2]=s[e+336>>2];s[e+160>>2]=s[e+340>>2];s[r+0>>2]=s[t+0>>2];s[r+4>>2]=s[t+4>>2];s[r+8>>2]=s[t+8>>2];s[r+12>>2]=s[t+12>>2];s[l+0>>2]=s[h+0>>2];s[l+4>>2]=s[h+4>>2];s[l+8>>2]=s[h+8>>2];s[l+12>>2]=s[h+12>>2];s[n+0>>2]=s[a+0>>2];s[n+4>>2]=s[a+4>>2];s[n+8>>2]=s[a+8>>2];s[n+12>>2]=s[a+12>>2];s[i+0>>2]=s[o+0>>2];s[i+4>>2]=s[o+4>>2];s[i+8>>2]=s[o+8>>2];s[i+12>>2]=s[o+12>>2];T=+f[e+4>>2];y=+f[e+396>>2];x=+f[e+8>>2];m=+f[e+400>>2];S=+f[e+12>>2];d=+f[e+404>>2];E=+f[e+20>>2];w=+f[e+24>>2];b=+f[e+28>>2];g=+f[e+36>>2];v=+f[e+40>>2];p=+f[e+44>>2];f[e+264>>2]=T*T*y+x*x*m+S*S*d;f[e+268>>2]=T*y*E+x*m*w+S*d*b;f[e+272>>2]=T*y*g+x*m*v+S*d*p;f[e+276>>2]=0;f[e+280>>2]=T*y*E+x*m*w+S*d*b;f[e+284>>2]=E*y*E+w*m*w+b*d*b;f[e+288>>2]=y*E*g+m*w*v+d*b*p;f[e+292>>2]=0;f[e+296>>2]=T*y*g+x*m*v+S*d*p;f[e+300>>2]=E*y*g+w*m*v+b*d*p;f[e+304>>2]=g*y*g+v*m*v+p*d*p;f[e+308>>2]=0;c=u;return}function cS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0;n=c;e:do if((s[t+236>>2]&2|0)!=0?(i=s[e+488>>2]|0,(i|0)>0):0){e=s[e+496>>2]|0;o=0;while(1){u=s[e+(o<<2)>>2]|0;if((r[u+20>>0]|0)!=0){if((s[u+28>>2]|0)==(t|0)){t=0;break e}if((s[u+32>>2]|0)==(t|0)){t=0;break e}}o=o+1|0;if((o|0)>=(i|0)){t=1;break}}}else t=1;while(0);c=n;return t|0}function hS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;u=s[e+488>>2]|0;e:do if((u|0)>0){a=s[e+496>>2]|0;o=0;while(1){f=o+1|0;if((s[a+(o<<2)>>2]|0)==(t|0))break;if((f|0)<(u|0))o=f;else break e}if((o|0)!=(u|0)){f=e+256|0;s[f>>2]=1;c=n;return}}while(0);if((u|0)==(s[e+492>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[e+488>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+496>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[e+496>>2]|0;if((a|0)!=0){if((r[e+500>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[e+488>>2]|0}s[e+496>>2]=0}r[e+500>>0]=1;s[e+496>>2]=o;s[e+492>>2]=i}i=(s[e+496>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=t;s[e+488>>2]=u+1;f=e+256|0;s[f>>2]=1;c=n;return}function pS(e){e=e|0;return 488}function dS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;$g(e,t,n)|0;f[t+256>>2]=+f[e+264>>2];f[t+260>>2]=+f[e+268>>2];f[t+264>>2]=+f[e+272>>2];f[t+268>>2]=+f[e+276>>2];f[t+272>>2]=+f[e+280>>2];f[t+276>>2]=+f[e+284>>2];f[t+280>>2]=+f[e+288>>2];f[t+284>>2]=+f[e+292>>2];f[t+288>>2]=+f[e+296>>2];f[t+292>>2]=+f[e+300>>2];f[t+296>>2]=+f[e+304>>2];f[t+300>>2]=+f[e+308>>2];f[t+304>>2]=+f[e+312>>2];f[t+308>>2]=+f[e+316>>2];f[t+312>>2]=+f[e+320>>2];f[t+316>>2]=+f[e+324>>2];f[t+320>>2]=+f[e+328>>2];f[t+324>>2]=+f[e+332>>2];f[t+328>>2]=+f[e+336>>2];f[t+332>>2]=+f[e+340>>2];f[t+448>>2]=+f[e+344>>2];f[t+336>>2]=+f[e+544>>2];f[t+340>>2]=+f[e+548>>2];f[t+344>>2]=+f[e+552>>2];f[t+348>>2]=+f[e+556>>2];f[t+352>>2]=+f[e+348>>2];f[t+356>>2]=+f[e+352>>2];f[t+360>>2]=+f[e+356>>2];f[t+364>>2]=+f[e+360>>2];f[t+368>>2]=+f[e+364>>2];f[t+372>>2]=+f[e+368>>2];f[t+376>>2]=+f[e+372>>2];f[t+380>>2]=+f[e+376>>2];f[t+384>>2]=+f[e+380>>2];f[t+388>>2]=+f[e+384>>2];f[t+392>>2]=+f[e+388>>2];f[t+396>>2]=+f[e+392>>2];f[t+400>>2]=+f[e+396>>2];f[t+404>>2]=+f[e+400>>2];f[t+408>>2]=+f[e+404>>2];f[t+412>>2]=+f[e+408>>2];f[t+416>>2]=+f[e+412>>2];f[t+420>>2]=+f[e+416>>2];f[t+424>>2]=+f[e+420>>2];f[t+428>>2]=+f[e+424>>2];f[t+432>>2]=+f[e+428>>2];f[t+436>>2]=+f[e+432>>2];f[t+440>>2]=+f[e+436>>2];f[t+444>>2]=+f[e+440>>2];f[t+452>>2]=+f[e+444>>2];f[t+456>>2]=+f[e+448>>2];s[t+484>>2]=o[e+452>>0];f[t+460>>2]=+f[e+456>>2];f[t+464>>2]=+f[e+460>>2];f[t+468>>2]=+f[e+464>>2];f[t+472>>2]=+f[e+468>>2];f[t+476>>2]=+f[e+472>>2];f[t+480>>2]=+f[e+476>>2];c=r;return 3952}function vS(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=c;r=s[(s[t>>2]|0)+16>>2]|0;i=dD[s[(s[e>>2]|0)+16>>2]&127](e)|0;i=xD[r&31](t,i,1)|0;r=xD[s[(s[e>>2]|0)+20>>2]&31](e,s[i+8>>2]|0,t)|0;aD[s[(s[t>>2]|0)+20>>2]&31](t,i,r,1497645650,e);c=n;return}function mS(e){e=e|0;var t=0;t=c;gS(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function gS(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=4024;n=s[e+176>>2]|0;if((n|0)!=0){if((r[e+180>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+176>>2]=0}r[e+180>>0]=1;s[e+176>>2]=0;s[e+168>>2]=0;s[e+172>>2]=0;n=s[e+156>>2]|0;if((n|0)!=0){if((r[e+160>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+156>>2]=0}r[e+160>>0]=1;s[e+156>>2]=0;s[e+148>>2]=0;s[e+152>>2]=0;n=s[e+136>>2]|0;if((n|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;n=s[e+116>>2]|0;if((n|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=0;s[e+108>>2]=0;s[e+112>>2]=0;n=s[e+96>>2]|0;if((n|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;n=s[e+76>>2]|0;if((n|0)!=0){if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+76>>2]=0}r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;s[e+72>>2]=0;n=s[e+56>>2]|0;if((n|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;n=s[e+36>>2]|0;if((n|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}function yS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0;u=c;a=+f[n+100>>2];o=+f[n+16>>2];r=+f[n+20>>2];i=+f[n+24>>2];l=+f[n+108>>2];l=+f[n+112>>2]-a*+f[n+116>>2]-(o*+f[e+64>>2]+r*+f[e+68>>2]+i*+f[e+72>>2]+(+f[n>>2]*+f[e+80>>2]+ +f[n+4>>2]*+f[e+84>>2]+ +f[n+8>>2]*+f[e+88>>2]))*l-l*(+f[n+48>>2]*+f[t+64>>2]+ +f[n+52>>2]*+f[t+68>>2]+ +f[n+56>>2]*+f[t+72>>2]+(+f[n+32>>2]*+f[t+80>>2]+ +f[n+36>>2]*+f[t+84>>2]+ +f[n+40>>2]*+f[t+88>>2]));h=+f[n+120>>2];do if(!(a+l<h)){h=+f[n+124>>2];if(a+l>h){f[n+100>>2]=h;l=h-a;break}else{f[n+100>>2]=a+l;break}}else{f[n+100>>2]=h;l=h-a}while(0);if((s[e+240>>2]|0)!=0){h=l*+f[e+132>>2]*r*+f[e+116>>2];a=l*+f[e+136>>2]*i*+f[e+120>>2];f[e+64>>2]=+f[e+112>>2]*l*+f[e+128>>2]*o+ +f[e+64>>2];f[e+68>>2]=h+ +f[e+68>>2];f[e+72>>2]=a+ +f[e+72>>2];a=l*+f[e+100>>2]*+f[n+68>>2];h=l*+f[e+104>>2]*+f[n+72>>2];f[e+80>>2]=l*+f[e+96>>2]*+f[n+64>>2]+ +f[e+80>>2];f[e+84>>2]=a+ +f[e+84>>2];f[e+88>>2]=h+ +f[e+88>>2]}if((s[t+240>>2]|0)==0){c=u;return}h=l*+f[t+132>>2]*+f[n+52>>2]*+f[t+116>>2];a=l*+f[t+136>>2]*+f[n+56>>2]*+f[t+120>>2];f[t+64>>2]=+f[t+112>>2]*l*+f[t+128>>2]*+f[n+48>>2]+ +f[t+64>>2];f[t+68>>2]=h+ +f[t+68>>2];f[t+72>>2]=a+ +f[t+72>>2];a=l*+f[t+100>>2]*+f[n+84>>2];h=l*+f[t+104>>2]*+f[n+88>>2];f[t+80>>2]=l*+f[t+96>>2]*+f[n+80>>2]+ +f[t+80>>2];f[t+84>>2]=a+ +f[t+84>>2];f[t+88>>2]=h+ +f[t+88>>2];c=u;return}function bS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;u=c;h=+f[n+100>>2];o=+f[n+16>>2];r=+f[n+20>>2];i=+f[n+24>>2];p=+f[n+108>>2];p=+f[n+112>>2]-h*+f[n+116>>2]-(o*+f[e+64>>2]+r*+f[e+68>>2]+i*+f[e+72>>2]+(+f[n>>2]*+f[e+80>>2]+ +f[n+4>>2]*+f[e+84>>2]+ +f[n+8>>2]*+f[e+88>>2]))*p-p*(+f[n+48>>2]*+f[t+64>>2]+ +f[n+52>>2]*+f[t+68>>2]+ +f[n+56>>2]*+f[t+72>>2]+(+f[n+32>>2]*+f[t+80>>2]+ +f[n+36>>2]*+f[t+84>>2]+ +f[n+40>>2]*+f[t+88>>2]));l=+f[n+120>>2];if(h+p<l)a=l-h;else{a=p;l=h+p}f[n+100>>2]=l;if((s[e+240>>2]|0)!=0){p=a*+f[e+132>>2]*r*+f[e+116>>2];h=a*+f[e+136>>2]*i*+f[e+120>>2];f[e+64>>2]=+f[e+112>>2]*a*+f[e+128>>2]*o+ +f[e+64>>2];f[e+68>>2]=p+ +f[e+68>>2];f[e+72>>2]=h+ +f[e+72>>2];h=a*+f[e+100>>2]*+f[n+68>>2];p=a*+f[e+104>>2]*+f[n+72>>2];f[e+80>>2]=a*+f[e+96>>2]*+f[n+64>>2]+ +f[e+80>>2];f[e+84>>2]=h+ +f[e+84>>2];f[e+88>>2]=p+ +f[e+88>>2]}if((s[t+240>>2]|0)==0){c=u;return}p=a*+f[t+132>>2]*+f[n+52>>2]*+f[t+116>>2];h=a*+f[t+136>>2]*+f[n+56>>2]*+f[t+120>>2];f[t+64>>2]=+f[t+112>>2]*a*+f[t+128>>2]*+f[n+48>>2]+ +f[t+64>>2];f[t+68>>2]=p+ +f[t+68>>2];f[t+72>>2]=h+ +f[t+72>>2];h=a*+f[t+100>>2]*+f[n+84>>2];p=a*+f[t+104>>2]*+f[n+88>>2];f[t+80>>2]=a*+f[t+96>>2]*+f[n+80>>2]+ +f[t+80>>2];f[t+84>>2]=h+ +f[t+84>>2];f[t+88>>2]=p+ +f[t+88>>2];c=u;return}function wS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0;u=c;l=+f[n+128>>2];if(!(l!=0)){c=u;return}s[1002]=(s[1002]|0)+1;a=+f[n+96>>2];i=+f[n+16>>2];o=+f[n+20>>2];r=+f[n+24>>2];p=+f[n+108>>2];p=l-a*+f[n+116>>2]-(i*+f[e+144>>2]+o*+f[e+148>>2]+r*+f[e+152>>2]+(+f[n>>2]*+f[e+160>>2]+ +f[n+4>>2]*+f[e+164>>2]+ +f[n+8>>2]*+f[e+168>>2]))*p-p*(+f[n+48>>2]*+f[t+144>>2]+ +f[n+52>>2]*+f[t+148>>2]+ +f[n+56>>2]*+f[t+152>>2]+(+f[n+32>>2]*+f[t+160>>2]+ +f[n+36>>2]*+f[t+164>>2]+ +f[n+40>>2]*+f[t+168>>2]));h=+f[n+120>>2];if(a+p<h)l=h-a;else{l=p;h=a+p}f[n+96>>2]=h;if((s[e+240>>2]|0)!=0){p=l*+f[e+132>>2]*o*+f[e+116>>2];h=l*+f[e+136>>2]*r*+f[e+120>>2];f[e+144>>2]=+f[e+112>>2]*l*+f[e+128>>2]*i+ +f[e+144>>2];f[e+148>>2]=p+ +f[e+148>>2];f[e+152>>2]=h+ +f[e+152>>2];h=l*+f[e+100>>2]*+f[n+68>>2];p=l*+f[e+104>>2]*+f[n+72>>2];f[e+160>>2]=l*+f[e+96>>2]*+f[n+64>>2]+ +f[e+160>>2];f[e+164>>2]=h+ +f[e+164>>2];f[e+168>>2]=p+ +f[e+168>>2]}if((s[t+240>>2]|0)==0){c=u;return}p=l*+f[t+132>>2]*+f[n+52>>2]*+f[t+116>>2];h=l*+f[t+136>>2]*+f[n+56>>2]*+f[t+120>>2];f[t+144>>2]=+f[t+112>>2]*l*+f[t+128>>2]*+f[n+48>>2]+ +f[t+144>>2];f[t+148>>2]=p+ +f[t+148>>2];f[t+152>>2]=h+ +f[t+152>>2];h=l*+f[t+100>>2]*+f[n+84>>2];p=l*+f[t+104>>2]*+f[n+88>>2];f[t+160>>2]=l*+f[t+96>>2]*+f[n+80>>2]+ +f[t+160>>2];f[t+164>>2]=h+ +f[t+164>>2];f[t+168>>2]=p+ +f[t+168>>2];c=u;return}function ES(e,t,n){e=e|0;t=t|0;n=+n;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;r=c;if(!((t|0)!=0?(s[t+236>>2]&2|0)!=0:0))t=0;i=(t|0)==0;s[e+64>>2]=0;s[e+68>>2]=0;s[e+72>>2]=0;s[e+76>>2]=0;s[e+80>>2]=0;s[e+84>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;s[e+144>>2]=0;s[e+148>>2]=0;s[e+152>>2]=0;s[e+156>>2]=0;s[e+160>>2]=0;s[e+164>>2]=0;s[e+168>>2]=0;s[e+172>>2]=0;if(i){f[e>>2]=1;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;f[e+20>>2]=1;s[e+24>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;s[e+36>>2]=0;f[e+40>>2]=1;s[e+44>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;s[e+60>>2]=0;s[e+240>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;s[e+136>>2]=0;s[e+140>>2]=0;f[e+96>>2]=1;f[e+100>>2]=1;f[e+104>>2]=1;f[e+108>>2]=0;f[e+112>>2]=1;f[e+116>>2]=1;f[e+120>>2]=1;f[e+124>>2]=0;t=e+176|0;e=t+64|0;do{s[t>>2]=0;t=t+4|0}while((t|0)<(e|0));c=r;return}else{i=t+4|0;s[e+0>>2]=s[i+0>>2];s[e+4>>2]=s[i+4>>2];s[e+8>>2]=s[i+8>>2];s[e+12>>2]=s[i+12>>2];i=t+20|0;s[e+16>>2]=s[i+0>>2];s[e+20>>2]=s[i+4>>2];s[e+24>>2]=s[i+8>>2];s[e+28>>2]=s[i+12>>2];i=t+36|0;s[e+32>>2]=s[i+0>>2];s[e+36>>2]=s[i+4>>2];s[e+40>>2]=s[i+8>>2];s[e+44>>2]=s[i+12>>2];i=t+52|0;s[e+48>>2]=s[i+0>>2];s[e+52>>2]=s[i+4>>2];s[e+56>>2]=s[i+8>>2];s[e+60>>2]=s[i+12>>2];i=t+344|0;h=+f[i>>2];p=t+348|0;l=h*+f[t+352>>2];a=h*+f[t+356>>2];f[e+128>>2]=h*+f[p>>2];f[e+132>>2]=l;f[e+136>>2]=a;f[e+140>>2]=0;s[e+240>>2]=t;d=t+544|0;s[e+96>>2]=s[d+0>>2];s[e+100>>2]=s[d+4>>2];s[e+104>>2]=s[d+8>>2];s[e+108>>2]=s[d+12>>2];s[e+112>>2]=s[p+0>>2];s[e+116>>2]=s[p+4>>2];s[e+120>>2]=s[p+8>>2];s[e+124>>2]=s[p+12>>2];p=t+312|0;s[e+176>>2]=s[p+0>>2];s[e+180>>2]=s[p+4>>2];s[e+184>>2]=s[p+8>>2];s[e+188>>2]=s[p+12>>2];p=t+328|0;s[e+192>>2]=s[p+0>>2];s[e+196>>2]=s[p+4>>2];s[e+200>>2]=s[p+8>>2];s[e+204>>2]=s[p+12>>2];a=+f[i>>2];l=a*+f[t+416>>2]*n;h=a*+f[t+420>>2]*n;f[e+208>>2]=a*+f[t+412>>2]*n;f[e+212>>2]=l;f[e+216>>2]=h;f[e+220>>2]=0;h=+f[t+428>>2];l=+f[t+432>>2];a=+f[t+436>>2];u=(h*+f[t+268>>2]+l*+f[t+284>>2]+a*+f[t+300>>2])*n;o=(h*+f[t+272>>2]+l*+f[t+288>>2]+a*+f[t+304>>2])*n;f[e+224>>2]=(+f[t+264>>2]*h+ +f[t+280>>2]*l+ +f[t+296>>2]*a)*n;f[e+228>>2]=u;f[e+232>>2]=o;f[e+236>>2]=0;c=r;return}}function SS(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0;n=c;if((e|0)==0){c=n;return}if((s[e+180>>2]&1|0)==0){c=n;return}g=+f[e+4>>2];b=+f[t>>2];d=+f[e+20>>2];y=+f[t+4>>2];l=+f[e+36>>2];r=+f[t+8>>2];m=+f[e+8>>2];p=+f[e+24>>2];u=+f[e+40>>2];v=+f[e+12>>2];h=+f[e+28>>2];i=+f[e+44>>2];a=(g*b+d*y+l*r)*+f[e+164>>2];o=(b*m+y*p+r*u)*+f[e+168>>2];r=(b*v+y*h+r*i)*+f[e+172>>2];f[t>>2]=g*a+m*o+v*r;f[t+4>>2]=d*a+p*o+h*r;f[t+8>>2]=l*a+u*o+i*r;f[t+12>>2]=0;c=n;return}function xS(e,t,n,i,o,u,a,l,h,p,d){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=+h;p=+p;d=+d;var v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0;m=c;v=s[e+68>>2]|0;if((v|0)==(s[e+72>>2]|0)?(g=(v|0)==0?1:v<<1,(v|0)<(g|0)):0){if((g|0)==0){x=0;M=v}else{s[5004]=(s[5004]|0)+1;x=cM((g*152|3)+16|0)|0;if((x|0)==0)x=0;else{s[(x+19&-16)+ -4>>2]=x;x=x+19&-16}M=s[e+68>>2]|0}if((M|0)>0){O=0;do{yM(x+(O*152|0)|0,(s[e+76>>2]|0)+(O*152|0)|0,152)|0;O=O+1|0}while((O|0)!=(M|0))}O=s[e+76>>2]|0;if((O|0)!=0){if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[O+ -4>>2]|0)}s[e+76>>2]=0}r[e+80>>0]=1;s[e+76>>2]=x;s[e+72>>2]=g;g=s[e+68>>2]|0}else g=v;s[e+68>>2]=g+1;g=s[e+76>>2]|0;s[g+(v*152|0)+140>>2]=o;o=s[e+16>>2]|0;x=s[o+(n*244|0)+240>>2]|0;e=s[o+(i*244|0)+240>>2]|0;s[g+(v*152|0)+144>>2]=n;s[g+(v*152|0)+148>>2]=i;E=+f[u+84>>2];f[g+(v*152|0)+104>>2]=E;s[g+(v*152|0)+132>>2]=0;f[g+(v*152|0)+100>>2]=0;f[g+(v*152|0)+96>>2]=0;if((x|0)!=0){s[g+(v*152|0)+16>>2]=s[t+0>>2];s[g+(v*152|0)+20>>2]=s[t+4>>2];s[g+(v*152|0)+24>>2]=s[t+8>>2];s[g+(v*152|0)+28>>2]=s[t+12>>2];k=+f[a+4>>2];L=+f[g+(v*152|0)+24>>2];A=+f[a+8>>2];S=+f[g+(v*152|0)+20>>2];T=+f[g+(v*152|0)+16>>2];w=+f[a>>2];f[g+(v*152|0)>>2]=k*L-A*S;f[g+(v*152|0)+4>>2]=A*T-L*w;f[g+(v*152|0)+8>>2]=S*w-k*T;f[g+(v*152|0)+12>>2]=0;N=((k*L-A*S)*+f[x+280>>2]+(A*T-L*w)*+f[x+284>>2]+(S*w-k*T)*+f[x+288>>2])*+f[x+548>>2];C=((k*L-A*S)*+f[x+296>>2]+(A*T-L*w)*+f[x+300>>2]+(S*w-k*T)*+f[x+304>>2])*+f[x+552>>2];f[g+(v*152|0)+64>>2]=((k*L-A*S)*+f[x+264>>2]+ +f[x+268>>2]*(A*T-L*w)+(S*w-k*T)*+f[x+272>>2])*+f[x+544>>2];f[g+(v*152|0)+68>>2]=N;f[g+(v*152|0)+72>>2]=C;f[g+(v*152|0)+76>>2]=0;S=k*L-A*S}else{s[g+(v*152|0)+64>>2]=0;s[g+(v*152|0)+68>>2]=0;s[g+(v*152|0)+72>>2]=0;s[g+(v*152|0)+76>>2]=0;s[g+(v*152|0)+0>>2]=0;s[g+(v*152|0)+4>>2]=0;s[g+(v*152|0)+8>>2]=0;s[g+(v*152|0)+12>>2]=0;s[g+(v*152|0)+16>>2]=0;s[g+(v*152|0)+20>>2]=0;s[g+(v*152|0)+24>>2]=0;s[g+(v*152|0)+28>>2]=0;S=0}if((e|0)!=0){w=-+f[t>>2];L=-+f[t+4>>2];y=-+f[t+8>>2];f[g+(v*152|0)+48>>2]=w;f[g+(v*152|0)+52>>2]=L;f[g+(v*152|0)+56>>2]=y;f[g+(v*152|0)+60>>2]=0;A=+f[l+4>>2];_=+f[l+8>>2];C=+f[l>>2];f[g+(v*152|0)+32>>2]=A*y-_*L;f[g+(v*152|0)+36>>2]=_*w-C*y;f[g+(v*152|0)+40>>2]=C*L-A*w;f[g+(v*152|0)+44>>2]=0;k=((A*y-_*L)*+f[e+264>>2]+ +f[e+268>>2]*(_*w-C*y)+(C*L-A*w)*+f[e+272>>2])*+f[e+544>>2];N=((A*y-_*L)*+f[e+280>>2]+(_*w-C*y)*+f[e+284>>2]+(C*L-A*w)*+f[e+288>>2])*+f[e+548>>2];T=((A*y-_*L)*+f[e+296>>2]+(_*w-C*y)*+f[e+300>>2]+(C*L-A*w)*+f[e+304>>2])*+f[e+552>>2];f[g+(v*152|0)+80>>2]=k;f[g+(v*152|0)+84>>2]=N;f[g+(v*152|0)+88>>2]=T;f[g+(v*152|0)+92>>2]=0;b=A*y-_*L;y=_*w-C*y;w=C*L-A*w}else{s[g+(v*152|0)+80>>2]=0;s[g+(v*152|0)+84>>2]=0;s[g+(v*152|0)+88>>2]=0;s[g+(v*152|0)+92>>2]=0;s[g+(v*152|0)+32>>2]=0;s[g+(v*152|0)+36>>2]=0;s[g+(v*152|0)+40>>2]=0;s[g+(v*152|0)+44>>2]=0;s[g+(v*152|0)+48>>2]=0;s[g+(v*152|0)+52>>2]=0;s[g+(v*152|0)+56>>2]=0;s[g+(v*152|0)+60>>2]=0;k=0;N=0;T=0;b=0;y=0;w=0}if((x|0)!=0){_=+f[g+(v*152|0)+68>>2];D=+f[a+8>>2];P=+f[g+(v*152|0)+72>>2];L=+f[a+4>>2];C=+f[a>>2];A=+f[g+(v*152|0)+64>>2];C=+f[x+344>>2]+((_*D-P*L)*+f[t>>2]+(P*C-D*A)*+f[t+4>>2]+(L*A-_*C)*+f[t+8>>2])}else C=0;if((e|0)!=0){D=-k;P=-N;L=-T;A=+f[l+8>>2];_=+f[l+4>>2];T=+f[l>>2];T=+f[e+344>>2]+((A*P-_*L)*+f[t>>2]+(T*L-A*D)*+f[t+4>>2]+(_*D-T*P)*+f[t+8>>2])}else T=0;h=h/(C+T);f[g+(v*152|0)+108>>2]=h;if((x|0)!=0){N=+f[o+(n*244|0)+176>>2]+ +f[o+(n*244|0)+208>>2];T=+f[o+(n*244|0)+180>>2]+ +f[o+(n*244|0)+212>>2];C=+f[o+(n*244|0)+184>>2]+ +f[o+(n*244|0)+216>>2]}else{N=0;T=0;C=0}if((x|0)!=0){k=+f[o+(n*244|0)+192>>2];L=+f[o+(n*244|0)+196>>2];A=+f[o+(n*244|0)+200>>2]}else{k=0;L=0;A=0}S=N*+f[g+(v*152|0)+16>>2]+T*+f[g+(v*152|0)+20>>2]+C*+f[g+(v*152|0)+24>>2]+(k*S+L*+f[g+(v*152|0)+4>>2]+A*+f[g+(v*152|0)+8>>2]);if((e|0)!=0){T=+f[o+(i*244|0)+176>>2]+ +f[o+(i*244|0)+208>>2];C=+f[o+(i*244|0)+180>>2]+ +f[o+(i*244|0)+212>>2];N=+f[o+(i*244|0)+184>>2]+ +f[o+(i*244|0)+216>>2]}else{T=0;C=0;N=0}T=T*+f[g+(v*152|0)+48>>2]+C*+f[g+(v*152|0)+52>>2]+N*+f[g+(v*152|0)+56>>2];if((e|0)==0){_=0;D=0;P=0;_=_*b;D=D*y;D=_+D;P=P*w;P=D+P;P=T+P;P=S+P;P=p-P;P=h*P;M=g+(v*152|0)+112|0;f[M>>2]=P;M=g+(v*152|0)+116|0;f[M>>2]=d;P=-E;M=g+(v*152|0)+120|0;f[M>>2]=P;M=g+(v*152|0)+124|0;f[M>>2]=E;c=m;return}_=+f[o+(i*244|0)+192>>2];D=+f[o+(i*244|0)+196>>2];P=+f[o+(i*244|0)+200>>2];_=_*b;D=D*y;D=_+D;P=P*w;P=D+P;P=T+P;P=S+P;P=p-P;P=h*P;M=g+(v*152|0)+112|0;f[M>>2]=P;M=g+(v*152|0)+116|0;f[M>>2]=d;P=-E;M=g+(v*152|0)+120|0;f[M>>2]=P;M=g+(v*152|0)+124|0;f[M>>2]=E;c=m;return}function TS(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0;l=c;a=s[e+88>>2]|0;if((a|0)==(s[e+92>>2]|0)?(h=(a|0)==0?1:a<<1,(a|0)<(h|0)):0){if((h|0)==0){w=0;k=a}else{s[5004]=(s[5004]|0)+1;w=cM((h*152|3)+16|0)|0;if((w|0)==0)w=0;else{s[(w+19&-16)+ -4>>2]=w;w=w+19&-16}k=s[e+88>>2]|0}if((k|0)>0){L=0;do{yM(w+(L*152|0)|0,(s[e+96>>2]|0)+(L*152|0)|0,152)|0;L=L+1|0}while((L|0)!=(k|0))}k=s[e+96>>2]|0;if((k|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[k+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=w;s[e+92>>2]=h;h=s[e+88>>2]|0}else h=a;s[e+88>>2]=h+1;h=s[e+96>>2]|0;s[h+(a*152|0)+140>>2]=o;s[h+(a*152|0)+16>>2]=0;s[h+(a*152|0)+20>>2]=0;s[h+(a*152|0)+24>>2]=0;s[h+(a*152|0)+28>>2]=0;f[h+(a*152|0)+48>>2]=-0;f[h+(a*152|0)+52>>2]=-0;f[h+(a*152|0)+56>>2]=-0;f[h+(a*152|0)+60>>2]=0;e=s[e+16>>2]|0;w=s[e+(n*244|0)+240>>2]|0;o=s[e+(i*244|0)+240>>2]|0;s[h+(a*152|0)+144>>2]=n;s[h+(a*152|0)+148>>2]=i;p=+f[u+88>>2];f[h+(a*152|0)+104>>2]=p;s[h+(a*152|0)+132>>2]=0;f[h+(a*152|0)+100>>2]=0;f[h+(a*152|0)+96>>2]=0;d=-+f[t>>2];v=-+f[t+4>>2];m=-+f[t+8>>2];f[h+(a*152|0)>>2]=d;f[h+(a*152|0)+4>>2]=v;f[h+(a*152|0)+8>>2]=m;f[h+(a*152|0)+12>>2]=0;if((w|0)!=0){y=(+f[w+264>>2]*d+ +f[w+268>>2]*v+ +f[w+272>>2]*m)*+f[w+544>>2];g=(+f[w+280>>2]*d+ +f[w+284>>2]*v+ +f[w+288>>2]*m)*+f[w+548>>2];b=(+f[w+296>>2]*d+ +f[w+300>>2]*v+ +f[w+304>>2]*m)*+f[w+552>>2]}else{y=0;g=0;b=0}f[h+(a*152|0)+64>>2]=y;f[h+(a*152|0)+68>>2]=g;f[h+(a*152|0)+72>>2]=b;f[h+(a*152|0)+76>>2]=0;b=+f[t>>2];y=+f[t+4>>2];g=+f[t+8>>2];C=+f[t+12>>2];f[h+(a*152|0)+32>>2]=b;f[h+(a*152|0)+36>>2]=y;f[h+(a*152|0)+40>>2]=g;f[h+(a*152|0)+44>>2]=C;if((o|0)!=0){S=(b*+f[o+264>>2]+y*+f[o+268>>2]+g*+f[o+272>>2])*+f[o+544>>2];E=(b*+f[o+280>>2]+y*+f[o+284>>2]+g*+f[o+288>>2])*+f[o+548>>2];x=(b*+f[o+296>>2]+y*+f[o+300>>2]+g*+f[o+304>>2])*+f[o+552>>2]}else{S=0;E=0;x=0}f[h+(a*152|0)+80>>2]=S;f[h+(a*152|0)+84>>2]=E;f[h+(a*152|0)+88>>2]=x;f[h+(a*152|0)+92>>2]=0;if((w|0)!=0){C=+f[w+264>>2]*d+ +f[w+268>>2]*v+ +f[w+272>>2]*m;N=+f[w+280>>2]*d+ +f[w+284>>2]*v+ +f[w+288>>2]*m;S=+f[w+296>>2]*d+ +f[w+300>>2]*v+ +f[w+304>>2]*m}else{C=0;N=0;S=0}if((o|0)!=0){E=+f[o+264>>2]*b+ +f[o+268>>2]*y+ +f[o+272>>2]*g;T=b*+f[o+280>>2]+y*+f[o+284>>2]+g*+f[o+288>>2];x=b*+f[o+296>>2]+y*+f[o+300>>2]+g*+f[o+304>>2]}else{E=0;T=0;x=0}E=1/(C*d+N*v+S*m+0+(E*b+T*y+x*g));f[h+(a*152|0)+108>>2]=E;if((w|0)!=0){T=+f[e+(n*244|0)+192>>2];x=+f[e+(n*244|0)+196>>2];S=+f[e+(n*244|0)+200>>2];N=(+f[e+(n*244|0)+176>>2]+ +f[e+(n*244|0)+208>>2])*0+(+f[e+(n*244|0)+180>>2]+ +f[e+(n*244|0)+212>>2])*0+(+f[e+(n*244|0)+184>>2]+ +f[e+(n*244|0)+216>>2])*0}else{T=0;x=0;S=0;N=0}d=N+(T*d+x*v+S*m);if((o|0)==0){x=0;T=0;C=0;N=-0;x=x*b;T=T*y;T=x+T;C=C*g;C=T+C;C=N+C;C=d+C;C=0-C;C=E*C;L=h+(a*152|0)+112|0;f[L>>2]=C;L=h+(a*152|0)+116|0;f[L>>2]=0;C=-p;L=h+(a*152|0)+120|0;f[L>>2]=C;L=h+(a*152|0)+124|0;f[L>>2]=p;c=l;return}x=+f[e+(i*244|0)+192>>2];T=+f[e+(i*244|0)+196>>2];C=+f[e+(i*244|0)+200>>2];N=(+f[e+(i*244|0)+176>>2]+ +f[e+(i*244|0)+208>>2])*-0+(+f[e+(i*244|0)+180>>2]+ +f[e+(i*244|0)+212>>2])*-0+(+f[e+(i*244|0)+184>>2]+ +f[e+(i*244|0)+216>>2])*-0;x=x*b;T=T*y;T=x+T;C=C*g;C=T+C;C=N+C;C=d+C;C=0-C;C=E*C;L=h+(a*152|0)+112|0;f[L>>2]=C;L=h+(a*152|0)+116|0;f[L>>2]=0;C=-p;L=h+(a*152|0)+120|0;f[L>>2]=C;L=h+(a*152|0)+124|0;f[L>>2]=p;c=l;return}function NS(e,t,n){e=e|0;t=t|0;n=+n;var r=0,i=0;r=c;c=c+496|0;i=s[t+212>>2]|0;if((i|0)>-1){t=i;c=r;return t|0}do if((s[t+236>>2]&2|0)!=0){if(!(+f[t+344>>2]!=0)?(s[t+204>>2]&2|0)==0:0)break;i=s[e+8>>2]|0;vM(r+244|0,0,244)|0;ES(CS(e+4|0,r+244|0)|0,t,n);s[t+212>>2]=i;t=i;c=r;return t|0}while(0);i=s[e+188>>2]|0;if((i|0)>=0){t=i;c=r;return t|0}s[e+188>>2]=s[e+8>>2];vM(r|0,0,244)|0;ES(CS(e+4|0,r)|0,0,n);t=s[e+188>>2]|0;c=r;return t|0}function CS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;n=c;i=s[e+4>>2]|0;if((i|0)==(s[e+8>>2]|0)?(o=(i|0)==0?1:i<<1,(i|0)<(o|0)):0){if((o|0)==0){u=0;a=i}else{s[5004]=(s[5004]|0)+1;u=cM((o*244|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+4>>2]|0}if((a|0)>0){f=0;do{h=u+(f*244|0)|0;l=s[e+12>>2]|0;p=l+(f*244|0)|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2];s[h+12>>2]=s[p+12>>2];h=u+(f*244|0)+16|0;p=l+(f*244|0)+16|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2];s[h+12>>2]=s[p+12>>2];h=u+(f*244|0)+32|0;p=l+(f*244|0)+32|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2];s[h+12>>2]=s[p+12>>2];h=u+(f*244|0)+48|0;p=l+(f*244|0)+48|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2];s[h+12>>2]=s[p+12>>2];yM(u+(f*244|0)+64|0,l+(f*244|0)+64|0,180)|0;f=f+1|0}while((f|0)!=(a|0))}a=s[e+12>>2]|0;if((a|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=u;s[e+8>>2]=o;o=s[e+4>>2]|0}else o=i;s[e+4>>2]=o+1;p=s[e+12>>2]|0;s[p+(i*244|0)+0>>2]=s[t+0>>2];s[p+(i*244|0)+4>>2]=s[t+4>>2];s[p+(i*244|0)+8>>2]=s[t+8>>2];s[p+(i*244|0)+12>>2]=s[t+12>>2];s[p+(i*244|0)+16>>2]=s[t+16>>2];s[p+(i*244|0)+20>>2]=s[t+20>>2];s[p+(i*244|0)+24>>2]=s[t+24>>2];s[p+(i*244|0)+28>>2]=s[t+28>>2];s[p+(i*244|0)+32>>2]=s[t+32>>2];s[p+(i*244|0)+36>>2]=s[t+36>>2];s[p+(i*244|0)+40>>2]=s[t+40>>2];s[p+(i*244|0)+44>>2]=s[t+44>>2];s[p+(i*244|0)+48>>2]=s[t+48>>2];s[p+(i*244|0)+52>>2]=s[t+52>>2];s[p+(i*244|0)+56>>2]=s[t+56>>2];s[p+(i*244|0)+60>>2]=s[t+60>>2];yM(p+(i*244|0)+64|0,t+64|0,180)|0;c=n;return(s[e+12>>2]|0)+(i*244|0)|0}function kS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0;g=c;c=c+80|0;if((n|0)<=0){c=g;return}a=0;do{l=s[t+(a<<2)>>2]|0;o=s[l+740>>2]|0;m=s[l+744>>2]|0;h=NS(e,o,+f[i+12>>2])|0;p=NS(e,m,+f[i+12>>2])|0;d=s[e+16>>2]|0;do if((d+(h*244|0)|0)!=0){if((+f[d+(h*244|0)+128>>2]==0?+f[d+(h*244|0)+132>>2]==0:0)?+f[d+(h*244|0)+136>>2]==0:0){if((d+(p*244|0)|0)==0)break;if((+f[d+(p*244|0)+128>>2]==0?+f[d+(p*244|0)+132>>2]==0:0)?+f[d+(p*244|0)+136>>2]==0:0)break}b=s[l+748>>2]|0;if((b|0)>0){y=0;M=1;do{w=l+(y*184|0)+4|0;B=l+(y*184|0)+84|0;if(+f[B>>2]<=+f[l+756>>2]){b=s[e+28>>2]|0;if((b|0)==(s[e+32>>2]|0)?(v=(b|0)==0?1:b<<1,(b|0)<(v|0)):0){if((v|0)==0){E=0;T=b}else{s[5004]=(s[5004]|0)+1;E=cM((v*152|3)+16|0)|0;if((E|0)==0)E=0;else{s[(E+19&-16)+ -4>>2]=E;E=E+19&-16}T=s[e+28>>2]|0}if((T|0)>0){x=0;do{yM(E+(x*152|0)|0,(s[e+36>>2]|0)+(x*152|0)|0,152)|0;x=x+1|0}while((x|0)!=(T|0))}x=s[e+36>>2]|0;if((x|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=E;s[e+32>>2]=v;E=s[e+28>>2]|0}else E=b;s[e+28>>2]=E+1;E=s[e+36>>2]|0;D=(s[o+236>>2]&2|0)==0?0:o;_=(s[m+236>>2]&2|0)==0?0:m;s[E+(b*152|0)+144>>2]=h;s[E+(b*152|0)+148>>2]=p;s[E+(b*152|0)+132>>2]=w;U=+f[l+(y*184|0)+52>>2]- +f[o+52>>2];z=+f[l+(y*184|0)+56>>2]- +f[o+56>>2];V=+f[l+(y*184|0)+60>>2]- +f[o+60>>2];f[g+64>>2]=U;f[g+68>>2]=z;f[g+72>>2]=V;f[g+76>>2]=0;j=+f[l+(y*184|0)+36>>2]- +f[m+52>>2];F=+f[l+(y*184|0)+40>>2]- +f[m+56>>2];I=+f[l+(y*184|0)+44>>2]- +f[m+60>>2];f[g+48>>2]=j;f[g+52>>2]=F;f[g+56>>2]=I;f[g+60>>2]=0;if((s[d+(h*244|0)+240>>2]|0)==0){S=0;A=0;L=0}else{et=+f[d+(h*244|0)+192>>2]+ +f[d+(h*244|0)+224>>2];L=+f[d+(h*244|0)+196>>2]+ +f[d+(h*244|0)+228>>2];A=+f[d+(h*244|0)+200>>2]+ +f[d+(h*244|0)+232>>2];S=+f[d+(h*244|0)+176>>2]+ +f[d+(h*244|0)+208>>2]+(L*V-A*z);A=+f[d+(h*244|0)+180>>2]+ +f[d+(h*244|0)+212>>2]+(A*U-et*V);L=+f[d+(h*244|0)+184>>2]+ +f[d+(h*244|0)+216>>2]+(et*z-L*U)}if((s[d+(p*244|0)+240>>2]|0)==0){O=0;C=0;k=0}else{et=+f[d+(p*244|0)+192>>2]+ +f[d+(p*244|0)+224>>2];k=+f[d+(p*244|0)+196>>2]+ +f[d+(p*244|0)+228>>2];C=+f[d+(p*244|0)+200>>2]+ +f[d+(p*244|0)+232>>2];O=+f[d+(p*244|0)+176>>2]+ +f[d+(p*244|0)+208>>2]+(k*I-C*F);C=+f[d+(p*244|0)+180>>2]+ +f[d+(p*244|0)+212>>2]+(C*j-et*I);k=+f[d+(p*244|0)+184>>2]+ +f[d+(p*244|0)+216>>2]+(et*F-k*j)}S=S-O;C=A-C;A=L-k;T=l+(y*184|0)+68|0;L=+f[T>>2];N=l+(y*184|0)+72|0;k=+f[N>>2];x=l+(y*184|0)+76|0;O=+f[x>>2];P=s[e+16>>2]|0;R=s[P+(h*244|0)+240>>2]|0;q=s[P+(p*244|0)+240>>2]|0;if((R|0)!=0){Y=((z*O-V*k)*+f[R+264>>2]+(V*L-O*U)*+f[R+268>>2]+(k*U-z*L)*+f[R+272>>2])*+f[R+544>>2];et=((z*O-V*k)*+f[R+280>>2]+(V*L-O*U)*+f[R+284>>2]+(k*U-z*L)*+f[R+288>>2])*+f[R+548>>2];Z=((z*O-V*k)*+f[R+296>>2]+(V*L-O*U)*+f[R+300>>2]+(k*U-z*L)*+f[R+304>>2])*+f[R+552>>2]}else{Y=0;et=0;Z=0}f[E+(b*152|0)+64>>2]=Y;f[E+(b*152|0)+68>>2]=et;f[E+(b*152|0)+72>>2]=Z;f[E+(b*152|0)+76>>2]=0;J=+f[x>>2];$=+f[N>>2];H=+f[T>>2];if((q|0)!=0){K=(+f[q+264>>2]*-(F*J-I*$)+ +f[q+268>>2]*-(I*H-J*j)+ +f[q+272>>2]*-($*j-F*H))*+f[q+544>>2];Q=(+f[q+280>>2]*-(F*J-I*$)+ +f[q+284>>2]*-(I*H-J*j)+ +f[q+288>>2]*-($*j-F*H))*+f[q+548>>2];G=(+f[q+296>>2]*-(F*J-I*$)+ +f[q+300>>2]*-(I*H-J*j)+ +f[q+304>>2]*-($*j-F*H))*+f[q+552>>2]}else{K=0;Q=0;G=0}f[E+(b*152|0)+80>>2]=K;f[E+(b*152|0)+84>>2]=Q;f[E+(b*152|0)+88>>2]=G;f[E+(b*152|0)+92>>2]=0;if((R|0)!=0)Y=+f[R+344>>2]+((et*V-Z*z)*+f[T>>2]+(Z*U-V*Y)*+f[N>>2]+(z*Y-et*U)*+f[x>>2]);else Y=0;if((q|0)!=0){et=-K;K=-Q;Z=-G;K=+f[q+344>>2]+((I*K-F*Z)*+f[T>>2]+(j*Z-I*et)*+f[N>>2]+(F*et-j*K)*+f[x>>2])}else K=0;f[E+(b*152|0)+108>>2]=1/(Y+K);if((R|0)!=0){s[E+(b*152|0)+16>>2]=s[T+0>>2];s[E+(b*152|0)+20>>2]=s[T+4>>2];s[E+(b*152|0)+24>>2]=s[T+8>>2];s[E+(b*152|0)+28>>2]=s[T+12>>2];f[E+(b*152|0)>>2]=z*O-V*k;f[E+(b*152|0)+4>>2]=V*L-O*U;f[E+(b*152|0)+8>>2]=k*U-z*L;f[E+(b*152|0)+12>>2]=0}else{s[E+(b*152|0)+0>>2]=0;s[E+(b*152|0)+4>>2]=0;s[E+(b*152|0)+8>>2]=0;s[E+(b*152|0)+12>>2]=0;s[E+(b*152|0)+16>>2]=0;s[E+(b*152|0)+20>>2]=0;s[E+(b*152|0)+24>>2]=0;s[E+(b*152|0)+28>>2]=0}if((q|0)!=0){Z=-+f[N>>2];et=-+f[x>>2];f[E+(b*152|0)+48>>2]=-+f[T>>2];f[E+(b*152|0)+52>>2]=Z;f[E+(b*152|0)+56>>2]=et;f[E+(b*152|0)+60>>2]=0;f[E+(b*152|0)+32>>2]=-(F*J-I*$);f[E+(b*152|0)+36>>2]=-(I*H-J*j);f[E+(b*152|0)+40>>2]=-($*j-F*H);f[E+(b*152|0)+44>>2]=0}else{s[E+(b*152|0)+32>>2]=0;s[E+(b*152|0)+36>>2]=0;s[E+(b*152|0)+40>>2]=0;s[E+(b*152|0)+44>>2]=0;s[E+(b*152|0)+48>>2]=0;s[E+(b*152|0)+52>>2]=0;s[E+(b*152|0)+56>>2]=0;s[E+(b*152|0)+60>>2]=0}H=+f[B>>2]+ +f[i+56>>2];if((R|0)!=0){et=+f[R+332>>2];Y=+f[R+336>>2];Z=+f[R+328>>2];$=et*V-Y*z+ +f[R+312>>2];V=+f[R+316>>2]+(Y*U-V*Z);z=z*Z-et*U+ +f[R+320>>2]}else{$=0;V=0;z=0}if((q|0)!=0){et=+f[q+332>>2];Y=+f[q+336>>2];Z=+f[q+328>>2];U=et*I-Y*F+ +f[q+312>>2];I=+f[q+316>>2]+(Y*j-I*Z);j=F*Z-et*j+ +f[q+320>>2]}else{U=0;I=0;j=0}j=+f[T>>2]*($-U)+(V-I)*+f[N>>2]+(z-j)*+f[x>>2];f[E+(b*152|0)+104>>2]=+f[l+(y*184|0)+88>>2];j=j*+f[l+(y*184|0)+96>>2];j=!(j>=-0)?-j:0;do if((s[i+64>>2]&4|0)==0)f[E+(b*152|0)+100>>2]=0;else{F=+f[l+(y*184|0)+124>>2]*+f[i+60>>2];f[E+(b*152|0)+100>>2]=F;do if((R|0)!=0){if((s[P+(h*244|0)+240>>2]|0)==0)break;et=F*+f[P+(h*244|0)+132>>2]*+f[E+(b*152|0)+20>>2]*+f[R+352>>2]*+f[P+(h*244|0)+116>>2];Z=F*+f[P+(h*244|0)+136>>2]*+f[E+(b*152|0)+24>>2]*+f[R+356>>2]*+f[P+(h*244|0)+120>>2];f[P+(h*244|0)+64>>2]=+f[P+(h*244|0)+112>>2]*F*+f[P+(h*244|0)+128>>2]*+f[E+(b*152|0)+16>>2]*+f[R+348>>2]+ +f[P+(h*244|0)+64>>2];f[P+(h*244|0)+68>>2]=et+ +f[P+(h*244|0)+68>>2];f[P+(h*244|0)+72>>2]=Z+ +f[P+(h*244|0)+72>>2];Z=F*+f[P+(h*244|0)+100>>2]*+f[E+(b*152|0)+68>>2];et=F*+f[P+(h*244|0)+104>>2]*+f[E+(b*152|0)+72>>2];f[P+(h*244|0)+80>>2]=F*+f[P+(h*244|0)+96>>2]*+f[E+(b*152|0)+64>>2]+ +f[P+(h*244|0)+80>>2];f[P+(h*244|0)+84>>2]=Z+ +f[P+(h*244|0)+84>>2];f[P+(h*244|0)+88>>2]=et+ +f[P+(h*244|0)+88>>2]}while(0);if((q|0)==0)break;F=+f[E+(b*152|0)+100>>2];if((s[P+(p*244|0)+240>>2]|0)==0)break;et=+f[E+(b*152|0)+88>>2];Z=+f[E+(b*152|0)+84>>2];Y=+f[E+(b*152|0)+80>>2];Q=F*+f[P+(p*244|0)+132>>2]*+f[E+(b*152|0)+52>>2]*+f[q+352>>2]*+f[P+(p*244|0)+116>>2];G=F*+f[P+(p*244|0)+136>>2]*+f[E+(b*152|0)+56>>2]*+f[q+356>>2]*+f[P+(p*244|0)+120>>2];f[P+(p*244|0)+64>>2]=+f[P+(p*244|0)+112>>2]*F*+f[P+(p*244|0)+128>>2]*+f[E+(b*152|0)+48>>2]*+f[q+348>>2]+ +f[P+(p*244|0)+64>>2];f[P+(p*244|0)+68>>2]=Q+ +f[P+(p*244|0)+68>>2];f[P+(p*244|0)+72>>2]=G+ +f[P+(p*244|0)+72>>2];Z=Z*+f[P+(p*244|0)+100>>2]*-F;et=et*+f[P+(p*244|0)+104>>2]*-F;f[P+(p*244|0)+80>>2]=+f[P+(p*244|0)+80>>2]-Y*+f[P+(p*244|0)+96>>2]*-F;f[P+(p*244|0)+84>>2]=+f[P+(p*244|0)+84>>2]-Z;f[P+(p*244|0)+88>>2]=+f[P+(p*244|0)+88>>2]-et}while(0);f[E+(b*152|0)+96>>2]=0;if((s[P+(h*244|0)+240>>2]|0)==0){Z=0;Y=0;G=0;F=0;K=0;J=0}else{Z=+f[P+(h*244|0)+208>>2];Y=+f[P+(h*244|0)+212>>2];G=+f[P+(h*244|0)+216>>2];F=+f[P+(h*244|0)+224>>2];K=+f[P+(h*244|0)+228>>2];J=+f[P+(h*244|0)+232>>2]}if((s[P+(p*244|0)+240>>2]|0)==0){U=0;Q=0;I=0;z=0;V=0;$=0}else{U=+f[P+(p*244|0)+208>>2];Q=+f[P+(p*244|0)+212>>2];I=+f[P+(p*244|0)+216>>2];z=+f[P+(p*244|0)+224>>2];V=+f[P+(p*244|0)+228>>2];$=+f[P+(p*244|0)+232>>2]}j=j-((Z+ +f[P+(h*244|0)+176>>2])*+f[E+(b*152|0)+16>>2]+(Y+ +f[P+(h*244|0)+180>>2])*+f[E+(b*152|0)+20>>2]+(G+ +f[P+(h*244|0)+184>>2])*+f[E+(b*152|0)+24>>2]+((F+ +f[P+(h*244|0)+192>>2])*+f[E+(b*152|0)>>2]+(K+ +f[P+(h*244|0)+196>>2])*+f[E+(b*152|0)+4>>2]+(J+ +f[P+(h*244|0)+200>>2])*+f[E+(b*152|0)+8>>2])+((U+ +f[P+(p*244|0)+176>>2])*+f[E+(b*152|0)+48>>2]+(Q+ +f[P+(p*244|0)+180>>2])*+f[E+(b*152|0)+52>>2]+(I+ +f[P+(p*244|0)+184>>2])*+f[E+(b*152|0)+56>>2]+((z+ +f[P+(p*244|0)+192>>2])*+f[E+(b*152|0)+32>>2]+(V+ +f[P+(p*244|0)+196>>2])*+f[E+(b*152|0)+36>>2]+($+ +f[P+(p*244|0)+200>>2])*+f[E+(b*152|0)+40>>2])));P=(s[i+44>>2]|0)==0;if(!P?!(H>+f[i+48>>2]):0)B=i+36|0;else B=i+32|0;if(H>0){F=0;j=j-H/+f[i+12>>2]}else F=-(H*+f[B>>2])/+f[i+12>>2];et=+f[E+(b*152|0)+108>>2];F=F*et;j=j*et;do if(P)u=69;else{if(H>+f[i+48>>2]){u=69;break}f[E+(b*152|0)+112>>2]=j;f[E+(b*152|0)+128>>2]=F}while(0);if((u|0)==69){u=0;f[E+(b*152|0)+112>>2]=F+j;f[E+(b*152|0)+128>>2]=0}f[E+(b*152|0)+116>>2]=0;f[E+(b*152|0)+120>>2]=0;f[E+(b*152|0)+124>>2]=1e10;s[E+(b*152|0)+140>>2]=s[e+68>>2];if((D|0)==0){H=0;F=0;j=0}else{H=+f[D+328>>2];F=+f[D+332>>2];j=+f[D+336>>2]}if((_|0)==0){z=0;U=0;I=0}else{z=+f[_+328>>2];U=+f[_+332>>2];I=+f[_+336>>2]}H=z-H;F=U-F;j=I-j;f[g+32>>2]=H;f[g+36>>2]=F;f[g+40>>2]=j;f[g+44>>2]=0;do if((M|0)>0?+f[l+(y*184|0)+92>>2]>0:0){M=M+ -1|0;U=+X(+(H*H+F*F+j*j));if(U>+f[i+80>>2]){I=H*(1/U);f[g+32>>2]=I;H=F*(1/U);f[g+36>>2]=H;j=j*(1/U);f[g+40>>2]=j;do if((o|0)!=0){if((s[o+180>>2]&2|0)==0)break;U=+f[o+4>>2];$=+f[o+20>>2];Q=+f[o+36>>2];z=+f[o+8>>2];J=+f[o+24>>2];Y=+f[o+40>>2];V=+f[o+12>>2];K=+f[o+28>>2];et=+f[o+44>>2];G=(U*I+$*H+j*Q)*+f[o+164>>2];Z=(I*z+H*J+j*Y)*+f[o+168>>2];j=(I*V+H*K+j*et)*+f[o+172>>2];f[g+32>>2]=U*G+z*Z+V*j;f[g+36>>2]=$*G+J*Z+K*j;f[g+40>>2]=Q*G+Y*Z+et*j;f[g+44>>2]=0;I=U*G+z*Z+V*j;H=$*G+J*Z+K*j;j=Q*G+Y*Z+et*j}while(0);do if((m|0)!=0){if((s[m+180>>2]&2|0)==0)break;U=+f[m+4>>2];$=+f[m+20>>2];Q=+f[m+36>>2];z=+f[m+8>>2];J=+f[m+24>>2];Y=+f[m+40>>2];V=+f[m+12>>2];K=+f[m+28>>2];et=+f[m+44>>2];G=(U*I+$*H+Q*j)*+f[m+164>>2];Z=(I*z+H*J+j*Y)*+f[m+168>>2];j=(I*V+H*K+j*et)*+f[m+172>>2];f[g+32>>2]=U*G+z*Z+V*j;f[g+36>>2]=$*G+J*Z+K*j;f[g+40>>2]=Q*G+Y*Z+et*j;f[g+44>>2]=0;I=U*G+z*Z+V*j;H=$*G+J*Z+K*j;j=Q*G+Y*Z+et*j}while(0);if(!(+X(+(I*I+H*H+j*j))>.001))break;TS(e,g+32|0,h,p,b,w);break}TS(e,T,h,p,b,w);j=+f[x>>2];if(+W(+j)>.7071067690849304){F=+f[N>>2];et=1/+X(+(j*j+F*F));f[g+16>>2]=0;f[g+20>>2]=-(et*j);f[g+24>>2]=et*F;f[g>>2]=(j*j+F*F)*et;Z=+f[T>>2];f[g+4>>2]=-(Z*et*F);H=0;U=-(et*j);z=et*F;I=(j*j+F*F)*et;F=-(Z*et*F);j=Z*-(et*j)}else{Y=+f[T>>2];Z=+f[N>>2];et=1/+X(+(Y*Y+Z*Z));f[g+16>>2]=-(Z*et);f[g+20>>2]=et*Y;f[g+24>>2]=0;f[g>>2]=-(j*et*Y);f[g+4>>2]=j*-(Z*et);H=-(Z*et);U=et*Y;z=0;I=-(j*et*Y);F=j*-(Z*et);j=(Y*Y+Z*Z)*et}f[g+8>>2]=j;do if((o|0)!=0){if((s[o+180>>2]&2|0)==0)break;nt=+f[o+4>>2];$=+f[o+20>>2];Q=+f[o+36>>2];tt=+f[o+8>>2];J=+f[o+24>>2];Y=+f[o+40>>2];V=+f[o+12>>2];K=+f[o+28>>2];et=+f[o+44>>2];G=(nt*H+$*U+Q*z)*+f[o+164>>2];Z=(H*tt+U*J+z*Y)*+f[o+168>>2];z=(H*V+U*K+z*et)*+f[o+172>>2];f[g+16>>2]=nt*G+tt*Z+V*z;f[g+20>>2]=$*G+J*Z+K*z;f[g+24>>2]=Q*G+Y*Z+et*z;f[g+28>>2]=0;H=nt*G+tt*Z+V*z;U=$*G+J*Z+K*z;z=Q*G+Y*Z+et*z}while(0);do if((m|0)!=0){if((s[m+180>>2]&2|0)==0)break;V=+f[m+4>>2];K=+f[m+20>>2];Y=+f[m+36>>2];$=+f[m+8>>2];Q=+f[m+24>>2];et=+f[m+40>>2];J=+f[m+12>>2];G=+f[m+28>>2];nt=+f[m+44>>2];Z=(V*H+K*U+Y*z)*+f[m+164>>2];tt=(H*$+U*Q+z*et)*+f[m+168>>2];z=(H*J+U*G+z*nt)*+f[m+172>>2];f[g+16>>2]=V*Z+$*tt+J*z;f[g+20>>2]=K*Z+Q*tt+G*z;f[g+24>>2]=Y*Z+et*tt+nt*z;f[g+28>>2]=0;H=V*Z+$*tt+J*z;U=K*Z+Q*tt+G*z;z=Y*Z+et*tt+nt*z}while(0);do if((o|0)!=0){if((s[o+180>>2]&2|0)==0)break;V=+f[o+4>>2];K=+f[o+20>>2];Y=+f[o+36>>2];$=+f[o+8>>2];Q=+f[o+24>>2];et=+f[o+40>>2];J=+f[o+12>>2];G=+f[o+28>>2];nt=+f[o+44>>2];Z=(V*I+K*F+Y*j)*+f[o+164>>2];tt=(I*$+F*Q+j*et)*+f[o+168>>2];j=(I*J+F*G+j*nt)*+f[o+172>>2];f[g>>2]=V*Z+$*tt+J*j;f[g+4>>2]=K*Z+Q*tt+G*j;f[g+8>>2]=Y*Z+et*tt+nt*j;f[g+12>>2]=0;I=V*Z+$*tt+J*j;F=K*Z+Q*tt+G*j;j=Y*Z+et*tt+nt*j}while(0);do if((m|0)!=0){if((s[m+180>>2]&2|0)==0)break;V=+f[m+4>>2];K=+f[m+20>>2];Y=+f[m+36>>2];$=+f[m+8>>2];Q=+f[m+24>>2];et=+f[m+40>>2];J=+f[m+12>>2];G=+f[m+28>>2];nt=+f[m+44>>2];Z=(V*I+K*F+Y*j)*+f[m+164>>2];tt=(I*$+F*Q+j*et)*+f[m+168>>2];j=(I*J+F*G+j*nt)*+f[m+172>>2];f[g>>2]=V*Z+$*tt+J*j;f[g+4>>2]=K*Z+Q*tt+G*j;f[g+8>>2]=Y*Z+et*tt+nt*j;f[g+12>>2]=0;I=V*Z+$*tt+J*j;F=K*Z+Q*tt+G*j;j=Y*Z+et*tt+nt*j}while(0);if(+X(+(H*H+U*U+z*z))>.001)TS(e,g+16|0,h,p,b,w);if(!(+X(+(I*I+F*F+j*j))>.001))break;TS(e,g,h,p,b,w)}while(0);do if((s[i+64>>2]&32|0)==0)u=106;else{if((r[l+(y*184|0)+120>>0]|0)==0){u=106;break}xS(e,l+(y*184|0)+156|0,h,p,b,w,g+64|0,g+48|0,1,+f[l+(y*184|0)+136>>2],+f[l+(y*184|0)+144>>2]);if((s[i+64>>2]&16|0)==0)break;xS(e,l+(y*184|0)+172|0,h,p,b,w,g+64|0,g+48|0,1,+f[l+(y*184|0)+140>>2],+f[l+(y*184|0)+148>>2])}while(0);do if((u|0)==106){u=0;_=l+(y*184|0)+156|0;H=+f[T>>2];j=+f[N>>2];F=+f[x>>2];U=S-(L*S+C*k+A*O)*H;I=C-(L*S+C*k+A*O)*j;S=A-(L*S+C*k+A*O)*F;f[l+(y*184|0)+156>>2]=U;P=l+(y*184|0)+160|0;f[P>>2]=I;D=l+(y*184|0)+164|0;f[D>>2]=S;f[l+(y*184|0)+168>>2]=0;if((s[i+64>>2]&64|0)==0?U*U+I*I+S*S>1.1920928955078125e-7:0){nt=1/+X(+(U*U+I*I+S*S));f[_>>2]=U*nt;f[P>>2]=nt*I;f[D>>2]=nt*S;SS(o,_);SS(m,_);xS(e,_,h,p,b,w,g+64|0,g+48|0,1,0,0);if((s[i+64>>2]&16|0)==0)break;R=l+(y*184|0)+172|0;et=+f[P>>2];G=+f[x>>2];Q=+f[D>>2];Y=+f[N>>2];tt=+f[T>>2];Z=+f[_>>2];f[l+(y*184|0)+172>>2]=et*G-Q*Y;f[l+(y*184|0)+184>>2]=0;nt=1/+X(+((et*G-Q*Y)*(et*G-Q*Y)+(Q*tt-G*Z)*(Q*tt-G*Z)+(Y*Z-et*tt)*(Y*Z-et*tt)));f[R>>2]=(et*G-Q*Y)*nt;f[l+(y*184|0)+176>>2]=(Q*tt-G*Z)*nt;f[l+(y*184|0)+180>>2]=(Y*Z-et*tt)*nt;SS(o,R);SS(m,R);xS(e,R,h,p,b,w,g+64|0,g+48|0,1,0,0);break}x=l+(y*184|0)+172|0;if(+W(+F)>.7071067690849304){nt=1/+X(+(F*F+j*j));f[_>>2]=0;f[P>>2]=-(nt*F);f[D>>2]=nt*j;f[x>>2]=(F*F+j*j)*nt;f[l+(y*184|0)+176>>2]=-(H*nt*j);f[l+(y*184|0)+180>>2]=H*-(nt*F)}else{nt=1/+X(+(H*H+j*j));f[_>>2]=-(j*nt);f[P>>2]=nt*H;f[D>>2]=0;f[x>>2]=-(F*nt*H);f[l+(y*184|0)+176>>2]=F*-(j*nt);f[l+(y*184|0)+180>>2]=(H*H+j*j)*nt}SS(o,_);SS(m,_);xS(e,_,h,p,b,w,g+64|0,g+48|0,1,0,0);T=s[i+64>>2]|0;if((T&16|0)!=0){SS(o,x);SS(m,x);xS(e,x,h,p,b,w,g+64|0,g+48|0,1,0,0);T=s[i+64>>2]|0}if((T&80|0)!=80)break;r[l+(y*184|0)+120>>0]=1}while(0);w=s[e+16>>2]|0;T=s[w+(h*244|0)+240>>2]|0;x=s[w+(p*244|0)+240>>2]|0;E=s[E+(b*152|0)+140>>2]|0;b=s[e+76>>2]|0;N=s[i+64>>2]|0;do if((N&4|0)==0)f[b+(E*152|0)+100>>2]=0;else{S=+f[l+(y*184|0)+128>>2]*+f[i+60>>2];f[b+(E*152|0)+100>>2]=S;if((T|0)!=0){et=+f[T+344>>2];nt=S*et*+f[b+(E*152|0)+20>>2]*+f[T+352>>2]*+f[w+(h*244|0)+116>>2];tt=S*et*+f[b+(E*152|0)+24>>2]*+f[T+356>>2]*+f[w+(h*244|0)+120>>2];f[w+(h*244|0)+64>>2]=+f[w+(h*244|0)+112>>2]*S*et*+f[b+(E*152|0)+16>>2]*+f[T+348>>2]+ +f[w+(h*244|0)+64>>2];f[w+(h*244|0)+68>>2]=nt+ +f[w+(h*244|0)+68>>2];f[w+(h*244|0)+72>>2]=tt+ +f[w+(h*244|0)+72>>2];tt=S*+f[w+(h*244|0)+100>>2]*+f[b+(E*152|0)+68>>2];nt=S*+f[w+(h*244|0)+104>>2]*+f[b+(E*152|0)+72>>2];f[w+(h*244|0)+80>>2]=S*+f[w+(h*244|0)+96>>2]*+f[b+(E*152|0)+64>>2]+ +f[w+(h*244|0)+80>>2];f[w+(h*244|0)+84>>2]=tt+ +f[w+(h*244|0)+84>>2];f[w+(h*244|0)+88>>2]=nt+ +f[w+(h*244|0)+88>>2]}if((x|0)==0)break;C=+f[x+344>>2];S=+f[b+(E*152|0)+100>>2];if((s[w+(p*244|0)+240>>2]|0)==0)break;nt=+f[b+(E*152|0)+88>>2];tt=+f[b+(E*152|0)+84>>2];et=+f[b+(E*152|0)+80>>2];Y=S*C*+f[b+(E*152|0)+52>>2]*+f[x+352>>2]*+f[w+(p*244|0)+116>>2];Z=S*C*+f[b+(E*152|0)+56>>2]*+f[x+356>>2]*+f[w+(p*244|0)+120>>2];f[w+(p*244|0)+64>>2]=+f[w+(p*244|0)+112>>2]*S*C*+f[b+(E*152|0)+48>>2]*+f[x+348>>2]+ +f[w+(p*244|0)+64>>2];f[w+(p*244|0)+68>>2]=Y+ +f[w+(p*244|0)+68>>2];f[w+(p*244|0)+72>>2]=Z+ +f[w+(p*244|0)+72>>2];tt=tt*+f[w+(p*244|0)+100>>2]*-S;nt=nt*+f[w+(p*244|0)+104>>2]*-S;f[w+(p*244|0)+80>>2]=+f[w+(p*244|0)+80>>2]-et*+f[w+(p*244|0)+96>>2]*-S;f[w+(p*244|0)+84>>2]=+f[w+(p*244|0)+84>>2]-tt;f[w+(p*244|0)+88>>2]=+f[w+(p*244|0)+88>>2]-nt}while(0);do if((N&16|0)!=0){if((N&4|0)==0){f[b+((E+1|0)*152|0)+100>>2]=0;break}S=+f[l+(y*184|0)+132>>2]*+f[i+60>>2];f[b+((E+1|0)*152|0)+100>>2]=S;do if((T|0)!=0){C=+f[T+344>>2];if((s[w+(h*244|0)+240>>2]|0)==0)break;nt=S*C*+f[b+((E+1|0)*152|0)+20>>2]*+f[w+(h*244|0)+116>>2];tt=S*C*+f[b+((E+1|0)*152|0)+24>>2]*+f[w+(h*244|0)+120>>2];f[w+(h*244|0)+64>>2]=+f[w+(h*244|0)+112>>2]*S*C*+f[b+((E+1|0)*152|0)+16>>2]+ +f[w+(h*244|0)+64>>2];f[w+(h*244|0)+68>>2]=nt+ +f[w+(h*244|0)+68>>2];f[w+(h*244|0)+72>>2]=tt+ +f[w+(h*244|0)+72>>2];tt=S*+f[w+(h*244|0)+100>>2]*+f[b+((E+1|0)*152|0)+68>>2];nt=S*+f[w+(h*244|0)+104>>2]*+f[b+((E+1|0)*152|0)+72>>2];f[w+(h*244|0)+80>>2]=S*+f[w+(h*244|0)+96>>2]*+f[b+((E+1|0)*152|0)+64>>2]+ +f[w+(h*244|0)+80>>2];f[w+(h*244|0)+84>>2]=tt+ +f[w+(h*244|0)+84>>2];f[w+(h*244|0)+88>>2]=nt+ +f[w+(h*244|0)+88>>2]}while(0);if((x|0)==0)break;C=+f[x+344>>2];S=+f[b+((E+1|0)*152|0)+100>>2];if((s[w+(p*244|0)+240>>2]|0)==0)break;nt=+f[b+((E+1|0)*152|0)+88>>2];tt=+f[b+((E+1|0)*152|0)+84>>2];et=+f[b+((E+1|0)*152|0)+80>>2];Y=S*C*+f[b+((E+1|0)*152|0)+52>>2]*+f[w+(p*244|0)+116>>2];Z=S*C*+f[b+((E+1|0)*152|0)+56>>2]*+f[w+(p*244|0)+120>>2];f[w+(p*244|0)+64>>2]=+f[w+(p*244|0)+112>>2]*S*C*+f[b+((E+1|0)*152|0)+48>>2]+ +f[w+(p*244|0)+64>>2];f[w+(p*244|0)+68>>2]=Y+ +f[w+(p*244|0)+68>>2];f[w+(p*244|0)+72>>2]=Z+ +f[w+(p*244|0)+72>>2];tt=tt*+f[w+(p*244|0)+100>>2]*-S;nt=nt*+f[w+(p*244|0)+104>>2]*-S;f[w+(p*244|0)+80>>2]=+f[w+(p*244|0)+80>>2]-et*+f[w+(p*244|0)+96>>2]*-S;f[w+(p*244|0)+84>>2]=+f[w+(p*244|0)+84>>2]-tt;f[w+(p*244|0)+88>>2]=+f[w+(p*244|0)+88>>2]-nt}while(0);b=s[l+748>>2]|0}y=y+1|0}while((y|0)<(b|0))}}while(0);a=a+1|0}while((a|0)!=(n|0));c=g;return}function LS(e,t){e=e|0;t=t|0;var n=0,o=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0;n=c;c=c+336|0;h=s[e+52>>2]|0;if((h|0)!=0?(lD[s[s[h>>2]>>2]&511](h),o=s[e+52>>2]|0,(o|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[5004]=(s[5004]|0)+1;o=cM(151)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}s[o>>2]=19496;r[o+20>>0]=1;s[o+16>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;r[o+40>>0]=1;s[o+36>>2]=0;s[o+28>>2]=0;s[o+32>>2]=0;r[o+60>>0]=1;s[o+56>>2]=0;s[o+48>>2]=0;s[o+52>>2]=0;s[e+52>>2]=o;y=0;h=0;E=0;o=0;while(1){if((y|0)>=(dD[s[(s[e>>2]|0)+96>>2]&127](e)|0))break;if((h|0)==(E|0)){S=(E|0)==0?1:E<<1;if((E|0)<(S|0)){if((S|0)!=0?(s[5004]=(s[5004]|0)+1,v=cM((S<<4|3)+16|0)|0,(v|0)!=0):0){s[(v+19&-16)+ -4>>2]=v;w=v+19&-16}else w=0;if((E|0)>0){b=0;do{et=w+(b<<4)|0;Z=o+(b<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];b=b+1|0}while((b|0)!=(E|0))}if((o|0)==0){b=E;E=S;o=w}else{s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0);b=E;E=S;o=w}}else b=E}else b=h;et=o+(h<<4)|0;s[et+0>>2]=s[n+256>>2];s[et+4>>2]=s[n+260>>2];s[et+8>>2]=s[n+264>>2];s[et+12>>2]=s[n+268>>2];WD[s[(s[e>>2]|0)+108>>2]&127](e,y,et);y=y+1|0;h=b+1|0}r[n+212>>0]=1;s[n+208>>2]=0;s[n+200>>2]=0;s[n+204>>2]=0;r[n+232>>0]=1;s[n+228>>2]=0;s[n+220>>2]=0;s[n+224>>2]=0;r[n+252>>0]=1;s[n+248>>2]=0;s[n+240>>2]=0;s[n+244>>2]=0;if((t|0)!=0){if((h|0)>0){t=0;L=0;O=0;M=0;while(1){b=t;t=t+1|0;if((t|0)<(h|0)){y=o+(b<<4)|0;v=o+(b<<4)+4|0;b=o+(b<<4)+8|0;w=t;do{x=w;w=w+1|0;if((w|0)<(h|0)){S=o+(x<<4)|0;E=o+(x<<4)+4|0;x=o+(x<<4)+8|0;T=w;do{C=+f[y>>2];V=+f[S>>2]-C;z=+f[v>>2];R=+f[E>>2]-z;k=+f[b>>2];U=+f[x>>2]-k;C=+f[o+(T<<4)>>2]-C;z=+f[o+(T<<4)+4>>2]-z;k=+f[o+(T<<4)+8>>2]-k;K=1;A=0;while(1){$=(R*k-U*z)*K;J=(U*C-V*k)*K;K=(V*z-R*C)*K;e:do if(K*K+($*$+J*J)>9999999747378752e-20){Q=1/+X(+(K*K+($*$+J*J)));if((L|0)>0){_=0;do{if($*Q*+f[M+(_<<4)>>2]+J*Q*+f[M+(_<<4)+4>>2]+K*Q*+f[M+(_<<4)+8>>2]>.9990000128746033)break e;_=_+1|0}while((_|0)<(L|0))}G=$*Q*+f[y>>2]+J*Q*+f[v>>2]+K*Q*+f[b>>2];_=0;do{if($*Q*+f[o+(_<<4)>>2]+J*Q*+f[o+(_<<4)+4>>2]+K*Q*+f[o+(_<<4)+8>>2]-G+ -.009999999776482582>0)break e;_=_+1|0}while((_|0)<(h|0));do if((L|0)==(O|0)){D=(O|0)==0?1:O<<1;if((O|0)<(D|0)){do if((D|0)==0)P=0;else{s[5004]=(s[5004]|0)+1;_=cM((D<<4|3)+16|0)|0;if((_|0)==0){P=0;break}s[(_+19&-16)+ -4>>2]=_;P=_+19&-16}while(0);if((O|0)>0){_=0;do{et=P+(_<<4)|0;Z=M+(_<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];_=_+1|0}while((_|0)!=(O|0))}if((M|0)==0){_=O;O=D;M=P;break}s[5006]=(s[5006]|0)+1;hM(s[M+ -4>>2]|0);_=O;O=D;M=P}else _=O}else _=L;while(0);f[M+(_<<4)>>2]=$*Q;f[M+(_<<4)+4>>2]=J*Q;f[M+(_<<4)+8>>2]=K*Q;f[M+(_<<4)+12>>2]=-G;L=L+1|0}while(0);A=A+1|0;if((A|0)==2)break;else K=-1}T=T+1|0}while((T|0)!=(h|0))}}while((w|0)!=(h|0))}if((t|0)==(h|0)){h=M;break}}if((L|0)>0){v=0;t=0;y=0;E=0;while(1){et=h+(v<<4)|0;s[n+184>>2]=s[et+0>>2];s[n+188>>2]=s[et+4>>2];s[n+192>>2]=s[et+8>>2];C=+f[h+(v<<4)+12>>2];C=C- +CD[s[(s[e>>2]|0)+48>>2]&15](e);if((t|0)==(y|0)){S=(y|0)==0?1:y<<1;if((y|0)<(S|0)){if((S|0)!=0?(s[5004]=(s[5004]|0)+1,l=cM((S<<4|3)+16|0)|0,(l|0)!=0):0){s[(l+19&-16)+ -4>>2]=l;b=l+19&-16}else b=0;if((y|0)>0){w=0;do{et=b+(w<<4)|0;Z=E+(w<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];w=w+1|0}while((w|0)!=(y|0))}if((E|0)==0){w=y;y=S}else{s[5006]=(s[5006]|0)+1;hM(s[E+ -4>>2]|0);w=y;y=S}}else{w=y;b=E}}else{w=t;b=E}et=b+(w<<4)|0;s[et+0>>2]=s[n+184>>2];s[et+4>>2]=s[n+188>>2];s[et+8>>2]=s[n+192>>2];f[b+(w<<4)+12>>2]=C;t=t+1|0;v=v+1|0;if((v|0)>=(L|0)){l=b;break}else E=b}if((t|0)>0){v=0;S=0;x=0;T=0;do{b=v;v=v+1|0;if((v|0)<(t|0)){y=v;do{w=y;y=y+1|0;if((y|0)<(t|0)){E=y;do{U=+f[l+(w<<4)+4>>2];Q=+f[l+(E<<4)+8>>2];k=+f[l+(w<<4)+8>>2];z=+f[l+(E<<4)+4>>2];J=+f[l+(E<<4)>>2];V=+f[l+(w<<4)>>2];K=+f[l+(b<<4)+8>>2];R=+f[l+(b<<4)+4>>2];$=+f[l+(b<<4)>>2];t:do if((((z*V-U*J)*(z*V-U*J)+((U*Q-k*z)*(U*Q-k*z)+(k*J-Q*V)*(k*J-Q*V))>9999999747378752e-20?(J*R-z*$)*(J*R-z*$)+((z*K-Q*R)*(z*K-Q*R)+(Q*$-J*K)*(Q*$-J*K))>9999999747378752e-20:0)?(U*$-V*R)*(U*$-V*R)+((k*R-U*K)*(k*R-U*K)+(V*K-k*$)*(V*K-k*$))>9999999747378752e-20:0)?(N=K*(z*V-U*J)+(R*(k*J-Q*V)+(U*Q-k*z)*$),+W(+N)>9.999999974752427e-7):0){tt=+f[l+(b<<4)+12>>2];G=+f[l+(w<<4)+12>>2];nt=+f[l+(E<<4)+12>>2];C=-1/N*((k*R-U*K)*nt+((U*Q-k*z)*tt+(z*K-Q*R)*G));k=-1/N*((V*K-k*$)*nt+((k*J-Q*V)*tt+(Q*$-J*K)*G));R=-1/N*((U*$-V*R)*nt+((z*V-U*J)*tt+(J*R-z*$)*G));L=0;do{if(+f[l+(L<<4)+12>>2]+(C*+f[l+(L<<4)>>2]+k*+f[l+(L<<4)+4>>2]+R*+f[l+(L<<4)+8>>2])+ -.009999999776482582>0)break t;L=L+1|0}while((L|0)<(t|0));do if((S|0)==(x|0)){A=(x|0)==0?1:x<<1;if((x|0)>=(A|0)){L=x;break}do if((A|0)==0)O=0;else{s[5004]=(s[5004]|0)+1;L=cM((A<<4|3)+16|0)|0;if((L|0)==0){O=0;break}s[(L+19&-16)+ -4>>2]=L;O=L+19&-16}while(0);if((x|0)>0){L=0;do{et=O+(L<<4)|0;Z=T+(L<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];L=L+1|0}while((L|0)!=(x|0))}if((T|0)==0){L=x;x=A;T=O;break}s[5006]=(s[5006]|0)+1;hM(s[T+ -4>>2]|0);L=x;x=A;T=O}else L=S;while(0);f[T+(L<<4)>>2]=C;f[T+(L<<4)+4>>2]=k;f[T+(L<<4)+8>>2]=R;f[T+(L<<4)+12>>2]=0;S=S+1|0}while(0);E=E+1|0}while((E|0)!=(t|0))}}while((y|0)!=(t|0))}}while((v|0)!=(t|0))}else{S=0;T=0}}else{l=0;S=0;T=0}}else{h=0;l=0;S=0;T=0}SC(n+196|0,T,S);if((T|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[T+ -4>>2]|0)}if((l|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}if((h|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}}else SC(n+196|0,o,h);y=s[n+240>>2]|0;if((y|0)>0&((y|0)<0^1)){s[5004]=(s[5004]|0)+1;l=cM((y<<4|3)+16|0)|0;if((l|0)==0)h=0;else{s[(l+19&-16)+ -4>>2]=l;h=l+19&-16}l=0;do{et=h+(l<<4)|0;s[et+0>>2]=s[n+168>>2];s[et+4>>2]=s[n+172>>2];s[et+8>>2]=s[n+176>>2];s[et+12>>2]=s[n+180>>2];l=l+1|0}while((l|0)!=(y|0))}else h=0;r[n+164>>0]=1;t=n+160|0;s[t>>2]=0;l=n+152|0;s[l>>2]=0;s[n+156>>2]=0;v=n+112|0;b=v+36|0;do{s[v>>2]=0;v=v+4|0}while((v|0)<(b|0));r[n+128>>0]=1;s[n+124>>2]=0;s[n+116>>2]=0;s[n+120>>2]=0;if((y|0)<0)Bn();if((y|0)>0){PS(n+148|0,y);v=s[t>>2]|0;b=0;do{w=v+(b*36|0)|0;if((w|0)!=0){BS(w,n+112|0);s[w+20>>2]=s[n+132>>2];s[w+24>>2]=s[n+136>>2];s[w+28>>2]=s[n+140>>2];s[w+32>>2]=s[n+144>>2]}b=b+1|0}while((b|0)!=(y|0));b=s[n+124>>2]|0;s[l>>2]=y;if((b|0)!=0){if((r[n+128>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[b+ -4>>2]|0)}s[n+124>>2]=0}}else{s[l>>2]=y;v=0}r[n+128>>0]=1;s[n+124>>2]=0;s[n+116>>2]=0;s[n+120>>2]=0;b=s[n+200>>2]|0;w=s[e+52>>2]|0;E=s[w+8>>2]|0;if((E|0)<(b|0)){if((s[w+12>>2]|0)<(b|0)){if((b|0)==0){S=0;T=E}else{s[5004]=(s[5004]|0)+1;S=cM((b<<4|3)+16|0)|0;if((S|0)==0)S=0;else{s[(S+19&-16)+ -4>>2]=S;S=S+19&-16}T=s[w+8>>2]|0}if((T|0)>0){x=0;do{et=S+(x<<4)|0;Z=(s[w+16>>2]|0)+(x<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];x=x+1|0}while((x|0)!=(T|0))}x=s[w+16>>2]|0;if((x|0)!=0){if((r[w+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0)}s[w+16>>2]=0}r[w+20>>0]=1;s[w+16>>2]=S;s[w+12>>2]=b;S=w+16|0}else S=w+16|0;do{et=(s[S>>2]|0)+(E<<4)|0;s[et+0>>2]=s[n+96>>2];s[et+4>>2]=s[n+100>>2];s[et+8>>2]=s[n+104>>2];s[et+12>>2]=s[n+108>>2];E=E+1|0}while((E|0)!=(b|0))}s[w+8>>2]=b;if((b|0)>0){E=s[n+208>>2]|0;w=0;do{et=(s[(s[e+52>>2]|0)+16>>2]|0)+(w<<4)|0;Z=E+(w<<4)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];w=w+1|0}while((w|0)!=(b|0))}if((y|0)>0){b=0;do{w=(s[n+228>>2]|0)+((s[(s[n+248>>2]|0)+(b<<2)>>2]|0)*12|0)|0;x=v+(b*36|0)+4|0;E=v+(b*36|0)+8|0;S=v+(b*36|0)+12|0;T=v+(b*36|0)+16|0;v=w;A=0;do{L=v+4|0;O=s[v+((s[L>>2]|0)*12|0)+8>>2]|0;D=s[x>>2]|0;if((D|0)==(s[E>>2]|0)?(g=(D|0)==0?1:D<<1,(D|0)<(g|0)):0){if((g|0)==0)M=0;else{s[5004]=(s[5004]|0)+1;M=cM((g<<2|3)+16|0)|0;if((M|0)==0)M=0;else{s[(M+19&-16)+ -4>>2]=M;M=M+19&-16}D=s[x>>2]|0}if((D|0)>0){_=0;do{P=M+(_<<2)|0;if((P|0)!=0)s[P>>2]=s[(s[S>>2]|0)+(_<<2)>>2];_=_+1|0}while((_|0)!=(D|0))}_=s[S>>2]|0;if((_|0)!=0){if((r[T>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[_+ -4>>2]|0)}s[S>>2]=0}r[T>>0]=1;s[S>>2]=M;s[E>>2]=g;D=s[x>>2]|0}M=(s[S>>2]|0)+(D<<2)|0;if((M|0)!=0){s[M>>2]=O;D=s[x>>2]|0}s[x>>2]=D+1;Z=s[v+8>>2]|0;et=s[n+208>>2]|0;N=+f[et+(Z<<4)>>2]- +f[et+(O<<4)>>2];C=+f[et+(Z<<4)+4>>2]- +f[et+(O<<4)+4>>2];R=+f[et+(Z<<4)+8>>2]- +f[et+(O<<4)+8>>2];k=1/+X(+(N*N+C*C+R*R));if((A|0)<2){f[n+288+(A<<4)>>2]=N*k;f[n+288+(A<<4)+4>>2]=C*k;f[n+288+(A<<4)+8>>2]=R*k;f[n+288+(A<<4)+12>>2]=0;A=A+1|0}et=s[L>>2]|0;v=v+(((s[v+(et*12|0)>>2]|0)+et|0)*12|0)|0}while((v|0)!=(w|0));S=h+(b<<4)|0;if((A|0)==2){K=+f[n+292>>2];Q=+f[n+312>>2];G=+f[n+296>>2];tt=+f[n+308>>2];J=+f[n+304>>2];$=+f[n+288>>2];Z=h+(b<<4)+4|0;et=h+(b<<4)+8|0;f[h+(b<<4)+12>>2]=0;nt=1/+X(+((K*Q-G*tt)*(K*Q-G*tt)+(G*J-Q*$)*(G*J-Q*$)+(tt*$-K*J)*(tt*$-K*J)));f[S>>2]=(K*Q-G*tt)*nt;f[Z>>2]=(G*J-Q*$)*nt;f[et>>2]=(tt*$-K*J)*nt;v=s[t>>2]|0;f[v+(b*36|0)+20>>2]=(K*Q-G*tt)*nt;f[v+(b*36|0)+24>>2]=+f[Z>>2];f[v+(b*36|0)+28>>2]=+f[et>>2];f[v+(b*36|0)+32>>2]=1.0000000150474662e30}else{s[S+0>>2]=0;s[S+4>>2]=0;s[S+8>>2]=0;s[S+12>>2]=0;v=s[t>>2]|0}w=s[v+(b*36|0)+4>>2]|0;if((w|0)>0){E=s[(s[e+52>>2]|0)+16>>2]|0;k=+f[S>>2];N=+f[h+(b<<4)+4>>2];C=+f[h+(b<<4)+8>>2];x=s[v+(b*36|0)+12>>2]|0;R=1.0000000150474662e30;S=0;do{et=s[x+(S<<2)>>2]|0;nt=+f[E+(et<<4)>>2]*k+ +f[E+(et<<4)+4>>2]*N+ +f[E+(et<<4)+8>>2]*C;R=R>nt?nt:R;S=S+1|0}while((S|0)<(w|0))}else R=1.0000000150474662e30;f[v+(b*36|0)+32>>2]=-R;b=b+1|0}while((b|0)<(y|0));y=s[l>>2]|0;if((y|0)>0){b=0;g=0;S=0;do{if((S|0)==(b|0)){b=(S|0)==0?1:S<<1;if((S|0)<(b|0)){if((b|0)!=0?(s[5004]=(s[5004]|0)+1,m=cM((b<<2|3)+16|0)|0,(m|0)!=0):0){s[(m+19&-16)+ -4>>2]=m;w=m+19&-16}else w=0;if((S|0)>0){x=0;do{E=w+(x<<2)|0;if((E|0)!=0)s[E>>2]=s[g+(x<<2)>>2];x=x+1|0}while((x|0)!=(S|0))}if((g|0)==0)g=w;else{s[5006]=(s[5006]|0)+1;hM(s[g+ -4>>2]|0);g=w}}else b=S}w=g+(S<<2)|0;if((w|0)!=0){s[w>>2]=S;y=s[l>>2]|0}S=S+1|0}while((S|0)<(y|0));if((S|0)==0)d=g;else{m=n+88|0;w=n+84|0;b=n+76|0;y=n+32|0;E=n+308|0;k=0;C=0;N=0;while(1){L=S+ -1|0;S=s[g+(L<<2)>>2]|0;s[5004]=(s[5004]|0)+1;T=cM(23)|0;if((T|0)!=0){s[(T+19&-16)+ -4>>2]=T;x=T+19&-16;if((T+19&-16|0)!=0)s[x>>2]=S}else x=0;U=+f[v+(S*36|0)+20>>2];R=+f[v+(S*36|0)+24>>2];z=+f[v+(S*36|0)+28>>2];S=L;M=1;T=1;A=L;n:while(1){L=(S|0)>0;r:while(1){do{et=A;A=A+ -1|0;if((et|0)<=0)break n;O=s[g+(A<<2)>>2]|0}while(!(U*+f[v+(O*36|0)+20>>2]+R*+f[v+(O*36|0)+24>>2]+z*+f[v+(O*36|0)+28>>2]>.9990000128746033));do if((T|0)==(M|0)?(d=(M|0)==0?1:M<<1,(M|0)<(d|0)):0){do if((d|0)==0)_=0;else{s[5004]=(s[5004]|0)+1;_=cM((d<<2|3)+16|0)|0;if((_|0)==0){_=0;break}s[(_+19&-16)+ -4>>2]=_;_=_+19&-16}while(0);if((M|0)>0){D=0;do{P=_+(D<<2)|0;if((P|0)!=0)s[P>>2]=s[x+(D<<2)>>2];D=D+1|0}while((D|0)!=(M|0))}if((x|0)==0){M=d;x=_;break}s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0);M=d;x=_}while(0);_=x+(T<<2)|0;if((_|0)!=0)s[_>>2]=O;T=T+1|0;if(L)P=0;else continue;while(1){D=g+(P<<2)|0;_=P+1|0;if((s[D>>2]|0)==(O|0))break;if((_|0)<(S|0))P=_;else continue r}if((P|0)<(S|0))break}et=S+ -1|0;Z=g+(et<<2)|0;s[D>>2]=s[Z>>2];s[Z>>2]=O;S=et}if((T|0)>1){r[m>>0]=1;s[w>>2]=0;s[b>>2]=0;s[n+80>>2]=0;_=0;k=0;C=0;N=0;L=0;do{O=s[x+(L<<2)>>2]|0;k=+f[v+(O*36|0)+20>>2]+k;C=+f[v+(O*36|0)+24>>2]+C;N=+f[v+(O*36|0)+28>>2]+N;A=v+(O*36|0)+4|0;D=s[A>>2]|0;if((D|0)>0){O=v+(O*36|0)+12|0;H=_;M=0;while(1){_=s[(s[O>>2]|0)+(M<<2)>>2]|0;et=(s[(s[e+52>>2]|0)+16>>2]|0)+(_<<4)|0;s[n+56>>2]=s[et+0>>2];s[n+60>>2]=s[et+4>>2];s[n+64>>2]=s[et+8>>2];s[n+68>>2]=s[et+12>>2];i:do if((H|0)>0){P=s[w>>2]|0;B=0;while(1){if((s[P+(B*24|0)+20>>2]|0)==(_|0)){_=H;break i}B=B+1|0;if((B|0)>=(H|0)){p=207;break}}}else p=207;while(0);if((p|0)==207){p=0;s[n+0>>2]=s[n+56>>2];s[n+4>>2]=s[n+60>>2];s[n+8>>2]=s[n+64>>2];s[n+12>>2]=s[n+68>>2];do if((H|0)==(s[n+80>>2]|0)){D=(H|0)==0?1:H<<1;if((H|0)>=(D|0))break;if((D|0)==0)P=0;else{s[5004]=(s[5004]|0)+1;P=cM((D*24|3)+16|0)|0;if((P|0)==0)P=0;else{s[(P+19&-16)+ -4>>2]=P;P=P+19&-16}H=s[b>>2]|0}B=s[w>>2]|0;if((H|0)<=0){if((B|0)!=0)p=216}else{p=0;do{et=P+(p*24|0)|0;Z=B+(p*24|0)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];s[et+16>>2]=s[Z+16>>2];s[et+20>>2]=s[Z+20>>2];p=p+1|0}while((p|0)!=(H|0));p=216}if((p|0)==216){p=0;if(!((r[m>>0]|0)==0|(B|0)==0)){s[5006]=(s[5006]|0)+1;hM(s[B+ -4>>2]|0);H=s[b>>2]|0}s[w>>2]=0}r[m>>0]=1;s[w>>2]=P;s[n+80>>2]=D}while(0);D=s[w>>2]|0;et=D+(H*24|0)|0;s[et+0>>2]=s[n+0>>2];s[et+4>>2]=s[n+4>>2];s[et+8>>2]=s[n+8>>2];s[et+12>>2]=s[n+12>>2];s[et+16>>2]=s[n+16>>2];s[D+(H*24|0)+20>>2]=_;_=(s[b>>2]|0)+1|0;s[b>>2]=_;D=s[A>>2]|0}M=M+1|0;if((M|0)>=(D|0))break;else H=_}}L=L+1|0}while((L|0)<(T|0));r[n+36>>0]=1;s[y>>2]=0;s[n+24>>2]=0;s[n+28>>2]=0;et=v+((s[x>>2]|0)*9<<2)+20|0;s[n+40>>2]=s[et+0>>2];s[n+44>>2]=s[et+4>>2];s[n+48>>2]=s[et+8>>2];s[n+52>>2]=s[et+12>>2];nt=1/+X(+(k*k+C*C+N*N));k=k*nt;C=C*nt;N=N*nt;if(+W(+N)>.7071067690849304){U=1/+X(+(N*N+C*C));z=0;R=-(N*U);U=C*U}else{R=1/+X(+(k*k+C*C));z=-(C*R);R=k*R;U=0}s:do if((_|0)<2)if((_|0)>0){A=0;H=0;L=0;p=1;while(1){O=s[w>>2]|0;do if((A|0)==(H|0)){M=(H|0)==0?1:H<<1;if((H|0)>=(M|0)){P=H;M=H;break}do if((M|0)==0)D=0;else{s[5004]=(s[5004]|0)+1;_=cM((M*24|3)+16|0)|0;if((_|0)==0){D=0;H=A;break}s[(_+19&-16)+ -4>>2]=_;D=_+19&-16;H=A}while(0);if((H|0)>0){_=0;do{et=D+(_*24|0)|0;Z=L+(_*24|0)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];s[et+16>>2]=s[Z+16>>2];s[et+20>>2]=s[Z+20>>2];_=_+1|0}while((_|0)!=(H|0))}if((L|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0)}P=A;_=s[b>>2]|0;L=D}else{P=A;M=H}while(0);et=L+(P*24|0)|0;s[et+0>>2]=s[O+0>>2];s[et+4>>2]=s[O+4>>2];s[et+8>>2]=s[O+8>>2];s[et+12>>2]=s[O+12>>2];s[et+16>>2]=s[O+16>>2];s[et+20>>2]=s[O+20>>2];A=A+1|0;if((p|0)>=(_|0)){p=272;break s}H=M;p=p+1|0}}else{L=0;p=307}else{p=s[w>>2]|0;L=_;A=0;do{if(z*+f[p+(A*24|0)>>2]+R*+f[p+(A*24|0)+4>>2]+U*+f[p+(A*24|0)+8>>2]<z*+f[p>>2]+R*+f[p+4>>2]+U*+f[p+8>>2]){s[n+288>>2]=s[p+0>>2];s[n+292>>2]=s[p+4>>2];s[n+296>>2]=s[p+8>>2];s[n+300>>2]=s[p+12>>2];s[n+304>>2]=s[p+16>>2];s[n+308>>2]=s[p+20>>2];L=p+(A*24|0)|0;s[p+0>>2]=s[L+0>>2];s[p+4>>2]=s[L+4>>2];s[p+8>>2]=s[L+8>>2];s[p+12>>2]=s[L+12>>2];s[p+16>>2]=s[L+16>>2];s[p+20>>2]=s[L+20>>2];L=p+(A*24|0)|0;s[L+0>>2]=s[n+288>>2];s[L+4>>2]=s[n+292>>2];s[L+8>>2]=s[n+296>>2];s[L+12>>2]=s[n+300>>2];s[L+16>>2]=s[n+304>>2];s[L+20>>2]=s[n+308>>2];L=_}A=A+1|0}while((A|0)<(L|0));f[p+16>>2]=-1.0000000150474662e30;if((L|0)>1){V=+f[p+4>>2];A=1;do{G=+f[p+(A*24|0)>>2]- +f[p>>2];tt=+f[p+(A*24|0)+4>>2]-V;nt=+f[p+(A*24|0)+8>>2]- +f[p+8>>2];f[p+(A*24|0)+16>>2]=((z*tt-R*G)*N+(k*(R*nt-U*tt)+C*(U*G-z*nt)))/+X(+(G*G+tt*tt+nt*nt));A=A+1|0}while((A|0)<(L|0))}s[n+272>>2]=s[p+0>>2];s[n+276>>2]=s[p+4>>2];s[n+280>>2]=s[p+8>>2];s[n+284>>2]=s[p+12>>2];jS(n+72|0,n+272|0,1,L+ -1|0);L=s[w>>2]|0;s[5004]=(s[5004]|0)+1;p=cM(43)|0;if((p|0)==0)p=0;else{s[(p+19&-16)+ -4>>2]=p;p=p+19&-16}A=s[w>>2]|0;s[p+0>>2]=s[L+0>>2];s[p+4>>2]=s[L+4>>2];s[p+8>>2]=s[L+8>>2];s[p+12>>2]=s[L+12>>2];s[p+16>>2]=s[L+16>>2];s[p+20>>2]=s[L+20>>2];s[5004]=(s[5004]|0)+1;L=cM(67)|0;if((L|0)==0)L=0;else{s[(L+19&-16)+ -4>>2]=L;L=L+19&-16}O=0;while(1){et=L+(O*24|0)|0;Z=p+(O*24|0)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];s[et+16>>2]=s[Z+16>>2];s[et+20>>2]=s[Z+20>>2];if((O|0)==0)break;else O=O+1|0}if((p|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[p+ -4>>2]|0)}_=L+24|0;s[_+0>>2]=s[A+24>>2];s[_+4>>2]=s[A+28>>2];s[_+8>>2]=s[A+32>>2];s[_+12>>2]=s[A+36>>2];s[_+16>>2]=s[A+40>>2];s[_+20>>2]=s[A+44>>2];_=s[b>>2]|0;if((_|0)==2){A=2;p=273;break}else{D=2;A=2;M=2;p=2}while(1){o:do if((D|0)>1){et=s[w>>2]|0;O=et+(p*24|0)|0;R=+f[O>>2];U=+f[et+(p*24|0)+4>>2];z=+f[et+(p*24|0)+8>>2];while(1){et=D+ -2|0;P=D+ -1|0;G=+f[L+(et*24|0)>>2];tt=G- +f[L+(P*24|0)>>2];K=+f[L+(et*24|0)+4>>2];J=K- +f[L+(P*24|0)+4>>2];nt=+f[L+(et*24|0)+8>>2];Q=nt- +f[L+(P*24|0)+8>>2];if((tt*(K-U)-J*(G-R))*N+(k*(J*(nt-z)-Q*(K-U))+C*(Q*(G-R)-tt*(nt-z)))>0)break;if((P|0)>1){D=P;A=P}else{D=P;A=P;break o}}do if((D|0)==(M|0)){P=(M|0)==0?1:M<<1;if((M|0)>=(P|0)){D=M;break}do if((P|0)==0)H=0;else{s[5004]=(s[5004]|0)+1;M=cM((P*24|3)+16|0)|0;if((M|0)==0){H=0;M=A;break}s[(M+19&-16)+ -4>>2]=M;H=M+19&-16;M=A}while(0);if((M|0)>0){_=0;do{et=H+(_*24|0)|0;Z=L+(_*24|0)|0;s[et+0>>2]=s[Z+0>>2];s[et+4>>2]=s[Z+4>>2];s[et+8>>2]=s[Z+8>>2];s[et+12>>2]=s[Z+12>>2];s[et+16>>2]=s[Z+16>>2];s[et+20>>2]=s[Z+20>>2];_=_+1|0}while((_|0)!=(M|0))}if((L|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0)}_=s[b>>2]|0;D=A;M=P;L=H}while(0);D=L+(D*24|0)|0;s[D+0>>2]=s[O+0>>2];s[D+4>>2]=s[O+4>>2];s[D+8>>2]=s[O+8>>2];s[D+12>>2]=s[O+12>>2];s[D+16>>2]=s[O+16>>2];s[D+20>>2]=s[O+20>>2];A=A+1|0;D=A}while(0);p=p+1|0;if((p|0)==(_|0)){p=272;break}}}while(0);if((p|0)==272)if((A|0)>0)p=273;else p=295;if((p|0)==273){D=0;_=0;M=0;p=0;do{O=L+(p*24|0)+20|0;do if((D|0)==(_|0)){P=(_|0)==0?1:_<<1;if((_|0)>=(P|0)){D=_;break}do if((P|0)==0)D=0;else{s[5004]=(s[5004]|0)+1;D=cM((P<<2|3)+16|0)|0;if((D|0)==0){D=0;break}s[(D+19&-16)+ -4>>2]=D;D=D+19&-16}while(0);if((_|0)>0){H=0;do{B=D+(H<<2)|0;if((B|0)!=0)s[B>>2]=s[M+(H<<2)>>2];H=H+1|0}while((H|0)!=(_|0))}if((M|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[M+ -4>>2]|0);s[y>>2]=0}r[n+36>>0]=1;s[y>>2]=D;s[n+28>>2]=P;M=D;D=_;_=P}while(0);P=M+(D<<2)|0;if((P|0)!=0){s[P>>2]=s[O>>2];D=s[n+24>>2]|0}D=D+1|0;s[n+24>>2]=D;H=s[b>>2]|0;u:do if((H|0)>0){P=s[w>>2]|0;O=s[O>>2]|0;B=0;while(1){j=P+(B*24|0)+20|0;B=B+1|0;if((s[j>>2]|0)==(O|0))break;if((B|0)>=(H|0))break u}s[j>>2]=-1}while(0);p=p+1|0}while((p|0)<(A|0));_=s[b>>2]|0;p=295}a:do if((p|0)==295){p=0;if((_|0)>0){D=s[w>>2]|0;P=s[l>>2]|0;M=0;while(1){O=s[D+(M*24|0)+20>>2]|0;if(!((O|0)==-1|(P|0)<1)){A=0;do{H=0;while(1){if((s[x+(H<<2)>>2]|0)==(A|0))break;H=H+1|0;if((H|0)>=(T|0)){p=303;break}}do if((p|0)==303){p=0;H=s[v+(A*36|0)+4>>2]|0;if((H|0)<=0)break;B=s[v+(A*36|0)+12>>2]|0;j=0;do{if((s[B+(j<<2)>>2]|0)==(O|0)){A=1;break a}j=j+1|0}while((j|0)<(H|0))}while(0);A=A+1|0}while((A|0)<(P|0))}M=M+1|0;if((M|0)>=(_|0)){p=307;break}}}else p=307}while(0);if((p|0)==307){p=0;A=s[e+52>>2]|0;O=s[A+28>>2]|0;if((O|0)==(s[A+32>>2]|0)){PS(A+24|0,(O|0)==0?1:O<<1);O=s[A+28>>2]|0}M=(s[A+36>>2]|0)+(O*36|0)|0;if((M|0)!=0){BS(M,n+20|0);s[M+20>>2]=s[n+40>>2];s[M+24>>2]=s[n+44>>2];s[M+28>>2]=s[n+48>>2];s[M+32>>2]=s[n+52>>2];O=s[A+28>>2]|0}s[A+28>>2]=O+1;A=0}if((L|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0)}L=s[y>>2]|0;if((L|0)!=0){if((r[n+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0)}s[y>>2]=0}L=s[w>>2]|0;if((L|0)!=0){if((r[m>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[L+ -4>>2]|0)}s[w>>2]=0}r[m>>0]=1;s[w>>2]=0;s[b>>2]=0;s[n+80>>2]=0;if(A&(T|0)>0)p=324}else if((T|0)>0)p=324;if((p|0)==324){p=0;L=0;do{A=s[x+(L<<2)>>2]|0;BS(n+288|0,v+(A*36|0)|0);A=v+(A*36|0)+20|0;s[E+0>>2]=s[A+0>>2];s[E+4>>2]=s[A+4>>2];s[E+8>>2]=s[A+8>>2];s[E+12>>2]=s[A+12>>2];A=s[e+52>>2]|0;O=s[A+28>>2]|0;if((O|0)==(s[A+32>>2]|0)){PS(A+24|0,(O|0)==0?1:O<<1);O=s[A+28>>2]|0}M=(s[A+36>>2]|0)+(O*36|0)|0;if((M|0)!=0){BS(M,n+288|0);s[M+20>>2]=s[E+0>>2];s[M+24>>2]=s[E+4>>2];s[M+28>>2]=s[E+8>>2];s[M+32>>2]=s[E+12>>2];O=s[A+28>>2]|0}s[A+28>>2]=O+1;A=s[n+300>>2]|0;if((A|0)!=0){if((r[n+304>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[A+ -4>>2]|0)}s[n+300>>2]=0}L=L+1|0}while((L|0)<(T|0))}if((x|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0)}if((S|0)==0){d=g;break}}}}else d=0}else d=0;e=s[e+52>>2]|0;s[e+64>>2]=0;s[e+68>>2]=0;s[e+72>>2]=0;s[e+76>>2]=0;g=s[e+28>>2]|0;if((g|0)>0){y=g;S=0;w=0;_=0;j=0;D=0;B=0;H=0;P=0;M=0;T=0;O=0;x=0;m=0;while(1){L=s[e+36>>2]|0;g=s[L+(m*36|0)+4>>2]|0;if((g|0)>0){b=m&65535;y=m|-65536;A=0;while(1){E=A+1|0;F=s[L+(m*36|0)+12>>2]|0;q=s[F+(A<<2)>>2]&65535;F=s[F+(((E|0)==(g|0)?0:E)<<2)>>2]&65535;A=q<<16>>16<F<<16>>16?q:F;L=q<<16>>16<F<<16>>16?F:q;Y=q<<16>>16<F<<16>>16?q:F;q=q<<16>>16<F<<16>>16?F:q;F=_+ -1|0;f:do if((((Y&65535)<<16)+(q<<16>>16)&F)>>>0<S>>>0?(a=s[M+((((Y&65535)<<16)+(q<<16>>16)&F)<<2)>>2]|0,!((a|0)==-1)):0){I=a;while(1){if(q<<16>>16==(i[H+(I<<2)>>1]|0)?Y<<16>>16==(i[H+(I<<2)+2>>1]|0):0)break;I=s[x+(I<<2)>>2]|0;if((I|0)==-1){I=0;break f}}if(!((I|0)==-1))I=j+(I<<2)|0;else I=0}else I=0;while(0);et=s[e+16>>2]|0;C=+f[et+(Y<<16>>16<<4)>>2]- +f[et+(q<<16>>16<<4)>>2];N=+f[et+(Y<<16>>16<<4)+4>>2]- +f[et+(q<<16>>16<<4)+4>>2];k=+f[et+(Y<<16>>16<<4)+8>>2]- +f[et+(q<<16>>16<<4)+8>>2];R=1/+X(+(C*C+N*N+k*k));Y=s[e+48>>2]|0;l:do if((Y|0)>0){q=s[e+56>>2]|0;Z=0;while(1){U=+f[q+(Z<<4)>>2];z=+f[q+(Z<<4)+8>>2];do if(!(+W(+(U-C*R))>1e-6)){if(+W(+(+f[q+(Z<<4)+4>>2]-N*R))>1e-6)break;if(!(+W(+(z-k*R))>1e-6))break l}while(0);do if(!(+W(+(C*R+U))>1e-6)){if(+W(+(N*R+ +f[q+(Z<<4)+4>>2]))>1e-6)break;if(!(+W(+(k*R+z))>1e-6))break l}while(0);Z=Z+1|0;if((Z|0)>=(Y|0)){p=359;break}}}else p=359;while(0);if((p|0)==359){p=0;do if((Y|0)==(s[e+52>>2]|0)){q=(Y|0)==0?1:Y<<1;if((Y|0)>=(q|0))break;if((q|0)==0)Z=0;else{s[5004]=(s[5004]|0)+1;Y=cM((q<<4|3)+16|0)|0;if((Y|0)==0)Z=0;else{s[(Y+19&-16)+ -4>>2]=Y;Z=Y+19&-16}Y=s[e+48>>2]|0}if((Y|0)>0){et=0;do{rt=Z+(et<<4)|0;it=(s[e+56>>2]|0)+(et<<4)|0;s[rt+0>>2]=s[it+0>>2];s[rt+4>>2]=s[it+4>>2];s[rt+8>>2]=s[it+8>>2];s[rt+12>>2]=s[it+12>>2];et=et+1|0}while((et|0)!=(Y|0))}Y=s[e+56>>2]|0;if((Y|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[Y+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=Z;s[e+52>>2]=q;Y=s[e+48>>2]|0}while(0);it=s[e+56>>2]|0;f[it+(Y<<4)>>2]=C*R;f[it+(Y<<4)+4>>2]=N*R;f[it+(Y<<4)+8>>2]=k*R;f[it+(Y<<4)+12>>2]=0;s[e+48>>2]=(s[e+48>>2]|0)+1}c:do if((I|0)==0){q=((A&65535)<<16)+(L<<16>>16)&F;h:do if(q>>>0<S>>>0){F=s[M+(q<<2)>>2]|0;if((F|0)==-1)break;while(1){if(L<<16>>16==(i[H+(F<<2)>>1]|0)?A<<16>>16==(i[H+(F<<2)+2>>1]|0):0)break;F=s[x+(F<<2)>>2]|0;if((F|0)==-1)break h}if((F|0)==-1)break;it=j+(F<<2)|0;i[it>>1]=y;i[it+2>>1]=y>>>16;break c}while(0);do if((w|0)==(_|0)){F=(_|0)==0?1:_<<1;if((_|0)>=(F|0)){Y=_;F=_;break}do if((F|0)==0)I=0;else{s[5004]=(s[5004]|0)+1;I=cM((F<<2|3)+16|0)|0;if((I|0)==0){I=0;break}s[(I+19&-16)+ -4>>2]=I;I=I+19&-16}while(0);if((_|0)>0){Y=0;do{Z=I+(Y<<2)|0;if((Z|0)!=0){it=j+(Y<<2)|0;it=u[it>>1]|u[it+2>>1]<<16;i[Z>>1]=it;i[Z+2>>1]=it>>>16}Y=Y+1|0}while((Y|0)!=(_|0))}if((j|0)==0){Y=_;j=I;break}s[5006]=(s[5006]|0)+1;hM(s[j+ -4>>2]|0);Y=_;j=I}else{Y=w;F=_}while(0);I=j+(Y<<2)|0;if((I|0)!=0){i[I>>1]=y;i[I+2>>1]=y>>>16;Y=w}I=Y+1|0;do if((D|0)==(B|0)){B=(D|0)==0?1:D<<1;if((D|0)>=(B|0)){B=D;break}do if((B|0)==0)Y=0;else{s[5004]=(s[5004]|0)+1;Y=cM((B<<2|3)+16|0)|0;if((Y|0)==0){Y=0;break}s[(Y+19&-16)+ -4>>2]=Y;Y=Y+19&-16}while(0);if((D|0)>0){et=0;do{Z=Y+(et<<2)|0;if((Z|0)!=0){it=H+(et<<2)|0;it=u[it>>1]|u[it+2>>1]<<16;i[Z>>1]=it;i[Z+2>>1]=it>>>16}et=et+1|0}while((et|0)!=(D|0))}if((H|0)==0){H=Y;break}s[5006]=(s[5006]|0)+1;hM(s[H+ -4>>2]|0);H=Y}while(0);Y=H+(D<<2)|0;if((Y|0)!=0){i[Y>>1]=(A&65535)<<16|L&65535;i[Y+2>>1]=((A&65535)<<16|L&65535)>>>16}D=D+1|0;if((_|0)<(F|0)){do if((S|0)<(F|0)){if((S|0)<=(F|0)){do if((P|0)<(F|0)){do if((F|0)==0)_=0;else{s[5004]=(s[5004]|0)+1;_=cM((F<<2|3)+16|0)|0;if((_|0)==0){_=0;break}s[(_+19&-16)+ -4>>2]=_;_=_+19&-16}while(0);if((S|0)>0){P=0;do{q=_+(P<<2)|0;if((q|0)!=0)s[q>>2]=s[M+(P<<2)>>2];P=P+1|0}while((P|0)!=(S|0))}if((M|0)==0){P=F;M=_;break}s[5006]=(s[5006]|0)+1;hM(s[M+ -4>>2]|0);P=F;M=_}while(0);q=S;do{_=M+(q<<2)|0;if((_|0)!=0)s[_>>2]=0;q=q+1|0}while((q|0)!=(F|0))}if((T|0)<(F|0)){do if((O|0)<(F|0)){do if((F|0)==0)_=0;else{s[5004]=(s[5004]|0)+1;O=cM((F<<2|3)+16|0)|0;if((O|0)==0){_=0;break}s[(O+19&-16)+ -4>>2]=O;_=O+19&-16}while(0);if((T|0)>0){O=0;do{q=_+(O<<2)|0;if((q|0)!=0)s[q>>2]=s[x+(O<<2)>>2];O=O+1|0}while((O|0)!=(T|0))}if((x|0)==0){O=F;x=_;break}s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0);O=F;x=_}while(0);do{_=x+(T<<2)|0;if((_|0)!=0)s[_>>2]=0;T=T+1|0}while((T|0)!=(F|0))}if((F|0)>0){it=F<<2;vM(M|0,-1,it|0)|0;vM(x|0,-1,it|0)|0}if((S|0)<=0){S=F;T=F;break}_=F+ -1|0;T=0;do{it=M+(((u[H+(T<<2)+2>>1]<<16)+(i[H+(T<<2)>>1]|0)&_)<<2)|0;s[x+(T<<2)>>2]=s[it>>2];s[it>>2]=T;T=T+1|0}while((T|0)!=(S|0));S=F;T=F}while(0);q=((A&65535)<<16)+(L<<16>>16)&F+ -1}_=M+(q<<2)|0;s[x+(w<<2)>>2]=s[_>>2];s[_>>2]=w;w=I;_=F}else i[I+2>>1]=b;while(0);if((E|0)>=(g|0))break;L=s[e+36>>2]|0;A=E}g=s[e+28>>2]|0}else g=y;m=m+1|0;if((m|0)>=(g|0))break;else y=g}if((g|0)>0){p=s[e+36>>2]|0;m=s[e+16>>2]|0;R=0;a=0;do{w=s[p+(a*36|0)+4>>2]|0;b=s[p+(a*36|0)+12>>2]|0;y=s[b>>2]|0;if((w+ -2|0)>=1){k=+f[e+64>>2];C=+f[e+68>>2];N=+f[e+72>>2];E=1;do{rt=s[b+(E<<2)>>2]|0;E=E+1|0;it=s[b+(((E|0)%(w|0)|0)<<2)>>2]|0;U=+f[m+(y<<4)>>2];z=+f[m+(rt<<4)>>2];$=+f[m+(y<<4)+4>>2];J=+f[m+(rt<<4)+4>>2];Q=+f[m+(y<<4)+8>>2];G=+f[m+(rt<<4)+8>>2];V=+f[m+(it<<4)>>2];K=+f[m+(it<<4)+4>>2];tt=+f[m+(it<<4)+8>>2];nt=+X(+(((U-z)*($-K)-($-J)*(U-V))*((U-z)*($-K)-($-J)*(U-V))+((($-J)*(Q-tt)-(Q-G)*($-K))*(($-J)*(Q-tt)-(Q-G)*($-K))+((Q-G)*(U-V)-(U-z)*(Q-tt))*((Q-G)*(U-V)-(U-z)*(Q-tt)))))*.5;k=k+(U+z+V)*.3333333432674408*nt;f[e+64>>2]=k;C=($+J+K)*.3333333432674408*nt+C;f[e+68>>2]=C;N=nt*(Q+G+tt)*.3333333432674408+N;f[e+72>>2]=N;R=R+nt}while((E|0)!=(w+ -1|0))}a=a+1|0}while((a|0)<(g|0))}else R=0}else{R=0;j=0;H=0;M=0;x=0}C=1/R;R=C*+f[e+64>>2];f[e+64>>2]=R;k=C*+f[e+68>>2];f[e+68>>2]=k;C=C*+f[e+72>>2];f[e+72>>2]=C;f[e+96>>2]=3.4028234663852886e38;if((g|0)>0){p=s[e+36>>2]|0;U=3.4028234663852886e38;a=0;while(1){N=+W(+(+f[p+(a*36|0)+32>>2]+(+f[p+(a*36|0)+20>>2]*R+ +f[p+(a*36|0)+24>>2]*k+ +f[p+(a*36|0)+28>>2]*C)));if(N<U)f[e+96>>2]=N;else N=U;a=a+1|0;if((a|0)>=(g|0))break;else U=N}}else N=3.4028234663852886e38;a=s[e+8>>2]|0;if((a|0)>0){p=s[e+16>>2]|0;U=-3.4028234663852886e38;z=-3.4028234663852886e38;V=-3.4028234663852886e38;R=3.4028234663852886e38;k=3.4028234663852886e38;C=3.4028234663852886e38;m=0;do{nt=+f[p+(m<<4)>>2];R=nt<R?nt:R;U=nt>U?nt:U;nt=+f[p+(m<<4)+4>>2];k=nt<k?nt:k;z=nt>z?nt:z;nt=+f[p+(m<<4)+8>>2];C=nt<C?nt:C;V=nt>V?nt:V;m=m+1|0}while((m|0)<(a|0))}else{U=-3.4028234663852886e38;z=-3.4028234663852886e38;V=-3.4028234663852886e38;R=3.4028234663852886e38;k=3.4028234663852886e38;C=3.4028234663852886e38}f[e+100>>2]=U+R;f[e+104>>2]=z+k;f[e+108>>2]=C+V;f[e+112>>2]=0;R=U-R;k=z-k;C=V-C;f[e+116>>2]=R;f[e+120>>2]=k;f[e+124>>2]=C;f[e+128>>2]=0;N=N/1.7320507764816284;if(R<k)a=k<C?2:1;else a=R<C?2:0;p=e+(a<<2)+116|0;C=(+f[p>>2]*.5-N)*.0009765625;f[e+88>>2]=N;f[e+84>>2]=N;f[e+80>>2]=N;k=+f[p>>2]*.5;p=e+(a<<2)+80|0;f[p>>2]=k;m=0;while(1){if(qN(e)|0){p=470;break}k=k-C;f[p>>2]=k;m=m+1|0;if((m|0)>=1024){p=469;break}}p:do if((p|0)==469){f[e+88>>2]=N;f[e+84>>2]=N;f[e+80>>2]=N}else if((p|0)==470){N=(+f[e+96>>2]-N)*.0009765625;a=1<<a&3;R=+f[e+((1<<a&3)<<2)+80>>2];p=0;while(1){C=+f[e+(a<<2)+80>>2];f[e+(a<<2)+80>>2]=N+C;k=N+ +f[e+((1<<a&3)<<2)+80>>2];f[e+((1<<a&3)<<2)+80>>2]=k;p=p+1|0;if(!(qN(e)|0))break;if((p|0)>=1024)break p;else R=k}f[e+(a<<2)+80>>2]=C;f[e+((1<<a&3)<<2)+80>>2]=R}while(0);if((H|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[H+ -4>>2]|0)}if((j|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[j+ -4>>2]|0)}if((x|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0)}if((M|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[M+ -4>>2]|0)}if((d|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[d+ -4>>2]|0)}d=s[l>>2]|0;if((d|0)>0){m=0;do{a=v+(m*36|0)+4|0;p=v+(m*36|0)+12|0;g=s[p>>2]|0;e=v+(m*36|0)+16|0;if((g|0)!=0){if((r[e>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[g+ -4>>2]|0)}s[p>>2]=0}r[e>>0]=1;s[p>>2]=0;s[a>>2]=0;s[v+(m*36|0)+8>>2]=0;m=m+1|0}while((m|0)!=(d|0));v=s[t>>2]|0}if((v|0)!=0){if((r[n+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[v+ -4>>2]|0)}s[t>>2]=0}r[n+164>>0]=1;s[t>>2]=0;s[l>>2]=0;s[n+156>>2]=0;if((h|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}HS(n+196|0);if((o|0)==0){c=n;return 1}s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0);c=n;return 1}function AS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;r=c;c=c+2048|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;o=+f[n>>2];u=+f[n+4>>2];a=+f[n+8>>2];if(o*o+u*u+a*a<9999999747378752e-20){o=1;u=0;a=0}else{v=1/+X(+(o*o+u*u+a*a));o=o*v;u=u*v;a=a*v}if((dD[s[(s[t>>2]|0)+96>>2]&127](t)|0)<=0){c=r;return}n=0;l=-0xde0b6b000000000;do{if(((dD[s[(s[t>>2]|0)+96>>2]&127](t)|0)-n|0)<128){h=(dD[s[(s[t>>2]|0)+96>>2]&127](t)|0)-n|0;if((h|0)>0)i=7;else{v=-3.4028234663852886e38;d=-1}}else{h=128;i=7}if((i|0)==7){i=0;p=0;do{WD[s[(s[t>>2]|0)+108>>2]&127](t,p,r+(p<<4)|0);p=p+1|0}while((p|0)!=(h|0));p=0;v=-3.4028234663852886e38;d=-1;do{m=o*+f[r+(p<<4)>>2]+u*+f[r+(p<<4)+4>>2]+a*+f[r+(p<<4)+8>>2];g=m>v;d=g?p:d;v=g?m:v;p=p+1|0}while((p|0)!=(h|0))}if(v>l){g=r+(d<<4)|0;s[e+0>>2]=s[g+0>>2];s[e+4>>2]=s[g+4>>2];s[e+8>>2]=s[g+8>>2];s[e+12>>2]=s[g+12>>2];l=v}n=n+128|0}while((n|0)<(dD[s[(s[t>>2]|0)+96>>2]&127](t)|0));c=r;return}function OS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;o=c;c=c+2048|0;if((r|0)>0)u=0;else{c=o;return}do{f[n+(u<<4)+12>>2]=-0xde0b6b000000000;u=u+1|0}while((u|0)!=(r|0));a=0;do{if((dD[s[(s[e>>2]|0)+96>>2]&127](e)|0)>0){d=t+(a<<4)|0;v=t+(a<<4)+4|0;u=t+(a<<4)+8|0;h=n+(a<<4)+12|0;l=n+(a<<4)|0;p=0;do{if(((dD[s[(s[e>>2]|0)+96>>2]&127](e)|0)-p|0)<128){m=(dD[s[(s[e>>2]|0)+96>>2]&127](e)|0)-p|0;if((m|0)>0)i=8;else{S=-3.4028234663852886e38;y=-1}}else{m=128;i=8}if((i|0)==8){i=0;y=0;do{WD[s[(s[e>>2]|0)+108>>2]&127](e,y,o+(y<<4)|0);y=y+1|0}while((y|0)!=(m|0));b=+f[d>>2];g=+f[v>>2];E=+f[u>>2];w=0;S=-3.4028234663852886e38;y=-1;do{x=b*+f[o+(w<<4)>>2]+g*+f[o+(w<<4)+4>>2]+E*+f[o+(w<<4)+8>>2];T=x>S;y=T?w:y;S=T?x:S;w=w+1|0}while((w|0)!=(m|0))}if(S>+f[h>>2]){T=o+(y<<4)|0;s[l+0>>2]=s[T+0>>2];s[l+4>>2]=s[T+4>>2];s[l+8>>2]=s[T+8>>2];s[l+12>>2]=s[T+12>>2];f[h>>2]=S}p=p+128|0}while((p|0)<(dD[s[(s[e>>2]|0)+96>>2]&127](e)|0))}a=a+1|0}while((a|0)!=(r|0));c=o;return}function MS(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+96|0;u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);f[r+32>>2]=1;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=1;s[r+56>>2]=0;s[r+60>>2]=0;s[r+64>>2]=0;s[r+68>>2]=0;f[r+72>>2]=1;a=r+76|0;s[a+0>>2]=0;s[a+4>>2]=0;s[a+8>>2]=0;s[a+12>>2]=0;s[a+16>>2]=0;JD[s[(s[e>>2]|0)+8>>2]&127](e,r+32|0,r+16|0,r);o=(u+(+f[r>>2]- +f[r+16>>2])*.5)*2;i=(u+(+f[r+4>>2]- +f[r+20>>2])*.5)*2;u=(u+(+f[r+8>>2]- +f[r+24>>2])*.5)*2;f[n>>2]=t*.0833333283662796*(i*i+u*u);f[n+4>>2]=t*.0833333283662796*(o*o+u*u);f[n+8>>2]=t*.0833333283662796*(o*o+i*i);f[n+12>>2]=0;c=r;return}function _S(e){e=e|0;var t=0,n=0,i=0,o=0;t=c;c=c+96|0;r[e+88>>0]=1;if((r[15960]|0)==0?(Zt(15960)|0)!=0:0){f[3966]=1;s[3967]=0;s[3968]=0;s[3969]=0;s[3970]=0;f[3971]=1;s[3972]=0;s[3973]=0;s[3974]=0;s[3975]=0;f[3976]=1;f[3977]=0;f[3978]=-1;s[3979]=0;s[3980]=0;s[3981]=0;s[3982]=0;f[3983]=-1;s[3984]=0;s[3985]=0;s[3986]=0;s[3987]=0;f[3988]=-1;f[3989]=0;sn(15960)}i=t+0|0;n=i+96|0;do{s[i>>2]=0;i=i+4|0}while((i|0)<(n|0));JD[s[(s[e>>2]|0)+76>>2]&127](e,15864,t,6);o=+f[e+44>>2];f[e+72>>2]=+f[t>>2]+o;f[e+56>>2]=+f[t+48>>2]-o;f[e+76>>2]=+f[t+20>>2]+o;f[e+60>>2]=+f[t+68>>2]-o;f[e+80>>2]=+f[t+40>>2]+o;f[e+64>>2]=+f[t+88>>2]-o;c=t;return}function DS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;i=c;m=+CD[s[(s[e>>2]|0)+48>>2]&15](e);S=+f[e+72>>2];E=+f[e+56>>2];b=+f[e+76>>2];y=+f[e+60>>2];v=+f[e+80>>2];d=+f[e+64>>2];_=+f[t>>2];C=+W(+_);M=+f[t+4>>2];N=+W(+M);h=+f[t+8>>2];p=+W(+h);O=+f[t+16>>2];T=+W(+O);A=+f[t+20>>2];x=+W(+A);a=+f[t+24>>2];l=+W(+a);L=+f[t+32>>2];w=+W(+L);k=+f[t+36>>2];g=+W(+k);o=+f[t+40>>2];u=+W(+o);h=(S+E)*.5*_+(b+y)*.5*M+(v+d)*.5*h+ +f[t+48>>2];a=(S+E)*.5*O+(b+y)*.5*A+(v+d)*.5*a+ +f[t+52>>2];o=(S+E)*.5*L+(b+y)*.5*k+(v+d)*.5*o+ +f[t+56>>2];p=(m+(S-E)*.5)*C+(m+(b-y)*.5)*N+(m+(v-d)*.5)*p;l=(m+(S-E)*.5)*T+(m+(b-y)*.5)*x+(m+(v-d)*.5)*l;u=(m+(S-E)*.5)*w+(m+(b-y)*.5)*g+(m+(v-d)*.5)*u;f[n>>2]=h-p;f[n+4>>2]=a-l;f[n+8>>2]=o-u;f[n+12>>2]=0;f[r>>2]=p+h;f[r+4>>2]=l+a;f[r+8>>2]=u+o;f[r+12>>2]=0;c=i;return}function PS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;n=c;if((s[e+8>>2]|0)>=(t|0)){c=n;return}if((t|0)!=0?(s[5004]=(s[5004]|0)+1,i=cM((t*36|3)+16|0)|0,(i|0)!=0):0){s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}else i=0;a=s[e+4>>2]|0;if((a|0)>0){u=0;do{o=i+(u*36|0)|0;if((o|0)!=0){p=s[e+12>>2]|0;BS(o,p+(u*36|0)|0);p=p+(u*36|0)+20|0;s[o+20>>2]=s[p+0>>2];s[o+24>>2]=s[p+4>>2];s[o+28>>2]=s[p+8>>2];s[o+32>>2]=s[p+12>>2]}u=u+1|0}while((u|0)!=(a|0));p=s[e+4>>2]|0;if((p|0)>0){h=0;do{l=s[e+12>>2]|0;u=l+(h*36|0)+4|0;a=l+(h*36|0)+12|0;o=s[a>>2]|0;f=l+(h*36|0)+16|0;if((o|0)!=0){if((r[f>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[a>>2]=0}r[f>>0]=1;s[a>>2]=0;s[u>>2]=0;s[l+(h*36|0)+8>>2]=0;h=h+1|0}while((h|0)!=(p|0));o=e+12|0}else o=e+12|0}else o=e+12|0;u=s[o>>2]|0;if((u|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[o>>2]=0}r[e+16>>0]=1;s[o>>2]=i;s[e+8>>2]=t;c=n;return}function HS(e){e=e|0;var t=0,n=0;t=c;n=s[e+52>>2]|0;if((n|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;n=s[e+12>>2]|0;if((n|0)==0){r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;n=e+8|0;s[n>>2]=0;c=t;return}if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+12>>2]=0;r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;n=e+8|0;s[n>>2]=0;c=t;return}function BS(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;i=c;r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;n=s[t+4>>2]|0;if((n|0)<=0){s[e+4>>2]=n;c=i;return}s[5004]=(s[5004]|0)+1;o=cM((n<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}a=s[e+4>>2]|0;if((a|0)>0){u=0;do{f=o+(u<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+12>>2]|0)+(u<<2)>>2];u=u+1|0}while((u|0)!=(a|0))}u=s[e+12>>2]|0;if((u|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=o;s[e+8>>2]=n;u=0;do{a=o+(u<<2)|0;if((a|0)!=0)s[a>>2]=0;u=u+1|0}while((u|0)!=(n|0));s[e+4>>2]=n;e=0;do{u=o+(e<<2)|0;if((u|0)!=0)s[u>>2]=s[(s[t+12>>2]|0)+(e<<2)>>2];e=e+1|0}while((e|0)!=(n|0));c=i;return}function jS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;i=c;c=c+32|0;p=s[e+12>>2]|0;o=+f[p+(((r+n|0)/2|0)*24|0)>>2];u=+f[p+(((r+n|0)/2|0)*24|0)+4>>2];a=+f[p+(((r+n|0)/2|0)*24|0)+8>>2];h=+f[p+(((r+n|0)/2|0)*24|0)+16>>2];l=s[p+(((r+n|0)/2|0)*24|0)+20>>2]|0;d=n;v=r;while(1){e:while(1){m=+f[p+(d*24|0)+16>>2];do if(m!=h){if(!(m<h))break e}else{y=+f[t>>2];E=+f[p+(d*24|0)>>2]-y;g=+f[t+4>>2];w=+f[p+(d*24|0)+4>>2]-g;m=+f[t+8>>2];b=+f[p+(d*24|0)+8>>2]-m;if(E*E+w*w+b*b!=(o-y)*(o-y)+(u-g)*(u-g)+(a-m)*(a-m))if(E*E+w*w+b*b<(o-y)*(o-y)+(u-g)*(u-g)+(a-m)*(a-m))break;else break e;else if((s[p+(d*24|0)+20>>2]|0)<(l|0))break;else break e}while(0);d=d+1|0}t:while(1){m=+f[p+(v*24|0)+16>>2];do if(h!=m){if(!(h<m))break t}else{g=+f[t>>2];b=+f[t+4>>2];m=+f[t+8>>2];y=+f[p+(v*24|0)>>2]-g;w=+f[p+(v*24|0)+4>>2]-b;E=+f[p+(v*24|0)+8>>2]-m;if((o-g)*(o-g)+(u-b)*(u-b)+(a-m)*(a-m)!=y*y+w*w+E*E)if((o-g)*(o-g)+(u-b)*(u-b)+(a-m)*(a-m)<y*y+w*w+E*E)break;else break t;else if((l|0)<(s[p+(v*24|0)+20>>2]|0))break;else break t}while(0);v=v+ -1|0}if((d|0)<=(v|0)){S=p+(d*24|0)|0;s[i+0>>2]=s[S+0>>2];s[i+4>>2]=s[S+4>>2];s[i+8>>2]=s[S+8>>2];s[i+12>>2]=s[S+12>>2];s[i+16>>2]=s[S+16>>2];s[i+20>>2]=s[S+20>>2];p=p+(v*24|0)|0;s[S+0>>2]=s[p+0>>2];s[S+4>>2]=s[p+4>>2];s[S+8>>2]=s[p+8>>2];s[S+12>>2]=s[p+12>>2];s[S+16>>2]=s[p+16>>2];s[S+20>>2]=s[p+20>>2];p=(s[e+12>>2]|0)+(v*24|0)|0;s[p+0>>2]=s[i+0>>2];s[p+4>>2]=s[i+4>>2];s[p+8>>2]=s[i+8>>2];s[p+12>>2]=s[i+12>>2];s[p+16>>2]=s[i+16>>2];s[p+20>>2]=s[i+20>>2];d=d+1|0;v=v+ -1|0}if((d|0)>(v|0))break;p=s[e+12>>2]|0}if((v|0)>(n|0))jS(e,t,n,v);if((d|0)>=(r|0)){c=i;return}jS(e,t,d,r);c=i;return}function FS(e,t,n){e=e|0;t=t|0;n=n|0;var o=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0;o=c;c=c+128|0;h=s[e+56>>2]|0;if((n-t|0)==1){if((r[e+60>>0]|0)==0){O=(s[e+96>>2]|0)+(h<<6)+0|0;E=(s[e+76>>2]|0)+(t<<6)+0|0;g=O+64|0;do{s[O>>2]=s[E>>2];O=O+4|0;E=E+4|0}while((O|0)<(g|0))}else{j=(s[e+136>>2]|0)+(h<<4)|0;B=(s[e+116>>2]|0)+(t<<4)|0;s[j+0>>2]=s[B+0>>2];s[j+4>>2]=s[B+4>>2];s[j+8>>2]=s[B+8>>2];s[j+12>>2]=s[B+12>>2]}s[e+56>>2]=(s[e+56>>2]|0)+1;c=o;return}if((t|0)<(n|0)){d=(r[e+60>>0]|0)==0;b=0;w=0;C=0;v=t;do{if(d){j=s[e+76>>2]|0;T=+f[j+(v<<6)>>2];N=+f[j+(v<<6)+16>>2];S=+f[j+(v<<6)+4>>2];x=+f[j+(v<<6)+20>>2];k=+f[j+(v<<6)+8>>2];y=+f[j+(v<<6)+24>>2]}else{j=s[e+116>>2]|0;S=+f[e+36>>2];k=+f[e+40>>2];M=+f[e+44>>2];N=+f[e+4>>2];x=+f[e+8>>2];y=+f[e+12>>2];T=+(u[j+(v<<4)>>1]|0)/S+N;N=+(u[j+(v<<4)+6>>1]|0)/S+N;S=+(u[j+(v<<4)+2>>1]|0)/k+x;x=+(u[j+(v<<4)+8>>1]|0)/k+x;k=+(u[j+(v<<4)+4>>1]|0)/M+y;y=+(u[j+(v<<4)+10>>1]|0)/M+y}C=C+(N+T)*.5;b=b+(x+S)*.5;w=w+(y+k)*.5;v=v+1|0}while((v|0)!=(n|0));M=1/+(n-t|0);y=C*M;b=b*M;w=w*M;if(d){d=s[e+76>>2]|0;S=0;N=0;M=0;v=t;do{k=(+f[d+(v<<6)+16>>2]+ +f[d+(v<<6)>>2])*.5-y;L=(+f[d+(v<<6)+20>>2]+ +f[d+(v<<6)+4>>2])*.5-b;A=(+f[d+(v<<6)+24>>2]+ +f[d+(v<<6)+8>>2])*.5-w;S=S+k*k;N=N+L*L;M=M+A*A;v=v+1|0}while((v|0)!=(n|0));y=+(n-t|0)}else{v=s[e+116>>2]|0;T=+f[e+36>>2];k=+f[e+40>>2];A=+f[e+44>>2];C=+f[e+4>>2];L=+f[e+8>>2];x=+f[e+12>>2];S=0;N=0;M=0;d=t;do{q=(+(u[v+(d<<4)+6>>1]|0)/T+C+(+(u[v+(d<<4)>>1]|0)/T+C))*.5-y;I=(+(u[v+(d<<4)+8>>1]|0)/k+L+(+(u[v+(d<<4)+2>>1]|0)/k+L))*.5-b;F=(+(u[v+(d<<4)+10>>1]|0)/A+x+(+(u[v+(d<<4)+4>>1]|0)/A+x))*.5-w;S=S+q*q;N=N+I*I;M=M+F*F;d=d+1|0}while((d|0)!=(n|0));y=+(n-t|0)}}else{M=0;N=0;S=0;y=+(n-t|0)}w=1/(y+ -1);y=S*w;b=N*w;w=M*w;if(y<b)d=b<w?2:1;else d=y<w?2:0;s[o+16>>2]=0;s[o+20>>2]=0;s[o+24>>2]=0;s[o+28>>2]=0;if((t|0)<(n|0)){m=(r[e+60>>0]|0)==0;w=0;b=0;y=0;v=t;do{if(m){j=s[e+76>>2]|0;N=+f[j+(v<<6)>>2];T=+f[j+(v<<6)+16>>2];S=+f[j+(v<<6)+4>>2];C=+f[j+(v<<6)+20>>2];x=+f[j+(v<<6)+8>>2];k=+f[j+(v<<6)+24>>2]}else{j=s[e+116>>2]|0;S=+f[e+36>>2];x=+f[e+40>>2];q=+f[e+44>>2];T=+f[e+4>>2];C=+f[e+8>>2];k=+f[e+12>>2];N=+(u[j+(v<<4)>>1]|0)/S+T;T=+(u[j+(v<<4)+6>>1]|0)/S+T;S=+(u[j+(v<<4)+2>>1]|0)/x+C;C=+(u[j+(v<<4)+8>>1]|0)/x+C;x=+(u[j+(v<<4)+4>>1]|0)/q+k;k=+(u[j+(v<<4)+10>>1]|0)/q+k}w=w+(T+N)*.5;b=(C+S)*.5+b;y=(k+x)*.5+y;v=v+1|0}while((v|0)!=(n|0));f[o+16>>2]=w;f[o+20>>2]=b;f[o+24>>2]=y}else{w=0;b=0;y=0}f[o+16>>2]=1/+(n-t|0)*w;f[o+20>>2]=1/+(n-t|0)*b;f[o+24>>2]=1/+(n-t|0)*y;y=+f[o+16+(d<<2)>>2];if((t|0)<(n|0)){d=o+(d<<2)|0;m=t;v=t;do{g=(r[e+60>>0]|0)==0;if(g){j=s[e+76>>2]|0;x=+f[j+(m<<6)>>2];T=+f[j+(m<<6)+16>>2];w=+f[j+(m<<6)+4>>2];S=+f[j+(m<<6)+20>>2];b=+f[j+(m<<6)+8>>2];N=+f[j+(m<<6)+24>>2]}else{j=s[e+116>>2]|0;w=+f[e+36>>2];b=+f[e+40>>2];q=+f[e+44>>2];T=+f[e+4>>2];S=+f[e+8>>2];N=+f[e+12>>2];x=+(u[j+(m<<4)>>1]|0)/w+T;T=+(u[j+(m<<4)+6>>1]|0)/w+T;w=+(u[j+(m<<4)+2>>1]|0)/b+S;S=+(u[j+(m<<4)+8>>1]|0)/b+S;b=+(u[j+(m<<4)+4>>1]|0)/q+N;N=+(u[j+(m<<4)+10>>1]|0)/q+N}f[o>>2]=(T+x)*.5;f[o+4>>2]=(S+w)*.5;f[o+8>>2]=(N+b)*.5;f[o+12>>2]=0;if(+f[d>>2]>y){if(g){_=s[e+76>>2]|0;D=_+(m<<6)|0;O=o+32|0;E=D+0|0;g=O+64|0;do{s[O>>2]=s[E>>2];O=O+4|0;E=E+4|0}while((O|0)<(g|0));O=D+0|0;E=_+(v<<6)+0|0;g=O+64|0;do{s[O>>2]=s[E>>2];O=O+4|0;E=E+4|0}while((O|0)<(g|0));O=(s[e+76>>2]|0)+(v<<6)+0|0;E=o+32|0;g=O+64|0;do{s[O>>2]=s[E>>2];O=O+4|0;E=E+4|0}while((O|0)<(g|0))}else{B=s[e+116>>2]|0;j=B+(m<<4)|0;s[o+96>>2]=s[j+0>>2];s[o+100>>2]=s[j+4>>2];s[o+104>>2]=s[j+8>>2];s[o+108>>2]=s[j+12>>2];B=B+(v<<4)|0;s[j+0>>2]=s[B+0>>2];s[j+4>>2]=s[B+4>>2];s[j+8>>2]=s[B+8>>2];s[j+12>>2]=s[B+12>>2];j=(s[e+116>>2]|0)+(v<<4)|0;s[j+0>>2]=s[o+96>>2];s[j+4>>2]=s[o+100>>2];s[j+8>>2]=s[o+104>>2];s[j+12>>2]=s[o+108>>2]}v=v+1|0}m=m+1|0}while((m|0)!=(n|0))}else v=t;if(!((v|0)>(((n-t|0)/3|0)+t|0)?(v|0)<(n+ -1-((n-t|0)/3|0)|0):0))v=(n-t>>1)+t|0;d=s[e+56>>2]|0;do if((r[e+60>>0]|0)==0){m=(s[e+96>>2]|0)+(d<<6)|0;s[m+0>>2]=s[e+20>>2];s[m+4>>2]=s[e+24>>2];s[m+8>>2]=s[e+28>>2];s[m+12>>2]=s[e+32>>2];m=s[e+56>>2]|0;if((r[e+60>>0]|0)==0){m=(s[e+96>>2]|0)+(m<<6)+16|0;s[m+0>>2]=s[e+4>>2];s[m+4>>2]=s[e+8>>2];s[m+8>>2]=s[e+12>>2];s[m+12>>2]=s[e+16>>2];m=s[e+56>>2]|0;break}else{g=s[e+136>>2]|0;E=e+4|0;x=+f[e+8>>2];b=+f[e+12>>2];S=+f[e+36>>2];y=+f[e+40>>2];w=+f[e+44>>2];p=46;break}}else{g=s[e+136>>2]|0;x=+f[e+8>>2];b=+f[e+12>>2];S=+f[e+36>>2];y=+f[e+40>>2];I=(+f[e+24>>2]-x)*y;w=+f[e+44>>2];q=(+f[e+28>>2]-b)*w;i[g+(d<<4)>>1]=~~((+f[e+20>>2]- +f[e+4>>2])*S)&65534;i[g+(d<<4)+2>>1]=~~I&65534;i[g+(d<<4)+4>>1]=~~q&65534;m=d;E=e+4|0;p=46}while(0);if((p|0)==46){q=+f[E>>2];i[g+(m<<4)+6>>1]=~~((q-q)*S+1)&65535|1;i[g+(m<<4)+8>>1]=~~((x-x)*y+1)&65535|1;i[g+(m<<4)+10>>1]=~~((b-b)*w+1)&65535|1}if((t|0)<(n|0)){p=r[e+60>>0]|0;g=t;do{if(p<<24>>24==0){E=s[e+76>>2]|0;C=+f[E+(g<<6)>>2];N=+f[E+(g<<6)+4>>2];T=+f[E+(g<<6)+8>>2];x=+f[E+(g<<6)+12>>2];S=+f[E+(g<<6)+16>>2];w=+f[E+(g<<6)+20>>2];b=+f[E+(g<<6)+24>>2];y=+f[E+(g<<6)+28>>2];E=s[e+96>>2]|0;O=E+(m<<6)|0;if(C<+f[O>>2])f[O>>2]=C;O=E+(m<<6)+4|0;if(N<+f[O>>2])f[O>>2]=N;O=E+(m<<6)+8|0;if(T<+f[O>>2])f[O>>2]=T;O=E+(m<<6)+12|0;if(x<+f[O>>2])f[O>>2]=x;O=E+(m<<6)+16|0;if(+f[O>>2]<S)f[O>>2]=S;O=E+(m<<6)+20|0;if(+f[O>>2]<w)f[O>>2]=w;O=E+(m<<6)+24|0;if(+f[O>>2]<b)f[O>>2]=b;E=E+(m<<6)+28|0;if(+f[E>>2]<y)f[E>>2]=y}else{E=s[e+116>>2]|0;S=+f[e+36>>2];C=+f[e+40>>2];M=+f[e+44>>2];x=+f[e+4>>2];k=+f[e+8>>2];F=+f[e+12>>2];T=+f[e+4>>2];L=+f[e+8>>2];I=+f[e+12>>2];N=+f[e+36>>2];A=+f[e+40>>2];q=+f[e+44>>2];B=~~((+(u[E+(g<<4)>>1]|0)/S+x-T)*N)&65534;P=~~((+(u[E+(g<<4)+2>>1]|0)/C+k-L)*A)&65534;_=~~((+(u[E+(g<<4)+4>>1]|0)/M+F-I)*q)&65534;H=(~~((+(u[E+(g<<4)+6>>1]|0)/S+x-T)*N+1)&65535|1)&65535;D=(~~((+(u[E+(g<<4)+8>>1]|0)/C+k-L)*A+1)&65535|1)&65535;E=(~~((+(u[E+(g<<4)+10>>1]|0)/M+F-I)*q+1)&65535|1)&65535;O=s[e+136>>2]|0;j=O+(m<<4)|0;if((u[j>>1]|0)>(B&65535))i[j>>1]=B;B=O+(m<<4)+6|0;if((u[B>>1]|0)<(H&65535))i[B>>1]=H;H=O+(m<<4)+2|0;if((u[H>>1]|0)>(P&65535))i[H>>1]=P;P=O+(m<<4)+8|0;if((u[P>>1]|0)<(D&65535))i[P>>1]=D;D=O+(m<<4)+4|0;if((u[D>>1]|0)>(_&65535))i[D>>1]=_;O=O+(m<<4)+10|0;if((u[O>>1]|0)<(E&65535))i[O>>1]=E}g=g+1|0}while((g|0)!=(n|0))}m=m+1|0;s[e+56>>2]=m;FS(e,t,v);t=s[e+56>>2]|0;FS(e,v,n);n=(s[e+56>>2]|0)-h|0;do if((r[e+60>>0]|0)!=0){if((n<<4|0)>2048){h=s[e+136>>2]|0;v=s[h+(m<<4)+12>>2]|0;v=(v|0)>-1?1:0-v|0;p=s[h+(t<<4)+12>>2]|0;p=(p|0)>-1?1:0-p|0;if((v<<4|0)<2049){g=s[e+152>>2]|0;if((g|0)==(s[e+156>>2]|0)?(l=(g|0)==0?1:g<<1,(g|0)<(l|0)):0){if((l|0)==0){E=0;_=g}else{s[5004]=(s[5004]|0)+1;E=cM(l<<5|19)|0;if((E|0)==0)E=0;else{s[(E+19&-16)+ -4>>2]=E;E=E+19&-16}_=s[e+152>>2]|0}if((_|0)>0){O=0;do{j=E+(O<<5)|0;B=(s[e+160>>2]|0)+(O<<5)|0;s[j+0>>2]=s[B+0>>2];s[j+4>>2]=s[B+4>>2];s[j+8>>2]=s[B+8>>2];s[j+12>>2]=s[B+12>>2];s[j+16>>2]=s[B+16>>2];s[j+20>>2]=s[B+20>>2];s[j+24>>2]=s[B+24>>2];s[j+28>>2]=s[B+28>>2];O=O+1|0}while((O|0)!=(_|0))}O=s[e+160>>2]|0;if((O|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[O+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=E;s[e+156>>2]=l;l=s[e+152>>2]|0}else l=g;s[e+152>>2]=l+1;l=(s[e+160>>2]|0)+(g<<5)|0;s[l+0>>2]=s[o+96>>2];s[l+4>>2]=s[o+100>>2];s[l+8>>2]=s[o+104>>2];s[l+12>>2]=s[o+108>>2];s[l+16>>2]=s[o+112>>2];s[l+20>>2]=s[o+116>>2];s[l+24>>2]=s[o+120>>2];s[l+28>>2]=s[o+124>>2];l=s[e+160>>2]|0;i[l+(g<<5)>>1]=i[h+(m<<4)>>1]|0;i[l+(g<<5)+2>>1]=i[h+(m<<4)+2>>1]|0;i[l+(g<<5)+4>>1]=i[h+(m<<4)+4>>1]|0;i[l+(g<<5)+6>>1]=i[h+(m<<4)+6>>1]|0;i[l+(g<<5)+8>>1]=i[h+(m<<4)+8>>1]|0;i[l+(g<<5)+10>>1]=i[h+(m<<4)+10>>1]|0;s[l+(g<<5)+12>>2]=m;s[l+(g<<5)+16>>2]=v;l=e+152|0}else l=e+152|0;if((p<<4|0)<2049){v=s[l>>2]|0;if((v|0)==(s[e+156>>2]|0)?(a=(v|0)==0?1:v<<1,(v|0)<(a|0)):0){if((a|0)==0){m=0;E=v}else{s[5004]=(s[5004]|0)+1;m=cM(a<<5|19)|0;if((m|0)==0)m=0;else{s[(m+19&-16)+ -4>>2]=m;m=m+19&-16}E=s[l>>2]|0}if((E|0)>0){g=0;do{j=m+(g<<5)|0;B=(s[e+160>>2]|0)+(g<<5)|0;s[j+0>>2]=s[B+0>>2];s[j+4>>2]=s[B+4>>2];s[j+8>>2]=s[B+8>>2];s[j+12>>2]=s[B+12>>2];s[j+16>>2]=s[B+16>>2];s[j+20>>2]=s[B+20>>2];s[j+24>>2]=s[B+24>>2];s[j+28>>2]=s[B+28>>2];g=g+1|0}while((g|0)!=(E|0))}g=s[e+160>>2]|0;if((g|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[g+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=m;s[e+156>>2]=a;a=s[l>>2]|0}else a=v;s[l>>2]=a+1;j=(s[e+160>>2]|0)+(v<<5)|0;s[j+0>>2]=s[o+32>>2];s[j+4>>2]=s[o+36>>2];s[j+8>>2]=s[o+40>>2];s[j+12>>2]=s[o+44>>2];s[j+16>>2]=s[o+48>>2];s[j+20>>2]=s[o+52>>2];s[j+24>>2]=s[o+56>>2];s[j+28>>2]=s[o+60>>2];j=s[e+160>>2]|0;i[j+(v<<5)>>1]=i[h+(t<<4)>>1]|0;i[j+(v<<5)+2>>1]=i[h+(t<<4)+2>>1]|0;i[j+(v<<5)+4>>1]=i[h+(t<<4)+4>>1]|0;i[j+(v<<5)+6>>1]=i[h+(t<<4)+6>>1]|0;i[j+(v<<5)+8>>1]=i[h+(t<<4)+8>>1]|0;i[j+(v<<5)+10>>1]=i[h+(t<<4)+10>>1]|0;s[j+(v<<5)+12>>2]=t;s[j+(v<<5)+16>>2]=p}s[e+168>>2]=s[l>>2];if((r[e+60>>0]|0)==0)break;else e=e+136|0}else e=e+136|0;s[(s[e>>2]|0)+(d<<4)+12>>2]=0-n;c=o;return}while(0);s[(s[e+96>>2]|0)+(d<<6)+32>>2]=n;c=o;return}function IS(e){e=e|0;var t=0;t=c;qS(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function qS(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=16080;n=s[e+160>>2]|0;if((n|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=0;s[e+152>>2]=0;s[e+156>>2]=0;n=s[e+136>>2]|0;if((n|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;n=s[e+116>>2]|0;if((n|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=0;s[e+108>>2]=0;s[e+112>>2]=0;n=s[e+96>>2]|0;if((n|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;n=s[e+76>>2]|0;if((n|0)==0){r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;n=e+72|0;s[n>>2]=0;c=t;return}if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+76>>2]=0;r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;n=e+72|0;s[n>>2]=0;c=t;return}function RS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,a=0;i=c;while(1){a=s[e+12>>2]|0;if(!(((u[r>>1]|0)>=(u[e>>1]|0)?(u[n>>1]|0)<=(u[e+6>>1]|0):0)&(u[n+4>>1]|0)<=(u[e+10>>1]|0)&(u[r+4>>1]|0)>=(u[e+4>>1]|0)&(u[n+2>>1]|0)<=(u[e+8>>1]|0)&(u[r+2>>1]|0)>=(u[e+2>>1]|0))){o=8;break}if((a|0)>-1)break;RS(e+16|0,t,n,r);a=s[e+28>>2]|0;if((a|0)>-1){e=e+32|0;continue}else{e=e+(1-a<<4)|0;continue}}if((o|0)==8){c=i;return}WD[s[(s[t>>2]|0)+8>>2]&127](t,a>>21,a&2097151);c=i;return}function US(e,t,n,r,i,o,u,a){e=e|0;t=t|0;n=n|0;r=+r;i=+i;o=+o;u=u|0;a=a|0;var l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0;l=c;c=c+32|0;d=+f[n>>2];v=+f[n+4>>2];P=+f[n+8>>2];V=+f[u>>2];w=(d>r?r:d)+V;q=+f[u+4>>2];m=(v>i?i:v)+q;R=+f[u+8>>2];y=(P>o?o:P)+R;U=+f[a>>2];E=(d<r?r:d)+U;z=+f[a+4>>2];g=(v<i?i:v)+z;W=+f[a+8>>2];b=(P<o?o:P)+W;p=1/+X(+((r-d)*(r-d)+(i-v)*(i-v)+(o-P)*(o-P)));if((r-d)*p==0)k=0xde0b6b000000000;else k=1/((r-d)*p);if((i-v)*p==0)C=0xde0b6b000000000;else C=1/((i-v)*p);if((o-P)*p==0)N=0xde0b6b000000000;else N=1/((o-P)*p);x=k<0&1;S=C<0&1;T=N<0&1;B=s[e+56>>2]|0;e:do if((B|0)>0){I=0;F=s[e+96>>2]|0;j=1;while(1){s[l+0>>2]=s[F+0>>2];s[l+4>>2]=s[F+4>>2];s[l+8>>2]=s[F+8>>2];s[l+12>>2]=s[F+12>>2];Q=F+16|0;s[l+16>>2]=s[Q+0>>2];s[l+20>>2]=s[Q+4>>2];s[l+24>>2]=s[Q+8>>2];s[l+28>>2]=s[Q+12>>2];f[l>>2]=+f[l>>2]-U;f[l+4>>2]=+f[l+4>>2]-z;f[l+8>>2]=+f[l+8>>2]-W;f[l+16>>2]=+f[l+16>>2]-V;f[l+20>>2]=+f[l+20>>2]-q;f[l+24>>2]=+f[l+24>>2]-R;if(!(w>+f[Q>>2])?!(E<+f[F>>2]):0)$=1;else $=0;if(!(!(y>+f[F+24>>2])?!(b<+f[F+8>>2]):0))$=0;if((((!(m>+f[F+20>>2])?!(g<+f[F+4>>2]|$^1):0)?(H=+f[n>>2],D=k*(+f[l+(x<<4)>>2]-H),H=k*(+f[l+((x^1)<<4)>>2]-H),h=+f[n+4>>2],_=C*(+f[l+(S<<4)+4>>2]-h),h=C*(+f[l+((S^1)<<4)+4>>2]-h),!(D>h|_>H)):0)?(M=_>D?_:D,A=h<H?h:H,L=+f[n+8>>2],O=N*(+f[l+(T<<4)+8>>2]-L),L=N*(+f[l+((T^1)<<4)+8>>2]-L),!(M>L|O>A)):0)?(O>M?O:M)<(o-P)*(o-P)*p+((r-d)*(r-d)*p+(i-v)*(i-v)*p):0){Q=(L<A?L:A)>0;J=s[F+32>>2]|0;if((J|0)==-1&Q){WD[s[(s[t>>2]|0)+8>>2]&127](t,s[F+36>>2]|0,s[F+40>>2]|0);B=s[e+56>>2]|0;$=24}else{K=(J|0)==-1;$=23}}else{J=s[F+32>>2]|0;K=(J|0)==-1;Q=0;$=23}if(($|0)==23){$=0;if(Q|K)$=24;else{I=J+I|0;F=F+(J<<6)|0}}if(($|0)==24){I=I+1|0;F=F+64|0}if((I|0)>=(B|0))break e;q=+f[u+4>>2];R=+f[u+8>>2];U=+f[a>>2];z=+f[a+4>>2];W=+f[a+8>>2];V=+f[u>>2];j=j+1|0}}else j=0;while(0);if((s[4028]|0)>=(j|0)){c=l;return}s[4028]=j;c=l;return}function zS(e,t,n,r,o,a,l,h,p){e=e|0;t=t|0;n=n|0;r=+r;o=+o;a=+a;l=l|0;h=h|0;p=p|0;var d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0,ut=0,at=0,ft=0,lt=0,ct=0;d=c;c=c+32|0;g=+f[n>>2];y=+f[n+4>>2];M=+f[n+8>>2];m=1/+X(+((r-g)*(r-g)+(o-y)*(o-y)+(a-M)*(a-M)));if((r-g)*m==0)k=0xde0b6b000000000;else k=1/((r-g)*m);if((o-y)*m==0)L=0xde0b6b000000000;else L=1/((o-y)*m);if((a-M)*m==0)A=0xde0b6b000000000;else A=1/((a-M)*m);v=k<0&1;_=L<0&1;O=A<0&1;ct=(g>r?r:g)+ +f[l>>2];lt=(y>o?o:y)+ +f[l+4>>2];ft=(M>a?a:M)+ +f[l+8>>2];ut=(g<r?r:g)+ +f[h>>2];rt=(y<o?o:y)+ +f[h+4>>2];Z=(M<a?a:M)+ +f[h+8>>2];ot=+f[e+4>>2];ct=ct<ot?ot:ct;nt=+f[e+8>>2];lt=lt<nt?nt:lt;Y=+f[e+12>>2];ft=ft<Y?Y:ft;at=+f[e+20>>2];it=+f[e+24>>2];et=+f[e+28>>2];st=+f[e+36>>2];tt=+f[e+40>>2];G=+f[e+44>>2];P=~~(((at<ct?at:ct)-ot)*st)&65534;j=~~(((it<lt?it:lt)-nt)*tt)&65534;H=~~(((et<ft?et:ft)-Y)*G)&65534;ut=ut<ot?ot:ut;rt=rt<nt?nt:rt;Z=Z<Y?Y:Z;D=(~~(((at<ut?at:ut)-ot)*st+1)&65535|1)&65535;F=(~~(((it<rt?it:rt)-nt)*tt+1)&65535|1)&65535;B=(~~(((et<Z?et:Z)-Y)*G+1)&65535|1)&65535;if((p|0)>0){I=0;R=s[e+136>>2]|0;q=0;do{q=q+1|0;W=R+6|0;K=i[R>>1]|0;Q=R+10|0;$=i[R+4>>1]|0;V=R+8|0;J=i[R+2>>1]|0;U=R+12|0;z=(s[U>>2]|0)>-1;if(((((D&65535)>=(K&65535)?(P&65535)<=(u[W>>1]|0):0)&(H&65535)<=(u[Q>>1]|0)&(B&65535)>=($&65535)&(j&65535)<=(u[V>>1]|0)&(F&65535)>=(J&65535)?(ut=+f[e+36>>2],ft=+f[e+40>>2],ct=+f[e+44>>2],at=+f[e+4>>2],lt=+f[e+8>>2],x=+f[e+12>>2],f[d+12>>2]=0,N=+(u[W>>1]|0)/ut+at,T=+(u[V>>1]|0)/ft+lt,C=+(u[Q>>1]|0)/ct+x,f[d+28>>2]=0,f[d>>2]=+(K&65535)/ut+at- +f[h>>2],f[d+4>>2]=+(J&65535)/ft+lt- +f[h+4>>2],f[d+8>>2]=+($&65535)/ct+x- +f[h+8>>2],f[d+16>>2]=N- +f[l>>2],f[d+20>>2]=T- +f[l+4>>2],f[d+24>>2]=C- +f[l+8>>2],C=+f[n>>2],T=k*(+f[d+(v<<4)>>2]-C),C=k*(+f[d+((v^1)<<4)>>2]-C),N=+f[n+4>>2],x=L*(+f[d+(_<<4)+4>>2]-N),N=L*(+f[d+((_^1)<<4)+4>>2]-N),!(T>N|x>C)):0)?(S=x>T?x:T,w=N<C?N:C,b=+f[n+8>>2],E=A*(+f[d+(O<<4)+8>>2]-b),b=A*(+f[d+((O^1)<<4)+8>>2]-b),!(S>b|E>w)):0)?(E>S?E:S)<(a-M)*(a-M)*m+((r-g)*(r-g)*m+(o-y)*(o-y)*m):0){V=!((b<w?b:w)>0);if(V|z^1)W=15;else{W=s[U>>2]|0;WD[s[(s[t>>2]|0)+8>>2]&127](t,W>>21,W&2097151);W=16}}else{V=1;W=15}if((W|0)==15){W=0;if(z|V^1)W=16;else{Q=s[U>>2]|0;I=I-Q|0;R=R+(0-Q<<4)|0}}if((W|0)==16){I=I+1|0;R=R+16|0}}while((I|0)<(p|0))}else q=0;if((s[4028]|0)>=(q|0)){c=d;return}s[4028]=q;c=d;return}function WS(e,t,n,o){e=e|0;t=t|0;n=n|0;o=o|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0;n=c;s[e+168>>2]=s[e+152>>2];s[t>>2]=16080;s[t+52>>2]=282;r[t+60>>0]=0;r[t+80>>0]=1;s[t+76>>2]=0;s[t+68>>2]=0;s[t+72>>2]=0;r[t+100>>0]=1;s[t+96>>2]=0;s[t+88>>2]=0;s[t+92>>2]=0;r[t+120>>0]=1;s[t+116>>2]=0;s[t+108>>2]=0;s[t+112>>2]=0;r[t+140>>0]=1;s[t+136>>2]=0;s[t+128>>2]=0;s[t+132>>2]=0;s[t+144>>2]=0;r[t+164>>0]=1;s[t+160>>2]=0;s[t+152>>2]=0;s[t+156>>2]=0;s[t+168>>2]=0;f[t+4>>2]=-3.4028234663852886e38;f[t+8>>2]=-3.4028234663852886e38;f[t+12>>2]=-3.4028234663852886e38;f[t+16>>2]=0;f[t+20>>2]=3.4028234663852886e38;f[t+24>>2]=3.4028234663852886e38;f[t+28>>2]=3.4028234663852886e38;f[t+32>>2]=0;a=s[e+56>>2]|0;if(o){s[t+56>>2]=wM(a|0)|0;r[t+4>>0]=r[e+7>>0]|0;r[t+5>>0]=r[e+6>>0]|0;r[t+6>>0]=r[e+5>>0]|0;r[t+7>>0]=r[e+4>>0]|0;r[t+8>>0]=r[e+11>>0]|0;r[t+9>>0]=r[e+10>>0]|0;r[t+10>>0]=r[e+9>>0]|0;r[t+11>>0]=r[e+8>>0]|0;r[t+12>>0]=r[e+15>>0]|0;r[t+13>>0]=r[e+14>>0]|0;r[t+14>>0]=r[e+13>>0]|0;r[t+15>>0]=r[e+12>>0]|0;r[t+16>>0]=r[e+19>>0]|0;r[t+17>>0]=r[e+18>>0]|0;r[t+18>>0]=r[e+17>>0]|0;r[t+19>>0]=r[e+16>>0]|0;r[t+20>>0]=r[e+23>>0]|0;r[t+21>>0]=r[e+22>>0]|0;r[t+22>>0]=r[e+21>>0]|0;r[t+23>>0]=r[e+20>>0]|0;r[t+24>>0]=r[e+27>>0]|0;r[t+25>>0]=r[e+26>>0]|0;r[t+26>>0]=r[e+25>>0]|0;r[t+27>>0]=r[e+24>>0]|0;r[t+28>>0]=r[e+31>>0]|0;r[t+29>>0]=r[e+30>>0]|0;r[t+30>>0]=r[e+29>>0]|0;r[t+31>>0]=r[e+28>>0]|0;r[t+32>>0]=r[e+35>>0]|0;r[t+33>>0]=r[e+34>>0]|0;r[t+34>>0]=r[e+33>>0]|0;r[t+35>>0]=r[e+32>>0]|0;r[t+36>>0]=r[e+39>>0]|0;r[t+37>>0]=r[e+38>>0]|0;r[t+38>>0]=r[e+37>>0]|0;r[t+39>>0]=r[e+36>>0]|0;r[t+40>>0]=r[e+43>>0]|0;r[t+41>>0]=r[e+42>>0]|0;r[t+42>>0]=r[e+41>>0]|0;r[t+43>>0]=r[e+40>>0]|0;r[t+44>>0]=r[e+47>>0]|0;r[t+45>>0]=r[e+46>>0]|0;r[t+46>>0]=r[e+45>>0]|0;r[t+47>>0]=r[e+44>>0]|0;r[t+48>>0]=r[e+51>>0]|0;r[t+49>>0]=r[e+50>>0]|0;r[t+50>>0]=r[e+49>>0]|0;r[t+51>>0]=r[e+48>>0]|0;s[t+144>>2]=wM(s[e+144>>2]|0)|0;a=wM(s[e+168>>2]|0)|0}else{s[t+56>>2]=a;s[t+4>>2]=s[e+4>>2];s[t+8>>2]=s[e+8>>2];s[t+12>>2]=s[e+12>>2];s[t+16>>2]=s[e+16>>2];s[t+20>>2]=s[e+20>>2];s[t+24>>2]=s[e+24>>2];s[t+28>>2]=s[e+28>>2];s[t+32>>2]=s[e+32>>2];s[t+36>>2]=s[e+36>>2];s[t+40>>2]=s[e+40>>2];s[t+44>>2]=s[e+44>>2];s[t+48>>2]=s[e+48>>2];s[t+144>>2]=s[e+144>>2];a=s[e+168>>2]|0}s[t+168>>2]=a;r[t+60>>0]=r[e+60>>0]|0;a=s[e+56>>2]|0;if((r[e+60>>0]|0)==0){l=s[t+96>>2]|0;if((l|0)!=0){if((r[t+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[t+96>>2]=0}s[t+88>>2]=0;s[t+92>>2]=0;s[t+96>>2]=0;r[t+100>>0]=0;s[t+96>>2]=t+172;s[t+88>>2]=a;s[t+92>>2]=a;if(o)if((a|0)>0){l=s[e+96>>2]|0;p=t+172|0;h=0;do{d=l+(h<<6)|0;m=p+(h<<6)|0;r[m>>0]=r[d+3>>0]|0;r[m+1>>0]=r[d+2>>0]|0;r[m+2>>0]=r[d+1>>0]|0;r[m+3>>0]=r[d>>0]|0;m=l+(h<<6)+4|0;d=p+(h<<6)+4|0;r[d>>0]=r[m+3>>0]|0;r[d+1>>0]=r[m+2>>0]|0;r[d+2>>0]=r[m+1>>0]|0;r[d+3>>0]=r[m>>0]|0;d=l+(h<<6)+8|0;m=p+(h<<6)+8|0;r[m>>0]=r[d+3>>0]|0;r[m+1>>0]=r[d+2>>0]|0;r[m+2>>0]=r[d+1>>0]|0;r[m+3>>0]=r[d>>0]|0;m=l+(h<<6)+12|0;p=p+(h<<6)+12|0;r[p>>0]=r[m+3>>0]|0;r[p+1>>0]=r[m+2>>0]|0;r[p+2>>0]=r[m+1>>0]|0;r[p+3>>0]=r[m>>0]|0;p=s[e+96>>2]|0;m=p+(h<<6)+16|0;d=s[t+96>>2]|0;v=d+(h<<6)+16|0;r[v>>0]=r[m+3>>0]|0;r[v+1>>0]=r[m+2>>0]|0;r[v+2>>0]=r[m+1>>0]|0;r[v+3>>0]=r[m>>0]|0;v=p+(h<<6)+20|0;m=d+(h<<6)+20|0;r[m>>0]=r[v+3>>0]|0;r[m+1>>0]=r[v+2>>0]|0;r[m+2>>0]=r[v+1>>0]|0;r[m+3>>0]=r[v>>0]|0;m=p+(h<<6)+24|0;v=d+(h<<6)+24|0;r[v>>0]=r[m+3>>0]|0;r[v+1>>0]=r[m+2>>0]|0;r[v+2>>0]=r[m+1>>0]|0;r[v+3>>0]=r[m>>0]|0;p=p+(h<<6)+28|0;d=d+(h<<6)+28|0;r[d>>0]=r[p+3>>0]|0;r[d+1>>0]=r[p+2>>0]|0;r[d+2>>0]=r[p+1>>0]|0;r[d+3>>0]=r[p>>0]|0;l=s[e+96>>2]|0;d=wM(s[l+(h<<6)+32>>2]|0)|0;p=s[t+96>>2]|0;s[p+(h<<6)+32>>2]=d;s[p+(h<<6)+36>>2]=wM(s[l+(h<<6)+36>>2]|0)|0;s[p+(h<<6)+40>>2]=wM(s[l+(h<<6)+40>>2]|0)|0;h=h+1|0}while((h|0)!=(a|0))}else p=t+172|0;else if((a|0)>0){p=t+172|0;l=s[e+96>>2]|0;h=0;do{p=p+(h<<6)|0;m=l+(h<<6)|0;s[p+0>>2]=s[m+0>>2];s[p+4>>2]=s[m+4>>2];s[p+8>>2]=s[m+8>>2];s[p+12>>2]=s[m+12>>2];p=(s[t+96>>2]|0)+(h<<6)+16|0;m=(s[e+96>>2]|0)+(h<<6)+16|0;s[p+0>>2]=s[m+0>>2];s[p+4>>2]=s[m+4>>2];s[p+8>>2]=s[m+8>>2];s[p+12>>2]=s[m+12>>2];l=s[e+96>>2]|0;p=s[t+96>>2]|0;s[p+(h<<6)+32>>2]=s[l+(h<<6)+32>>2];s[p+(h<<6)+36>>2]=s[l+(h<<6)+36>>2];s[p+(h<<6)+40>>2]=s[l+(h<<6)+40>>2];h=h+1|0}while((h|0)!=(a|0))}else p=t+172|0;if((p|0)!=0){if((r[t+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[p+ -4>>2]|0)}s[t+96>>2]=0}s[t+88>>2]=0;s[t+92>>2]=0;s[t+96>>2]=0;r[t+100>>0]=0;a=a<<6}else{l=s[t+136>>2]|0;if((l|0)!=0){if((r[t+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[t+136>>2]=0}s[t+128>>2]=0;s[t+132>>2]=0;s[t+136>>2]=0;r[t+140>>0]=0;s[t+136>>2]=t+172;s[t+128>>2]=a;s[t+132>>2]=a;if(o){if((a|0)>0){l=s[e+136>>2]|0;h=0;do{m=u[l+(h<<4)>>1]|0;i[t+172+(h<<4)>>1]=m>>>8|m<<8;m=u[l+(h<<4)+2>>1]|0;i[t+172+(h<<4)+2>>1]=m>>>8|m<<8;m=u[l+(h<<4)+4>>1]|0;i[t+172+(h<<4)+4>>1]=m>>>8|m<<8;m=u[l+(h<<4)+6>>1]|0;i[t+172+(h<<4)+6>>1]=m>>>8|m<<8;m=u[l+(h<<4)+8>>1]|0;i[t+172+(h<<4)+8>>1]=m>>>8|m<<8;m=u[l+(h<<4)+10>>1]|0;i[t+172+(h<<4)+10>>1]=m>>>8|m<<8;s[t+172+(h<<4)+12>>2]=wM(s[l+(h<<4)+12>>2]|0)|0;h=h+1|0}while((h|0)!=(a|0))}}else if((a|0)>0){l=s[e+136>>2]|0;h=0;do{i[t+172+(h<<4)>>1]=i[l+(h<<4)>>1]|0;i[t+172+(h<<4)+2>>1]=i[l+(h<<4)+2>>1]|0;i[t+172+(h<<4)+4>>1]=i[l+(h<<4)+4>>1]|0;i[t+172+(h<<4)+6>>1]=i[l+(h<<4)+6>>1]|0;i[t+172+(h<<4)+8>>1]=i[l+(h<<4)+8>>1]|0;i[t+172+(h<<4)+10>>1]=i[l+(h<<4)+10>>1]|0;s[t+172+(h<<4)+12>>2]=s[l+(h<<4)+12>>2];h=h+1|0}while((h|0)!=(a|0))}s[t+128>>2]=0;s[t+132>>2]=0;s[t+136>>2]=0;r[t+140>>0]=0;a=a<<4}a=t+(a+172)|0;h=s[e+168>>2]|0;l=s[t+160>>2]|0;if((l|0)!=0){if((r[t+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[t+160>>2]=0}s[t+152>>2]=0;s[t+156>>2]=0;s[t+160>>2]=0;r[t+164>>0]=0;s[t+160>>2]=a;s[t+152>>2]=h;s[t+156>>2]=h;l=(s[e+168>>2]|0)>0;if(o){if(!l){s[t>>2]=0;s[t+152>>2]=0;s[t+156>>2]=0;s[t+160>>2]=0;r[t+164>>0]=0;c=n;return 1}l=s[e+160>>2]|0;o=0;do{m=u[l+(o<<5)>>1]|0;i[a+(o<<5)>>1]=m>>>8|m<<8;m=u[l+(o<<5)+2>>1]|0;i[a+(o<<5)+2>>1]=m>>>8|m<<8;m=u[l+(o<<5)+4>>1]|0;i[a+(o<<5)+4>>1]=m>>>8|m<<8;m=u[l+(o<<5)+6>>1]|0;i[a+(o<<5)+6>>1]=m>>>8|m<<8;m=u[l+(o<<5)+8>>1]|0;i[a+(o<<5)+8>>1]=m>>>8|m<<8;m=u[l+(o<<5)+10>>1]|0;i[a+(o<<5)+10>>1]=m>>>8|m<<8;s[a+(o<<5)+12>>2]=wM(s[l+(o<<5)+12>>2]|0)|0;s[a+(o<<5)+16>>2]=wM(s[l+(o<<5)+16>>2]|0)|0;o=o+1|0}while((o|0)<(s[e+168>>2]|0));s[t>>2]=0;s[t+152>>2]=0;s[t+156>>2]=0;s[t+160>>2]=0;r[t+164>>0]=0;c=n;return 1}else{if(!l){s[t>>2]=0;s[t+152>>2]=0;s[t+156>>2]=0;s[t+160>>2]=0;r[t+164>>0]=0;c=n;return 1}o=s[e+160>>2]|0;l=0;do{i[a+(l<<5)>>1]=i[o+(l<<5)>>1]|0;i[a+(l<<5)+2>>1]=i[o+(l<<5)+2>>1]|0;i[a+(l<<5)+4>>1]=i[o+(l<<5)+4>>1]|0;i[a+(l<<5)+6>>1]=i[o+(l<<5)+6>>1]|0;i[a+(l<<5)+8>>1]=i[o+(l<<5)+8>>1]|0;i[a+(l<<5)+10>>1]=i[o+(l<<5)+10>>1]|0;s[a+(l<<5)+12>>2]=s[o+(l<<5)+12>>2];s[a+(l<<5)+16>>2]=s[o+(l<<5)+16>>2];s[a+(l<<5)+20>>2]=0;s[a+(l<<5)+24>>2]=0;s[a+(l<<5)+28>>2]=0;l=l+1|0}while((l|0)<(s[e+168>>2]|0));s[t>>2]=0;s[t+152>>2]=0;s[t+156>>2]=0;s[t+160>>2]=0;r[t+164>>0]=0;c=n;return 1}return 0}function XS(e,t){e=e|0;t=t|0;var n=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;n=c;c=c+112|0;f[e+20>>2]=+f[t+16>>2];f[e+24>>2]=+f[t+20>>2];f[e+28>>2]=+f[t+24>>2];f[e+32>>2]=+f[t+28>>2];f[e+4>>2]=+f[t>>2];f[e+8>>2]=+f[t+4>>2];f[e+12>>2]=+f[t+8>>2];f[e+16>>2]=+f[t+12>>2];f[e+36>>2]=+f[t+32>>2];f[e+40>>2]=+f[t+36>>2];f[e+44>>2]=+f[t+40>>2];f[e+48>>2]=+f[t+44>>2];s[e+56>>2]=s[t+48>>2];r[e+60>>0]=(s[t+52>>2]|0)!=0&1;o=s[t+56>>2]|0;l=n+48|0;h=l+64|0;do{s[l>>2]=0;l=l+4|0}while((l|0)<(h|0));u=s[e+88>>2]|0;if((u|0)<(o|0)){if((s[e+92>>2]|0)<(o|0)){if((o|0)==0){p=0;d=u}else{s[5004]=(s[5004]|0)+1;a=cM(o<<6|19)|0;if((a|0)==0)p=0;else{s[(a+19&-16)+ -4>>2]=a;p=a+19&-16}d=s[e+88>>2]|0}if((d|0)>0){v=0;do{l=p+(v<<6)+0|0;a=(s[e+96>>2]|0)+(v<<6)+0|0;h=l+64|0;do{s[l>>2]=s[a>>2];l=l+4|0;a=a+4|0}while((l|0)<(h|0));v=v+1|0}while((v|0)!=(d|0))}a=s[e+96>>2]|0;if((a|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=p;s[e+92>>2]=o;p=e+96|0}else p=e+96|0;do{l=(s[p>>2]|0)+(u<<6)+0|0;a=n+48|0;h=l+64|0;do{s[l>>2]=s[a>>2];l=l+4|0;a=a+4|0}while((l|0)<(h|0));u=u+1|0}while((u|0)!=(o|0))}s[e+88>>2]=o;if((o|0)>0){l=s[e+96>>2]|0;u=0;a=s[t+64>>2]|0;while(1){f[l+(u<<6)+16>>2]=+f[a+16>>2];f[l+(u<<6)+20>>2]=+f[a+20>>2];f[l+(u<<6)+24>>2]=+f[a+24>>2];f[l+(u<<6)+28>>2]=+f[a+28>>2];f[l+(u<<6)>>2]=+f[a>>2];f[l+(u<<6)+4>>2]=+f[a+4>>2];f[l+(u<<6)+8>>2]=+f[a+8>>2];f[l+(u<<6)+12>>2]=+f[a+12>>2];s[l+(u<<6)+32>>2]=s[a+32>>2];s[l+(u<<6)+36>>2]=s[a+36>>2];s[l+(u<<6)+40>>2]=s[a+40>>2];u=u+1|0;if((u|0)==(o|0))break;else a=a+48|0}}o=s[t+60>>2]|0;s[n+32>>2]=0;s[n+36>>2]=0;s[n+40>>2]=0;s[n+44>>2]=0;u=s[e+128>>2]|0;if((u|0)<(o|0)){if((s[e+132>>2]|0)<(o|0)){if((o|0)==0){a=0;l=u}else{s[5004]=(s[5004]|0)+1;a=cM((o<<4|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}l=s[e+128>>2]|0}if((l|0)>0){h=0;do{v=a+(h<<4)|0;d=(s[e+136>>2]|0)+(h<<4)|0;s[v+0>>2]=s[d+0>>2];s[v+4>>2]=s[d+4>>2];s[v+8>>2]=s[d+8>>2];s[v+12>>2]=s[d+12>>2];h=h+1|0}while((h|0)!=(l|0))}l=s[e+136>>2]|0;if((l|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=a;s[e+132>>2]=o;a=e+136|0}else a=e+136|0;do{v=(s[a>>2]|0)+(u<<4)|0;s[v+0>>2]=s[n+32>>2];s[v+4>>2]=s[n+36>>2];s[v+8>>2]=s[n+40>>2];s[v+12>>2]=s[n+44>>2];u=u+1|0}while((u|0)!=(o|0))}s[e+128>>2]=o;if((o|0)>0){a=s[e+136>>2]|0;u=0;l=s[t+68>>2]|0;while(1){s[a+(u<<4)+12>>2]=s[l+12>>2];i[a+(u<<4)+6>>1]=i[l+6>>1]|0;i[a+(u<<4)+8>>1]=i[l+8>>1]|0;i[a+(u<<4)+10>>1]=i[l+10>>1]|0;i[a+(u<<4)>>1]=i[l>>1]|0;i[a+(u<<4)+2>>1]=i[l+2>>1]|0;i[a+(u<<4)+4>>1]=i[l+4>>1]|0;u=u+1|0;if((u|0)==(o|0))break;else l=l+16|0}}s[e+144>>2]=s[t+76>>2];o=s[t+80>>2]|0;u=s[e+152>>2]|0;if((u|0)<(o|0)){if((s[e+156>>2]|0)<(o|0)){if((o|0)==0){a=0;l=u}else{s[5004]=(s[5004]|0)+1;a=cM(o<<5|19)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}l=s[e+152>>2]|0}if((l|0)>0){h=0;do{v=a+(h<<5)|0;d=(s[e+160>>2]|0)+(h<<5)|0;s[v+0>>2]=s[d+0>>2];s[v+4>>2]=s[d+4>>2];s[v+8>>2]=s[d+8>>2];s[v+12>>2]=s[d+12>>2];s[v+16>>2]=s[d+16>>2];s[v+20>>2]=s[d+20>>2];s[v+24>>2]=s[d+24>>2];s[v+28>>2]=s[d+28>>2];h=h+1|0}while((h|0)!=(l|0))}l=s[e+160>>2]|0;if((l|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=a;s[e+156>>2]=o;a=e+160|0}else a=e+160|0;do{v=(s[a>>2]|0)+(u<<5)|0;s[v+0>>2]=s[n+0>>2];s[v+4>>2]=s[n+4>>2];s[v+8>>2]=s[n+8>>2];s[v+12>>2]=s[n+12>>2];s[v+16>>2]=s[n+16>>2];s[v+20>>2]=s[n+20>>2];s[v+24>>2]=s[n+24>>2];s[v+28>>2]=s[n+28>>2];u=u+1|0}while((u|0)!=(o|0))}s[e+152>>2]=o;if((o|0)<=0){c=n;return}u=s[e+160>>2]|0;e=0;t=s[t+72>>2]|0;while(1){i[u+(e<<5)+6>>1]=i[t+14>>1]|0;i[u+(e<<5)+8>>1]=i[t+16>>1]|0;i[u+(e<<5)+10>>1]=i[t+18>>1]|0;i[u+(e<<5)>>1]=i[t+8>>1]|0;i[u+(e<<5)+2>>1]=i[t+10>>1]|0;i[u+(e<<5)+4>>1]=i[t+12>>1]|0;s[u+(e<<5)+12>>2]=s[t>>2];s[u+(e<<5)+16>>2]=s[t+4>>2];e=e+1|0;if((e|0)==(o|0))break;else t=t+20|0}c=n;return}function VS(e,t){e=e|0;t=t|0;var n=0,o=0,u=0,a=0,h=0,p=0,d=0,v=0,m=0;n=c;c=c+112|0;f[e+20>>2]=+l[t+32>>3];f[e+24>>2]=+l[t+40>>3];f[e+28>>2]=+l[t+48>>3];f[e+32>>2]=+l[t+56>>3];f[e+4>>2]=+l[t>>3];f[e+8>>2]=+l[t+8>>3];f[e+12>>2]=+l[t+16>>3];f[e+16>>2]=+l[t+24>>3];f[e+36>>2]=+l[t+64>>3];f[e+40>>2]=+l[t+72>>3];f[e+44>>2]=+l[t+80>>3];f[e+48>>2]=+l[t+88>>3];s[e+56>>2]=s[t+96>>2];r[e+60>>0]=(s[t+100>>2]|0)!=0&1;o=s[t+104>>2]|0;h=n+48|0;p=h+64|0;do{s[h>>2]=0;h=h+4|0}while((h|0)<(p|0));u=s[e+88>>2]|0;if((u|0)<(o|0)){if((s[e+92>>2]|0)<(o|0)){if((o|0)==0){d=0;v=u}else{s[5004]=(s[5004]|0)+1;a=cM(o<<6|19)|0;if((a|0)==0)d=0;else{s[(a+19&-16)+ -4>>2]=a;d=a+19&-16}v=s[e+88>>2]|0}if((v|0)>0){m=0;do{h=d+(m<<6)+0|0;a=(s[e+96>>2]|0)+(m<<6)+0|0;p=h+64|0;do{s[h>>2]=s[a>>2];h=h+4|0;a=a+4|0}while((h|0)<(p|0));m=m+1|0}while((m|0)!=(v|0))}a=s[e+96>>2]|0;if((a|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=d;s[e+92>>2]=o;d=e+96|0}else d=e+96|0;do{h=(s[d>>2]|0)+(u<<6)+0|0;a=n+48|0;p=h+64|0;do{s[h>>2]=s[a>>2];h=h+4|0;a=a+4|0}while((h|0)<(p|0));u=u+1|0}while((u|0)!=(o|0))}s[e+88>>2]=o;if((o|0)>0){h=s[e+96>>2]|0;u=0;a=s[t+112>>2]|0;while(1){f[h+(u<<6)+16>>2]=+l[a+32>>3];f[h+(u<<6)+20>>2]=+l[a+40>>3];f[h+(u<<6)+24>>2]=+l[a+48>>3];f[h+(u<<6)+28>>2]=+l[a+56>>3];f[h+(u<<6)>>2]=+l[a>>3];f[h+(u<<6)+4>>2]=+l[a+8>>3];f[h+(u<<6)+8>>2]=+l[a+16>>3];f[h+(u<<6)+12>>2]=+l[a+24>>3];s[h+(u<<6)+32>>2]=s[a+64>>2];s[h+(u<<6)+36>>2]=s[a+68>>2];s[h+(u<<6)+40>>2]=s[a+72>>2];u=u+1|0;if((u|0)==(o|0))break;else a=a+80|0}}o=s[t+108>>2]|0;s[n+32>>2]=0;s[n+36>>2]=0;s[n+40>>2]=0;s[n+44>>2]=0;u=s[e+128>>2]|0;if((u|0)<(o|0)){if((s[e+132>>2]|0)<(o|0)){if((o|0)==0){a=0;h=u}else{s[5004]=(s[5004]|0)+1;a=cM((o<<4|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}h=s[e+128>>2]|0}if((h|0)>0){p=0;do{m=a+(p<<4)|0;v=(s[e+136>>2]|0)+(p<<4)|0;s[m+0>>2]=s[v+0>>2];s[m+4>>2]=s[v+4>>2];s[m+8>>2]=s[v+8>>2];s[m+12>>2]=s[v+12>>2];p=p+1|0}while((p|0)!=(h|0))}h=s[e+136>>2]|0;if((h|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=a;s[e+132>>2]=o;a=e+136|0}else a=e+136|0;do{m=(s[a>>2]|0)+(u<<4)|0;s[m+0>>2]=s[n+32>>2];s[m+4>>2]=s[n+36>>2];s[m+8>>2]=s[n+40>>2];s[m+12>>2]=s[n+44>>2];u=u+1|0}while((u|0)!=(o|0))}s[e+128>>2]=o;if((o|0)>0){a=s[e+136>>2]|0;u=0;h=s[t+116>>2]|0;while(1){s[a+(u<<4)+12>>2]=s[h+12>>2];i[a+(u<<4)+6>>1]=i[h+6>>1]|0;i[a+(u<<4)+8>>1]=i[h+8>>1]|0;i[a+(u<<4)+10>>1]=i[h+10>>1]|0;i[a+(u<<4)>>1]=i[h>>1]|0;i[a+(u<<4)+2>>1]=i[h+2>>1]|0;i[a+(u<<4)+4>>1]=i[h+4>>1]|0;u=u+1|0;if((u|0)==(o|0))break;else h=h+16|0}}s[e+144>>2]=s[t+120>>2];o=s[t+124>>2]|0;u=s[e+152>>2]|0;if((u|0)<(o|0)){if((s[e+156>>2]|0)<(o|0)){if((o|0)==0){a=0;h=u}else{s[5004]=(s[5004]|0)+1;a=cM(o<<5|19)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}h=s[e+152>>2]|0}if((h|0)>0){p=0;do{m=a+(p<<5)|0;v=(s[e+160>>2]|0)+(p<<5)|0;s[m+0>>2]=s[v+0>>2];s[m+4>>2]=s[v+4>>2];s[m+8>>2]=s[v+8>>2];s[m+12>>2]=s[v+12>>2];s[m+16>>2]=s[v+16>>2];s[m+20>>2]=s[v+20>>2];s[m+24>>2]=s[v+24>>2];s[m+28>>2]=s[v+28>>2];p=p+1|0}while((p|0)!=(h|0))}h=s[e+160>>2]|0;if((h|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=a;s[e+156>>2]=o;a=e+160|0}else a=e+160|0;do{m=(s[a>>2]|0)+(u<<5)|0;s[m+0>>2]=s[n+0>>2];s[m+4>>2]=s[n+4>>2];s[m+8>>2]=s[n+8>>2];s[m+12>>2]=s[n+12>>2];s[m+16>>2]=s[n+16>>2];s[m+20>>2]=s[n+20>>2];s[m+24>>2]=s[n+24>>2];s[m+28>>2]=s[n+28>>2];u=u+1|0}while((u|0)!=(o|0))}s[e+152>>2]=o;if((o|0)<=0){c=n;return}u=s[e+160>>2]|0;e=0;t=s[t+128>>2]|0;while(1){i[u+(e<<5)+6>>1]=i[t+14>>1]|0;i[u+(e<<5)+8>>1]=i[t+16>>1]|0;i[u+(e<<5)+10>>1]=i[t+18>>1]|0;i[u+(e<<5)>>1]=i[t+8>>1]|0;i[u+(e<<5)+2>>1]=i[t+10>>1]|0;i[u+(e<<5)+4>>1]=i[t+12>>1]|0;s[u+(e<<5)+12>>2]=s[t>>2];s[u+(e<<5)+16>>2]=s[t+4>>2];e=e+1|0;if((e|0)==(o|0))break;else t=t+20|0}c=n;return}function $S(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,u=0,a=0,l=0,h=0,p=0;r=c;f[t+16>>2]=+f[e+20>>2];f[t+20>>2]=+f[e+24>>2];f[t+24>>2]=+f[e+28>>2];f[t+28>>2]=+f[e+32>>2];f[t>>2]=+f[e+4>>2];f[t+4>>2]=+f[e+8>>2];f[t+8>>2]=+f[e+12>>2];f[t+12>>2]=+f[e+16>>2];f[t+32>>2]=+f[e+36>>2];f[t+36>>2]=+f[e+40>>2];f[t+40>>2]=+f[e+44>>2];f[t+44>>2]=+f[e+48>>2];s[t+48>>2]=s[e+56>>2];s[t+52>>2]=o[e+60>>0];s[t+56>>2]=s[e+88>>2];if((s[e+88>>2]|0)!=0){p=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+96>>2]|0)|0;s[t+64>>2]=p;if((p|0)!=0){p=s[e+88>>2]|0;u=xD[s[(s[n>>2]|0)+16>>2]&31](n,48,p)|0;if((p|0)>0){a=s[e+96>>2]|0;h=0;l=s[u+8>>2]|0;while(1){f[l+16>>2]=+f[a+(h<<6)+16>>2];f[l+20>>2]=+f[a+(h<<6)+20>>2];f[l+24>>2]=+f[a+(h<<6)+24>>2];f[l+28>>2]=+f[a+(h<<6)+28>>2];f[l>>2]=+f[a+(h<<6)>>2];f[l+4>>2]=+f[a+(h<<6)+4>>2];f[l+8>>2]=+f[a+(h<<6)+8>>2];f[l+12>>2]=+f[a+(h<<6)+12>>2];s[l+32>>2]=s[a+(h<<6)+32>>2];s[l+36>>2]=s[a+(h<<6)+36>>2];s[l+40>>2]=s[a+(h<<6)+40>>2];h=h+1|0;if((h|0)==(p|0))break;else l=l+48|0}}else a=s[e+96>>2]|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,u,16120,1497453121,a)}}else s[t+64>>2]=0;s[t+60>>2]=s[e+128>>2];if((s[e+128>>2]|0)!=0){p=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+136>>2]|0)|0;s[t+68>>2]=p;if((p|0)!=0){a=s[e+128>>2]|0;u=xD[s[(s[n>>2]|0)+16>>2]&31](n,16,a)|0;if((a|0)>0){l=s[e+136>>2]|0;p=0;h=s[u+8>>2]|0;while(1){s[h+12>>2]=s[l+(p<<4)+12>>2];i[h+6>>1]=i[l+(p<<4)+6>>1]|0;i[h+8>>1]=i[l+(p<<4)+8>>1]|0;i[h+10>>1]=i[l+(p<<4)+10>>1]|0;i[h>>1]=i[l+(p<<4)>>1]|0;i[h+2>>1]=i[l+(p<<4)+2>>1]|0;i[h+4>>1]=i[l+(p<<4)+4>>1]|0;p=p+1|0;if((p|0)==(a|0))break;else h=h+16|0}}else l=s[e+136>>2]|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,u,16144,1497453121,l)}}else s[t+68>>2]=0;s[t+76>>2]=s[e+144>>2];s[t+80>>2]=s[e+152>>2];if((s[e+152>>2]|0)==0){s[t+72>>2]=0;c=r;return 16192}p=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+160>>2]|0)|0;s[t+72>>2]=p;if((p|0)==0){c=r;return 16192}u=s[e+152>>2]|0;t=xD[s[(s[n>>2]|0)+16>>2]&31](n,20,u)|0;if((u|0)>0){e=s[e+160>>2]|0;l=0;a=s[t+8>>2]|0;while(1){i[a+14>>1]=i[e+(l<<5)+6>>1]|0;i[a+16>>1]=i[e+(l<<5)+8>>1]|0;i[a+18>>1]=i[e+(l<<5)+10>>1]|0;i[a+8>>1]=i[e+(l<<5)>>1]|0;i[a+10>>1]=i[e+(l<<5)+2>>1]|0;i[a+12>>1]=i[e+(l<<5)+4>>1]|0;s[a>>2]=s[e+(l<<5)+12>>2];s[a+4>>2]=s[e+(l<<5)+16>>2];l=l+1|0;if((l|0)==(u|0))break;else a=a+20|0}}else e=s[e+160>>2]|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,t,16168,1497453121,e);c=r;return 16192}function JS(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0;i=c;c=c+32|0;L=+f[t+16>>2];y=+f[t>>2];k=+f[t+20>>2];w=+f[t+4>>2];T=+f[t+24>>2];x=+f[t+8>>2];E=+f[t+32>>2];d=+f[t+36>>2];v=+f[t+40>>2];h=(k-w)*(v-x)-(T-x)*(d-w);a=(T-x)*(E-y)-(L-y)*(v-x);l=(L-y)*(d-w)-(k-w)*(E-y);f[i+16>>2]=h;f[i+20>>2]=a;f[i+24>>2]=l;f[i+28>>2]=0;N=+f[e+4>>2];S=+f[e+8>>2];m=+f[e+12>>2];o=h*N+a*S+l*m-(y*h+w*a+x*l);C=+f[e+20>>2];b=+f[e+24>>2];g=+f[e+28>>2];if(o*(h*C+a*b+l*g-(y*h+w*a+x*l))>=0){c=i;return}t=s[e+36>>2]|0;if(!((t&1|0)==0|!(o<=0))){c=i;return}u=o/(o-(h*C+a*b+l*g-(y*h+w*a+x*l)));if(!(u<+f[e+40>>2])){c=i;return}p=(h*h+a*a+l*l)*-9999999747378752e-20;y=y-(C*u+N*(1-u));w=w-(b*u+S*(1-u));x=x-(g*u+m*(1-u));L=L-(C*u+N*(1-u));k=k-(b*u+S*(1-u));T=T-(g*u+m*(1-u));if(!(l*(y*k-w*L)+(h*(w*T-x*k)+a*(x*L-y*T))>=p)){c=i;return}E=E-(C*u+N*(1-u));d=d-(b*u+S*(1-u));v=v-(g*u+m*(1-u));if(!(l*(L*d-k*E)+(h*(k*v-T*d)+a*(T*E-L*v))>=p)){c=i;return}if(!(l*(w*E-y*d)+(h*(x*d-w*v)+a*(y*v-x*E))>=p)){c=i;return}p=1/+X(+(h*h+a*a+l*l));f[i+16>>2]=h*p;f[i+20>>2]=a*p;f[i+24>>2]=l*p;A=s[(s[e>>2]|0)+12>>2]|0;if((t&2|0)!=0|!(o<=0)){f[e+40>>2]=+qD[A&3](e,i+16|0,u,n,r);c=i;return}else{f[i>>2]=-(h*p);f[i+4>>2]=-(a*p);f[i+8>>2]=-(l*p);f[i+12>>2]=0;f[e+40>>2]=+qD[A&3](e,i,u,n,r);c=i;return}}function KS(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0;o=c;c=c+672|0;s[o+576>>2]=0;f[o+580>>2]=1;f[o+584>>2]=1;f[o+588>>2]=1;f[o+592>>2]=0;s[o+620>>2]=0;s[o+568>>2]=16376;s[o+572>>2]=1;s[o+624>>2]=s[t+0>>2];s[o+628>>2]=s[t+4>>2];s[o+632>>2]=s[t+8>>2];s[o+636>>2]=s[t+12>>2];s[o+640>>2]=s[t+16>>2];s[o+644>>2]=s[t+20>>2];s[o+648>>2]=s[t+24>>2];s[o+652>>2]=s[t+28>>2];s[o+656>>2]=s[t+32>>2];s[o+660>>2]=s[t+36>>2];s[o+664>>2]=s[t+40>>2];s[o+668>>2]=s[t+44>>2];f[o+612>>2]=+f[e+204>>2];f[o+516>>2]=9999999747378752e-20;r[o+540>>0]=0;s[o+200>>2]=13248;t=s[e+4>>2]|0;s[o+176>>2]=10152;s[o+180>>2]=o+208;s[o+184>>2]=o+200;s[o+188>>2]=t;s[o+192>>2]=o+568;s[o+196>>2]=0;s[o>>2]=9440;s[o+168>>2]=0;f[o+164>>2]=1;f[o+172>>2]=+f[e+208>>2];if((ek(o+176|0,e+8|0,e+72|0,e+136|0,e+136|0,o)|0?(u=+f[o+132>>2],l=+f[o+136>>2],h=+f[o+140>>2],u*u+l*l+h*h>9999999747378752e-20):0)?(a=+f[o+164>>2],a<+f[e+200>>2]):0){p=1/+X(+(u*u+l*l+h*h));f[o+132>>2]=u*p;f[o+136>>2]=l*p;f[o+140>>2]=h*p;+LD[s[(s[e>>2]|0)+12>>2]&3](e,o+132|0,o+148|0,a,n,i)}s[o+568>>2]=15736;n=s[o+620>>2]|0;if((n|0)==0){c=o;return}lD[s[s[n>>2]>>2]&511](n);n=s[o+620>>2]|0;if((n|0)==0){c=o;return}s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0);c=o;return}function QS(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)==0){c=t;return}lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function GS(e){e=e|0;return}function YS(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function ZS(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)!=0){lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function ex(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+80>>2]&127](e,t,n,r);c=i;return}function tx(e,t,n){e=e|0;t=+t;n=n|0;e=c;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;c=e;return}function nx(e){e=e|0;return 16544}function rx(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;l=+f[n>>2];a=+f[n+4>>2];i=+f[n+8>>2];u=l*+f[t+56>>2]+a*+f[t+60>>2]+i*+f[t+64>>2];o=l*+f[t+72>>2]+a*+f[t+76>>2]+i*+f[t+80>>2];i=l*+f[t+88>>2]+a*+f[t+92>>2]+i*+f[t+96>>2];if(u<o)n=o<i?2:1;else n=u<i?2:0;n=t+(n<<4)+56|0;s[e+0>>2]=s[n+0>>2];s[e+4>>2]=s[n+4>>2];s[e+8>>2]=s[n+8>>2];s[e+12>>2]=s[n+12>>2];c=r;return}function ix(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;o=c;if((r|0)<=0){c=o;return}i=0;do{v=+f[t+(i<<4)>>2];d=+f[t+(i<<4)+4>>2];a=+f[t+(i<<4)+8>>2];h=v*+f[e+56>>2]+d*+f[e+60>>2]+a*+f[e+64>>2];l=v*+f[e+72>>2]+d*+f[e+76>>2]+a*+f[e+80>>2];a=v*+f[e+88>>2]+d*+f[e+92>>2]+a*+f[e+96>>2];u=n+(i<<4)|0;if(h<l)p=l<a?2:1;else p=h<a?2:0;p=e+(p<<4)+56|0;s[u+0>>2]=s[p+0>>2];s[u+4>>2]=s[p+4>>2];s[u+8>>2]=s[p+8>>2];s[u+12>>2]=s[p+12>>2];i=i+1|0}while((i|0)!=(r|0));c=o;return}function sx(e){e=e|0;return 2}function ox(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0,l=0,h=0;o=c;a=+f[e+56>>2];s=+f[e+72>>2]-a;u=+f[e+60>>2];i=+f[e+76>>2]-u;l=+f[e+64>>2];r=+f[e+80>>2]-l;a=+f[e+88>>2]-a;u=+f[e+92>>2]-u;l=+f[e+96>>2]-l;f[n+12>>2]=0;h=1/+X(+((s*u-i*a)*(s*u-i*a)+((i*l-r*u)*(i*l-r*u)+(r*a-s*l)*(r*a-s*l))));f[n>>2]=h*(i*l-r*u);f[n+4>>2]=h*(r*a-s*l);f[n+8>>2]=(s*u-i*a)*h;if((t|0)==0){c=o;return}f[n>>2]=h*(i*l-r*u)*-1;f[n+4>>2]=h*(r*a-s*l)*-1;f[n+8>>2]=(s*u-i*a)*h*-1;c=o;return}function ux(e){e=e|0;return 3}function ax(e){e=e|0;return 3}function fx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;WD[s[(s[e>>2]|0)+108>>2]&127](e,t,n);WD[s[(s[e>>2]|0)+108>>2]&127](e,(t+1|0)%3|0,r);c=i;return}function lx(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;s[n+0>>2]=s[e+(t<<4)+56>>2];s[n+4>>2]=s[e+(t<<4)+60>>2];s[n+8>>2]=s[e+(t<<4)+64>>2];s[n+12>>2]=s[e+(t<<4)+68>>2];c=r;return}function cx(e){e=e|0;return 1}function hx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;JD[s[(s[e>>2]|0)+124>>2]&127](e,r,t,n);c=i;return}function px(e,t,n){e=e|0;t=t|0;n=+n;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;r=c;c=c+32|0;p=+f[e+56>>2];g=+f[e+72>>2]-p;h=+f[e+60>>2];v=+f[e+76>>2]-h;l=+f[e+64>>2];y=+f[e+80>>2]-l;d=+f[e+88>>2]-p;m=+f[e+92>>2]-h;i=+f[e+96>>2]-l;u=1/+X(+((g*m-v*d)*(g*m-v*d)+((v*i-y*m)*(v*i-y*m)+(y*d-g*i)*(y*d-g*i))));o=u*(v*i-y*m);i=u*(y*d-g*i);u=(g*m-v*d)*u;l=+f[t>>2]*o+ +f[t+4>>2]*i+u*+f[t+8>>2]-(o*p+i*h+u*l);if(!(l>=-n)|!(l<=n)){a=0;c=r;return a|0}a=0;while(1){JD[s[(s[e>>2]|0)+104>>2]&127](e,a,r+16|0,r);p=+f[r+16>>2];y=+f[r>>2]-p;v=+f[r+20>>2];d=+f[r+4>>2]-v;h=+f[r+24>>2];g=+f[r+8>>2]-h;m=1/+X(+((i*y-o*d)*(i*y-o*d)+((u*d-i*g)*(u*d-i*g)+(o*g-u*y)*(o*g-u*y))));a=a+1|0;if(+f[t>>2]*m*(u*d-i*g)+ +f[t+4>>2]*m*(o*g-u*y)+(i*y-o*d)*m*+f[t+8>>2]-(h*(i*y-o*d)*m+(p*m*(u*d-i*g)+v*m*(o*g-u*y)))<-n){t=0;e=5;break}if((a|0)>=3){t=1;e=5;break}}if((e|0)==5){c=r;return t|0}return 0}function dx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0;t=c;o=+f[e+56>>2];l=+f[e+72>>2]-o;a=+f[e+60>>2];u=+f[e+76>>2]-a;h=+f[e+64>>2];p=+f[e+80>>2]-h;o=+f[e+88>>2]-o;a=+f[e+92>>2]-a;h=+f[e+96>>2]-h;f[n+12>>2]=0;i=1/+X(+((l*a-u*o)*(l*a-u*o)+((u*h-p*a)*(u*h-p*a)+(p*o-l*h)*(p*o-l*h))));f[n>>2]=i*(u*h-p*a);f[n+4>>2]=i*(p*o-l*h);f[n+8>>2]=(l*a-u*o)*i;s[r+0>>2]=s[e+56>>2];s[r+4>>2]=s[e+60>>2];s[r+8>>2]=s[e+64>>2];s[r+12>>2]=s[e+68>>2];c=t;return}function vx(e){e=e|0;var t=0;t=c;mx(e);hM(e);c=t;return}function mx(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=16568;n=s[e+56>>2]|0;if((n|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;n=s[e+36>>2]|0;if((n|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){n=e+12|0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;s[n>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;n=e+12|0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;s[n>>2]=0;c=t;return}function gx(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;if((s[t+8>>2]|0)>0){o=s[t+16>>2]|0;u=0;i=0;do{a=s[o+(u<<2)>>2]|0;if((s[a+204>>2]&3|0)==0){s[a+208>>2]=i;i=i+1|0}s[a+212>>2]=-1;f[a+244>>2]=1;u=u+1|0}while((u|0)<(s[t+8>>2]|0))}else i=0;o=s[e+8>>2]|0;if((o|0)<(i|0)){if((s[e+12>>2]|0)<(i|0)){if((i|0)==0){u=0;h=o}else{s[5004]=(s[5004]|0)+1;u=cM((i<<3|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}h=s[e+8>>2]|0}if((h|0)>0){l=0;do{a=u+(l<<3)|0;if((a|0)!=0){d=(s[e+16>>2]|0)+(l<<3)|0;p=s[d+4>>2]|0;s[a>>2]=s[d>>2];s[a+4>>2]=p}l=l+1|0}while((l|0)!=(h|0))}a=s[e+16>>2]|0;if((a|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=u;s[e+12>>2]=i;u=e+16|0}else u=e+16|0;do{a=(s[u>>2]|0)+(o<<3)|0;if((a|0)!=0){s[a>>2]=0;s[a+4>>2]=0}o=o+1|0}while((o|0)!=(i|0))}s[e+8>>2]=i;if((i|0)>0){u=s[e+16>>2]|0;o=0;do{s[u+(o<<3)>>2]=o;s[u+(o<<3)+4>>2]=1;o=o+1|0}while((o|0)!=(i|0))}i=s[t+68>>2]|0;i=dD[s[(s[i>>2]|0)+36>>2]&127](i)|0;t=dD[s[(s[i>>2]|0)+36>>2]&127](i)|0;if((t|0)==0){c=n;return}o=dD[s[(s[i>>2]|0)+20>>2]&127](i)|0;if((t|0)<=0){c=n;return}i=0;do{a=s[s[o+(i<<4)>>2]>>2]|0;u=s[s[o+(i<<4)+4>>2]>>2]|0;if(((a|0)!=0?!((u|0)==0?1:(s[a+204>>2]&7|0)!=0):0)?(s[u+204>>2]&7|0)==0:0){l=s[a+208>>2]|0;a=s[u+208>>2]|0;u=s[e+16>>2]|0;h=s[u+(l<<3)>>2]|0;if((h|0)!=(l|0)){p=u+(l<<3)|0;do{l=u+(h<<3)|0;s[p>>2]=s[l>>2];l=s[l>>2]|0;p=u+(l<<3)|0;h=s[p>>2]|0}while((l|0)!=(h|0))}h=s[u+(a<<3)>>2]|0;if((h|0)!=(a|0)){p=u+(a<<3)|0;do{a=u+(h<<3)|0;s[p>>2]=s[a>>2];a=s[a>>2]|0;p=u+(a<<3)|0;h=s[p>>2]|0}while((a|0)!=(h|0))}if((l|0)!=(a|0)){s[u+(l<<3)>>2]=a;d=u+(a<<3)+4|0;s[d>>2]=(s[d>>2]|0)+(s[u+(l<<3)+4>>2]|0)}}i=i+1|0}while((i|0)!=(t|0));c=n;return}function yx(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0;i=c;if((s[t+8>>2]|0)<=0){c=i;return}n=s[t+16>>2]|0;r=0;o=0;do{u=s[n+(r<<2)>>2]|0;if((s[u+204>>2]&3|0)==0){a=s[e+16>>2]|0;l=a+(o<<3)|0;f=s[l>>2]|0;if((f|0)==(o|0))h=o;else do{h=a+(f<<3)|0;s[l>>2]=s[h>>2];h=s[h>>2]|0;l=a+(h<<3)|0;f=s[l>>2]|0}while((h|0)!=(f|0));s[u+208>>2]=h;s[a+(o<<3)+4>>2]=r;s[u+212>>2]=-1;o=o+1|0}else{s[u+208>>2]=-1;s[u+212>>2]=-2}r=r+1|0}while((r|0)<(s[t+8>>2]|0));c=i;return}function bx(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;r=c;while(1){i=s[e+12>>2]|0;o=s[i+(((t+n|0)/2|0)<<2)>>2]|0;l=t;f=n;while(1){u=s[(s[o+740>>2]|0)+208>>2]|0;if((u|0)>-1)while(1){a=s[i+(l<<2)>>2]|0;h=s[(s[a+740>>2]|0)+208>>2]|0;if(!((h|0)>-1))h=s[(s[a+744>>2]|0)+208>>2]|0;if((h|0)<(u|0))l=l+1|0;else break}else{h=s[(s[o+744>>2]|0)+208>>2]|0;while(1){a=s[i+(l<<2)>>2]|0;p=s[(s[a+740>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[a+744>>2]|0)+208>>2]|0;if((p|0)<(h|0))l=l+1|0;else break}}if((u|0)>-1)while(1){h=s[i+(f<<2)>>2]|0;p=s[(s[h+740>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[h+744>>2]|0)+208>>2]|0;if((u|0)<(p|0))f=f+ -1|0;else break}else{u=s[(s[o+744>>2]|0)+208>>2]|0;while(1){h=s[i+(f<<2)>>2]|0;p=s[(s[h+740>>2]|0)+208>>2]|0;if(!((p|0)>-1))p=s[(s[h+744>>2]|0)+208>>2]|0;if((u|0)<(p|0))f=f+ -1|0;else break}}if((l|0)<=(f|0)){s[i+(l<<2)>>2]=h;s[(s[e+12>>2]|0)+(f<<2)>>2]=a;l=l+1|0;f=f+ -1|0}if((l|0)>(f|0))break;i=s[e+12>>2]|0}if((f|0)>(t|0))bx(e,t,f);if((l|0)<(n|0))t=l;else break}c=r;return}function wx(e,t,n){e=e|0;t=t|0;n=n|0;n=c;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;c=n;return}function Ex(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0;e=c;if((r|0)>0)t=0;else{c=e;return}do{o=n+(t<<4)|0;t=t+1|0;i=(t|0)==(r|0);s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0}while(!i);c=e;return}function Sx(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function xx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0;i=c;a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);h=+f[t+52>>2]-u;l=+f[t+56>>2]-o;f[n>>2]=+f[t+48>>2]-a;f[n+4>>2]=h;f[n+8>>2]=l;f[n+12>>2]=0;u=u+ +f[t+52>>2];o=o+ +f[t+56>>2];f[r>>2]=a+ +f[t+48>>2];f[r+4>>2]=u;f[r+8>>2]=o;f[r+12>>2]=0;c=i;return}function Tx(e,t,n){e=e|0;t=+t;n=n|0;var r=0;r=c;t=t*.4000000059604645*+CD[s[(s[e>>2]|0)+48>>2]&15](e);t=t*+CD[s[(s[e>>2]|0)+48>>2]&15](e);f[n>>2]=t;f[n+4>>2]=t;f[n+8>>2]=t;f[n+12>>2]=0;c=r;return}function Nx(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=16816;if((r[e+8>>0]|0)!=0?(n=s[e+12>>2]|0,(n|0)!=0):0){i=s[e+4>>2]|0;hD[s[(s[i>>2]|0)+16>>2]&127](i,n)}hM(e);c=t;return}function Cx(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=16816;if((r[e+8>>0]|0)==0){c=t;return}n=s[e+12>>2]|0;if((n|0)==0){c=t;return}e=s[e+4>>2]|0;hD[s[(s[e>>2]|0)+16>>2]&127](e,n);c=t;return}function kx(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;r=c;c=c+32|0;e=s[e+12>>2]|0;if((e|0)==0){c=r;return}s[i+4>>2]=e;d=s[t+4>>2]|0;v=s[n+4>>2]|0;t=s[t+12>>2]|0;n=s[n+12>>2]|0;h=+f[t+48>>2]- +f[n+48>>2];p=+f[t+52>>2]- +f[n+52>>2];l=+f[t+56>>2]- +f[n+56>>2];u=+X(+(h*h+p*p+l*l));o=+f[v+28>>2]*+f[v+12>>2];a=+f[d+28>>2]*+f[d+12>>2]+o;if(u>a){if((s[e+748>>2]|0)==0){c=r;return}n=s[e+740>>2]|0;t=s[(s[i+8>>2]|0)+8>>2]|0;if((n|0)==(t|0)){eM(e,n+4|0,(s[(s[i+12>>2]|0)+8>>2]|0)+4|0);c=r;return}else{eM(e,(s[(s[i+12>>2]|0)+8>>2]|0)+4|0,t+4|0);c=r;return}}f[r+16>>2]=1;f[r+20>>2]=0;f[r+24>>2]=0;f[r+28>>2]=0;if(u>1.1920928955078125e-7){f[r+16>>2]=h*(1/u);f[r+20>>2]=p*(1/u);f[r+24>>2]=l*(1/u);f[r+28>>2]=0;h=h*(1/u);p=p*(1/u);l=l*(1/u)}else{h=1;p=0;l=0}m=o*p+ +f[n+52>>2];p=o*l+ +f[n+56>>2];f[r>>2]=o*h+ +f[n+48>>2];f[r+4>>2]=m;f[r+8>>2]=p;f[r+12>>2]=0;zD[s[(s[i>>2]|0)+16>>2]&15](i,r+16|0,r,u-a);e=s[i+4>>2]|0;if((s[e+748>>2]|0)==0){c=r;return}n=s[e+740>>2]|0;t=s[(s[i+8>>2]|0)+8>>2]|0;if((n|0)==(t|0)){eM(e,n+4|0,(s[(s[i+12>>2]|0)+8>>2]|0)+4|0);c=r;return}else{eM(e,(s[(s[i+12>>2]|0)+8>>2]|0)+4|0,t+4|0);c=r;return}}function Lx(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 1}function Ax(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+12>>2]|0)==0){c=n;return}if((r[e+8>>0]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+12>>2];s[t+4>>2]=u+1;c=n;return}function Ox(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=16904;if((r[e+8>>0]|0)!=0?(n=s[e+12>>2]|0,(n|0)!=0):0){i=s[e+4>>2]|0;hD[s[(s[i>>2]|0)+16>>2]&127](i,n)}hM(e);c=t;return}function Mx(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=16904;if((r[e+8>>0]|0)==0){c=t;return}n=s[e+12>>2]|0;if((n|0)==0){c=t;return}e=s[e+4>>2]|0;hD[s[(s[e>>2]|0)+16>>2]&127](e,n);c=t;return}function _x(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0;u=c;c=c+160|0;a=s[e+12>>2]|0;if((a|0)==0){c=u;return}l=(r[e+16>>0]|0)!=0;h=l?n:t;t=l?t:n;d=s[h+4>>2]|0;n=s[t+4>>2]|0;s[o+4>>2]=a;p=+f[(s[e+12>>2]|0)+752>>2];s[u+136>>2]=17768;s[u+140>>2]=d;s[u+144>>2]=n;f[u+148>>2]=p;f[u+128>>2]=0xde0b6b000000000;n=s[h+12>>2]|0;s[u+0>>2]=s[n+0>>2];s[u+4>>2]=s[n+4>>2];s[u+8>>2]=s[n+8>>2];s[u+12>>2]=s[n+12>>2];s[u+16>>2]=s[n+16>>2];s[u+20>>2]=s[n+20>>2];s[u+24>>2]=s[n+24>>2];s[u+28>>2]=s[n+28>>2];s[u+32>>2]=s[n+32>>2];s[u+36>>2]=s[n+36>>2];s[u+40>>2]=s[n+40>>2];s[u+44>>2]=s[n+44>>2];s[u+48>>2]=s[n+48>>2];s[u+52>>2]=s[n+52>>2];s[u+56>>2]=s[n+56>>2];s[u+60>>2]=s[n+60>>2];t=s[t+12>>2]|0;s[u+64>>2]=s[t+0>>2];s[u+68>>2]=s[t+4>>2];s[u+72>>2]=s[t+8>>2];s[u+76>>2]=s[t+12>>2];s[u+80>>2]=s[t+16>>2];s[u+84>>2]=s[t+20>>2];s[u+88>>2]=s[t+24>>2];s[u+92>>2]=s[t+28>>2];s[u+96>>2]=s[t+32>>2];s[u+100>>2]=s[t+36>>2];s[u+104>>2]=s[t+40>>2];s[u+108>>2]=s[t+44>>2];s[u+112>>2]=s[t+48>>2];s[u+116>>2]=s[t+52>>2];s[u+120>>2]=s[t+56>>2];s[u+124>>2]=s[t+60>>2];NT(u+136|0,u,o,s[i+20>>2]|0,l);if((r[e+8>>0]|0)==0){c=u;return}e=s[o+4>>2]|0;if((s[e+748>>2]|0)==0){c=u;return}a=s[e+740>>2]|0;n=s[(s[o+8>>2]|0)+8>>2]|0;if((a|0)==(n|0)){eM(e,a+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=u;return}else{eM(e,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,n+4|0);c=u;return}}function Dx(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 1}function Px(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+12>>2]|0)==0){c=n;return}if((r[e+8>>0]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+12>>2];s[t+4>>2]=u+1;c=n;return}function Hx(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Bx(e){e=e|0;return}function jx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;f[n>>2]=-0xde0b6b000000000;f[n+4>>2]=-0xde0b6b000000000;f[n+8>>2]=-0xde0b6b000000000;f[n+12>>2]=0;f[r>>2]=0xde0b6b000000000;f[r+4>>2]=0xde0b6b000000000;f[r+8>>2]=0xde0b6b000000000;f[r+12>>2]=0;return}function Fx(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0;i=c;c=c+48|0;a=+f[r>>2];l=+f[n>>2];o=+f[r+4>>2];u=+f[n+4>>2];h=+f[r+8>>2];d=+f[n+8>>2];b=+X(+((a-l)*.5*(a-l)*.5+(o-u)*.5*(o-u)*.5+(h-d)*.5*(h-d)*.5));v=+f[e+56>>2];if(+W(+v)>.7071067690849304){p=+f[e+52>>2];y=1/+X(+(v*v+p*p));T=+f[e+48>>2];m=T;x=p;g=0;S=-(v*y);E=p*y;w=(v*v+p*p)*y;p=-(T*p*y);y=T*-(v*y)}else{N=+f[e+48>>2];T=+f[e+52>>2];y=1/+X(+(N*N+T*T));m=N;x=T;g=-(T*y);S=N*y;E=0;w=-(v*N*y);p=v*-(T*y);y=(N*N+T*T)*y}N=(a+l)*.5*m+(o+u)*.5*x+(h+d)*.5*v- +f[e+64>>2];u=(o+u)*.5-x*N;m=(a+l)*.5-m*N;g=b*g;S=b*S;T=b*E;w=b*w;E=b*p;x=b*y;f[i>>2]=w+(g+m);f[i+4>>2]=E+(S+u);f[i+8>>2]=x+(T+((h+d)*.5-v*N));f[i+12>>2]=0;f[i+16>>2]=g+m-w;f[i+20>>2]=S+u-E;f[i+24>>2]=T+((h+d)*.5-v*N)-x;f[i+28>>2]=0;f[i+32>>2]=m-g-w;f[i+36>>2]=u-S-E;f[i+40>>2]=(h+d)*.5-v*N-T-x;f[i+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,i,0,0);f[i>>2]=m-g-w;f[i+4>>2]=u-S-E;f[i+8>>2]=(h+d)*.5-v*N-T-x;f[i+12>>2]=0;f[i+16>>2]=w+(m-g);f[i+20>>2]=E+(u-S);f[i+24>>2]=x+((h+d)*.5-v*N-T);f[i+28>>2]=0;f[i+32>>2]=w+(g+m);f[i+36>>2]=E+(S+u);f[i+40>>2]=x+(T+((h+d)*.5-v*N));f[i+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,i,0,1);c=i;return}function Ix(e,t,n){e=e|0;t=+t;n=n|0;e=c;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;c=e;return}function qx(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+68>>2]=s[t+0>>2];s[e+72>>2]=s[t+4>>2];s[e+76>>2]=s[t+8>>2];s[e+80>>2]=s[t+12>>2];c=n;return}function Rx(e){e=e|0;return e+68|0}function Ux(e){e=e|0;return 17128}function zx(e){e=e|0;return 52}function Wx(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+12>>2]=+f[e+68>>2];f[t+16>>2]=+f[e+72>>2];f[t+20>>2]=+f[e+76>>2];f[t+24>>2]=+f[e+80>>2];f[t+28>>2]=+f[e+48>>2];f[t+32>>2]=+f[e+52>>2];f[t+36>>2]=+f[e+56>>2];f[t+40>>2]=+f[e+60>>2];f[t+44>>2]=+f[e+64>>2];c=r;return 17104}function Xx(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0;a=c;c=c+128|0;st=s[e+4>>2]|0;r[st+312>>0]=0;s[st>>2]=0;r[st+356>>0]=1;f[st+292>>2]=0xde0b6b000000000;f[st+296>>2]=0xde0b6b000000000;f[st+300>>2]=0xde0b6b000000000;f[st+304>>2]=0;s[st+336>>2]=0;s[st+340>>2]=0;s[st+344>>2]=0;s[st+348>>2]=0;r[st+352>>0]=0;r[st+332>>0]=r[st+332>>0]&-16;q=+f[t+48>>2];$=+f[t+52>>2];U=+f[t+56>>2];Q=+f[i+48>>2];J=+f[i+52>>2];R=+f[i+56>>2];A=+f[t>>2];v=+f[t+4>>2];g=+f[t+8>>2];O=+f[t+16>>2];N=+f[t+20>>2];y=+f[t+24>>2];S=+f[t+32>>2];m=+f[t+36>>2];b=+f[t+40>>2];w=+f[i>>2];x=+f[i+4>>2];C=+f[i+8>>2];E=+f[i+16>>2];T=+f[i+20>>2];k=+f[i+24>>2];M=+f[i+32>>2];d=+f[i+36>>2];L=+f[i+40>>2];h=+f[n+48>>2]-q-(+f[o+48>>2]-Q);l=+f[n+52>>2]-$-(+f[o+52>>2]-J);p=+f[n+56>>2]-U-(+f[o+56>>2]-R);st=s[e+8>>2]|0;rt=s[(s[st>>2]|0)+64>>2]|0;f[a+96>>2]=A*-h+O*-l+S*-p;f[a+100>>2]=v*-h+N*-l+m*-p;f[a+104>>2]=g*-h+y*-l+b*-p;f[a+108>>2]=0;WD[rt&127](a+112|0,st,a+96|0);et=+f[a+112>>2];it=+f[a+116>>2];K=+f[a+120>>2];G=et*+f[t>>2]+it*+f[t+4>>2]+K*+f[t+8>>2]+ +f[t+48>>2];Y=et*+f[t+16>>2]+it*+f[t+20>>2]+K*+f[t+24>>2]+ +f[t+52>>2];K=et*+f[t+32>>2]+it*+f[t+36>>2]+K*+f[t+40>>2]+ +f[t+56>>2];st=s[e+12>>2]|0;rt=s[(s[st>>2]|0)+64>>2]|0;it=h*+f[i+4>>2]+l*+f[i+20>>2]+p*+f[i+36>>2];et=h*+f[i+8>>2]+l*+f[i+24>>2]+p*+f[i+40>>2];f[a+64>>2]=h*+f[i>>2]+l*+f[i+16>>2]+p*+f[i+32>>2];f[a+68>>2]=it;f[a+72>>2]=et;f[a+76>>2]=0;WD[rt&127](a+80|0,st,a+64|0);et=+f[a+80>>2];it=+f[a+84>>2];Z=+f[a+88>>2];G=G-(et*+f[i>>2]+it*+f[i+4>>2]+Z*+f[i+8>>2]+ +f[i+48>>2]);Y=Y-(et*+f[i+16>>2]+it*+f[i+20>>2]+Z*+f[i+24>>2]+ +f[i+52>>2]);Z=K-(et*+f[i+32>>2]+it*+f[i+36>>2]+Z*+f[i+40>>2]+ +f[i+56>>2]);e:do if(G*G+Y*Y+Z*Z>9999999747378752e-20){z=0;V=0;K=0;W=0;D=0;_=32;et=0;while(1){if((_|0)==0)break e;_=_+ -1|0;st=s[e+8>>2]|0;rt=s[(s[st>>2]|0)+64>>2]|0;P=-G;ot=-Y;it=-Z;f[a+32>>2]=A*P+O*ot+S*it;f[a+36>>2]=v*P+N*ot+m*it;f[a+40>>2]=g*P+y*ot+b*it;f[a+44>>2]=0;WD[rt&127](a+48|0,st,a+32|0);it=+f[a+48>>2];ot=+f[a+52>>2];P=+f[a+56>>2];H=q+(A*it+v*ot+g*P);j=$+(O*it+N*ot+y*P);P=U+(S*it+m*ot+b*P);st=s[e+12>>2]|0;rt=s[(s[st>>2]|0)+64>>2]|0;f[a>>2]=w*G+E*Y+M*Z;f[a+4>>2]=x*G+T*Y+d*Z;f[a+8>>2]=C*G+k*Y+L*Z;f[a+12>>2]=0;WD[rt&127](a+16|0,st,a);ot=+f[a+16>>2];it=+f[a+20>>2];F=+f[a+24>>2];B=Q+(w*ot+x*it+C*F);I=J+(E*ot+T*it+k*F);F=R+(M*ot+d*it+L*F);it=G*(H-B)+Y*(j-I)+Z*(P-F);if(D>1){u=0;o=24;break}if(it>0){q=h*G+l*Y+p*Z;if(q>=-1.4210854715202004e-14){u=0;o=24;break}D=D-it/q;U=(1-D)*+f[t+56>>2]+D*+f[n+56>>2];$=(1-D)*+f[t+52>>2]+D*+f[n+52>>2];q=+f[t+48>>2]*(1-D)+D*+f[n+48>>2];R=(1-D)*+f[i+56>>2]+D*+f[o+56>>2];J=(1-D)*+f[i+52>>2]+D*+f[o+52>>2];Q=(1-D)*+f[i+48>>2]+D*+f[o+48>>2];W=et;K=Z;V=Y;z=G}tt=s[e+4>>2]|0;nt=s[tt>>2]|0;if((nt|0)>0){G=+f[tt+308>>2];st=0;rt=0;do{et=H-B- +f[tt+(rt<<4)+4>>2];it=j-I- +f[tt+(rt<<4)+8>>2];ot=P-F- +f[tt+(rt<<4)+12>>2];st=st|et*et+it*it+ot*ot<=G;rt=rt+1|0}while((rt|0)!=(nt|0))}else st=0;if((+f[tt+304>>2]==0?P-F==+f[tt+300>>2]:0)?j-I==+f[tt+296>>2]:0)rt=H-B==+f[tt+292>>2];else rt=0;if(!(rt|st)){f[tt+292>>2]=H-B;f[tt+296>>2]=j-I;f[tt+300>>2]=P-F;f[tt+304>>2]=0;r[tt+356>>0]=1;f[tt+(nt<<4)+4>>2]=H-B;f[tt+(nt<<4)+8>>2]=j-I;f[tt+(nt<<4)+12>>2]=P-F;f[tt+(nt<<4)+16>>2]=0;st=s[tt>>2]|0;f[tt+(st<<4)+84>>2]=H;f[tt+(st<<4)+88>>2]=j;f[tt+(st<<4)+92>>2]=P;f[tt+(st<<4)+96>>2]=0;st=s[tt>>2]|0;f[tt+(st<<4)+164>>2]=B;f[tt+(st<<4)+168>>2]=I;f[tt+(st<<4)+172>>2]=F;f[tt+(st<<4)+176>>2]=0;s[tt>>2]=(s[tt>>2]|0)+1;tt=s[e+4>>2]|0}st=xT(tt)|0;G=+f[tt+276>>2];Y=+f[tt+280>>2];Z=+f[tt+284>>2];if(!st)break e;if(!(G*G+Y*Y+Z*Z>9999999747378752e-20))break e;else et=+f[tt+288>>2]}if((o|0)==24){c=a;return u|0}}else{W=0;K=0;V=0;z=0;D=0}while(0);f[u+164>>2]=D;d=K*K+(V*V+z*z);if(!(d>=1.4210854715202004e-14)){s[u+132>>2]=0;s[u+136>>2]=0;s[u+140>>2]=0;s[u+144>>2]=0;d=0;m=0;v=0}else{v=1/+X(+d);d=z*v;m=V*v;v=K*v;f[u+132>>2]=d;f[u+136>>2]=m;f[u+140>>2]=v;f[u+144>>2]=W}if(h*d+l*m+p*v>=-+f[u+172>>2]){st=0;c=a;return st|0}st=s[e+4>>2]|0;xT(st)|0;bM(u+148|0,st+260|0,16)|0;st=1;c=a;return st|0}function Vx(e){e=e|0;return}function $x(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Jx(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0;i=c;f[e+4>>2]=1;f[e+8>>2]=1;f[e+12>>2]=1;f[e+16>>2]=0;r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;s[e+48>>2]=0;s[e>>2]=17304;r[e+100>>0]=1;s[e+96>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;r[e+120>>0]=1;s[e+116>>2]=0;s[e+108>>2]=0;s[e+112>>2]=0;r[e+140>>0]=1;s[e+136>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;r[e+160>>0]=1;s[e+156>>2]=0;s[e+148>>2]=0;s[e+152>>2]=0;r[e+164>>0]=t&1;r[e+165>>0]=n&1;f[e+168>>2]=0;s[5004]=(s[5004]|0)+1;n=cM(51)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}t=s[e+24>>2]|0;if((t|0)>0){o=0;do{u=n+(o<<5)|0;a=(s[e+32>>2]|0)+(o<<5)|0;s[u+0>>2]=s[a+0>>2];s[u+4>>2]=s[a+4>>2];s[u+8>>2]=s[a+8>>2];s[u+12>>2]=s[a+12>>2];s[u+16>>2]=s[a+16>>2];s[u+20>>2]=s[a+20>>2];s[u+24>>2]=s[a+24>>2];s[u+28>>2]=s[a+28>>2];o=o+1|0}while((o|0)!=(t|0))}t=s[e+32>>2]|0;if((t|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=n;s[e+28>>2]=1;a=s[e+24>>2]|0;s[n+(a<<5)>>2]=0;s[n+(a<<5)+4>>2]=0;s[n+(a<<5)+8>>2]=12;s[n+(a<<5)+12>>2]=0;s[n+(a<<5)+16>>2]=0;s[n+(a<<5)+20>>2]=16;s[n+(a<<5)+24>>2]=2;s[n+(a<<5)+28>>2]=0;s[e+24>>2]=(s[e+24>>2]|0)+1;if((r[e+164>>0]|0)==0){n=s[e+32>>2]|0;s[n>>2]=(s[e+148>>2]|0)/3|0;s[n+4>>2]=0;n=s[e+32>>2]|0;s[n+24>>2]=3;s[n+8>>2]=6}else{n=s[e+32>>2]|0;s[n>>2]=(s[e+128>>2]|0)/3|0;s[n+4>>2]=0;n=s[e+32>>2]|0;s[n+24>>2]=2;s[n+8>>2]=12}if((r[e+165>>0]|0)==0){s[n+12>>2]=(s[e+108>>2]|0)/3|0;s[n+16>>2]=0;s[(s[e+32>>2]|0)+20>>2]=12;c=i;return}else{s[n+12>>2]=s[e+88>>2];s[n+16>>2]=0;s[(s[e+32>>2]|0)+20>>2]=16;c=i;return}}function Kx(e,t){e=e|0;t=t|0;var n=0,o=0,u=0,a=0,f=0,l=0;n=c;if((r[e+164>>0]|0)==0){a=s[e+148>>2]|0;if((a|0)==(s[e+152>>2]|0)?(o=(a|0)==0?1:a<<1,(a|0)<(o|0)):0){if((o|0)==0)u=0;else{s[5004]=(s[5004]|0)+1;u=cM((o<<1)+19|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+148>>2]|0}if((a|0)>0){f=0;do{l=u+(f<<1)|0;if((l|0)!=0)i[l>>1]=i[(s[e+156>>2]|0)+(f<<1)>>1]|0;f=f+1|0}while((f|0)!=(a|0))}f=s[e+156>>2]|0;if((f|0)!=0){if((r[e+160>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[f+ -4>>2]|0);a=s[e+148>>2]|0}s[e+156>>2]=0}r[e+160>>0]=1;s[e+156>>2]=u;s[e+152>>2]=o}o=s[e+156>>2]|0;u=o+(a<<1)|0;if((u|0)!=0)i[u>>1]=t;s[e+148>>2]=a+1;s[(s[e+32>>2]|0)+4>>2]=o;c=n;return}else{l=s[e+128>>2]|0;if((l|0)==(s[e+132>>2]|0)?(u=(l|0)==0?1:l<<1,(l|0)<(u|0)):0){if((u|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((u<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}l=s[e+128>>2]|0}if((l|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+136>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(l|0))}a=s[e+136>>2]|0;if((a|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=o;s[e+132>>2]=u;l=s[e+128>>2]|0}o=s[e+136>>2]|0;u=o+(l<<2)|0;if((u|0)!=0){s[u>>2]=t;l=s[e+128>>2]|0}s[e+128>>2]=l+1;s[(s[e+32>>2]|0)+4>>2]=o;c=n;return}}function Qx(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0;i=c;if((r[e+165>>0]|0)!=0){e:do if(n?(u=s[e+88>>2]|0,(u|0)>0):0){n=s[e+96>>2]|0;d=+f[t>>2];v=+f[t+4>>2];h=+f[t+8>>2];p=+f[e+168>>2];a=0;while(1){b=+f[n+(a<<4)>>2]-d;y=+f[n+(a<<4)+4>>2]-v;g=+f[n+(a<<4)+8>>2]-h;if(b*b+y*y+g*g<=p)break;a=a+1|0;if((a|0)>=(u|0))break e}c=i;return a|0}while(0);n=(s[e+32>>2]|0)+12|0;s[n>>2]=(s[n>>2]|0)+1;n=s[e+88>>2]|0;if((n|0)==(s[e+92>>2]|0)?(o=(n|0)==0?1:n<<1,(n|0)<(o|0)):0){if((o|0)==0)u=0;else{s[5004]=(s[5004]|0)+1;u=cM((o<<4|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}n=s[e+88>>2]|0}if((n|0)>0){a=0;do{m=u+(a<<4)|0;l=(s[e+96>>2]|0)+(a<<4)|0;s[m+0>>2]=s[l+0>>2];s[m+4>>2]=s[l+4>>2];s[m+8>>2]=s[l+8>>2];s[m+12>>2]=s[l+12>>2];a=a+1|0}while((a|0)!=(n|0))}n=s[e+96>>2]|0;if((n|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=u;s[e+92>>2]=o;n=s[e+88>>2]|0}m=(s[e+96>>2]|0)+(n<<4)|0;s[m+0>>2]=s[t+0>>2];s[m+4>>2]=s[t+4>>2];s[m+8>>2]=s[t+8>>2];s[m+12>>2]=s[t+12>>2];m=s[e+88>>2]|0;s[e+88>>2]=m+1;s[(s[e+32>>2]|0)+16>>2]=s[e+96>>2];c=i;return m|0}u=s[e+108>>2]|0;t:do if((u|0)>0&n){n=s[e+116>>2]|0;h=+f[t>>2];p=+f[t+4>>2];d=+f[t+8>>2];v=+f[e+168>>2];o=0;while(1){g=+f[n+(o<<2)>>2]-h;y=+f[n+(o+1<<2)>>2]-p;b=+f[n+(o+2<<2)>>2]-d;a=o+3|0;if(g*g+y*y+b*b<=v)break;if((a|0)<(u|0))o=a;else{o=t;break t}}m=(o|0)/3|0;c=i;return m|0}else o=t;while(0);n=s[e+112>>2]|0;if((u|0)==(n|0)){n=(u|0)==0?1:u<<1;if((u|0)<(n|0)){if((n|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;u=cM((n<<2|3)+16|0)|0;if((u|0)==0)a=0;else{s[(u+19&-16)+ -4>>2]=u;a=u+19&-16}u=s[e+108>>2]|0}if((u|0)>0){l=0;do{m=a+(l<<2)|0;if((m|0)!=0)f[m>>2]=+f[(s[e+116>>2]|0)+(l<<2)>>2];l=l+1|0}while((l|0)!=(u|0))}l=s[e+116>>2]|0;if((l|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0);u=s[e+108>>2]|0}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=a;s[e+112>>2]=n;l=u}else{l=u;n=u}}else l=u;a=s[e+116>>2]|0;u=a+(l<<2)|0;if((u|0)!=0)f[u>>2]=+f[o>>2];u=l+1|0;s[e+108>>2]=u;if((u|0)==(n|0)){o=(n|0)==0?1:n<<1;if((n|0)<(o|0)){if((o|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;u=cM((o<<2|3)+16|0)|0;if((u|0)==0)a=0;else{s[(u+19&-16)+ -4>>2]=u;a=u+19&-16}n=s[e+108>>2]|0}if((n|0)>0){u=0;do{l=a+(u<<2)|0;if((l|0)!=0)f[l>>2]=+f[(s[e+116>>2]|0)+(u<<2)>>2];u=u+1|0}while((u|0)!=(n|0))}u=s[e+116>>2]|0;if((u|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0);n=s[e+108>>2]|0}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=a;s[e+112>>2]=o;u=n}else{u=n;o=n}}else o=n;n=a+(u<<2)|0;if((n|0)!=0)f[n>>2]=+f[t+4>>2];u=u+1|0;s[e+108>>2]=u;if((u|0)==(o|0)){u=(o|0)==0?1:o<<1;if((o|0)<(u|0)){if((u|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;o=cM((u<<2|3)+16|0)|0;if((o|0)==0)a=0;else{s[(o+19&-16)+ -4>>2]=o;a=o+19&-16}o=s[e+108>>2]|0}if((o|0)>0){n=0;do{l=a+(n<<2)|0;if((l|0)!=0)f[l>>2]=+f[(s[e+116>>2]|0)+(n<<2)>>2];n=n+1|0}while((n|0)!=(o|0))}n=s[e+116>>2]|0;if((n|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0);o=s[e+108>>2]|0}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=a;s[e+112>>2]=u}}else o=u;u=a+(o<<2)|0;if((u|0)!=0)f[u>>2]=+f[t+8>>2];s[e+108>>2]=o+1;m=s[e+32>>2]|0;s[m+12>>2]=(s[m+12>>2]|0)+1;s[m+16>>2]=a;m=((s[e+108>>2]|0)/3|0)+ -1|0;c=i;return m|0}function Gx(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0;n=c;if((r[e+165>>0]|0)!=0){if((s[e+92>>2]|0)>=(t|0)){c=n;return}if((t|0)!=0?(s[5004]=(s[5004]|0)+1,o=cM((t<<4|3)+16|0)|0,(o|0)!=0):0){s[(o+19&-16)+ -4>>2]=o;i=o+19&-16}else i=0;o=s[e+88>>2]|0;if((o|0)>0){u=0;do{a=i+(u<<4)|0;l=(s[e+96>>2]|0)+(u<<4)|0;s[a+0>>2]=s[l+0>>2];s[a+4>>2]=s[l+4>>2];s[a+8>>2]=s[l+8>>2];s[a+12>>2]=s[l+12>>2];u=u+1|0}while((u|0)!=(o|0))}o=s[e+96>>2]|0;if((o|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=i;s[e+92>>2]=t;c=n;return}if((s[e+112>>2]|0)>=(t|0)){c=n;return}if((t|0)!=0?(s[5004]=(s[5004]|0)+1,i=cM((t<<2|3)+16|0)|0,(i|0)!=0):0){s[(i+19&-16)+ -4>>2]=i;i=i+19&-16}else i=0;o=s[e+108>>2]|0;if((o|0)>0){a=0;do{u=i+(a<<2)|0;if((u|0)!=0)f[u>>2]=+f[(s[e+116>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(o|0))}o=s[e+116>>2]|0;if((o|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=i;s[e+112>>2]=t;c=n;return}function Yx(e,t){e=e|0;t=t|0;var n=0,o=0,u=0,a=0,f=0;n=c;if((r[e+164>>0]|0)==0){if((s[e+152>>2]|0)>=(t|0)){c=n;return}if((t|0)!=0?(s[5004]=(s[5004]|0)+1,u=cM((t<<1)+19|0)|0,(u|0)!=0):0){s[(u+19&-16)+ -4>>2]=u;o=u+19&-16}else o=0;u=s[e+148>>2]|0;if((u|0)>0){f=0;do{a=o+(f<<1)|0;if((a|0)!=0)i[a>>1]=i[(s[e+156>>2]|0)+(f<<1)>>1]|0;f=f+1|0}while((f|0)!=(u|0))}u=s[e+156>>2]|0;if((u|0)!=0){if((r[e+160>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+156>>2]=0}r[e+160>>0]=1;s[e+156>>2]=o;s[e+152>>2]=t;c=n;return}else{if((s[e+132>>2]|0)>=(t|0)){c=n;return}if((t|0)!=0?(s[5004]=(s[5004]|0)+1,o=cM((t<<2|3)+16|0)|0,(o|0)!=0):0){s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}else o=0;f=s[e+128>>2]|0;if((f|0)>0){a=0;do{u=o+(a<<2)|0;if((u|0)!=0)s[u>>2]=s[(s[e+136>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(f|0))}u=s[e+136>>2]|0;if((u|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=o;s[e+132>>2]=t;c=n;return}}function Zx(e){e=e|0;var t=0;t=c;sT(e);c=t;return}function eT(e){e=e|0;var t=0;t=c;sT(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function tT(e,t){e=e|0;t=t|0;return}function nT(e,t){e=e|0;t=t|0;return}function rT(e){e=e|0;return s[e+24>>2]|0}function iT(e){e=e|0;return 28}function sT(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=17304;n=s[e+156>>2]|0;if((n|0)!=0){if((r[e+160>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+156>>2]=0}r[e+160>>0]=1;s[e+156>>2]=0;s[e+148>>2]=0;s[e+152>>2]=0;n=s[e+136>>2]|0;if((n|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;n=s[e+116>>2]|0;if((n|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=0;s[e+108>>2]=0;s[e+112>>2]=0;n=s[e+96>>2]|0;if((n|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;s[e>>2]=19904;n=s[e+32>>2]|0;if((n|0)==0){r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;n=e+28|0;s[n>>2]=0;c=t;return}if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0;r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;n=e+28|0;s[n>>2]=0;c=t;return}function oT(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function uT(e){e=e|0;return}function aT(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0;i=c;m=(+f[e+32>>2]- +f[e+16>>2])*.5;p=(+f[e+36>>2]- +f[e+20>>2])*.5;a=(+f[e+40>>2]- +f[e+24>>2])*.5;v=+CD[s[(s[e>>2]|0)+48>>2]&15](e);h=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=a+ +CD[s[(s[e>>2]|0)+48>>2]&15](e);A=(+f[e+32>>2]+ +f[e+16>>2])*.5;k=(+f[e+36>>2]+ +f[e+20>>2])*.5;N=(+f[e+40>>2]+ +f[e+24>>2])*.5;D=+f[t>>2];T=+W(+D);_=+f[t+4>>2];x=+W(+_);E=+f[t+8>>2];S=+W(+E);M=+f[t+16>>2];w=+W(+M);O=+f[t+20>>2];b=+W(+O);g=+f[t+24>>2];y=+W(+g);L=+f[t+32>>2];d=+W(+L);C=+f[t+36>>2];l=+W(+C);o=+f[t+40>>2];u=+W(+o);E=A*D+k*_+N*E+ +f[t+48>>2];g=A*M+k*O+N*g+ +f[t+52>>2];o=A*L+k*C+N*o+ +f[t+56>>2];f[n>>2]=E-((m+v)*T+(p+h)*x+a*S);f[n+4>>2]=g-((m+v)*w+(p+h)*b+a*y);f[n+8>>2]=o-((m+v)*d+(p+h)*l+a*u);f[n+12>>2]=0;f[r>>2]=(m+v)*T+(p+h)*x+a*S+E;f[r+4>>2]=(m+v)*w+(p+h)*b+a*y+g;f[r+8>>2]=(m+v)*d+(p+h)*l+a*u+o;f[r+12>>2]=0;c=i;return}function fT(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;c=c+48|0;r=(s[e+48>>2]|0)+4|0;s[r+0>>2]=s[t+0>>2];s[r+4>>2]=s[t+4>>2];s[r+8>>2]=s[t+8>>2];s[r+12>>2]=s[t+12>>2];s[n+32>>2]=0;s[n+36>>2]=0;s[n+40>>2]=0;s[n+44>>2]=0;f[n+32>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](n+16|0,e,n+32|0);f[e+32>>2]=+f[n+16>>2]+ +f[e+12>>2];f[n+32>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](n,e,n+32|0);s[n+16>>2]=s[n+0>>2];s[n+20>>2]=s[n+4>>2];s[n+24>>2]=s[n+8>>2];s[n+28>>2]=s[n+12>>2];f[e+16>>2]=+f[n+16>>2]- +f[e+12>>2];s[n+32>>2]=0;s[n+36>>2]=0;s[n+40>>2]=0;s[n+44>>2]=0;f[n+36>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](n+16|0,e,n+32|0);f[e+36>>2]=+f[n+20>>2]+ +f[e+12>>2];f[n+36>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](n,e,n+32|0);s[n+16>>2]=s[n+0>>2];s[n+20>>2]=s[n+4>>2];s[n+24>>2]=s[n+8>>2];s[n+28>>2]=s[n+12>>2];f[e+20>>2]=+f[n+20>>2]- +f[e+12>>2];s[n+32>>2]=0;s[n+36>>2]=0;s[n+40>>2]=0;s[n+44>>2]=0;f[n+40>>2]=1;WD[s[(s[e>>2]|0)+68>>2]&127](n+16|0,e,n+32|0);f[e+40>>2]=+f[n+24>>2]+ +f[e+12>>2];f[n+40>>2]=-1;WD[s[(s[e>>2]|0)+68>>2]&127](n,e,n+32|0);s[n+16>>2]=s[n+0>>2];s[n+20>>2]=s[n+4>>2];s[n+24>>2]=s[n+8>>2];s[n+28>>2]=s[n+12>>2];f[e+24>>2]=+f[n+24>>2]- +f[e+12>>2];c=n;return}function lT(e){e=e|0;return(s[e+48>>2]|0)+4|0}function cT(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;c=c+48|0;s[i>>2]=17624;s[i+4>>2]=t;s[i+8>>2]=s[n+0>>2];s[i+12>>2]=s[n+4>>2];s[i+16>>2]=s[n+8>>2];s[i+20>>2]=s[n+12>>2];s[i+24>>2]=s[r+0>>2];s[i+28>>2]=s[r+4>>2];s[i+32>>2]=s[r+8>>2];s[i+36>>2]=s[r+12>>2];t=s[e+48>>2]|0;JD[s[(s[t>>2]|0)+8>>2]&127](t,i,n,r);c=i;return}function hT(e,t,n){e=e|0;t=+t;n=n|0;e=c;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;c=e;return}function pT(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;c=c+176|0;s[r+160>>2]=0;s[r+164>>2]=0;s[r+168>>2]=0;s[r+172>>2]=0;s[r+136>>2]=0;s[r+140>>2]=0;s[r+144>>2]=0;s[r+148>>2]=0;s[r+152>>2]=0;s[r+32>>2]=17560;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=1;s[r+56>>2]=s[r+160>>2];s[r+60>>2]=s[r+164>>2];s[r+64>>2]=s[r+168>>2];s[r+68>>2]=0;f[r+72>>2]=1;s[r+76>>2]=0;s[r+80>>2]=0;s[r+84>>2]=0;s[r+88>>2]=0;f[r+92>>2]=1;f[r+96>>2]=0;s[r+100>>2]=s[r+140>>2];s[r+104>>2]=s[r+144>>2];s[r+108>>2]=s[r+148>>2];s[r+112>>2]=s[r+152>>2];f[r+116>>2]=-0xde0b6b000000000;l=+f[n>>2];a=+f[n+4>>2];u=+f[n+8>>2];o=l*+f[r+56>>2]+a+u*0;i=l*+f[r+60>>2]+a*0+u;f[r+120>>2]=l+a*0+u*0;f[r+124>>2]=o;f[r+128>>2]=i;f[r+132>>2]=0;f[r+16>>2]=0xde0b6b000000000;f[r+20>>2]=0xde0b6b000000000;f[r+24>>2]=0xde0b6b000000000;f[r+28>>2]=0;n=s[(s[t>>2]|0)+64>>2]|0;f[r>>2]=-0xde0b6b000000000;f[r+4>>2]=-0xde0b6b000000000;f[r+8>>2]=-0xde0b6b000000000;f[r+12>>2]=0;JD[n&127](t,r+32|0,r,r+16|0);s[e+0>>2]=s[r+36>>2];s[e+4>>2]=s[r+40>>2];s[e+8>>2]=s[r+44>>2];s[e+12>>2]=s[r+48>>2];c=r;return}function dT(e){e=e|0;return}function vT(e){e=e|0;return 17536}function mT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function gT(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0;r=c;i=+f[e+88>>2];u=+f[e+92>>2];o=+f[e+96>>2];a=i*+f[t>>2]+u*+f[t+4>>2]+o*+f[t+8>>2];l=+f[e+84>>2];if(a>l){f[e+84>>2]=a;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2]}else a=l;l=i*+f[t+16>>2]+u*+f[t+20>>2]+o*+f[t+24>>2];if(l>a){f[e+84>>2]=l;s[e+4>>2]=s[t+16>>2];s[e+8>>2]=s[t+20>>2];s[e+12>>2]=s[t+24>>2];s[e+16>>2]=s[t+28>>2];a=l}i=i*+f[t+32>>2]+u*+f[t+36>>2]+o*+f[t+40>>2];if(!(i>a)){c=r;return}f[e+84>>2]=i;s[e+4>>2]=s[t+32>>2];s[e+8>>2]=s[t+36>>2];s[e+12>>2]=s[t+40>>2];s[e+16>>2]=s[t+44>>2];c=r;return}function yT(e){e=e|0;return}function bT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function wT(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0;i=c;a=+f[t>>2];u=+f[t+16>>2];l=a<u?a:u;o=+f[t+32>>2];if((l<o?l:o)>+f[e+24>>2]){c=i;return}h=a>u?t:t+16|0;if(+f[(+f[h>>2]>o?h:t+32|0)>>2]<+f[e+8>>2]){c=i;return}o=+f[t+8>>2];u=+f[t+24>>2];l=o<u?o:u;a=+f[t+40>>2];if((l<a?l:a)>+f[e+32>>2]){c=i;return}h=o>u?t+8|0:t+24|0;if(+f[(+f[h>>2]>a?h:t+40|0)>>2]<+f[e+16>>2]){c=i;return}o=+f[t+4>>2];u=+f[t+20>>2];l=o<u?o:u;a=+f[t+36>>2];if((l<a?l:a)>+f[e+28>>2]){c=i;return}h=o>u?t+4|0:t+20|0;if(+f[(+f[h>>2]>a?h:t+36|0)>>2]<+f[e+12>>2]){c=i;return}h=s[e+4>>2]|0;JD[s[(s[h>>2]|0)+8>>2]&127](h,t,n,r);c=i;return}function ET(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0;r=c;while(1){i=s[e+12>>2]|0;o=s[i+(((t+n|0)/2|0)<<3)>>2]|0;f=t;u=n;while(1){while(1){l=f+1|0;if((s[i+(f<<3)>>2]|0)<(o|0))f=l;else{a=u;break}}while(1){h=i+(a<<3)|0;u=a+ -1|0;if((o|0)<(s[h>>2]|0))a=u;else break}if((f|0)>(a|0))u=a;else{f=i+(f<<3)|0;p=s[f>>2]|0;i=s[f+4>>2]|0;d=s[h+4>>2]|0;s[f>>2]=s[h>>2];s[f+4>>2]=d;f=(s[e+12>>2]|0)+(a<<3)|0;s[f>>2]=p;s[f+4>>2]=i;f=l}if((f|0)>(u|0))break;i=s[e+12>>2]|0}if((u|0)>(t|0))ET(e,t,u);if((f|0)<(n|0))t=f;else break}c=r;return}function ST(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0;n=c;u=s[e>>2]|0;if((u|0)>3){o=r[t>>0]|0;if((o&8)==0){s[e>>2]=u+ -1;i=e+(u+ -1<<4)+4|0;s[e+52>>2]=s[i+0>>2];s[e+56>>2]=s[i+4>>2];s[e+60>>2]=s[i+8>>2];s[e+64>>2]=s[i+12>>2];i=e+(u+ -1<<4)+84|0;s[e+132>>2]=s[i+0>>2];s[e+136>>2]=s[i+4>>2];s[e+140>>2]=s[i+8>>2];s[e+144>>2]=s[i+12>>2];i=e+(u+ -1<<4)+164|0;s[e+212>>2]=s[i+0>>2];s[e+216>>2]=s[i+4>>2];s[e+220>>2]=s[i+8>>2];s[e+224>>2]=s[i+12>>2];u=u+ -1|0;i=4}else i=6}else i=4;if((i|0)==4)if((u|0)>2){o=r[t>>0]|0;i=6}else o=u;if((i|0)==6)if((o&4)==0){o=u+ -1|0;s[e>>2]=o;s[e+36>>2]=s[e+(o<<4)+4>>2];s[e+40>>2]=s[e+(o<<4)+8>>2];s[e+44>>2]=s[e+(o<<4)+12>>2];s[e+48>>2]=s[e+(o<<4)+16>>2];s[e+116>>2]=s[e+(o<<4)+84>>2];s[e+120>>2]=s[e+(o<<4)+88>>2];s[e+124>>2]=s[e+(o<<4)+92>>2];s[e+128>>2]=s[e+(o<<4)+96>>2];s[e+196>>2]=s[e+(o<<4)+164>>2];s[e+200>>2]=s[e+(o<<4)+168>>2];s[e+204>>2]=s[e+(o<<4)+172>>2];s[e+208>>2]=s[e+(o<<4)+176>>2]}else o=u;if((o|0)>1){u=r[t>>0]|0;if((u&2)==0){o=o+ -1|0;s[e>>2]=o;s[e+20>>2]=s[e+(o<<4)+4>>2];s[e+24>>2]=s[e+(o<<4)+8>>2];s[e+28>>2]=s[e+(o<<4)+12>>2];s[e+32>>2]=s[e+(o<<4)+16>>2];s[e+100>>2]=s[e+(o<<4)+84>>2];s[e+104>>2]=s[e+(o<<4)+88>>2];s[e+108>>2]=s[e+(o<<4)+92>>2];s[e+112>>2]=s[e+(o<<4)+96>>2];s[e+180>>2]=s[e+(o<<4)+164>>2];s[e+184>>2]=s[e+(o<<4)+168>>2];s[e+188>>2]=s[e+(o<<4)+172>>2];s[e+192>>2]=s[e+(o<<4)+176>>2];i=11}else t=u}else i=11;do if((i|0)==11)if((o|0)>0){t=r[t>>0]|0;break}else{c=n;return}while(0);if(!((t&1)==0)){c=n;return}u=o+ -1|0;s[e>>2]=u;s[e+4>>2]=s[e+(u<<4)+4>>2];s[e+8>>2]=s[e+(u<<4)+8>>2];s[e+12>>2]=s[e+(u<<4)+12>>2];s[e+16>>2]=s[e+(u<<4)+16>>2];s[e+84>>2]=s[e+(u<<4)+84>>2];s[e+88>>2]=s[e+(u<<4)+88>>2];s[e+92>>2]=s[e+(u<<4)+92>>2];s[e+96>>2]=s[e+(u<<4)+96>>2];s[e+164>>2]=s[e+(u<<4)+164>>2];s[e+168>>2]=s[e+(u<<4)+168>>2];s[e+172>>2]=s[e+(u<<4)+172>>2];s[e+176>>2]=s[e+(u<<4)+176>>2];c=n;return}function xT(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,X=0;t=c;c=c+80|0;if((r[e+356>>0]|0)==0){X=r[e+312>>0]|0;X=X<<24>>24!=0;c=t;return X|0}s[e+336>>2]=0;s[e+340>>2]=0;s[e+344>>2]=0;s[e+348>>2]=0;r[e+352>>0]=0;H=r[e+332>>0]|0;r[e+332>>0]=H&-16;r[e+356>>0]=0;switch(s[e>>2]|0){case 1:{s[e+244>>2]=s[e+84>>2];s[e+248>>2]=s[e+88>>2];s[e+252>>2]=s[e+92>>2];s[e+256>>2]=s[e+96>>2];s[e+260>>2]=s[e+164>>2];s[e+264>>2]=s[e+168>>2];s[e+268>>2]=s[e+172>>2];s[e+272>>2]=s[e+176>>2];U=+f[e+248>>2]- +f[e+264>>2];z=+f[e+252>>2]- +f[e+268>>2];f[e+276>>2]=+f[e+244>>2]- +f[e+260>>2];f[e+280>>2]=U;f[e+284>>2]=z;f[e+288>>2]=0;s[e+336>>2]=0;s[e+340>>2]=0;s[e+344>>2]=0;s[e+348>>2]=0;r[e+352>>0]=0;r[e+332>>0]=H&-16;f[e+336>>2]=1;f[e+340>>2]=0;f[e+344>>2]=0;f[e+348>>2]=0;r[e+312>>0]=1;X=1;X=X<<24>>24!=0;c=t;return X|0};case 0:{r[e+312>>0]=0;X=0;X=X<<24>>24!=0;c=t;return X|0};case 4:{s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;u=t+48|0;r[u>>0]=0;s[e+316>>2]=s[t+0>>2];s[e+320>>2]=s[t+4>>2];s[e+324>>2]=s[t+8>>2];s[e+328>>2]=s[t+12>>2];r[e+332>>0]=H|15;_=+f[e+20>>2];R=+f[e+4>>2];L=+f[e+24>>2];U=+f[e+8>>2];O=+f[e+28>>2];q=+f[e+12>>2];M=+f[e+36>>2];j=+f[e+40>>2];P=+f[e+44>>2];D=+f[e+52>>2];B=+f[e+56>>2];A=+f[e+60>>2];z=(D-R)*((L-U)*(P-q)-(O-q)*(j-U))+(B-U)*((O-q)*(M-R)-(_-R)*(P-q))+((_-R)*(j-U)-(L-U)*(M-R))*(A-q);if(z*z<9.99999905104687e-9)I=-1;else I=z*(((O-q)*(M-R)-(_-R)*(P-q))*(0-U)+((L-U)*(P-q)-(O-q)*(j-U))*(0-R)+((_-R)*(j-U)-(L-U)*(M-R))*(0-q))<0&1;z=(_-R)*((j-U)*(A-q)-(P-q)*(B-U))+(L-U)*((P-q)*(D-R)-(M-R)*(A-q))+((M-R)*(B-U)-(j-U)*(D-R))*(O-q);if(z*z<9.99999905104687e-9)F=-1;else F=z*(((P-q)*(D-R)-(M-R)*(A-q))*(0-U)+((j-U)*(A-q)-(P-q)*(B-U))*(0-R)+((M-R)*(B-U)-(j-U)*(D-R))*(0-q))<0&1;z=(M-R)*((B-U)*(O-q)-(A-q)*(L-U))+(j-U)*((A-q)*(_-R)-(D-R)*(O-q))+((D-R)*(L-U)-(B-U)*(_-R))*(P-q);if(z*z<9.99999905104687e-9)H=-1;else H=z*(((A-q)*(_-R)-(D-R)*(O-q))*(0-U)+((B-U)*(O-q)-(A-q)*(L-U))*(0-R)+((D-R)*(L-U)-(B-U)*(_-R))*(0-q))<0&1;q=(R-_)*((B-L)*(P-O)-(A-O)*(j-L))+(U-L)*((A-O)*(M-_)-(D-_)*(P-O))+((D-_)*(j-L)-(B-L)*(M-_))*(q-O);if(q*q<9.99999905104687e-9)W=-1;else W=q*(((A-O)*(M-_)-(D-_)*(P-O))*(0-L)+((B-L)*(P-O)-(A-O)*(j-L))*(0-_)+((D-_)*(j-L)-(B-L)*(M-_))*(0-O))<0&1;if((F|I|H|W|0)<0){r[e+352>>0]=1;r[e+312>>0]=0;X=0;X=X<<24>>24!=0;c=t;return X|0}X=(I|0)!=0;I=(F|0)==0;H=(H|0)==0;F=(W|0)==0;if(I&(X^1)&H&F){r[e+312>>0]=1;s[e+276>>2]=0;s[e+280>>2]=0;s[e+284>>2]=0;s[e+288>>2]=0;X=1;X=X<<24>>24!=0;c=t;return X|0}if(X?(TT(t,e+4|0,e+20|0,e+36|0,t+32|0),k=+f[t+32>>2],S=+f[t+36>>2],x=+f[t+40>>2],T=k- +f[t>>2],N=S- +f[t+4>>2],C=x- +f[t+8>>2],T*T+N*N+C*C<3.4028234663852886e38):0){z=+f[t+44>>2];f[e+316>>2]=k;f[e+320>>2]=S;f[e+324>>2]=x;f[e+328>>2]=z;X=r[u>>0]|0;r[e+332>>0]=X&1|r[e+332>>0]&-16|X&2|X&4;z=+f[t+56>>2];S=+f[t+60>>2];f[e+336>>2]=+f[t+52>>2];f[e+340>>2]=z;f[e+344>>2]=S;f[e+348>>2]=0;S=T*T+N*N+C*C}else S=3.4028234663852886e38;if(!I?(TT(t,e+4|0,e+36|0,e+52|0,t+32|0),g=+f[t+32>>2],w=+f[t+36>>2],m=+f[t+40>>2],E=g- +f[t>>2],y=w- +f[t+4>>2],b=m- +f[t+8>>2],E*E+y*y+b*b<S):0){z=+f[t+44>>2];f[e+316>>2]=g;f[e+320>>2]=w;f[e+324>>2]=m;f[e+328>>2]=z;X=r[u>>0]|0;r[e+332>>0]=X<<1&4|(X&1|r[e+332>>0]&-16)|X<<1&8;z=+f[t+56>>2];S=+f[t+60>>2];f[e+336>>2]=+f[t+52>>2];f[e+340>>2]=0;f[e+344>>2]=z;f[e+348>>2]=S;S=E*E+y*y+b*b}if(!H?(TT(t,e+4|0,e+52|0,e+20|0,t+32|0),a=+f[t+32>>2],l=+f[t+36>>2],h=+f[t+40>>2],p=a- +f[t>>2],d=l- +f[t+4>>2],v=h- +f[t+8>>2],p*p+d*d+v*v<S):0){z=+f[t+44>>2];f[e+316>>2]=a;f[e+320>>2]=l;f[e+324>>2]=h;f[e+328>>2]=z;X=r[u>>0]|0;r[e+332>>0]=(X&255)>>>1&2|(X&1|r[e+332>>0]&-16)|X<<2&8;z=+f[t+60>>2];S=+f[t+56>>2];f[e+336>>2]=+f[t+52>>2];f[e+340>>2]=z;f[e+344>>2]=0;f[e+348>>2]=S;S=p*p+d*d+v*v}if(!F?(TT(t,e+20|0,e+52|0,e+36|0,t+32|0),i=+f[t+32>>2],n=+f[t+36>>2],o=+f[t+40>>2],R=i- +f[t>>2],U=n- +f[t+4>>2],z=o- +f[t+8>>2],R*R+U*U+z*z<S):0){R=+f[t+44>>2];f[e+316>>2]=i;f[e+320>>2]=n;f[e+324>>2]=o;f[e+328>>2]=R;X=r[u>>0]|0;r[e+332>>0]=X<<1&2|r[e+332>>0]&-16|X&4|X<<2&8;R=+f[t+52>>2];U=+f[t+60>>2];z=+f[t+56>>2];f[e+336>>2]=0;f[e+340>>2]=R;f[e+344>>2]=U;f[e+348>>2]=z}_=+f[e+336>>2];D=+f[e+340>>2];P=+f[e+344>>2];z=+f[e+348>>2];B=+f[e+84>>2]*_+ +f[e+100>>2]*D+ +f[e+116>>2]*P+ +f[e+132>>2]*z;q=_*+f[e+88>>2]+D*+f[e+104>>2]+P*+f[e+120>>2]+z*+f[e+136>>2];U=_*+f[e+92>>2]+D*+f[e+108>>2]+P*+f[e+124>>2]+z*+f[e+140>>2];f[e+244>>2]=B;f[e+248>>2]=q;f[e+252>>2]=U;f[e+256>>2]=0;j=+f[e+164>>2]*_+ +f[e+180>>2]*D+ +f[e+196>>2]*P+ +f[e+212>>2]*z;R=_*+f[e+168>>2]+D*+f[e+184>>2]+P*+f[e+200>>2]+z*+f[e+216>>2];z=_*+f[e+172>>2]+D*+f[e+188>>2]+P*+f[e+204>>2]+z*+f[e+220>>2];f[e+260>>2]=j;f[e+264>>2]=R;f[e+268>>2]=z;f[e+272>>2]=0;f[e+276>>2]=B-j;f[e+280>>2]=q-R;f[e+284>>2]=U-z;f[e+288>>2]=0;ST(e,e+332|0);if((+f[e+336>>2]>=0?+f[e+340>>2]>=0:0)?+f[e+344>>2]>=0:0)u=+f[e+348>>2]>=0&1;else u=0;r[e+312>>0]=u;X=u;X=X<<24>>24!=0;c=t;return X|0};case 3:{s[t+16>>2]=0;s[t+20>>2]=0;s[t+24>>2]=0;s[t+28>>2]=0;TT(t+16|0,e+4|0,e+20|0,e+36|0,e+316|0);D=+f[e+336>>2];P=+f[e+340>>2];z=+f[e+344>>2];B=+f[e+84>>2]*D+ +f[e+100>>2]*P+ +f[e+116>>2]*z;q=D*+f[e+88>>2]+P*+f[e+104>>2]+z*+f[e+120>>2];U=D*+f[e+92>>2]+P*+f[e+108>>2]+z*+f[e+124>>2];f[e+244>>2]=B;f[e+248>>2]=q;f[e+252>>2]=U;f[e+256>>2]=0;j=+f[e+164>>2]*D+ +f[e+180>>2]*P+ +f[e+196>>2]*z;R=D*+f[e+168>>2]+P*+f[e+184>>2]+z*+f[e+200>>2];z=D*+f[e+172>>2]+P*+f[e+188>>2]+z*+f[e+204>>2];f[e+260>>2]=j;f[e+264>>2]=R;f[e+268>>2]=z;f[e+272>>2]=0;f[e+276>>2]=B-j;f[e+280>>2]=q-R;f[e+284>>2]=U-z;f[e+288>>2]=0;ST(e,e+332|0);if((+f[e+336>>2]>=0?+f[e+340>>2]>=0:0)?+f[e+344>>2]>=0:0)u=+f[e+348>>2]>=0&1;else u=0;r[e+312>>0]=u;X=u;X=X<<24>>24!=0;c=t;return X|0};case 2:{a=+f[e+4>>2];i=+f[e+8>>2];h=+f[e+12>>2];n=+f[e+20>>2]-a;o=+f[e+24>>2]-i;l=+f[e+28>>2]-h;do if((0-a)*n+(0-i)*o+(0-h)*l>0)if((0-a)*n+(0-i)*o+(0-h)*l<n*n+o*o+l*l){r[e+332>>0]=H&-16|3;n=((0-a)*n+(0-i)*o+(0-h)*l)/(n*n+o*o+l*l);break}else{r[e+332>>0]=H&-16|2;n=1;break}else{r[e+332>>0]=H&-16|1;n=0}while(0);f[e+336>>2]=1-n;f[e+340>>2]=n;f[e+344>>2]=0;f[e+348>>2]=0;B=+f[e+84>>2];q=+f[e+88>>2];U=+f[e+92>>2];B=B+n*(+f[e+100>>2]-B);q=q+n*(+f[e+104>>2]-q);U=U+n*(+f[e+108>>2]-U);f[e+244>>2]=B;f[e+248>>2]=q;f[e+252>>2]=U;f[e+256>>2]=0;j=+f[e+164>>2];R=+f[e+168>>2];z=+f[e+172>>2];j=j+n*(+f[e+180>>2]-j);R=R+n*(+f[e+184>>2]-R);z=z+n*(+f[e+188>>2]-z);f[e+260>>2]=j;f[e+264>>2]=R;f[e+268>>2]=z;f[e+272>>2]=0;f[e+276>>2]=B-j;f[e+280>>2]=q-R;f[e+284>>2]=U-z;f[e+288>>2]=0;ST(e,e+332|0);if((+f[e+336>>2]>=0?+f[e+340>>2]>=0:0)?+f[e+344>>2]>=0:0)u=+f[e+348>>2]>=0&1;else u=0;r[e+312>>0]=u;X=u;X=X<<24>>24!=0;c=t;return X|0};default:{r[e+312>>0]=0;X=0;X=X<<24>>24!=0;c=t;return X|0}}return 0}function TT(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0;g=c;d=r[o+16>>0]&-16;r[o+16>>0]=d;l=+f[n>>2];a=+f[t>>2];p=+f[n+4>>2];h=+f[t+4>>2];v=+f[n+8>>2];u=+f[t+8>>2];m=+f[i>>2];y=+f[i+4>>2];b=+f[i+8>>2];w=+f[e>>2];E=+f[e+4>>2];T=+f[e+8>>2];S=(l-a)*(w-a)+(p-h)*(E-h)+(v-u)*(T-u);x=(m-a)*(w-a)+(y-h)*(E-h)+(b-u)*(T-u);if(!(!(S<=0)|!(x<=0))){s[o+0>>2]=s[t+0>>2];s[o+4>>2]=s[t+4>>2];s[o+8>>2]=s[t+8>>2];s[o+12>>2]=s[t+12>>2];r[o+16>>0]=d|1;f[o+20>>2]=1;f[o+24>>2]=0;f[o+28>>2]=0;f[o+32>>2]=0;c=g;return}N=(l-a)*(w-l)+(p-h)*(E-p)+(v-u)*(T-v);C=(m-a)*(w-l)+(y-h)*(E-p)+(b-u)*(T-v);if(!(!(N>=0)|!(C<=N))){s[o+0>>2]=s[n+0>>2];s[o+4>>2]=s[n+4>>2];s[o+8>>2]=s[n+8>>2];s[o+12>>2]=s[n+12>>2];r[o+16>>0]=d|2;f[o+20>>2]=0;f[o+24>>2]=1;f[o+28>>2]=0;f[o+32>>2]=0;c=g;return}if(!((S>=0?!(S*C-N*x<=0):1)|!(N<=0))){f[o>>2]=a+(l-a)*(S/(S-N));f[o+4>>2]=h+(p-h)*(S/(S-N));f[o+8>>2]=u+(v-u)*(S/(S-N));f[o+12>>2]=0;r[o+16>>0]=d|3;f[o+20>>2]=1-S/(S-N);f[o+24>>2]=S/(S-N);f[o+28>>2]=0;f[o+32>>2]=0;c=g;return}k=(l-a)*(w-m)+(p-h)*(E-y)+(v-u)*(T-b);w=(m-a)*(w-m)+(y-h)*(E-y)+(b-u)*(T-b);if(!(!(w>=0)|!(k<=w))){s[o+0>>2]=s[i+0>>2];s[o+4>>2]=s[i+4>>2];s[o+8>>2]=s[i+8>>2];s[o+12>>2]=s[i+12>>2];r[o+16>>0]=d|4;f[o+20>>2]=0;f[o+24>>2]=0;f[o+28>>2]=1;f[o+32>>2]=0;c=g;return}if(!((x>=0?!(k*x-S*w<=0):1)|!(w<=0))){f[o>>2]=a+(m-a)*(x/(x-w));f[o+4>>2]=h+(y-h)*(x/(x-w));f[o+8>>2]=u+(b-u)*(x/(x-w));f[o+12>>2]=0;r[o+16>>0]=d|5;f[o+20>>2]=1-x/(x-w);f[o+24>>2]=0;f[o+28>>2]=x/(x-w);f[o+32>>2]=0;c=g;return}if((N*w-k*C<=0?C-N>=0:0)?k-w>=0:0){k=(C-N)/(C-N+(k-w));f[o>>2]=l+(m-l)*k;f[o+4>>2]=p+(y-p)*k;f[o+8>>2]=v+(b-v)*k;f[o+12>>2]=0;r[o+16>>0]=d|6;f[o+20>>2]=0;f[o+24>>2]=1-k;f[o+28>>2]=k;f[o+32>>2]=0;c=g;return}E=1/(S*C-N*x+(N*w-k*C+(k*x-S*w)));T=(k*x-S*w)*E;k=(S*C-N*x)*E;f[o>>2]=(m-a)*k+(a+(l-a)*T);f[o+4>>2]=(y-h)*k+(h+(p-h)*T);f[o+8>>2]=(b-u)*k+((v-u)*T+u);f[o+12>>2]=0;r[o+16>>0]=d|7;f[o+20>>2]=1-T-k;f[o+24>>2]=T;f[o+28>>2]=k;f[o+32>>2]=0;c=g;return}function NT(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0;r=c;c=c+96|0;v=+f[t+48>>2]- +f[t+112>>2];u=+f[t+52>>2]- +f[t+116>>2];a=+f[t+56>>2]- +f[t+120>>2];p=v*+f[t+64>>2]+u*+f[t+80>>2]+a*+f[t+96>>2];h=v*+f[t+68>>2]+u*+f[t+84>>2]+a*+f[t+100>>2];a=v*+f[t+72>>2]+u*+f[t+88>>2]+a*+f[t+104>>2];m=s[e+8>>2]|0;y=s[e+4>>2]|0;u=+f[y+28>>2]*+f[y+12>>2];v=u+ +f[e+12>>2];S=+f[m+72>>2];w=+f[m+56>>2];b=+f[m+76>>2];k=+f[m+60>>2];E=+f[m+80>>2];x=+f[m+64>>2];T=+f[m+88>>2];N=+f[m+92>>2];C=+f[m+96>>2];L=(b-k)*(C-x)-(E-x)*(N-k);l=(E-x)*(T-w)-(S-w)*(C-x);o=(S-w)*(N-k)-(b-k)*(T-w);d=1/+X(+(o*o+(L*L+l*l)));g=(p-w)*d*L+d*l*(h-k)+d*o*(a-x);if(g<0){g=g*-1;o=d*o*-1;l=d*l*-1;d=d*L*-1}else{o=d*o;l=d*l;d=d*L}if(!(g<v)){c=r;return}L=(a-x)*((S-w)*l-(b-k)*d)+((p-w)*((b-k)*o-(E-x)*l)+(h-k)*((E-x)*d-(S-w)*o));A=(a-E)*((T-S)*l-(N-b)*d)+((p-S)*((N-b)*o-(C-E)*l)+(h-b)*((C-E)*d-(T-S)*o));O=(a-C)*((w-T)*l-(k-N)*d)+((p-T)*((k-N)*o-(x-C)*l)+(h-N)*((x-C)*d-(w-T)*o));if(!(L>0&A>0&O>0)?!(L<=0)|!(A<=0)|!(O<=0):0){if((dD[s[(s[m>>2]|0)+100>>2]&127](m)|0)<=0){c=r;return}g=0;b=0;T=0;y=0;m=0;do{M=s[e+8>>2]|0;JD[s[(s[M>>2]|0)+104>>2]&127](M,m,r+80|0,r+64|0);S=+f[r+80>>2];N=+f[r+84>>2];A=+f[r+88>>2];E=+f[r+64>>2]-S;x=+f[r+68>>2]-N;O=+f[r+72>>2]-A;do if((p-S)*E+(h-N)*x+(a-A)*O>0)if((p-S)*E+(h-N)*x+(a-A)*O<E*E+x*x+O*O){w=((p-S)*E+(h-N)*x+(a-A)*O)/(E*E+x*x+O*O);C=p-S-E*w;k=h-N-x*w;L=a-A-O*w;break}else{C=p-S-E;k=h-N-x;L=a-A-O;w=1;break}else{C=p-S;k=h-N;L=a-A;w=0}while(0);if(L*L+(k*k+C*C)<v*v){T=A+O*w;b=N+x*w;g=S+E*w;y=1}m=m+1|0;M=s[e+8>>2]|0}while((m|0)<(dD[s[(s[M>>2]|0)+100>>2]&127](M)|0));if((y&1)==0){c=r;return}else{w=v*v;v=g}}else{w=v*v;v=p-d*g;b=h-l*g;T=a-o*g}p=p-v;h=h-b;a=a-T;if(!(p*p+h*h+a*a<w)){c=r;return}if(p*p+h*h+a*a>1.1920928955078125e-7){o=+X(+(p*p+h*h+a*a));u=u-o;d=p*(1/o);l=h*(1/o);o=a*(1/o)}u=-u;if(i){N=+f[t+64>>2];C=+f[t+68>>2];k=+f[t+72>>2];L=N*d+C*l+k*o;p=+f[t+80>>2];g=+f[t+84>>2];w=+f[t+88>>2];A=d*p+l*g+o*w;E=+f[t+96>>2];S=+f[t+100>>2];x=+f[t+104>>2];O=d*E+l*S+o*x;f[r+48>>2]=-L;f[r+52>>2]=-A;f[r+56>>2]=-O;f[r+60>>2]=0;A=v*p+b*g+T*w+ +f[t+116>>2]+A*u;O=v*E+b*S+T*x+ +f[t+120>>2]+O*u;f[r+32>>2]=v*N+b*C+T*k+ +f[t+112>>2]+L*u;f[r+36>>2]=A;f[r+40>>2]=O;f[r+44>>2]=0;zD[s[(s[n>>2]|0)+16>>2]&15](n,r+48|0,r+32|0,u);c=r;return}else{M=s[(s[n>>2]|0)+16>>2]|0;C=+f[t+64>>2];k=+f[t+68>>2];L=+f[t+72>>2];E=+f[t+80>>2];S=+f[t+84>>2];A=+f[t+88>>2];x=+f[t+96>>2];N=+f[t+100>>2];O=+f[t+104>>2];f[r+16>>2]=C*d+k*l+L*o;f[r+20>>2]=d*E+l*S+o*A;f[r+24>>2]=d*x+l*N+o*O;f[r+28>>2]=0;A=v*E+b*S+T*A+ +f[t+116>>2];O=v*x+b*N+T*O+ +f[t+120>>2];f[r>>2]=v*C+b*k+T*L+ +f[t+112>>2];f[r+4>>2]=A;f[r+8>>2]=O;f[r+12>>2]=0;zD[M&15](n,r+16|0,r,u);c=r;return}}function CT(e){e=e|0;return}function kT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function LT(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=17896;if((r[e+8>>0]|0)!=0?(n=s[e+12>>2]|0,(n|0)!=0):0){i=s[e+4>>2]|0;hD[s[(s[i>>2]|0)+16>>2]&127](i,n)}hM(e);c=t;return}function AT(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=17896;if((r[e+8>>0]|0)==0){c=t;return}n=s[e+12>>2]|0;if((n|0)==0){c=t;return}e=s[e+4>>2]|0;hD[s[(s[e>>2]|0)+16>>2]&127](e,n);c=t;return}function OT(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0;u=c;c=c+144|0;a=s[e+12>>2]|0;if((a|0)==0){c=u;return}h=s[t+4>>2]|0;l=s[n+4>>2]|0;s[o+4>>2]=a;f[u+140>>2]=0xde0b6b000000000;a=s[t+12>>2]|0;s[u+12>>2]=s[a+0>>2];s[u+16>>2]=s[a+4>>2];s[u+20>>2]=s[a+8>>2];s[u+24>>2]=s[a+12>>2];s[u+28>>2]=s[a+16>>2];s[u+32>>2]=s[a+20>>2];s[u+36>>2]=s[a+24>>2];s[u+40>>2]=s[a+28>>2];s[u+44>>2]=s[a+32>>2];s[u+48>>2]=s[a+36>>2];s[u+52>>2]=s[a+40>>2];s[u+56>>2]=s[a+44>>2];s[u+60>>2]=s[a+48>>2];s[u+64>>2]=s[a+52>>2];s[u+68>>2]=s[a+56>>2];s[u+72>>2]=s[a+60>>2];n=s[n+12>>2]|0;s[u+76>>2]=s[n+0>>2];s[u+80>>2]=s[n+4>>2];s[u+84>>2]=s[n+8>>2];s[u+88>>2]=s[n+12>>2];s[u+92>>2]=s[n+16>>2];s[u+96>>2]=s[n+20>>2];s[u+100>>2]=s[n+24>>2];s[u+104>>2]=s[n+28>>2];s[u+108>>2]=s[n+32>>2];s[u+112>>2]=s[n+36>>2];s[u+116>>2]=s[n+40>>2];s[u+120>>2]=s[n+44>>2];s[u+124>>2]=s[n+48>>2];s[u+128>>2]=s[n+52>>2];s[u+132>>2]=s[n+56>>2];s[u+136>>2]=s[n+60>>2];s[u>>2]=17976;s[u+4>>2]=h;s[u+8>>2]=l;DT(u,u+12|0,o,s[i+20>>2]|0,0);if((r[e+8>>0]|0)==0){c=u;return}t=s[o+4>>2]|0;if((s[t+748>>2]|0)==0){c=u;return}a=s[t+740>>2]|0;n=s[(s[o+8>>2]|0)+8>>2]|0;if((a|0)==(n|0)){eM(t,a+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=u;return}else{eM(t,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,n+4|0);c=u;return}}function MT(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 1}function _T(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+12>>2]|0)==0){c=n;return}if((r[e+8>>0]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+12>>2];s[t+4>>2]=u+1;c=n;return}function DT(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0,ut=0,at=0,ft=0,lt=0,ct=0,ht=0,pt=0,dt=0,vt=0,mt=0,gt=0,yt=0,bt=0,wt=0,Et=0,St=0,xt=0,Tt=0,Nt=0,Ct=0,kt=0,Lt=0,At=0;r=c;c=c+656|0;f[r+48>>2]=+f[t>>2];f[r>>2]=+f[t+64>>2];i=r+52|0;f[i>>2]=+f[t+4>>2];f[r+4>>2]=+f[t+68>>2];f[r+56>>2]=+f[t+8>>2];f[r+8>>2]=+f[t+72>>2];f[r+64>>2]=+f[t+16>>2];f[r+16>>2]=+f[t+80>>2];f[r+68>>2]=+f[t+20>>2];f[r+20>>2]=+f[t+84>>2];f[r+72>>2]=+f[t+24>>2];f[r+24>>2]=+f[t+88>>2];f[r+80>>2]=+f[t+32>>2];f[r+32>>2]=+f[t+96>>2];f[r+84>>2]=+f[t+36>>2];f[r+36>>2]=+f[t+100>>2];f[r+88>>2]=+f[t+40>>2];f[r+40>>2]=+f[t+104>>2];At=s[e+4>>2]|0;C=+f[At+28>>2];k=+f[At+32>>2];O=+f[At+36>>2];L=+CD[s[(s[At>>2]|0)+48>>2]&15](At);A=+CD[s[(s[At>>2]|0)+48>>2]&15](At);O=(O+ +CD[s[(s[At>>2]|0)+48>>2]&15](At))*2;At=s[e+8>>2]|0;S=+f[At+28>>2];T=+f[At+32>>2];m=+f[At+36>>2];E=+CD[s[(s[At>>2]|0)+48>>2]&15](At);x=+CD[s[(s[At>>2]|0)+48>>2]&15](At);m=(m+ +CD[s[(s[At>>2]|0)+48>>2]&15](At))*2;R=+f[t+112>>2]- +f[t+48>>2];U=+f[t+116>>2]- +f[t+52>>2];q=+f[t+120>>2]- +f[t+56>>2];a=+f[r+48>>2];u=+f[r+64>>2];o=+f[r+80>>2];P=+f[i>>2];H=+f[r+68>>2];D=+f[r+84>>2];_=+f[r+56>>2];M=+f[r+72>>2];N=+f[r+88>>2];f[r+548>>2]=(C+L)*2*.5;f[r+552>>2]=(k+A)*2*.5;f[r+556>>2]=O*.5;f[r+536>>2]=(S+E)*2*.5;f[r+540>>2]=(T+x)*2*.5;f[r+544>>2]=m*.5;v=+f[r>>2];w=+f[r+16>>2];g=+f[r+32>>2];d=+f[r+4>>2];b=+f[r+20>>2];y=+f[r+36>>2];p=+f[r+8>>2];h=+f[r+24>>2];l=+f[r+40>>2];K=+W(+(a*v+u*w+o*g));z=+W(+(a*d+u*b+o*y));B=+W(+(a*p+u*h+o*l));Q=+W(+(v*P+w*H+g*D));$=+W(+(d*P+b*H+y*D));I=+W(+(p*P+h*H+l*D));j=+W(+(v*_+w*M+g*N));F=+W(+(d*_+b*M+y*N));V=+W(+(p*_+h*M+l*N));Y=+W(+(R*a+U*u+q*o))-(m*.5*B+((C+L)*2*.5+K*(S+E)*2*.5+z*(T+x)*2*.5));if(Y>0){c=r;return}if(Y>-3.4028234663852886e38){ot=1;J=R*a+U*u+q*o<0&1;e=r+48|0}else{ot=0;J=0;e=0;Y=-3.4028234663852886e38}G=+W(+(R*P+U*H+q*D))-((k+A)*2*.5+Q*(S+E)*2*.5+$*(T+x)*2*.5+I*m*.5);if(G>0){c=r;return}if(G>Y){ot=2;J=R*P+U*H+q*D<0&1;e=i}else G=Y;Y=+W(+(R*_+U*M+q*N))-(O*.5+j*(S+E)*2*.5+F*(T+x)*2*.5+V*m*.5);if(Y>0){c=r;return}if(Y>G){ot=3;J=R*_+U*M+q*N<0&1;e=r+56|0;G=Y}Y=+W(+(R*v+U*w+q*g))-((S+E)*2*.5+(K*(C+L)*2*.5+Q*(k+A)*2*.5+j*O*.5));if(Y>0){c=r;return}if(Y>G){ot=4;J=R*v+U*w+q*g<0&1;e=r;G=Y}Y=+W(+(R*d+U*b+q*y))-((T+x)*2*.5+(z*(C+L)*2*.5+$*(k+A)*2*.5+F*O*.5));if(Y>0){c=r;return}if(Y>G){ot=5;J=R*d+U*b+q*y<0&1;e=r+4|0;G=Y}mt=+W(+(R*p+U*h+q*l))-(m*.5+(B*(C+L)*2*.5+I*(k+A)*2*.5+V*O*.5));if(mt>0){c=r;return}if(mt>G){ot=6;J=R*p+U*h+q*l<0&1;e=r+8|0}else mt=G;tt=(R*_+U*M+q*N)*(v*P+w*H+g*D)-(R*P+U*H+q*D)*(v*_+w*M+g*N);Y=+W(+tt)-((j+9999999747378752e-21)*(k+A)*2*.5+(Q+9999999747378752e-21)*O*.5+(B+9999999747378752e-21)*(T+x)*2*.5+(z+9999999747378752e-21)*m*.5);if(Y>1.1920928955078125e-7){c=r;return}rt=(v*_+w*M+g*N)*(v*_+w*M+g*N)+0;et=(v*P+w*H+g*D)*(v*P+w*H+g*D);G=+X(+(et+rt));if(G>1.1920928955078125e-7?Y/G*1.0499999523162842>mt:0){dt=(v*P+w*H+g*D)/G;pt=-(v*_+w*M+g*N)/G;ht=0/G;ot=7;J=tt<0&1;e=0;mt=Y/G}else{dt=0;pt=0;ht=0}nt=(R*_+U*M+q*N)*(d*P+b*H+y*D)-(R*P+U*H+q*D)*(d*_+b*M+y*N);Y=+W(+nt)-((F+9999999747378752e-21)*(k+A)*2*.5+($+9999999747378752e-21)*O*.5+(B+9999999747378752e-21)*(S+E)*2*.5+(K+9999999747378752e-21)*m*.5);if(Y>1.1920928955078125e-7){c=r;return}it=(d*_+b*M+y*N)*(d*_+b*M+y*N)+0;G=(d*P+b*H+y*D)*(d*P+b*H+y*D);tt=+X(+(G+it));if(tt>1.1920928955078125e-7?Y/tt*1.0499999523162842>mt:0){dt=(d*P+b*H+y*D)/tt;pt=-(d*_+b*M+y*N)/tt;ht=0/tt;ot=8;J=nt<0&1;e=0;mt=Y/tt}Et=(R*_+U*M+q*N)*(p*P+h*H+l*D)-(R*P+U*H+q*D)*(p*_+h*M+l*N);tt=+W(+Et)-((V+9999999747378752e-21)*(k+A)*2*.5+(I+9999999747378752e-21)*O*.5+(z+9999999747378752e-21)*(S+E)*2*.5+(K+9999999747378752e-21)*(T+x)*2*.5);if(tt>1.1920928955078125e-7){c=r;return}nt=(p*_+h*M+l*N)*(p*_+h*M+l*N)+0;Y=(p*P+h*H+l*D)*(p*P+h*H+l*D);gt=+X(+(Y+nt));if(gt>1.1920928955078125e-7?tt/gt*1.0499999523162842>mt:0){dt=(p*P+h*H+l*D)/gt;pt=-(p*_+h*M+l*N)/gt;ht=0/gt;ot=9;J=Et<0&1;e=0;mt=tt/gt}Et=(R*a+U*u+q*o)*(v*_+w*M+g*N)-(R*_+U*M+q*N)*(a*v+u*w+o*g);gt=+W(+Et)-((j+9999999747378752e-21)*(C+L)*2*.5+(K+9999999747378752e-21)*O*.5+(I+9999999747378752e-21)*(T+x)*2*.5+($+9999999747378752e-21)*m*.5);if(gt>1.1920928955078125e-7){c=r;return}tt=(a*v+u*w+o*g)*(a*v+u*w+o*g);rt=+X(+(tt+rt));do if(rt>1.1920928955078125e-7){if(!(gt/rt*1.0499999523162842>mt))break;dt=-(a*v+u*w+o*g)/rt;pt=0/rt;ht=(v*_+w*M+g*N)/rt;ot=10;J=Et<0&1;e=0;mt=gt/rt}while(0);Et=(R*a+U*u+q*o)*(d*_+b*M+y*N)-(R*_+U*M+q*N)*(a*d+u*b+o*y);gt=+W(+Et)-((F+9999999747378752e-21)*(C+L)*2*.5+(z+9999999747378752e-21)*O*.5+(I+9999999747378752e-21)*(S+E)*2*.5+(Q+9999999747378752e-21)*m*.5);if(gt>1.1920928955078125e-7){c=r;return}rt=(a*d+u*b+o*y)*(a*d+u*b+o*y);it=+X(+(rt+it));do if(it>1.1920928955078125e-7){if(!(gt/it*1.0499999523162842>mt))break;dt=-(a*d+u*b+o*y)/it;pt=0/it;ht=(d*_+b*M+y*N)/it;ot=11;J=Et<0&1;e=0;mt=gt/it}while(0);Et=(R*a+U*u+q*o)*(p*_+h*M+l*N)-(R*_+U*M+q*N)*(a*p+u*h+o*l);gt=+W(+Et)-((V+9999999747378752e-21)*(C+L)*2*.5+(B+9999999747378752e-21)*O*.5+($+9999999747378752e-21)*(S+E)*2*.5+(Q+9999999747378752e-21)*(T+x)*2*.5);if(gt>1.1920928955078125e-7){c=r;return}it=(a*p+u*h+o*l)*(a*p+u*h+o*l);nt=+X(+(it+nt));do if(nt>1.1920928955078125e-7){if(!(gt/nt*1.0499999523162842>mt))break;dt=-(a*p+u*h+o*l)/nt;pt=0/nt;ht=(p*_+h*M+l*N)/nt;ot=12;J=Et<0&1;e=0;mt=gt/nt}while(0);nt=(R*P+U*H+q*D)*(a*v+u*w+o*g)-(R*a+U*u+q*o)*(v*P+w*H+g*D);K=+W(+nt)-((Q+9999999747378752e-21)*(C+L)*2*.5+(K+9999999747378752e-21)*(k+A)*2*.5+(V+9999999747378752e-21)*(T+x)*2*.5+(F+9999999747378752e-21)*m*.5);if(K>1.1920928955078125e-7){c=r;return}Q=+X(+(tt+et+0));do if(Q>1.1920928955078125e-7){if(!(K/Q*1.0499999523162842>mt))break;dt=0/Q;pt=(a*v+u*w+o*g)/Q;ht=-(v*P+w*H+g*D)/Q;ot=13;J=nt<0&1;e=0;mt=K/Q}while(0);K=(R*P+U*H+q*D)*(a*d+u*b+o*y)-(R*a+U*u+q*o)*(d*P+b*H+y*D);z=+W(+K)-(($+9999999747378752e-21)*(C+L)*2*.5+(z+9999999747378752e-21)*(k+A)*2*.5+(V+9999999747378752e-21)*(S+E)*2*.5+(j+9999999747378752e-21)*m*.5);if(z>1.1920928955078125e-7){c=r;return}V=+X(+(rt+G+0));do if(V>1.1920928955078125e-7){if(!(z/V*1.0499999523162842>mt)){st=e;break}dt=0/V;pt=(a*d+u*b+o*y)/V;ht=-(d*P+b*H+y*D)/V;ot=14;J=K<0&1;st=0;mt=z/V}else st=e;while(0);q=(R*P+U*H+q*D)*(a*p+u*h+o*l)-(R*a+U*u+q*o)*(p*P+h*H+l*D);B=+W(+q)-((I+9999999747378752e-21)*(C+L)*2*.5+(B+9999999747378752e-21)*(k+A)*2*.5+(F+9999999747378752e-21)*(S+E)*2*.5+(j+9999999747378752e-21)*(T+x)*2*.5);if(B>1.1920928955078125e-7){c=r;return}j=+X(+(it+Y+0));do if(j>1.1920928955078125e-7){if(!(B/j*1.0499999523162842>mt)){e=55;break}ht=-(p*P+h*H+l*D)/j;pt=(a*p+u*h+o*l)/j;dt=0/j;ot=15;J=q<0&1;mt=B/j;e=58}else e=55;while(0);do if((e|0)==55){if((ot|0)==0){c=r;return}if((st|0)==0){e=58;break}o=+f[st>>2];u=+f[st+16>>2];a=+f[st+32>>2]}while(0);if((e|0)==58){o=ht*+f[r+48>>2]+pt*+f[i>>2]+dt*_;u=ht*+f[r+64>>2]+pt*+f[r+68>>2]+dt*M;a=ht*+f[r+80>>2]+pt*+f[r+84>>2]+dt*N}if((J|0)!=0){o=-o;u=-u;a=-a}if((ot|0)>6){nt=+f[r+48>>2];rt=+f[r+64>>2];pt=+f[r+80>>2];ht=(o*nt+u*rt+a*pt>0?1:-1)*(C+L)*2*.5;C=+f[i>>2];it=+f[r+68>>2];gt=+f[r+84>>2];dt=(o*C+u*it+a*gt>0?1:-1)*(k+A)*2*.5;Et=(o*_+u*M+a*N>0?1:-1)*O*.5;C=+f[t+48>>2]+ht*nt+dt*C+Et*_;k=+f[t+52>>2]+ht*rt+dt*it+Et*M;N=+f[t+56>>2]+ht*pt+dt*gt+Et*N;s[r+520>>2]=s[t+112>>2];s[r+524>>2]=s[t+116>>2];s[r+528>>2]=s[t+120>>2];S=(o*v+u*w+a*g>0?-1:1)*(S+E)*2*.5;x=(o*d+u*b+a*y>0?-1:1)*(T+x)*2*.5;b=+f[r+524>>2]+S*w+x*b;g=+f[r+528>>2]+S*g+x*y;m=(o*p+u*h+a*l>0?-1:1)*m*.5;p=+f[r+520>>2]+S*v+x*d+m*p;f[r+520>>2]=p;f[r+524>>2]=b+m*h;f[r+528>>2]=g+m*l;At=ot+ -7|0;w=+f[r+48+(((At|0)/3|0)<<2)>>2];x=+f[r+48+(((At|0)/3|0)+4<<2)>>2];S=+f[r+48+(((At|0)/3|0)+8<<2)>>2];y=+f[r+(((At|0)%3|0)<<2)>>2];v=+f[r+(((At|0)%3|0)+4<<2)>>2];d=+f[r+(((At|0)%3|0)+8<<2)>>2];E=1-(w*y+x*v+S*d)*(w*y+x*v+S*d);if(!(E<=9999999747378752e-20))w=(((p-C)*w+(b+m*h-k)*x+(g+m*l-N)*S)*(w*y+x*v+S*d)-((p-C)*y+(b+m*h-k)*v+(g+m*l-N)*d))*(1/E);else w=0;f[r+520>>2]=p+w*y;f[r+524>>2]=b+m*h+w*v;f[r+528>>2]=g+m*l+w*d;At=s[(s[n>>2]|0)+16>>2]|0;f[r+504>>2]=-o;f[r+508>>2]=-u;f[r+512>>2]=-a;f[r+516>>2]=0;zD[At&15](n,r+504|0,r+520|0,mt);c=r;return}J=(ot|0)<4;if(J){l=o;h=u;p=a;ut=r+48|0;bt=r;st=r+548|0;vt=r+536|0;i=t+48|0;t=t+112|0}else{l=-o;h=-u;p=-a;ut=r;bt=r+48|0;st=r+536|0;vt=r+548|0;i=t+112|0;t=t+48|0}d=l*+f[bt>>2]+h*+f[bt+16>>2]+p*+f[bt+32>>2];f[r+488>>2]=d;m=l*+f[bt+4>>2]+h*+f[bt+20>>2]+p*+f[bt+36>>2];f[r+492>>2]=m;v=l*+f[bt+8>>2]+h*+f[bt+24>>2]+p*+f[bt+40>>2];f[r+496>>2]=v;d=+W(+d);m=+W(+m);v=+W(+v);if(m>d){ft=m>v;yt=0;at=m>v?1:2}else{ft=d>v;yt=d>v&1;at=d>v?0:2}wt=ft?2:1;m=+f[vt+(at<<2)>>2];v=+f[t>>2]- +f[i>>2];d=m*+f[bt+(at<<2)>>2];if(+f[r+488+(at<<2)>>2]<0){d=v+d;v=+f[t+4>>2]- +f[i+4>>2]+m*+f[bt+((at|4)<<2)>>2];m=+f[t+8>>2]- +f[i+8>>2]+m*+f[bt+((at|8)<<2)>>2]}else{d=v-d;v=+f[t+4>>2]- +f[i+4>>2]-m*+f[bt+((at|4)<<2)>>2];m=+f[t+8>>2]- +f[i+8>>2]-m*+f[bt+((at|8)<<2)>>2]}ct=(J?-1:-4)+ot|0;if((ct|0)==0){St=1;xt=2}else if((ct|0)==1){St=0;xt=2}else{St=0;xt=1}b=+f[ut+(St<<2)>>2];w=+f[ut+((St|4)<<2)>>2];E=+f[ut+((St|8)<<2)>>2];g=d*b+v*w+m*E;S=+f[ut+(xt<<2)>>2];y=+f[ut+((xt|4)<<2)>>2];T=+f[ut+((xt|8)<<2)>>2];C=d*S+v*y+m*T;lt=bt+(yt<<2)|0;x=+f[lt>>2];at=bt+((yt|4)<<2)|0;L=+f[at>>2];t=bt+((yt|8)<<2)|0;A=+f[t>>2];ft=bt+(wt<<2)|0;N=+f[ft>>2];ut=bt+((wt|4)<<2)|0;k=+f[ut>>2];ot=bt+((wt|8)<<2)|0;O=+f[ot>>2];gt=+f[vt+(yt<<2)>>2];Et=+f[vt+(wt<<2)>>2];mt=(b*N+w*k+E*O)*Et;Et=(S*N+y*k+T*O)*Et;f[r+456>>2]=g-(b*x+w*L+E*A)*gt-mt;f[r+460>>2]=C-(S*x+y*L+T*A)*gt-Et;f[r+464>>2]=g-(b*x+w*L+E*A)*gt+mt;f[r+468>>2]=C-(S*x+y*L+T*A)*gt+Et;f[r+472>>2]=g+(b*x+w*L+E*A)*gt+mt;f[r+476>>2]=C+(S*x+y*L+T*A)*gt+Et;f[r+480>>2]=g+(b*x+w*L+E*A)*gt-mt;f[r+484>>2]=C+(S*x+y*L+T*A)*gt-Et;f[r+448>>2]=+f[st+(St<<2)>>2];f[r+452>>2]=+f[st+(xt<<2)>>2];wt=0;Nt=4;xt=r+456|0;bt=r+384|0;e:while(1){yt=r+448+(wt<<2)|0;vt=1-wt|0;St=-1;while(1){if((Nt|0)>0){M=+(St|0);kt=0;Tt=xt;Ct=bt;while(1){Lt=Tt+(wt<<2)|0;_=+f[Lt>>2];D=+f[yt>>2];if(M*_<D){f[Ct>>2]=+f[Tt>>2];f[Ct+4>>2]=+f[Tt+4>>2];kt=kt+1|0;if((kt&8|0)!=0){Nt=kt;break e}_=+f[Lt>>2];D=+f[yt>>2];Ct=Ct+8|0}Lt=Tt;Tt=Tt+8|0;At=(Nt|0)>1?Tt:xt;P=+f[At+(wt<<2)>>2];if(M*_<D^M*P<D){Et=+f[Lt+(vt<<2)>>2];f[Ct+(vt<<2)>>2]=Et+(M*D-_)*((+f[At+(vt<<2)>>2]-Et)/(P-_));f[Ct+(wt<<2)>>2]=M*+f[yt>>2];kt=kt+1|0;if((kt&8|0)==0)Ct=Ct+8|0;else{Nt=kt;break e}}Nt=Nt+ -1|0;if((Nt|0)<=0){Nt=kt;break}}}else Nt=0;Tt=(bt|0)==(r+384|0)?r+592|0:r+384|0;if((St|0)<0){xt=bt;bt=Tt;St=St+2|0}else break}wt=wt+1|0;if((wt|0)<2){xt=bt;bt=Tt}else break}if((bt|0)!=(r+384|0))yM(r+384|0,bt|0,Nt<<3|0)|0;if((Nt|0)<1){c=r;return}M=1/((b*x+w*L+E*A)*(S*N+y*k+T*O)-(S*x+y*L+T*A)*(b*N+w*k+E*O));_=+f[st+(ct<<2)>>2];D=+f[lt>>2];P=+f[ft>>2];H=+f[at>>2];B=+f[ut>>2];j=+f[t>>2];F=+f[ot>>2];t=0;st=0;do{At=st<<1;q=+f[r+384+(At<<2)>>2];I=+f[r+384+((At|1)<<2)>>2];dt=(S*N+y*k+T*O)*M*(q-g)-(b*N+w*k+E*O)*M*(I-C);Et=(b*x+w*L+E*A)*M*(I-C)-(S*x+y*L+T*A)*M*(q-g);At=t*3|0;mt=d+dt*D+Et*P;f[r+288+(At<<2)>>2]=mt;gt=v+dt*H+Et*B;f[r+288+(At+1<<2)>>2]=gt;Et=m+dt*j+Et*F;f[r+288+(At+2<<2)>>2]=Et;Et=_-(l*mt+h*gt+p*Et);f[r+256+(t<<2)>>2]=Et;if(Et>=0){At=t<<1;f[r+384+(At<<2)>>2]=q;f[r+384+((At|1)<<2)>>2]=I;t=t+1|0}st=st+1|0}while((st|0)!=(Nt|0));if((t|0)<1){c=r;return}st=(t|0)<4?t:4;st=(st|0)<1?1:st;if((t|0)<=(st|0)){e=(t|0)>0;if(J){if(!e){c=r;return}e=i+4|0;J=i+8|0;o=-o;u=-u;a=-a;st=0;do{At=st*3|0;f[r+240>>2]=+f[r+288+(At<<2)>>2]+ +f[i>>2];f[r+244>>2]=+f[r+288+(At+1<<2)>>2]+ +f[e>>2];f[r+248>>2]=+f[r+288+(At+2<<2)>>2]+ +f[J>>2];At=s[(s[n>>2]|0)+16>>2]|0;f[r+224>>2]=o;f[r+228>>2]=u;f[r+232>>2]=a;f[r+236>>2]=0;zD[At&15](n,r+224|0,r+240|0,-+f[r+256+(st<<2)>>2]);st=st+1|0}while((st|0)!=(t|0));c=r;return}else{if(!e){c=r;return}J=i+4|0;st=i+8|0;l=-o;p=-u;h=-a;e=0;do{At=e*3|0;Et=+f[r+256+(e<<2)>>2];f[r+208>>2]=+f[r+288+(At<<2)>>2]+ +f[i>>2]-o*Et;f[r+212>>2]=+f[r+288+(At+1<<2)>>2]+ +f[J>>2]-u*Et;f[r+216>>2]=+f[r+288+(At+2<<2)>>2]+ +f[st>>2]-a*Et;At=s[(s[n>>2]|0)+16>>2]|0;f[r+192>>2]=l;f[r+196>>2]=p;f[r+200>>2]=h;f[r+204>>2]=0;zD[At&15](n,r+192|0,r+208|0,-Et);e=e+1|0}while((e|0)!=(t|0));c=r;return}}if((t|0)>1){ut=1;ot=0;l=+f[r+256>>2];while(1){h=+f[r+256+(ut<<2)>>2];at=h>l;ot=at?ut:ot;ut=ut+1|0;if((ut|0)==(t|0))break;else l=at?h:l}}else ot=0;if((t|0)==1){m=+f[r+384>>2];l=+f[r+388>>2];e=115}else if((t|0)!=2){ut=t+ -1|0;if((ut|0)>0){g=0;m=0;v=0;at=0;do{At=at<<1;dt=+f[r+384+(At<<2)>>2];mt=+f[r+384+(At+3<<2)>>2];gt=+f[r+384+(At+2<<2)>>2];Et=+f[r+384+((At|1)<<2)>>2];g=g+(dt*mt-gt*Et);m=m+(dt+gt)*(dt*mt-gt*Et);v=v+(mt+Et)*(dt*mt-gt*Et);at=at+1|0}while((at|0)!=(ut|0))}else{g=0;m=0;v=0}At=t<<1;d=+f[r+384+(At+ -2<<2)>>2];p=+f[r+388>>2];h=+f[r+384>>2];l=+f[r+384+(At+ -1<<2)>>2];g=g+(d*p-h*l);if(+W(+g)>1.1920928955078125e-7)g=1/(g*3);else g=0xde0b6b000000000;if((t|0)>0){m=g*(m+(d*p-h*l)*(d+h));l=g*(v+(d*p-h*l)*(l+p));e=115}else ut=0}else{m=(+f[r+384>>2]+ +f[r+392>>2])*.5;l=(+f[r+388>>2]+ +f[r+396>>2])*.5;e=115}if((e|0)==115){e=0;do{At=e<<1;f[r+592+(e<<2)>>2]=+Z(+(+f[r+384+((At|1)<<2)>>2]-l),+(+f[r+384+(At<<2)>>2]-m));e=e+1|0}while((e|0)!=(t|0));e=0;do{s[r+560+(e<<2)>>2]=1;e=e+1|0}while((e|0)!=(t|0));ut=1}e=r+560+(ot<<2)|0;s[e>>2]=0;s[r+160>>2]=ot;t:do if((st|0)>1){l=+f[r+592+(ot<<2)>>2];if(ut){ut=r+164|0;e=1}else{ut=r+164|0;t=1;while(1){s[ut>>2]=ot;s[e>>2]=0;t=t+1|0;if((t|0)==(st|0))break t;else ut=ut+4|0}}while(1){h=+(e|0)*(6.2831854820251465/+(st|0))+l;if(h>3.1415927410125732)h=h+ -6.2831854820251465;s[ut>>2]=ot;ft=ot;at=0;p=1e9;do{do if((s[r+560+(at<<2)>>2]|0)!=0){d=+W(+(+f[r+592+(at<<2)>>2]-h));if(d>3.1415927410125732)d=6.2831854820251465-d;if(!(d<p))break;s[ut>>2]=at;ft=at;p=d}while(0);at=at+1|0}while((at|0)!=(t|0));s[r+560+(ft<<2)>>2]=0;e=e+1|0;if((e|0)==(st|0))break;else ut=ut+4|0}}while(0);if((st|0)<=0){c=r;return}e=i+4|0;t=i+8|0;h=-a;l=-u;p=-o;if(J){J=0;do{At=s[r+160+(J<<2)>>2]|0;f[r+144>>2]=+f[r+288+(At*3<<2)>>2]+ +f[i>>2];f[r+148>>2]=+f[r+288+((At*3|0)+1<<2)>>2]+ +f[e>>2];f[r+152>>2]=+f[r+288+((At*3|0)+2<<2)>>2]+ +f[t>>2];Lt=s[(s[n>>2]|0)+16>>2]|0;f[r+128>>2]=p;f[r+132>>2]=l;f[r+136>>2]=h;f[r+140>>2]=0;zD[Lt&15](n,r+128|0,r+144|0,-+f[r+256+(At<<2)>>2]);J=J+1|0}while((J|0)<(st|0));c=r;return}else{J=0;do{Lt=s[r+160+(J<<2)>>2]|0;dt=+f[r+288+(Lt*3<<2)>>2]+ +f[i>>2];f[r+144>>2]=dt;mt=+f[r+288+((Lt*3|0)+1<<2)>>2]+ +f[e>>2];f[r+148>>2]=mt;gt=+f[r+288+((Lt*3|0)+2<<2)>>2]+ +f[t>>2];f[r+152>>2]=gt;At=s[(s[n>>2]|0)+16>>2]|0;f[r+112>>2]=p;f[r+116>>2]=l;f[r+120>>2]=h;f[r+124>>2]=0;Et=+f[r+256+(Lt<<2)>>2];f[r+96>>2]=dt-o*Et;f[r+100>>2]=mt-Et*u;f[r+104>>2]=gt-Et*a;f[r+108>>2]=0;zD[At&15](n,r+112|0,r+96|0,-Et);J=J+1|0}while((J|0)<(st|0));c=r;return}}function PT(e){e=e|0;return}function HT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function BT(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;o=c;c=c+32|0;u=(r[e+28>>0]|0)!=0;i=u?n:t;n=u?t:n;t=s[i+4>>2]|0;u=s[t+16>>2]|0;a=s[e+12>>2]|0;if((a|0)<(u|0)){if((s[e+16>>2]|0)<(u|0)){if((u|0)==0){f=0;h=a}else{s[5004]=(s[5004]|0)+1;f=cM((u<<2|3)+16|0)|0;if((f|0)==0)f=0;else{s[(f+19&-16)+ -4>>2]=f;f=f+19&-16}h=s[e+12>>2]|0}if((h|0)>0){l=0;do{p=f+(l<<2)|0;if((p|0)!=0)s[p>>2]=s[(s[e+20>>2]|0)+(l<<2)>>2];l=l+1|0}while((l|0)!=(h|0))}l=s[e+20>>2]|0;if((l|0)!=0){if((r[e+24>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[e+20>>2]=0}r[e+24>>0]=1;s[e+20>>2]=f;s[e+16>>2]=u;f=e+20|0}else f=e+20|0;do{l=(s[f>>2]|0)+(a<<2)|0;if((l|0)!=0)s[l>>2]=0;a=a+1|0}while((a|0)!=(u|0))}s[e+12>>2]=u;if((u|0)<=0){c=o;return}a=0;do{if((s[t+64>>2]|0)==0){l=s[(s[t+24>>2]|0)+(a*80|0)+64>>2]|0;h=s[i+8>>2]|0;p=s[i+12>>2]|0;s[o>>2]=i;s[o+4>>2]=l;s[o+8>>2]=h;s[o+12>>2]=p;s[o+16>>2]=-1;s[o+20>>2]=a;p=s[e+4>>2]|0;p=yD[s[(s[p>>2]|0)+8>>2]&31](p,o,n,s[e+32>>2]|0)|0;s[(s[e+20>>2]|0)+(a<<2)>>2]=p}else s[(s[e+20>>2]|0)+(a<<2)>>2]=0;a=a+1|0}while((a|0)!=(u|0));c=o;return}function jT(e){e=e|0;var t=0;t=c;FT(e);hM(e);c=t;return}function FT(e){e=e|0;var t=0,n=0,i=0,o=0;t=c;s[e>>2]=18040;n=s[e+12>>2]|0;if((n|0)>0){i=0;do{o=s[(s[e+20>>2]|0)+(i<<2)>>2]|0;if((o|0)!=0){lD[s[s[o>>2]>>2]&511](o);o=s[e+4>>2]|0;hD[s[(s[o>>2]|0)+60>>2]&127](o,s[(s[e+20>>2]|0)+(i<<2)>>2]|0)}i=i+1|0}while((i|0)!=(n|0))}n=s[e+20>>2]|0;if((n|0)==0){r[e+24>>0]=1;s[e+20>>2]=0;s[e+12>>2]=0;o=e+16|0;s[o>>2]=0;c=t;return}if((r[e+24>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+20>>2]=0;r[e+24>>0]=1;s[e+20>>2]=0;s[e+12>>2]=0;o=e+16|0;s[o>>2]=0;c=t;return}function IT(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0;u=c;c=c+320|0;a=(r[e+28>>0]|0)!=0;h=a?n:t;a=a?t:n;l=s[h+4>>2]|0;if((s[l+68>>2]|0)!=(s[e+40>>2]|0)){v=s[e+12>>2]|0;if((v|0)>0){d=0;do{p=s[(s[e+20>>2]|0)+(d<<2)>>2]|0;if((p|0)!=0){lD[s[s[p>>2]>>2]&511](p);y=s[e+4>>2]|0;hD[s[(s[y>>2]|0)+60>>2]&127](y,s[(s[e+20>>2]|0)+(d<<2)>>2]|0)}d=d+1|0}while((d|0)!=(v|0))}BT(e,t,n)}t=s[l+64>>2]|0;p=s[e+4>>2]|0;m=s[e+20>>2]|0;d=s[e+32>>2]|0;s[u+280>>2]=18120;s[u+284>>2]=h;s[u+288>>2]=a;s[u+292>>2]=p;s[u+296>>2]=i;s[u+300>>2]=o;s[u+304>>2]=m;s[u+308>>2]=d;i=u+272|0;r[i>>0]=1;d=u+268|0;s[d>>2]=0;p=u+260|0;s[p>>2]=0;s[u+264>>2]=0;n=s[e+12>>2]|0;if((n|0)>0){v=0;while(1){m=s[m+(v<<2)>>2]|0;if((m|0)!=0){hD[s[(s[m>>2]|0)+16>>2]&127](m,u+256|0);n=s[p>>2]|0;if((n|0)>0){g=n;n=0;do{m=s[(s[d>>2]|0)+(n<<2)>>2]|0;if((s[m+748>>2]|0)!=0){s[o+4>>2]=m;y=s[m+740>>2]|0;g=s[(s[o+8>>2]|0)+8>>2]|0;if((y|0)==(g|0))eM(m,y+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);else eM(m,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,g+4|0);s[o+4>>2]=0;g=s[p>>2]|0}n=n+1|0}while((n|0)<(g|0));n=g}if((n|0)<0){if((s[u+264>>2]|0)<0){g=s[d>>2]|0;if((n|0)>0){m=0;do{if((m|0)!=0)s[0+(m<<2)>>2]=s[g+(m<<2)>>2];m=m+1|0}while((m|0)!=(n|0))}if((g|0)!=0){if((r[i>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[g+ -4>>2]|0)}s[d>>2]=0}r[i>>0]=1;s[d>>2]=0;s[u+264>>2]=0}do{m=(s[d>>2]|0)+(n<<2)|0;if((m|0)!=0)s[m>>2]=0;n=n+1|0}while((n|0)!=0)}s[p>>2]=0;n=s[e+12>>2]|0}v=v+1|0;if((v|0)>=(n|0))break;m=s[e+20>>2]|0}o=s[d>>2]|0;if((o|0)!=0){if((r[i>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[d>>2]=0}}r[i>>0]=1;s[d>>2]=0;s[p>>2]=0;s[u+264>>2]=0;if((t|0)==0){o=s[e+12>>2]|0;if((o|0)>0){t=0;do{qT(u+280|0,s[(s[l+24>>2]|0)+(t*80|0)+64>>2]|0,t);t=t+1|0}while((t|0)<(o|0))}else{c=u;return}}else{y=s[h+12>>2]|0;D=+f[y>>2];_=+f[y+16>>2];M=+f[y+32>>2];O=+f[y+4>>2];A=+f[y+20>>2];L=+f[y+36>>2];T=+f[y+8>>2];S=+f[y+24>>2];w=+f[y+40>>2];k=-+f[y+48>>2];C=-+f[y+52>>2];N=-+f[y+56>>2];y=s[a+12>>2]|0;U=+f[y>>2];R=+f[y+16>>2];q=+f[y+32>>2];I=+f[y+4>>2];F=+f[y+20>>2];j=+f[y+36>>2];B=+f[y+8>>2];H=+f[y+24>>2];P=+f[y+40>>2];x=+f[y+48>>2];E=+f[y+52>>2];b=+f[y+56>>2];f[u+160>>2]=D*U+_*R+M*q;f[u+164>>2]=D*I+_*F+M*j;f[u+168>>2]=D*B+_*H+M*P;f[u+172>>2]=0;f[u+176>>2]=O*U+A*R+L*q;f[u+180>>2]=O*I+A*F+L*j;f[u+184>>2]=O*B+A*H+L*P;f[u+188>>2]=0;f[u+192>>2]=T*U+S*R+w*q;f[u+196>>2]=T*I+S*F+w*j;f[u+200>>2]=T*B+S*H+w*P;f[u+204>>2]=0;f[u+208>>2]=D*k+_*C+M*N+(D*x+_*E+M*b);f[u+212>>2]=O*k+A*C+L*N+(O*x+A*E+L*b);f[u+216>>2]=T*k+S*C+w*N+(T*x+S*E+w*b);f[u+220>>2]=0;y=s[a+4>>2]|0;JD[s[(s[y>>2]|0)+8>>2]&127](y,u+160|0,u+240|0,u+224|0);s[u+128>>2]=s[u+240>>2];s[u+132>>2]=s[u+244>>2];s[u+136>>2]=s[u+248>>2];s[u+140>>2]=s[u+252>>2];s[u+144>>2]=s[u+224>>2];s[u+148>>2]=s[u+228>>2];s[u+152>>2]=s[u+232>>2];s[u+156>>2]=s[u+236>>2];_L(s[t>>2]|0,u+128|0,u+280|0)}o=s[e+12>>2]|0;if((o|0)<=0){c=u;return}t=0;do{do if((s[(s[e+20>>2]|0)+(t<<2)>>2]|0)!=0){m=s[l+24>>2]|0;y=s[m+(t*80|0)+64>>2]|0;g=s[h+12>>2]|0;S=+f[g>>2];x=+f[g+4>>2];T=+f[g+8>>2];N=+f[g+16>>2];C=+f[g+20>>2];k=+f[g+24>>2];P=+f[g+32>>2];B=+f[g+36>>2];F=+f[g+40>>2];L=+f[m+(t*80|0)>>2];A=+f[m+(t*80|0)+16>>2];O=+f[m+(t*80|0)+32>>2];M=+f[m+(t*80|0)+4>>2];_=+f[m+(t*80|0)+20>>2];D=+f[m+(t*80|0)+36>>2];H=+f[m+(t*80|0)+8>>2];j=+f[m+(t*80|0)+24>>2];I=+f[m+(t*80|0)+40>>2];w=+f[m+(t*80|0)+48>>2];E=+f[m+(t*80|0)+52>>2];U=+f[m+(t*80|0)+56>>2];q=+f[g+48>>2]+(S*w+x*E+T*U);R=+f[g+52>>2]+(N*w+C*E+k*U);U=+f[g+56>>2]+(P*w+B*E+F*U);f[u+64>>2]=S*L+x*A+T*O;f[u+68>>2]=S*M+x*_+T*D;f[u+72>>2]=S*H+x*j+T*I;f[u+76>>2]=0;f[u+80>>2]=N*L+C*A+k*O;f[u+84>>2]=N*M+C*_+k*D;f[u+88>>2]=N*H+C*j+k*I;f[u+92>>2]=0;f[u+96>>2]=P*L+B*A+F*O;f[u+100>>2]=P*M+B*_+F*D;f[u+104>>2]=P*H+B*j+F*I;f[u+108>>2]=0;f[u+112>>2]=q;f[u+116>>2]=R;f[u+120>>2]=U;f[u+124>>2]=0;JD[s[(s[y>>2]|0)+8>>2]&127](y,u+64|0,u+48|0,u+32|0);y=s[a+4>>2]|0;JD[s[(s[y>>2]|0)+8>>2]&127](y,s[a+12>>2]|0,u+16|0,u);if(!(+f[u+48>>2]>+f[u>>2])?!(+f[u+32>>2]<+f[u+16>>2]):0)i=1;else i=0;if(!(!(+f[u+56>>2]>+f[u+8>>2])?!(+f[u+40>>2]<+f[u+24>>2]):0))i=0;if(!(+f[u+52>>2]>+f[u+4>>2])?!(+f[u+36>>2]<+f[u+20>>2]|i^1):0)break;y=s[(s[e+20>>2]|0)+(t<<2)>>2]|0;lD[s[s[y>>2]>>2]&511](y);y=s[e+4>>2]|0;hD[s[(s[y>>2]|0)+60>>2]&127](y,s[(s[e+20>>2]|0)+(t<<2)>>2]|0);s[(s[e+20>>2]|0)+(t<<2)>>2]=0}while(0);t=t+1|0}while((t|0)<(o|0));c=u;return}function qT(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0;r=c;c=c+160|0;i=s[e+4>>2]|0;o=s[i+12>>2]|0;A=+f[o>>2];L=+f[o+4>>2];k=+f[o+8>>2];C=+f[o+16>>2];N=+f[o+20>>2];T=+f[o+24>>2];g=+f[o+32>>2];v=+f[o+36>>2];p=+f[o+40>>2];i=s[(s[i+4>>2]|0)+24>>2]|0;x=+f[i+(n*80|0)>>2];S=+f[i+(n*80|0)+16>>2];E=+f[i+(n*80|0)+32>>2];w=+f[i+(n*80|0)+4>>2];b=+f[i+(n*80|0)+20>>2];y=+f[i+(n*80|0)+36>>2];m=+f[i+(n*80|0)+8>>2];d=+f[i+(n*80|0)+24>>2];h=+f[i+(n*80|0)+40>>2];M=+f[i+(n*80|0)+48>>2];O=+f[i+(n*80|0)+52>>2];u=+f[i+(n*80|0)+56>>2];l=+f[o+48>>2]+(A*M+L*O+k*u);a=+f[o+52>>2]+(C*M+N*O+T*u);u=+f[o+56>>2]+(g*M+v*O+p*u);f[r+88>>2]=A*x+L*S+k*E;f[r+92>>2]=A*w+L*b+k*y;f[r+96>>2]=A*m+L*d+k*h;f[r+100>>2]=0;f[r+104>>2]=C*x+N*S+T*E;f[r+108>>2]=C*w+N*b+T*y;f[r+112>>2]=C*m+N*d+T*h;f[r+116>>2]=0;f[r+120>>2]=g*x+v*S+p*E;f[r+124>>2]=g*w+v*b+p*y;f[r+128>>2]=g*m+v*d+p*h;f[r+132>>2]=0;f[r+136>>2]=l;f[r+140>>2]=a;f[r+144>>2]=u;f[r+148>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,r+88|0,r+72|0,r+56|0);o=s[e+8>>2]|0;i=s[o+4>>2]|0;JD[s[(s[i>>2]|0)+8>>2]&127](i,s[o+12>>2]|0,r+40|0,r+24|0);if(!(+f[r+72>>2]>+f[r+24>>2])?!(+f[r+56>>2]<+f[r+40>>2]):0)i=1;else i=0;if(!(!(+f[r+80>>2]>+f[r+32>>2])?!(+f[r+64>>2]<+f[r+48>>2]):0))i=0;if(+f[r+76>>2]>+f[r+28>>2]){c=r;return}if(+f[r+60>>2]<+f[r+44>>2]|i^1){c=r;return}i=s[e+4>>2]|0;o=s[i+8>>2]|0;s[r>>2]=i;s[r+4>>2]=t;s[r+8>>2]=o;s[r+12>>2]=r+88;s[r+16>>2]=-1;s[r+20>>2]=n;if((s[(s[e+24>>2]|0)+(n<<2)>>2]|0)==0){t=s[e+12>>2]|0;t=yD[s[(s[t>>2]|0)+8>>2]&31](t,r,s[e+8>>2]|0,s[e+28>>2]|0)|0;s[(s[e+24>>2]|0)+(n<<2)>>2]=t;t=s[e+4>>2]|0}else t=i;o=s[e+20>>2]|0;i=s[o+8>>2]|0;if((s[i+8>>2]|0)==(s[t+8>>2]|0)){s[o+8>>2]=r;o=s[e+20>>2]|0;WD[s[(s[o>>2]|0)+8>>2]&127](o,-1,n)}else{i=s[o+12>>2]|0;s[o+12>>2]=r;o=s[e+20>>2]|0;WD[s[(s[o>>2]|0)+12>>2]&127](o,-1,n)}n=s[(s[e+24>>2]|0)+(n<<2)>>2]|0;aD[s[(s[n>>2]|0)+8>>2]&31](n,r,s[e+8>>2]|0,s[e+16>>2]|0,s[e+20>>2]|0);n=s[e+20>>2]|0;if((s[(s[n+8>>2]|0)+8>>2]|0)==(s[(s[e+4>>2]|0)+8>>2]|0)){s[n+8>>2]=i;c=r;return}else{s[n+12>>2]=i;c=r;return}}function RT(e){e=e|0;return}function UT(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0;u=c;b=(r[e+28>>0]|0)!=0;a=b?n:t;t=b?t:n;b=s[e+12>>2]|0;if((b|0)<=0){O=1;c=u;return+O}p=(s[a+192>>2]|0)+24|0;d=+f[a+4>>2];v=+f[a+8>>2];m=+f[a+12>>2];C=+f[a+16>>2];g=+f[a+20>>2];y=+f[a+24>>2];l=+f[a+28>>2];k=+f[a+32>>2];w=+f[a+36>>2];E=+f[a+40>>2];S=+f[a+44>>2];L=+f[a+48>>2];x=+f[a+52>>2];T=+f[a+56>>2];N=+f[a+60>>2];A=+f[a+64>>2];n=s[a+260>>2]|0;O=1;h=0;do{_=s[p>>2]|0;z=+f[_+(h*80|0)>>2];U=+f[_+(h*80|0)+16>>2];R=+f[_+(h*80|0)+32>>2];q=+f[_+(h*80|0)+4>>2];I=+f[_+(h*80|0)+20>>2];F=+f[_+(h*80|0)+36>>2];j=+f[_+(h*80|0)+8>>2];B=+f[_+(h*80|0)+24>>2];H=+f[_+(h*80|0)+40>>2];P=+f[_+(h*80|0)+48>>2];D=+f[_+(h*80|0)+52>>2];M=+f[_+(h*80|0)+56>>2];s[a+260>>2]=n+1;f[a+4>>2]=d*z+v*U+m*R;f[a+8>>2]=d*q+v*I+m*F;f[a+12>>2]=d*j+v*B+m*H;f[a+16>>2]=0;f[a+20>>2]=g*z+y*U+l*R;f[a+24>>2]=g*q+y*I+l*F;f[a+28>>2]=g*j+y*B+l*H;f[a+32>>2]=0;f[a+36>>2]=w*z+E*U+S*R;f[a+40>>2]=w*q+E*I+S*F;f[a+44>>2]=w*j+E*B+S*H;f[a+48>>2]=0;f[a+52>>2]=x+(d*P+v*D+m*M);f[a+56>>2]=T+(g*P+y*D+l*M);f[a+60>>2]=N+(w*P+E*D+S*M);f[a+64>>2]=0;_=s[(s[e+20>>2]|0)+(h<<2)>>2]|0;M=+SD[s[(s[_>>2]|0)+12>>2]&15](_,a,t,i,o);O=M<O?M:O;n=(s[a+260>>2]|0)+1|0;s[a+260>>2]=n;f[a+4>>2]=d;f[a+8>>2]=v;f[a+12>>2]=m;f[a+16>>2]=C;f[a+20>>2]=g;f[a+24>>2]=y;f[a+28>>2]=l;f[a+32>>2]=k;f[a+36>>2]=w;f[a+40>>2]=E;f[a+44>>2]=S;f[a+48>>2]=L;f[a+52>>2]=x;f[a+56>>2]=T;f[a+60>>2]=N;f[a+64>>2]=A;h=h+1|0}while((h|0)!=(b|0));c=u;return+O}function zT(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0;n=c;i=s[e+12>>2]|0;if((i|0)<=0){c=n;return}r=0;do{o=s[(s[e+20>>2]|0)+(r<<2)>>2]|0;if((o|0)!=0){hD[s[(s[o>>2]|0)+16>>2]&127](o,t);i=s[e+12>>2]|0}r=r+1|0}while((r|0)<(i|0));c=n;return}function WT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function XT(e,t){e=e|0;t=t|0;var n=0;n=c;t=s[t+36>>2]|0;qT(e,s[(s[(s[(s[e+4>>2]|0)+4>>2]|0)+24>>2]|0)+(t*80|0)+64>>2]|0,t);c=n;return}function VT(e){e=e|0;var t=0;t=c;$T(e);hM(e);c=t;return}function $T(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0;t=c;s[e>>2]=18208;i=s[e+8>>2]|0;n=s[i+8>>2]|0;if((n|0)>0){o=0;do{u=s[(s[i+16>>2]|0)+(o*12|0)+8>>2]|0;if((u|0)!=0){lD[s[s[u>>2]>>2]&511](u);a=s[e+4>>2]|0;hD[s[(s[a>>2]|0)+60>>2]&127](a,u)}o=o+1|0}while((o|0)!=(n|0));i=s[e+8>>2]|0}ZN(i);n=s[e+8>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+8>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+24>>2]|0;if((n|0)==0){r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;a=e+20|0;s[a>>2]=0;c=t;return}if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+24>>2]=0;r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;a=e+20|0;s[a>>2]=0;c=t;return}function JT(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0;n=c;e=s[e+8>>2]|0;i=s[e+8>>2]|0;if((i|0)<=0){c=n;return}r=0;do{o=s[(s[e+16>>2]|0)+(r*12|0)+8>>2]|0;if((o|0)!=0){hD[s[(s[o>>2]|0)+16>>2]&127](o,t);i=s[e+8>>2]|0}r=r+1|0}while((r|0)<(i|0));c=n;return}function KT(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,X=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0,ut=0,at=0,ft=0,lt=0,ct=0,ht=0,pt=0,dt=0;u=c;c=c+192|0;a=s[t+4>>2]|0;h=s[n+4>>2]|0;if((s[a+68>>2]|0)==(s[e+40>>2]|0)?(s[h+68>>2]|0)==(s[e+44>>2]|0):0)p=e+8|0;else{p=s[e+8>>2]|0;Q=s[p+8>>2]|0;if((Q|0)>0){K=0;do{J=s[(s[p+16>>2]|0)+(K*12|0)+8>>2]|0;if((J|0)!=0){lD[s[s[J>>2]>>2]&511](J);nt=s[e+4>>2]|0;hD[s[(s[nt>>2]|0)+60>>2]&127](nt,J)}K=K+1|0}while((K|0)!=(Q|0));p=s[e+8>>2]|0}ZN(p);p=e+8|0}J=u+180|0;r[J>>0]=1;K=u+176|0;s[K>>2]=0;Q=u+168|0;s[Q>>2]=0;s[u+172>>2]=0;G=s[p>>2]|0;Z=s[G+8>>2]|0;if((Z|0)>0){Y=0;do{et=s[(s[G+16>>2]|0)+(Y*12|0)+8>>2]|0;if((et|0)!=0){hD[s[(s[et>>2]|0)+16>>2]&127](et,u+164|0);tt=s[Q>>2]|0;if((tt|0)>0){Z=0;do{et=s[(s[K>>2]|0)+(Z<<2)>>2]|0;if((s[et+748>>2]|0)!=0){s[o+4>>2]=et;tt=s[et+740>>2]|0;nt=s[(s[o+8>>2]|0)+8>>2]|0;if((tt|0)==(nt|0))eM(et,tt+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);else eM(et,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,nt+4|0);s[o+4>>2]=0;tt=s[Q>>2]|0}Z=Z+1|0}while((Z|0)<(tt|0))}if((tt|0)<0){if((s[u+172>>2]|0)<0){Z=s[K>>2]|0;if((tt|0)>0){et=0;do{if((et|0)!=0)s[0+(et<<2)>>2]=s[Z+(et<<2)>>2];et=et+1|0}while((et|0)!=(tt|0))}if((Z|0)!=0){if((r[J>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[Z+ -4>>2]|0)}s[K>>2]=0}r[J>>0]=1;s[K>>2]=0;s[u+172>>2]=0}do{Z=(s[K>>2]|0)+(tt<<2)|0;if((Z|0)!=0)s[Z>>2]=0;tt=tt+1|0}while((tt|0)!=0)}s[Q>>2]=0;Z=s[G+8>>2]|0}Y=Y+1|0}while((Y|0)<(Z|0));G=s[K>>2]|0;if((G|0)!=0){if((r[J>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[G+ -4>>2]|0)}s[K>>2]=0}}r[J>>0]=1;s[K>>2]=0;s[Q>>2]=0;s[u+172>>2]=0;tt=s[a+64>>2]|0;nt=s[h+64>>2]|0;Y=s[e+4>>2]|0;Z=s[p>>2]|0;et=s[e+32>>2]|0;s[u+128>>2]=18296;s[u+132>>2]=0;s[u+136>>2]=t;s[u+140>>2]=n;s[u+144>>2]=Y;s[u+148>>2]=i;s[u+152>>2]=o;s[u+156>>2]=Z;s[u+160>>2]=et;i=s[t+12>>2]|0;N=+f[i>>2];k=+f[i+16>>2];A=+f[i+32>>2];b=+f[i+4>>2];y=+f[i+20>>2];g=+f[i+36>>2];m=+f[i+8>>2];v=+f[i+24>>2];d=+f[i+40>>2];C=-+f[i+48>>2];L=-+f[i+52>>2];O=-+f[i+56>>2];i=s[n+12>>2]|0;P=+f[i>>2];H=+f[i+16>>2];B=+f[i+32>>2];j=+f[i+4>>2];T=+f[i+20>>2];x=+f[i+36>>2];S=+f[i+8>>2];E=+f[i+24>>2];w=+f[i+40>>2];M=+f[i+48>>2];_=+f[i+52>>2];D=+f[i+56>>2];i=s[tt>>2]|0;o=s[nt>>2]|0;if(!((i|0)==0|(o|0)==0)){s[5004]=(s[5004]|0)+1;Y=cM(1043)|0;s[(Y+19&-16)+ -4>>2]=Y;s[(Y+19&-16)>>2]=i;s[(Y+19&-16)+4>>2]=o;$=+W(+(N*P+k*H+A*B));V=+W(+(N*j+k*T+A*x));X=+W(+(N*S+k*E+A*w));F=+W(+(b*P+y*H+g*B));z=+W(+(b*j+y*T+g*x));U=+W(+(b*S+y*E+g*w));R=+W(+(m*P+v*H+d*B));q=+W(+(m*j+v*T+d*x));I=+W(+(m*S+v*E+d*w));Y=Y+19&-16;Q=128;Z=128;i=1;G=124;do{o=i+ -1|0;K=s[Y+(o<<3)>>2]|0;J=s[Y+(o<<3)+4>>2]|0;pt=+f[J+16>>2];ht=+f[J>>2];ct=+f[J+20>>2];lt=+f[J+4>>2];ft=+f[J+24>>2];rt=+f[J+8>>2];at=N*C+k*L+A*O+(N*M+k*_+A*D)+((N*P+k*H+A*B)*(pt+ht)*.5+(N*j+k*T+A*x)*(ct+lt)*.5+(N*S+k*E+A*w)*(ft+rt)*.5);ot=b*C+y*L+g*O+(b*M+y*_+g*D)+((b*P+y*H+g*B)*(pt+ht)*.5+(b*j+y*T+g*x)*(ct+lt)*.5+(b*S+y*E+g*w)*(ft+rt)*.5);it=m*C+v*L+d*O+(m*M+v*_+d*D)+((m*P+v*H+d*B)*(pt+ht)*.5+(m*j+v*T+d*x)*(ct+lt)*.5+(m*S+v*E+d*w)*(ft+rt)*.5);ut=((pt-ht)*.5+0)*$+((ct-lt)*.5+0)*V+((ft-rt)*.5+0)*X;st=((pt-ht)*.5+0)*F+((ct-lt)*.5+0)*z+((ft-rt)*.5+0)*U;rt=((pt-ht)*.5+0)*R+((ct-lt)*.5+0)*q+((ft-rt)*.5+0)*I;do if(((((+f[K>>2]<=ut+at?+f[K+16>>2]>=at-ut:0)?+f[K+4>>2]<=ot+st:0)?+f[K+20>>2]>=ot-st:0)?+f[K+8>>2]<=it+rt:0)?+f[K+24>>2]>=it-rt:0){if((o|0)>(G|0)){G=Q<<1;if((Q|0)<(G|0)&(Z|0)<(G|0)){if((Q|0)!=0){s[5004]=(s[5004]|0)+1;Z=cM((Q<<4|3)+16|0)|0;if((Z|0)==0)Z=0;else{s[(Z+19&-16)+ -4>>2]=Z;Z=Z+19&-16}if((Q|0)>0){et=0;do{tt=Z+(et<<3)|0;if((tt|0)!=0){dt=Y+(et<<3)|0;nt=s[dt+4>>2]|0;s[tt>>2]=s[dt>>2];s[tt+4>>2]=nt}et=et+1|0}while((et|0)!=(Q|0))}}else Z=0;if((Y|0)==0){Y=Z;Z=G}else{s[5006]=(s[5006]|0)+1;hM(s[Y+ -4>>2]|0);Y=Z;Z=G}}Q=G;G=G+ -4|0}et=(s[J+40>>2]|0)!=0;if((s[K+40>>2]|0)==0)if(et){dt=s[J+36>>2]|0;nt=Y+(o<<3)|0;s[nt>>2]=K;s[nt+4>>2]=dt;nt=s[J+40>>2]|0;dt=Y+(i<<3)|0;s[dt>>2]=K;s[dt+4>>2]=nt;i=i+1|0;break}else{WD[s[(s[u+128>>2]|0)+8>>2]&127](u+128|0,K,J);i=o;break}else{o=Y+(o<<3)|0;tt=s[K+36>>2]|0;if(et){nt=s[J+36>>2]|0;s[o>>2]=tt;s[o+4>>2]=nt;nt=s[J+36>>2]|0;dt=Y+(i<<3)|0;s[dt>>2]=s[K+40>>2];s[dt+4>>2]=nt;dt=s[J+40>>2]|0;nt=Y+(i+1<<3)|0;s[nt>>2]=s[K+36>>2];s[nt+4>>2]=dt;nt=s[J+40>>2]|0;dt=Y+(i+2<<3)|0;s[dt>>2]=s[K+40>>2];s[dt+4>>2]=nt;i=i+3|0;break}else{s[o>>2]=tt;s[o+4>>2]=J;dt=Y+(i<<3)|0;s[dt>>2]=s[K+40>>2];s[dt+4>>2]=J;i=i+1|0;break}}}else i=o;while(0)}while((i|0)!=0);if((Y|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[Y+ -4>>2]|0)}}i=s[p>>2]|0;if((s[i+8>>2]|0)>0){o=0;do{K=s[i+16>>2]|0;J=s[K+(o*12|0)+8>>2]|0;do if((J|0)!=0){dt=s[K+(o*12|0)>>2]|0;nt=s[a+24>>2]|0;tt=s[nt+(dt*80|0)+64>>2]|0;et=s[t+12>>2]|0;pt=+f[et>>2];B=+f[et+4>>2];H=+f[et+8>>2];lt=+f[et+16>>2];at=+f[et+20>>2];ot=+f[et+24>>2];ft=+f[et+32>>2];st=+f[et+36>>2];R=+f[et+40>>2];it=+f[nt+(dt*80|0)>>2];rt=+f[nt+(dt*80|0)+16>>2];$=+f[nt+(dt*80|0)+32>>2];V=+f[nt+(dt*80|0)+4>>2];X=+f[nt+(dt*80|0)+20>>2];z=+f[nt+(dt*80|0)+36>>2];ut=+f[nt+(dt*80|0)+8>>2];U=+f[nt+(dt*80|0)+24>>2];q=+f[nt+(dt*80|0)+40>>2];ht=+f[nt+(dt*80|0)+48>>2];ct=+f[nt+(dt*80|0)+52>>2];j=+f[nt+(dt*80|0)+56>>2];I=+f[et+48>>2]+(pt*ht+B*ct+H*j);F=+f[et+52>>2]+(lt*ht+at*ct+ot*j);j=+f[et+56>>2]+(ft*ht+st*ct+R*j);f[u>>2]=pt*it+B*rt+H*$;f[u+4>>2]=pt*V+B*X+H*z;f[u+8>>2]=pt*ut+B*U+H*q;f[u+12>>2]=0;f[u+16>>2]=lt*it+at*rt+ot*$;f[u+20>>2]=lt*V+at*X+ot*z;f[u+24>>2]=lt*ut+at*U+ot*q;f[u+28>>2]=0;f[u+32>>2]=ft*it+st*rt+R*$;f[u+36>>2]=ft*V+st*X+R*z;f[u+40>>2]=ft*ut+st*U+R*q;f[u+44>>2]=0;f[u+48>>2]=I;f[u+52>>2]=F;f[u+56>>2]=j;f[u+60>>2]=0;JD[s[(s[tt>>2]|0)+8>>2]&127](tt,u,u+112|0,u+96|0);tt=s[(s[i+16>>2]|0)+(o*12|0)+4>>2]|0;et=s[h+24>>2]|0;dt=s[et+(tt*80|0)+64>>2]|0;nt=s[n+12>>2]|0;j=+f[nt>>2];F=+f[nt+4>>2];I=+f[nt+8>>2];q=+f[nt+16>>2];R=+f[nt+20>>2];U=+f[nt+24>>2];st=+f[nt+32>>2];ut=+f[nt+36>>2];ft=+f[nt+40>>2];z=+f[et+(tt*80|0)>>2];X=+f[et+(tt*80|0)+16>>2];V=+f[et+(tt*80|0)+32>>2];$=+f[et+(tt*80|0)+4>>2];rt=+f[et+(tt*80|0)+20>>2];it=+f[et+(tt*80|0)+36>>2];ot=+f[et+(tt*80|0)+8>>2];at=+f[et+(tt*80|0)+24>>2];lt=+f[et+(tt*80|0)+40>>2];H=+f[et+(tt*80|0)+48>>2];B=+f[et+(tt*80|0)+52>>2];pt=+f[et+(tt*80|0)+56>>2];ct=+f[nt+48>>2]+(j*H+F*B+I*pt);ht=+f[nt+52>>2]+(q*H+R*B+U*pt);pt=+f[nt+56>>2]+(st*H+ut*B+ft*pt);f[u>>2]=j*z+F*X+I*V;f[u+4>>2]=j*$+F*rt+I*it;f[u+8>>2]=j*ot+F*at+I*lt;f[u+12>>2]=0;f[u+16>>2]=q*z+R*X+U*V;f[u+20>>2]=q*$+R*rt+U*it;f[u+24>>2]=q*ot+R*at+U*lt;f[u+28>>2]=0;f[u+32>>2]=st*z+ut*X+ft*V;f[u+36>>2]=st*$+ut*rt+ft*it;f[u+40>>2]=st*ot+ut*at+ft*lt;f[u+44>>2]=0;f[u+48>>2]=ct;f[u+52>>2]=ht;f[u+56>>2]=pt;f[u+60>>2]=0;JD[s[(s[dt>>2]|0)+8>>2]&127](dt,u,u+80|0,u+64|0);if(!(+f[u+112>>2]>+f[u+64>>2])?!(+f[u+96>>2]<+f[u+80>>2]):0)K=1;else K=0;if(!(!(+f[u+120>>2]>+f[u+72>>2])?!(+f[u+104>>2]<+f[u+88>>2]):0))K=0;if(!(+f[u+116>>2]>+f[u+68>>2])?!(+f[u+100>>2]<+f[u+84>>2]|K^1):0)break;lD[s[s[J>>2]>>2]&511](J);K=s[e+4>>2]|0;hD[s[(s[K>>2]|0)+60>>2]&127](K,J);K=s[i+16>>2]|0;J=s[K+(o*12|0)>>2]|0;K=s[K+(o*12|0)+4>>2]|0;Z=s[e+16>>2]|0;if((Z|0)==(s[e+20>>2]|0)?(l=(Z|0)==0?1:Z<<1,(Z|0)<(l|0)):0){if((l|0)==0)Q=0;else{s[5004]=(s[5004]|0)+1;Q=cM((l*12|3)+16|0)|0;if((Q|0)==0)Q=0;else{s[(Q+19&-16)+ -4>>2]=Q;Q=Q+19&-16}Z=s[e+16>>2]|0}if((Z|0)>0){Y=0;do{G=Q+(Y*12|0)|0;if((G|0)!=0){dt=(s[e+24>>2]|0)+(Y*12|0)|0;s[G+0>>2]=s[dt+0>>2];s[G+4>>2]=s[dt+4>>2];s[G+8>>2]=s[dt+8>>2]}Y=Y+1|0}while((Y|0)!=(Z|0))}G=s[e+24>>2]|0;if((G|0)!=0){if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[G+ -4>>2]|0)}s[e+24>>2]=0}r[e+28>>0]=1;s[e+24>>2]=Q;s[e+20>>2]=l;Z=s[e+16>>2]|0}G=s[e+24>>2]|0;Q=G+(Z*12|0)|0;if((Q|0)!=0){s[Q>>2]=J;s[G+(Z*12|0)+4>>2]=K;s[G+(Z*12|0)+8>>2]=0;Z=s[e+16>>2]|0}s[e+16>>2]=Z+1}while(0);o=o+1|0}while((o|0)<(s[i+8>>2]|0));t=e+24|0;n=e+16|0}else{t=e+24|0;n=e+16|0}if((s[n>>2]|0)>0){a=0;do{nt=s[p>>2]|0;dt=s[t>>2]|0;xD[s[(s[nt>>2]|0)+8>>2]&31](nt,s[dt+(a*12|0)>>2]|0,s[dt+(a*12|0)+4>>2]|0)|0;a=a+1|0}while((a|0)<(s[n>>2]|0))}a=s[t>>2]|0;if((a|0)==0){r[e+28>>0]=1;s[t>>2]=0;s[n>>2]=0;dt=e+20|0;s[dt>>2]=0;c=u;return}if((r[e+28>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[t>>2]=0;r[e+28>>0]=1;s[t>>2]=0;s[n>>2]=0;dt=e+20|0;s[dt>>2]=0;c=u;return}function QT(e){e=e|0;return}function GT(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 0}function YT(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function ZT(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0;i=c;c=c+240|0;s[e+4>>2]=(s[e+4>>2]|0)+1;t=s[t+36>>2]|0;n=s[n+36>>2]|0;l=s[e+8>>2]|0;B=s[(s[l+4>>2]|0)+24>>2]|0;u=s[B+(t*80|0)+64>>2]|0;H=(s[(s[e+12>>2]|0)+4>>2]|0)+24|0;a=s[(s[H>>2]|0)+(n*80|0)+64>>2]|0;l=s[l+12>>2]|0;h=+f[l>>2];D=+f[l+4>>2];P=+f[l+8>>2];v=+f[l+16>>2];g=+f[l+20>>2];b=+f[l+24>>2];m=+f[l+32>>2];w=+f[l+36>>2];L=+f[l+40>>2];E=+f[B+(t*80|0)>>2];S=+f[B+(t*80|0)+16>>2];x=+f[B+(t*80|0)+32>>2];T=+f[B+(t*80|0)+4>>2];N=+f[B+(t*80|0)+20>>2];C=+f[B+(t*80|0)+36>>2];y=+f[B+(t*80|0)+8>>2];k=+f[B+(t*80|0)+24>>2];A=+f[B+(t*80|0)+40>>2];p=+f[B+(t*80|0)+48>>2];d=+f[B+(t*80|0)+52>>2];_=+f[B+(t*80|0)+56>>2];O=+f[l+48>>2]+(h*p+D*d+P*_);M=+f[l+52>>2]+(v*p+g*d+b*_);_=+f[l+56>>2]+(m*p+w*d+L*_);f[i+176>>2]=h*E+D*S+P*x;f[i+180>>2]=h*T+D*N+P*C;f[i+184>>2]=h*y+D*k+P*A;f[i+188>>2]=0;f[i+192>>2]=v*E+g*S+b*x;f[i+196>>2]=v*T+g*N+b*C;f[i+200>>2]=v*y+g*k+b*A;f[i+204>>2]=0;f[i+208>>2]=m*E+w*S+L*x;f[i+212>>2]=m*T+w*N+L*C;f[i+216>>2]=m*y+w*k+L*A;f[i+220>>2]=0;f[i+224>>2]=O;f[i+228>>2]=M;f[i+232>>2]=_;f[i+236>>2]=0;l=s[(s[e+12>>2]|0)+12>>2]|0;_=+f[l>>2];M=+f[l+4>>2];O=+f[l+8>>2];A=+f[l+16>>2];L=+f[l+20>>2];k=+f[l+24>>2];w=+f[l+32>>2];y=+f[l+36>>2];m=+f[l+40>>2];H=s[H>>2]|0;C=+f[H+(n*80|0)>>2];N=+f[H+(n*80|0)+16>>2];T=+f[H+(n*80|0)+32>>2];x=+f[H+(n*80|0)+4>>2];S=+f[H+(n*80|0)+20>>2];E=+f[H+(n*80|0)+36>>2];b=+f[H+(n*80|0)+8>>2];g=+f[H+(n*80|0)+24>>2];v=+f[H+(n*80|0)+40>>2];P=+f[H+(n*80|0)+48>>2];D=+f[H+(n*80|0)+52>>2];h=+f[H+(n*80|0)+56>>2];d=+f[l+48>>2]+(_*P+M*D+O*h);p=+f[l+52>>2]+(A*P+L*D+k*h);h=+f[l+56>>2]+(w*P+y*D+m*h);f[i+112>>2]=_*C+M*N+O*T;f[i+116>>2]=_*x+M*S+O*E;f[i+120>>2]=_*b+M*g+O*v;f[i+124>>2]=0;f[i+128>>2]=A*C+L*N+k*T;f[i+132>>2]=A*x+L*S+k*E;f[i+136>>2]=A*b+L*g+k*v;f[i+140>>2]=0;f[i+144>>2]=w*C+y*N+m*T;f[i+148>>2]=w*x+y*S+m*E;f[i+152>>2]=w*b+y*g+m*v;f[i+156>>2]=0;f[i+160>>2]=d;f[i+164>>2]=p;f[i+168>>2]=h;f[i+172>>2]=0;JD[s[(s[u>>2]|0)+8>>2]&127](u,i+176|0,i+96|0,i+80|0);JD[s[(s[a>>2]|0)+8>>2]&127](a,i+112|0,i+64|0,i+48|0);if(!(+f[i+96>>2]>+f[i+48>>2])?!(+f[i+80>>2]<+f[i+64>>2]):0)l=1;else l=0;if(!(!(+f[i+104>>2]>+f[i+56>>2])?!(+f[i+88>>2]<+f[i+72>>2]):0))l=0;if(+f[i+100>>2]>+f[i+52>>2]){c=i;return}if(+f[i+84>>2]<+f[i+68>>2]|l^1){c=i;return}H=s[e+8>>2]|0;B=s[H+8>>2]|0;s[i+24>>2]=H;s[i+28>>2]=u;s[i+32>>2]=B;s[i+36>>2]=i+176;s[i+40>>2]=-1;s[i+44>>2]=t;B=s[e+12>>2]|0;u=s[B+8>>2]|0;s[i>>2]=B;s[i+4>>2]=a;s[i+8>>2]=u;s[i+12>>2]=i+112;s[i+16>>2]=-1;s[i+20>>2]=n;u=s[e+28>>2]|0;s[4896]=(s[4896]|0)+1;a=((n<<16|t)+~((n<<16|t)<<15)>>10^(n<<16|t)+~((n<<16|t)<<15))*9|0;a=(s[u+12>>2]|0)+ -1&((a>>6^a)+~((a>>6^a)<<11)>>16^(a>>6^a)+~((a>>6^a)<<11));e:do if((a|0)<(s[u+32>>2]|0)?(o=s[(s[u+40>>2]|0)+(a<<2)>>2]|0,!((o|0)==-1)):0){a=s[u+16>>2]|0;while(1){if((s[a+(o*12|0)>>2]|0)==(t|0)?(s[a+(o*12|0)+4>>2]|0)==(n|0):0)break;o=s[(s[u+60>>2]|0)+(o<<2)>>2]|0;if((o|0)==-1){r=17;break e}}if((a+(o*12|0)|0)!=0)o=s[a+(o*12|0)+8>>2]|0;else r=17}else r=17;while(0);if((r|0)==17){o=s[e+16>>2]|0;o=yD[s[(s[o>>2]|0)+8>>2]&31](o,i+24|0,i,s[e+32>>2]|0)|0;B=s[e+28>>2]|0;s[(xD[s[(s[B>>2]|0)+12>>2]&31](B,t,n)|0)+8>>2]=o}l=s[e+24>>2]|0;H=s[l+8>>2]|0;B=s[l+12>>2]|0;s[l+8>>2]=i+24;s[(s[e+24>>2]|0)+12>>2]=i;l=s[e+24>>2]|0;WD[s[(s[l>>2]|0)+8>>2]&127](l,-1,t);l=s[e+24>>2]|0;WD[s[(s[l>>2]|0)+12>>2]&127](l,-1,n);aD[s[(s[o>>2]|0)+8>>2]&31](o,i+24|0,i,s[e+20>>2]|0,s[e+24>>2]|0);s[(s[e+24>>2]|0)+8>>2]=H;s[(s[e+24>>2]|0)+12>>2]=B;c=i;return}function eN(e,t){e=e|0;t=t|0;return}function tN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=18432;s[e+12>>2]=18464;n=s[e+60>>2]|0;hD[s[(s[n>>2]|0)+20>>2]&127](n,s[e+76>>2]|0);n=s[e+60>>2]|0;hD[s[(s[n>>2]|0)+16>>2]&127](n,s[e+76>>2]|0);hM(e);c=t;return}function nN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=18432;s[e+12>>2]=18464;n=s[e+60>>2]|0;hD[s[(s[n>>2]|0)+20>>2]&127](n,s[e+76>>2]|0);n=s[e+60>>2]|0;hD[s[(s[n>>2]|0)+16>>2]&127](n,s[e+76>>2]|0);c=t;return}function rN(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+76>>2]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+76>>2];s[t+4>>2]=u+1;c=n;return}function iN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=18464;n=s[e+48>>2]|0;hD[s[(s[n>>2]|0)+20>>2]&127](n,s[e+64>>2]|0);n=s[e+48>>2]|0;hD[s[(s[n>>2]|0)+16>>2]&127](n,s[e+64>>2]|0);hM(e);c=t;return}function sN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=18464;n=s[e+48>>2]|0;hD[s[(s[n>>2]|0)+20>>2]&127](n,s[e+64>>2]|0);n=s[e+48>>2]|0;hD[s[(s[n>>2]|0)+16>>2]&127](n,s[e+64>>2]|0);c=t;return}function oN(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0;i=c;c=c+128|0;l=+f[t>>2];u=+f[t+16>>2];d=l<u?l:u;a=+f[t+32>>2];if((d<a?d:a)>+f[e+28>>2]){c=i;return}p=l>u?t:t+16|0;if(+f[(+f[p>>2]>a?p:t+32|0)>>2]<+f[e+12>>2]){c=i;return}u=+f[t+8>>2];a=+f[t+24>>2];d=u<a?u:a;l=+f[t+40>>2];if((d<l?d:l)>+f[e+36>>2]){c=i;return}p=u>a?t+8|0:t+24|0;if(+f[(+f[p>>2]>l?p:t+40|0)>>2]<+f[e+20>>2]){c=i;return}l=+f[t+4>>2];u=+f[t+20>>2];d=l<u?l:u;a=+f[t+36>>2];if((d<a?d:a)>+f[e+32>>2]){c=i;return}p=l>u?t+4|0:t+20|0;if(+f[(+f[p>>2]>a?p:t+36|0)>>2]<+f[e+16>>2]){c=i;return}o=s[e+48>>2]|0;h=s[e+4>>2]|0;if((s[(s[h+4>>2]|0)+4>>2]|0)>=20){c=i;return}s[i+32>>2]=0;f[i+36>>2]=1;f[i+40>>2]=1;f[i+44>>2]=1;f[i+48>>2]=0;s[i+76>>2]=0;s[i+24>>2]=16376;s[i+28>>2]=1;s[i+80>>2]=s[t+0>>2];s[i+84>>2]=s[t+4>>2];s[i+88>>2]=s[t+8>>2];s[i+92>>2]=s[t+12>>2];s[i+96>>2]=s[t+16>>2];s[i+100>>2]=s[t+20>>2];s[i+104>>2]=s[t+24>>2];s[i+108>>2]=s[t+28>>2];s[i+112>>2]=s[t+32>>2];s[i+116>>2]=s[t+36>>2];s[i+120>>2]=s[t+40>>2];s[i+124>>2]=s[t+44>>2];f[i+68>>2]=+f[e+56>>2];v=s[e+8>>2]|0;p=s[v+8>>2]|0;t=s[v+12>>2]|0;s[i>>2]=v;s[i+4>>2]=i+24;s[i+8>>2]=p;s[i+12>>2]=t;s[i+16>>2]=n;s[i+20>>2]=r;t=yD[s[(s[o>>2]|0)+8>>2]&31](o,h,i,s[e+64>>2]|0)|0;h=s[e+44>>2]|0;p=s[h+8>>2]|0;if((s[p+8>>2]|0)==(s[(s[e+8>>2]|0)+8>>2]|0)){s[h+8>>2]=i;v=s[e+44>>2]|0;WD[s[(s[v>>2]|0)+8>>2]&127](v,n,r)}else{p=s[h+12>>2]|0;s[h+12>>2]=i;v=s[e+44>>2]|0;WD[s[(s[v>>2]|0)+12>>2]&127](v,n,r)}aD[s[(s[t>>2]|0)+8>>2]&31](t,s[e+4>>2]|0,i,s[e+52>>2]|0,s[e+44>>2]|0);n=s[e+44>>2]|0;if((s[(s[n+8>>2]|0)+8>>2]|0)==(s[(s[e+8>>2]|0)+8>>2]|0))s[n+8>>2]=p;else s[n+12>>2]=p;lD[s[s[t>>2]>>2]&511](t);hD[s[(s[o>>2]|0)+60>>2]&127](o,t);s[i+24>>2]=15736;e=s[i+76>>2]|0;if((e|0)==0){c=i;return}lD[s[s[e>>2]>>2]&511](e);e=s[i+76>>2]|0;if((e|0)==0){c=i;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=i;return}function uN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0;u=c;c=c+64|0;l=(r[e+8>>0]|0)!=0;a=l?n:t;n=l?t:n;t=s[n+4>>2]|0;if(!(((s[t+4>>2]|0)+ -21|0)>>>0<9)){c=u;return}if((s[(s[a+4>>2]|0)+4>>2]|0)>=20){c=u;return}h=+CD[s[(s[t>>2]|0)+48>>2]&15](t);s[o+4>>2]=s[e+76>>2];s[e+16>>2]=a;s[e+20>>2]=n;s[e+64>>2]=i;f[e+68>>2]=h;s[e+56>>2]=o;l=s[n+12>>2]|0;k=+f[l>>2];C=+f[l+16>>2];N=+f[l+32>>2];T=+f[l+4>>2];x=+f[l+20>>2];S=+f[l+36>>2];y=+f[l+8>>2];m=+f[l+24>>2];d=+f[l+40>>2];E=-+f[l+48>>2];w=-+f[l+52>>2];b=-+f[l+56>>2];l=s[a+12>>2]|0;B=+f[l>>2];H=+f[l+16>>2];P=+f[l+32>>2];D=+f[l+4>>2];_=+f[l+20>>2];M=+f[l+36>>2];O=+f[l+8>>2];A=+f[l+24>>2];L=+f[l+40>>2];g=+f[l+48>>2];v=+f[l+52>>2];p=+f[l+56>>2];f[u>>2]=k*B+C*H+N*P;f[u+4>>2]=k*D+C*_+N*M;f[u+8>>2]=k*O+C*A+N*L;f[u+12>>2]=0;f[u+16>>2]=T*B+x*H+S*P;f[u+20>>2]=T*D+x*_+S*M;f[u+24>>2]=T*O+x*A+S*L;f[u+28>>2]=0;f[u+32>>2]=y*B+m*H+d*P;f[u+36>>2]=y*D+m*_+d*M;f[u+40>>2]=y*O+m*A+d*L;f[u+44>>2]=0;f[u+48>>2]=k*E+C*w+N*b+(k*g+C*v+N*p);f[u+52>>2]=T*E+x*w+S*b+(T*g+x*v+S*p);f[u+56>>2]=y*E+m*w+d*b+(y*g+m*v+d*p);f[u+60>>2]=0;l=s[(s[e+16>>2]|0)+4>>2]|0;JD[s[(s[l>>2]|0)+8>>2]&127](l,u,e+24|0,e+40|0);f[e+40>>2]=+f[e+40>>2]+h;f[e+44>>2]=+f[e+44>>2]+h;f[e+48>>2]=+f[e+48>>2]+h;f[e+24>>2]=+f[e+24>>2]-h;f[e+28>>2]=+f[e+28>>2]-h;f[e+32>>2]=+f[e+32>>2]-h;l=s[e+76>>2]|0;n=s[n+8>>2]|0;s[l+740>>2]=s[a+8>>2];s[l+744>>2]=n;JD[s[(s[t>>2]|0)+64>>2]&127](t,e+12|0,e+24|0,e+40|0);a=s[o+4>>2]|0;do if((s[a+748>>2]|0)!=0){i=s[a+740>>2]|0;n=s[(s[o+8>>2]|0)+8>>2]|0;if((i|0)==(n|0)){eM(a,i+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);break}else{eM(a,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,n+4|0);break}}while(0);s[e+16>>2]=0;s[e+20>>2]=0;c=u;return}function aN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,X=0,V=0,$=0,J=0;o=c;c=c+240|0;i=(r[e+8>>0]|0)!=0;e=i?n:t;t=i?t:n;W=+f[e+116>>2]- +f[e+52>>2];X=+f[e+120>>2]- +f[e+56>>2];V=+f[e+124>>2]- +f[e+60>>2];$=+f[e+252>>2];if(W*W+X*X+V*V<$*$){$=1;c=o;return+$}p=+f[t+4>>2];v=+f[t+20>>2];g=+f[t+36>>2];N=+f[t+8>>2];C=+f[t+24>>2];k=+f[t+40>>2];u=+f[t+12>>2];L=+f[t+28>>2];O=+f[t+44>>2];z=-+f[t+52>>2];W=-+f[t+56>>2];X=-+f[t+60>>2];d=+f[e+4>>2];m=+f[e+20>>2];y=+f[e+36>>2];b=+f[e+8>>2];w=+f[e+24>>2];E=+f[e+40>>2];S=+f[e+12>>2];x=+f[e+28>>2];T=+f[e+44>>2];H=+f[e+52>>2];P=+f[e+56>>2];D=+f[e+60>>2];M=p*z+v*W+g*X+(p*H+v*P+g*D);_=N*z+C*W+k*X+(N*H+C*P+k*D);D=u*z+L*W+O*X+(u*H+L*P+O*D);P=+f[e+68>>2];H=+f[e+84>>2];B=+f[e+100>>2];j=+f[e+72>>2];F=+f[e+88>>2];I=+f[e+104>>2];q=+f[e+76>>2];R=+f[e+92>>2];h=+f[e+108>>2];V=+f[e+116>>2];$=+f[e+120>>2];A=+f[e+124>>2];l=p*z+v*W+g*X+(p*V+v*$+g*A);a=N*z+C*W+k*X+(N*V+C*$+k*A);A=u*z+L*W+O*X+(u*V+L*$+O*A);t=s[t+192>>2]|0;if(!(((s[t+4>>2]|0)+ -21|0)>>>0<9)){$=1;c=o;return+$}f[o+224>>2]=M;f[o+228>>2]=_;f[o+232>>2]=D;f[o+236>>2]=0;if(l<M){f[o+224>>2]=l;X=l}else X=M;if(a<_){f[o+228>>2]=a;V=a}else V=_;if(A<D){f[o+232>>2]=A;$=A}else $=D;f[o+208>>2]=M;f[o+212>>2]=_;f[o+216>>2]=D;f[o+220>>2]=0;if(M<l){f[o+208>>2]=l;U=l}else U=M;if(_<a){f[o+212>>2]=a;z=a}else z=_;if(D<A){f[o+216>>2]=A;W=A}else W=D;J=+f[e+248>>2];f[o+224>>2]=X-J;f[o+228>>2]=V-J;f[o+232>>2]=$-J;f[o+208>>2]=J+U;f[o+212>>2]=J+z;f[o+216>>2]=J+W;s[o>>2]=18592;f[o+4>>2]=p*d+v*m+g*y;f[o+8>>2]=p*b+v*w+g*E;f[o+12>>2]=p*S+v*x+g*T;f[o+16>>2]=0;f[o+20>>2]=N*d+C*m+k*y;f[o+24>>2]=N*b+C*w+k*E;f[o+28>>2]=N*S+C*x+k*T;f[o+32>>2]=0;f[o+36>>2]=u*d+L*m+O*y;f[o+40>>2]=u*b+L*w+O*E;f[o+44>>2]=u*S+L*x+O*T;f[o+48>>2]=0;f[o+52>>2]=M;f[o+56>>2]=_;f[o+60>>2]=D;f[o+64>>2]=0;f[o+68>>2]=p*P+v*H+g*B;f[o+72>>2]=p*j+v*F+g*I;f[o+76>>2]=p*q+v*R+g*h;f[o+80>>2]=0;f[o+84>>2]=N*P+C*H+k*B;f[o+88>>2]=N*j+C*F+k*I;f[o+92>>2]=N*q+C*R+k*h;f[o+96>>2]=0;f[o+100>>2]=u*P+L*H+O*B;f[o+104>>2]=u*j+L*F+O*I;f[o+108>>2]=u*q+L*R+O*h;f[o+112>>2]=0;f[o+116>>2]=l;f[o+120>>2]=a;f[o+124>>2]=A;f[o+128>>2]=0;f[o+196>>2]=J;f[o+200>>2]=+f[e+244>>2];if((t|0)==0){J=1;c=o;return+J}JD[s[(s[t>>2]|0)+64>>2]&127](t,o,o+224|0,o+208|0);u=+f[o+200>>2];if(!(u<+f[e+244>>2])){J=1;c=o;return+J}f[e+244>>2]=u;J=u;c=o;return+J}function fN(e){e=e|0;return}function lN(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function cN(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0;n=c;c=c+784|0;f[n+712>>2]=1;s[n+716>>2]=0;s[n+720>>2]=0;s[n+724>>2]=0;s[n+728>>2]=0;f[n+732>>2]=1;s[n+736>>2]=0;s[n+740>>2]=0;s[n+744>>2]=0;s[n+748>>2]=0;f[n+752>>2]=1;i=n+756|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;s[n+536>>2]=9440;s[n+704>>2]=0;f[n+708>>2]=0;f[n+700>>2]=+f[e+200>>2];u=+f[e+196>>2];s[n+488>>2]=0;f[n+492>>2]=1;f[n+496>>2]=1;f[n+500>>2]=1;f[n+504>>2]=0;s[n+480>>2]=16680;s[n+484>>2]=8;f[n+508>>2]=u;f[n+524>>2]=u;s[n+384>>2]=0;f[n+388>>2]=1;f[n+392>>2]=1;f[n+396>>2]=1;f[n+400>>2]=0;f[n+420>>2]=.03999999910593033;s[n+428>>2]=0;s[n+376>>2]=16376;s[n+380>>2]=1;s[n+432>>2]=s[t+0>>2];s[n+436>>2]=s[t+4>>2];s[n+440>>2]=s[t+8>>2];s[n+444>>2]=s[t+12>>2];s[n+448>>2]=s[t+16>>2];s[n+452>>2]=s[t+20>>2];s[n+456>>2]=s[t+24>>2];s[n+460>>2]=s[t+28>>2];s[n+464>>2]=s[t+32>>2];s[n+468>>2]=s[t+36>>2];s[n+472>>2]=s[t+40>>2];s[n+476>>2]=s[t+44>>2];f[n+324>>2]=9999999747378752e-20;r[n+348>>0]=0;s[n>>2]=17152;s[n+4>>2]=n+16;s[n+8>>2]=n+480;s[n+12>>2]=n+376;if(Xx(n,e+4|0,e+68|0,n+712|0,n+712|0,n+536|0)|0?(o=+f[n+700>>2],+f[e+200>>2]>o):0)f[e+200>>2]=o;s[n+376>>2]=15736;e=s[n+428>>2]|0;if((e|0)==0){c=n;return}lD[s[s[e>>2]>>2]&511](e);e=s[n+428>>2]|0;if((e|0)==0){c=n;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=n;return}function hN(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function pN(e){e=e|0;return}function dN(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=18816;if((r[e+16>>0]|0)!=0?(n=s[e+20>>2]|0,(n|0)!=0):0){i=s[e+4>>2]|0;hD[s[(s[i>>2]|0)+16>>2]&127](i,n)}hM(e);c=t;return}function vN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=18816;if((r[e+16>>0]|0)==0){c=t;return}n=s[e+20>>2]|0;if((n|0)==0){c=t;return}e=s[e+4>>2]|0;hD[s[(s[e>>2]|0)+16>>2]&127](e,n);c=t;return}function mN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0,ut=0,at=0,ft=0,lt=0,ct=0,ht=0,pt=0,dt=0,vt=0,mt=0,gt=0,yt=0,bt=0,wt=0,Et=0,St=0,xt=0,Tt=0,Nt=0,Ct=0,kt=0,Lt=0;u=c;c=c+832|0;g=s[e+20>>2]|0;if((g|0)==0){g=s[e+4>>2]|0;g=xD[s[(s[g>>2]|0)+12>>2]&31](g,s[t+8>>2]|0,s[n+8>>2]|0)|0;s[e+20>>2]=g;r[e+16>>0]=1}s[o+4>>2]=g;l=s[t+4>>2]|0;a=s[n+4>>2]|0;w=s[l+4>>2]|0;if((w|0)==10?(s[a+4>>2]|0)==10:0){h=+f[(s[e+20>>2]|0)+752>>2];Nt=s[l+52>>2]|0;k=+f[l+(Nt<<2)+28>>2];d=+f[l+(((Nt+2|0)%3|0)<<2)+28>>2];Ct=s[a+52>>2]|0;L=+f[a+(Ct<<2)+28>>2];v=+f[a+(((Ct+2|0)%3|0)<<2)+28>>2];kt=s[t+12>>2]|0;e=s[n+12>>2]|0;E=+f[kt+(Nt<<2)>>2];m=+f[kt+(Nt<<2)+16>>2];S=+f[kt+(Nt<<2)+32>>2];A=+f[e+(Ct<<2)>>2];O=+f[e+(Ct<<2)+16>>2];C=+f[e+(Ct<<2)+32>>2];N=+f[e+48>>2]- +f[kt+48>>2];T=+f[e+52>>2]- +f[kt+52>>2];x=+f[e+56>>2]- +f[kt+56>>2];M=1-(E*A+m*O+S*C)*(E*A+m*O+S*C);if(!(M==0)){_=(E*N+m*T+S*x-(E*A+m*O+S*C)*(A*N+O*T+C*x))/M;if(!(_<-k)){if(_>k)_=k}else _=-k}else _=0;M=(E*A+m*O+S*C)*_-(A*N+O*T+C*x);if(M<-L){M=(E*A+m*O+S*C)*-L+(E*N+m*T+S*x);if(!(M<-k))if(M>k)L=-L;else{k=M;L=-L}else{k=-k;L=-L}}else if(M>L){M=L*(E*A+m*O+S*C)+(E*N+m*T+S*x);if(!(M<-k)){if(!(M>k))k=M}else k=-k}else{k=_;L=M}A=A*L;O=O*L;C=C*L;N=A+(N-E*k);T=O+(T-m*k);k=C+(x-S*k);x=+X(+(k*k+(N*N+T*T)));if(!(x-d-v>h)){do if(k*k+(N*N+T*T)<=1.4210854715202004e-14)if(+W(+S)>.7071067690849304){gt=1/+X(+(m*m+S*S));f[u+320>>2]=0;f[u+324>>2]=-(S*gt);f[u+328>>2]=m*gt;N=0;E=-(S*gt);m=m*gt;break}else{gt=1/+X(+(E*E+m*m));f[u+320>>2]=-(m*gt);f[u+324>>2]=E*gt;f[u+328>>2]=0;N=-(m*gt);E=E*gt;m=0;break}else{f[u+320>>2]=N*-(1/x);f[u+324>>2]=T*-(1/x);f[u+328>>2]=k*-(1/x);f[u+332>>2]=0;N=N*-(1/x);E=T*-(1/x);m=k*-(1/x)}while(0);mt=v*E+(O+ +f[e+52>>2]);gt=v*m+(C+ +f[e+56>>2]);f[u+304>>2]=v*N+(A+ +f[e+48>>2]);f[u+308>>2]=mt;f[u+312>>2]=gt;f[u+316>>2]=0}if(x-d-v<h){zD[s[(s[o>>2]|0)+16>>2]&15](o,u+320|0,u+304|0,x-d-v);g=s[o+4>>2]|0}if((s[g+748>>2]|0)==0){c=u;return}t=s[g+740>>2]|0;e=s[(s[o+8>>2]|0)+8>>2]|0;if((t|0)==(e|0)){eM(g,t+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=u;return}else{eM(g,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,e+4|0);c=u;return}}else bt=a+4|0;f[u+296>>2]=0xde0b6b000000000;H=s[e+8>>2]|0;q=s[e+12>>2]|0;s[u+88>>2]=13392;f[u+92>>2]=0;f[u+96>>2]=1;f[u+100>>2]=0;f[u+104>>2]=0;s[u+108>>2]=q;s[u+112>>2]=H;s[u+116>>2]=l;s[u+120>>2]=a;s[u+124>>2]=w;s[u+128>>2]=s[bt>>2];f[u+132>>2]=+CD[s[(s[l>>2]|0)+48>>2]&15](l);f[u+136>>2]=+CD[s[(s[a>>2]|0)+48>>2]&15](a);r[u+140>>0]=0;s[u+148>>2]=-1;s[u+160>>2]=1;s[u+164>>2]=1;s[u+116>>2]=l;s[u+120>>2]=a;mt=+CD[s[(s[l>>2]|0)+48>>2]&15](l);gt=+CD[s[(s[a>>2]|0)+48>>2]&15](a);gt=mt+gt+ +f[(s[e+20>>2]|0)+752>>2];f[u+296>>2]=gt*gt;H=s[t+12>>2]|0;s[u+168>>2]=s[H+0>>2];s[u+172>>2]=s[H+4>>2];s[u+176>>2]=s[H+8>>2];s[u+180>>2]=s[H+12>>2];q=u+184|0;s[q+0>>2]=s[H+16>>2];s[q+4>>2]=s[H+20>>2];s[q+8>>2]=s[H+24>>2];s[q+12>>2]=s[H+28>>2];P=u+200|0;s[P+0>>2]=s[H+32>>2];s[P+4>>2]=s[H+36>>2];s[P+8>>2]=s[H+40>>2];s[P+12>>2]=s[H+44>>2];pt=u+216|0;s[pt+0>>2]=s[H+48>>2];s[pt+4>>2]=s[H+52>>2];s[pt+8>>2]=s[H+56>>2];s[pt+12>>2]=s[H+60>>2];H=u+232|0;g=s[n+12>>2]|0;s[H+0>>2]=s[g+0>>2];s[H+4>>2]=s[g+4>>2];s[H+8>>2]=s[g+8>>2];s[H+12>>2]=s[g+12>>2];tt=u+248|0;s[tt+0>>2]=s[g+16>>2];s[tt+4>>2]=s[g+20>>2];s[tt+8>>2]=s[g+24>>2];s[tt+12>>2]=s[g+28>>2];ht=u+264|0;s[ht+0>>2]=s[g+32>>2];s[ht+4>>2]=s[g+36>>2];s[ht+8>>2]=s[g+40>>2];s[ht+12>>2]=s[g+44>>2];w=u+280|0;s[w+0>>2]=s[g+48>>2];s[w+4>>2]=s[g+52>>2];s[w+8>>2]=s[g+56>>2];s[w+12>>2]=s[g+60>>2];g=s[l+4>>2]|0;do if((g|0)<7?(y=s[bt>>2]|0,(y|0)<7):0){s[u+80>>2]=19224;if((g|0)==0)m=0;else{m=+CD[s[(s[l>>2]|0)+48>>2]&15](l);y=s[bt>>2]|0}if((y|0)==0)x=0;else x=+CD[s[(s[a>>2]|0)+48>>2]&15](a);s[u+40>>2]=19032;s[u+44>>2]=o;f[u+64>>2]=m;f[u+68>>2]=x;r[u+76>>0]=0;y=s[l+52>>2]|0;if((y|0)!=0){g=s[a+52>>2]|0;if((g|0)==0){if((s[bt>>2]|0)!=1)break;w=u+32|0;r[w>>0]=1;g=u+28|0;s[g>>2]=0;y=u+20|0;s[y>>2]=0;p=u+24|0;s[p>>2]=0;P=s[n+12>>2]|0;mt=+f[a+56>>2];gt=+f[a+60>>2];v=+f[a+64>>2];h=mt*+f[P>>2]+gt*+f[P+4>>2]+v*+f[P+8>>2]+ +f[P+48>>2];d=mt*+f[P+16>>2]+gt*+f[P+20>>2]+v*+f[P+24>>2]+ +f[P+52>>2];v=mt*+f[P+32>>2]+gt*+f[P+36>>2]+v*+f[P+40>>2]+ +f[P+56>>2];s[5004]=(s[5004]|0)+1;P=cM(35)|0;if((P|0)==0)P=0;else{s[(P+19&-16)+ -4>>2]=P;P=P+19&-16}H=s[g>>2]|0;if((H|0)!=0){if((r[w>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[H+ -4>>2]|0)}s[g>>2]=0}r[w>>0]=1;s[g>>2]=P;s[p>>2]=1;H=s[y>>2]|0;f[P+(H<<4)>>2]=h;f[P+(H<<4)+4>>2]=d;f[P+(H<<4)+8>>2]=v;f[P+(H<<4)+12>>2]=0;H=s[y>>2]|0;s[y>>2]=H+1;P=s[n+12>>2]|0;mt=+f[a+72>>2];gt=+f[a+76>>2];d=+f[a+80>>2];h=mt*+f[P>>2]+gt*+f[P+4>>2]+d*+f[P+8>>2]+ +f[P+48>>2];v=mt*+f[P+16>>2]+gt*+f[P+20>>2]+d*+f[P+24>>2]+ +f[P+52>>2];d=mt*+f[P+32>>2]+gt*+f[P+36>>2]+d*+f[P+40>>2]+ +f[P+56>>2];P=s[p>>2]|0;if((H+1|0)==(P|0)){P=(H+1|0)==0?1:H+1<<1;if((H+1|0)<(P|0)){if((P|0)!=0?(s[5004]=(s[5004]|0)+1,yt=cM((P<<4|3)+16|0)|0,(yt|0)!=0):0){s[(yt+19&-16)+ -4>>2]=yt;q=yt+19&-16}else q=0;if((H|0)>-1){tt=0;do{kt=q+(tt<<4)|0;Ct=(s[g>>2]|0)+(tt<<4)|0;s[kt+0>>2]=s[Ct+0>>2];s[kt+4>>2]=s[Ct+4>>2];s[kt+8>>2]=s[Ct+8>>2];s[kt+12>>2]=s[Ct+12>>2];tt=tt+1|0}while((tt|0)!=(H+1|0))}H=s[g>>2]|0;if((H|0)!=0){if((r[w>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[H+ -4>>2]|0)}s[g>>2]=0}r[w>>0]=1;s[g>>2]=q;s[p>>2]=P;q=s[y>>2]|0}else{q=H+1|0;P=H+1|0}}else q=H+1|0;H=s[g>>2]|0;f[H+(q<<4)>>2]=h;f[H+(q<<4)+4>>2]=v;f[H+(q<<4)+8>>2]=d;f[H+(q<<4)+12>>2]=0;q=q+1|0;s[y>>2]=q;kt=s[n+12>>2]|0;mt=+f[a+88>>2];gt=+f[a+92>>2];d=+f[a+96>>2];v=mt*+f[kt>>2]+gt*+f[kt+4>>2]+d*+f[kt+8>>2]+ +f[kt+48>>2];h=mt*+f[kt+16>>2]+gt*+f[kt+20>>2]+d*+f[kt+24>>2]+ +f[kt+52>>2];d=mt*+f[kt+32>>2]+gt*+f[kt+36>>2]+d*+f[kt+40>>2]+ +f[kt+56>>2];if((q|0)==(P|0)){n=(P|0)==0?1:P<<1;if((P|0)<(n|0)){if((n|0)!=0?(s[5004]=(s[5004]|0)+1,dt=cM((n<<4|3)+16|0)|0,(dt|0)!=0):0){s[(dt+19&-16)+ -4>>2]=dt;H=dt+19&-16}else H=0;if((P|0)>0){q=0;do{kt=H+(q<<4)|0;Ct=(s[g>>2]|0)+(q<<4)|0;s[kt+0>>2]=s[Ct+0>>2];s[kt+4>>2]=s[Ct+4>>2];s[kt+8>>2]=s[Ct+8>>2];s[kt+12>>2]=s[Ct+12>>2];q=q+1|0}while((q|0)!=(P|0))}P=s[g>>2]|0;if((P|0)!=0){if((r[w>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[P+ -4>>2]|0)}s[g>>2]=0}r[w>>0]=1;s[g>>2]=H;s[p>>2]=n;P=s[y>>2]|0}}else P=q;f[H+(P<<4)>>2]=v;f[H+(P<<4)+4>>2]=h;f[H+(P<<4)+8>>2]=d;f[H+(P<<4)+12>>2]=0;s[y>>2]=(s[y>>2]|0)+1;h=+f[(s[e+20>>2]|0)+752>>2];rO(u+88|0,u+168|0,u+80|0,s[i+20>>2]|0,0);d=+f[u+92>>2];m=+f[u+96>>2];v=+f[u+100>>2];if(d*d+m*m+v*v>1.1920928955078125e-7){mt=1/(d*d+m*m+v*v);f[u>>2]=d*mt;f[u+4>>2]=m*mt;f[u+8>>2]=v*mt;f[u+12>>2]=0;mt=+f[u+144>>2];gt=+CD[s[(s[l>>2]|0)+48>>2]&15](l);gt=mt-gt- +CD[s[(s[a>>2]|0)+48>>2]&15](a);iC(u,s[l+52>>2]|0,s[t+12>>2]|0,u+16|0,gt-h,h,o)}do if((r[e+16>>0]|0)!=0?(b=s[o+4>>2]|0,(s[b+748>>2]|0)!=0):0){t=s[b+740>>2]|0;e=s[(s[o+8>>2]|0)+8>>2]|0;if((t|0)==(e|0)){eM(b,t+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);break}else{eM(b,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,e+4|0);break}}while(0);o=s[g>>2]|0;if((o|0)!=0){if((r[w>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[g>>2]=0}r[w>>0]=1;s[g>>2]=0;s[y>>2]=0;s[p>>2]=0;c=u;return}h=+f[(s[e+20>>2]|0)+752>>2];if((r[i+24>>0]|0)==0){rO(u+88|0,u+168|0,u+40|0,s[i+20>>2]|0,0);d=+f[u+72>>2];if((r[u+76>>0]|0)!=0&d<0){j=+f[u+48>>2];F=+f[u+52>>2];D=+f[u+56>>2];B=+f[u+60>>2];p=105}}else{i=s[t+12>>2]|0;b=s[n+12>>2]|0;s[4920]=(s[4920]|0)+1;lt=+f[y+64>>2];ct=+f[y+68>>2];T=+f[i+4>>2];vt=+f[y+72>>2];N=+f[i+8>>2];C=+f[i+16>>2];k=+f[i+20>>2];A=+f[i+24>>2];L=+f[i+32>>2];O=+f[i+36>>2];M=+f[i+40>>2];mt=+f[g+64>>2];gt=+f[g+68>>2];d=+f[g+72>>2];m=lt*+f[i>>2]+ct*T+vt*N+ +f[i+48>>2]-(mt*+f[b>>2]+gt*+f[b+4>>2]+d*+f[b+8>>2]+ +f[b+48>>2]);v=lt*C+ct*k+vt*A+ +f[i+52>>2]-(mt*+f[b+16>>2]+gt*+f[b+20>>2]+d*+f[b+24>>2]+ +f[b+52>>2]);d=lt*L+ct*O+vt*M+ +f[i+56>>2]-(mt*+f[b+32>>2]+gt*+f[b+36>>2]+d*+f[b+40>>2]+ +f[b+56>>2]);w=s[y+28>>2]|0;e:do if((w|0)>0){x=0;R=3.4028234663852886e38;P=0;j=0;F=0;D=0;B=0;while(1){kt=s[y+36>>2]|0;vt=+f[kt+(P*36|0)+20>>2];mt=+f[kt+(P*36|0)+24>>2];gt=+f[kt+(P*36|0)+28>>2];T=vt*+f[i>>2]+mt*T+gt*N;N=vt*C+mt*k+gt*A;C=vt*L+mt*O+gt*M;f[u+400>>2]=T;f[u+404>>2]=N;f[u+408>>2]=C;f[u+412>>2]=0;if(m*T+v*N+d*C<0){f[u+400>>2]=T*-1;f[u+404>>2]=N*-1;f[u+408>>2]=C*-1;T=T*-1;N=N*-1;C=C*-1}s[4916]=(s[4916]|0)+1;if(rC(i,b,m,v,d,T,N,C,y,g,R)|0){s[4918]=(s[4918]|0)+1;RN(y,i,u+400|0,u+808|0,u+784|0,u+464|0,u+448|0);RN(g,b,u+400|0,u+720|0,u+480|0,u+432|0,u+416|0);N=+f[u+784>>2];T=+f[u+720>>2];if(!(N<T)?(S=+f[u+480>>2],E=+f[u+808>>2],!(S<E)):0){H=1;T=N-T<S-E?N-T:S-E}else{H=0;T=x}if(!H){g=0;break e}if(T<R){x=T;R=T;j=+f[u+400>>2];F=+f[u+404>>2];D=+f[u+408>>2];B=+f[u+412>>2]}else x=T}P=P+1|0;if((P|0)>=(w|0)){p=52;break e}T=+f[i+4>>2];N=+f[i+8>>2];C=+f[i+16>>2];k=+f[i+20>>2];A=+f[i+24>>2];L=+f[i+32>>2];O=+f[i+36>>2];M=+f[i+40>>2]}}else{R=3.4028234663852886e38;j=0;F=0;D=0;B=0;p=52}while(0);t:do if((p|0)==52){w=s[g+28>>2]|0;if((w|0)>0){E=0;P=0;do{kt=s[g+36>>2]|0;mt=+f[kt+(P*36|0)+20>>2];gt=+f[kt+(P*36|0)+24>>2];x=+f[kt+(P*36|0)+28>>2];S=mt*+f[b>>2]+gt*+f[b+4>>2]+x*+f[b+8>>2];T=mt*+f[b+16>>2]+gt*+f[b+20>>2]+x*+f[b+24>>2];x=mt*+f[b+32>>2]+gt*+f[b+36>>2]+x*+f[b+40>>2];f[u+384>>2]=S;f[u+388>>2]=T;f[u+392>>2]=x;f[u+396>>2]=0;if(m*S+v*T+d*x<0){f[u+384>>2]=S*-1;f[u+388>>2]=T*-1;f[u+392>>2]=x*-1;S=S*-1;T=T*-1;x=x*-1}s[4916]=(s[4916]|0)+1;do if(rC(i,b,m,v,d,S,T,x,y,g,R)|0){s[4918]=(s[4918]|0)+1;RN(y,i,u+384|0,u+808|0,u+784|0,u+464|0,u+448|0);RN(g,b,u+384|0,u+720|0,u+480|0,u+432|0,u+416|0);T=+f[u+784>>2];x=+f[u+720>>2];do if(T<x){H=0;S=E}else{S=+f[u+480>>2];N=+f[u+808>>2];if(S<N){H=0;S=E;break}H=1;S=T-x<S-N?T-x:S-N}while(0);if(!H){g=0;break t}if(!(S<R)){E=S;break}E=S;R=S;j=+f[u+384>>2];F=+f[u+388>>2];D=+f[u+392>>2];B=+f[u+396>>2]}while(0);P=P+1|0}while((P|0)<(w|0))}H=s[y+48>>2]|0;if((H|0)>0){T=0;N=0;C=0;k=0;L=0;A=0;M=0;O=0;_=0;I=0;V=0;Q=0;G=0;K=0;z=0;U=0;Y=0;Z=0;et=0;tt=s[g+48>>2]|0;w=0;q=-1;P=-1;while(1){kt=s[y+56>>2]|0;mt=+f[kt+(w<<4)>>2];gt=+f[kt+(w<<4)+4>>2];S=+f[kt+(w<<4)+8>>2];x=mt*+f[i>>2]+gt*+f[i+4>>2]+S*+f[i+8>>2];E=mt*+f[i+16>>2]+gt*+f[i+20>>2]+S*+f[i+24>>2];S=mt*+f[i+32>>2]+gt*+f[i+36>>2]+S*+f[i+40>>2];if((tt|0)>0){H=0;do{kt=s[g+56>>2]|0;mt=+f[kt+(H<<4)>>2];gt=+f[kt+(H<<4)+4>>2];ut=+f[kt+(H<<4)+8>>2];it=mt*+f[b>>2]+gt*+f[b+4>>2]+ut*+f[b+8>>2];ot=mt*+f[b+16>>2]+gt*+f[b+20>>2]+ut*+f[b+24>>2];ut=mt*+f[b+32>>2]+gt*+f[b+36>>2]+ut*+f[b+40>>2];f[u+368>>2]=E*ut-S*ot;f[u+372>>2]=S*it-x*ut;f[u+376>>2]=x*ot-E*it;f[u+380>>2]=0;do if(!(+W(+(E*ut-S*ot))>1e-6)){if(+W(+(S*it-x*ut))>1e-6){p=70;break}if(+W(+(x*ot-E*it))>1e-6)p=70}else p=70;while(0);do if((p|0)==70){p=0;nt=1/+X(+((E*ut-S*ot)*(E*ut-S*ot)+(S*it-x*ut)*(S*it-x*ut)+(x*ot-E*it)*(x*ot-E*it)));rt=(E*ut-S*ot)*nt;f[u+368>>2]=rt;st=(S*it-x*ut)*nt;f[u+372>>2]=st;nt=(x*ot-E*it)*nt;f[u+376>>2]=nt;if(m*rt+v*st+d*nt<0){f[u+368>>2]=rt*-1;f[u+372>>2]=st*-1;f[u+376>>2]=nt*-1;rt=rt*-1;st=st*-1;nt=nt*-1}s[4916]=(s[4916]|0)+1;if(!(rC(i,b,m,v,d,rt,st,nt,y,g,R)|0))break;s[4918]=(s[4918]|0)+1;RN(y,i,u+368|0,u+808|0,u+784|0,u+464|0,u+448|0);RN(g,b,u+368|0,u+720|0,u+480|0,u+432|0,u+416|0);lt=+f[u+784>>2];mt=+f[u+720>>2];do if(!(lt<mt)){vt=+f[u+480>>2];gt=+f[u+808>>2];if(vt<gt){tt=0;ct=G;ft=Q;at=V;st=M;nt=A;rt=L;lt=T;break}if(lt-mt<vt-gt){tt=1;ct=+f[u+456>>2];ft=+f[u+452>>2];at=+f[u+448>>2];st=+f[u+440>>2];nt=+f[u+436>>2];rt=+f[u+432>>2];lt=lt-mt;break}else{tt=1;ct=+f[u+472>>2];ft=+f[u+468>>2];at=+f[u+464>>2];st=+f[u+424>>2];nt=+f[u+420>>2];rt=+f[u+416>>2];lt=vt-gt;break}}else{tt=0;ct=G;ft=Q;at=V;st=M;nt=A;rt=L;lt=T}while(0);if(!tt){g=0;break t}if(!(lt<R)){G=ct;Q=ft;V=at;M=st;A=nt;L=rt;T=lt;break}et=S;Z=E;Y=x;U=ut;z=ot;K=it;G=ct;Q=ft;V=at;I=ct;_=ft;O=at;M=st;A=nt;L=rt;k=st;C=nt;N=rt;T=lt;R=lt;q=w;P=H;j=+f[u+368>>2];F=+f[u+372>>2];D=+f[u+376>>2];B=+f[u+380>>2]}while(0);H=H+1|0;tt=s[g+48>>2]|0}while((H|0)<(tt|0));E=et;S=Z;x=Y;H=s[y+48>>2]|0}else{E=et;S=Z;x=Y}w=w+1|0;if((w|0)>=(H|0))break;else{Y=x;Z=S;et=E}}}else{E=0;S=0;x=0;U=0;z=0;K=0;I=0;_=0;O=0;k=0;C=0;N=0;q=-1;P=-1}if((P|q|0)>-1){L=N-O;A=C-_;T=k-I;I=x*K+S*z+E*U;M=x*L+S*A+E*T;_=K*L+z*A+U*T;do if(!(1-I*I==0))if((M-I*_)/(1-I*I)<-1.0000000150474662e30)O=-1.0000000150474662e30;else{if(!((M-I*_)/(1-I*I)>1.0000000150474662e30)){O=(M-I*_)/(1-I*I);break}O=1.0000000150474662e30}else O=0;while(0);_=I*O-_;do if(_<-1.0000000150474662e30){if(I*-1.0000000150474662e30+M<-1.0000000150474662e30){O=-1.0000000150474662e30;I=-1.0000000150474662e30;break}if(!(I*-1.0000000150474662e30+M>1.0000000150474662e30)){O=I*-1.0000000150474662e30+M;I=-1.0000000150474662e30;break}O=1.0000000150474662e30;I=-1.0000000150474662e30}else{if(!(_>1.0000000150474662e30)){I=_;break}if(I*1.0000000150474662e30+M<-1.0000000150474662e30){O=-1.0000000150474662e30;I=1.0000000150474662e30;break}if(!(I*1.0000000150474662e30+M>1.0000000150474662e30)){O=I*1.0000000150474662e30+M;I=1.0000000150474662e30;break}O=1.0000000150474662e30;I=1.0000000150474662e30}while(0);M=K*I;_=I*z;I=I*U;x=L-x*O+M;S=A-O*S+_;T=T-O*E+I;f[u+352>>2]=x;f[u+356>>2]=S;f[u+360>>2]=T;f[u+364>>2]=0;if(x*x+S*S+T*T>1.1920928955078125e-7){E=+X(+(x*x+S*S+T*T));f[u+352>>2]=x*(1/E);f[u+356>>2]=1/E*S;f[u+360>>2]=1/E*T;if(x*(1/E)*m+1/E*S*v+1/E*T*d<0){f[u+352>>2]=x*(1/E)*-1;f[u+356>>2]=1/E*S*-1;f[u+360>>2]=1/E*T*-1}f[u+336>>2]=N+M;f[u+340>>2]=C+_;f[u+344>>2]=k+I;f[u+348>>2]=0;zD[s[(s[o>>2]|0)+16>>2]&15](o,u+352|0,u+336|0,-E)}}if(m*j+v*F+d*D<0){g=1;j=-j;F=-F;D=-D;B=0}else g=1}while(0);if(g){d=-1.0000000150474662e30;p=105}}if((p|0)==105){l=s[l+52>>2]|0;a=s[a+52>>2]|0;t=s[t+12>>2]|0;n=s[n+12>>2]|0;d=d-h;E=1/+X(+(j*j+F*F+D*D));v=j*E;m=F*E;E=D*E;f[u+808>>2]=v;f[u+812>>2]=m;f[u+816>>2]=E;f[u+820>>2]=B;i=s[a+28>>2]|0;p=s[a+36>>2]|0;if((i|0)>0){S=+f[n>>2];x=+f[n+4>>2];C=+f[n+8>>2];A=+f[n+16>>2];O=+f[n+20>>2];D=+f[n+24>>2];_=+f[n+32>>2];L=+f[n+36>>2];k=+f[n+40>>2];b=-1;B=-3.4028234663852886e38;g=0;while(1){T=+f[p+(g*36|0)+20>>2];N=+f[p+(g*36|0)+24>>2];M=+f[p+(g*36|0)+28>>2];y=(T*S+N*x+M*C)*v+(T*A+N*O+M*D)*m+(T*_+N*L+M*k)*E>B;b=y?g:b;g=g+1|0;if((g|0)>=(i|0)){y=b;break}else B=y?(T*S+N*x+M*C)*v+(T*A+N*O+M*D)*m+(T*_+N*L+M*k)*E:B}}else y=-1;r[u+800>>0]=1;g=u+796|0;s[g>>2]=0;s[u+788>>2]=0;s[u+792>>2]=0;i=s[p+(y*36|0)+4>>2]|0;n:do if((i|0)>0){p=p+(y*36|0)+12|0;q=0;H=0;w=0;b=0;while(1){kt=s[(s[p>>2]|0)+(b<<2)>>2]|0;Ct=s[a+16>>2]|0;mt=+f[Ct+(kt<<4)>>2];gt=+f[Ct+(kt<<4)+4>>2];E=+f[Ct+(kt<<4)+8>>2];v=mt*+f[n>>2]+gt*+f[n+4>>2]+E*+f[n+8>>2]+ +f[n+48>>2];m=mt*+f[n+16>>2]+gt*+f[n+20>>2]+E*+f[n+24>>2]+ +f[n+52>>2];E=mt*+f[n+32>>2]+gt*+f[n+36>>2]+E*+f[n+40>>2]+ +f[n+56>>2];if((q|0)==(w|0)){P=(w|0)==0?1:w<<1;if((w|0)<(P|0)){do if((P|0)==0)H=0;else{s[5004]=(s[5004]|0)+1;H=cM((P<<4|3)+16|0)|0;if((H|0)==0){H=0;break}s[(H+19&-16)+ -4>>2]=H;H=H+19&-16}while(0);if((w|0)>0){q=0;do{kt=H+(q<<4)|0;Ct=(s[g>>2]|0)+(q<<4)|0;s[kt+0>>2]=s[Ct+0>>2];s[kt+4>>2]=s[Ct+4>>2];s[kt+8>>2]=s[Ct+8>>2];s[kt+12>>2]=s[Ct+12>>2];q=q+1|0}while((q|0)!=(w|0))}w=s[g>>2]|0;if((w|0)!=0){if((r[u+800>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[w+ -4>>2]|0)}s[g>>2]=0}r[u+800>>0]=1;s[g>>2]=H;s[u+792>>2]=P;P=H;w=s[u+788>>2]|0}else P=H}else{P=H;w=q}f[P+(w<<4)>>2]=v;f[P+(w<<4)+4>>2]=m;f[P+(w<<4)+8>>2]=E;f[P+(w<<4)+12>>2]=0;q=(s[u+788>>2]|0)+1|0;s[u+788>>2]=q;b=b+1|0;if((b|0)>=(i|0))break n;H=P;w=s[u+792>>2]|0}}else P=0;while(0);if((y|0)>-1){iC(u+808|0,l,t,u+784|0,d,h,o);P=s[g>>2]|0}if((P|0)!=0){if((r[u+800>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[P+ -4>>2]|0)}s[g>>2]=0}}if((r[e+16>>0]|0)==0){c=u;return}n=s[o+4>>2]|0;if((s[n+748>>2]|0)==0){c=u;return}t=s[n+740>>2]|0;e=s[(s[o+8>>2]|0)+8>>2]|0;if((t|0)==(e|0)){eM(n,t+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=u;return}else{eM(n,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,e+4|0);c=u;return}}}while(0);rO(u+88|0,u+168|0,o,s[i+20>>2]|0,0);if(((s[e+28>>2]|0)!=0?(s[(s[o+4>>2]|0)+748>>2]|0)<(s[e+32>>2]|0):0)?(v=+f[u+92>>2],h=+f[u+96>>2],d=+f[u+100>>2],v*v+h*h+d*d>1.1920928955078125e-7):0){m=1/(v*v+h*h+d*d);if(+W(+(d*m))>.7071067690849304){N=1/+X(+(d*m*d*m+h*m*h*m));x=0;T=-(d*m*N);N=h*m*N}else{T=1/+X(+(v*m*v*m+h*m*h*m));x=-(h*m*T);T=v*m*T;N=0}E=+CD[s[(s[l>>2]|0)+16>>2]&15](l);S=+CD[s[(s[a>>2]|0)+16>>2]&15](a);C=.019999999552965164/(E<S?E:S);if(E<S){s[u+720>>2]=s[u+168>>2];s[u+724>>2]=s[u+172>>2];s[u+728>>2]=s[u+176>>2];s[u+732>>2]=s[u+180>>2];s[u+736>>2]=s[q+0>>2];s[u+740>>2]=s[q+4>>2];s[u+744>>2]=s[q+8>>2];s[u+748>>2]=s[q+12>>2];s[u+752>>2]=s[P+0>>2];s[u+756>>2]=s[P+4>>2];s[u+760>>2]=s[P+8>>2];s[u+764>>2]=s[P+12>>2];s[u+768>>2]=s[pt+0>>2];s[u+772>>2]=s[pt+4>>2];s[u+776>>2]=s[pt+8>>2];s[u+780>>2]=s[pt+12>>2]}else{s[u+720>>2]=s[H+0>>2];s[u+724>>2]=s[H+4>>2];s[u+728>>2]=s[H+8>>2];s[u+732>>2]=s[H+12>>2];s[u+736>>2]=s[tt+0>>2];s[u+740>>2]=s[tt+4>>2];s[u+744>>2]=s[tt+8>>2];s[u+748>>2]=s[tt+12>>2];s[u+752>>2]=s[ht+0>>2];s[u+756>>2]=s[ht+4>>2];s[u+760>>2]=s[ht+8>>2];s[u+764>>2]=s[ht+12>>2];s[u+768>>2]=s[w+0>>2];s[u+772>>2]=s[w+4>>2];s[u+776>>2]=s[w+8>>2];s[u+780>>2]=s[w+12>>2]}Ct=s[e+28>>2]|0;if((Ct|0)>0){k=N*N+(T*T+x*x);C=C>.39269909262657166?.19634954631328583:C*.5;Tt=u+516|0;Et=u+532|0;xt=u+548|0;dt=u+564|0;St=u+580|0;a=u+596|0;p=u+612|0;g=u+628|0;b=u+644|0;bt=u+660|0;l=u+736|0;y=u+676|0;wt=u+752|0;yt=u+692|0;Nt=u+768|0;if(k>1.1920928955078125e-7){k=+J(+C)/+X(+k);x=x*k;T=T*k;N=N*k;k=+$(+C);C=+X(+(d*m*d*m+(v*m*v*m+h*m*h*m)));if(E<S){kt=0;do{et=+(kt|0)*(6.2831854820251465/+(Ct|0))*.5;ct=+J(+et)/C;et=+$(+et);ut=N*-(h*m*ct)+(x*et+k*-(v*m*ct))-T*-(d*m*ct);mt=x*-(d*m*ct)+(T*et+k*-(h*m*ct))-N*-(v*m*ct);at=T*-(v*m*ct)+(N*et+k*-(d*m*ct))-x*-(h*m*ct);Z=k*et-x*-(v*m*ct)-T*-(h*m*ct)-N*-(d*m*ct);lt=d*m*ct*mt+(v*m*ct*Z+et*ut)-h*m*ct*at;vt=v*m*ct*at+(et*mt+h*m*ct*Z)-d*m*ct*ut;Y=h*m*ct*ut+(d*m*ct*Z+et*at)-v*m*ct*mt;at=et*Z-v*m*ct*ut-h*m*ct*mt-d*m*ct*at;ct=lt*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));mt=vt*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));ut=Y*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));Lt=s[t+12>>2]|0;Z=+f[Lt>>2];et=+f[Lt+16>>2];nt=+f[Lt+32>>2];rt=+f[Lt+4>>2];it=+f[Lt+20>>2];st=+f[Lt+36>>2];ot=+f[Lt+8>>2];ft=+f[Lt+24>>2];gt=+f[Lt+40>>2];f[u+168>>2]=(lt*ut+at*mt)*nt+(et*(lt*mt-at*ut)+Z*(1-(vt*mt+Y*ut)));f[u+172>>2]=(1-(vt*mt+Y*ut))*rt+(lt*mt-at*ut)*it+(lt*ut+at*mt)*st;f[u+176>>2]=(1-(vt*mt+Y*ut))*ot+(lt*mt-at*ut)*ft+(lt*ut+at*mt)*gt;f[u+180>>2]=0;f[u+184>>2]=(vt*ut-at*ct)*nt+(Z*(lt*mt+at*ut)+et*(1-(lt*ct+Y*ut)));f[u+188>>2]=(lt*mt+at*ut)*rt+(1-(lt*ct+Y*ut))*it+(vt*ut-at*ct)*st;f[u+192>>2]=(lt*mt+at*ut)*ot+(1-(lt*ct+Y*ut))*ft+(vt*ut-at*ct)*gt;f[u+196>>2]=0;f[u+200>>2]=Z*(lt*ut-at*mt)+et*(vt*ut+at*ct)+nt*(1-(lt*ct+vt*mt));f[u+204>>2]=(lt*ut-at*mt)*rt+(vt*ut+at*ct)*it+(1-(lt*ct+vt*mt))*st;f[u+208>>2]=(lt*ut-at*mt)*ot+(vt*ut+at*ct)*ft+(1-(lt*ct+vt*mt))*gt;f[u+212>>2]=0;Lt=s[n+12>>2]|0;s[H+0>>2]=s[Lt+0>>2];s[H+4>>2]=s[Lt+4>>2];s[H+8>>2]=s[Lt+8>>2];s[H+12>>2]=s[Lt+12>>2];s[tt+0>>2]=s[Lt+16>>2];s[tt+4>>2]=s[Lt+20>>2];s[tt+8>>2]=s[Lt+24>>2];s[tt+12>>2]=s[Lt+28>>2];s[ht+0>>2]=s[Lt+32>>2];s[ht+4>>2]=s[Lt+36>>2];s[ht+8>>2]=s[Lt+40>>2];s[ht+12>>2]=s[Lt+44>>2];s[w+0>>2]=s[Lt+48>>2];s[w+4>>2]=s[Lt+52>>2];s[w+8>>2]=s[Lt+56>>2];s[w+12>>2]=s[Lt+60>>2];Lt=s[i+20>>2]|0;s[u+480>>2]=18952;s[u+512>>2]=o;s[Tt+0>>2]=s[u+168>>2];s[Tt+4>>2]=s[u+172>>2];s[Tt+8>>2]=s[u+176>>2];s[Tt+12>>2]=s[u+180>>2];s[Et+0>>2]=s[q+0>>2];s[Et+4>>2]=s[q+4>>2];s[Et+8>>2]=s[q+8>>2];s[Et+12>>2]=s[q+12>>2];s[xt+0>>2]=s[P+0>>2];s[xt+4>>2]=s[P+4>>2];s[xt+8>>2]=s[P+8>>2];s[xt+12>>2]=s[P+12>>2];s[dt+0>>2]=s[pt+0>>2];s[dt+4>>2]=s[pt+4>>2];s[dt+8>>2]=s[pt+8>>2];s[dt+12>>2]=s[pt+12>>2];s[St+0>>2]=s[H+0>>2];s[St+4>>2]=s[H+4>>2];s[St+8>>2]=s[H+8>>2];s[St+12>>2]=s[H+12>>2];s[a+0>>2]=s[tt+0>>2];s[a+4>>2]=s[tt+4>>2];s[a+8>>2]=s[tt+8>>2];s[a+12>>2]=s[tt+12>>2];s[p+0>>2]=s[ht+0>>2];s[p+4>>2]=s[ht+4>>2];s[p+8>>2]=s[ht+8>>2];s[p+12>>2]=s[ht+12>>2];s[g+0>>2]=s[w+0>>2];s[g+4>>2]=s[w+4>>2];s[g+8>>2]=s[w+8>>2];s[g+12>>2]=s[w+12>>2];s[b+0>>2]=s[u+720>>2];s[b+4>>2]=s[u+724>>2];s[b+8>>2]=s[u+728>>2];s[b+12>>2]=s[u+732>>2];s[bt+0>>2]=s[l+0>>2];s[bt+4>>2]=s[l+4>>2];s[bt+8>>2]=s[l+8>>2];s[bt+12>>2]=s[l+12>>2];s[y+0>>2]=s[wt+0>>2];s[y+4>>2]=s[wt+4>>2];s[y+8>>2]=s[wt+8>>2];s[y+12>>2]=s[wt+12>>2];s[yt+0>>2]=s[Nt+0>>2];s[yt+4>>2]=s[Nt+4>>2];s[yt+8>>2]=s[Nt+8>>2];s[yt+12>>2]=s[Nt+12>>2];r[u+708>>0]=E<S&1;s[u+712>>2]=Lt;rO(u+88|0,u+168|0,u+480|0,Lt,0);Ct=s[e+28>>2]|0;kt=kt+1|0}while((kt|0)<(Ct|0))}else{kt=0;do{et=+(kt|0)*(6.2831854820251465/+(Ct|0))*.5;ct=+J(+et)/C;et=+$(+et);Lt=s[t+12>>2]|0;s[u+168>>2]=s[Lt+0>>2];s[u+172>>2]=s[Lt+4>>2];s[u+176>>2]=s[Lt+8>>2];s[u+180>>2]=s[Lt+12>>2];s[q+0>>2]=s[Lt+16>>2];s[q+4>>2]=s[Lt+20>>2];s[q+8>>2]=s[Lt+24>>2];s[q+12>>2]=s[Lt+28>>2];s[P+0>>2]=s[Lt+32>>2];s[P+4>>2]=s[Lt+36>>2];s[P+8>>2]=s[Lt+40>>2];s[P+12>>2]=s[Lt+44>>2];s[pt+0>>2]=s[Lt+48>>2];s[pt+4>>2]=s[Lt+52>>2];s[pt+8>>2]=s[Lt+56>>2];s[pt+12>>2]=s[Lt+60>>2];ut=N*-(h*m*ct)+(x*et+k*-(v*m*ct))-T*-(d*m*ct);mt=x*-(d*m*ct)+(T*et+k*-(h*m*ct))-N*-(v*m*ct);at=T*-(v*m*ct)+(N*et+k*-(d*m*ct))-x*-(h*m*ct);Z=k*et-x*-(v*m*ct)-T*-(h*m*ct)-N*-(d*m*ct);lt=d*m*ct*mt+(v*m*ct*Z+et*ut)-h*m*ct*at;vt=v*m*ct*at+(et*mt+h*m*ct*Z)-d*m*ct*ut;Y=h*m*ct*ut+(d*m*ct*Z+et*at)-v*m*ct*mt;at=et*Z-v*m*ct*ut-h*m*ct*mt-d*m*ct*at;ct=lt*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));mt=vt*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));ut=Y*(2/(at*at+(Y*Y+(lt*lt+vt*vt))));Lt=s[n+12>>2]|0;Z=+f[Lt>>2];et=+f[Lt+16>>2];nt=+f[Lt+32>>2];rt=+f[Lt+4>>2];it=+f[Lt+20>>2];st=+f[Lt+36>>2];ot=+f[Lt+8>>2];ft=+f[Lt+24>>2];gt=+f[Lt+40>>2];f[u+232>>2]=(lt*ut+at*mt)*nt+(et*(lt*mt-at*ut)+Z*(1-(vt*mt+Y*ut)));f[u+236>>2]=(1-(vt*mt+Y*ut))*rt+(lt*mt-at*ut)*it+(lt*ut+at*mt)*st;f[u+240>>2]=(1-(vt*mt+Y*ut))*ot+(lt*mt-at*ut)*ft+(lt*ut+at*mt)*gt;f[u+244>>2]=0;f[u+248>>2]=(vt*ut-at*ct)*nt+(Z*(lt*mt+at*ut)+et*(1-(lt*ct+Y*ut)));f[u+252>>2]=(lt*mt+at*ut)*rt+(1-(lt*ct+Y*ut))*it+(vt*ut-at*ct)*st;f[u+256>>2]=(lt*mt+at*ut)*ot+(1-(lt*ct+Y*ut))*ft+(vt*ut-at*ct)*gt;f[u+260>>2]=0;f[u+264>>2]=Z*(lt*ut-at*mt)+et*(vt*ut+at*ct)+nt*(1-(lt*ct+vt*mt));f[u+268>>2]=(lt*ut-at*mt)*rt+(vt*ut+at*ct)*it+(1-(lt*ct+vt*mt))*st;f[u+272>>2]=(lt*ut-at*mt)*ot+(vt*ut+at*ct)*ft+(1-(lt*ct+vt*mt))*gt;f[u+276>>2]=0;Lt=s[i+20>>2]|0;s[u+480>>2]=18952;s[u+512>>2]=o;s[Tt+0>>2]=s[u+168>>2];s[Tt+4>>2]=s[u+172>>2];s[Tt+8>>2]=s[u+176>>2];s[Tt+12>>2]=s[u+180>>2];s[Et+0>>2]=s[q+0>>2];s[Et+4>>2]=s[q+4>>2];s[Et+8>>2]=s[q+8>>2];s[Et+12>>2]=s[q+12>>2];s[xt+0>>2]=s[P+0>>2];s[xt+4>>2]=s[P+4>>2];s[xt+8>>2]=s[P+8>>2];s[xt+12>>2]=s[P+12>>2];s[dt+0>>2]=s[pt+0>>2];s[dt+4>>2]=s[pt+4>>2];s[dt+8>>2]=s[pt+8>>2];s[dt+12>>2]=s[pt+12>>2];s[St+0>>2]=s[H+0>>2];s[St+4>>2]=s[H+4>>2];s[St+8>>2]=s[H+8>>2];s[St+12>>2]=s[H+12>>2];s[a+0>>2]=s[tt+0>>2];s[a+4>>2]=s[tt+4>>2];s[a+8>>2]=s[tt+8>>2];s[a+12>>2]=s[tt+12>>2];s[p+0>>2]=s[ht+0>>2];s[p+4>>2]=s[ht+4>>2];s[p+8>>2]=s[ht+8>>2];s[p+12>>2]=s[ht+12>>2];s[g+0>>2]=s[w+0>>2];s[g+4>>2]=s[w+4>>2];s[g+8>>2]=s[w+8>>2];s[g+12>>2]=s[w+12>>2];s[b+0>>2]=s[u+720>>2];s[b+4>>2]=s[u+724>>2];s[b+8>>2]=s[u+728>>2];s[b+12>>2]=s[u+732>>2];s[bt+0>>2]=s[l+0>>2];s[bt+4>>2]=s[l+4>>2];s[bt+8>>2]=s[l+8>>2];s[bt+12>>2]=s[l+12>>2];s[y+0>>2]=s[wt+0>>2];s[y+4>>2]=s[wt+4>>2];s[y+8>>2]=s[wt+8>>2];s[y+12>>2]=s[wt+12>>2];s[yt+0>>2]=s[Nt+0>>2];s[yt+4>>2]=s[Nt+4>>2];s[yt+8>>2]=s[Nt+8>>2];s[yt+12>>2]=s[Nt+12>>2];r[u+708>>0]=E<S&1;s[u+712>>2]=Lt;rO(u+88|0,u+168|0,u+480|0,Lt,0);Ct=s[e+28>>2]|0;kt=kt+1|0}while((kt|0)<(Ct|0))}}else if(E<S){t=0;do t=t+1|0;while((t|0)<(Ct|0))}else{t=0;do t=t+1|0;while((t|0)<(Ct|0))}}}if((r[e+16>>0]|0)==0){c=u;return}e=s[o+4>>2]|0;if((s[e+748>>2]|0)==0){c=u;return}t=s[e+740>>2]|0;n=s[(s[o+8>>2]|0)+8>>2]|0;if((t|0)==(n|0)){eM(e,t+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=u;return}else{eM(e,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,n+4|0);c=u;return}}function gN(e){e=e|0;return}function yN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0;i=c;c=c+624|0;v=+f[t+116>>2]- +f[t+52>>2];d=+f[t+120>>2]- +f[t+56>>2];p=+f[t+124>>2]- +f[t+60>>2];l=+f[n+116>>2]- +f[n+52>>2];a=+f[n+120>>2]- +f[n+56>>2];u=+f[n+124>>2]- +f[n+60>>2];h=+f[t+252>>2];if(v*v+d*d+p*p<h*h?(v=+f[n+252>>2],l*l+a*a+u*u<v*v):0){v=1;c=i;return+v}e=s[t+192>>2]|0;v=+f[n+248>>2];s[i+576>>2]=0;f[i+580>>2]=1;f[i+584>>2]=1;f[i+588>>2]=1;f[i+592>>2]=0;s[i+568>>2]=16680;s[i+572>>2]=8;f[i+596>>2]=v;f[i+612>>2]=v;s[i+392>>2]=9440;f[i+556>>2]=0xde0b6b000000000;s[i+560>>2]=0;f[i+564>>2]=0;f[i+340>>2]=9999999747378752e-20;r[i+364>>0]=0;s[i+16>>2]=13184;s[i+20>>2]=i+32;s[i+24>>2]=e;s[i+28>>2]=i+568;if(ZA(i+16|0,t+4|0,t+68|0,n+4|0,n+68|0,i+392|0)|0){a=+f[i+556>>2];if(+f[t+244>>2]>a)f[t+244>>2]=a;if(+f[n+244>>2]>a)f[n+244>>2]=a;if(!(a<1))a=1}else a=1;e=s[n+192>>2]|0;v=+f[t+248>>2];s[i+576>>2]=0;f[i+580>>2]=1;f[i+584>>2]=1;f[i+588>>2]=1;f[i+592>>2]=0;s[i+568>>2]=16680;s[i+572>>2]=8;f[i+596>>2]=v;f[i+612>>2]=v;s[i+392>>2]=9440;f[i+556>>2]=0xde0b6b000000000;s[i+560>>2]=0;f[i+564>>2]=0;f[i+340>>2]=9999999747378752e-20;r[i+364>>0]=r[i+364>>0]&-16;s[i>>2]=13184;s[i+4>>2]=i+32;s[i+8>>2]=i+568;s[i+12>>2]=e;if(!(ZA(i,t+4|0,t+68|0,n+4|0,n+68|0,i+392|0)|0)){v=a;c=i;return+v}u=+f[i+556>>2];if(+f[t+244>>2]>u)f[t+244>>2]=u;if(+f[n+244>>2]>u)f[n+244>>2]=u;if(!(a>u)){v=a;c=i;return+v}v=u;c=i;return+v}function bN(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+20>>2]|0)==0){c=n;return}if((r[e+16>>0]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+20>>2];s[t+4>>2]=u+1;c=n;return}function wN(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,f=0;n=c;i=s[t>>2]|0;i=DD[s[(s[i>>2]|0)+56>>2]&31](i,36)|0;if((i|0)==0){i=0;c=n;return i|0}u=s[t+4>>2]|0;f=s[e+12>>2]|0;a=s[e+8>>2]|0;o=s[e+16>>2]|0;e=s[e+20>>2]|0;s[i+4>>2]=s[t>>2];s[i>>2]=18816;s[i+8>>2]=f;s[i+12>>2]=a;r[i+16>>0]=0;s[i+20>>2]=u;r[i+24>>0]=0;s[i+28>>2]=o;s[i+32>>2]=e;c=n;return i|0}function EN(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function SN(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0;l=c;c=c+16|0;p=+f[t>>2];o=+f[t+4>>2];u=+f[t+8>>2];h=+f[n>>2];a=+f[n+4>>2];d=+f[n+8>>2];if((r[e+228>>0]|0)==0){N=+f[e+100>>2];S=+f[e+116>>2];L=+f[e+132>>2];T=+f[e+104>>2];w=+f[e+120>>2];k=+f[e+136>>2];x=+f[e+108>>2];y=+f[e+124>>2];C=+f[e+140>>2];M=-+f[e+148>>2];O=-+f[e+152>>2];A=-+f[e+156>>2];P=+f[e+164>>2];g=+f[e+168>>2];H=+f[e+172>>2];D=+f[e+180>>2];_=+f[e+184>>2];m=+f[e+188>>2];E=+f[e+196>>2];b=+f[e+200>>2];v=+f[e+204>>2];g=d*(L*P+k*g+C*H)+(h*(N*P+T*g+x*H)+a*(S*P+w*g+y*H))+((x*M+y*O+C*A)*H+(P*(N*M+S*O+L*A)+g*(T*M+w*O+k*A))+ +f[e+212>>2]);m=d*(L*D+k*_+C*m)+(h*(N*D+T*_+x*m)+a*(S*D+w*_+y*m))+((N*M+S*O+L*A)*D+(T*M+w*O+k*A)*_+(x*M+y*O+C*A)*m+ +f[e+216>>2]);v=(N*M+S*O+L*A)*E+(T*M+w*O+k*A)*b+(x*M+y*O+C*A)*v+ +f[e+220>>2]+(d*(L*E+k*b+C*v)+(h*(N*E+T*b+x*v)+a*(S*E+w*b+y*v)));f[l>>2]=g;f[l+4>>2]=m;f[l+8>>2]=v;f[l+12>>2]=0;d=(p*i+h-g)*+f[t>>2]+(o*i+a-m)*+f[t+4>>2]+(u*i+d-v)*+f[t+8>>2];n=e+32|0;n=s[n>>2]|0;e=s[n>>2]|0;e=e+16|0;e=s[e>>2]|0;zD[e&15](n,t,l,d);c=l;return}else{N=+f[e+36>>2];L=+f[e+52>>2];S=+f[e+68>>2];C=+f[e+40>>2];O=+f[e+56>>2];x=+f[e+72>>2];k=+f[e+44>>2];_=+f[e+60>>2];T=+f[e+76>>2];b=-+f[e+84>>2];w=-+f[e+88>>2];E=-+f[e+92>>2];m=+f[e+164>>2];D=+f[e+168>>2];v=+f[e+172>>2];g=+f[e+180>>2];y=+f[e+184>>2];P=+f[e+188>>2];A=+f[e+196>>2];M=+f[e+200>>2];H=+f[e+204>>2];D=(u*i+d)*(S*m+x*D+T*v)+((p*i+h)*(N*m+C*D+k*v)+(o*i+a)*(L*m+O*D+_*v))+((k*b+_*w+T*E)*v+(m*(N*b+L*w+S*E)+D*(C*b+O*w+x*E))+ +f[e+212>>2]);P=(u*i+d)*(S*g+x*y+T*P)+((p*i+h)*(N*g+C*y+k*P)+(o*i+a)*(L*g+O*y+_*P))+((N*b+L*w+S*E)*g+(C*b+O*w+x*E)*y+(k*b+_*w+T*E)*P+ +f[e+216>>2]);H=(N*b+L*w+S*E)*A+(C*b+O*w+x*E)*M+(k*b+_*w+T*E)*H+ +f[e+220>>2]+((u*i+d)*(S*A+x*M+T*H)+((p*i+h)*(N*A+C*M+k*H)+(o*i+a)*(L*A+O*M+_*H)));f[l>>2]=D+p*(p*(D-h)+o*(P-a)+u*(H-d));f[l+4>>2]=P+o*(p*(D-h)+o*(P-a)+u*(H-d));f[l+8>>2]=H+u*(p*(D-h)+o*(P-a)+u*(H-d));f[l+12>>2]=0;H=p*(D-h)+o*(P-a)+u*(H-d);n=e+32|0;n=s[n>>2]|0;e=s[n>>2]|0;e=e+16|0;e=s[e>>2]|0;zD[e&15](n,t,l,H);c=l;return}}function xN(e){e=e|0;return}function TN(e){e=e|0;return}function NN(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function CN(e,t,n){e=e|0;t=t|0;n=n|0;return}function kN(e,t,n){e=e|0;t=t|0;n=n|0;return}function LN(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0,u=0,a=0,l=0;o=c;c=c+16|0;f[e+32>>2]=i;s[e+8>>2]=s[t+0>>2];s[e+12>>2]=s[t+4>>2];s[e+16>>2]=s[t+8>>2];s[e+20>>2]=s[t+12>>2];u=+f[e+28>>2];l=+f[n+4>>2]-u*+f[t+4>>2];a=+f[n+8>>2]-u*+f[t+8>>2];f[o>>2]=+f[n>>2]- +f[t>>2]*u;f[o+4>>2]=l;f[o+8>>2]=a;f[o+12>>2]=0;i=+f[e+24>>2]+u+i;f[e+32>>2]=i;if(!(i<0)){n=e+4|0;n=s[n>>2]|0;e=s[n>>2]|0;e=e+16|0;e=s[e>>2]|0;zD[e&15](n,t,o,i);c=o;return}r[e+36>>0]=1;n=e+4|0;n=s[n>>2]|0;e=s[n>>2]|0;e=e+16|0;e=s[e>>2]|0;zD[e&15](n,t,o,i);c=o;return}function AN(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function ON(e,t,n){e=e|0;t=t|0;n=n|0;return}function MN(e,t,n){e=e|0;t=t|0;n=n|0;return}function _N(e,t,n,r){e=e|0;t=t|0;n=n|0;r=+r;return}function DN(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=19408;if((r[e+8>>0]|0)!=0?(n=s[e+12>>2]|0,(n|0)!=0):0){i=s[e+4>>2]|0;hD[s[(s[i>>2]|0)+16>>2]&127](i,n)}hM(e);c=t;return}function PN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=19408;if((r[e+8>>0]|0)==0){c=t;return}n=s[e+12>>2]|0;if((n|0)==0){c=t;return}e=s[e+4>>2]|0;hD[s[(s[e>>2]|0)+16>>2]&127](e,n);c=t;return}function HN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,V=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0,it=0,st=0,ot=0;i=c;c=c+128|0;if((s[e+12>>2]|0)==0){c=i;return}L=(r[e+16>>0]|0)!=0;B=L?n:t;L=L?t:n;d=s[B+4>>2]|0;u=s[L+4>>2]|0;B=s[B+12>>2]|0;m=+f[B>>2];A=+f[B+16>>2];N=+f[B+32>>2];b=+f[B+4>>2];y=+f[B+20>>2];g=+f[B+36>>2];v=+f[B+8>>2];p=+f[B+24>>2];T=+f[B+40>>2];M=+f[B+48>>2];_=+f[B+52>>2];D=+f[B+56>>2];B=s[L+12>>2]|0;q=+f[B>>2];I=+f[B+16>>2];a=+f[B+32>>2];F=+f[B+4>>2];j=+f[B+20>>2];x=+f[B+36>>2];h=+f[B+8>>2];k=+f[B+24>>2];E=+f[B+40>>2];P=-+f[B+48>>2];O=-+f[B+52>>2];w=-+f[B+56>>2];B=s[(s[d>>2]|0)+64>>2]|0;C=-+f[u+48>>2];l=-+f[u+52>>2];S=-+f[u+56>>2];f[i+32>>2]=(m*q+A*I+N*a)*C+(m*F+A*j+N*x)*l+(m*h+A*k+N*E)*S;f[i+36>>2]=(b*q+y*I+g*a)*C+(b*F+y*j+g*x)*l+(b*h+y*k+g*E)*S;f[i+40>>2]=(v*q+p*I+T*a)*C+(v*F+p*j+T*x)*l+(v*h+p*k+T*E)*S;f[i+44>>2]=0;WD[B&127](i+48|0,d,i+32|0);S=+f[i+48>>2];l=+f[i+52>>2];C=+f[i+56>>2];a=M*q+_*I+D*a+(q*P+I*O+a*w)+((m*q+A*I+N*a)*S+(b*q+y*I+g*a)*l+(v*q+p*I+T*a)*C);x=M*F+_*j+D*x+(F*P+j*O+x*w)+((m*F+A*j+N*x)*S+(b*F+y*j+g*x)*l+(v*F+p*j+T*x)*C);C=M*h+_*k+D*E+(h*P+k*O+E*w)+((m*h+A*k+N*E)*S+(b*h+y*k+g*E)*l+(v*h+p*k+T*E)*C);E=+f[u+48>>2];T=+f[u+52>>2];k=+f[u+56>>2];p=k*C+(E*a+T*x)- +f[u+64>>2];B=s[L+12>>2]|0;h=+f[B>>2];v=+f[B+4>>2];l=+f[B+8>>2];g=+f[B+16>>2];y=+f[B+20>>2];b=+f[B+24>>2];S=+f[B+32>>2];N=+f[B+36>>2];A=+f[B+40>>2];m=+f[B+48>>2];w=+f[B+52>>2];O=+f[B+56>>2];B=s[e+12>>2]|0;H=p<+f[B+752>>2];s[o+4>>2]=B;if(H){B=s[L+12>>2]|0;I=E*+f[B+16>>2]+T*+f[B+20>>2]+k*+f[B+24>>2];q=E*+f[B+32>>2]+T*+f[B+36>>2]+k*+f[B+40>>2];f[i+16>>2]=+f[B>>2]*E+ +f[B+4>>2]*T+ +f[B+8>>2]*k;f[i+20>>2]=I;f[i+24>>2]=q;f[i+28>>2]=0;f[i>>2]=l*(C-k*p)+(h*(a-E*p)+v*(x-T*p))+m;f[i+4>>2]=(a-E*p)*g+(x-T*p)*y+(C-k*p)*b+w;f[i+8>>2]=(a-E*p)*S+(x-T*p)*N+(C-k*p)*A+O;f[i+12>>2]=0;zD[s[(s[o>>2]|0)+16>>2]&15](o,i+16|0,i,p)}if((s[d+4>>2]|0)<7?(s[(s[o+4>>2]|0)+748>>2]|0)<(s[e+24>>2]|0):0){l=+f[u+56>>2];if(+W(+l)>.7071067690849304){q=+f[u+52>>2];h=1/+X(+(l*l+q*q));a=0;l=-(l*h);h=q*h}else{h=+f[u+48>>2];a=+f[u+52>>2];l=1/+X(+(h*h+a*a));a=-(a*l);l=h*l;h=0}q=.019999999552965164/+CD[s[(s[d>>2]|0)+16>>2]&15](d);p=+X(+(h*h+(l*l+a*a)));q=q>.39269909262657166?.19634954631328583:q*.5;p=+J(+q)/p;a=a*p;l=l*p;p=h*p;h=+$(+q);L=s[e+20>>2]|0;if((L|0)>0){d=0;do{m=+f[u+48>>2];q=+f[u+52>>2];v=+f[u+56>>2];x=+(d|0)*(6.2831854820251465/+(L|0))*.5;I=+J(+x)/+X(+(m*m+q*q+v*v));x=+$(+x);N=p*-(q*I)+(a*x+h*-(m*I))-l*-(v*I);y=a*-(v*I)+(l*x+h*-(q*I))-p*-(m*I);st=l*-(m*I)+(p*x+h*-(v*I))-a*-(q*I);C=h*x-a*-(m*I)-l*-(q*I)-p*-(v*I);O=v*I*y+(m*I*C+x*N)-q*I*st;A=m*I*st+(x*y+q*I*C)-v*I*N;tt=q*I*N+(v*I*C+x*st)-m*I*y;st=x*C-m*I*N-q*I*y-v*I*st;L=(r[e+16>>0]|0)!=0;Z=L?n:t;L=L?t:n;B=s[Z+4>>2]|0;H=s[L+4>>2]|0;Z=s[Z+12>>2]|0;I=+f[Z>>2];v=+f[Z+4>>2];y=+f[Z+8>>2];q=+f[Z+16>>2];N=+f[Z+20>>2];m=+f[Z+24>>2];C=+f[Z+32>>2];x=+f[Z+36>>2];D=+f[Z+40>>2];V=+f[Z+48>>2];z=+f[Z+52>>2];U=+f[Z+56>>2];Z=s[L+12>>2]|0;Y=+f[Z>>2];G=+f[Z+16>>2];w=+f[Z+32>>2];Q=+f[Z+4>>2];K=+f[Z+20>>2];S=+f[Z+36>>2];g=+f[Z+8>>2];M=+f[Z+24>>2];_=+f[Z+40>>2];R=-+f[Z+48>>2];j=-+f[Z+52>>2];F=-+f[Z+56>>2];b=O*(2/(O*O+A*A+tt*tt+st*st));P=A*(2/(O*O+A*A+tt*tt+st*st));ot=tt*(2/(O*O+A*A+tt*tt+st*st));rt=y*(O*ot-st*P)+(v*(O*P+st*ot)+I*(1-(A*P+tt*ot)));et=y*(A*ot+st*b)+(I*(O*P-st*ot)+v*(1-(O*b+tt*ot)));T=I*(O*ot+st*P)+v*(A*ot-st*b)+y*(1-(O*b+A*P));nt=m*(O*ot-st*P)+(N*(O*P+st*ot)+q*(1-(A*P+tt*ot)));k=m*(A*ot+st*b)+(q*(O*P-st*ot)+N*(1-(O*b+tt*ot)));E=q*(O*ot+st*P)+N*(A*ot-st*b)+m*(1-(O*b+A*P));it=D*(O*ot-st*P)+(x*(O*P+st*ot)+C*(1-(A*P+tt*ot)));tt=D*(A*ot+st*b)+(C*(O*P-st*ot)+x*(1-(O*b+tt*ot)));P=C*(O*ot+st*P)+x*(A*ot-st*b)+D*(1-(O*b+A*P));Z=s[(s[B>>2]|0)+64>>2]|0;A=-+f[H+48>>2];b=-+f[H+52>>2];O=-+f[H+56>>2];f[i+96>>2]=(_*it+(g*rt+M*nt))*O+((w*it+(Y*rt+G*nt))*A+(S*it+(Q*rt+K*nt))*b);f[i+100>>2]=(_*tt+(g*et+M*k))*O+((w*tt+(Y*et+G*k))*A+(S*tt+(Q*et+K*k))*b);f[i+104>>2]=(_*P+(g*T+M*E))*O+((w*P+(Y*T+G*E))*A+(S*P+(Q*T+K*E))*b);f[i+108>>2]=0;WD[Z&127](i+112|0,B,i+96|0);b=+f[i+112>>2];E=+f[i+116>>2];T=+f[i+120>>2];P=+f[H+48>>2];A=+f[H+52>>2];O=+f[H+56>>2];k=O*(V*g+z*M+U*_+(g*R+M*j+_*F)+((I*g+q*M+C*_)*b+(v*g+N*M+x*_)*E+(y*g+m*M+D*_)*T))+(P*(V*Y+z*G+U*w+(Y*R+G*j+w*F)+((I*Y+q*G+C*w)*b+(v*Y+N*G+x*w)*E+(y*Y+m*G+D*w)*T))+A*(V*Q+z*K+U*S+(Q*R+K*j+S*F)+((I*Q+q*K+C*S)*b+(v*Q+N*K+x*S)*E+(y*Q+m*K+D*S)*T)))- +f[H+64>>2];w=V*Y+z*G+U*w+(Y*R+G*j+w*F)+((I*Y+q*G+C*w)*b+(v*Y+N*G+x*w)*E+(y*Y+m*G+D*w)*T)-P*k;S=V*Q+z*K+U*S+(Q*R+K*j+S*F)+((I*Q+q*K+C*S)*b+(v*Q+N*K+x*S)*E+(y*Q+m*K+D*S)*T)-A*k;T=V*g+z*M+U*_+(g*R+M*j+_*F)+((I*g+q*M+C*_)*b+(v*g+N*M+x*_)*E+(y*g+m*M+D*_)*T)-O*k;H=s[L+12>>2]|0;_=+f[H>>2];D=+f[H+4>>2];M=+f[H+8>>2];m=+f[H+16>>2];g=+f[H+20>>2];y=+f[H+24>>2];E=+f[H+32>>2];x=+f[H+36>>2];N=+f[H+40>>2];v=+f[H+48>>2];b=+f[H+52>>2];C=+f[H+56>>2];H=s[e+12>>2]|0;B=k<+f[H+752>>2];s[o+4>>2]=H;if(B){Z=s[L+12>>2]|0;st=P*+f[Z+16>>2]+A*+f[Z+20>>2]+O*+f[Z+24>>2];ot=P*+f[Z+32>>2]+A*+f[Z+36>>2]+O*+f[Z+40>>2];f[i+80>>2]=+f[Z>>2]*P+ +f[Z+4>>2]*A+ +f[Z+8>>2]*O;f[i+84>>2]=st;f[i+88>>2]=ot;f[i+92>>2]=0;f[i+64>>2]=M*T+(_*w+D*S)+v;f[i+68>>2]=w*m+S*g+T*y+b;f[i+72>>2]=w*E+S*x+T*N+C;f[i+76>>2]=0;zD[s[(s[o>>2]|0)+16>>2]&15](o,i+80|0,i+64|0,k)}d=d+1|0;L=s[e+20>>2]|0}while((d|0)<(L|0))}}if((r[e+8>>0]|0)==0){c=i;return}if((s[(s[e+12>>2]|0)+748>>2]|0)==0){c=i;return}e=s[o+4>>2]|0;if((s[e+748>>2]|0)==0){c=i;return}t=s[e+740>>2]|0;n=s[(s[o+8>>2]|0)+8>>2]|0;if((t|0)==(n|0)){eM(e,t+4|0,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0);c=i;return}else{eM(e,(s[(s[o+12>>2]|0)+8>>2]|0)+4|0,n+4|0);c=i;return}}function BN(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 1}function jN(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0;n=c;if((s[e+12>>2]|0)==0){c=n;return}if((r[e+8>>0]|0)==0){c=n;return}u=s[t+4>>2]|0;if((u|0)==(s[t+8>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[t+4>>2]|0}if((u|0)>0){a=0;do{f=o+(a<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[t+12>>2]|0)+(a<<2)>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[t+12>>2]|0;if((a|0)!=0){if((r[t+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[t+4>>2]|0}s[t+12>>2]=0}r[t+16>>0]=1;s[t+12>>2]=o;s[t+8>>2]=i}i=(s[t+12>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=s[e+12>>2];s[t+4>>2]=u+1;c=n;return}function FN(e){e=e|0;var t=0;t=c;IN(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function IN(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,f=0,l=0;t=c;s[e>>2]=19496;n=s[e+56>>2]|0;if((n|0)!=0){if((r[e+60>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+56>>2]=0}r[e+60>>0]=1;s[e+56>>2]=0;s[e+48>>2]=0;s[e+52>>2]=0;i=s[e+28>>2]|0;if((i|0)>0){o=0;do{u=s[e+36>>2]|0;l=u+(o*36|0)+4|0;f=u+(o*36|0)+12|0;n=s[f>>2]|0;a=u+(o*36|0)+16|0;if((n|0)!=0){if((r[a>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[f>>2]=0}r[a>>0]=1;s[f>>2]=0;s[l>>2]=0;s[u+(o*36|0)+8>>2]=0;o=o+1|0}while((o|0)!=(i|0))}n=s[e+36>>2]|0;if((n|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;l=e+12|0;s[l>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;l=e+12|0;s[l>>2]=0;c=t;return}function qN(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,l=0;t=c;n=s[e+28>>2]|0;if((n|0)<=0){e=0;do e=e+1|0;while((e|0)<8);n=1;c=t;return n|0}r=s[e+36>>2]|0;a=0;u=0;o=0;i=0;e:while(1){switch(i|0){case 2:{o=+f[e+88>>2]+ +f[e+72>>2];u=+f[e+68>>2]- +f[e+84>>2];a=+f[e+80>>2]+ +f[e+64>>2];break};case 6:{o=+f[e+88>>2]+ +f[e+72>>2];u=+f[e+68>>2]- +f[e+84>>2];a=+f[e+64>>2]- +f[e+80>>2];break};case 1:{o=+f[e+72>>2]- +f[e+88>>2];u=+f[e+84>>2]+ +f[e+68>>2];a=+f[e+80>>2]+ +f[e+64>>2];break};case 5:{o=+f[e+72>>2]- +f[e+88>>2];u=+f[e+84>>2]+ +f[e+68>>2];a=+f[e+64>>2]- +f[e+80>>2];break};case 4:{o=+f[e+88>>2]+ +f[e+72>>2];u=+f[e+84>>2]+ +f[e+68>>2];a=+f[e+64>>2]- +f[e+80>>2];break};case 0:{o=+f[e+88>>2]+ +f[e+72>>2];u=+f[e+84>>2]+ +f[e+68>>2];a=+f[e+80>>2]+ +f[e+64>>2];break};case 3:{o=+f[e+72>>2]- +f[e+88>>2];u=+f[e+68>>2]- +f[e+84>>2];a=+f[e+80>>2]+ +f[e+64>>2];break};case 7:{o=+f[e+72>>2]- +f[e+88>>2];u=+f[e+68>>2]- +f[e+84>>2];a=+f[e+64>>2]- +f[e+80>>2];break};default:{}}l=0;do{if(+f[r+(l*36|0)+32>>2]+(a*+f[r+(l*36|0)+20>>2]+u*+f[r+(l*36|0)+24>>2]+o*+f[r+(l*36|0)+28>>2])>0){n=0;e=17;break e}l=l+1|0}while((l|0)<(n|0));i=i+1|0;if((i|0)>=8){n=1;e=17;break}}if((e|0)==17){c=t;return n|0}return 0}function RN(e,t,n,r,i,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;a=c;c=c+16|0;f[r>>2]=3.4028234663852886e38;f[i>>2]=-3.4028234663852886e38;h=s[e+8>>2]|0;if((h|0)>0){p=0;do{y=s[e+16>>2]|0;g=+f[y+(p<<4)>>2];m=+f[y+(p<<4)+4>>2];l=+f[y+(p<<4)+8>>2];v=g*+f[t>>2]+m*+f[t+4>>2]+l*+f[t+8>>2]+ +f[t+48>>2];d=g*+f[t+16>>2]+m*+f[t+20>>2]+l*+f[t+24>>2]+ +f[t+52>>2];l=g*+f[t+32>>2]+m*+f[t+36>>2]+l*+f[t+40>>2]+ +f[t+56>>2];m=v*+f[n>>2]+d*+f[n+4>>2]+l*+f[n+8>>2];if(m<+f[r>>2]){f[r>>2]=m;f[o>>2]=v;f[o+4>>2]=d;f[o+8>>2]=l;f[o+12>>2]=0}if(m>+f[i>>2]){f[i>>2]=m;f[u>>2]=v;f[u+4>>2]=d;f[u+8>>2]=l;f[u+12>>2]=0}p=p+1|0}while((p|0)!=(h|0));d=+f[i>>2]}else d=-3.4028234663852886e38;l=+f[r>>2];if(!(l>d)){c=a;return}f[r>>2]=d;f[i>>2]=l;s[a+0>>2]=s[o+0>>2];s[a+4>>2]=s[o+4>>2];s[a+8>>2]=s[o+8>>2];s[a+12>>2]=s[o+12>>2];s[o+0>>2]=s[u+0>>2];s[o+4>>2]=s[u+4>>2];s[o+8>>2]=s[u+8>>2];s[o+12>>2]=s[u+12>>2];s[u+0>>2]=s[a+0>>2];s[u+4>>2]=s[a+4>>2];s[u+8>>2]=s[a+8>>2];s[u+12>>2]=s[a+12>>2];c=a;return}function UN(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;i=c;c=c+176|0;s[e+348>>2]=e+220;s[e+352>>2]=e+252;s[e+356>>2]=e+284;s[e+360>>2]=e+316;s[e+364>>2]=4;s[e+368>>2]=0;s[e+376>>2]=0;T=s[t+4>>2]|0;s[e>>2]=s[t>>2];s[e+4>>2]=T;s[e+8>>2]=s[t+8>>2];s[e+12>>2]=s[t+12>>2];s[e+16>>2]=s[t+16>>2];s[e+20>>2]=s[t+20>>2];s[e+24>>2]=s[t+24>>2];s[e+28>>2]=s[t+28>>2];s[e+32>>2]=s[t+32>>2];s[e+36>>2]=s[t+36>>2];s[e+40>>2]=s[t+40>>2];s[e+44>>2]=s[t+44>>2];s[e+48>>2]=s[t+48>>2];s[e+52>>2]=s[t+52>>2];s[e+56>>2]=s[t+56>>2];s[e+60>>2]=s[t+60>>2];s[e+64>>2]=s[t+64>>2];s[e+68>>2]=s[t+68>>2];s[e+72>>2]=s[t+72>>2];s[e+76>>2]=s[t+76>>2];s[e+80>>2]=s[t+80>>2];s[e+84>>2]=s[t+84>>2];s[e+88>>2]=s[t+88>>2];s[e+92>>2]=s[t+92>>2];s[e+96>>2]=s[t+96>>2];s[e+100>>2]=s[t+100>>2];s[e+104>>2]=s[t+104>>2];s[e+108>>2]=s[t+108>>2];s[e+112>>2]=s[t+112>>2];s[e+116>>2]=s[t+116>>2];T=o[t+120>>0]|o[t+121>>0]<<8|o[t+122>>0]<<16|o[t+123>>0]<<24;N=o[t+124>>0]|o[t+125>>0]<<8|o[t+126>>0]<<16|o[t+127>>0]<<24;r[e+120>>0]=T;r[e+121>>0]=T>>8;r[e+122>>0]=T>>16;r[e+123>>0]=T>>24;r[e+124>>0]=N;r[e+125>>0]=N>>8;r[e+126>>0]=N>>16;r[e+127>>0]=N>>24;f[e+144>>2]=0;s[e+180>>2]=0;s[e+128>>2]=s[n+0>>2];s[e+132>>2]=s[n+4>>2];s[e+136>>2]=s[n+8>>2];s[e+140>>2]=s[n+12>>2];y=+f[e+128>>2];b=+f[e+132>>2];p=+f[e+136>>2];if(y*y+b*b+p*p>0){E=-y;h=-b;w=-p}else{E=1;h=0;w=0}f[e+164>>2]=0;s[e+364>>2]=3;s[e+148>>2]=e+316;s[e+180>>2]=1;XN(e,E,h,w,e+316|0);f[e+164>>2]=1;t=(s[e+148>>2]|0)+16|0;s[e+128>>2]=s[t+0>>2];s[e+132>>2]=s[t+4>>2];s[e+136>>2]=s[t+8>>2];s[e+140>>2]=s[t+12>>2];s[i+72>>2]=s[t+0>>2];s[i+76>>2]=s[t+4>>2];s[i+80>>2]=s[t+8>>2];s[i+84>>2]=s[t+12>>2];s[i+56>>2]=s[t+0>>2];s[i+60>>2]=s[t+4>>2];s[i+64>>2]=s[t+8>>2];s[i+68>>2]=s[t+12>>2];s[i+40>>2]=s[t+0>>2];s[i+44>>2]=s[t+4>>2];s[i+48>>2]=s[t+8>>2];s[i+52>>2]=s[t+12>>2];s[i+24>>2]=s[t+0>>2];s[i+28>>2]=s[t+4>>2];s[i+32>>2]=s[t+8>>2];s[i+36>>2]=s[t+12>>2];h=0;t=1;n=1;C=y*y+b*b+p*p;e:while(1){l=s[e+368>>2]|0;w=+f[e+128>>2];b=+f[e+132>>2];y=+f[e+136>>2];p=+X(+(w*w+b*b+y*y));if(p<9999999747378752e-20){a=5;break}f[e+(l*36|0)+(s[e+(l*36|0)+180>>2]<<2)+164>>2]=0;d=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=d;s[e+(l*36|0)+(s[e+(l*36|0)+180>>2]<<2)+148>>2]=s[e+(d<<2)+348>>2];d=s[e+(l*36|0)+180>>2]|0;s[e+(l*36|0)+180>>2]=d+1;XN(e,-w,-b,-y,s[e+(l*36|0)+(d<<2)+148>>2]|0);d=s[e+(l*36|0)+180>>2]|0;m=s[e+(l*36|0)+(d+ -1<<2)+148>>2]|0;y=+f[m+16>>2];w=+f[m+20>>2];b=+f[m+24>>2];v=0;do{E=y- +f[i+24+(v<<4)>>2];S=w- +f[i+24+(v<<4)+4>>2];x=b- +f[i+24+(v<<4)+8>>2];v=v+1|0;if(E*E+S*S+x*x<9999999747378752e-20){a=9;break e}}while(v>>>0<4);N=i+24+(t<<4)|0;s[N+0>>2]=s[m+16>>2];s[N+4>>2]=s[m+20>>2];s[N+8>>2]=s[m+24>>2];s[N+12>>2]=s[m+28>>2];x=(+f[e+128>>2]*y+ +f[e+132>>2]*w+ +f[e+136>>2]*b)/p;h=x>h?x:h;if(p-h-p*9999999747378752e-20<=0){a=11;break}s[i>>2]=0;if((d|0)==4){m=s[e+(l*36|0)+148>>2]|0;g=s[e+(l*36|0)+152>>2]|0;v=s[e+(l*36|0)+156>>2]|0;d=s[e+(l*36|0)+160>>2]|0;s[i+152>>2]=m+16;s[i+156>>2]=g+16;s[i+160>>2]=v+16;s[i+164>>2]=d+16;w=+f[m+16>>2];E=+f[d+16>>2];y=+f[m+20>>2];S=+f[d+20>>2];b=+f[m+24>>2];x=+f[d+24>>2];f[i+104>>2]=w-E;f[i+108>>2]=y-S;f[i+112>>2]=b-x;f[i+116>>2]=0;L=+f[g+16>>2];O=+f[g+20>>2];C=+f[g+24>>2];f[i+120>>2]=L-E;f[i+124>>2]=O-S;f[i+128>>2]=C-x;f[i+132>>2]=0;k=+f[v+16>>2];M=+f[v+20>>2];A=+f[v+24>>2];f[i+136>>2]=k-E;f[i+140>>2]=M-S;f[i+144>>2]=A-x;f[i+148>>2]=0;p=(y-S)*(C-x)*(k-E)+(b-x)*(L-E)*(M-S)-(M-S)*(C-x)*(w-E)-(y-S)*(L-E)*(A-x)+(A-x)*(w-E)*(O-S)-(k-E)*(b-x)*(O-S);if(!(!(p*(b*((L-k)*(y-O)-(O-M)*(w-L))+(w*((O-M)*(b-C)-(C-A)*(y-O))+y*((C-A)*(w-L)-(L-k)*(b-C))))<=0)|(p!=p|0!=0|p==0))){s[i+92>>2]=0;s[i+96>>2]=0;s[i+100>>2]=0;s[i+88>>2]=0;y=y-S;b=b-x;w=w-E;T=0;C=-1;while(1){N=s[19552+(T<<2)>>2]|0;A=+f[i+104+(N<<4)+8>>2];O=+f[i+104+(N<<4)+4>>2];M=+f[i+104+(N<<4)>>2];if(p*((y*A-b*O)*E+S*(b*M-A*w)+(O*w-y*M)*x)>0?(u=+KN(s[i+152+(T<<2)>>2]|0,s[i+152+(N<<2)>>2]|0,d+16|0,i+92|0,i+88|0),C<0|u<C):0){_=s[i+88>>2]|0;s[i>>2]=((_&2|0)==0?0:1<<N)+(_<<1&8)+((_&1|0)==0?0:1<<T);f[i+8+(T<<2)>>2]=+f[i+92>>2];f[i+8+(N<<2)>>2]=+f[i+96>>2];f[i+8+(s[19552+(N<<2)>>2]<<2)>>2]=0;f[i+20>>2]=+f[i+100>>2];C=u}T=T+1|0;if((T|0)==3)break;y=+f[i+104+(T<<4)+4>>2];b=+f[i+104+(T<<4)+8>>2];w=+f[i+104+(T<<4)>>2];E=+f[d+16>>2];S=+f[d+20>>2];x=+f[d+24>>2]}if(C<0){s[i>>2]=15;C=+f[v+20>>2];y=+f[g+24>>2];O=+f[d+16>>2];S=+f[v+24>>2];b=+f[g+16>>2];E=+f[d+20>>2];k=+f[v+16>>2];L=+f[d+24>>2];w=+f[g+20>>2];f[i+8>>2]=(C*y*O+S*b*E-E*y*k-C*b*L+L*k*w-O*S*w)/p;x=+f[m+20>>2];M=+f[m+24>>2];A=+f[m+16>>2];f[i+12>>2]=(x*S*O+M*k*E-E*S*A-x*k*L+L*A*C-O*M*C)/p;f[i+16>>2]=(w*M*O+y*A*E-E*M*b-w*A*L+L*b*x-O*y*x)/p;f[i+20>>2]=1-((w*M*O+y*A*E-E*M*b-w*A*L+L*b*x-O*y*x)/p+((C*y*O+S*b*E-E*y*k-C*b*L+L*k*w-O*S*w)/p+(x*S*O+M*k*E-E*S*A-x*k*L+L*A*C-O*M*C)/p));C=0}}else C=-1}else if((d|0)==3)C=+KN((s[e+(l*36|0)+148>>2]|0)+16|0,(s[e+(l*36|0)+152>>2]|0)+16|0,(s[e+(l*36|0)+156>>2]|0)+16|0,i+8|0,i);else if((d|0)==2)C=+JN((s[e+(l*36|0)+148>>2]|0)+16|0,(s[e+(l*36|0)+152>>2]|0)+16|0,i+8|0,i);if(!(C>=0)){a=32;break}s[e+((1-l|0)*36|0)+180>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;s[e+136>>2]=0;s[e+140>>2]=0;s[e+368>>2]=1-l;T=s[e+(l*36|0)+180>>2]|0;d=s[i>>2]|0;if((T|0)!=0){g=0;do{m=e+(l*36|0)+(g<<2)+148|0;v=s[m>>2]|0;if((d&1<<g|0)==0){_=s[e+364>>2]|0;s[e+364>>2]=_+1;s[e+(_<<2)+348>>2]=v}else{s[e+((1-l|0)*36|0)+(s[e+((1-l|0)*36|0)+180>>2]<<2)+148>>2]=v;A=+f[i+8+(g<<2)>>2];_=s[e+((1-l|0)*36|0)+180>>2]|0;s[e+((1-l|0)*36|0)+180>>2]=_+1;f[e+((1-l|0)*36|0)+(_<<2)+164>>2]=A;_=s[m>>2]|0;O=A*+f[_+20>>2];M=A*+f[_+24>>2];f[e+128>>2]=+f[_+16>>2]*A+ +f[e+128>>2];f[e+132>>2]=O+ +f[e+132>>2];f[e+136>>2]=M+ +f[e+136>>2]}g=g+1|0}while((g|0)!=(T|0))}if((d|0)==15)s[e+376>>2]=1;if(!(n>>>0<128)){a=34;break}if((s[e+376>>2]|0)!=0)break;t=t+1&3;n=n+1|0}if((a|0)==5)s[e+376>>2]=1;else if((a|0)==9){_=s[e+368>>2]|0;N=(s[e+(_*36|0)+180>>2]|0)+ -1|0;s[e+(_*36|0)+180>>2]=N;N=s[e+(_*36|0)+(N<<2)+148>>2]|0;_=s[e+364>>2]|0;s[e+364>>2]=_+1;s[e+(_<<2)+348>>2]=N}else if((a|0)==11){_=s[e+368>>2]|0;N=(s[e+(_*36|0)+180>>2]|0)+ -1|0;s[e+(_*36|0)+180>>2]=N;N=s[e+(_*36|0)+(N<<2)+148>>2]|0;_=s[e+364>>2]|0;s[e+364>>2]=_+1;s[e+(_<<2)+348>>2]=N}else if((a|0)==32){_=s[e+368>>2]|0;N=(s[e+(_*36|0)+180>>2]|0)+ -1|0;s[e+(_*36|0)+180>>2]=N;N=s[e+(_*36|0)+(N<<2)+148>>2]|0;_=s[e+364>>2]|0;s[e+364>>2]=_+1;s[e+(_<<2)+348>>2]=N}else if((a|0)==34)s[e+376>>2]=2;s[e+372>>2]=e+((s[e+368>>2]|0)*36|0)+148;a=s[e+376>>2]|0;if((a|0)==1){f[e+144>>2]=0;c=i;return a|0}else if((a|0)==0){A=+f[e+128>>2];O=+f[e+132>>2];M=+f[e+136>>2];f[e+144>>2]=+X(+(A*A+O*O+M*M));c=i;return a|0}else{c=i;return a|0}return 0}function zN(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;t=c;c=c+32|0;n=s[e+372>>2]|0;h=s[n+32>>2]|0;e:do if((h|0)==2){p=s[n+4>>2]|0;n=s[n>>2]|0;o=+f[p+16>>2]- +f[n+16>>2];r=+f[p+20>>2]- +f[n+20>>2];i=+f[p+24>>2]- +f[n+24>>2];n=0;while(1){p=t+(n<<2)|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;f[p>>2]=1;u=+f[t+8>>2];a=+f[t+4>>2];l=+f[t>>2];if((r*u-i*a)*(r*u-i*a)+(i*l-o*u)*(i*l-o*u)+(o*a-r*l)*(o*a-r*l)>0){h=s[e+372>>2]|0;f[h+(s[h+32>>2]<<2)+16>>2]=0;p=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=p;s[h+(s[h+32>>2]<<2)>>2]=s[e+(p<<2)+348>>2];p=s[h+32>>2]|0;s[h+32>>2]=p+1;XN(e,r*u-i*a,i*l-o*u,o*a-r*l,s[h+(p<<2)>>2]|0);if(zN(e)|0){n=1;e=19;break}h=s[e+372>>2]|0;p=(s[h+32>>2]|0)+ -1|0;s[h+32>>2]=p;p=s[h+(p<<2)>>2]|0;h=s[e+364>>2]|0;s[e+364>>2]=h+1;s[e+(h<<2)+348>>2]=p;h=s[e+372>>2]|0;f[h+(s[h+32>>2]<<2)+16>>2]=0;p=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=p;s[h+(s[h+32>>2]<<2)>>2]=s[e+(p<<2)+348>>2];p=s[h+32>>2]|0;s[h+32>>2]=p+1;XN(e,-(r*u-i*a),-(i*l-o*u),-(o*a-r*l),s[h+(p<<2)>>2]|0);if(zN(e)|0){n=1;e=19;break}p=s[e+372>>2]|0;h=(s[p+32>>2]|0)+ -1|0;s[p+32>>2]=h;h=s[p+(h<<2)>>2]|0;p=s[e+364>>2]|0;s[e+364>>2]=p+1;s[e+(p<<2)+348>>2]=h}n=n+1|0;if(!(n>>>0<3))break e}if((e|0)==19){c=t;return n|0}}else if((h|0)==4){p=s[n>>2]|0;h=s[n+12>>2]|0;l=+f[h+16>>2];m=+f[p+16>>2]-l;d=+f[h+20>>2];r=+f[p+20>>2]-d;o=+f[h+24>>2];u=+f[p+24>>2]-o;p=s[n+4>>2]|0;i=+f[p+16>>2]-l;a=+f[p+20>>2]-d;v=+f[p+24>>2]-o;p=s[n+8>>2]|0;l=+f[p+16>>2]-l;d=+f[p+20>>2]-d;o=+f[p+24>>2]-o;if(!((0!=0?1:m*a*o+(r*v*l+u*i*d-m*v*d-r*i*o)-u*a*l!=m*a*o+(r*v*l+u*i*d-m*v*d-r*i*o)-u*a*l)|m*a*o+(r*v*l+u*i*d-m*v*d-r*i*o)-u*a*l==0)){p=1;c=t;return p|0}}else if((h|0)==3){p=s[n+4>>2]|0;h=s[n>>2]|0;i=+f[h+16>>2];r=+f[p+16>>2]-i;l=+f[h+20>>2];o=+f[p+20>>2]-l;u=+f[h+24>>2];a=+f[p+24>>2]-u;p=s[n+8>>2]|0;i=+f[p+16>>2]-i;l=+f[p+20>>2]-l;u=+f[p+24>>2]-u;if((o*u-a*l)*(o*u-a*l)+(a*i-r*u)*(a*i-r*u)+(r*l-o*i)*(r*l-o*i)>0){f[n+28>>2]=0;p=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=p;s[n+(s[n+32>>2]<<2)>>2]=s[e+(p<<2)+348>>2];p=s[n+32>>2]|0;s[n+32>>2]=p+1;XN(e,o*u-a*l,a*i-r*u,r*l-o*i,s[n+(p<<2)>>2]|0);if(zN(e)|0){p=1;c=t;return p|0}h=s[e+372>>2]|0;p=(s[h+32>>2]|0)+ -1|0;s[h+32>>2]=p;p=s[h+(p<<2)>>2]|0;h=s[e+364>>2]|0;s[e+364>>2]=h+1;s[e+(h<<2)+348>>2]=p;h=s[e+372>>2]|0;f[h+(s[h+32>>2]<<2)+16>>2]=0;p=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=p;s[h+(s[h+32>>2]<<2)>>2]=s[e+(p<<2)+348>>2];p=s[h+32>>2]|0;s[h+32>>2]=p+1;XN(e,-(o*u-a*l),-(a*i-r*u),-(r*l-o*i),s[h+(p<<2)>>2]|0);if(zN(e)|0){p=1;c=t;return p|0}else{p=s[e+372>>2]|0;h=(s[p+32>>2]|0)+ -1|0;s[p+32>>2]=h;h=s[p+(h<<2)>>2]|0;p=s[e+364>>2]|0;s[e+364>>2]=p+1;s[e+(p<<2)+348>>2]=h;break}}}else if((h|0)==1){p=1;h=0;while(1){g=t+16+(h<<2)|0;s[t+16>>2]=0;s[t+20>>2]=0;s[t+24>>2]=0;s[t+28>>2]=0;f[g>>2]=1;g=n+32|0;f[n+(p<<2)+16>>2]=0;p=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=p;s[n+(s[g>>2]<<2)>>2]=s[e+(p<<2)+348>>2];p=s[g>>2]|0;s[g>>2]=p+1;r=+f[t+16>>2];i=+f[t+20>>2];o=+f[t+24>>2];XN(e,r,i,o,s[n+(p<<2)>>2]|0);if(zN(e)|0){n=1;e=19;break}p=s[e+372>>2]|0;g=(s[p+32>>2]|0)+ -1|0;s[p+32>>2]=g;g=s[p+(g<<2)>>2]|0;p=s[e+364>>2]|0;s[e+364>>2]=p+1;s[e+(p<<2)+348>>2]=g;p=s[e+372>>2]|0;f[p+(s[p+32>>2]<<2)+16>>2]=0;g=(s[e+364>>2]|0)+ -1|0;s[e+364>>2]=g;s[p+(s[p+32>>2]<<2)>>2]=s[e+(g<<2)+348>>2];g=s[p+32>>2]|0;s[p+32>>2]=g+1;XN(e,-r,-i,-o,s[p+(g<<2)>>2]|0);if(zN(e)|0){n=1;e=19;break}g=s[e+372>>2]|0;p=(s[g+32>>2]|0)+ -1|0;s[g+32>>2]=p;p=s[g+(p<<2)>>2]|0;g=s[e+364>>2]|0;s[e+364>>2]=g+1;s[e+(g<<2)+348>>2]=p;h=h+1|0;if(!(h>>>0<3))break e;n=s[e+372>>2]|0;p=s[n+32>>2]|0}if((e|0)==19){c=t;return n|0}}while(0);g=0;c=t;return g|0}function WN(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;a=c;u=s[e+9288>>2]|0;if((u|0)==0){s[e>>2]=5;y=0;c=a;return y|0}y=s[u+48>>2]|0;if((y|0)!=0)s[y+44>>2]=s[u+44>>2];y=s[u+44>>2]|0;if((y|0)!=0)s[y+48>>2]=s[u+48>>2];if((s[e+9288>>2]|0)==(u|0))s[e+9288>>2]=s[u+48>>2];s[e+9292>>2]=(s[e+9292>>2]|0)+ -1;s[u+44>>2]=0;s[u+48>>2]=s[e+9280>>2];y=s[e+9280>>2]|0;if((y|0)!=0)s[y+44>>2]=u;s[e+9280>>2]=u;s[e+9284>>2]=(s[e+9284>>2]|0)+1;r[u+55>>0]=0;s[u+20>>2]=t;s[u+24>>2]=n;s[u+28>>2]=i;v=+f[t+16>>2];p=+f[n+16>>2]-v;g=+f[t+20>>2];m=+f[n+20>>2]-g;h=+f[t+24>>2];l=+f[n+24>>2]-h;v=+f[i+16>>2]-v;g=+f[i+20>>2]-g;h=+f[i+24>>2]-h;f[u>>2]=m*h-l*g;f[u+4>>2]=l*v-p*h;f[u+8>>2]=p*g-m*v;f[u+12>>2]=0;d=+X(+((m*h-l*g)*(m*h-l*g)+(l*v-p*h)*(l*v-p*h)+(p*g-m*v)*(p*g-m*v)));do if(d>9999999747378752e-20){if((!($N(m*h-l*g,l*v-p*h,p*g-m*v,+f[t+16>>2],+f[t+20>>2],+f[t+24>>2],+f[n+16>>2],+f[n+20>>2],+f[n+24>>2],u+16|0)|0)?!($N(+f[u>>2],+f[u+4>>2],+f[u+8>>2],+f[n+16>>2],+f[n+20>>2],+f[n+24>>2],+f[i+16>>2],+f[i+20>>2],+f[i+24>>2],u+16|0)|0):0)?!($N(+f[u>>2],+f[u+4>>2],+f[u+8>>2],+f[i+16>>2],+f[i+20>>2],+f[i+24>>2],+f[t+16>>2],+f[t+20>>2],+f[t+24>>2],u+16|0)|0):0)f[u+16>>2]=(+f[t+16>>2]*+f[u>>2]+ +f[t+20>>2]*+f[u+4>>2]+ +f[t+24>>2]*+f[u+8>>2])/d;f[u>>2]=1/d*+f[u>>2];f[u+4>>2]=1/d*+f[u+4>>2];f[u+8>>2]=1/d*+f[u+8>>2];if(o){y=u;c=a;return y|0}if(!(+f[u+16>>2]>=-9999999747378752e-21)){s[e>>2]=3;break}else{y=u;c=a;return y|0}}else s[e>>2]=2;while(0);o=s[u+48>>2]|0;if((o|0)!=0)s[o+44>>2]=s[u+44>>2];o=s[u+44>>2]|0;if((o|0)!=0)s[o+48>>2]=s[u+48>>2];if((s[e+9280>>2]|0)==(u|0))s[e+9280>>2]=s[u+48>>2];s[e+9284>>2]=(s[e+9284>>2]|0)+ -1;s[u+44>>2]=0;s[u+48>>2]=s[e+9288>>2];o=s[e+9288>>2]|0;if((o|0)!=0)s[o+44>>2]=u;s[e+9288>>2]=u;s[e+9292>>2]=(s[e+9292>>2]|0)+1;y=0;c=a;return y|0}function XN(e,t,n,r,i){e=e|0;t=+t;n=+n;r=+r;i=i|0;var u=0,a=0,l=0,h=0,p=0,d=0;u=c;c=c+48|0;p=1/+X(+(t*t+n*n+r*r));f[i>>2]=p*t;f[i+4>>2]=p*n;f[i+8>>2]=p*r;f[i+12>>2]=0;l=o[e+120>>0]|o[e+121>>0]<<8|o[e+122>>0]<<16|o[e+123>>0]<<24;h=o[e+124>>0]|o[e+125>>0]<<8|o[e+126>>0]<<16|o[e+127>>0]<<24;a=(s[e>>2]|0)+(h>>1)|0;if((h&1|0)!=0)l=s[(s[a>>2]|0)+l>>2]|0;WD[l&127](u,a,i);n=-+f[i>>2];r=-+f[i+4>>2];t=-+f[i+8>>2];l=o[e+120>>0]|o[e+121>>0]<<8|o[e+122>>0]<<16|o[e+123>>0]<<24;h=o[e+124>>0]|o[e+125>>0]<<8|o[e+126>>0]<<16|o[e+127>>0]<<24;a=(s[e+4>>2]|0)+(h>>1)|0;if((h&1|0)!=0)l=s[(s[a>>2]|0)+l>>2]|0;p=+f[e+24>>2]*n+ +f[e+28>>2]*r+ +f[e+32>>2]*t;d=+f[e+40>>2]*n+ +f[e+44>>2]*r+ +f[e+48>>2]*t;f[u+16>>2]=+f[e+8>>2]*n+ +f[e+12>>2]*r+ +f[e+16>>2]*t;f[u+20>>2]=p;f[u+24>>2]=d;f[u+28>>2]=0;WD[l&127](u+32|0,a,u+16|0);d=+f[u+32>>2];n=+f[u+36>>2];r=+f[u+40>>2];t=+f[u+4>>2]-(d*+f[e+72>>2]+n*+f[e+76>>2]+r*+f[e+80>>2]+ +f[e+108>>2]);p=+f[u+8>>2]-(d*+f[e+88>>2]+n*+f[e+92>>2]+r*+f[e+96>>2]+ +f[e+112>>2]);f[i+16>>2]=+f[u>>2]-(d*+f[e+56>>2]+n*+f[e+60>>2]+r*+f[e+64>>2]+ +f[e+104>>2]);f[i+20>>2]=t;f[i+24>>2]=p;f[i+28>>2]=0;c=u;return}function VN(e,t,n,i,u,a){e=e|0;t=t|0;n=n|0;i=i|0;u=u|0;a=a|0;var l=0,h=0;l=c;if((o[i+55>>0]|0|0)==(t|0)){u=0;c=l;return u|0}h=s[19552+(u<<2)>>2]|0;if(+f[i>>2]*+f[n+16>>2]+ +f[i+4>>2]*+f[n+20>>2]+ +f[i+8>>2]*+f[n+24>>2]- +f[i+16>>2]<-9999999747378752e-21){e=WN(e,s[i+(h<<2)+20>>2]|0,s[i+(u<<2)+20>>2]|0,n,0)|0;if((e|0)==0){u=0;c=l;return u|0}r[e+52>>0]=u;s[e+32>>2]=i;r[i+u+52>>0]=0;s[i+(u<<2)+32>>2]=e;i=s[a>>2]|0;if((i|0)==0)s[a+4>>2]=e;else{r[i+53>>0]=2;s[i+36>>2]=e;r[e+54>>0]=1;s[e+40>>2]=i}s[a>>2]=e;s[a+8>>2]=(s[a+8>>2]|0)+1;u=1;c=l;return u|0}u=s[19536+(u<<2)>>2]|0;r[i+55>>0]=t;if(!(VN(e,t,n,s[i+(h<<2)+32>>2]|0,o[i+h+52>>0]|0,a)|0)){u=0;c=l;return u|0}if(!(VN(e,t,n,s[i+(u<<2)+32>>2]|0,o[i+u+52>>0]|0,a)|0)){u=0;c=l;return u|0}a=s[i+48>>2]|0;if((a|0)!=0)s[a+44>>2]=s[i+44>>2];a=s[i+44>>2]|0;if((a|0)!=0)s[a+48>>2]=s[i+48>>2];if((s[e+9280>>2]|0)==(i|0))s[e+9280>>2]=s[i+48>>2];s[e+9284>>2]=(s[e+9284>>2]|0)+ -1;s[i+44>>2]=0;s[i+48>>2]=s[e+9288>>2];a=s[e+9288>>2]|0;if((a|0)!=0)s[a+44>>2]=i;s[e+9288>>2]=i;s[e+9292>>2]=(s[e+9292>>2]|0)+1;u=1;c=l;return u|0}function $N(e,t,n,r,i,s,o,u,a,l){e=+e;t=+t;n=+n;r=+r;i=+i;s=+s;o=+o;u=+u;a=+a;l=l|0;var h=0;h=c;if(!(((o-r)*t-(u-i)*e)*s+(((u-i)*n-(a-s)*t)*r+((a-s)*e-(o-r)*n)*i)<0)){l=0;c=h;return l|0}if((o-r)*r+(u-i)*i+(a-s)*s>0){f[l>>2]=+X(+(r*r+i*i+s*s));l=1;c=h;return l|0}if((o-r)*o+(u-i)*u+(a-s)*a<0){f[l>>2]=+X(+(o*o+u*u+a*a));l=1;c=h;return l|0}else{t=((o*o+u*u+a*a)*(r*r+i*i+s*s)-(o*r+u*i+a*s)*(o*r+u*i+a*s))/((o-r)*(o-r)+(u-i)*(u-i)+(a-s)*(a-s));f[l>>2]=+X(+(t>0?t:0));l=1;c=h;return l|0}return 0}function JN(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0;a=c;l=+f[e>>2];i=+f[t>>2]-l;h=+f[e+4>>2];o=+f[t+4>>2]-h;p=+f[e+8>>2];u=+f[t+8>>2]-p;if(!(i*i+o*o+u*u>0)){p=-1;c=a;return+p}l=-(l*i+h*o+p*u)/(i*i+o*o+u*u);if(l>=1){f[n>>2]=0;f[n+4>>2]=1;s[r>>2]=2;l=+f[t>>2];h=+f[t+4>>2];p=+f[t+8>>2];p=l*l+h*h+p*p;c=a;return+p}if(!(l<=0)){f[n+4>>2]=l;f[n>>2]=1-l;s[r>>2]=3;i=i*l+ +f[e>>2];h=o*l+ +f[e+4>>2];p=u*l+ +f[e+8>>2];p=i*i+h*h+p*p;c=a;return+p}else{f[n>>2]=1;f[n+4>>2]=0;s[r>>2]=1;l=+f[e>>2];h=+f[e+4>>2];p=+f[e+8>>2];p=l*l+h*h+p*p;c=a;return+p}return 0}function KN(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0;w=c;c=c+80|0;s[w+64>>2]=e;s[w+68>>2]=t;s[w+72>>2]=n;g=+f[e>>2];l=+f[t>>2];y=+f[e+4>>2];p=+f[t+4>>2];b=+f[e+8>>2];v=+f[t+8>>2];f[w+16>>2]=g-l;f[w+20>>2]=y-p;f[w+24>>2]=b-v;f[w+28>>2]=0;h=+f[n>>2];d=+f[n+4>>2];m=+f[n+8>>2];f[w+32>>2]=l-h;f[w+36>>2]=p-d;f[w+40>>2]=v-m;f[w+44>>2]=0;f[w+48>>2]=h-g;f[w+52>>2]=d-y;f[w+56>>2]=m-b;f[w+60>>2]=0;u=(y-p)*(v-m)-(b-v)*(p-d);a=(b-v)*(l-h)-(v-m)*(g-l);o=(p-d)*(g-l)-(y-p)*(l-h);if(!(o*o+(u*u+a*a)>0)){M=-1;c=w;return+M}s[w>>2]=0;s[w+4>>2]=0;s[w+8>>2]=0;k=y-p;A=b-v;L=g-l;x=g;T=y;C=b;N=e;O=0;M=-1;while(1){if(x*(o*k-a*A)+T*(u*A-o*L)+(a*L-u*k)*C>0?(E=s[19552+(O<<2)>>2]|0,S=+JN(N,s[w+64+(E<<2)>>2]|0,w,w+8|0),M<0|S<M):0){N=s[w+8>>2]|0;s[i>>2]=((N&1|0)==0?0:1<<O)+((N&2|0)==0?0:1<<E);f[r+(O<<2)>>2]=+f[w>>2];f[r+(E<<2)>>2]=+f[w+4>>2];f[r+(s[19552+(E<<2)>>2]<<2)>>2]=0;M=S}O=O+1|0;if((O|0)==3)break;N=s[w+64+(O<<2)>>2]|0;k=+f[w+16+(O<<4)+4>>2];A=+f[w+16+(O<<4)+8>>2];L=+f[w+16+(O<<4)>>2];x=+f[N>>2];T=+f[N+4>>2];C=+f[N+8>>2]}if(!(M<0)){c=w;return+M}L=+X(+(o*o+(u*u+a*a)));M=(u*+f[e>>2]+a*+f[e+4>>2]+o*+f[e+8>>2])/(o*o+(u*u+a*a));s[i>>2]=7;C=+f[t>>2]-u*M;T=+f[t+4>>2]-a*M;A=+f[t+8>>2]-o*M;A=+X(+((T*(l-h)-C*(p-d))*(T*(l-h)-C*(p-d))+(((p-d)*A-T*(v-m))*((p-d)*A-T*(v-m))+(C*(v-m)-A*(l-h))*(C*(v-m)-A*(l-h)))))/L;f[r>>2]=A;C=+f[n>>2]-u*M;T=+f[n+4>>2]-a*M;k=+f[n+8>>2]-o*M;L=+X(+((T*(h-g)-C*(d-y))*(T*(h-g)-C*(d-y))+(((d-y)*k-T*(m-b))*((d-y)*k-T*(m-b))+(C*(m-b)-k*(h-g))*(C*(m-b)-k*(h-g)))))/L;f[r+4>>2]=L;f[r+8>>2]=1-(L+A);M=o*M*o*M+(u*M*u*M+a*M*a*M);c=w;return+M}function QN(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,f=0,l=0;n=c;i=s[e+12>>2]|0;t=s[e+32>>2]|0;if((t|0)>=(i|0)){c=n;return}if((t|0)<=(i|0)){if((s[e+36>>2]|0)<(i|0)){if((i|0)==0){o=0;a=t}else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}a=s[e+32>>2]|0}if((a|0)>0){u=0;do{f=o+(u<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+40>>2]|0)+(u<<2)>>2];u=u+1|0}while((u|0)!=(a|0))}u=s[e+40>>2]|0;if((u|0)!=0){if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+40>>2]=0}r[e+44>>0]=1;s[e+40>>2]=o;s[e+36>>2]=i}else o=s[e+40>>2]|0;u=t;do{a=o+(u<<2)|0;if((a|0)!=0)s[a>>2]=0;u=u+1|0}while((u|0)!=(i|0))}s[e+32>>2]=i;o=s[e+52>>2]|0;if((o|0)<(i|0)){if((s[e+56>>2]|0)<(i|0)){if((i|0)==0){u=0;a=o}else{s[5004]=(s[5004]|0)+1;u=cM((i<<2|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+52>>2]|0}if((a|0)>0){f=0;do{l=u+(f<<2)|0;if((l|0)!=0)s[l>>2]=s[(s[e+60>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(a|0))}a=s[e+60>>2]|0;if((a|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=u;s[e+56>>2]=i}else u=s[e+60>>2]|0;do{a=u+(o<<2)|0;if((a|0)!=0)s[a>>2]=0;o=o+1|0}while((o|0)!=(i|0))}s[e+52>>2]=i;if((i|0)>0){vM(s[e+40>>2]|0,-1,i<<2|0)|0;vM(s[e+60>>2]|0,-1,i<<2|0)|0}if((t|0)<=0){c=n;return}u=s[e+16>>2]|0;o=s[e+40>>2]|0;i=s[e+60>>2]|0;a=0;do{l=s[u+(a*12|0)+4>>2]<<16|s[u+(a*12|0)>>2];l=(l+~(l<<15)>>10^l+~(l<<15))*9|0;l=o+((((l>>6^l)+~((l>>6^l)<<11)>>16^(l>>6^l)+~((l>>6^l)<<11))&(s[e+12>>2]|0)+ -1)<<2)|0;s[i+(a<<2)>>2]=s[l>>2];s[l>>2]=a;a=a+1|0}while((a|0)!=(t|0));c=n;return}function GN(e){e=e|0;var t=0;t=c;YN(e);hM(e);c=t;return}function YN(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=19600;n=s[e+60>>2]|0;if((n|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;n=s[e+40>>2]|0;if((n|0)!=0){if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+40>>2]=0}r[e+44>>0]=1;s[e+40>>2]=0;s[e+32>>2]=0;s[e+36>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}function ZN(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0;t=c;n=s[e+16>>2]|0;if((n|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;n=s[e+40>>2]|0;if((n|0)!=0){if((r[e+44>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+40>>2]=0}r[e+44>>0]=1;s[e+40>>2]=0;s[e+32>>2]=0;s[e+36>>2]=0;n=s[e+60>>2]|0;if((n|0)!=0){if((r[e+64>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+60>>2]=0}r[e+64>>0]=1;s[e+60>>2]=0;s[e+52>>2]=0;s[e+56>>2]=0;if((s[e+12>>2]|0)>=2){QN(e);c=t;return}s[5004]=(s[5004]|0)+1;n=cM(43)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}i=s[e+8>>2]|0;if((i|0)>0){u=0;do{o=n+(u*12|0)|0;if((o|0)!=0){a=(s[e+16>>2]|0)+(u*12|0)|0;s[o+0>>2]=s[a+0>>2];s[o+4>>2]=s[a+4>>2];s[o+8>>2]=s[a+8>>2]}u=u+1|0}while((u|0)!=(i|0))}i=s[e+16>>2]|0;if((i|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=n;s[e+12>>2]=2;QN(e);c=t;return}function eC(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0;r=c;s[4892]=(s[4892]|0)+1;f=((n<<16|t)+~((n<<16|t)<<15)>>10^(n<<16|t)+~((n<<16|t)<<15))*9|0;o=s[e+40>>2]|0;f=o+(((s[e+12>>2]|0)+ -1&((f>>6^f)+~((f>>6^f)<<11)>>16^(f>>6^f)+~((f>>6^f)<<11)))<<2)|0;l=s[f>>2]|0;if((l|0)==-1){d=0;c=r;return d|0}u=s[e+16>>2]|0;a=l;while(1){if((s[u+(a*12|0)>>2]|0)==(t|0)?(s[u+(a*12|0)+4>>2]|0)==(n|0):0)break;a=s[(s[e+60>>2]|0)+(a<<2)>>2]|0;if((a|0)==-1){e=0;i=22;break}}if((i|0)==22){c=r;return e|0}if((u+(a*12|0)|0)==0){d=0;c=r;return d|0}t=s[u+(a*12|0)+8>>2]|0;a=(a*12|0)/12|0;n=s[e+60>>2]|0;if((l|0)!=(a|0)){while(1){h=n+(l<<2)|0;p=s[h>>2]|0;if((p|0)==(a|0))break;else l=p}p=s[n+(a<<2)>>2]|0;if((l|0)==-1)i=12;else s[h>>2]=p}else{p=s[n+(l<<2)>>2]|0;i=12}if((i|0)==12)s[f>>2]=p;l=(s[e+8>>2]|0)+ -1|0;if((l|0)==(a|0)){s[e+8>>2]=a;d=t;c=r;return d|0}f=s[u+(l*12|0)+4>>2]<<16|s[u+(l*12|0)>>2];f=(f+~(f<<15)>>10^f+~(f<<15))*9|0;f=((f>>6^f)+~((f>>6^f)<<11)>>16^(f>>6^f)+~((f>>6^f)<<11))&(s[e+12>>2]|0)+ -1;p=s[o+(f<<2)>>2]|0;if((p|0)!=(l|0)){while(1){h=n+(p<<2)|0;d=s[h>>2]|0;if((d|0)==(l|0))break;else p=d}n=s[n+(l<<2)>>2]|0;if((p|0)==-1)i=20;else s[h>>2]=n}else{n=s[n+(l<<2)>>2]|0;i=20}if((i|0)==20)s[o+(f<<2)>>2]=n;s[u+(a*12|0)+0>>2]=s[u+(l*12|0)+0>>2];s[u+(a*12|0)+4>>2]=s[u+(l*12|0)+4>>2];s[u+(a*12|0)+8>>2]=s[u+(l*12|0)+8>>2];d=(s[e+40>>2]|0)+(f<<2)|0;s[(s[e+60>>2]|0)+(a<<2)>>2]=s[d>>2];s[d>>2]=a;s[e+8>>2]=(s[e+8>>2]|0)+ -1;d=t;c=r;return d|0}function tC(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0;i=c;s[4894]=(s[4894]|0)+1;u=((n<<16|t)+~((n<<16|t)<<15)>>10^(n<<16|t)+~((n<<16|t)<<15))*9|0;u=(u>>6^u)+~((u>>6^u)<<11)>>16^(u>>6^u)+~((u>>6^u)<<11);o=s[e+12>>2]|0;f=s[(s[e+40>>2]|0)+((o+ -1&u)<<2)>>2]|0;e:do if(!((f|0)==-1)){a=s[e+16>>2]|0;while(1){if((s[a+(f*12|0)>>2]|0)==(t|0)?(s[a+(f*12|0)+4>>2]|0)==(n|0):0)break;f=s[(s[e+60>>2]|0)+(f<<2)>>2]|0;if((f|0)==-1)break e}a=a+(f*12|0)|0;if((a|0)!=0){d=a;c=i;return d|0}}while(0);a=s[e+8>>2]|0;if((a|0)==(o|0)){f=(o|0)==0?1:o<<1;if((o|0)<(f|0)){if((f|0)==0){l=0;d=o}else{s[5004]=(s[5004]|0)+1;l=cM((f*12|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}d=s[e+8>>2]|0}if((d|0)>0){p=0;do{h=l+(p*12|0)|0;if((h|0)!=0){v=(s[e+16>>2]|0)+(p*12|0)|0;s[h+0>>2]=s[v+0>>2];s[h+4>>2]=s[v+4>>2];s[h+8>>2]=s[v+8>>2]}p=p+1|0}while((p|0)!=(d|0))}h=s[e+16>>2]|0;if((h|0)!=0){if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+16>>2]=0}r[e+20>>0]=1;s[e+16>>2]=l;s[e+12>>2]=f;l=s[e+8>>2]|0}else{l=o;f=o}}else{l=a;f=o}s[e+8>>2]=l+1;l=s[e+16>>2]|0;if((o|0)<(f|0)){QN(e);o=(s[e+12>>2]|0)+ -1&u}else o=o+ -1&u;if((l+(a*12|0)|0)==0)t=0;else{s[l+(a*12|0)>>2]=t;s[l+(a*12|0)+4>>2]=n;s[l+(a*12|0)+8>>2]=0;t=l+(a*12|0)|0}s[t+8>>2]=0;v=(s[e+40>>2]|0)+(o<<2)|0;s[(s[e+60>>2]|0)+(a<<2)>>2]=s[v>>2];s[v>>2]=a;v=t;c=i;return v|0}function nC(e){e=e|0;return s[e+16>>2]|0}function rC(e,t,n,r,i,s,o,u,a,l,h){e=e|0;t=t|0;n=+n;r=+r;i=+i;s=+s;o=+o;u=+u;a=a|0;l=l|0;h=+h;var p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0;v=c;d=+f[e>>2]*s+ +f[e+16>>2]*o+ +f[e+32>>2]*u;p=+f[e+4>>2]*s+ +f[e+20>>2]*o+ +f[e+36>>2]*u;g=+f[e+8>>2]*s+ +f[e+24>>2]*o+ +f[e+40>>2]*u;m=+f[t>>2]*s+ +f[t+16>>2]*o+ +f[t+32>>2]*u;y=+f[t+4>>2]*s+ +f[t+20>>2]*o+ +f[t+36>>2]*u;b=+f[t+8>>2]*s+ +f[t+24>>2]*o+ +f[t+40>>2]*u;w=+f[a+80>>2];if(d<0)w=-w;E=+f[a+84>>2];if(p<0)E=-E;S=+f[a+88>>2];if(g<0)S=-S;x=+f[l+80>>2];if(m<0)x=-x;T=+f[l+84>>2];if(y<0)T=-T;N=+f[l+88>>2];if(!(b<0)){C=N;N=d*w;E=p*E;E=N+E;N=g*S;N=E+N;x=m*x;T=y*T;T=x+T;x=b*C;x=T+x;e=a+96|0;T=+f[e>>2];e=N>T;T=e?N:T;e=l+96|0;N=+f[e>>2];e=x>N;N=e?x:N;N=T+N;T=n*s+r*o+i*u+N;N=N-(n*s+r*o+i*u);e=T<N;N=e?T:N;e=!(N>h);c=v;return e|0}k=-N;C=d*w;N=p*E;N=C+N;C=g*S;C=N+C;x=m*x;N=y*T;N=x+N;T=b*k;T=N+T;e=a+96|0;N=+f[e>>2];e=C>N;N=e?C:N;e=l+96|0;C=+f[e>>2];e=T>C;C=e?T:C;C=N+C;N=n*s+r*o+i*u+C;C=C-(n*s+r*o+i*u);e=N<C;C=e?N:C;e=!(C>h);c=v;return e|0}function iC(e,t,n,i,o,u,a){e=e|0;t=t|0;n=n|0;i=i|0;o=+o;u=+u;a=a|0;var l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,X=0,V=0,$=0,J=0,K=0,Q=0,G=0,Y=0,Z=0,et=0,tt=0,nt=0,rt=0;l=c;c=c+64|0;r[l+48>>0]=1;s[l+44>>2]=0;s[l+36>>2]=0;s[l+40>>2]=0;h=s[i+4>>2]|0;if((h|0)>0){s[5004]=(s[5004]|0)+1;p=cM((h<<4|3)+16|0)|0;if((p|0)==0)w=0;else{s[(p+19&-16)+ -4>>2]=p;w=p+19&-16}r[l+48>>0]=1;s[l+44>>2]=w;s[l+40>>2]=h}else w=0;b=s[t+28>>2]|0;if((b|0)>0){p=s[t+36>>2]|0;_=+f[n>>2];I=+f[n+4>>2];q=+f[n+8>>2];O=+f[n+16>>2];A=+f[n+20>>2];L=+f[n+24>>2];k=+f[n+32>>2];C=+f[n+36>>2];N=+f[n+40>>2];$=+f[e>>2];V=+f[e+4>>2];G=+f[e+8>>2];h=-1;X=3.4028234663852886e38;E=0;while(1){W=+f[p+(E*36|0)+20>>2];U=+f[p+(E*36|0)+24>>2];R=+f[p+(E*36|0)+28>>2];y=(W*_+U*I+R*q)*$+(W*O+U*A+R*L)*V+(W*k+U*C+R*N)*G<X;h=y?E:h;E=E+1|0;if((E|0)>=(b|0))break;else X=y?(W*_+U*I+R*q)*$+(W*O+U*A+R*L)*V+(W*k+U*C+R*N)*G:X}if((h|0)>=0){E=s[p+(h*36|0)+4>>2]|0;if((E|0)>0){S=p+(h*36|0)+12|0;y=p+(h*36|0)+20|0;w=p+(h*36|0)+24|0;b=p+(h*36|0)+28|0;R=O;U=A;W=L;X=k;V=C;$=N;T=l+32|0;x=0;while(1){M=s[S>>2]|0;Q=s[M+(x<<2)>>2]|0;F=s[t+16>>2]|0;x=x+1|0;M=s[M+(((x|0)==(E|0)?0:x)<<2)>>2]|0;Z=+f[F+(Q<<4)>>2];et=Z- +f[F+(M<<4)>>2];Y=+f[F+(Q<<4)+4>>2];tt=Y- +f[F+(M<<4)+4>>2];G=+f[F+(Q<<4)+8>>2];L=G- +f[F+(M<<4)+8>>2];k=et*_+tt*I+L*q;C=et*R+tt*U+L*W;L=et*X+tt*V+L*$;tt=+f[y>>2];et=+f[w>>2];N=+f[b>>2];O=_*tt+I*et+q*N;A=R*tt+U*et+W*N;N=X*tt+V*et+$*N;_=(Z*_+Y*I+G*q+ +f[n+48>>2])*-(C*N-L*A)+(Z*R+Y*U+G*W+ +f[n+52>>2])*-(L*O-k*N)+(Z*X+Y*V+G*$+ +f[n+56>>2])*-(k*A-C*O);M=i+4|0;F=s[M>>2]|0;if((F|0)>=2){j=i+12|0;J=s[j>>2]|0;et=+f[J+(F+ -1<<4)>>2];tt=+f[J+(F+ -1<<4)+4>>2];G=+f[J+(F+ -1<<4)+8>>2];H=T+4|0;D=T+8|0;B=T+12|0;P=T+16|0;X=et;V=tt;$=G;G=et*-(C*N-L*A)+tt*-(L*O-k*N)+G*-(k*A-C*O)-_;z=0;while(1){q=+f[J+(z<<4)>>2];R=+f[J+(z<<4)+4>>2];U=+f[J+(z<<4)+8>>2];W=+f[J+(z<<4)+12>>2];I=q*-(C*N-L*A)+R*-(L*O-k*N)+U*-(k*A-C*O)-_;do if(G<0)if(I<0){K=s[H>>2]|0;if((K|0)==(s[D>>2]|0)?(g=(K|0)==0?1:K<<1,(K|0)<(g|0)):0){if((g|0)==0)J=0;else{s[5004]=(s[5004]|0)+1;J=cM((g<<4|3)+16|0)|0;if((J|0)==0)J=0;else{s[(J+19&-16)+ -4>>2]=J;J=J+19&-16}K=s[H>>2]|0}if((K|0)>0){Q=0;do{nt=J+(Q<<4)|0;rt=(s[B>>2]|0)+(Q<<4)|0;s[nt+0>>2]=s[rt+0>>2];s[nt+4>>2]=s[rt+4>>2];s[nt+8>>2]=s[rt+8>>2];s[nt+12>>2]=s[rt+12>>2];Q=Q+1|0}while((Q|0)!=(K|0))}K=s[B>>2]|0;if((K|0)!=0){if((r[P>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[K+ -4>>2]|0)}s[B>>2]=0}r[P>>0]=1;s[B>>2]=J;s[D>>2]=g;K=s[H>>2]|0}rt=s[B>>2]|0;f[rt+(K<<4)>>2]=q;f[rt+(K<<4)+4>>2]=R;f[rt+(K<<4)+8>>2]=U;f[rt+(K<<4)+12>>2]=W;s[H>>2]=(s[H>>2]|0)+1;break}else{tt=G/(G-I);W=X+(q-X)*tt;X=V+(R-V)*tt;V=$+(U-$)*tt;Q=s[H>>2]|0;if((Q|0)==(s[D>>2]|0)?(v=(Q|0)==0?1:Q<<1,(Q|0)<(v|0)):0){if((v|0)==0)J=0;else{s[5004]=(s[5004]|0)+1;J=cM((v<<4|3)+16|0)|0;if((J|0)==0)J=0;else{s[(J+19&-16)+ -4>>2]=J;J=J+19&-16}Q=s[H>>2]|0}if((Q|0)>0){K=0;do{rt=J+(K<<4)|0;nt=(s[B>>2]|0)+(K<<4)|0;s[rt+0>>2]=s[nt+0>>2];s[rt+4>>2]=s[nt+4>>2];s[rt+8>>2]=s[nt+8>>2];s[rt+12>>2]=s[nt+12>>2];K=K+1|0}while((K|0)!=(Q|0))}K=s[B>>2]|0;if((K|0)!=0){if((r[P>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[K+ -4>>2]|0)}s[B>>2]=0}r[P>>0]=1;s[B>>2]=J;s[D>>2]=v;Q=s[H>>2]|0}rt=s[B>>2]|0;f[rt+(Q<<4)>>2]=W;f[rt+(Q<<4)+4>>2]=X;f[rt+(Q<<4)+8>>2]=V;f[rt+(Q<<4)+12>>2]=0;s[H>>2]=(s[H>>2]|0)+1;break}else if(I<0){tt=G/(G-I);X=X+(q-X)*tt;V=V+(R-V)*tt;$=$+(U-$)*tt;K=s[H>>2]|0;if((K|0)==(s[D>>2]|0)?(d=(K|0)==0?1:K<<1,(K|0)<(d|0)):0){if((d|0)==0)J=0;else{s[5004]=(s[5004]|0)+1;J=cM((d<<4|3)+16|0)|0;if((J|0)==0)J=0;else{s[(J+19&-16)+ -4>>2]=J;J=J+19&-16}K=s[H>>2]|0}if((K|0)>0){Q=0;do{rt=J+(Q<<4)|0;nt=(s[B>>2]|0)+(Q<<4)|0;s[rt+0>>2]=s[nt+0>>2];s[rt+4>>2]=s[nt+4>>2];s[rt+8>>2]=s[nt+8>>2];s[rt+12>>2]=s[nt+12>>2];Q=Q+1|0}while((Q|0)!=(K|0))}K=s[B>>2]|0;if((K|0)!=0){if((r[P>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[K+ -4>>2]|0)}s[B>>2]=0}r[P>>0]=1;s[B>>2]=J;s[D>>2]=d;K=s[H>>2]|0}rt=s[B>>2]|0;f[rt+(K<<4)>>2]=X;f[rt+(K<<4)+4>>2]=V;f[rt+(K<<4)+8>>2]=$;f[rt+(K<<4)+12>>2]=0;K=(s[H>>2]|0)+1|0;s[H>>2]=K;if((K|0)==(s[D>>2]|0)?(m=(K|0)==0?1:K<<1,(K|0)<(m|0)):0){if((m|0)==0)J=0;else{s[5004]=(s[5004]|0)+1;J=cM((m<<4|3)+16|0)|0;if((J|0)==0)J=0;else{s[(J+19&-16)+ -4>>2]=J;J=J+19&-16}K=s[H>>2]|0}if((K|0)>0){Q=0;do{rt=J+(Q<<4)|0;nt=(s[B>>2]|0)+(Q<<4)|0;s[rt+0>>2]=s[nt+0>>2];s[rt+4>>2]=s[nt+4>>2];s[rt+8>>2]=s[nt+8>>2];s[rt+12>>2]=s[nt+12>>2];Q=Q+1|0}while((Q|0)!=(K|0))}K=s[B>>2]|0;if((K|0)!=0){if((r[P>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[K+ -4>>2]|0)}s[B>>2]=0}r[P>>0]=1;s[B>>2]=J;s[D>>2]=m;K=s[H>>2]|0}rt=s[B>>2]|0;f[rt+(K<<4)>>2]=q;f[rt+(K<<4)+4>>2]=R;f[rt+(K<<4)+8>>2]=U;f[rt+(K<<4)+12>>2]=W;s[H>>2]=(s[H>>2]|0)+1}while(0);z=z+1|0;if((z|0)==(F|0))break;J=s[j>>2]|0;X=q;V=R;$=U;G=I}F=s[M>>2]|0}if((F|0)<0){B=i+8|0;D=i+12|0;if((s[B>>2]|0)<0){P=s[D>>2]|0;H=i+16|0;if((P|0)!=0){if((r[H>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[P+ -4>>2]|0)}s[D>>2]=0}r[H>>0]=1;s[D>>2]=0;s[B>>2]=0}do{rt=(s[D>>2]|0)+(F<<4)|0;s[rt+0>>2]=s[l+16>>2];s[rt+4>>2]=s[l+20>>2];s[rt+8>>2]=s[l+24>>2];s[rt+12>>2]=s[l+28>>2];F=F+1|0}while((F|0)!=0)}s[M>>2]=0;_=+f[n>>2];I=+f[n+4>>2];q=+f[n+8>>2];O=+f[n+16>>2];A=+f[n+20>>2];L=+f[n+24>>2];k=+f[n+32>>2];C=+f[n+36>>2];N=+f[n+40>>2];if((x|0)>=(E|0)){i=T;d=n+48|0;t=n+52|0;n=n+56|0;break}else{rt=T;R=O;U=A;W=L;X=k;V=C;$=N;T=i;i=rt}}}else{w=p+(h*36|0)+24|0;b=p+(h*36|0)+28|0;d=n+48|0;t=n+52|0;n=n+56|0;y=p+(h*36|0)+20|0}Z=+f[y>>2];et=+f[w>>2];tt=+f[b>>2];_=Z*_+et*I+tt*q;L=Z*O+et*A+tt*L;N=Z*k+et*C+tt*N;C=+f[p+(h*36|0)+32>>2]-(_*+f[d>>2]+L*+f[t>>2]+N*+f[n>>2]);h=i+4|0;t=s[h>>2]|0;if((t|0)>0){p=i+12|0;n=0;do{rt=s[p>>2]|0;d=rt+(n<<4)|0;k=C+(_*+f[d>>2]+L*+f[rt+(n<<4)+4>>2]+N*+f[rt+(n<<4)+8>>2]);k=!(k<=o)?k:o;if(k<=u){s[l+0>>2]=s[d+0>>2];s[l+4>>2]=s[d+4>>2];s[l+8>>2]=s[d+8>>2];s[l+12>>2]=s[d+12>>2];zD[s[(s[a>>2]|0)+16>>2]&15](a,e,l,k);t=s[h>>2]|0}n=n+1|0}while((n|0)<(t|0))}w=s[l+44>>2]|0}}if((w|0)==0){c=l;return}if((r[l+48>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[w+ -4>>2]|0)}s[l+44>>2]=0;c=l;return}function sC(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,a=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;p=c;c=c+80|0;n=dD[s[(s[e>>2]|0)+28>>2]&127](e)|0;h=+f[e+4>>2];i=+f[e+8>>2];a=+f[e+12>>2];if((n|0)<=0){c=p;return}r=0;do{_D[s[(s[e>>2]|0)+16>>2]&3](e,p+76|0,p+52|0,p+64|0,p+56|0,p+72|0,p+68|0,p+48|0,p+60|0,r);d=s[p+64>>2]|0;do if((d|0)==1){d=s[p+60>>2]|0;if((d|0)==3){if((s[p+48>>2]|0)>0)d=0;else break;do{w=s[p+72>>2]|0;b=rt(s[p+68>>2]|0,d)|0;y=s[p+76>>2]|0;g=s[p+56>>2]|0;E=rt(u[w+b>>1]|0,g)|0;m=i*+l[y+(E+8)>>3];v=a*+l[y+(E+16)>>3];f[p>>2]=h*+l[y+E>>3];f[p+4>>2]=m;f[p+8>>2]=v;f[p+12>>2]=0;E=rt(u[w+(b+2)>>1]|0,g)|0;v=i*+l[y+(E+8)>>3];m=a*+l[y+(E+16)>>3];f[p+16>>2]=h*+l[y+E>>3];f[p+20>>2]=v;f[p+24>>2]=m;f[p+28>>2]=0;g=rt(u[w+(b+4)>>1]|0,g)|0;m=i*+l[y+(g+8)>>3];v=a*+l[y+(g+16)>>3];f[p+32>>2]=h*+l[y+g>>3];f[p+36>>2]=m;f[p+40>>2]=v;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else if((d|0)==5){if((s[p+48>>2]|0)>0)d=0;else break;do{y=s[p+72>>2]|0;b=rt(s[p+68>>2]|0,d)|0;w=s[p+76>>2]|0;E=s[p+56>>2]|0;g=rt(o[y+b>>0]|0,E)|0;v=i*+l[w+(g+8)>>3];m=a*+l[w+(g+16)>>3];f[p>>2]=h*+l[w+g>>3];f[p+4>>2]=v;f[p+8>>2]=m;f[p+12>>2]=0;g=rt(o[y+(b+1)>>0]|0,E)|0;m=i*+l[w+(g+8)>>3];v=a*+l[w+(g+16)>>3];f[p+16>>2]=h*+l[w+g>>3];f[p+20>>2]=m;f[p+24>>2]=v;f[p+28>>2]=0;E=rt(o[y+(b+2)>>0]|0,E)|0;v=i*+l[w+(E+8)>>3];m=a*+l[w+(E+16)>>3];f[p+32>>2]=h*+l[w+E>>3];f[p+36>>2]=v;f[p+40>>2]=m;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else if((d|0)==2){if((s[p+48>>2]|0)>0)d=0;else break;do{b=s[p+72>>2]|0;E=rt(s[p+68>>2]|0,d)|0;w=s[p+76>>2]|0;y=s[p+56>>2]|0;g=rt(y,s[b+E>>2]|0)|0;v=i*+l[w+(g+8)>>3];m=a*+l[w+(g+16)>>3];f[p>>2]=h*+l[w+g>>3];f[p+4>>2]=v;f[p+8>>2]=m;f[p+12>>2]=0;g=rt(y,s[b+(E+4)>>2]|0)|0;m=i*+l[w+(g+8)>>3];v=a*+l[w+(g+16)>>3];f[p+16>>2]=h*+l[w+g>>3];f[p+20>>2]=m;f[p+24>>2]=v;f[p+28>>2]=0;E=rt(y,s[b+(E+8)>>2]|0)|0;v=i*+l[w+(E+8)>>3];m=a*+l[w+(E+16)>>3];f[p+32>>2]=h*+l[w+E>>3];f[p+36>>2]=v;f[p+40>>2]=m;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else break}else if((d|0)==0){d=s[p+60>>2]|0;if((d|0)==5){if((s[p+48>>2]|0)>0)d=0;else break;do{y=s[p+72>>2]|0;b=rt(s[p+68>>2]|0,d)|0;w=s[p+76>>2]|0;E=s[p+56>>2]|0;g=rt(o[y+b>>0]|0,E)|0;v=i*+f[w+(g+4)>>2];m=a*+f[w+(g+8)>>2];f[p>>2]=h*+f[w+g>>2];f[p+4>>2]=v;f[p+8>>2]=m;f[p+12>>2]=0;g=rt(o[y+(b+1)>>0]|0,E)|0;m=i*+f[w+(g+4)>>2];v=a*+f[w+(g+8)>>2];f[p+16>>2]=h*+f[w+g>>2];f[p+20>>2]=m;f[p+24>>2]=v;f[p+28>>2]=0;E=rt(o[y+(b+2)>>0]|0,E)|0;v=i*+f[w+(E+4)>>2];m=a*+f[w+(E+8)>>2];f[p+32>>2]=h*+f[w+E>>2];f[p+36>>2]=v;f[p+40>>2]=m;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else if((d|0)==3){if((s[p+48>>2]|0)>0)d=0;else break;do{y=s[p+72>>2]|0;b=rt(s[p+68>>2]|0,d)|0;w=s[p+76>>2]|0;E=s[p+56>>2]|0;g=rt(u[y+b>>1]|0,E)|0;v=i*+f[w+(g+4)>>2];m=a*+f[w+(g+8)>>2];f[p>>2]=h*+f[w+g>>2];f[p+4>>2]=v;f[p+8>>2]=m;f[p+12>>2]=0;g=rt(u[y+(b+2)>>1]|0,E)|0;m=i*+f[w+(g+4)>>2];v=a*+f[w+(g+8)>>2];f[p+16>>2]=h*+f[w+g>>2];f[p+20>>2]=m;f[p+24>>2]=v;f[p+28>>2]=0;E=rt(u[y+(b+4)>>1]|0,E)|0;v=i*+f[w+(E+4)>>2];m=a*+f[w+(E+8)>>2];f[p+32>>2]=h*+f[w+E>>2];f[p+36>>2]=v;f[p+40>>2]=m;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else if((d|0)==2){if((s[p+48>>2]|0)>0)d=0;else break;do{b=s[p+72>>2]|0;E=rt(s[p+68>>2]|0,d)|0;w=s[p+76>>2]|0;y=s[p+56>>2]|0;g=rt(y,s[b+E>>2]|0)|0;v=i*+f[w+(g+4)>>2];m=a*+f[w+(g+8)>>2];f[p>>2]=h*+f[w+g>>2];f[p+4>>2]=v;f[p+8>>2]=m;f[p+12>>2]=0;g=rt(y,s[b+(E+4)>>2]|0)|0;m=i*+f[w+(g+4)>>2];v=a*+f[w+(g+8)>>2];f[p+16>>2]=h*+f[w+g>>2];f[p+20>>2]=m;f[p+24>>2]=v;f[p+28>>2]=0;E=rt(y,s[b+(E+8)>>2]|0)|0;v=i*+f[w+(E+4)>>2];m=a*+f[w+(E+8)>>2];f[p+32>>2]=h*+f[w+E>>2];f[p+36>>2]=v;f[p+40>>2]=m;f[p+44>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,p,r,d);d=d+1|0}while((d|0)<(s[p+48>>2]|0))}else break}while(0);hD[s[(s[e>>2]|0)+24>>2]&127](e,r);r=r+1|0}while((r|0)!=(n|0));c=p;return}function oC(e,t,n){e=e|0;t=t|0;n=n|0;var o=0,u=0,a=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;o=c;c=c+32|0;h=dD[s[(s[e>>2]|0)+28>>2]&127](e)|0;s[t+20>>2]=h;s[t>>2]=0;if((h|0)==0){S=t+4|0;E=e+4|0;x=+f[E>>2];f[S>>2]=x;S=e+8|0;x=+f[S>>2];S=t+8|0;f[S>>2]=x;S=e+12|0;x=+f[S>>2];S=t+12|0;f[S>>2]=x;S=e+16|0;x=+f[S>>2];S=t+16|0;f[S>>2]=x;c=o;return 19824}h=xD[s[(s[n>>2]|0)+16>>2]&31](n,32,h)|0;v=s[h+8>>2]|0;s[t>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,v)|0;p=dD[s[(s[e>>2]|0)+28>>2]&127](e)|0;if((p|0)>0){d=0;while(1){_D[s[(s[e>>2]|0)+16>>2]&3](e,o+28|0,o+4|0,o+16|0,o+8|0,o+24|0,o+20|0,o,o+12|0,d);s[v+24>>2]=s[o>>2];s[v+28>>2]=s[o+4>>2];g=v+8|0;b=v+12|0;y=v+16|0;m=v+4|0;s[v+0>>2]=0;s[v+4>>2]=0;s[v+8>>2]=0;s[v+12>>2]=0;s[v+16>>2]=0;s[v+20>>2]=0;w=s[o+12>>2]|0;if((w|0)==5){g=s[o>>2]|0;if((g|0)!=0){b=xD[s[(s[n>>2]|0)+16>>2]&31](n,4,g)|0;g=s[b+8>>2]|0;s[y>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,g)|0;if((s[o>>2]|0)>0){y=0;do{E=s[o+24>>2]|0;S=rt(s[o+20>>2]|0,y)|0;r[g+(y<<2)>>0]=r[E+S>>0]|0;r[g+(y<<2)+1>>0]=r[E+(S+1)>>0]|0;r[g+(y<<2)+2>>0]=r[E+(S+2)>>0]|0;y=y+1|0}while((y|0)<(s[o>>2]|0))}aD[s[(s[n>>2]|0)+20>>2]&31](n,b,19736,1497453121,s[b+8>>2]|0)}}else if((w|0)==2){y=s[o>>2]|0;if((y|0)!=0){y=xD[s[(s[n>>2]|0)+16>>2]&31](n,4,y*3|0)|0;b=s[y+8>>2]|0;s[g>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,b)|0;if((s[o>>2]|0)>0){g=s[o+24>>2]|0;w=0;do{E=rt(s[o+20>>2]|0,w)|0;S=w*3|0;s[b+(S<<2)>>2]=s[g+E>>2];s[b+(S+1<<2)>>2]=s[g+(E+4)>>2];s[b+(S+2<<2)>>2]=s[g+(E+8)>>2];w=w+1|0}while((w|0)<(s[o>>2]|0))}aD[s[(s[n>>2]|0)+20>>2]&31](n,y,19688,1497453121,s[y+8>>2]|0)}}else if((w|0)==3?(u=s[o>>2]|0,(u|0)!=0):0){y=xD[s[(s[n>>2]|0)+16>>2]&31](n,8,u)|0;g=s[y+8>>2]|0;s[b>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,g)|0;b=s[o>>2]|0;if((b|0)>0){E=s[o+24>>2]|0;w=s[o+20>>2]|0;S=0;do{T=rt(w,S)|0;i[g+(S<<3)>>1]=i[E+T>>1]|0;i[g+(S<<3)+2>>1]=i[E+(T+2)>>1]|0;i[g+(S<<3)+4>>1]=i[E+(T+4)>>1]|0;S=S+1|0}while((S|0)<(b|0))}aD[s[(s[n>>2]|0)+20>>2]&31](n,y,19704,1497453121,s[y+8>>2]|0)}g=s[o+16>>2]|0;if((g|0)==1){g=s[o+4>>2]|0;if((g|0)!=0){g=xD[s[(s[n>>2]|0)+16>>2]&31](n,32,g)|0;y=s[g+8>>2]|0;s[m>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,y)|0;m=s[o+4>>2]|0;if((m|0)>0){w=s[o+28>>2]|0;E=s[o+8>>2]|0;b=0;do{T=rt(E,b)|0;l[y+(b<<5)>>3]=+l[w+T>>3];l[y+(b<<5)+8>>3]=+l[w+(T+8)>>3];l[y+(b<<5)+16>>3]=+l[w+(T+16)>>3];b=b+1|0}while((b|0)<(m|0))}aD[s[(s[n>>2]|0)+20>>2]&31](n,g,19784,1497453121,s[g+8>>2]|0)}}else if((g|0)==0?(a=s[o+4>>2]|0,(a|0)!=0):0){E=xD[s[(s[n>>2]|0)+16>>2]&31](n,16,a)|0;w=s[E+8>>2]|0;s[v>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,w)|0;b=s[o+4>>2]|0;if((b|0)>0){y=s[o+28>>2]|0;m=s[o+8>>2]|0;g=0;do{T=rt(m,g)|0;f[w+(g<<4)>>2]=+f[y+T>>2];f[w+(g<<4)+4>>2]=+f[y+(T+4)>>2];f[w+(g<<4)+8>>2]=+f[y+(T+8)>>2];g=g+1|0}while((g|0)<(b|0))}aD[s[(s[n>>2]|0)+20>>2]&31](n,E,19760,1497453121,s[E+8>>2]|0)}hD[s[(s[e>>2]|0)+24>>2]&127](e,d);d=d+1|0;if((d|0)==(p|0)){u=n;break}else v=v+32|0}}else u=n;aD[s[(s[u>>2]|0)+20>>2]&31](n,h,19808,1497453121,s[h+8>>2]|0);T=t+4|0;S=e+4|0;x=+f[S>>2];f[T>>2]=x;T=e+8|0;x=+f[T>>2];T=t+8|0;f[T>>2]=x;T=e+12|0;x=+f[T>>2];T=t+12|0;f[T>>2]=x;T=e+16|0;x=+f[T>>2];T=t+16|0;f[T>>2]=x;c=o;return 19824}function uC(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=19904;n=s[e+32>>2]|0;if((n|0)==0){r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0}else{if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function aC(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=19904;n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;c=t;return}function fC(e,t,n,r,i,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;e=s[e+32>>2]|0;s[n>>2]=s[e+(l<<5)+12>>2];s[t>>2]=s[e+(l<<5)+16>>2];s[r>>2]=s[e+(l<<5)+28>>2];s[i>>2]=s[e+(l<<5)+20>>2];s[a>>2]=s[e+(l<<5)>>2];s[o>>2]=s[e+(l<<5)+4>>2];s[u>>2]=s[e+(l<<5)+8>>2];s[f>>2]=s[e+(l<<5)+24>>2];return}function lC(e,t,n,r,i,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;e=s[e+32>>2]|0;s[n>>2]=s[e+(l<<5)+12>>2];s[t>>2]=s[e+(l<<5)+16>>2];s[r>>2]=s[e+(l<<5)+28>>2];s[i>>2]=s[e+(l<<5)+20>>2];s[a>>2]=s[e+(l<<5)>>2];s[o>>2]=s[e+(l<<5)+4>>2];s[u>>2]=s[e+(l<<5)+8>>2];s[f>>2]=s[e+(l<<5)+24>>2];return}function cC(e){e=e|0;return(s[e+48>>2]|0)==1|0}function hC(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;s[e+52>>2]=s[t+0>>2];s[e+56>>2]=s[t+4>>2];s[e+60>>2]=s[t+8>>2];s[e+64>>2]=s[t+12>>2];s[e+68>>2]=s[n+0>>2];s[e+72>>2]=s[n+4>>2];s[e+76>>2]=s[n+8>>2];s[e+80>>2]=s[n+12>>2];s[e+48>>2]=1;c=r;return}function pC(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;s[t+0>>2]=s[e+52>>2];s[t+4>>2]=s[e+56>>2];s[t+8>>2]=s[e+60>>2];s[t+12>>2]=s[e+64>>2];s[n+0>>2]=s[e+68>>2];s[n+4>>2]=s[e+72>>2];s[n+8>>2]=s[e+76>>2];s[n+12>>2]=s[e+80>>2];c=r;return}function dC(e,t){e=e|0;t=t|0;return}function vC(e,t){e=e|0;t=t|0;return}function mC(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;var u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0;u=c;a=s[o+16>>2]|0;if((a|0)!=(i|0)){l=i-a|0;c=u;return l|0}if((i|0)==0){l=0;c=u;return l|0}l=s[o+8>>2]|0;p=s[o+12>>2]|0;f=AM(l|0,0,e|0,0)|0;a=D;v=AM(p|0,0,e|0,0)|0;h=D;l=AM(l|0,0,t|0,0)|0;e=D;p=AM(p|0,0,t|0,0)|0;d=D;t=gM(v|0,0,l|0,0)|0;l=D;d=gM(h|0,0,p|0,d|0)|0;e=gM(d|0,D|0,e|0,0)|0;l=gM(e|0,D|0,l|0,0)|0;e=D;a=gM(0,t|0,f|0,a|0)|0;f=D;t=gM(l|0,e|0,(f>>>0<t>>>0|(f|0)==(t|0)&a>>>0<0)&1|0,0)|0;e=D;l=s[o>>2]|0;d=s[o+4>>2]|0;p=AM(l|0,0,n|0,0)|0;o=D;h=AM(d|0,0,n|0,0)|0;v=D;l=AM(l|0,0,r|0,0)|0;n=D;d=AM(d|0,0,r|0,0)|0;r=D;l=gM(h|0,0,l|0,0)|0;h=D;r=gM(v|0,0,d|0,r|0)|0;r=gM(r|0,D|0,n|0,0)|0;h=gM(r|0,D|0,h|0,0)|0;r=D;o=gM(0,l|0,p|0,o|0)|0;n=D;l=gM(h|0,r|0,(n>>>0<l>>>0|(n|0)==(l|0)&o>>>0<0)&1|0,0)|0;r=D;if(!(e>>>0<r>>>0|(e|0)==(r|0)&t>>>0<l>>>0))if(!(e>>>0>r>>>0|(e|0)==(r|0)&t>>>0>l>>>0))if(f>>>0<n>>>0|(f|0)==(n|0)&a>>>0<o>>>0)e=-1;else e=(f>>>0>n>>>0|(f|0)==(n|0)&a>>>0>o>>>0)&1;else e=1;else e=-1;v=rt(e,i)|0;c=u;return v|0}function gC(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0;t=c;r=s[e+8>>2]|0;if((r|0)==0){o=s[e+4>>2]|0;if((o|0)==0){s[5004]=(s[5004]|0)+1;r=cM(31)|0;if((r|0)!=0?(n=r+19&-16,s[n+ -4>>2]=r,(r+19&-16|0)!=0):0){o=s[e+12>>2]|0;s[n+4>>2]=o;s[n+8>>2]=0;s[5004]=(s[5004]|0)+1;n=cM((o*24|3)+16|0)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}s[(r+19&-16)>>2]=n;o=r+19&-16}else o=0;s[o+8>>2]=s[e>>2];s[e>>2]=o}else s[e+4>>2]=s[o+8>>2];i=s[o+4>>2]|0;if((i|0)>0){n=0;r=s[o>>2]|0;do{n=n+1|0;u=r;r=r+24|0;s[u>>2]=(n|0)<(i|0)?r:0}while((n|0)!=(i|0))}r=s[o>>2]|0;s[e+8>>2]=s[r>>2];if((r|0)==0){u=0;c=t;return u|0}}else s[e+8>>2]=s[r>>2];s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;u=r;c=t;return u|0}function yC(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,P=0,H=0;i=c;c=c+144|0;do if((n-t|0)==2){o=s[(s[e+92>>2]|0)+(t<<2)>>2]|0;u=s[o+88>>2]|0;n=s[o+200>>2]|0;t=s[o+92>>2]|0;f=s[o+204>>2]|0;if((u|0)==(n|0)){if((t|0)==(f|0))if((s[o+96>>2]|0)==(s[o+208>>2]|0))break;else a=t;else a=f;if((t|0)==(a|0)){H=(s[o+96>>2]|0)>(s[o+208>>2]|0);u=H?o+112|0:o;s[u>>2]=u;s[u+4>>2]=u;s[r>>2]=u;s[r+4>>2]=u;s[r+8>>2]=u;s[r+12>>2]=u;o=H?o:o+112|0}else{f=0;y=9}}else{a=f;f=(t|0)==(f|0);y=9}do if((y|0)==9){t=t-a|0;s[o>>2]=o+112;s[o+4>>2]=o+112;s[o+112>>2]=o;s[o+116>>2]=o;if((u-n|0)>=0?!((u|0)==(n|0)&(t|0)<0):0){s[r>>2]=o+112;s[r+4>>2]=o}else{s[r>>2]=o;s[r+4>>2]=o+112}if((t|0)<0|f&(u-n|0)<0){s[r+8>>2]=o;s[r+12>>2]=o+112;u=o;o=o+112|0;break}else{s[r+8>>2]=o+112;s[r+12>>2]=o;u=o;o=o+112|0;break}}while(0);t=gC(e+48|0)|0;n=gC(e+48|0)|0;s[t+8>>2]=n;s[n+8>>2]=t;s[t+20>>2]=s[e+100>>2];s[n+20>>2]=s[e+100>>2];s[t+12>>2]=o;s[n+12>>2]=u;s[t+16>>2]=0;s[n+16>>2]=0;n=s[e+116>>2]|0;s[e+116>>2]=n+1;if((n|0)>=(s[e+120>>2]|0))s[e+120>>2]=n+1;s[t>>2]=t;s[t+4>>2]=t;s[u+8>>2]=t;H=s[t+8>>2]|0;s[H>>2]=H;s[H+4>>2]=H;s[o+8>>2]=H;c=i;return}else if((n-t|0)==0){s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;c=i;return}else if((n-t|0)==1)o=s[(s[e+92>>2]|0)+(t<<2)>>2]|0;else{g=((n-t|0)/2|0)+t|0;w=s[e+92>>2]|0;E=s[w+(g+ -1<<2)>>2]|0;T=s[E+88>>2]|0;x=s[E+92>>2]|0;E=s[E+96>>2]|0;e:do if((g|0)<(n|0)){S=g;while(1){N=s[w+(S<<2)>>2]|0;if((s[N+88>>2]|0)!=(T|0)){b=S;break e}if((s[N+92>>2]|0)!=(x|0)){b=S;break e}b=S+1|0;if((s[N+96>>2]|0)!=(E|0)){b=S;break e}if((b|0)<(n|0))S=b;else break}}else b=g;while(0);yC(e,t,g,r);s[i+96>>2]=0;s[i+100>>2]=0;s[i+104>>2]=0;s[i+108>>2]=0;yC(e,b,n,i+96|0);g=i+100|0;E=s[g>>2]|0;if((E|0)==0){c=i;return}if((s[r+4>>2]|0)==0){s[r+0>>2]=s[i+96>>2];s[r+4>>2]=s[i+100>>2];s[r+8>>2]=s[i+104>>2];s[r+12>>2]=s[i+108>>2];c=i;return}s[e+100>>2]=(s[e+100>>2]|0)+ -1;t=s[r+12>>2]|0;n=s[i+104>>2]|0;w=s[t+88>>2]|0;t:do if((w|0)==(s[n+88>>2]|0)?(s[t+92>>2]|0)==(s[n+92>>2]|0):0){b=s[n+4>>2]|0;if((b|0)==(n|0)){r=s[n+8>>2]|0;if((r|0)!=0){n=s[r+12>>2]|0;w=s[n+88>>2]|0}S=s[n+96>>2]|0;b=w+1|0;break}t=s[n>>2]|0;s[b>>2]=t;s[t+4>>2]=b;n:do if((n|0)==(s[i+96>>2]|0)){y=s[t+88>>2]|0;w=s[b+88>>2]|0;do if((y|0)>=(w|0)){if((y|0)==(w|0)?(s[t+92>>2]|0)<(s[b+92>>2]|0):0)break;s[i+96>>2]=b;break n}while(0);s[i+96>>2]=t}while(0);E=s[g>>2]|0;if((n|0)==(E|0)){n=s[t+88>>2]|0;y=s[b+88>>2]|0;do if((n|0)<=(y|0)){if((n|0)==(y|0)?(s[t+92>>2]|0)>(s[b+92>>2]|0):0)break;s[g>>2]=b;E=b;y=45;break t}while(0);s[g>>2]=t;E=t;y=45}else y=45}else y=45;while(0);if((y|0)==45){y=s[i+96>>2]|0;w=0;b=1;S=r+4|0;t=0;n=0;r:while(1){N=s[S>>2]|0;while(1){S=s[N+88>>2]|0;T=rt((s[E+88>>2]|0)-S|0,b)|0;i:do if((T|0)<=0){if((T|0)>=0){C=s[N+92>>2]|0;x=(w|0)!=0;s:do if(x){T=N;while(1){k=s[T>>2]|0;if((k|0)==(N|0)){N=T;break s}if((s[k+88>>2]|0)!=(S|0)){N=T;break s}H=C;C=s[k+92>>2]|0;if((C|0)>(H|0)){N=T;break}else T=k}}else{T=N;while(1){k=s[T+4>>2]|0;if((k|0)==(N|0)){N=T;break s}if((s[k+88>>2]|0)!=(S|0)){N=T;break s}H=C;C=s[k+92>>2]|0;if((C|0)>(H|0)){N=T;break}else T=k}}while(0);T=s[E+92>>2]|0;if(x){x=E;while(1){C=s[x+4>>2]|0;if((C|0)==(E|0))break i;if((s[C+88>>2]|0)!=(S|0))break i;H=T;T=s[C+92>>2]|0;if((T|0)<(H|0))break i;else x=C}}else{x=E;while(1){C=s[x>>2]|0;if((C|0)==(E|0))break i;if((s[C+88>>2]|0)!=(S|0))break i;H=T;T=s[C+92>>2]|0;if((T|0)<(H|0))break i;else x=C}}}S=s[E+92>>2]|0;L=s[N+92>>2]|0;if((w|0)==0)while(1){k=s[E>>2]|0;x=(k|0)==(E|0);C=E+88|0;while(1){M=N+88|0;A=S-L|0;if(!x?(v=s[k+88>>2]|0,p=rt(v-(s[C>>2]|0)|0,b)|0,d=s[k+92>>2]|0,a=d-S|0,(a|0)>-1):0){if((p|0)==0)break;if((p|0)<0?(rt(a,T)|0)<=(rt(p,A)|0):0)break}O=s[N>>2]|0;if((O|0)==(N|0)){x=E;break i}H=s[O+88>>2]|0;_=rt(H-(s[M>>2]|0)|0,b)|0;M=s[O+92>>2]|0;P=M-L|0;L=T;T=rt((s[C>>2]|0)-H|0,b)|0;if(!((T|0)<0&(P|0)>0)){x=E;break i}if((_|0)==0){L=M;N=O;continue}if((_|0)>=0){x=E;break i}if((rt(P,L)|0)>=(rt(_,A)|0)){x=E;break i}else{L=M;N=O}}S=d;T=rt(v-(s[M>>2]|0)|0,b)|0;E=k}else while(1){x=s[E+4>>2]|0;k=(x|0)==(E|0);C=E+88|0;while(1){M=N+88|0;A=S-L|0;if(!k?(h=s[x+88>>2]|0,m=rt(h-(s[C>>2]|0)|0,b)|0,l=s[x+92>>2]|0,f=l-S|0,(f|0)>-1):0){if((m|0)==0)break;if((m|0)<0?(rt(f,T)|0)<=(rt(m,A)|0):0)break}O=s[N+4>>2]|0;if((O|0)==(N|0)){x=E;break i}H=s[O+88>>2]|0;M=rt(H-(s[M>>2]|0)|0,b)|0;_=s[O+92>>2]|0;L=_-L|0;P=T;T=rt((s[C>>2]|0)-H|0,b)|0;if(!((T|0)<0&(L|0)>0)){x=E;break i}if((M|0)==0){L=_;N=O;continue}if((M|0)>=0){x=E;break i}if((rt(L,P)|0)>=(rt(M,A)|0)){x=E;break i}else{L=_;N=O}}S=l;T=rt(h-(s[M>>2]|0)|0,b)|0;E=x}}else{S=(w|0)!=0;x=s[E+92>>2]|0;L=N;while(1){N=E+88|0;A=L+88|0;k=s[L+92>>2]|0;M=x-k|0;C=s[(S?L:L+4|0)>>2]|0;o:do if((C|0)==(L|0)){k=A;A=M;O=T;C=L}else{O=T;while(1){H=s[C+88>>2]|0;P=rt(H-(s[A>>2]|0)|0,b)|0;_=k;k=s[C+92>>2]|0;_=k-_|0;if((_|0)>=1){k=A;A=M;C=L;break o}if((P|0)!=0){if((P|0)>=0){k=A;A=M;C=L;break o}if((rt(_,O)|0)>(rt(P,M)|0)){k=A;A=M;C=L;break o}}O=rt((s[N>>2]|0)-H|0,b)|0;A=C+88|0;M=x-k|0;L=s[(S?C:C+4|0)>>2]|0;if((L|0)==(C|0)){k=A;A=M;break}else{H=C;C=L;L=H}}}while(0);M=s[(S?E:E+4|0)>>2]|0;if((M|0)==(E|0)){N=C;x=E;break i}T=s[M+88>>2]|0;L=rt(T-(s[N>>2]|0)|0,b)|0;N=x;x=s[M+92>>2]|0;N=x-N|0;T=rt(T-(s[k>>2]|0)|0,b)|0;if(!((T|0)>0&(N|0)<0)){N=C;x=E;break i}if((L|0)==0){L=C;E=M;continue}if((L|0)>=0){N=C;x=E;break i}if((rt(N,O)|0)>=(rt(L,A)|0)){N=C;x=E;break}else{L=C;E=M}}}while(0);if((w|0)==0){w=1;b=-1;S=r;t=N;E=y;n=x;continue r}w=w+1|0;if((w|0)==2)break r;else E=x}}s[N+4>>2]=x;s[x>>2]=N;s[t>>2]=n;s[n+4>>2]=t;a=s[i+96>>2]|0;if((s[a+88>>2]|0)<(s[(s[r>>2]|0)+88>>2]|0))s[r>>2]=a;a=s[g>>2]|0;if((s[a+88>>2]|0)>=(s[(s[r+4>>2]|0)+88>>2]|0))s[r+4>>2]=a;s[r+12>>2]=s[i+108>>2];f=s[n+88>>2]|0;T=s[t+88>>2]|0;l=s[n+92>>2]|0;r=s[t+92>>2]|0;d=s[n+96>>2]|0;N=s[t+96>>2]|0;b=((l-r|0)<0)<<31>>31;a=0-(f-T)|0;y=dM(0,0,a|0,((a|0)<0)<<31>>31|0)|0;y=AM(d-N|0,((d-N|0)<0)<<31>>31|0,y|0,D|0)|0;g=D;m=AM(d-N|0,((d-N|0)<0)<<31>>31|0,l-r|0,b|0)|0;v=D;x=AM(f-T|0,((f-T|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;h=D;p=AM(l-r|0,b|0,l-r|0,b|0)|0;p=dM(x|0,h|0,p|0,D|0)|0;h=D;x=s[t+8>>2]|0;s[i+140>>2]=0;if((x|0)==0)C=0;else{w=dM(0,0,l-r|0,b|0)|0;S=D;C=0;E=x;do{L=s[E+12>>2]|0;O=s[L+88>>2]|0;k=s[L+92>>2]|0;L=s[L+96>>2]|0;_=AM(k-r|0,((k-r|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;H=D;P=AM(O-T|0,((O-T|0)<0)<<31>>31|0,w|0,S|0)|0;do if((_|0)==(P|0)&(H|0)==(D|0)?(P=AM(O-T|0,((O-T|0)<0)<<31>>31|0,y|0,g|0)|0,_=D,H=AM(k-r|0,((k-r|0)<0)<<31>>31|0,m|0,v|0)|0,_=gM(H|0,D|0,P|0,_|0)|0,P=D,H=AM(L-N|0,((L-N|0)<0)<<31>>31|0,p|0,h|0)|0,H=gM(_|0,P|0,H|0,D|0)|0,P=D,(P|0)>0|(P|0)==0&H>>>0>0):0){if((C|0)!=0){A=(s[C+4>>2]|0)==(E|0);if((s[C>>2]|0)==(E|0)){if(!A)break;_=s[C+12>>2]|0;M=s[(s[E+8>>2]|0)+12>>2]|0;H=s[M+88>>2]|0;P=s[M+92>>2]|0;M=s[M+96>>2]|0;A=(s[_+96>>2]|0)-M|0;P=(rt(L-M|0,(s[_+92>>2]|0)-P|0)|0)-(rt(A,k-P|0)|0)|0;k=(rt(A,O-H|0)|0)-(rt(L-M|0,(s[_+88>>2]|0)-H|0)|0)|0;P=AM(P|0,((P|0)<0)<<31>>31|0,l-r|0,b|0)|0;H=D;k=AM(k|0,((k|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;k=gM(P|0,H|0,k|0,D|0)|0;H=D;k=(H|0)>0|(H|0)==0&k>>>0>0?2:1}else k=A&1;if((k|0)!=1)break}s[i+140>>2]=E;C=E}while(0);E=s[E>>2]|0}while((E|0)!=(x|0))}S=s[n+8>>2]|0;s[i+136>>2]=0;if((S|0)==0)N=0;else{w=dM(0,0,l-r|0,b|0)|0;E=D;N=0;x=S;do{T=s[x+12>>2]|0;k=s[T+88>>2]|0;L=s[T+92>>2]|0;T=s[T+96>>2]|0;_=AM(L-l|0,((L-l|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;H=D;P=AM(k-f|0,((k-f|0)<0)<<31>>31|0,w|0,E|0)|0;do if((_|0)==(P|0)&(H|0)==(D|0)?(P=AM(k-f|0,((k-f|0)<0)<<31>>31|0,y|0,g|0)|0,_=D,H=AM(L-l|0,((L-l|0)<0)<<31>>31|0,m|0,v|0)|0,_=gM(H|0,D|0,P|0,_|0)|0,P=D,H=AM(T-d|0,((T-d|0)<0)<<31>>31|0,p|0,h|0)|0,H=gM(_|0,P|0,H|0,D|0)|0,P=D,(P|0)>0|(P|0)==0&H>>>0>0):0){if((N|0)!=0){if((s[N>>2]|0)!=(x|0))break;if((s[N+4>>2]|0)==(x|0)?(P=s[N+12>>2]|0,M=s[(s[x+8>>2]|0)+12>>2]|0,H=s[M+88>>2]|0,_=s[M+92>>2]|0,M=s[M+96>>2]|0,O=(s[P+96>>2]|0)-M|0,_=(rt(T-M|0,(s[P+92>>2]|0)-_|0)|0)-(rt(O,L-_|0)|0)|0,H=(rt(O,k-H|0)|0)-(rt(T-M|0,(s[P+88>>2]|0)-H|0)|0)|0,_=AM(_|0,((_|0)<0)<<31>>31|0,l-r|0,b|0)|0,P=D,H=AM(H|0,((H|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0,H=gM(_|0,P|0,H|0,D|0)|0,P=D,!((P|0)>0|(P|0)==0&H>>>0>0)):0)break}s[i+136>>2]=x;N=x}while(0);x=s[x>>2]|0}while((x|0)!=(S|0))}if(!((C|0)==0&(N|0)==0)){wC(e,t,n,i+140|0,i+136|0);r=s[i+140>>2]|0;if((r|0)!=0)t=s[r+12>>2]|0;r=s[i+136>>2]|0;if((r|0)!=0)n=s[r+12>>2]|0}S=(s[n+96>>2]|0)+1|0;b=s[n+88>>2]|0}w=s[n+92>>2]|0;y=w;r=t;h=n;a=0;m=0;N=1;p=0;E=0;d=0;x=0;f=0;v=0;while(1){T=r+88|0;M=(s[h+88>>2]|0)-(s[T>>2]|0)|0;H=r+92|0;l=y-(s[H>>2]|0)|0;O=r+96|0;L=(s[h+96>>2]|0)-(s[O>>2]|0)|0;s[i+120>>2]=M;s[i+124>>2]=l;s[i+128>>2]=L;s[i+132>>2]=-1;T=b-(s[T>>2]|0)|0;H=w-(s[H>>2]|0)|0;O=S-(s[O>>2]|0)|0;A=(rt(L,H)|0)-(rt(l,O)|0)|0;O=(rt(M,O)|0)-(rt(L,T)|0)|0;H=(rt(l,T)|0)-(rt(M,H)|0)|0;s[i+72>>2]=A;s[i+76>>2]=((A|0)<0)<<31>>31;s[i+80>>2]=O;s[i+84>>2]=((O|0)<0)<<31>>31;s[i+88>>2]=H;s[i+92>>2]=((H|0)<0)<<31>>31;T=AM(H|0,((H|0)<0)<<31>>31|0,l|0,((l|0)<0)<<31>>31|0)|0;P=D;_=AM(L|0,((L|0)<0)<<31>>31|0,O|0,((O|0)<0)<<31>>31|0)|0;_=dM(T|0,P|0,_|0,D|0)|0;P=D;L=AM(A|0,((A|0)<0)<<31>>31|0,L|0,((L|0)<0)<<31>>31|0)|0;T=D;H=AM(M|0,((M|0)<0)<<31>>31|0,H|0,((H|0)<0)<<31>>31|0)|0;H=dM(L|0,T|0,H|0,D|0)|0;T=D;O=AM(M|0,((M|0)<0)<<31>>31|0,O|0,((O|0)<0)<<31>>31|0)|0;M=D;l=AM(A|0,((A|0)<0)<<31>>31|0,l|0,((l|0)<0)<<31>>31|0)|0;l=dM(O|0,M|0,l|0,D|0)|0;s[i+48>>2]=_;s[i+52>>2]=P;s[i+56>>2]=H;s[i+60>>2]=T;s[i+64>>2]=l;s[i+68>>2]=D;s[i+24>>2]=0;s[i+28>>2]=0;s[i+32>>2]=0;s[i+36>>2]=0;s[i+40>>2]=0;l=bC(e,0,r,i+120|0,i+72|0,i+48|0,i+24|0)|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;s[i+12>>2]=0;s[i+16>>2]=0;T=bC(e,1,h,i+120|0,i+72|0,i+48|0,i)|0;if((T|0)==0&((l|0)!=0^1)){y=138;break}if((T|0)==0|(l|0)!=0^1)g=(l|0)!=0?-1:1;else g=mC(s[i+24>>2]|0,s[i+28>>2]|0,s[i+32>>2]|0,s[i+36>>2]|0,s[i+40>>2]|0,i)|0;do if(!N){if((g|0)>-1){if((s[i+16>>2]|0)>=0){y=150;break}if((s[i+8>>2]|0)==0&(s[i+12>>2]|0)==0){y=157;break}else{y=150;break}}if((s[i+40>>2]|0)<0?(s[i+32>>2]|0)==0&(s[i+36>>2]|0)==0:0){s[i+116>>2]=l;s[i+112>>2]=T;T=l;g=E;E=x;y=179}else y=150}else y=150;while(0);if((y|0)==150){y=gC(e+48|0)|0;N=gC(e+48|0)|0;s[y+8>>2]=N;s[N+8>>2]=y;s[y+20>>2]=s[e+100>>2];s[N+20>>2]=s[e+100>>2];s[y+12>>2]=h;s[N+12>>2]=r;s[y+16>>2]=0;s[N+16>>2]=0;N=s[e+116>>2]|0;s[e+116>>2]=N+1;if((N|0)>=(s[e+120>>2]|0))s[e+120>>2]=N+1;if((d|0)==0)p=y;else s[d+4>>2]=y;s[y>>2]=d;N=s[y+8>>2]|0;if((x|0)==0)E=N;else s[x>>2]=N;s[N+4>>2]=x;d=y;x=N;y=157}do if((y|0)==157){y=0;s[i+116>>2]=l;s[i+112>>2]=T;if((g|0)!=0)if((g|0)>-1)N=T;else{T=l;g=E;E=x;y=179;break}else{wC(e,r,h,i+116|0,i+112|0);N=s[i+112>>2]|0}if((N|0)!=0){b=(v|0)!=0;if(b?(o=s[v>>2]|0,(o|0)!=(T|0)):0){k=o;do{C=k;k=s[k>>2]|0;S=s[C+8>>2]|0;if((k|0)==(C|0))s[(s[S+12>>2]|0)+8>>2]=0;else{s[k+4>>2]=s[C+4>>2];s[s[C+4>>2]>>2]=k;s[(s[S+12>>2]|0)+8>>2]=k}w=s[S>>2]|0;if((w|0)==(S|0))s[(s[C+12>>2]|0)+8>>2]=0;else{s[w+4>>2]=s[S+4>>2];s[s[S+4>>2]>>2]=w;s[(s[C+12>>2]|0)+8>>2]=w}s[C+0>>2]=0;s[C+4>>2]=0;s[C+8>>2]=0;s[C+12>>2]=0;s[C+16>>2]=0;s[C>>2]=s[e+56>>2];s[e+56>>2]=C;s[S+0>>2]=0;s[S+4>>2]=0;s[S+8>>2]=0;s[S+12>>2]=0;s[S+16>>2]=0;s[S>>2]=s[e+56>>2];s[e+56>>2]=S;s[e+116>>2]=(s[e+116>>2]|0)+ -1}while((k|0)!=(T|0))}if((x|0)==0){v=N;m=b?m:T}else{if(b){s[v>>2]=E;s[E+4>>2]=v;v=T+4|0}else{v=s[T+4>>2]|0;s[v>>2]=E;s[E+4>>2]=v;v=T+4|0;m=E}s[x>>2]=T;s[v>>2]=x;v=s[i+112>>2]|0;E=0}S=s[h+96>>2]|0;w=s[h+92>>2]|0;b=s[h+88>>2]|0;h=s[v+12>>2]|0;x=0;v=s[v+8>>2]|0}if((g|0)<1){T=s[i+116>>2]|0;g=E;E=x;y=179}else{l=E;g=x}}while(0);if((y|0)==179){y=0;if((T|0)==0){l=g;g=E}else{b=(f|0)!=0;if(b?(u=s[f+4>>2]|0,(u|0)!=(l|0)):0){x=u;do{C=x+4|0;w=x;x=s[C>>2]|0;N=s[w>>2]|0;S=s[w+8>>2]|0;if((N|0)==(w|0))s[(s[S+12>>2]|0)+8>>2]=0;else{s[N+4>>2]=x;s[s[C>>2]>>2]=N;s[(s[S+12>>2]|0)+8>>2]=N}N=s[S>>2]|0;if((N|0)==(S|0))s[(s[w+12>>2]|0)+8>>2]=0;else{s[N+4>>2]=s[S+4>>2];s[s[S+4>>2]>>2]=N;s[(s[w+12>>2]|0)+8>>2]=N}s[w+0>>2]=0;s[w+4>>2]=0;s[w+8>>2]=0;s[w+12>>2]=0;s[w+16>>2]=0;s[w>>2]=s[e+56>>2];s[e+56>>2]=w;s[S+0>>2]=0;s[S+4>>2]=0;s[S+8>>2]=0;s[S+12>>2]=0;s[S+16>>2]=0;s[S>>2]=s[e+56>>2];s[e+56>>2]=S;s[e+116>>2]=(s[e+116>>2]|0)+ -1}while((x|0)!=(l|0))}if((d|0)==0)a=b?a:l;else{if(b){s[p>>2]=f;s[f+4>>2]=p;f=l}else{f=s[l>>2]|0;s[p>>2]=f;s[f+4>>2]=p;f=l;a=p}s[f>>2]=d;s[d+4>>2]=l;T=s[i+116>>2]|0;p=0}S=s[r+96>>2]|0;w=s[r+92>>2]|0;b=s[r+88>>2]|0;r=s[T+12>>2]|0;l=g;d=0;g=E;f=s[T+8>>2]|0}}if((r|0)==(t|0)&(h|0)==(n|0))break;y=s[h+92>>2]|0;N=0;E=l;x=g}if((y|0)==138){u=gC(e+48|0)|0;o=gC(e+48|0)|0;s[u+8>>2]=o;s[o+8>>2]=u;s[u+20>>2]=s[e+100>>2];s[o+20>>2]=s[e+100>>2];s[u+12>>2]=h;s[o+12>>2]=r;s[u+16>>2]=0;s[o+16>>2]=0;o=s[e+116>>2]|0;s[e+116>>2]=o+1;if((o|0)>=(s[e+120>>2]|0))s[e+120>>2]=o+1;s[u>>2]=u;s[u+4>>2]=u;s[r+8>>2]=u;H=s[u+8>>2]|0;s[H>>2]=H;s[H+4>>2]=H;s[h+8>>2]=H;c=i;return}if((f|0)!=0){o=f+4|0;r=s[o>>2]|0;if((r|0)!=(a|0))do{y=r+4|0;u=r;r=s[y>>2]|0;h=s[u>>2]|0;t=s[u+8>>2]|0;if((h|0)==(u|0))s[(s[t+12>>2]|0)+8>>2]=0;else{s[h+4>>2]=r;s[s[y>>2]>>2]=h;s[(s[t+12>>2]|0)+8>>2]=h}h=s[t>>2]|0;if((h|0)==(t|0))s[(s[u+12>>2]|0)+8>>2]=0;else{s[h+4>>2]=s[t+4>>2];s[s[t+4>>2]>>2]=h;s[(s[u+12>>2]|0)+8>>2]=h}s[u+0>>2]=0;s[u+4>>2]=0;s[u+8>>2]=0;s[u+12>>2]=0;s[u+16>>2]=0;s[u>>2]=s[e+56>>2];s[e+56>>2]=u;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;s[t+16>>2]=0;s[t>>2]=s[e+56>>2];s[e+56>>2]=t;s[e+116>>2]=(s[e+116>>2]|0)+ -1}while((r|0)!=(a|0));if((d|0)!=0){s[p>>2]=f;s[o>>2]=p;s[a>>2]=d;s[d+4>>2]=a}}else{s[p>>2]=d;s[d+4>>2]=p;s[t+8>>2]=d}if((v|0)==0){s[g>>2]=l;s[l+4>>2]=g;s[n+8>>2]=g;c=i;return}o=s[v>>2]|0;if((o|0)!=(m|0))do{n=o;o=s[o>>2]|0;u=s[n+8>>2]|0;if((o|0)==(n|0))s[(s[u+12>>2]|0)+8>>2]=0;else{s[o+4>>2]=s[n+4>>2];s[s[n+4>>2]>>2]=o;s[(s[u+12>>2]|0)+8>>2]=o}t=s[u>>2]|0;if((t|0)==(u|0))s[(s[n+12>>2]|0)+8>>2]=0;else{s[t+4>>2]=s[u+4>>2];s[s[u+4>>2]>>2]=t;s[(s[n+12>>2]|0)+8>>2]=t}s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n>>2]=s[e+56>>2];s[e+56>>2]=n;s[u+0>>2]=0;s[u+4>>2]=0;s[u+8>>2]=0;s[u+12>>2]=0;s[u+16>>2]=0;s[u>>2]=s[e+56>>2];s[e+56>>2]=u;s[e+116>>2]=(s[e+116>>2]|0)+ -1}while((o|0)!=(m|0));if((g|0)==0){c=i;return}s[v>>2]=l;s[l+4>>2]=v;s[g>>2]=m;s[m+4>>2]=g;c=i;return}while(0);s[o+8>>2]=0;s[o>>2]=o;s[o+4>>2]=o;s[r>>2]=o;s[r+4>>2]=o;s[r+8>>2]=o;s[r+12>>2]=o;c=i;return}function bC(e,t,n,r,i,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;var a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0;a=c;f=s[n+8>>2]|0;if((f|0)==0){T=0;c=a;return T|0}l=0;do{do if((s[f+20>>2]|0)>(s[e+100>>2]|0)){v=s[f+12>>2]|0;g=s[v+88>>2]|0;d=g-(s[n+88>>2]|0)|0;m=s[v+92>>2]|0;h=m-(s[n+92>>2]|0)|0;v=s[v+96>>2]|0;p=v-(s[n+96>>2]|0)|0;w=AM(d|0,((d|0)<0)<<31>>31|0,s[o>>2]|0,s[o+4>>2]|0)|0;S=D;y=AM(h|0,((h|0)<0)<<31>>31|0,s[o+8>>2]|0,s[o+12>>2]|0)|0;S=gM(y|0,D|0,w|0,S|0)|0;w=D;y=AM(p|0,((p|0)<0)<<31>>31|0,s[o+16>>2]|0,s[o+20>>2]|0)|0;y=gM(S|0,w|0,y|0,D|0)|0;w=D;S=AM(s[i>>2]|0,s[i+4>>2]|0,d|0,((d|0)<0)<<31>>31|0)|0;T=D;x=AM(s[i+8>>2]|0,s[i+12>>2]|0,h|0,((h|0)<0)<<31>>31|0)|0;T=gM(x|0,D|0,S|0,T|0)|0;S=D;x=AM(s[i+16>>2]|0,s[i+20>>2]|0,p|0,((p|0)<0)<<31>>31|0)|0;x=gM(T|0,S|0,x|0,D|0)|0;S=D;if((w|0)>0|(w|0)==0&y>>>0>0){E=1;b=w;w=1}else{y=dM(0,0,y|0,w|0)|0;E=(w|0)<0?-1:0;y=(w|0)<0?y:0;b=(w|0)<0?D:0;w=(w|0)<0?-1:0}if(!((S|0)>0|(S|0)==0&x>>>0>0)){if((S|0)<0){w=0-E|0;N=dM(0,0,x|0,S|0)|0;E=w;T=(x|0)==0&(S|0)==0;x=N;S=D}else{T=1;x=0;S=0}if((E|0)==0&T)break;else E=x}else E=x;if((l|0)==0){s[u>>2]=y;s[u+4>>2]=b;s[u+8>>2]=E;s[u+12>>2]=S;s[u+16>>2]=w;l=f;break}x=mC(y,b,E,S,w,u)|0;if((x|0)<0){s[u>>2]=y;s[u+4>>2]=b;s[u+8>>2]=E;s[u+12>>2]=S;s[u+16>>2]=w;l=f;break}if((x|0)==0){y=(s[l+4>>2]|0)==(f|0);if((s[l>>2]|0)==(f|0))if(y){N=s[r+8>>2]|0;S=rt(N,h)|0;w=s[r+4>>2]|0;S=S-(rt(w,p)|0)|0;T=s[r>>2]|0;N=(rt(T,p)|0)-(rt(d,N)|0)|0;T=(rt(d,w)|0)-(rt(T,h)|0)|0;d=s[l+12>>2]|0;h=s[(s[f+8>>2]|0)+12>>2]|0;w=s[h+88>>2]|0;b=(s[d+88>>2]|0)-w|0;y=s[h+92>>2]|0;E=(s[d+92>>2]|0)-y|0;h=s[h+96>>2]|0;d=(s[d+96>>2]|0)-h|0;x=(rt(v-h|0,E)|0)-(rt(m-y|0,d)|0)|0;h=(rt(g-w|0,d)|0)-(rt(v-h|0,b)|0)|0;E=(rt(m-y|0,b)|0)-(rt(g-w|0,E)|0)|0;S=AM(x|0,((x|0)<0)<<31>>31|0,S|0,((S|0)<0)<<31>>31|0)|0;x=D;N=AM(h|0,((h|0)<0)<<31>>31|0,N|0,((N|0)<0)<<31>>31|0)|0;h=D;T=AM(E|0,((E|0)<0)<<31>>31|0,T|0,((T|0)<0)<<31>>31|0)|0;T=gM(S|0,x|0,T|0,D|0)|0;h=gM(T|0,D|0,N|0,h|0)|0;N=D;h=(N|0)>0|(N|0)==0&h>>>0>0?2:1}else h=2;else h=y&1;l=(h|0)==2^t?l:f}}while(0);f=s[f>>2]|0}while((f|0)!=(s[n+8>>2]|0));c=a;return l|0}function wC(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,X=0,V=0,$=0,J=0,K=0,Q=0,G=0;o=c;c=c+96|0;y=s[r>>2]|0;u=s[i>>2]|0;if((y|0)!=0)a=s[y+12>>2]|0;else a=t;x=s[a+88>>2]|0;S=s[a+92>>2]|0;E=s[a+96>>2]|0;if((u|0)==0)a=n;else a=s[u+12>>2]|0;k=s[a+88>>2]|0;C=s[a+92>>2]|0;N=s[a+96>>2]|0;g=s[t+88>>2]|0;a=(s[n+88>>2]|0)-g|0;L=s[t+92>>2]|0;f=(s[n+92>>2]|0)-L|0;M=s[t+96>>2]|0;v=(s[n+96>>2]|0)-M|0;n=s[((y|0)!=0?y:u)+12>>2]|0;d=(s[n+88>>2]|0)-g|0;w=(s[n+92>>2]|0)-L|0;n=(s[n+96>>2]|0)-M|0;m=(rt(w,v)|0)-(rt(n,f)|0)|0;n=(rt(n,a)|0)-(rt(d,v)|0)|0;w=(rt(d,f)|0)-(rt(w,a)|0)|0;g=AM(m|0,((m|0)<0)<<31>>31|0,g|0,((g|0)<0)<<31>>31|0)|0;d=D;L=AM(n|0,((n|0)<0)<<31>>31|0,L|0,((L|0)<0)<<31>>31|0)|0;A=D;M=AM(w|0,((w|0)<0)<<31>>31|0,M|0,((M|0)<0)<<31>>31|0)|0;M=gM(g|0,d|0,M|0,D|0)|0;A=gM(M|0,D|0,L|0,A|0)|0;L=D;M=AM(w|0,((w|0)<0)<<31>>31|0,f|0,((f|0)<0)<<31>>31|0)|0;d=D;g=AM(n|0,((n|0)<0)<<31>>31|0,v|0,((v|0)<0)<<31>>31|0)|0;g=dM(M|0,d|0,g|0,D|0)|0;d=D;M=AM(m|0,((m|0)<0)<<31>>31|0,v|0,((v|0)<0)<<31>>31|0)|0;l=D;t=AM(w|0,((w|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;t=dM(M|0,l|0,t|0,D|0)|0;l=D;M=AM(n|0,((n|0)<0)<<31>>31|0,a|0,((a|0)<0)<<31>>31|0)|0;p=D;h=AM(m|0,((m|0)<0)<<31>>31|0,f|0,((f|0)<0)<<31>>31|0)|0;h=dM(M|0,p|0,h|0,D|0)|0;p=D;M=AM(g|0,d|0,x|0,((x|0)<0)<<31>>31|0)|0;G=D;O=AM(t|0,l|0,S|0,((S|0)<0)<<31>>31|0)|0;G=gM(O|0,D|0,M|0,G|0)|0;M=D;O=AM(h|0,p|0,E|0,((E|0)<0)<<31>>31|0)|0;O=gM(G|0,M|0,O|0,D|0)|0;M=D;if((y|0)!=0?(s[y+12>>2]|0)!=0:0){T=y;while(1){T=s[(s[T+8>>2]|0)+4>>2]|0;H=T+12|0;P=s[H>>2]|0;B=s[P+88>>2]|0;Q=AM(B|0,((B|0)<0)<<31>>31|0,m|0,((m|0)<0)<<31>>31|0)|0;K=D;_=s[P+92>>2]|0;G=AM(_|0,((_|0)<0)<<31>>31|0,n|0,((n|0)<0)<<31>>31|0)|0;K=gM(G|0,D|0,Q|0,K|0)|0;Q=D;P=s[P+96>>2]|0;G=AM(P|0,((P|0)<0)<<31>>31|0,w|0,((w|0)<0)<<31>>31|0)|0;G=gM(K|0,Q|0,G|0,D|0)|0;Q=D;if((Q|0)<(L|0)|(Q|0)==(L|0)&G>>>0<A>>>0)break;if((s[T+20>>2]|0)==(s[e+100>>2]|0))break;Q=AM(B|0,((B|0)<0)<<31>>31|0,g|0,d|0)|0;G=D;_=AM(_|0,((_|0)<0)<<31>>31|0,t|0,l|0)|0;G=gM(_|0,D|0,Q|0,G|0)|0;_=D;P=AM(P|0,((P|0)<0)<<31>>31|0,h|0,p|0)|0;P=gM(G|0,_|0,P|0,D|0)|0;_=D;if(!((_|0)>(M|0)|(_|0)==(M|0)&P>>>0>O>>>0))break;s[r>>2]=T;G=s[H>>2]|0;x=s[G+88>>2]|0;S=s[G+92>>2]|0;E=s[G+96>>2]|0;if((G|0)==0){O=P;M=_;break}else{M=_;O=P}}T=s[i>>2]|0}else T=u;_=AM(g|0,d|0,k|0,((k|0)<0)<<31>>31|0)|0;G=D;P=AM(t|0,l|0,C|0,((C|0)<0)<<31>>31|0)|0;G=gM(P|0,D|0,_|0,G|0)|0;_=D;P=AM(h|0,p|0,N|0,((N|0)<0)<<31>>31|0)|0;P=gM(G|0,_|0,P|0,D|0)|0;_=D;e:do if((T|0)!=0)if((s[T+12>>2]|0)==0)L=P;else while(1){H=s[s[T+8>>2]>>2]|0;F=s[H+12>>2]|0;B=s[F+88>>2]|0;Q=AM(B|0,((B|0)<0)<<31>>31|0,m|0,((m|0)<0)<<31>>31|0)|0;K=D;j=s[F+92>>2]|0;G=AM(j|0,((j|0)<0)<<31>>31|0,n|0,((n|0)<0)<<31>>31|0)|0;K=gM(G|0,D|0,Q|0,K|0)|0;Q=D;F=s[F+96>>2]|0;G=AM(F|0,((F|0)<0)<<31>>31|0,w|0,((w|0)<0)<<31>>31|0)|0;G=gM(K|0,Q|0,G|0,D|0)|0;Q=D;if((Q|0)<(L|0)|(Q|0)==(L|0)&G>>>0<A>>>0){L=P;break e}if((s[H+20>>2]|0)==(s[e+100>>2]|0)){L=P;break e}B=AM(B|0,((B|0)<0)<<31>>31|0,g|0,d|0)|0;G=D;j=AM(j|0,((j|0)<0)<<31>>31|0,t|0,l|0)|0;G=gM(j|0,D|0,B|0,G|0)|0;B=D;j=AM(F|0,((F|0)<0)<<31>>31|0,h|0,p|0)|0;j=gM(G|0,B|0,j|0,D|0)|0;B=D;if(!((B|0)>(_|0)|(B|0)==(_|0)&j>>>0>P>>>0)){L=P;break e}s[i>>2]=H;G=s[H+12>>2]|0;k=s[G+88>>2]|0;C=s[G+92>>2]|0;N=s[G+96>>2]|0;if((G|0)==0){L=j;_=B;T=H;break}else{T=H;_=B;P=j}}else{L=P;T=0}while(0);A=dM(L|0,_|0,O|0,M|0)|0;L=D;if((L|0)>0|(L|0)==0&A>>>0>0){P=dM(0,0,w|0,((w|0)<0)<<31>>31|0)|0;H=D;_=E;M=S;O=x;I=N;q=C;R=k;j=A;B=L;t:while(1){n:while(1){F=(rt(q-M|0,f)|0)+(rt(I-_|0,v)|0)+(rt(R-O|0,a)|0)|0;U=s[r>>2]|0;do if(((U|0)!=0?(s[U+12>>2]|0)!=0:0)?(b=s[(s[U>>2]|0)+8>>2]|0,(s[b+20>>2]|0)>(s[e+100>>2]|0)):0){X=s[b+12>>2]|0;z=s[X+88>>2]|0;G=z-O|0;V=s[X+92>>2]|0;K=V-M|0;X=s[X+96>>2]|0;$=X-_|0;J=AM(G|0,((G|0)<0)<<31>>31|0,g|0,d|0)|0;W=D;Q=AM(K|0,((K|0)<0)<<31>>31|0,t|0,l|0)|0;W=gM(Q|0,D|0,J|0,W|0)|0;J=D;Q=AM($|0,(($|0)<0)<<31>>31|0,h|0,p|0)|0;Q=gM(W|0,J|0,Q|0,D|0)|0;J=D;$=(rt(K,f)|0)+(rt(G,a)|0)+(rt($,v)|0)|0;if((Q|0)==0&(J|0)==0)if(($|0)<0)break n;else break;if((J|0)<0){if(($|0)>0){K=1;G=1;W=$;$=(($|0)<0)<<31>>31}else{W=dM(0,0,$|0,(($|0)<0)<<31>>31|0)|0;K=($|0)<0?-1:0;G=($|0)<0?-1:0;W=($|0)<0?W:0;$=($|0)<0?D:0}if(!((J|0)>0|(J|0)==0&Q>>>0>0)){Q=dM(0,0,Q|0,J|0)|0;K=0-G|0;J=D}do if((F|0)<=0)if((F|0)<0){s[o+88>>2]=-1;G=dM(0,0,F|0,((F|0)<0)<<31>>31|0)|0;s[o+72>>2]=G;s[o+76>>2]=D;G=-1;break}else{s[o+88>>2]=0;s[o+72>>2]=0;s[o+76>>2]=0;G=0;break}else{s[o+88>>2]=1;s[o+72>>2]=F;s[o+76>>2]=((F|0)<0)<<31>>31;G=1}while(0);do if(!((B|0)>0|(B|0)==0&j>>>0>0))if((B|0)<0){s[o+88>>2]=0-G;G=dM(0,0,j|0,B|0)|0;s[o+80>>2]=G;s[o+84>>2]=D;break}else{s[o+80>>2]=0;s[o+84>>2]=0;break}else{s[o+80>>2]=j;s[o+84>>2]=B}while(0);if((mC(W,$,Q,J,K,o+72|0)|0)>-1)break n}}while(0);U=s[i>>2]|0;if((U|0)==0){y=117;break t}if((s[U+12>>2]|0)==0){y=117;break t}U=s[s[U+8>>2]>>2]|0;if((s[U+20>>2]|0)<=(s[e+100>>2]|0)){y=117;break t}V=s[U+12>>2]|0;z=s[V+88>>2]|0;W=z-R|0;R=s[V+92>>2]|0;X=R-q|0;V=s[V+96>>2]|0;$=V-I|0;G=AM(W|0,((W|0)<0)<<31>>31|0,m|0,((m|0)<0)<<31>>31|0)|0;K=D;Q=AM(X|0,((X|0)<0)<<31>>31|0,n|0,((n|0)<0)<<31>>31|0)|0;K=gM(Q|0,D|0,G|0,K|0)|0;G=D;Q=AM($|0,(($|0)<0)<<31>>31|0,P|0,H|0)|0;if(!((K|0)==(Q|0)&(G|0)==(D|0))){y=117;break t}I=AM(W|0,((W|0)<0)<<31>>31|0,g|0,d|0)|0;Q=D;q=AM(X|0,((X|0)<0)<<31>>31|0,t|0,l|0)|0;Q=gM(q|0,D|0,I|0,Q|0)|0;I=D;q=AM($|0,(($|0)<0)<<31>>31|0,h|0,p|0)|0;q=gM(Q|0,I|0,q|0,D|0)|0;I=D;X=(rt(X,f)|0)+(rt(W,a)|0)+(rt($,v)|0)|0;z=z-O|0;Q=R-M|0;W=V-_|0;z=AM(z|0,((z|0)<0)<<31>>31|0,g|0,d|0)|0;G=D;Q=AM(Q|0,((Q|0)<0)<<31>>31|0,t|0,l|0)|0;G=gM(Q|0,D|0,z|0,G|0)|0;z=D;W=AM(W|0,((W|0)<0)<<31>>31|0,h|0,p|0)|0;W=gM(G|0,z|0,W|0,D|0)|0;z=D;if(!((z|0)>0|(z|0)==0&W>>>0>0)){y=117;break t}if((q|0)==0&(I|0)==0){if((X|0)>=0){y=117;break t}}else{if((I|0)>=0){y=117;break t}if((X|0)>0){V=1;$=1;R=X;X=((X|0)<0)<<31>>31}else{R=dM(0,0,X|0,((X|0)<0)<<31>>31|0)|0;V=(X|0)<0?-1:0;$=(X|0)<0?-1:0;R=(X|0)<0?R:0;X=(X|0)<0?D:0}if(!((I|0)>0|(I|0)==0&q>>>0>0)){q=dM(0,0,q|0,I|0)|0;V=0-$|0;I=D}do if((F|0)<=0)if((F|0)<0){s[o+64>>2]=-1;F=dM(0,0,F|0,((F|0)<0)<<31>>31|0)|0;s[o+48>>2]=F;s[o+52>>2]=D;F=-1;break}else{s[o+64>>2]=0;s[o+48>>2]=0;s[o+52>>2]=0;F=0;break}else{s[o+64>>2]=1;s[o+48>>2]=F;s[o+52>>2]=((F|0)<0)<<31>>31;F=1}while(0);do if(!((B|0)>0|(B|0)==0&j>>>0>0))if((B|0)<0){s[o+64>>2]=0-F;G=dM(0,0,j|0,B|0)|0;s[o+56>>2]=G;s[o+60>>2]=D;break}else{s[o+56>>2]=0;s[o+60>>2]=0;break}else{s[o+56>>2]=j;s[o+60>>2]=B}while(0);if((mC(R,X,q,I,V,o+48|0)|0)<=0){y=117;break t}}s[i>>2]=U;I=s[U+12>>2]|0;R=s[I+88>>2]|0;q=s[I+92>>2]|0;I=s[I+96>>2]|0;B=z;j=W}_=R-z|0;O=q-V|0;j=I-X|0;_=AM(_|0,((_|0)<0)<<31>>31|0,g|0,d|0)|0;M=D;O=AM(O|0,((O|0)<0)<<31>>31|0,t|0,l|0)|0;M=gM(O|0,D|0,_|0,M|0)|0;_=D;j=AM(j|0,((j|0)<0)<<31>>31|0,h|0,p|0)|0;j=gM(M|0,_|0,j|0,D|0)|0;s[r>>2]=(U|0)==(y|0)?0:b;_=X;M=V;O=z;B=D}if((y|0)==117){c=o;return}}if((L|0)>=0){c=o;return}y=dM(0,0,w|0,((w|0)<0)<<31>>31|0)|0;b=D;while(1){O=(rt(C-S|0,f)|0)+(rt(N-E|0,v)|0)+(rt(k-x|0,a)|0)|0;r:do if((T|0)==0){w=O;T=O;O=((O|0)<0)<<31>>31}else{w=O;M=O;O=((O|0)<0)<<31>>31;while(1){if((s[T+12>>2]|0)==0){T=M;break r}B=s[(s[T+4>>2]|0)+8>>2]|0;if((s[B+20>>2]|0)<=(s[e+100>>2]|0)){T=M;break r}H=s[B+12>>2]|0;_=s[H+88>>2]|0;G=_-k|0;P=s[H+92>>2]|0;Q=P-C|0;H=s[H+96>>2]|0;F=H-N|0;I=AM(G|0,((G|0)<0)<<31>>31|0,g|0,d|0)|0;K=D;R=AM(Q|0,((Q|0)<0)<<31>>31|0,t|0,l|0)|0;K=gM(R|0,D|0,I|0,K|0)|0;I=D;R=AM(F|0,((F|0)<0)<<31>>31|0,h|0,p|0)|0;R=gM(K|0,I|0,R|0,D|0)|0;I=D;F=(rt(Q,f)|0)+(rt(G,a)|0)+(rt(F,v)|0)|0;if((R|0)==0&(I|0)==0){if((F|0)<=0){T=M;break r}}else{if((I|0)>=0){T=M;break r}if((F|0)>0){q=1;U=1;j=F;F=((F|0)<0)<<31>>31}else{j=dM(0,0,F|0,((F|0)<0)<<31>>31|0)|0;q=(F|0)<0?-1:0;U=(F|0)<0?-1:0;j=(F|0)<0?j:0;F=(F|0)<0?D:0}if(!((I|0)>0|(I|0)==0&R>>>0>0)){R=dM(0,0,R|0,I|0)|0;q=0-U|0;I=D}do if((w|0)<=0)if((w|0)<0){s[o+40>>2]=-1;U=dM(0,0,M|0,O|0)|0;s[o+24>>2]=U;s[o+28>>2]=D;U=-1;break}else{s[o+40>>2]=0;s[o+24>>2]=0;s[o+28>>2]=0;U=0;break}else{s[o+40>>2]=1;s[o+24>>2]=M;s[o+28>>2]=O;U=1}while(0);do if(!((L|0)>0|(L|0)==0&A>>>0>0))if((L|0)<0){s[o+40>>2]=0-U;G=dM(0,0,A|0,L|0)|0;s[o+32>>2]=G;s[o+36>>2]=D;break}else{s[o+32>>2]=0;s[o+36>>2]=0;break}else{s[o+32>>2]=A;s[o+36>>2]=L}while(0);if((mC(j,F,R,I,q,o+24|0)|0)>=1){T=M;break r}}O=_-x|0;Q=P-S|0;G=H-E|0;L=AM(O|0,((O|0)<0)<<31>>31|0,g|0,d|0)|0;K=D;A=AM(Q|0,((Q|0)<0)<<31>>31|0,t|0,l|0)|0;K=gM(A|0,D|0,L|0,K|0)|0;L=D;A=AM(G|0,((G|0)<0)<<31>>31|0,h|0,p|0)|0;A=gM(K|0,L|0,A|0,D|0)|0;L=D;T=(T|0)==(u|0)?0:B;s[i>>2]=T;O=(rt(Q,f)|0)+(rt(G,v)|0)+(rt(O,a)|0)|0;if((T|0)==0){N=H;C=P;k=_;w=O;T=O;O=((O|0)<0)<<31>>31;break}else{k=_;C=P;N=H;w=O;M=O;O=((O|0)<0)<<31>>31}}}while(0);M=s[r>>2]|0;if((M|0)==0){y=117;break}if((s[M+12>>2]|0)==0){y=117;break}M=s[(s[M+8>>2]|0)+4>>2]|0;if((s[M+20>>2]|0)<=(s[e+100>>2]|0)){y=117;break}B=s[M+12>>2]|0;_=s[B+88>>2]|0;P=_-x|0;x=s[B+92>>2]|0;H=x-S|0;B=s[B+96>>2]|0;j=B-E|0;G=AM(P|0,((P|0)<0)<<31>>31|0,m|0,((m|0)<0)<<31>>31|0)|0;K=D;Q=AM(H|0,((H|0)<0)<<31>>31|0,n|0,((n|0)<0)<<31>>31|0)|0;K=gM(Q|0,D|0,G|0,K|0)|0;G=D;Q=AM(j|0,((j|0)<0)<<31>>31|0,y|0,b|0)|0;if(!((K|0)==(Q|0)&(G|0)==(D|0))){y=117;break}E=AM(P|0,((P|0)<0)<<31>>31|0,g|0,d|0)|0;Q=D;S=AM(H|0,((H|0)<0)<<31>>31|0,t|0,l|0)|0;Q=gM(S|0,D|0,E|0,Q|0)|0;E=D;S=AM(j|0,((j|0)<0)<<31>>31|0,h|0,p|0)|0;S=gM(Q|0,E|0,S|0,D|0)|0;E=D;H=(rt(H,f)|0)+(rt(P,a)|0)+(rt(j,v)|0)|0;_=k-_|0;Q=C-x|0;P=N-B|0;_=AM(_|0,((_|0)<0)<<31>>31|0,g|0,d|0)|0;G=D;Q=AM(Q|0,((Q|0)<0)<<31>>31|0,t|0,l|0)|0;G=gM(Q|0,D|0,_|0,G|0)|0;_=D;P=AM(P|0,((P|0)<0)<<31>>31|0,h|0,p|0)|0;P=gM(G|0,_|0,P|0,D|0)|0;_=D;if((_|0)>=0){y=117;break}if((S|0)==0&(E|0)==0){if((H|0)<=0){y=117;break}}else{if((E|0)>=0){y=117;break}if((H|0)>0){B=1;j=1;x=H;H=((H|0)<0)<<31>>31}else{x=dM(0,0,H|0,((H|0)<0)<<31>>31|0)|0;B=(H|0)<0?-1:0;j=(H|0)<0?-1:0;x=(H|0)<0?x:0;H=(H|0)<0?D:0}if(!((E|0)>0|(E|0)==0&S>>>0>0)){S=dM(0,0,S|0,E|0)|0;B=0-j|0;E=D}do if((w|0)<=0)if((w|0)<0){s[o+16>>2]=-1;w=dM(0,0,T|0,O|0)|0;s[o>>2]=w;s[o+4>>2]=D;w=-1;break}else{s[o+16>>2]=0;s[o>>2]=0;s[o+4>>2]=0;w=0;break}else{s[o+16>>2]=1;s[o>>2]=T;s[o+4>>2]=O;w=1}while(0);do if(!((L|0)>0|(L|0)==0&A>>>0>0))if((L|0)<0){s[o+16>>2]=0-w;G=dM(0,0,A|0,L|0)|0;s[o+8>>2]=G;s[o+12>>2]=D;break}else{s[o+8>>2]=0;s[o+12>>2]=0;break}else{s[o+8>>2]=A;s[o+12>>2]=L}while(0);if((mC(x,H,S,E,B,o)|0)>=0){y=117;break}}s[r>>2]=M;x=s[M+12>>2]|0;E=s[x+96>>2]|0;S=s[x+92>>2]|0;x=s[x+88>>2]|0;T=s[i>>2]|0;A=P;L=_}if((y|0)==117){c=o;return}}function EC(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0;t=c;c=c+16|0;r=s[e+8>>2]|0;n=s[e+12>>2]|0;if((n|0)>-1|(n|0)==-1&r>>>0>4294967295){i=(+(r>>>0)+4294967296*+(n>>>0))*0x10000000000000000+(+((s[e>>2]|0)>>>0)+4294967296*+((s[e+4>>2]|0)>>>0));c=t;return+i}else{a=s[e>>2]|0;u=s[e+4>>2]|0;o=dM(0,0,a|0,u|0)|0;e=D;r=gM((a|0)==0&(u|0)==0&1|0,0,~r|0,~n|0)|0;s[t>>2]=o;s[t+4>>2]=e;s[t+8>>2]=r;s[t+12>>2]=D;i=-+EC(t);c=t;return+i}return 0}function SC(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0;i=c;c=c+256|0;if((n|0)<1){n=s[e+12>>2]|0;if((n|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;n=s[e+52>>2]|0;if((n|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;c=i;return}s[i+88>>2]=0;s[i+92>>2]=0;o=i+96|0;s[o>>2]=0;s[i+100>>2]=256;s[i+104>>2]=0;s[i+108>>2]=0;s[i+112>>2]=0;s[i+116>>2]=256;s[i+120>>2]=0;s[i+124>>2]=0;s[i+128>>2]=0;s[i+132>>2]=256;r[i+152>>0]=1;u=i+148|0;s[u>>2]=0;s[i+140>>2]=0;s[i+144>>2]=0;b=1.0000000150474662e30;x=1.0000000150474662e30;w=1.0000000150474662e30;T=-1.0000000150474662e30;S=-1.0000000150474662e30;E=-1.0000000150474662e30;p=0;h=t;while(1){m=+f[h>>2];g=+f[h+4>>2];y=+f[h+8>>2];b=m<b?m:b;x=g<x?g:x;w=y<w?y:w;T=T<m?m:T;S=S<g?g:S;E=E<y?y:E;p=p+1|0;if((p|0)==(n|0))break;else h=h+16|0}m=T-b;g=S-x;y=E-w;if(m<g){s[i+168>>2]=g<y?2:1;h=m<y?0:2;v=i+168|0}else{s[i+168>>2]=m<y?2:0;h=g<y?1:2;v=i+168|0}s[i+160>>2]=h;p=s[v>>2]|0;if((h|0)==(p|0)){h=((h+1|0)>>>0)%3|0;s[i+160>>2]=h;p=s[v>>2]|0}O=3-p-h|0;s[i+164>>2]=O;if(((O+1|0)%3|0|0)==(s[v>>2]|0)){m=m*9788566967472434e-20;g=g*9788566967472434e-20;y=y*9788566967472434e-20}else{m=m*9788566967472434e-20*-1;g=g*9788566967472434e-20*-1;y=y*9788566967472434e-20*-1}f[i+56>>2]=m;f[i+60>>2]=g;f[i+64>>2]=y;f[i+68>>2]=0;if(m!=0)m=1/m;if(g!=0)g=1/g;if(y!=0)y=1/y;f[i+72>>2]=(b+T)*.5;f[i+76>>2]=(x+S)*.5;f[i+80>>2]=(w+E)*.5;f[i+84>>2]=0;h=i+248|0;r[h>>0]=1;p=i+244|0;s[p>>2]=0;d=i+236|0;s[d>>2]=0;s[i+240>>2]=0;if((n|0)>0){s[5004]=(s[5004]|0)+1;N=cM((n<<4|3)+16|0)|0;if((N|0)==0)N=0;else{s[(N+19&-16)+ -4>>2]=N;N=N+19&-16}L=s[d>>2]|0;if((L|0)>0){C=0;do{k=N+(C<<4)|0;if((k|0)!=0){O=(s[p>>2]|0)+(C<<4)|0;s[k+0>>2]=s[O+0>>2];s[k+4>>2]=s[O+4>>2];s[k+8>>2]=s[O+8>>2];s[k+12>>2]=s[O+12>>2]}C=C+1|0}while((C|0)!=(L|0))}C=s[p>>2]|0;if((C|0)!=0){if((r[h>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[C+ -4>>2]|0)}s[p>>2]=0}r[h>>0]=1;s[p>>2]=N;s[i+240>>2]=n;C=0;while(1){N=N+(C<<4)|0;if((N|0)!=0){s[N+0>>2]=s[i+216>>2];s[N+4>>2]=s[i+220>>2];s[N+8>>2]=s[i+224>>2];s[N+12>>2]=s[i+228>>2]}C=C+1|0;if((C|0)==(n|0))break;N=s[p>>2]|0}s[d>>2]=n;N=s[p>>2]|0;w=+f[i+72>>2];E=+f[i+76>>2];b=+f[i+80>>2];C=0;while(1){S=+f[t>>2];f[i+200>>2]=S;x=+f[t+4>>2];f[i+204>>2]=x;T=y*(+f[t+8>>2]-b);f[i+200>>2]=m*(S-w);f[i+204>>2]=g*(x-E);f[i+208>>2]=T;f[i+212>>2]=0;s[N+(C<<4)>>2]=~~+f[i+200+(s[i+164>>2]<<2)>>2];s[N+(C<<4)+4>>2]=~~+f[i+200+(s[v>>2]<<2)>>2];s[N+(C<<4)+8>>2]=~~+f[i+200+(s[i+160>>2]<<2)>>2];s[N+(C<<4)+12>>2]=C;C=C+1|0;if((C|0)==(n|0))break;t=t+16|0}t=s[d>>2]|0;if((t|0)>1)xC(i+232|0,0,t+ -1|0)}else s[d>>2]=n;s[i+92>>2]=s[i+88>>2];s[o>>2]=0;s[i+100>>2]=n;t=s[i+140>>2]|0;if((t|0)<(n|0)){if((s[i+144>>2]|0)<(n|0)){if((n|0)==0){v=0;N=t}else{s[5004]=(s[5004]|0)+1;v=cM((n<<2|3)+16|0)|0;if((v|0)==0)v=0;else{s[(v+19&-16)+ -4>>2]=v;v=v+19&-16}N=s[i+140>>2]|0}if((N|0)>0){k=0;do{C=v+(k<<2)|0;if((C|0)!=0)s[C>>2]=s[(s[u>>2]|0)+(k<<2)>>2];k=k+1|0}while((k|0)!=(N|0))}N=s[u>>2]|0;if((N|0)!=0){if((r[i+152>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[N+ -4>>2]|0)}s[u>>2]=0}r[i+152>>0]=1;s[u>>2]=v;s[i+144>>2]=n}do{v=(s[u>>2]|0)+(t<<2)|0;if((v|0)!=0)s[v>>2]=0;t=t+1|0}while((t|0)!=(n|0))}s[i+140>>2]=n;if((n|0)>0){t=0;do{v=s[o>>2]|0;if((v|0)==0){v=s[i+92>>2]|0;if((v|0)==0){s[5004]=(s[5004]|0)+1;v=cM(31)|0;if((v|0)!=0?(l=v+19&-16,s[l+ -4>>2]=v,(v+19&-16|0)!=0):0){N=s[i+100>>2]|0;s[l+4>>2]=N;s[l+8>>2]=0;s[5004]=(s[5004]|0)+1;N=cM((N*112|3)+16|0)|0;if((N|0)==0)N=0;else{s[(N+19&-16)+ -4>>2]=N;N=N+19&-16}s[(v+19&-16)>>2]=N;v=v+19&-16}else v=0;s[v+8>>2]=s[i+88>>2];s[i+88>>2]=v}else s[i+92>>2]=s[v+8>>2];N=s[v+4>>2]|0;if((N|0)>0){C=0;k=s[v>>2]|0;do{C=C+1|0;O=k;k=k+112|0;s[O>>2]=(C|0)<(N|0)?k:0}while((C|0)!=(N|0))}v=s[v>>2]|0;s[o>>2]=s[v>>2];if((v|0)==0)v=0;else a=85}else{s[o>>2]=s[v>>2];a=85}if((a|0)==85){a=0;O=v+104|0;s[v+0>>2]=0;s[v+4>>2]=0;s[v+8>>2]=0;s[v+12>>2]=0;s[v+16>>2]=0;s[O>>2]=-1}s[v+8>>2]=0;O=v+88|0;A=(s[p>>2]|0)+(t<<4)|0;s[O+0>>2]=s[A+0>>2];s[O+4>>2]=s[A+4>>2];s[O+8>>2]=s[A+8>>2];s[O+12>>2]=s[A+12>>2];s[v+104>>2]=-1;s[(s[u>>2]|0)+(t<<2)>>2]=v;t=t+1|0}while((t|0)<(n|0))}o=s[p>>2]|0;if((o|0)!=0){if((r[h>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[p>>2]=0}r[h>>0]=1;s[p>>2]=0;s[d>>2]=0;s[i+240>>2]=0;s[i+108>>2]=s[i+104>>2];s[i+112>>2]=0;s[i+116>>2]=n*6;s[i+172>>2]=0;s[i+176>>2]=0;s[i+156>>2]=-3;s[i+184>>2]=0;s[i+188>>2]=0;s[i+192>>2]=0;s[i+196>>2]=0;yC(i+56|0,0,n,i+184|0);s[i+180>>2]=s[i+184>>2];n=s[p>>2]|0;if((n|0)!=0){if((r[h>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[p>>2]=0}n=s[e+4>>2]|0;if((n|0)<0){if((s[e+8>>2]|0)<0){o=s[e+12>>2]|0;if((o|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=0;s[e+8>>2]=0}do{O=(s[e+12>>2]|0)+(n<<4)|0;s[O+0>>2]=s[i+40>>2];s[O+4>>2]=s[i+44>>2];s[O+8>>2]=s[i+48>>2];s[O+12>>2]=s[i+52>>2];n=n+1|0}while((n|0)!=0)}s[e+4>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;s[i+32>>2]=0;o=s[e+24>>2]|0;if((o|0)<0){if((s[e+28>>2]|0)<0){n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+28>>2]=0}do{n=(s[e+32>>2]|0)+(o*12|0)|0;if((n|0)!=0){s[n+0>>2]=s[i+24>>2];s[n+4>>2]=s[i+28>>2];s[n+8>>2]=s[i+32>>2]}o=o+1|0}while((o|0)!=0)}s[e+24>>2]=0;o=s[e+44>>2]|0;if((o|0)<0){n=s[e+52>>2]|0;if((s[e+48>>2]|0)<0){if((n|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=0;s[e+48>>2]=0;n=0}u=o;do{o=n+(u<<2)|0;if((o|0)!=0)s[o>>2]=0;u=u+1|0}while((u|0)!=0)}s[e+44>>2]=0;n=s[i+180>>2]|0;if((s[n+104>>2]|0)<0){s[n+104>>2]=0;s[5004]=(s[5004]|0)+1;o=cM(23)|0;if((o|0)!=0){s[(o+19&-16)+ -4>>2]=o;v=o+19&-16;if((o+19&-16|0)!=0)s[v>>2]=n}else v=0;u=1;d=1;n=0;while(1){o=s[v+(n<<2)>>2]|0;if((s[o+100>>2]|0)>-1){f[i+232+(s[i+164>>2]<<2)>>2]=+(s[o+88>>2]|0);f[i+232+(s[i+168>>2]<<2)>>2]=+(s[o+92>>2]|0);m=+(s[o+96>>2]|0)}else{m=+EC(o+24|0);m=m/+EC(o+72|0);f[i+232+(s[i+164>>2]<<2)>>2]=m;m=+EC(o+40|0);m=m/+EC(o+72|0);f[i+232+(s[i+168>>2]<<2)>>2]=m;m=+EC(o+56|0);m=m/+EC(o+72|0)}f[i+232+(s[i+160>>2]<<2)>>2]=m;y=+f[i+232>>2]*+f[i+56>>2]+ +f[i+72>>2];m=+f[i+236>>2]*+f[i+60>>2]+ +f[i+76>>2];g=+f[i+240>>2]*+f[i+64>>2]+ +f[i+80>>2];h=s[e+4>>2]|0;do if((h|0)==(s[e+8>>2]|0)){a=(h|0)==0?1:h<<1;if((h|0)>=(a|0))break;if((a|0)==0)l=0;else{s[5004]=(s[5004]|0)+1;l=cM((a<<4|3)+16|0)|0;if((l|0)==0)l=0;else{s[(l+19&-16)+ -4>>2]=l;l=l+19&-16}h=s[e+4>>2]|0}if((h|0)>0){p=0;do{O=l+(p<<4)|0;A=(s[e+12>>2]|0)+(p<<4)|0;s[O+0>>2]=s[A+0>>2];s[O+4>>2]=s[A+4>>2];s[O+8>>2]=s[A+8>>2];s[O+12>>2]=s[A+12>>2];p=p+1|0}while((p|0)!=(h|0))}h=s[e+12>>2]|0;if((h|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=l;s[e+8>>2]=a;h=s[e+4>>2]|0}while(0);O=s[e+12>>2]|0;f[O+(h<<4)>>2]=y;f[O+(h<<4)+4>>2]=m;f[O+(h<<4)+8>>2]=g;f[O+(h<<4)+12>>2]=0;s[e+4>>2]=(s[e+4>>2]|0)+1;o=s[o+8>>2]|0;if((o|0)!=0){a=o;l=-1;h=-1;do{p=a+20|0;t=s[p>>2]|0;if((t|0)<0){t=s[e+24>>2]|0;s[i+12>>2]=0;s[i+16>>2]=0;s[i+20>>2]=0;N=s[e+28>>2]|0;do if((t|0)==(N|0)){N=(t|0)==0?1:t<<1;if((t|0)>=(N|0)){C=t;N=t;break}if((N|0)==0){C=0;A=t}else{s[5004]=(s[5004]|0)+1;C=cM((N*12|3)+16|0)|0;if((C|0)==0)C=0;else{s[(C+19&-16)+ -4>>2]=C;C=C+19&-16}A=s[e+24>>2]|0}if((A|0)>0){L=0;do{k=C+(L*12|0)|0;if((k|0)!=0){O=(s[e+32>>2]|0)+(L*12|0)|0;s[k+0>>2]=s[O+0>>2];s[k+4>>2]=s[O+4>>2];s[k+8>>2]=s[O+8>>2]}L=L+1|0}while((L|0)!=(A|0))}k=s[e+32>>2]|0;if((k|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[k+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=C;s[e+28>>2]=N;C=s[e+24>>2]|0}else C=t;while(0);k=(s[e+32>>2]|0)+(C*12|0)|0;if((k|0)==0)A=N;else{s[k+0>>2]=s[i+12>>2];s[k+4>>2]=s[i+16>>2];s[k+8>>2]=s[i+20>>2];C=s[e+24>>2]|0;A=s[e+28>>2]|0}N=C+1|0;s[e+24>>2]=N;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;do if((N|0)==(A|0)){N=(A|0)==0?1:A<<1;if((A|0)>=(N|0))break;if((N|0)==0)C=0;else{s[5004]=(s[5004]|0)+1;C=cM((N*12|3)+16|0)|0;if((C|0)==0)C=0;else{s[(C+19&-16)+ -4>>2]=C;C=C+19&-16}A=s[e+24>>2]|0}if((A|0)>0){L=0;do{k=C+(L*12|0)|0;if((k|0)!=0){O=(s[e+32>>2]|0)+(L*12|0)|0;s[k+0>>2]=s[O+0>>2];s[k+4>>2]=s[O+4>>2];s[k+8>>2]=s[O+8>>2]}L=L+1|0}while((L|0)!=(A|0))}k=s[e+32>>2]|0;if((k|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[k+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=C;s[e+28>>2]=N;A=s[e+24>>2]|0}else A=N;while(0);N=s[e+32>>2]|0;C=N+(A*12|0)|0;if((C|0)!=0){s[C+0>>2]=s[i+0>>2];s[C+4>>2]=s[i+4>>2];s[C+8>>2]=s[i+8>>2];A=s[e+24>>2]|0;N=s[e+32>>2]|0}s[e+24>>2]=A+1;s[p>>2]=t;s[(s[a+8>>2]|0)+20>>2]=t+1;s[N+(t*12|0)+4>>2]=1;s[N+((t+1|0)*12|0)+4>>2]=-1;C=s[a+12>>2]|0;k=s[C+104>>2]|0;if((k|0)<0){s[C+104>>2]=u;do if((u|0)==(d|0)){k=(d|0)==0?1:d<<1;if((d|0)>=(k|0))break;do if((k|0)==0)L=0;else{s[5004]=(s[5004]|0)+1;L=cM((k<<2|3)+16|0)|0;if((L|0)==0){L=0;break}s[(L+19&-16)+ -4>>2]=L;L=L+19&-16}while(0);if((d|0)>0){O=0;do{A=L+(O<<2)|0;if((A|0)!=0)s[A>>2]=s[v+(O<<2)>>2];O=O+1|0}while((O|0)!=(d|0))}if((v|0)==0){v=L;d=k;break}s[5006]=(s[5006]|0)+1;hM(s[v+ -4>>2]|0);v=L;d=k}while(0);k=v+(u<<2)|0;if((k|0)!=0)s[k>>2]=C;C=u+1|0}else{C=u;u=k}s[N+(t*12|0)+8>>2]=u;s[N+((t+1|0)*12|0)+8>>2]=n;t=s[p>>2]|0;u=C}if((h|0)>-1){s[(s[e+32>>2]|0)+(t*12|0)>>2]=h-t;h=s[p>>2]|0}else{h=t;l=t}a=s[a>>2]|0}while((a|0)!=(o|0));s[(s[e+32>>2]|0)+(l*12|0)>>2]=h-l}o=n+1|0;if((o|0)<(u|0))n=o;else break}if((n|0)>-1){a=0;do{n=s[(s[v+(a<<2)>>2]|0)+8>>2]|0;if((n|0)!=0){u=n;do{l=u+20|0;if((s[l>>2]|0)>-1){t=s[e+44>>2]|0;do if((t|0)==(s[e+48>>2]|0)){h=(t|0)==0?1:t<<1;if((t|0)>=(h|0))break;if((h|0)==0)p=0;else{s[5004]=(s[5004]|0)+1;p=cM((h<<2|3)+16|0)|0;if((p|0)==0)p=0;else{s[(p+19&-16)+ -4>>2]=p;p=p+19&-16}t=s[e+44>>2]|0}if((t|0)>0){d=0;do{N=p+(d<<2)|0;if((N|0)!=0)s[N>>2]=s[(s[e+52>>2]|0)+(d<<2)>>2];d=d+1|0}while((d|0)!=(t|0))}d=s[e+52>>2]|0;if((d|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[d+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=p;s[e+48>>2]=h;t=s[e+44>>2]|0}while(0);h=(s[e+52>>2]|0)+(t<<2)|0;if((h|0)!=0){s[h>>2]=s[l>>2];t=s[e+44>>2]|0}s[e+44>>2]=t+1;l=u;do{s[l+20>>2]=-1;l=s[(s[l+8>>2]|0)+4>>2]|0}while((l|0)!=(u|0))}u=s[u>>2]|0}while((u|0)!=(n|0))}a=a+1|0}while((a|0)<(o|0))}if((v|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[v+ -4>>2]|0)}}TC(i+56|0);c=i;return}function xC(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0;a=c;c=c+16|0;u=s[e+12>>2]|0;i=s[u+(((n+t|0)/2|0)<<4)>>2]|0;o=s[u+(((n+t|0)/2|0)<<4)+4>>2]|0;r=s[u+(((n+t|0)/2|0)<<4)+8>>2]|0;f=t;l=n;while(1){while(1){h=s[u+(f<<4)+4>>2]|0;if((h|0)>=(o|0)){if((h|0)!=(o|0))break;h=s[u+(f<<4)>>2]|0;if((h|0)>=(i|0)){if((h|0)!=(i|0))break;if((s[u+(f<<4)+8>>2]|0)>=(r|0))break}}f=f+1|0}while(1){h=s[u+(l<<4)+4>>2]|0;if((o|0)>=(h|0)){if((o|0)!=(h|0))break;h=s[u+(l<<4)>>2]|0;if((i|0)>=(h|0)){if((i|0)!=(h|0))break;if((r|0)>=(s[u+(l<<4)+8>>2]|0))break}}l=l+ -1|0}if((f|0)<=(l|0)){h=u+(f<<4)|0;s[a+0>>2]=s[h+0>>2];s[a+4>>2]=s[h+4>>2];s[a+8>>2]=s[h+8>>2];s[a+12>>2]=s[h+12>>2];u=u+(l<<4)|0;s[h+0>>2]=s[u+0>>2];s[h+4>>2]=s[u+4>>2];s[h+8>>2]=s[u+8>>2];s[h+12>>2]=s[u+12>>2];h=(s[e+12>>2]|0)+(l<<4)|0;s[h+0>>2]=s[a+0>>2];s[h+4>>2]=s[a+4>>2];s[h+8>>2]=s[a+8>>2];s[h+12>>2]=s[a+12>>2];f=f+1|0;l=l+ -1|0}if((f|0)>(l|0))break;u=s[e+12>>2]|0}if((l|0)>(t|0))xC(e,t,l);if((f|0)>=(n|0)){c=a;return}xC(e,f,n);c=a;return}function TC(e){e=e|0;var t=0,n=0,i=0;t=c;n=s[e+92>>2]|0;if((n|0)!=0){if((r[e+96>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+92>>2]=0}r[e+96>>0]=1;s[e+92>>2]=0;s[e+84>>2]=0;s[e+88>>2]=0;n=s[e+64>>2]|0;if((n|0)!=0)do{s[e+64>>2]=s[n+8>>2];i=s[n>>2]|0;if((i|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0);n=s[e+64>>2]|0}while((n|0)!=0);i=s[e+48>>2]|0;if((i|0)!=0)do{s[e+48>>2]=s[i+8>>2];n=s[i>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0);i=s[e+48>>2]|0}while((i|0)!=0);n=s[e+32>>2]|0;if((n|0)==0){c=t;return}do{s[e+32>>2]=s[n+8>>2];i=s[n>>2]|0;if((i|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0);n=s[e+32>>2]|0}while((n|0)!=0);c=t;return}function NC(e){e=e|0;var t=0,n=0;t=c;do{s[e+4>>2]=0;f[e+8>>2]=0;n=s[e+24>>2]|0;if((n|0)!=0)NC(n);e=s[e+28>>2]|0}while((e|0)!=0);c=t;return}function CC(e){e=e|0;var t=0,n=0,r=0,i=0;t=c;c=c+16|0;n=s[5022]|0;if((s[n>>2]|0)!=(e|0)){i=s[n+24>>2]|0;e:do if((i|0)==0)r=5;else while(1){if((s[i>>2]|0)==(e|0)){n=i;break e}i=s[i+28>>2]|0;if((i|0)==0){r=5;break}}while(0);if((r|0)==5){r=cM(36)|0;t:do if((r|0)==0){while(1){r=s[5158]|0;s[5158]=r+0;if((r|0)==0)break;XD[r&3]();r=cM(36)|0;if((r|0)!=0)break t}i=On(4)|0;s[i>>2]=20472;Ln(i|0,20520,265)}while(0);s[r>>2]=e;e=r+4|0;i=r+20|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[i>>2]=n;s[r+24>>2]=0;i=r+28|0;s[i>>2]=0;s[r+32>>2]=0;NC(r);s[i>>2]=s[n+24>>2];s[n+24>>2]=r;n=r}s[5022]=n}r=n+4|0;s[r>>2]=(s[r>>2]|0)+1;r=n+16|0;i=s[r>>2]|0;s[r>>2]=i+1;if((i|0)!=0){c=t;return}Pn(t|0,0)|0;i=s[5008]|0;s[n+12>>2]=(s[t+4>>2]|0)-(s[i+4>>2]|0)+(((s[t>>2]|0)-(s[i>>2]|0)|0)*1e6|0);c=t;return}function kC(){var e=0,t=0;e=c;t=cM(8)|0;e:do if((t|0)==0){while(1){t=s[5158]|0;s[5158]=t+0;if((t|0)==0)break;XD[t&3]();t=cM(8)|0;if((t|0)!=0)break e}t=On(4)|0;s[t>>2]=20472;Ln(t|0,20520,265)}while(0);s[5008]=t;Pn(t|0,0)|0;s[5010]=20080;s[5011]=0;s[5012]=0;s[5013]=0;s[5014]=0;s[5015]=0;s[5016]=0;s[5017]=0;s[5018]=0;NC(20040);c=e;return}function LC(e,t){e=e|0;t=t|0;var n=0;n=c;c=c+16|0;s[n>>2]=t;t=s[g>>2]|0;tn(t|0,e|0,n|0)|0;kn(10,t|0)|0;An()}function AC(){var e=0,t=0,n=0,r=0;e=c;c=c+16|0;if((Sn(20288,3)|0)!=0)LC(20296,e);t=bn(s[5070]|0)|0;if((t|0)==0)LC(20264,e);t=s[t>>2]|0;if((t|0)==0)LC(20264,e);n=s[t+48>>2]|0;r=s[t+52>>2]|0;if(!((n&-256|0)==1126902528&(r|0)==1129074247)){s[e>>2]=20112;LC(20224,e)}if((n|0)==1126902529&(r|0)==1129074247)n=s[t+44>>2]|0;else n=t+80|0;s[e+12>>2]=n;r=s[t>>2]|0;t=s[r+4>>2]|0;if(zC(20656,r,e+12|0)|0){r=s[e+12>>2]|0;r=dD[s[(s[r>>2]|0)+8>>2]&127](r)|0;s[e>>2]=20112;s[e+4>>2]=t;s[e+8>>2]=r;LC(20128,e)}else{s[e>>2]=20112;s[e+4>>2]=t;LC(20176,e)}}function OC(){var e=0;e=c;c=c+16|0;if((xn(20280,273)|0)==0){c=e;return}else LC(20352,e)}function MC(e){e=e|0;var t=0;t=c;c=c+16|0;hM(e);if((Cn(s[5070]|0,0)|0)==0){c=t;return}else LC(20408,t)}function _C(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function DC(e){e=e|0;return}function PC(e){e=e|0;return 20488}function HC(e){e=e|0;var t=0;t=c;c=c+16|0;XD[e&3]();LC(20536,t)}function BC(){var e=0,t=0;t=c;c=c+16|0;if((Sn(20288,3)|0)!=0)LC(20296,t);t=bn(s[5070]|0)|0;if(((t|0)!=0?(e=s[t>>2]|0,(e|0)!=0):0)?(s[e+52>>2]|0)==1129074247?(s[e+48>>2]&-256|0)==1126902528:0:0)HC(s[e+12>>2]|0);t=s[5026]|0;s[5026]=t+0;HC(t)}function jC(e){e=e|0;return}function FC(e){e=e|0;return}function IC(e){e=e|0;return}function qC(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function RC(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function UC(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function zC(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;c=c+64|0;if((e|0)==(t|0)){o=1;c=r;return o|0}if((t|0)==0){o=0;c=r;return o|0}t=KC(t,20784)|0;if((t|0)==0){o=0;c=r;return o|0}o=r+0|0;i=o+56|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(i|0));s[r>>2]=t;s[r+8>>2]=e;s[r+12>>2]=-1;s[r+48>>2]=1;JD[s[(s[t>>2]|0)+28>>2]&127](t,r,s[n>>2]|0,1);if((s[r+24>>2]|0)!=1){o=0;c=r;return o|0}s[n>>2]=s[r+16>>2];o=1;c=r;return o|0}function WC(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0;i=c;o=s[e+16>>2]|0;if((o|0)==0){s[e+16>>2]=t;s[e+24>>2]=n;s[e+36>>2]=1;c=i;return}if((o|0)!=(t|0)){s[e+36>>2]=(s[e+36>>2]|0)+1;s[e+24>>2]=2;r[e+54>>0]=1;c=i;return}if((s[e+24>>2]|0)!=2){c=i;return}s[e+24>>2]=n;c=i;return}function XC(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;if((s[t+8>>2]|0)!=(e|0)){c=i;return}WC(t,n,r);c=i;return}function VC(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;if((e|0)==(s[t+8>>2]|0)){WC(t,n,r);c=i;return}else{e=s[e+8>>2]|0;JD[s[(s[e>>2]|0)+28>>2]&127](e,t,n,r);c=i;return}}function $C(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0;i=c;o=s[e+4>>2]|0;if((o&1|0)==0)u=o>>8;else u=s[(s[n>>2]|0)+(o>>8)>>2]|0;e=s[e>>2]|0;JD[s[(s[e>>2]|0)+28>>2]&127](e,t,n+u|0,(o&2|0)!=0?r:2);c=i;return}function JC(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0;o=c;if((e|0)==(s[t+8>>2]|0)){WC(t,n,i);c=o;return}u=s[e+12>>2]|0;$C(e+16|0,t,n,i);if((u|0)<=1){c=o;return}a=e+24|0;while(1){$C(a,t,n,i);if((r[t+54>>0]|0)!=0){i=7;break}a=a+8|0;if(!(a>>>0<(e+(u<<3)+16|0)>>>0)){i=7;break}}if((i|0)==7){c=o;return}}function KC(e,t){e=e|0;t=t|0;var n=0,o=0,u=0,a=0;n=c;c=c+64|0;o=s[e>>2]|0;u=e+(s[o+ -8>>2]|0)|0;o=s[o+ -4>>2]|0;s[n>>2]=t;s[n+4>>2]=e;s[n+8>>2]=20728;a=n+12|0;e=a+40|0;do{s[a>>2]=0;a=a+4|0}while((a|0)<(e|0));i[n+52>>1]=0;r[n+54>>0]=0;do if((o|0)==(t|0)){s[n+48>>2]=1;TD[s[(s[o>>2]|0)+20>>2]&7](o,n,u,u,1,0);t=(s[n+24>>2]|0)==1?u:0}else{aD[s[(s[o>>2]|0)+24>>2]&31](o,n,u,1,0);t=s[n+36>>2]|0;if((t|0)==0){if((s[n+40>>2]|0)!=1){t=0;break}if((s[n+28>>2]|0)!=1){t=0;break}t=(s[n+32>>2]|0)==1?s[n+20>>2]|0:0;break}else if((t|0)!=1){t=0;break}if((s[n+24>>2]|0)!=1){if((s[n+40>>2]|0)!=0){t=0;break}if((s[n+28>>2]|0)!=1){t=0;break}if((s[n+32>>2]|0)!=1){t=0;break}}t=s[n+16>>2]|0}while(0);c=n;return t|0}function QC(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;o=c;r[e+53>>0]=1;if((s[e+4>>2]|0)!=(n|0)){c=o;return}r[e+52>>0]=1;n=s[e+16>>2]|0;if((n|0)==0){s[e+16>>2]=t;s[e+24>>2]=i;s[e+36>>2]=1;if(!((i|0)==1?(s[e+48>>2]|0)==1:0)){c=o;return}r[e+54>>0]=1;c=o;return}if((n|0)!=(t|0)){s[e+36>>2]=(s[e+36>>2]|0)+1;r[e+54>>0]=1;c=o;return}t=s[e+24>>2]|0;if((t|0)==2)s[e+24>>2]=i;else i=t;if(!((i|0)==1?(s[e+48>>2]|0)==1:0)){c=o;return}r[e+54>>0]=1;c=o;return}function GC(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,f=0,l=0,h=0,p=0,d=0;f=c;if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)!=(n|0)){c=f;return}if((s[t+28>>2]|0)==1){c=f;return}s[t+28>>2]=i;c=f;return}if((e|0)!=(s[t>>2]|0)){l=s[e+12>>2]|0;rM(e+16|0,t,n,i,o);if((l|0)<=1){c=f;return}h=s[e+8>>2]|0;if((h&2|0)==0?(s[t+36>>2]|0)!=1:0){if((h&1|0)==0){h=e+24|0;while(1){if((r[t+54>>0]|0)!=0){h=43;break}if((s[t+36>>2]|0)==1){h=43;break}rM(h,t,n,i,o);h=h+8|0;if(!(h>>>0<(e+(l<<3)+16|0)>>>0)){h=43;break}}if((h|0)==43){c=f;return}}h=e+24|0;while(1){if((r[t+54>>0]|0)!=0){h=43;break}if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==1:0){h=43;break}rM(h,t,n,i,o);h=h+8|0;if(!(h>>>0<(e+(l<<3)+16|0)>>>0)){h=43;break}}if((h|0)==43){c=f;return}}h=e+24|0;while(1){if((r[t+54>>0]|0)!=0){h=43;break}rM(h,t,n,i,o);h=h+8|0;if(!(h>>>0<(e+(l<<3)+16|0)>>>0)){h=43;break}}if((h|0)==43){c=f;return}}if((s[t+16>>2]|0)!=(n|0)?(s[t+20>>2]|0)!=(n|0):0){s[t+32>>2]=i;if((s[t+44>>2]|0)==4){c=f;return}p=s[e+12>>2]|0;e:do if((p|0)>0){d=0;h=0;l=e+16|0;t:do{r[t+52>>0]=0;r[t+53>>0]=0;YC(l,t,n,n,1,o);if((r[t+54>>0]|0)!=0)break;do if((r[t+53>>0]|0)!=0){if((r[t+52>>0]|0)==0)if((s[e+8>>2]&1|0)==0){h=1;break t}else{h=1;break}if((s[t+24>>2]|0)==1){h=25;break e}if((s[e+8>>2]&2|0)==0){h=25;break e}else{d=1;h=1}}while(0);l=l+8|0}while(l>>>0<(e+(p<<3)+16|0)>>>0);if(d){a=h;h=24}else{u=h;h=21}}else{u=0;h=21}while(0);if((h|0)==21){s[t+20>>2]=n;s[t+40>>2]=(s[t+40>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0){r[t+54>>0]=1;if(u)h=25;else h=26}else{a=u;h=24}}if((h|0)==24)if(a)h=25;else h=26;if((h|0)==25){s[t+44>>2]=3;c=f;return}else if((h|0)==26){s[t+44>>2]=4;c=f;return}}if((i|0)!=1){c=f;return}s[t+32>>2]=1;c=f;return}function YC(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;var u=0,a=0,f=0;u=c;a=s[e+4>>2]|0;if((a&1|0)==0)f=a>>8;else f=s[(s[r>>2]|0)+(a>>8)>>2]|0;e=s[e>>2]|0;TD[s[(s[e>>2]|0)+20>>2]&7](e,t,n,r+f|0,(a&2|0)!=0?i:2,o);c=u;return}function ZC(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0;o=c;c=c+288|0;if((s[e+16>>2]|0)==0){B=s[e+12>>2]|0;e=s[e+20>>2]|0;p=+f[t>>2];m=+f[t+4>>2];w=+f[t+8>>2];a=+f[t+16>>2];g=+f[t+20>>2];u=+f[t+24>>2];h=+f[t+32>>2];y=+f[t+36>>2];l=+f[t+40>>2];M=+f[t+48>>2];O=+f[t+52>>2];A=+f[t+56>>2];H=+f[n>>2];P=+f[n+16>>2];T=+f[n+32>>2];D=+f[n+4>>2];_=+f[n+20>>2];S=+f[n+36>>2];E=+f[n+8>>2];N=+f[n+24>>2];x=+f[n+40>>2];L=-+f[n+48>>2];k=-+f[n+52>>2];v=-+f[n+56>>2];t=s[(s[B>>2]|0)+64>>2]|0;C=-+f[e+48>>2];b=-+f[e+52>>2];d=-+f[e+56>>2];f[o+32>>2]=(p*H+a*P+h*T)*C+(p*D+a*_+h*S)*b+(p*E+a*N+h*x)*d;f[o+36>>2]=(m*H+g*P+y*T)*C+(m*D+g*_+y*S)*b+(m*E+g*N+y*x)*d;f[o+40>>2]=(w*H+u*P+l*T)*C+(w*D+u*_+l*S)*b+(w*E+u*N+l*x)*d;f[o+44>>2]=0;WD[t&127](o+48|0,B,o+32|0);d=+f[o+48>>2];b=+f[o+52>>2];C=+f[o+56>>2];T=M*H+O*P+A*T+(H*L+P*k+T*v)+((p*H+a*P+h*T)*d+(m*H+g*P+y*T)*b+(w*H+u*P+l*T)*C);S=M*D+O*_+A*S+(D*L+_*k+S*v)+((p*D+a*_+h*S)*d+(m*D+g*_+y*S)*b+(w*D+u*_+l*S)*C);C=M*E+O*N+A*x+(E*L+N*k+x*v)+((p*E+a*N+h*x)*d+(m*E+g*N+y*x)*b+(w*E+u*N+l*x)*C);x=+f[e+48>>2];l=+f[e+52>>2];N=+f[e+56>>2];u=N*C+(x*T+l*S)- +f[e+64>>2];E=+f[n>>2];w=+f[n+4>>2];b=+f[n+8>>2];y=+f[n+16>>2];g=+f[n+20>>2];m=+f[n+24>>2];d=+f[n+32>>2];h=+f[n+36>>2];a=+f[n+40>>2];p=y*(T-x*u)+(S-l*u)*g+(C-N*u)*m+ +f[n+52>>2];v=(T-x*u)*d+(S-l*u)*h+(C-N*u)*a+ +f[n+56>>2];f[o+16>>2]=b*(C-N*u)+(E*(T-x*u)+w*(S-l*u))+ +f[n+48>>2];f[o+20>>2]=p;f[o+24>>2]=v;f[o+28>>2]=0;v=+f[e+48>>2];p=+f[e+52>>2];l=+f[e+56>>2];f[o>>2]=E*v+w*p+b*l;f[o+4>>2]=v*y+p*g+l*m;f[o+8>>2]=v*d+p*h+l*a;f[o+12>>2]=0;zD[s[(s[i>>2]|0)+16>>2]&15](i,o,o+16|0,u);c=o;return}else{I=s[e+4>>2]|0;r[I+312>>0]=0;s[I>>2]=0;r[I+356>>0]=1;f[I+292>>2]=0xde0b6b000000000;f[I+296>>2]=0xde0b6b000000000;f[I+300>>2]=0xde0b6b000000000;f[I+304>>2]=0;s[I+336>>2]=0;s[I+340>>2]=0;s[I+344>>2]=0;s[I+348>>2]=0;r[I+352>>0]=0;r[I+332>>0]=r[I+332>>0]&-16;I=s[e+12>>2]|0;F=s[e+16>>2]|0;j=s[I+4>>2]|0;B=s[F+4>>2]|0;P=+CD[s[(s[I>>2]|0)+48>>2]&15](I);q=s[e+16>>2]|0;H=+CD[s[(s[q>>2]|0)+48>>2]&15](q);q=s[e+4>>2]|0;e=s[e+8>>2]|0;s[o+200>>2]=13392;f[o+204>>2]=0;f[o+208>>2]=1;f[o+212>>2]=0;f[o+216>>2]=0;s[o+220>>2]=e;s[o+224>>2]=q;s[o+228>>2]=I;s[o+232>>2]=F;s[o+236>>2]=j;s[o+240>>2]=B;f[o+244>>2]=P;f[o+248>>2]=H;r[o+252>>0]=0;s[o+260>>2]=-1;s[o+272>>2]=1;s[o+276>>2]=1;f[o+192>>2]=0xde0b6b000000000;s[o+64>>2]=s[t+0>>2];s[o+68>>2]=s[t+4>>2];s[o+72>>2]=s[t+8>>2];s[o+76>>2]=s[t+12>>2];s[o+80>>2]=s[t+16>>2];s[o+84>>2]=s[t+20>>2];s[o+88>>2]=s[t+24>>2];s[o+92>>2]=s[t+28>>2];s[o+96>>2]=s[t+32>>2];s[o+100>>2]=s[t+36>>2];s[o+104>>2]=s[t+40>>2];s[o+108>>2]=s[t+44>>2];s[o+112>>2]=s[t+48>>2];s[o+116>>2]=s[t+52>>2];s[o+120>>2]=s[t+56>>2];s[o+124>>2]=s[t+60>>2];s[o+128>>2]=s[n+0>>2];s[o+132>>2]=s[n+4>>2];s[o+136>>2]=s[n+8>>2];s[o+140>>2]=s[n+12>>2];s[o+144>>2]=s[n+16>>2];s[o+148>>2]=s[n+20>>2];s[o+152>>2]=s[n+24>>2];s[o+156>>2]=s[n+28>>2];s[o+160>>2]=s[n+32>>2];s[o+164>>2]=s[n+36>>2];s[o+168>>2]=s[n+40>>2];s[o+172>>2]=s[n+44>>2];s[o+176>>2]=s[n+48>>2];s[o+180>>2]=s[n+52>>2];s[o+184>>2]=s[n+56>>2];s[o+188>>2]=s[n+60>>2];rO(o+200|0,o+64|0,i,0,0);c=o;return}}function ek(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0;a=c;c=c+304|0;l=+f[n+48>>2]- +f[t+48>>2];p=+f[n+52>>2]- +f[t+52>>2];h=+f[n+56>>2]- +f[t+56>>2];zd(t,n,a+256|0,a+192|0);g=+f[a+192>>2];y=+f[a+256>>2]*g;b=g*+f[a+260>>2];g=g*+f[a+264>>2];f[a+176>>2]=y;f[a+180>>2]=b;f[a+184>>2]=g;f[a+188>>2]=0;m=+f[o+48>>2]- +f[i+48>>2];d=+f[o+52>>2]- +f[i+52>>2];v=+f[o+56>>2]- +f[i+56>>2];zd(i,o,a+256|0,a+192|0);E=+f[a+192>>2];x=+f[a+256>>2]*E;S=E*+f[a+260>>2];E=E*+f[a+264>>2];f[a+160>>2]=x;f[a+164>>2]=S;f[a+168>>2]=E;f[a+172>>2]=0;o=s[e+12>>2]|0;w=+CD[s[(s[o>>2]|0)+16>>2]&15](o);o=s[e+16>>2]|0;if((o|0)==0)T=0;else T=+CD[s[(s[o>>2]|0)+16>>2]&15](o);g=w*+X(+(y*y+b*b+g*g))+T*+X(+(x*x+S*S+E*E));if(g+ +X(+((m-l)*(m-l)+(d-p)*(d-p)+(v-h)*(v-h)))==0){n=0;c=a;return n|0}s[a+256>>2]=10224;f[a+292>>2]=0xde0b6b000000000;r[a+296>>0]=0;ZC(e,t,i,a+256|0);n=(r[a+296>>0]|0)==0;s[a+144>>2]=s[a+276>>2];s[a+148>>2]=s[a+280>>2];s[a+152>>2]=s[a+284>>2];s[a+156>>2]=s[a+288>>2];if(n){n=0;c=a;return n|0}y=+f[a+260>>2];w=+f[a+264>>2];S=+f[a+268>>2];if(g+((m-l)*y+(d-p)*w+(v-h)*S)<=1.1920928955078125e-7){n=0;c=a;return n|0}T=+f[a+272>>2];E=+f[a+292>>2]+ +f[u+172>>2];b=0;o=0;while(1){if(!(E>.0010000000474974513)){i=18;break}n=s[u+168>>2]|0;if((n|0)!=0){N=s[(s[n>>2]|0)+20>>2]|0;f[a+128>>2]=1;f[a+132>>2]=1;f[a+136>>2]=1;f[a+140>>2]=0;vD[N&7](n,a+144|0,.20000000298023224,a+128|0)}y=g+((v-h)*S+((d-p)*w+(m-l)*y));if(y<=1.1920928955078125e-7){u=0;i=19;break}x=b+E/y;if(!(!(x<0)&!(x>1)&!(x<=b))){u=0;i=19;break}Dd(t,l,p,h,a+176|0,x,a+192|0);Dd(i,m,d,v,a+160|0,x,a+64|0);n=s[u+168>>2]|0;if((n|0)!=0){N=s[(s[n>>2]|0)+20>>2]|0;f[a+48>>2]=1;f[a+52>>2]=0;f[a+56>>2]=0;f[a+60>>2]=0;vD[N&7](n,a+240|0,.20000000298023224,a+48|0)}fD[s[s[u>>2]>>2]&31](u,x);s[a>>2]=10224;f[a+36>>2]=0xde0b6b000000000;r[a+40>>0]=0;ZC(e,a+192|0,a+64|0,a);if((r[a+40>>0]|0)==0){i=16;break}E=+f[a+36>>2]+ +f[u+172>>2];s[a+144>>2]=s[a+20>>2];s[a+148>>2]=s[a+24>>2];s[a+152>>2]=s[a+28>>2];s[a+156>>2]=s[a+32>>2];n=o+1|0;if((o|0)>63){i=17;break}else{y=+f[a+4>>2];w=+f[a+8>>2];S=+f[a+12>>2];T=+f[a+16>>2];b=x;o=n}}if((i|0)==16){WD[s[(s[u>>2]|0)+8>>2]&127](u,-1,o);N=0;c=a;return N|0}else if((i|0)==17){WD[s[(s[u>>2]|0)+8>>2]&127](u,-2,n);N=0;c=a;return N|0}else if((i|0)==18){f[u+164>>2]=b;f[u+132>>2]=y;f[u+136>>2]=w;f[u+140>>2]=S;f[u+144>>2]=T;s[u+148>>2]=s[a+144>>2];s[u+152>>2]=s[a+148>>2];s[u+156>>2]=s[a+152>>2];s[u+160>>2]=s[a+156>>2];N=1;c=a;return N|0}else if((i|0)==19){c=a;return u|0}return 0}function tk(e){e=e|0;return}function nk(e){e=e|0;return}function rk(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function ik(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function sk(e,t,n){e=e|0;t=t|0;n=n|0;return}function ok(e,t,n){e=e|0;t=t|0;n=n|0;return}function uk(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0;o=c;if(!(+f[e+36>>2]>i)){c=o;return}r[e+40>>0]=1;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[n+0>>2];s[e+24>>2]=s[n+4>>2];s[e+28>>2]=s[n+8>>2];s[e+32>>2]=s[n+12>>2];f[e+36>>2]=i;c=o;return}function ak(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+12>>2]=s[t+0>>2];s[e+16>>2]=s[t+4>>2];s[e+20>>2]=s[t+8>>2];s[e+24>>2]=s[t+12>>2];_S(e);c=n;return}function fk(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0;i=c;a=s[e+96>>2]|0;if((a|0)==(s[e+100>>2]|0)?(o=(a|0)==0?1:a<<1,(a|0)<(o|0)):0){if((o|0)==0)u=0;else{s[5004]=(s[5004]|0)+1;u=cM((o<<4|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+96>>2]|0}if((a|0)>0){f=0;do{l=u+(f<<4)|0;h=(s[e+104>>2]|0)+(f<<4)|0;s[l+0>>2]=s[h+0>>2];s[l+4>>2]=s[h+4>>2];s[l+8>>2]=s[h+8>>2];s[l+12>>2]=s[h+12>>2];f=f+1|0}while((f|0)!=(a|0))}a=s[e+104>>2]|0;if((a|0)!=0){if((r[e+108>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+104>>2]=0}r[e+108>>0]=1;s[e+104>>2]=u;s[e+100>>2]=o;a=s[e+96>>2]|0}h=(s[e+104>>2]|0)+(a<<4)|0;s[h+0>>2]=s[t+0>>2];s[h+4>>2]=s[t+4>>2];s[h+8>>2]=s[t+8>>2];s[h+12>>2]=s[t+12>>2];s[e+96>>2]=(s[e+96>>2]|0)+1;if(!n){c=i;return}_S(e);c=i;return}function lk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;a=c;i=s[t+96>>2]|0;if((i|0)<=0){s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;c=a;return}r=+f[t+12>>2];u=+f[n>>2]*r;l=+f[t+16>>2];o=+f[n+4>>2]*l;h=+f[t+20>>2];p=+f[n+8>>2]*h;t=s[t+104>>2]|0;n=0;d=-3.4028234663852886e38;v=-1;while(1){m=u*+f[t+(n<<4)>>2]+o*+f[t+(n<<4)+4>>2]+p*+f[t+(n<<4)+8>>2];g=m>d;v=g?n:v;n=n+1|0;if((n|0)==(i|0))break;else d=g?m:d}d=+f[t+(v<<4)+4>>2]*l;m=+f[t+(v<<4)+8>>2]*h;f[e>>2]=+f[t+(v<<4)>>2]*r;f[e+4>>2]=d;f[e+8>>2]=m;f[e+12>>2]=0;c=a;return}function ck(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;i=c;if((r|0)>0)u=0;else{c=i;return}do{f[n+(u<<4)+12>>2]=-0xde0b6b000000000;u=u+1|0}while((u|0)!=(r|0));u=0;do{b=+f[e+12>>2];p=+f[t+(u<<4)>>2]*b;a=+f[e+16>>2];d=+f[t+(u<<4)+4>>2]*a;l=+f[e+20>>2];v=+f[t+(u<<4)+8>>2]*l;m=s[e+96>>2]|0;if((m|0)>0){g=s[e+104>>2]|0;y=0;o=-3.4028234663852886e38;h=-1;do{w=p*+f[g+(y<<4)>>2]+d*+f[g+(y<<4)+4>>2]+v*+f[g+(y<<4)+8>>2];E=w>o;h=E?y:h;o=E?w:o;y=y+1|0}while((y|0)!=(m|0));v=+f[g+(h<<4)+4>>2]*a;w=+f[g+(h<<4)+8>>2]*l;f[n+(u<<4)>>2]=+f[g+(h<<4)>>2]*b;f[n+(u<<4)+4>>2]=v;f[n+(u<<4)+8>>2]=w;f[n+(u<<4)+12>>2]=o}else f[n+(u<<4)+12>>2]=-0xde0b6b000000000;u=u+1|0}while((u|0)!=(r|0));c=i;return}function hk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);if(!(+CD[s[(s[t>>2]|0)+48>>2]&15](t)!=0)){c=r;return}l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function pk(e){e=e|0;return s[e+96>>2]|0}function dk(e){e=e|0;return s[e+96>>2]|0}function vk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0;u=s[e+96>>2]|0;a=s[e+104>>2]|0;i=+f[a+(((t|0)%(u|0)|0)<<4)+4>>2]*+f[e+16>>2];o=+f[a+(((t|0)%(u|0)|0)<<4)+8>>2]*+f[e+20>>2];f[n>>2]=+f[a+(((t|0)%(u|0)|0)<<4)>>2]*+f[e+12>>2];f[n+4>>2]=i;f[n+8>>2]=o;f[n+12>>2]=0;n=s[e+104>>2]|0;o=+f[n+(((t+1|0)%(u|0)|0)<<4)+4>>2]*+f[e+16>>2];i=+f[n+(((t+1|0)%(u|0)|0)<<4)+8>>2]*+f[e+20>>2];f[r>>2]=+f[n+(((t+1|0)%(u|0)|0)<<4)>>2]*+f[e+12>>2];f[r+4>>2]=o;f[r+8>>2]=i;f[r+12>>2]=0;return}function mk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;o=s[e+104>>2]|0;i=+f[o+(t<<4)+4>>2]*+f[e+16>>2];r=+f[o+(t<<4)+8>>2]*+f[e+20>>2];f[n>>2]=+f[o+(t<<4)>>2]*+f[e+12>>2];f[n+4>>2]=i;f[n+8>>2]=r;f[n+12>>2]=0;return}function gk(e){e=e|0;return 0}function yk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return}function bk(e,t,n){e=e|0;t=t|0;n=+n;return 0}function wk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;u=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=u;if((u|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+28>>2]=+f[e+28>>2];f[t+32>>2]=+f[e+32>>2];f[t+36>>2]=+f[e+36>>2];f[t+40>>2]=+f[e+40>>2];f[t+12>>2]=+f[e+12>>2];f[t+16>>2]=+f[e+16>>2];f[t+20>>2]=+f[e+20>>2];f[t+24>>2]=+f[e+24>>2];f[t+44>>2]=+f[e+44>>2];i=s[e+96>>2]|0;s[t+60>>2]=i;if((i|0)==0){s[t+52>>2]=0;s[t+56>>2]=0;c=r;return 10504}s[t+52>>2]=DD[s[(s[n>>2]|0)+28>>2]&31](n,s[e+104>>2]|0)|0;s[t+56>>2]=0;t=xD[s[(s[n>>2]|0)+16>>2]&31](n,16,i)|0;if((i|0)>0){o=s[e+104>>2]|0;e=0;u=s[t+8>>2]|0;while(1){f[u>>2]=+f[o+(e<<4)>>2];f[u+4>>2]=+f[o+(e<<4)+4>>2];f[u+8>>2]=+f[o+(e<<4)+8>>2];f[u+12>>2]=+f[o+(e<<4)+12>>2];e=e+1|0;if((e|0)==(i|0))break;else u=u+16|0}}else o=s[e+104>>2]|0;aD[s[(s[n>>2]|0)+20>>2]&31](n,t,19760,1497453121,o);c=r;return 10504}function Ek(e,t,n,r,i,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;a=c;c=c+16|0;f[r>>2]=3.4028234663852886e38;f[i>>2]=-3.4028234663852886e38;h=s[e+96>>2]|0;if((h|0)>0){p=0;do{y=s[e+104>>2]|0;g=+f[y+(p<<4)>>2]*+f[e+12>>2];m=+f[y+(p<<4)+4>>2]*+f[e+16>>2];l=+f[y+(p<<4)+8>>2]*+f[e+20>>2];v=g*+f[t>>2]+m*+f[t+4>>2]+l*+f[t+8>>2]+ +f[t+48>>2];d=g*+f[t+16>>2]+m*+f[t+20>>2]+l*+f[t+24>>2]+ +f[t+52>>2];l=g*+f[t+32>>2]+m*+f[t+36>>2]+l*+f[t+40>>2]+ +f[t+56>>2];m=v*+f[n>>2]+d*+f[n+4>>2]+l*+f[n+8>>2];if(m<+f[r>>2]){f[r>>2]=m;f[o>>2]=v;f[o+4>>2]=d;f[o+8>>2]=l;f[o+12>>2]=0}if(m>+f[i>>2]){f[i>>2]=m;f[u>>2]=v;f[u+4>>2]=d;f[u+8>>2]=l;f[u+12>>2]=0}p=p+1|0}while((p|0)!=(h|0));d=+f[i>>2]}else d=-3.4028234663852886e38;l=+f[r>>2];if(!(l>d)){c=a;return}f[r>>2]=d;f[i>>2]=l;s[a+0>>2]=s[o+0>>2];s[a+4>>2]=s[o+4>>2];s[a+8>>2]=s[o+8>>2];s[a+12>>2]=s[o+12>>2];s[o+0>>2]=s[u+0>>2];s[o+4>>2]=s[u+4>>2];s[o+8>>2]=s[u+8>>2];s[o+12>>2]=s[u+12>>2];s[u+0>>2]=s[a+0>>2];s[u+4>>2]=s[a+4>>2];s[u+8>>2]=s[a+8>>2];s[u+12>>2]=s[a+12>>2];c=a;return}function Sk(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=10376;n=s[e+104>>2]|0;if((n|0)!=0){if((r[e+108>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+104>>2]=0}r[e+108>>0]=1;s[e+104>>2]=0;s[e+96>>2]=0;s[e+100>>2]=0;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)==0){c=t;return}lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function xk(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=10376;i=s[e+104>>2]|0;if((i|0)!=0){if((r[e+108>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+104>>2]=0}r[e+108>>0]=1;s[e+104>>2]=0;s[e+96>>2]=0;s[e+100>>2]=0;s[e>>2]=15736;i=s[e+52>>2]|0;if((i|0)!=0?(lD[s[s[i>>2]>>2]&511](i),n=s[e+52>>2]|0,(n|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Tk(e){e=e|0;return 10568}function Nk(e){e=e|0;return 68}function Ck(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;i=+W(+(+f[t>>2]));r=+W(+(+f[t+4>>2]));n=+W(+(+f[t+8>>2]));f[e+12>>2]=i;f[e+16>>2]=r;f[e+20>>2]=n;f[e+24>>2]=0;return}function kk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;i=c;c=c+96|0;o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=0;do{m=i+80+(u<<2)|0;s[i+80>>2]=0;s[i+84>>2]=0;s[i+88>>2]=0;s[i+92>>2]=0;f[m>>2]=1;a=s[(s[e>>2]|0)+64>>2]|0;l=+f[i+80>>2];h=+f[i+84>>2];p=+f[i+88>>2];d=l*+f[t+4>>2]+h*+f[t+20>>2]+p*+f[t+36>>2];v=l*+f[t+8>>2]+h*+f[t+24>>2]+p*+f[t+40>>2];f[i+48>>2]=+f[t>>2]*l+ +f[t+16>>2]*h+ +f[t+32>>2]*p;f[i+52>>2]=d;f[i+56>>2]=v;f[i+60>>2]=0;WD[a&127](i+64|0,e,i+48|0);v=+f[i+64>>2];d=+f[i+68>>2];p=+f[i+72>>2];h=v*+f[t+16>>2]+d*+f[t+20>>2]+p*+f[t+24>>2]+ +f[t+52>>2];l=v*+f[t+32>>2]+d*+f[t+36>>2]+p*+f[t+40>>2]+ +f[t+56>>2];f[i+32>>2]=v*+f[t>>2]+d*+f[t+4>>2]+p*+f[t+8>>2]+ +f[t+48>>2];f[i+36>>2]=h;f[i+40>>2]=l;f[i+44>>2]=0;a=i+32+(u<<2)|0;f[r+(u<<2)>>2]=o+ +f[a>>2];f[m>>2]=-1;m=s[(s[e>>2]|0)+64>>2]|0;l=+f[i+80>>2];h=+f[i+84>>2];p=+f[i+88>>2];d=l*+f[t+4>>2]+h*+f[t+20>>2]+p*+f[t+36>>2];v=l*+f[t+8>>2]+h*+f[t+24>>2]+p*+f[t+40>>2];f[i>>2]=+f[t>>2]*l+ +f[t+16>>2]*h+ +f[t+32>>2]*p;f[i+4>>2]=d;f[i+8>>2]=v;f[i+12>>2]=0;WD[m&127](i+16|0,e,i);v=+f[i+16>>2];d=+f[i+20>>2];p=+f[i+24>>2];h=v*+f[t+16>>2]+d*+f[t+20>>2]+p*+f[t+24>>2]+ +f[t+52>>2];l=v*+f[t+32>>2]+d*+f[t+36>>2]+p*+f[t+40>>2]+ +f[t+56>>2];f[i+32>>2]=v*+f[t>>2]+d*+f[t+4>>2]+p*+f[t+8>>2]+ +f[t+48>>2];f[i+36>>2]=h;f[i+40>>2]=l;f[i+44>>2]=0;f[n+(u<<2)>>2]=+f[a>>2]-o;u=u+1|0}while((u|0)!=3);c=i;return}function Lk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);if(!(+CD[s[(s[t>>2]|0)+48>>2]&15](t)!=0)){c=r;return}l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function Ak(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;o=c;c=c+64|0;p=+f[n>>2];d=+f[n+4>>2];h=+f[n+8>>2];v=p*+f[t+4>>2]+d*+f[t+20>>2]+h*+f[t+36>>2];m=p*+f[t+8>>2]+d*+f[t+24>>2]+h*+f[t+40>>2];f[o+48>>2]=+f[t>>2]*p+ +f[t+16>>2]*d+ +f[t+32>>2]*h;f[o+52>>2]=v;f[o+56>>2]=m;f[o+60>>2]=0;WD[s[(s[e>>2]|0)+64>>2]&127](o+32|0,e,o+48|0);m=+f[o+32>>2];v=+f[o+36>>2];h=+f[o+40>>2];d=m*+f[t>>2]+v*+f[t+4>>2]+h*+f[t+8>>2]+ +f[t+48>>2];p=m*+f[t+16>>2]+v*+f[t+20>>2]+h*+f[t+24>>2]+ +f[t+52>>2];h=m*+f[t+32>>2]+v*+f[t+36>>2]+h*+f[t+40>>2]+ +f[t+56>>2];g=s[(s[e>>2]|0)+64>>2]|0;v=-+f[o+52>>2];m=-+f[o+56>>2];f[o>>2]=-+f[o+48>>2];f[o+4>>2]=v;f[o+8>>2]=m;f[o+12>>2]=0;WD[g&127](o+16|0,e,o);m=+f[o+16>>2];v=+f[o+20>>2];u=+f[o+24>>2];l=m*+f[t>>2]+v*+f[t+4>>2]+u*+f[t+8>>2]+ +f[t+48>>2];a=m*+f[t+16>>2]+v*+f[t+20>>2]+u*+f[t+24>>2]+ +f[t+52>>2];u=m*+f[t+32>>2]+v*+f[t+36>>2]+u*+f[t+40>>2]+ +f[t+56>>2];f[r>>2]=d*+f[n>>2]+p*+f[n+4>>2]+h*+f[n+8>>2];u=l*+f[n>>2]+a*+f[n+4>>2]+u*+f[n+8>>2];f[i>>2]=u;a=+f[r>>2];if(!(a>u)){c=o;return}f[r>>2]=u;f[i>>2]=a;c=o;return}function Ok(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0;r=c;c=c+80|0;switch(s[t+4>>2]|0){case 8:{s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;c=r;return};case 0:{y=+f[t+28>>2];b=+f[t+32>>2];b=+f[n+4>>2]>=0?b:-b;E=+f[t+36>>2];E=+f[n+8>>2]>=0?E:-E;f[e>>2]=+f[n>>2]>=0?y:-y;f[e+4>>2]=b;f[e+8>>2]=E;f[e+12>>2]=0;c=r;return};case 10:{o=+f[n>>2];u=+f[n+4>>2];a=+f[n+8>>2];n=s[t+52>>2]|0;i=+f[t+(n<<2)+28>>2];p=+f[t+(((n+2|0)%3|0)<<2)+28>>2];if(o*o+u*u+a*a<9999999747378752e-20){o=1;u=0;a=0}else{E=1/+X(+(o*o+u*u+a*a));o=o*E;u=u*E;a=a*E}s[r+16>>2]=0;s[r+20>>2]=0;s[r+24>>2]=0;s[r+28>>2]=0;f[r+16+(n<<2)>>2]=i;l=p*o;h=p*u;p=p*a;d=+f[t+44>>2];m=o*d;v=u*d;d=a*d;E=+f[r+16>>2]+l-m;b=h+ +f[r+20>>2]-v;y=p+ +f[r+24>>2]-d;g=a*y+(o*E+u*b);if(!(g>-0xde0b6b000000000)){y=0;b=0;E=0;g=-0xde0b6b000000000}s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;f[r+(n<<2)>>2]=-i;l=l+ +f[r>>2]-m;v=h+ +f[r+4>>2]-v;m=p+ +f[r+8>>2]-d;x=a*m+(o*l+u*v)>g;f[e>>2]=x?l:E;f[e+4>>2]=x?v:b;f[e+8>>2]=x?m:y;f[e+12>>2]=0;c=r;return};case 4:{w=s[t+104>>2]|0;S=s[t+96>>2]|0;i=+f[t+12>>2];o=+f[t+16>>2];u=+f[t+20>>2];a=+f[n>>2]*i;l=+f[n+4>>2]*o;p=+f[n+8>>2]*u;if((S|0)>0){n=0;h=-3.4028234663852886e38;x=-1;while(1){d=a*+f[w+(n<<4)>>2]+l*+f[w+(n<<4)+4>>2]+p*+f[w+(n<<4)+8>>2];t=d>h;x=t?n:x;n=n+1|0;if((n|0)==(S|0))break;else h=t?d:h}}else x=-1;b=o*+f[w+(x<<4)+4>>2];E=u*+f[w+(x<<4)+8>>2];f[e>>2]=i*+f[w+(x<<4)>>2];f[e+4>>2]=b;f[e+8>>2]=E;f[e+12>>2]=0;c=r;return};case 5:{w=s[t+92>>2]|0;S=s[t+96>>2]|0;i=+f[t+12>>2];o=+f[t+16>>2];u=+f[t+20>>2];a=+f[n>>2]*i;l=+f[n+4>>2]*o;p=+f[n+8>>2]*u;if((S|0)>0){n=0;d=-3.4028234663852886e38;x=-1;while(1){h=a*+f[w+(n<<4)>>2]+l*+f[w+(n<<4)+4>>2]+p*+f[w+(n<<4)+8>>2];t=h>d;x=t?n:x;n=n+1|0;if((n|0)==(S|0))break;else d=t?h:d}}else x=-1;b=o*+f[w+(x<<4)+4>>2];E=u*+f[w+(x<<4)+8>>2];f[e>>2]=i*+f[w+(x<<4)>>2];f[e+4>>2]=b;f[e+8>>2]=E;f[e+12>>2]=0;c=r;return};case 13:{s[r+64>>2]=s[t+28>>2];s[r+68>>2]=s[t+32>>2];s[r+72>>2]=s[t+36>>2];s[r+76>>2]=s[t+40>>2];f[r+48>>2]=+f[n>>2];o=+f[n+4>>2];f[r+52>>2]=o;i=+f[n+8>>2];f[r+56>>2]=i;f[r+60>>2]=0;S=s[t+52>>2]|0;if((S|0)==1){w=0;t=S;n=2}else if((S|0)==2){i=o;w=0;t=S;n=1}else{w=1;t=0;n=2}o=+f[r+64+(w<<2)>>2];l=+f[r+64+(S<<2)>>2];a=+f[r+48+(w<<2)>>2];u=+X(+(a*a+i*i));if(u!=0){f[r+32+(w<<2)>>2]=a*(o/u);if(+f[r+48+(t<<2)>>2]<0)l=-l;f[r+32+(t<<2)>>2]=l;f[r+32+(n<<2)>>2]=o/u*i;f[e>>2]=+f[r+32>>2];f[e+4>>2]=+f[r+36>>2];f[e+8>>2]=+f[r+40>>2];f[e+12>>2]=0;c=r;return}else{f[r+32+(w<<2)>>2]=o;if(+f[r+48+(t<<2)>>2]<0)l=-l;f[r+32+(t<<2)>>2]=l;f[r+32+(n<<2)>>2]=0;f[e>>2]=+f[r+32>>2];f[e+4>>2]=+f[r+36>>2];f[e+8>>2]=+f[r+40>>2];f[e+12>>2]=0;c=r;return}};case 1:{b=+f[n>>2];E=+f[n+4>>2];i=+f[n+8>>2];u=b*+f[t+56>>2]+E*+f[t+60>>2]+i*+f[t+64>>2];o=b*+f[t+72>>2]+E*+f[t+76>>2]+i*+f[t+80>>2];i=b*+f[t+88>>2]+E*+f[t+92>>2]+i*+f[t+96>>2];if(u<o)n=o<i?2:1;else n=u<i?2:0;b=+f[t+56+(n<<4)+4>>2];E=+f[t+56+(n<<4)+8>>2];f[e>>2]=+f[t+56+(n<<4)>>2];f[e+4>>2]=b;f[e+8>>2]=E;f[e+12>>2]=0;c=r;return};default:{WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);c=r;return}}}function Mk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+32|0;s[r+16>>2]=s[n+0>>2];s[r+20>>2]=s[n+4>>2];s[r+24>>2]=s[n+8>>2];s[r+28>>2]=s[n+12>>2];o=+f[r+16>>2];u=+f[r+20>>2];i=+f[r+24>>2];if(o*o+u*u+i*i<1.4210854715202004e-14){f[r+16>>2]=-1;f[r+20>>2]=-1;f[r+24>>2]=-1;f[r+28>>2]=0;o=-1;u=-1;i=-1}a=1/+X(+(o*o+u*u+i*i));f[r+16>>2]=o*a;f[r+20>>2]=u*a;f[r+24>>2]=i*a;Ok(r,t,r+16|0);switch(s[t+4>>2]|0){case 0:{i=+f[t+44>>2];break};case 1:{i=+f[t+44>>2];break};case 8:{i=+f[t+28>>2]*+f[t+12>>2];break};case 10:{i=+f[t+44>>2];break};case 11:{i=+f[t+44>>2];break};case 13:{i=+f[t+44>>2];break};case 4:case 5:{i=+f[t+44>>2];break};default:i=+CD[s[(s[t>>2]|0)+48>>2]&15](t)}u=i*+f[r+20>>2]+ +f[r+4>>2];a=i*+f[r+24>>2]+ +f[r+8>>2];f[e>>2]=i*+f[r+16>>2]+ +f[r>>2];f[e+4>>2]=u;f[e+8>>2]=a;f[e+12>>2]=0;c=r;return}function _k(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0;r=c;c=c+80|0;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;i=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];if(i*i+u*u+o*o<9999999747378752e-20){i=1;u=0;o=0;a=0}else{a=1/+X(+(i*i+u*u+o*o));i=i*a;u=u*a;o=o*a;a=+f[n+12>>2]}s[r+32>>2]=10856;s[r+36>>2]=0;s[r+40>>2]=0;s[r+44>>2]=0;s[r+48>>2]=0;f[r+52>>2]=-0xde0b6b000000000;f[r+56>>2]=i;f[r+60>>2]=u;f[r+64>>2]=o;f[r+68>>2]=a;f[r+16>>2]=0xde0b6b000000000;f[r+20>>2]=0xde0b6b000000000;f[r+24>>2]=0xde0b6b000000000;f[r+28>>2]=0;n=s[t+92>>2]|0;t=s[(s[n>>2]|0)+8>>2]|0;f[r>>2]=-0xde0b6b000000000;f[r+4>>2]=-0xde0b6b000000000;f[r+8>>2]=-0xde0b6b000000000;f[r+12>>2]=0;JD[t&127](n,r+32|0,r,r+16|0);s[e+0>>2]=s[r+36>>2];s[e+4>>2]=s[r+40>>2];s[e+8>>2]=s[r+44>>2];s[e+12>>2]=s[r+48>>2];c=r;return}function Dk(e){e=e|0;return}function Pk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0;i=c;c=c+80|0;if((r|0)>0)o=0;else{c=i;return}do{f[n+(o<<4)+12>>2]=-0xde0b6b000000000;o=o+1|0}while((o|0)!=(r|0));o=0;do{u=t+(o<<4)|0;s[i+32>>2]=10856;s[i+36>>2]=0;s[i+40>>2]=0;s[i+44>>2]=0;s[i+48>>2]=0;f[i+52>>2]=-0xde0b6b000000000;s[i+56>>2]=s[u+0>>2];s[i+60>>2]=s[u+4>>2];s[i+64>>2]=s[u+8>>2];s[i+68>>2]=s[u+12>>2];f[i+16>>2]=0xde0b6b000000000;f[i+20>>2]=0xde0b6b000000000;f[i+24>>2]=0xde0b6b000000000;f[i+28>>2]=0;u=s[e+92>>2]|0;a=s[(s[u>>2]|0)+8>>2]|0;f[i>>2]=-0xde0b6b000000000;f[i+4>>2]=-0xde0b6b000000000;f[i+8>>2]=-0xde0b6b000000000;f[i+12>>2]=0;JD[a&127](u,i+32|0,i,i+16|0);u=n+(o<<4)|0;s[u+0>>2]=s[i+36>>2];s[u+4>>2]=s[i+40>>2];s[u+8>>2]=s[i+44>>2];s[u+12>>2]=s[i+48>>2];o=o+1|0}while((o|0)<(r|0));c=i;return}function Hk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);if(!(+CD[s[(s[t>>2]|0)+48>>2]&15](t)!=0)){c=r;return}l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function Bk(e){e=e|0;return 0}function jk(e){e=e|0;return 0}function Fk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return}function Ik(e,t,n){e=e|0;t=t|0;n=n|0;return}function qk(e){e=e|0;return 0}function Rk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return}function Uk(e,t,n){e=e|0;t=t|0;n=+n;return 0}function zk(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;r=(s[e+92>>2]|0)+4|0;s[r+0>>2]=s[t+0>>2];s[r+4>>2]=s[t+4>>2];s[r+8>>2]=s[t+8>>2];s[r+12>>2]=s[t+12>>2];_S(e);c=n;return}function Wk(e){e=e|0;return(s[e+92>>2]|0)+4|0}function Xk(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)==0){c=t;return}lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function Vk(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)!=0){lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function $k(e){e=e|0;return 10832}function Jk(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function Kk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0;r=c;i=+f[e+24>>2];u=+f[e+28>>2];o=+f[e+32>>2];a=i*+f[t>>2]+u*+f[t+4>>2]+o*+f[t+8>>2];l=+f[e+20>>2];if(a>l){f[e+20>>2]=a;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2]}else a=l;l=i*+f[t+16>>2]+u*+f[t+20>>2]+o*+f[t+24>>2];if(l>a){f[e+20>>2]=l;s[e+4>>2]=s[t+16>>2];s[e+8>>2]=s[t+20>>2];s[e+12>>2]=s[t+24>>2];s[e+16>>2]=s[t+28>>2];a=l}i=i*+f[t+32>>2]+u*+f[t+36>>2]+o*+f[t+40>>2];if(!(i>a)){c=r;return}f[e+20>>2]=i;s[e+4>>2]=s[t+32>>2];s[e+8>>2]=s[t+36>>2];s[e+12>>2]=s[t+40>>2];s[e+16>>2]=s[t+44>>2];c=r;return}function Qk(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0;n=c;s[e+4>>2]=35;s[e+8>>2]=0;f[e+12>>2]=1;f[e+16>>2]=1;f[e+20>>2]=1;f[e+24>>2]=0;f[e+44>>2]=.03999999910593033;s[e>>2]=10928;s[e+52>>2]=1;i=+f[t>>2];o=+f[t+4>>2];r=+f[t+8>>2];if(i<o)u=i<r?0:2;else u=o<r?1:2;r=+f[t+(u<<2)>>2]*.10000000149011612;if(r<.03999999910593033){l=+xm(e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);l=l+ +f[e+28>>2];a=a+ +f[e+32>>2];o=o+ +f[e+36>>2];f[e+44>>2]=r;r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=o- +CD[s[(s[e>>2]|0)+48>>2]&15](e);f[e+28>>2]=l-r;f[e+32>>2]=a-i;f[e+36>>2]=o;f[e+40>>2]=0;u=s[e>>2]|0}else u=10928|0;o=+CD[s[u+48>>2]&15](e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);l=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=+f[t+4>>2]*+f[e+16>>2]-a;l=+f[t+8>>2]*+f[e+20>>2]-l;f[e+28>>2]=+f[t>>2]*+f[e+12>>2]-o;f[e+32>>2]=a;f[e+36>>2]=l;f[e+40>>2]=0;s[e+4>>2]=13;c=n;return}function Gk(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;i=c;a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=a+ +f[e+28>>2];h=a+ +f[e+32>>2];a=a+ +f[e+36>>2];S=+W(+(+f[t>>2]));E=+W(+(+f[t+4>>2]));w=+W(+(+f[t+8>>2]));y=+W(+(+f[t+16>>2]));g=+W(+(+f[t+20>>2]));m=+W(+(+f[t+24>>2]));p=+W(+(+f[t+32>>2]));l=+W(+(+f[t+36>>2]));u=+W(+(+f[t+40>>2]));b=+f[t+48>>2];v=+f[t+52>>2];o=+f[t+56>>2];f[n>>2]=b-(d*S+h*E+a*w);f[n+4>>2]=v-(d*y+h*g+a*m);f[n+8>>2]=o-(d*p+h*l+a*u);f[n+12>>2]=0;f[r>>2]=d*S+h*E+a*w+b;f[r+4>>2]=d*y+h*g+a*m+v;f[r+8>>2]=d*p+h*l+a*u+o;f[r+12>>2]=0;c=i;return}function Yk(e,t,n){e=e|0;t=+t;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;c=c+16|0;s[r+0>>2]=s[e+28>>2];s[r+4>>2]=s[e+32>>2];s[r+8>>2]=s[e+36>>2];s[r+12>>2]=s[e+40>>2];l=+CD[s[(s[e>>2]|0)+48>>2]&15](e);o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);f[r>>2]=l+ +f[r>>2];f[r+4>>2]=o+ +f[r+4>>2];f[r+8>>2]=a+ +f[r+8>>2];e=s[e+52>>2]|0;if((e|0)==2){i=2;u=0}else if((e|0)==0){i=0;u=1}else{i=1;u=0}o=+f[r+(u<<2)>>2];a=+f[r+(i<<2)>>2];a=t*.25*o*o+t/12*a*a*4;if((e|0)==2){f[n>>2]=a;f[n+4>>2]=a;f[n+8>>2]=t*.5*o*o;f[n+12>>2]=0;c=r;return}else if((e|0)==0){f[n>>2]=t*.5*o*o;f[n+4>>2]=a;f[n+8>>2]=a;f[n+12>>2]=0;c=r;return}else{f[n>>2]=a;f[n+4>>2]=t*.5*o*o;f[n+8>>2]=a;f[n+12>>2]=0;c=r;return}}function Zk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0;r=c;i=+f[t+32>>2];a=+f[t+28>>2];u=+f[n+4>>2];o=+f[n+8>>2];s=+X(+(u*u+o*o));if(s!=0){f[e+4>>2]=u*(i/s);if(+f[n>>2]<0)a=-a;f[e>>2]=a;f[e+8>>2]=o*(i/s);c=r;return}else{f[e+4>>2]=i;if(+f[n>>2]<0)a=-a;f[e>>2]=a;f[e+8>>2]=0;c=r;return}}function eL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0;r=c;i=+f[t+28>>2];a=+f[t+36>>2];u=+f[n>>2];o=+f[n+4>>2];s=+X(+(u*u+o*o));if(s!=0){f[e>>2]=u*(i/s);if(+f[n+8>>2]<0)a=-a;f[e+8>>2]=a;f[e+4>>2]=o*(i/s);c=r;return}else{f[e>>2]=i;if(+f[n+8>>2]<0)a=-a;f[e+8>>2]=a;f[e+4>>2]=0;c=r;return}}function tL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,s=0,o=0,u=0,a=0;r=c;i=+f[t+28>>2];a=+f[t+32>>2];u=+f[n>>2];o=+f[n+8>>2];s=+X(+(u*u+o*o));if(s!=0){f[e>>2]=u*(i/s);if(+f[n+4>>2]<0)a=-a;f[e+4>>2]=a;f[e+8>>2]=o*(i/s);c=r;return}else{f[e>>2]=i;if(+f[n+4>>2]<0)a=-a;f[e+4>>2]=a;f[e+8>>2]=0;c=r;return}}function nL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0,l=0,h=0;s=c;if((r|0)<=0){c=s;return}i=0;do{u=+f[e+28>>2];h=+f[e+32>>2];o=+f[t+(i<<4)>>2];a=+f[t+(i<<4)+8>>2];l=+X(+(o*o+a*a));if(!(l!=0))if(+f[t+(i<<4)+4>>2]<0){o=u;h=-h;u=0}else{o=u;u=0}else{if(+f[t+(i<<4)+4>>2]<0)h=-h;o=o*(u/l);u=a*(u/l)}f[n+(i<<4)>>2]=o;f[n+(i<<4)+4>>2]=h;f[n+(i<<4)+8>>2]=u;i=i+1|0}while((i|0)!=(r|0));c=s;return}function rL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0,l=0,h=0;s=c;if((r|0)<=0){c=s;return}i=0;do{h=+f[e+28>>2];u=+f[e+36>>2];o=+f[t+(i<<4)>>2];l=+f[t+(i<<4)+4>>2];a=+X(+(o*o+l*l));if(!(a!=0))if(+f[t+(i<<4)+8>>2]<0){o=h;a=0;u=-u}else{o=h;a=0}else{if(+f[t+(i<<4)+8>>2]<0)u=-u;o=o*(h/a);a=l*(h/a)}f[n+(i<<4)>>2]=o;f[n+(i<<4)+4>>2]=a;f[n+(i<<4)+8>>2]=u;i=i+1|0}while((i|0)!=(r|0));c=s;return}function iL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0,a=0,l=0,h=0,p=0;s=c;if((r|0)<=0){c=s;return}i=0;do{o=+f[e+32>>2];h=+f[e+28>>2];p=t+(i<<4)|0;l=+f[t+(i<<4)+4>>2];u=+f[t+(i<<4)+8>>2];a=+X(+(l*l+u*u));if(!(a!=0))if(+f[p>>2]<0){h=-h;l=o;o=0}else{l=o;o=0}else{if(+f[p>>2]<0)h=-h;l=l*(o/a);o=u*(o/a)}f[n+(i<<4)>>2]=h;f[n+(i<<4)+4>>2]=l;f[n+(i<<4)+8>>2]=o;i=i+1|0}while((i|0)!=(r|0));c=s;return}function sL(e){e=e|0;return}function oL(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function uL(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;h=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);d=(h+ +f[e+28>>2])/+f[e+12>>2];l=(u+ +f[e+32>>2])/+f[e+16>>2];o=(r+ +f[e+36>>2])/+f[e+20>>2];p=+W(+(+f[t>>2]));a=+W(+(+f[t+4>>2]));i=+W(+(+f[t+8>>2]));f[e+12>>2]=p;f[e+16>>2]=a;f[e+20>>2]=i;f[e+24>>2]=0;f[e+28>>2]=d*p-h;f[e+32>>2]=l*a-u;f[e+36>>2]=o*i-r;f[e+40>>2]=0;c=n;return}function aL(e){e=e|0;return 11408}function fL(e,t){e=e|0;t=t|0;var n=0;n=c;s[e+0>>2]=0;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;f[e+(s[t+52>>2]<<2)>>2]=1;c=n;return}function lL(e,t){e=e|0;t=+t;var n=0,r=0,i=0,o=0,u=0,a=0;n=c;u=+CD[s[(s[e>>2]|0)+48>>2]&15](e);i=+CD[s[(s[e>>2]|0)+48>>2]&15](e);a=+CD[s[(s[e>>2]|0)+48>>2]&15](e);u=u+ +f[e+28>>2];i=i+ +f[e+32>>2];a=a+ +f[e+36>>2];f[e+44>>2]=t;o=+CD[s[(s[e>>2]|0)+48>>2]&15](e);r=+CD[s[(s[e>>2]|0)+48>>2]&15](e);t=a- +CD[s[(s[e>>2]|0)+48>>2]&15](e);f[e+28>>2]=u-o;f[e+32>>2]=i-r;f[e+36>>2]=t;f[e+40>>2]=0;c=n;return}function cL(e){e=e|0;return 60}function hL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0;r=c;i=DD[s[(s[n>>2]|0)+40>>2]&31](n,e)|0;o=DD[s[(s[n>>2]|0)+28>>2]&31](n,i)|0;s[t>>2]=o;if((o|0)!=0)hD[s[(s[n>>2]|0)+48>>2]&127](n,i);s[t+4>>2]=s[e+4>>2];f[t+28>>2]=+f[e+28>>2];f[t+32>>2]=+f[e+32>>2];f[t+36>>2]=+f[e+36>>2];f[t+40>>2]=+f[e+40>>2];f[t+12>>2]=+f[e+12>>2];f[t+16>>2]=+f[e+16>>2];f[t+20>>2]=+f[e+20>>2];f[t+24>>2]=+f[e+24>>2];f[t+44>>2]=+f[e+44>>2];s[t+52>>2]=s[e+52>>2];c=r;return 11384}function pL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0;r=c;WD[s[(s[t>>2]|0)+68>>2]&127](e,t,n);if(!(+CD[s[(s[t>>2]|0)+48>>2]&15](t)!=0)){c=r;return}l=+f[n>>2];u=+f[n+4>>2];o=+f[n+8>>2];i=l*l+u*u+o*o<1.4210854715202004e-14?-1:o;a=l*l+u*u+o*o<1.4210854715202004e-14?-1:u;l=l*l+u*u+o*o<1.4210854715202004e-14?-1:l;o=1/+X(+(i*i+(l*l+a*a)));u=+CD[s[(s[t>>2]|0)+48>>2]&15](t);f[e>>2]=o*l*u+ +f[e>>2];f[e+4>>2]=u*o*a+ +f[e+4>>2];f[e+8>>2]=u*o*i+ +f[e+8>>2];c=r;return}function dL(e){e=e|0;var t=0,n=0,r=0;r=c;n=+f[e+28>>2];t=+CD[s[(s[e>>2]|0)+48>>2]&15](e);+CD[s[(s[e>>2]|0)+48>>2]&15](e);+CD[s[(s[e>>2]|0)+48>>2]&15](e);c=r;return+(n+t)}function vL(e){e=e|0;return}function mL(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function gL(e){e=e|0;return 11368}function yL(e){e=e|0;var t=0,n=0,r=0;r=c;n=+f[e+32>>2];+CD[s[(s[e>>2]|0)+48>>2]&15](e);t=+CD[s[(s[e>>2]|0)+48>>2]&15](e);+CD[s[(s[e>>2]|0)+48>>2]&15](e);c=r;return+(n+t)}function bL(e){e=e|0;return}function wL(e){e=e|0;var t=0;t=c;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function EL(e){e=e|0;return 11352}function SL(e){e=e|0;var t=0,n=0,r=0;r=c;n=+f[e+28>>2];t=+CD[s[(s[e>>2]|0)+48>>2]&15](e);+CD[s[(s[e>>2]|0)+48>>2]&15](e);+CD[s[(s[e>>2]|0)+48>>2]&15](e);c=r;return+(n+t)}function xL(e){e=e|0;var t=0,n=0;t=c;n=s[e>>2]|0;if((n|0)!=0)TL(e,n);n=s[e+4>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+4>>2]=0;s[e+8>>2]=-1;n=s[e+32>>2]|0;if((n|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;s[e+16>>2]=0;n=s[e+52>>2]|0;if((n|0)==0){r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;c=t;return}if((r[e+56>>0]|0)==0){r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;c=t;return}s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0);n=s[e+32>>2]|0;r[e+56>>0]=1;s[e+52>>2]=0;s[e+44>>2]=0;s[e+48>>2]=0;if((n|0)==0){r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;c=t;return}if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+32>>2]=0;r[e+36>>0]=1;s[e+32>>2]=0;s[e+24>>2]=0;s[e+28>>2]=0;c=t;return}function TL(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;if((s[t+40>>2]|0)!=0){TL(e,s[t+36>>2]|0);TL(e,s[t+40>>2]|0)}if((s[e>>2]|0)==(t|0))s[e>>2]=0;r=s[e+4>>2]|0;if((r|0)==0){s[e+4>>2]=t;c=n;return}s[5006]=(s[5006]|0)+1;hM(s[r+ -4>>2]|0);s[e+4>>2]=t;c=n;return}function NL(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;n=c;c=c+32|0;if((t|0)<0)t=s[e+12>>2]|0;a=s[e>>2]|0;if(!((a|0)!=0&(t|0)>0)){c=n;return}while(1){i=a+40|0;e:do if((s[i>>2]|0)!=0){r=0;while(1){o=(s[e+16>>2]|0)>>>r&1;f=a+32|0;u=s[f>>2]|0;if(u>>>0>a>>>0){l=(s[u+40>>2]|0)==(a|0)&1;h=s[u+((l^1)<<2)+36>>2]|0;p=s[u+32>>2]|0;if((p|0)==0)s[e>>2]=a;else s[p+(((s[p+40>>2]|0)==(u|0)&1)<<2)+36>>2]=a;s[h+32>>2]=a;s[u+32>>2]=a;s[f>>2]=p;p=a+36|0;s[u+36>>2]=s[p>>2];s[u+40>>2]=s[i>>2];s[(s[p>>2]|0)+32>>2]=u;s[(s[i>>2]|0)+32>>2]=u;s[a+(l<<2)+36>>2]=u;s[a+((l^1)<<2)+36>>2]=h;s[n+0>>2]=s[u+0>>2];s[n+4>>2]=s[u+4>>2];s[n+8>>2]=s[u+8>>2];s[n+12>>2]=s[u+12>>2];s[n+16>>2]=s[u+16>>2];s[n+20>>2]=s[u+20>>2];s[n+24>>2]=s[u+24>>2];s[n+28>>2]=s[u+28>>2];s[u+0>>2]=s[a+0>>2];s[u+4>>2]=s[a+4>>2];s[u+8>>2]=s[a+8>>2];s[u+12>>2]=s[a+12>>2];s[u+16>>2]=s[a+16>>2];s[u+20>>2]=s[a+20>>2];s[u+24>>2]=s[a+24>>2];s[u+28>>2]=s[a+28>>2];s[a+0>>2]=s[n+0>>2];s[a+4>>2]=s[n+4>>2];s[a+8>>2]=s[n+8>>2];s[a+12>>2]=s[n+12>>2];s[a+16>>2]=s[n+16>>2];s[a+20>>2]=s[n+20>>2];s[a+24>>2]=s[n+24>>2];s[a+28>>2]=s[n+28>>2]}else u=a;a=s[u+(o<<2)+36>>2]|0;if((s[a+40>>2]|0)==0)break e;i=a+40|0;r=r+1&31}}while(0);if((kL(e,a)|0)==0)r=0;else r=s[e>>2]|0;CL(e,r,a);s[e+16>>2]=(s[e+16>>2]|0)+1;t=t+ -1|0;if((t|0)==0)break;a=s[e>>2]|0}c=n;return}function CL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;r=c;if((s[e>>2]|0)==0){s[e>>2]=n;s[n+32>>2]=0;c=r;return}i=s[t+40>>2]|0;if((i|0)!=0){l=+f[n>>2]+ +f[n+16>>2];u=+f[n+4>>2]+ +f[n+20>>2];o=+f[n+8>>2]+ +f[n+24>>2];do{g=s[t+36>>2]|0;v=+W(+(l-(+f[g>>2]+ +f[g+16>>2])))+ +W(+(u-(+f[g+4>>2]+ +f[g+20>>2])))+ +W(+(o-(+f[g+8>>2]+ +f[g+24>>2])));t=s[t+((!(v<+W(+(l-(+f[i>>2]+ +f[i+16>>2])))+ +W(+(u-(+f[i+4>>2]+ +f[i+20>>2])))+ +W(+(o-(+f[i+8>>2]+ +f[i+24>>2]))))&1)<<2)+36>>2]|0;i=s[t+40>>2]|0}while((i|0)!=0)}a=t+32|0;i=s[a>>2]|0;g=s[e+4>>2]|0;if((g|0)==0){s[5004]=(s[5004]|0)+1;g=cM(63)|0;if((g|0)!=0?(s[(g+19&-16)+ -4>>2]=g,(g+19&-16|0)!=0):0){d=(g+19&-16)+0|0;m=d+44|0;do{s[d>>2]=0;d=d+4|0}while((d|0)<(m|0));g=g+19&-16}else g=0}else s[e+4>>2]=0;s[g+32>>2]=i;d=g+36|0;s[d>>2]=0;m=g+40|0;s[m>>2]=0;y=+f[n>>2];v=+f[t>>2];v=y<v?y:v;f[g>>2]=v;y=+f[n+16>>2];l=+f[t+16>>2];l=y>l?y:l;f[g+16>>2]=l;y=+f[n+4>>2];p=+f[t+4>>2];p=y<p?y:p;f[g+4>>2]=p;y=+f[n+20>>2];u=+f[t+20>>2];u=y>u?y:u;f[g+20>>2]=u;y=+f[n+8>>2];h=+f[t+8>>2];h=y<h?y:h;f[g+8>>2]=h;y=+f[n+24>>2];o=+f[t+24>>2];o=y>o?y:o;f[g+24>>2]=o;if((i|0)==0){s[d>>2]=t;s[a>>2]=g;s[m>>2]=n;s[n+32>>2]=g;s[e>>2]=g;c=r;return}s[i+(((s[(s[a>>2]|0)+40>>2]|0)==(t|0)&1)<<2)+36>>2]=g;s[d>>2]=t;s[a>>2]=g;s[m>>2]=n;s[n+32>>2]=g;while(1){n=i+4|0;if(((((+f[i>>2]<=v?+f[n>>2]<=p:0)?+f[i+8>>2]<=h:0)?+f[i+16>>2]>=l:0)?+f[i+20>>2]>=u:0)?+f[i+24>>2]>=o:0){n=21;break}m=s[i+36>>2]|0;g=s[i+40>>2]|0;y=+f[m>>2];v=+f[g>>2];v=y<v?y:v;f[i>>2]=v;y=+f[m+16>>2];l=+f[g+16>>2];l=y>l?y:l;f[i+16>>2]=l;y=+f[m+4>>2];p=+f[g+4>>2];p=y<p?y:p;f[n>>2]=p;y=+f[m+20>>2];u=+f[g+20>>2];u=y>u?y:u;f[i+20>>2]=u;y=+f[m+8>>2];h=+f[g+8>>2];h=y<h?y:h;f[i+8>>2]=h;y=+f[m+24>>2];o=+f[g+24>>2];o=y>o?y:o;f[i+24>>2]=o;i=s[i+32>>2]|0;if((i|0)==0){n=21;break}}if((n|0)==21){c=r;return}}function kL(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0;n=c;if((s[e>>2]|0)==(t|0)){s[e>>2]=0;t=0;c=n;return t|0}i=s[t+32>>2]|0;o=s[i+32>>2]|0;t=s[i+(((s[i+40>>2]|0)!=(t|0)&1)<<2)+36>>2]|0;if((o|0)==0){s[e>>2]=t;s[t+32>>2]=0;r=s[e+4>>2]|0;if((r|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[r+ -4>>2]|0)}s[e+4>>2]=i;t=s[e>>2]|0;c=n;return t|0}s[o+(((s[o+40>>2]|0)==(i|0)&1)<<2)+36>>2]=t;s[t+32>>2]=o;t=s[e+4>>2]|0;if((t|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[e+4>>2]=i;do{w=+f[o>>2];N=o+4|0;y=+f[N>>2];x=o+8|0;m=+f[x>>2];C=o+16|0;d=+f[C>>2];T=o+20|0;h=+f[T>>2];t=o+24|0;a=+f[t>>2];S=s[o+36>>2]|0;i=s[o+40>>2]|0;E=+f[S>>2];b=+f[i>>2];b=E<b?E:b;f[o>>2]=b;E=+f[S+16>>2];p=+f[i+16>>2];p=E>p?E:p;f[C>>2]=p;E=+f[S+4>>2];g=+f[i+4>>2];g=E<g?E:g;f[N>>2]=g;E=+f[S+20>>2];l=+f[i+20>>2];l=E>l?E:l;f[T>>2]=l;E=+f[S+8>>2];v=+f[i+8>>2];v=E<v?E:v;f[x>>2]=v;E=+f[S+24>>2];u=+f[i+24>>2];u=E>u?E:u;f[t>>2]=u;if(!(w!=b|y!=g|m!=v|d!=p)?!(h!=l|a!=u):0){r=14;break}o=s[o+32>>2]|0}while((o|0)!=0);if((r|0)==14){c=n;return o|0}C=s[e>>2]|0;c=n;return C|0}function LL(e,t){e=e|0;t=t|0;var n=0,i=0;n=c;s[e>>2]=11432;i=e+4|0;do{r[i+36>>0]=1;s[i+32>>2]=0;s[i+24>>2]=0;s[i+28>>2]=0;r[i+56>>0]=1;s[i+52>>2]=0;s[i+44>>2]=0;s[i+48>>2]=0;s[i>>2]=0;s[i+4>>2]=0;s[i+8>>2]=-1;s[i+12>>2]=0;s[i+16>>2]=0;i=i+60|0}while((i|0)!=(e+124|0));r[e+193>>0]=0;r[e+194>>0]=1;r[e+192>>0]=(t|0)!=0^1;f[e+140>>2]=0;s[e+144>>2]=0;s[e+164>>2]=0;s[e+148>>2]=1;s[e+152>>2]=0;s[e+156>>2]=10;s[e+160>>2]=1;s[e+168>>2]=0;s[e+172>>2]=0;f[e+176>>2]=0;if((t|0)!=0){i=e+136|0;s[i>>2]=t;i=e+188|0;s[i>>2]=0;i=e+180|0;s[i>>2]=0;i=e+184|0;s[i>>2]=0;i=e+124|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;c=n;return}s[5004]=(s[5004]|0)+1;t=cM(95)|0;if((t|0)!=0?(s[(t+19&-16)+ -4>>2]=t,(t+19&-16|0)!=0):0){kO(t+19&-16);t=t+19&-16}else t=0;i=e+136|0;s[i>>2]=t;i=e+188|0;s[i>>2]=0;i=e+180|0;s[i>>2]=0;i=e+184|0;s[i>>2]=0;i=e+124|0;s[i+0>>2]=0;s[i+4>>2]=0;s[i+8>>2]=0;c=n;return}function AL(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=11432;if((r[e+192>>0]|0)!=0?(n=s[e+136>>2]|0,lD[s[s[n>>2]>>2]&511](n),n=s[e+136>>2]|0,(n|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=e+124|0;do{n=n+ -60|0;xL(n)}while((n|0)!=(e+4|0));hM(e);c=t;return}function OL(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=11432;if((r[e+192>>0]|0)!=0?(n=s[e+136>>2]|0,lD[s[s[n>>2]>>2]&511](n),n=s[e+136>>2]|0,(n|0)!=0):0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=e+124|0;do{n=n+ -60|0;xL(n)}while((n|0)!=(e+4|0));c=t;return}function ML(e,t,n,o,u,a,f,l,h){e=e|0;t=t|0;n=n|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;h=h|0;h=c;c=c+48|0;s[5004]=(s[5004]|0)+1;o=cM(83)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}s[o>>2]=u;i[o+4>>1]=a;i[o+6>>1]=f;u=o+16|0;s[u+0>>2]=s[t+0>>2];s[u+4>>2]=s[t+4>>2];s[u+8>>2]=s[t+8>>2];s[u+12>>2]=s[t+12>>2];u=o+32|0;s[u+0>>2]=s[n+0>>2];s[u+4>>2]=s[n+4>>2];s[u+8>>2]=s[n+8>>2];s[u+12>>2]=s[n+12>>2];s[o+8>>2]=0;u=o+56|0;s[u>>2]=0;a=o+52|0;s[a>>2]=0;s[h+16>>2]=s[t+0>>2];s[h+20>>2]=s[t+4>>2];s[h+24>>2]=s[t+8>>2];s[h+28>>2]=s[t+12>>2];s[h+32>>2]=s[n+0>>2];s[h+36>>2]=s[n+4>>2];s[h+40>>2]=s[n+8>>2];s[h+44>>2]=s[n+12>>2];s[o+60>>2]=s[e+144>>2];t=(s[e+188>>2]|0)+1|0;s[e+188>>2]=t;s[o+12>>2]=t;t=s[e+8>>2]|0;if((t|0)==0){s[5004]=(s[5004]|0)+1;t=cM(63)|0;if((t|0)!=0?(s[(t+19&-16)+ -4>>2]=t,(t+19&-16|0)!=0):0){f=(t+19&-16)+0|0;n=f+44|0;do{s[f>>2]=0;f=f+4|0}while((f|0)<(n|0));t=t+19&-16}else t=0}else s[e+8>>2]=0;s[t+32>>2]=0;s[t+36>>2]=o;s[t+40>>2]=0;s[t+0>>2]=s[h+16>>2];s[t+4>>2]=s[h+20>>2];s[t+8>>2]=s[h+24>>2];s[t+12>>2]=s[h+28>>2];s[t+16>>2]=s[h+32>>2];s[t+20>>2]=s[h+36>>2];s[t+24>>2]=s[h+40>>2];s[t+28>>2]=s[h+44>>2];CL(e+4|0,s[e+4>>2]|0,t);s[e+16>>2]=(s[e+16>>2]|0)+1;s[o+48>>2]=t;t=e+(s[e+144>>2]<<2)+124|0;s[a>>2]=0;s[u>>2]=s[t>>2];n=s[t>>2]|0;if((n|0)!=0)s[n+52>>2]=o;s[t>>2]=o;if((r[e+193>>0]|0)!=0){c=h;return o|0}s[h>>2]=11696;s[h+4>>2]=e;s[h+8>>2]=o;_L(s[e+4>>2]|0,h+16|0,h);_L(s[e+64>>2]|0,h+16|0,h);c=h;return o|0}function _L(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;o=c;if((e|0)==0){c=o;return}r=+f[t>>2];p=+f[t+4>>2];d=+f[t+8>>2];a=+f[t+16>>2];h=+f[t+20>>2];v=+f[t+24>>2];s[5004]=(s[5004]|0)+1;m=cM(275)|0;if((m|0)!=0){s[(m+19&-16)+ -4>>2]=m;t=m+19&-16;if((m+19&-16|0)!=0)s[t>>2]=e}else t=0;b=64;e=1;do{g=e+ -1|0;m=s[t+(g<<2)>>2]|0;do if(((((+f[m>>2]<=a?+f[m+16>>2]>=r:0)?+f[m+4>>2]<=h:0)?+f[m+20>>2]>=p:0)?+f[m+8>>2]<=v:0)?+f[m+24>>2]>=d:0){if((s[m+40>>2]|0)==0){hD[s[(s[n>>2]|0)+12>>2]&127](n,m);e=g;break}y=s[m+36>>2]|0;if((g|0)==(b|0)?(i=(b|0)==0?1:b<<1,(e|0)<=(i|0)):0){if((i|0)!=0?(s[5004]=(s[5004]|0)+1,l=cM((i<<2|3)+16|0)|0,(l|0)!=0):0){s[(l+19&-16)+ -4>>2]=l;w=l+19&-16}else w=0;if((b|0)>0){S=0;do{E=w+(S<<2)|0;if((E|0)!=0)s[E>>2]=s[t+(S<<2)>>2];S=S+1|0}while((S|0)!=(b|0))}if((t|0)==0){b=i;t=w}else{s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);b=i;t=w}}g=t+(g<<2)|0;if((g|0)!=0)s[g>>2]=y;m=s[m+40>>2]|0;if((e|0)==(b|0)){b=(e|0)==0?1:e<<1;if((e|0)<(b|0)){if((b|0)!=0?(s[5004]=(s[5004]|0)+1,u=cM((b<<2|3)+16|0)|0,(u|0)!=0):0){s[(u+19&-16)+ -4>>2]=u;g=u+19&-16}else g=0;if((e|0)>0){y=0;do{w=g+(y<<2)|0;if((w|0)!=0)s[w>>2]=s[t+(y<<2)>>2];y=y+1|0}while((y|0)!=(e|0))}if((t|0)==0)t=g;else{s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);t=g}}else b=e}g=t+(e<<2)|0;if((g|0)!=0)s[g>>2]=m;e=e+1|0}else e=g;while(0)}while((e|0)>0);if((t|0)==0){c=o;return}s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);c=o;return}function DL(e){e=e|0;return}function PL(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0;i=c;if((s[t+60>>2]|0)==2){o=s[t+48>>2]|0;kL(e+64|0,o)|0;u=s[e+68>>2]|0;if((u|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+68>>2]=o;s[e+76>>2]=(s[e+76>>2]|0)+ -1}else{o=s[t+48>>2]|0;kL(e+4|0,o)|0;u=s[e+8>>2]|0;if((u|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+8>>2]=o;s[e+16>>2]=(s[e+16>>2]|0)+ -1}u=s[t+52>>2]|0;o=s[t+56>>2]|0;if((u|0)==0)s[e+(s[t+60>>2]<<2)+124>>2]=o;else s[u+56>>2]=o;o=s[t+56>>2]|0;if((o|0)!=0)s[o+52>>2]=s[t+52>>2];u=s[e+136>>2]|0;WD[s[(s[u>>2]|0)+16>>2]&127](u,t,n);if((t|0)==0){u=e+194|0;r[u>>0]=1;c=i;return}s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0);u=e+194|0;r[u>>0]=1;c=i;return}function HL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;e=c;s[n+0>>2]=s[t+16>>2];s[n+4>>2]=s[t+20>>2];s[n+8>>2]=s[t+24>>2];s[n+12>>2]=s[t+28>>2];s[r+0>>2]=s[t+32>>2];s[r+4>>2]=s[t+36>>2];s[r+8>>2]=s[t+40>>2];s[r+12>>2]=s[t+44>>2];c=e;return}function BL(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;n=c;c=c+16|0;s[n>>2]=11616;s[n+4>>2]=r;jL(e+4|0,s[e+4>>2]|0,t,r+4|0,r+20|0,+f[r+32>>2],i,o,n);jL(e+64|0,s[e+64>>2]|0,t,r+4|0,r+20|0,+f[r+32>>2],i,o,n);c=n;return}function jL(e,t,n,i,o,u,a,l,h){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=+u;a=a|0;l=l|0;h=h|0;var p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0;d=c;c=c+32|0;if((t|0)==0){c=d;return}y=s[e+44>>2]|0;if((y|0)<128){if((s[e+48>>2]|0)<128){s[5004]=(s[5004]|0)+1;b=cM(531)|0;if((b|0)==0)b=0;else{s[(b+19&-16)+ -4>>2]=b;b=b+19&-16}E=s[e+44>>2]|0;if((E|0)>0){w=0;do{S=b+(w<<2)|0;if((S|0)!=0)s[S>>2]=s[(s[e+52>>2]|0)+(w<<2)>>2];w=w+1|0}while((w|0)!=(E|0))}w=s[e+52>>2]|0;if((w|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[w+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=b;s[e+48>>2]=128;b=e+52|0}else b=e+52|0;do{w=(s[b>>2]|0)+(y<<2)|0;if((w|0)!=0)s[w>>2]=0;y=y+1|0}while((y|0)!=128);y=e+48|0}else y=e+48|0;s[e+44>>2]=128;s[s[e+52>>2]>>2]=t;t=1;E=126;do{b=t+ -1|0;S=s[e+52>>2]|0;w=s[S+(b<<2)>>2]|0;T=+f[w+4>>2]- +f[l+4>>2];x=+f[w+8>>2]- +f[l+8>>2];f[d>>2]=+f[w>>2]- +f[l>>2];f[d+4>>2]=T;f[d+8>>2]=x;f[d+12>>2]=0;x=+f[w+20>>2]- +f[a+4>>2];T=+f[w+24>>2]- +f[a+8>>2];f[d+16>>2]=+f[w+16>>2]- +f[a>>2];f[d+20>>2]=x;f[d+24>>2]=T;f[d+28>>2]=0;A=s[o>>2]|0;T=+f[n>>2];x=+f[i>>2];N=(+f[d+(A<<4)>>2]-T)*x;T=x*(+f[d+(1-A<<4)>>2]-T);A=s[o+4>>2]|0;x=+f[n+4>>2];O=+f[i+4>>2];C=(+f[d+(A<<4)+4>>2]-x)*O;x=O*(+f[d+(1-A<<4)+4>>2]-x);do if(((!(N>x|C>T)?(v=C>N?C:N,g=x<T?x:T,A=s[o+8>>2]|0,m=+f[n+8>>2],O=+f[i+8>>2],p=(+f[d+(A<<4)+8>>2]-m)*O,m=O*(+f[d+(1-A<<4)+8>>2]-m),!(v>m|p>g)):0)?(p>v?p:v)<u:0)?(m<g?m:g)>0:0){if((s[w+40>>2]|0)==0){hD[s[(s[h>>2]|0)+12>>2]&127](h,w);t=b;break}if((b|0)>(E|0)){E=s[e+44>>2]|0;if((E|0)<(E<<1|0)){if((s[y>>2]|0)<(E<<1|0)){if((E|0)!=0){s[5004]=(s[5004]|0)+1;S=cM((E<<3|3)+16|0)|0;if((S|0)==0)S=0;else{s[(S+19&-16)+ -4>>2]=S;S=S+19&-16}L=s[e+44>>2]|0;if((L|0)>0){k=0;do{A=S+(k<<2)|0;if((A|0)!=0)s[A>>2]=s[(s[e+52>>2]|0)+(k<<2)>>2];k=k+1|0}while((k|0)!=(L|0))}}else S=0;k=s[e+52>>2]|0;if((k|0)!=0){if((r[e+56>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[k+ -4>>2]|0)}s[e+52>>2]=0}r[e+56>>0]=1;s[e+52>>2]=S;s[y>>2]=E<<1;k=E}else k=E;do{S=S+(k<<2)|0;if((S|0)!=0)s[S>>2]=0;k=k+1|0;S=s[e+52>>2]|0}while((k|0)!=(E<<1|0))}s[e+44>>2]=E<<1;E=(E<<1)+ -2|0}s[S+(b<<2)>>2]=s[w+36>>2];s[(s[e+52>>2]|0)+(t<<2)>>2]=s[w+40>>2];t=t+1|0}else t=b;while(0)}while((t|0)!=0);c=d;return}function FL(e){e=e|0;return}function IL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;c=c+48|0;s[i+32>>2]=11536;s[i+36>>2]=r;s[i+0>>2]=s[t+0>>2];s[i+4>>2]=s[t+4>>2];s[i+8>>2]=s[t+8>>2];s[i+12>>2]=s[t+12>>2];s[i+16>>2]=s[n+0>>2];s[i+20>>2]=s[n+4>>2];s[i+24>>2]=s[n+8>>2];s[i+28>>2]=s[n+12>>2];_L(s[e+4>>2]|0,i,i+32|0);_L(s[e+64>>2]|0,i,i+32|0);c=i;return}function qL(e){e=e|0;return}function RL(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0;o=c;c=c+16|0;g=+f[n>>2];v=+f[n+4>>2];p=+f[n+8>>2];a=+f[n+12>>2];m=+f[i>>2];d=+f[i+4>>2];h=+f[i+8>>2];u=+f[i+12>>2];do if((s[t+60>>2]|0)==2){A=s[t+48>>2]|0;kL(e+64|0,A)|0;l=s[e+68>>2]|0;if((l|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0)}s[e+68>>2]=A;s[e+76>>2]=(s[e+76>>2]|0)+ -1;l=s[e+8>>2]|0;if((l|0)==0){s[5004]=(s[5004]|0)+1;A=cM(63)|0;if((A|0)!=0?(s[(A+19&-16)+ -4>>2]=A,(A+19&-16|0)!=0):0){O=(A+19&-16)+0|0;l=O+44|0;do{s[O>>2]=0;O=O+4|0}while((O|0)<(l|0));l=A+19&-16}else l=0}else s[e+8>>2]=0;s[l+32>>2]=0;s[l+36>>2]=t;s[l+40>>2]=0;f[l>>2]=g;f[l+4>>2]=v;f[l+8>>2]=p;f[l+12>>2]=a;f[l+16>>2]=m;f[l+20>>2]=d;f[l+24>>2]=h;f[l+28>>2]=u;CL(e+4|0,s[e+4>>2]|0,l);s[e+16>>2]=(s[e+16>>2]|0)+1;s[t+48>>2]=l;l=1}else{s[e+168>>2]=(s[e+168>>2]|0)+1;l=s[t+48>>2]|0;T=+f[l>>2];if(((((T<=m?(y=+f[l+16>>2],y>=g):0)?(b=+f[l+4>>2],b<=d):0)?(S=+f[l+20>>2],S>=v):0)?(w=+f[l+8>>2],w<=h):0)?(E=+f[l+24>>2],E>=p):0){D=+f[t+16>>2];L=+f[t+20>>2];k=+f[t+24>>2];x=+f[e+140>>2];N=(+f[t+32>>2]-D)*.5*x;C=x*(+f[t+36>>2]-L)*.5;x=x*(+f[t+40>>2]-k)*.5;if(g-D<0)N=-N;if(v-L<0)C=-C;if(p-k<0)x=-x;if(!(!(T<=g)|!(b<=v)|!(w<=p)|!(y>=m)|!(S>=d)|!(E>=h))){l=0;break}if(N>0){g=g+ -.05000000074505806;m=N+(m+.05000000074505806)}else{g=N+(g+ -.05000000074505806);m=m+.05000000074505806}if(C>0){v=v+ -.05000000074505806;d=C+(d+.05000000074505806)}else{v=C+(v+ -.05000000074505806);d=d+.05000000074505806}if(x>0){p=p+ -.05000000074505806;h=x+(h+.05000000074505806)}else{p=x+(p+ -.05000000074505806);h=h+.05000000074505806}M=kL(e+4|0,l)|0;e:do if((M|0)!=0){A=s[e+12>>2]|0;if(!((A|0)>-1)){M=s[e+4>>2]|0;break}if((A|0)>0){O=0;while(1){_=s[M+32>>2]|0;O=O+1|0;if((_|0)==0)break e;if((O|0)>=(A|0)){M=_;break}else M=_}}}else M=0;while(0);f[l>>2]=g;f[l+4>>2]=v;f[l+8>>2]=p;f[l+12>>2]=a;f[l+16>>2]=m;f[l+20>>2]=d;f[l+24>>2]=h;f[l+28>>2]=u;CL(e+4|0,M,l);s[e+172>>2]=(s[e+172>>2]|0)+1;l=1;break}M=kL(e+4|0,l)|0;t:do if((M|0)!=0){A=s[e+12>>2]|0;if(!((A|0)>-1)){M=s[e+4>>2]|0;break}if((A|0)>0){O=0;while(1){_=s[M+32>>2]|0;O=O+1|0;if((_|0)==0)break t;if((O|0)>=(A|0)){M=_;break}else M=_}}}else M=0;while(0);f[l>>2]=g;f[l+4>>2]=v;f[l+8>>2]=p;f[l+12>>2]=a;f[l+16>>2]=m;f[l+20>>2]=d;f[l+24>>2]=h;f[l+28>>2]=u;CL(e+4|0,M,l);s[e+172>>2]=(s[e+172>>2]|0)+1;l=1}while(0);A=s[t+52>>2]|0;O=s[t+56>>2]|0;if((A|0)==0)s[e+(s[t+60>>2]<<2)+124>>2]=O;else s[A+56>>2]=O;A=s[t+56>>2]|0;if((A|0)!=0)s[A+52>>2]=s[t+52>>2];s[t+16>>2]=s[n+0>>2];s[t+20>>2]=s[n+4>>2];s[t+24>>2]=s[n+8>>2];s[t+28>>2]=s[n+12>>2];s[t+32>>2]=s[i+0>>2];s[t+36>>2]=s[i+4>>2];s[t+40>>2]=s[i+8>>2];s[t+44>>2]=s[i+12>>2];s[t+60>>2]=s[e+144>>2];i=e+(s[e+144>>2]<<2)+124|0;s[t+52>>2]=0;s[t+56>>2]=s[i>>2];n=s[i>>2]|0;if((n|0)!=0)s[n+52>>2]=t;s[i>>2]=t;if(!l){c=o;return}r[e+194>>0]=1;if((r[e+193>>0]|0)!=0){c=o;return}s[o>>2]=11696;s[o+4>>2]=e;UL(e+64|0,s[e+64>>2]|0,s[t+48>>2]|0,o);UL(e+4|0,s[e+4>>2]|0,s[t+48>>2]|0,o);c=o;return}function UL(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0;o=c;if((t|0)==0|(n|0)==0){c=o;return}if((s[e+24>>2]|0)<128?(s[e+28>>2]|0)<128:0){s[5004]=(s[5004]|0)+1;u=cM(1043)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}h=s[e+24>>2]|0;if((h|0)>0){l=0;do{a=u+(l<<3)|0;if((a|0)!=0){v=(s[e+32>>2]|0)+(l<<3)|0;m=s[v+4>>2]|0;s[a>>2]=s[v>>2];s[a+4>>2]=m}l=l+1|0}while((l|0)!=(h|0))}a=s[e+32>>2]|0;if((a|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=u;s[e+28>>2]=128;u=e+28|0}else u=e+28|0;s[e+24>>2]=128;h=s[e+32>>2]|0;s[h>>2]=t;s[h+4>>2]=n;n=1;h=124;do{l=n+ -1|0;d=s[e+32>>2]|0;a=s[d+(l<<3)>>2]|0;t=s[d+(l<<3)+4>>2]|0;if((l|0)>(h|0)){h=s[e+24>>2]|0;if((h|0)<(h<<1|0)?(s[u>>2]|0)<(h<<1|0):0){if((h|0)!=0){s[5004]=(s[5004]|0)+1;p=cM((h<<4|3)+16|0)|0;if((p|0)==0)m=0;else{s[(p+19&-16)+ -4>>2]=p;m=p+19&-16}d=s[e+24>>2]|0;if((d|0)>0){p=0;do{v=m+(p<<3)|0;if((v|0)!=0){y=(s[e+32>>2]|0)+(p<<3)|0;g=s[y+4>>2]|0;s[v>>2]=s[y>>2];s[v+4>>2]=g}p=p+1|0}while((p|0)!=(d|0));d=m}else d=m}else d=0;p=s[e+32>>2]|0;if((p|0)!=0){if((r[e+36>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[p+ -4>>2]|0)}s[e+32>>2]=0}r[e+36>>0]=1;s[e+32>>2]=d;s[u>>2]=h<<1}s[e+24>>2]=h<<1;h=(h<<1)+ -4|0}do if((a|0)==(t|0))if((s[a+40>>2]|0)==0)n=l;else{g=s[a+36>>2]|0;y=d+(l<<3)|0;s[y>>2]=g;s[y+4>>2]=g;y=s[a+40>>2]|0;g=(s[e+32>>2]|0)+(n<<3)|0;s[g>>2]=y;s[g+4>>2]=y;g=s[a+40>>2]|0;y=(s[e+32>>2]|0)+(n+1<<3)|0;s[y>>2]=s[a+36>>2];s[y+4>>2]=g;n=n+2|0}else if(((((+f[a>>2]<=+f[t+16>>2]?+f[a+16>>2]>=+f[t>>2]:0)?+f[a+4>>2]<=+f[t+20>>2]:0)?+f[a+20>>2]>=+f[t+4>>2]:0)?+f[a+8>>2]<=+f[t+24>>2]:0)?+f[a+24>>2]>=+f[t+8>>2]:0){p=(s[t+40>>2]|0)!=0;if((s[a+40>>2]|0)==0)if(p){y=s[t+36>>2]|0;g=d+(l<<3)|0;s[g>>2]=a;s[g+4>>2]=y;g=s[t+40>>2]|0;y=(s[e+32>>2]|0)+(n<<3)|0;s[y>>2]=a;s[y+4>>2]=g;n=n+1|0;break}else{WD[s[(s[i>>2]|0)+8>>2]&127](i,a,t);n=l;break}else{l=d+(l<<3)|0;d=s[a+36>>2]|0;if(p){g=s[t+36>>2]|0;s[l>>2]=d;s[l+4>>2]=g;g=s[t+36>>2]|0;y=(s[e+32>>2]|0)+(n<<3)|0;s[y>>2]=s[a+40>>2];s[y+4>>2]=g;y=s[t+40>>2]|0;g=(s[e+32>>2]|0)+(n+1<<3)|0;s[g>>2]=s[a+36>>2];s[g+4>>2]=y;g=s[t+40>>2]|0;y=(s[e+32>>2]|0)+(n+2<<3)|0;s[y>>2]=s[a+40>>2];s[y+4>>2]=g;n=n+3|0;break}else{s[l>>2]=d;s[l+4>>2]=t;y=(s[e+32>>2]|0)+(n<<3)|0;s[y>>2]=s[a+40>>2];s[y+4>>2]=t;n=n+1|0;break}}}else n=l;while(0)}while((n|0)!=0);c=o;return}function zL(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0;n=c;c=c+48|0;NL(e+4|0,((rt(s[e+152>>2]|0,s[e+16>>2]|0)|0)/100|0)+1|0);if((s[e+164>>2]|0)!=0){v=((rt(s[e+148>>2]|0,s[e+76>>2]|0)|0)/100|0)+1|0;NL(e+64|0,v);v=(s[e+164>>2]|0)-v|0;s[e+164>>2]=(v|0)<0?0:v}l=((s[e+144>>2]|0)+1|0)%2|0;s[e+144>>2]=l;l=s[e+(l<<2)+124>>2]|0;if((l|0)!=0){do{h=l+56|0;a=l;l=s[h>>2]|0;p=s[a+52>>2]|0;if((p|0)==0)s[e+(s[a+60>>2]<<2)+124>>2]=l;else s[p+56>>2]=l;p=s[h>>2]|0;if((p|0)!=0)s[p+52>>2]=s[a+52>>2];s[a+52>>2]=0;s[h>>2]=s[e+132>>2];h=s[e+132>>2]|0;if((h|0)!=0)s[h+52>>2]=a;s[e+132>>2]=a;p=s[a+48>>2]|0;kL(e+4|0,p)|0;h=s[e+8>>2]|0;if((h|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0)}s[e+8>>2]=p;s[e+16>>2]=(s[e+16>>2]|0)+ -1;s[n+16>>2]=s[a+16>>2];s[n+20>>2]=s[a+20>>2];s[n+24>>2]=s[a+24>>2];s[n+28>>2]=s[a+28>>2];s[n+32>>2]=s[a+32>>2];s[n+36>>2]=s[a+36>>2];s[n+40>>2]=s[a+40>>2];s[n+44>>2]=s[a+44>>2];h=s[e+68>>2]|0;if((h|0)==0){s[5004]=(s[5004]|0)+1;h=cM(63)|0;if((h|0)!=0?(s[(h+19&-16)+ -4>>2]=h,(h+19&-16|0)!=0):0){d=(h+19&-16)+0|0;p=d+44|0;do{s[d>>2]=0;d=d+4|0}while((d|0)<(p|0));h=h+19&-16}else h=0}else s[e+68>>2]=0;s[h+32>>2]=0;s[h+36>>2]=a;s[h+40>>2]=0;s[h+0>>2]=s[n+16>>2];s[h+4>>2]=s[n+20>>2];s[h+8>>2]=s[n+24>>2];s[h+12>>2]=s[n+28>>2];s[h+16>>2]=s[n+32>>2];s[h+20>>2]=s[n+36>>2];s[h+24>>2]=s[n+40>>2];s[h+28>>2]=s[n+44>>2];CL(e+64|0,s[e+64>>2]|0,h);s[e+76>>2]=(s[e+76>>2]|0)+1;s[a+48>>2]=h;s[a+60>>2]=2}while((l|0)!=0);s[e+164>>2]=s[e+76>>2];r[e+194>>0]=1}s[n>>2]=11696;s[n+4>>2]=e;if((r[e+193>>0]|0)!=0?(UL(e+4|0,s[e+4>>2]|0,s[e+64>>2]|0,n),(r[e+193>>0]|0)!=0):0){v=s[e+4>>2]|0;UL(e+4|0,v,v,n)}do if((r[e+194>>0]|0)!=0?(o=s[e+136>>2]|0,o=dD[s[(s[o>>2]|0)+28>>2]&127](o)|0,u=s[o+4>>2]|0,(u|0)>0):0){l=(rt(s[e+156>>2]|0,u)|0)/100|0;v=s[e+160>>2]|0;l=(v|0)>(l|0)?v:l;l=(u|0)<(l|0)?u:l;if((l|0)>0){a=0;do{p=((s[e+184>>2]|0)+a|0)%(u|0)|0;d=s[o+12>>2]|0;h=s[d+(p<<4)>>2]|0;p=s[d+(p<<4)+4>>2]|0;d=s[h+48>>2]|0;v=s[p+48>>2]|0;if(!(((((+f[d>>2]<=+f[v+16>>2]?+f[d+16>>2]>=+f[v>>2]:0)?+f[d+4>>2]<=+f[v+20>>2]:0)?+f[d+20>>2]>=+f[v+4>>2]:0)?+f[d+8>>2]<=+f[v+24>>2]:0)?+f[d+24>>2]>=+f[v+8>>2]:0)){u=s[e+136>>2]|0;yD[s[(s[u>>2]|0)+12>>2]&31](u,h,p,t)|0;u=s[o+4>>2]|0;a=a+ -1|0;l=l+ -1|0}a=a+1|0}while((a|0)<(l|0));if((u|0)<=0){s[e+184>>2]=0;break}}s[e+184>>2]=((s[e+184>>2]|0)+l|0)%(u|0)|0}while(0);s[e+180>>2]=(s[e+180>>2]|0)+1;s[e+160>>2]=1;r[e+194>>0]=0;o=s[e+168>>2]|0;if((o|0)==0){f[e+176>>2]=0;u=s[e+172>>2]|0}else{u=s[e+172>>2]|0;f[e+176>>2]=+(u>>>0)/+(o>>>0)}s[e+172>>2]=u>>>1;s[e+168>>2]=o>>>1;v=s[e+136>>2]|0;if(!(dD[s[(s[v>>2]|0)+56>>2]&127](v)|0)){c=n;return}o=s[e+136>>2]|0;o=dD[s[(s[o>>2]|0)+28>>2]&127](o)|0;h=s[o+4>>2]|0;if((h|0)>1){Vv(o,0,h+ -1|0);d=0;l=0;u=0;a=0;i=45}else{l=0;d=0;u=0;a=0}while(1){if((i|0)==45)h=s[o+4>>2]|0;if((u|0)>=(h|0))break;p=s[o+12>>2]|0;h=p+(u<<4)|0;i=s[h>>2]|0;p=p+(u<<4)+4|0;v=s[p>>2]|0;if((i|0)==(l|0))if((v|0)==(d|0))i=55;else i=49;else{l=i;i=49}if((i|0)==49){i=0;m=s[l+48>>2]|0;d=s[v+48>>2]|0;if(((((+f[m>>2]<=+f[d+16>>2]?+f[m+16>>2]>=+f[d>>2]:0)?+f[m+4>>2]<=+f[d+20>>2]:0)?+f[m+20>>2]>=+f[d+4>>2]:0)?+f[m+8>>2]<=+f[d+24>>2]:0)?+f[m+24>>2]>=+f[d+8>>2]:0)d=v;else{d=v;i=55}}if((i|0)==55){m=s[e+136>>2]|0;WD[s[(s[m>>2]|0)+32>>2]&127](m,h,t);s[h>>2]=0;s[p>>2]=0;a=a+1|0}u=u+1|0;i=45}if((h|0)>1){Vv(o,0,h+ -1|0);h=s[o+4>>2]|0}e=h-a|0;if((a|0)<0){if((s[o+8>>2]|0)<(e|0)){if((h|0)==(a|0))t=0;else{s[5004]=(s[5004]|0)+1;t=cM((e<<4|3)+16|0)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}a=s[o+4>>2]|0}if((a|0)>0){i=0;do{m=s[o+12>>2]|0;s[t+(i<<4)>>2]=s[m+(i<<4)>>2];s[t+(i<<4)+4>>2]=s[m+(i<<4)+4>>2];s[t+(i<<4)+8>>2]=s[m+(i<<4)+8>>2];s[t+(i<<4)+12>>2]=s[m+(i<<4)+12>>2];i=i+1|0}while((i|0)!=(a|0))}i=s[o+12>>2]|0;if((i|0)!=0){if((r[o+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[o+12>>2]=0}r[o+16>>0]=1;s[o+12>>2]=t;s[o+8>>2]=e;t=o+12|0}else t=o+12|0;do{v=(s[t>>2]|0)+(h<<4)|0;h=h+1|0;m=(h|0)==(e|0);s[v+0>>2]=0;s[v+4>>2]=0;s[v+8>>2]=0;s[v+12>>2]=0}while(!m)}s[o+4>>2]=e;c=n;return}function WL(e){e=e|0;return s[e+136>>2]|0}function XL(e){e=e|0;return s[e+136>>2]|0}function VL(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0;r=c;i=s[e+4>>2]|0;e=s[e+64>>2]|0;do if((i|0)==0)if((e|0)==0){o=0;u=0;d=0;p=0;h=0;l=0;a=0;v=0}else{o=+f[e>>2];u=+f[e+4>>2];d=+f[e+8>>2];p=+f[e+12>>2];h=+f[e+16>>2];l=+f[e+20>>2];a=+f[e+24>>2];v=+f[e+28>>2]}else{o=+f[i>>2];if((e|0)==0){u=+f[i+4>>2];d=+f[i+8>>2];p=+f[i+12>>2];h=+f[i+16>>2];l=+f[i+20>>2];a=+f[i+24>>2];v=+f[i+28>>2];break}else{b=+f[e>>2];g=+f[i+16>>2];h=+f[e+16>>2];y=+f[i+4>>2];u=+f[e+4>>2];m=+f[i+20>>2];l=+f[e+20>>2];p=+f[i+8>>2];d=+f[e+8>>2];v=+f[i+24>>2];a=+f[e+24>>2];o=o<b?o:b;u=y<u?y:u;d=p<d?p:d;p=0;h=g>h?g:h;l=m>l?m:l;a=v>a?v:a;v=0;break}}while(0);f[t>>2]=o;f[t+4>>2]=u;f[t+8>>2]=d;f[t+12>>2]=p;f[n>>2]=h;f[n+4>>2]=l;f[n+8>>2]=a;f[n+12>>2]=v;c=r;return}function $L(e,t){e=e|0;t=t|0;var n=0;t=c;if((s[e+16>>2]|0)!=(0-(s[e+76>>2]|0)|0)){c=t;return}n=s[e+4>>2]|0;if((n|0)!=0)TL(e+4|0,n);n=s[e+8>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+8>>2]=0;s[e+12>>2]=-1;n=s[e+36>>2]|0;if((n|0)!=0){if((r[e+40>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+36>>2]=0}r[e+40>>0]=1;s[e+36>>2]=0;s[e+28>>2]=0;s[e+32>>2]=0;s[e+20>>2]=0;n=s[e+64>>2]|0;if((n|0)!=0)TL(e+64|0,n);n=s[e+68>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+68>>2]=0;s[e+72>>2]=-1;n=s[e+96>>2]|0;if((n|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=0;s[e+88>>2]=0;s[e+92>>2]=0;s[e+80>>2]=0;r[e+193>>0]=0;r[e+194>>0]=1;s[e+144>>2]=0;s[e+164>>2]=0;s[e+148>>2]=1;s[e+152>>2]=0;s[e+156>>2]=10;s[e+160>>2]=1;s[e+124>>2]=0;s[e+128>>2]=0;s[e+132>>2]=0;s[e+168>>2]=0;s[e+172>>2]=0;s[e+176>>2]=0;s[e+180>>2]=0;s[e+184>>2]=0;s[e+188>>2]=0;c=t;return}function JL(e){e=e|0;return}function KL(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function QL(e,t){e=e|0;t=t|0;var n=0;n=c;e=s[e+4>>2]|0;DD[s[(s[e>>2]|0)+8>>2]&31](e,s[t+36>>2]|0)|0;c=n;return}function GL(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function YL(e,t){e=e|0;t=t|0;var n=0;n=c;e=s[e+4>>2]|0;DD[s[(s[e>>2]|0)+8>>2]&31](e,s[t+36>>2]|0)|0;c=n;return}function ZL(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function eA(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0;r=c;if((t|0)==(n|0)){c=r;return}i=s[(s[e+4>>2]|0)+136>>2]|0;xD[s[(s[i>>2]|0)+8>>2]&31](i,s[t+36>>2]|0,s[n+36>>2]|0)|0;n=(s[e+4>>2]|0)+160|0;s[n>>2]=(s[n>>2]|0)+1;c=r;return}function tA(e,t){e=e|0;t=t|0;var n=0;n=c;WD[s[(s[e>>2]|0)+8>>2]&127](e,t,s[(s[e+8>>2]|0)+48>>2]|0);c=n;return}function nA(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0;n=c;s[e>>2]=11776;s[5004]=(s[5004]|0)+1;a=cM(379)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}f[a+308>>2]=9999999747378752e-20;l=a+332|0;r[l>>0]=r[l>>0]&-16;s[e+24>>2]=a;a=(s[t+20>>2]|0)==0;s[5004]=(s[5004]|0)+1;l=cM(23)|0;if((l|0)==0)h=0;else{s[(l+19&-16)+ -4>>2]=l;h=l+19&-16}l=(h|0)==0;if(a){if(l)h=0;else s[h>>2]=14576;s[e+28>>2]=h}else{if(l)h=0;else s[h>>2]=13248;s[e+28>>2]=h}s[5004]=(s[5004]|0)+1;a=cM(43)|0;if((a|0)!=0?(u=a+19&-16,s[u+ -4>>2]=a,(a+19&-16|0)!=0):0){h=s[e+24>>2]|0;p=s[e+28>>2]|0;r[u+4>>0]=0;s[(a+19&-16)>>2]=18792;s[u+16>>2]=0;s[u+20>>2]=3;s[u+12>>2]=h;s[u+8>>2]=p;u=a+19&-16}else u=0;s[e+32>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12784;u=u+19&-16}else u=0;s[e+36>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12680;u=u+19&-16}else u=0;s[e+40>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12592;u=u+19&-16}else u=0;s[e+44>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12496;u=u+19&-16}else u=0;s[e+48>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12400;u=u+19&-16}else u=0;s[e+52>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12320;u=u+19&-16}else u=0;s[e+56>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12224;u=u+19&-16}else u=0;s[e+60>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12128;u=u+19&-16}else u=0;s[e+76>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12128;u=u+19&-16}else u=0;s[e+80>>2]=u;r[u+4>>0]=1;s[5004]=(s[5004]|0)+1;u=cM(27)|0;if((u|0)!=0?(s[(u+19&-16)+ -4>>2]=u,(u+19&-16|0)!=0):0){r[(u+19&-16)+4>>0]=0;s[(u+19&-16)>>2]=12040;u=u+19&-16}else u=0;s[e+72>>2]=u;s[5004]=(s[5004]|0)+1;u=cM(35)|0;if((u|0)!=0?(o=u+19&-16,s[o+ -4>>2]=u,(u+19&-16|0)!=0):0){r[o+4>>0]=0;s[(u+19&-16)>>2]=11904;s[o+8>>2]=1;s[o+12>>2]=0;o=u+19&-16}else o=0;s[e+88>>2]=o;s[5004]=(s[5004]|0)+1;o=cM(35)|0;if((o|0)!=0?(i=o+19&-16,s[i+ -4>>2]=o,(o+19&-16|0)!=0):0){r[i+4>>0]=0;s[(o+19&-16)>>2]=11904;s[i+8>>2]=1;s[i+12>>2]=0;i=o+19&-16}else i=0;s[e+84>>2]=i;r[i+4>>0]=1;i=s[t+16>>2]|0;i=(i|0)<36?36:i;i=(i|0)>80?i:80;i=(i|0)>44?i:44;o=s[t>>2]|0;if((o|0)==0){r[e+12>>0]=1;s[5004]=(s[5004]|0)+1;o=cM(39)|0;do if((o|0)==0)o=0;else{l=o+19&-16;s[l+ -4>>2]=o;if((o+19&-16|0)==0){o=0;break}u=s[t+8>>2]|0;s[(o+19&-16)>>2]=772;s[l+4>>2]=u;s[5004]=(s[5004]|0)+1;u=cM((u*772|3)+16|0)|0;if((u|0)==0)a=0;else{s[(u+19&-16)+ -4>>2]=u;a=u+19&-16}s[l+16>>2]=a;s[l+12>>2]=a;u=s[l+4>>2]|0;s[l+8>>2]=u;if((u+ -1|0)!=0){p=s[(o+19&-16)>>2]|0;h=u+ -1|0;l=a;do{d=l;l=l+p|0;s[d>>2]=l;h=h+ -1|0}while((h|0)!=0);a=a+(rt(p,u+ -1|0)|0)|0}s[a>>2]=0;o=o+19&-16}while(0);s[e+8>>2]=o}else{r[e+12>>0]=0;s[e+8>>2]=o}o=s[t+4>>2]|0;if((o|0)!=0){r[e+20>>0]=0;s[e+16>>2]=o;c=n;return}r[e+20>>0]=1;s[5004]=(s[5004]|0)+1;o=cM(39)|0;do if((o|0)==0)t=0;else{u=o+19&-16;s[u+ -4>>2]=o;if((o+19&-16|0)==0){t=0;break}t=s[t+12>>2]|0;s[(o+19&-16)>>2]=i;s[u+4>>2]=t;t=rt(t,i)|0;s[5004]=(s[5004]|0)+1;t=cM(t+19|0)|0;if((t|0)==0)i=0;else{s[(t+19&-16)+ -4>>2]=t;i=t+19&-16}s[u+16>>2]=i;s[u+12>>2]=i;t=s[u+4>>2]|0;s[u+8>>2]=t;if((t+ -1|0)!=0){a=s[(o+19&-16)>>2]|0;u=t+ -1|0;l=i;do{d=l;l=l+a|0;s[d>>2]=l;u=u+ -1|0}while((u|0)!=0);i=i+(rt(a,t+ -1|0)|0)|0}s[i>>2]=0;t=o+19&-16}while(0);s[e+16>>2]=t;c=n;return}function rA(e){e=e|0;var t=0;t=c;iA(e);hM(e);c=t;return}function iA(e){e=e|0;var t=0,n=0,i=0;t=c;s[e>>2]=11776;if((r[e+20>>0]|0)!=0){n=s[e+16>>2]|0;i=s[n+16>>2]|0;if((i|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0);n=s[e+16>>2]|0}if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}}if((r[e+12>>0]|0)!=0){n=s[e+8>>2]|0;i=s[n+16>>2]|0;if((i|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0);n=s[e+8>>2]|0}if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}}n=s[e+32>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+32>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+36>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+36>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+40>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+40>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+44>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+44>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+48>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+48>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+52>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+56>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+56>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+60>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+60>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+76>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+76>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+80>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+80>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+72>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+72>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+88>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+88>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+84>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+84>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}n=s[e+24>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}i=s[e+28>>2]|0;lD[s[s[i>>2]>>2]&511](i);e=s[e+28>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function sA(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;do if(!((t|0)==8&(n|0)==8)){if((t|0)==8&(n|0)==1){e=e+76|0;break}if((t|0)==1&(n|0)==8){e=e+80|0;break}if((n|t|0)==0){e=e+72|0;break}if((t|0)<20&(n|0)==28){e=e+88|0;break}if((n|0)<20&(t|0)==28){e=e+84|0;break}if((t|0)<20){if((n|0)<20){e=e+32|0;break}if((n+ -21|0)>>>0<9){e=e+36|0;break}}else if((n|0)<20?(t+ -21|0)>>>0<9:0){e=e+40|0;break}if((t|0)==31)if((n|0)==31){e=e+48|0;break}else{e=e+44|0;break}else if((n|0)==31){e=e+52|0;break}else{e=e+56|0;break}}else e=e+60|0;while(0);c=r;return s[e>>2]|0}function oA(e){e=e|0;return s[e+8>>2]|0}function uA(e){e=e|0;return s[e+16>>2]|0}function aA(e){e=e|0;return s[e+24>>2]|0}function fA(e){e=e|0;return}function lA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function cA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,f=0;o=c;u=s[t>>2]|0;u=DD[s[(s[u>>2]|0)+56>>2]&31](u,28)|0;if((r[e+4>>0]|0)==0){if((u|0)==0){i=0;c=o;return i|0}a=s[e+8>>2]|0;e=s[e+12>>2]|0;t=s[t>>2]|0;s[u+4>>2]=t;s[u>>2]=19408;r[u+8>>0]=0;s[u+12>>2]=0;r[u+16>>0]=0;s[u+20>>2]=a;s[u+24>>2]=e;if(!(xD[s[(s[t>>2]|0)+24>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0)){a=u;c=o;return a|0}a=s[u+4>>2]|0;s[u+12>>2]=xD[s[(s[a>>2]|0)+12>>2]&31](a,s[n+8>>2]|0,s[i+8>>2]|0)|0;r[u+8>>0]=1;a=u;c=o;return a|0}else{if((u|0)==0){a=0;c=o;return a|0}f=s[e+8>>2]|0;e=s[e+12>>2]|0;a=s[t>>2]|0;s[u+4>>2]=a;s[u>>2]=19408;r[u+8>>0]=0;s[u+12>>2]=0;r[u+16>>0]=1;s[u+20>>2]=f;s[u+24>>2]=e;if(!(xD[s[(s[a>>2]|0)+24>>2]&31](a,s[i+8>>2]|0,s[n+8>>2]|0)|0)){f=u;c=o;return f|0}f=s[u+4>>2]|0;s[u+12>>2]=xD[s[(s[f>>2]|0)+12>>2]&31](f,s[i+8>>2]|0,s[n+8>>2]|0)|0;r[u+8>>0]=1;f=u;c=o;return f|0}return 0}function hA(e){e=e|0;return}function pA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function dA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,16)|0;if((o|0)==0){o=0;c=e;return o|0}t=s[t>>2]|0;s[o+4>>2]=t;s[o>>2]=17896;r[o+8>>0]=0;s[o+12>>2]=0;if(!(xD[s[(s[t>>2]|0)+24>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0)){c=e;return o|0}t=s[o+4>>2]|0;s[o+12>>2]=xD[s[(s[t>>2]|0)+12>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0;r[o+8>>0]=1;c=e;return o|0}function vA(e){e=e|0;return}function mA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function gA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0;o=c;u=s[t>>2]|0;u=DD[s[(s[u>>2]|0)+56>>2]&31](u,20)|0;if((u|0)==0){e=0;c=o;return e|0}a=s[t+4>>2]|0;e=r[e+4>>0]|0;t=s[t>>2]|0;s[u+4>>2]=t;s[u>>2]=16904;r[u+8>>0]=0;s[u+12>>2]=a;r[u+16>>0]=e;if((a|0)!=0){a=u;c=o;return a|0}s[u+12>>2]=xD[s[(s[t>>2]|0)+12>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0;r[u+8>>0]=1;a=u;c=o;return a|0}function yA(e){e=e|0;return}function bA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function wA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,16)|0;if((o|0)==0){o=0;c=e;return o|0}t=s[t>>2]|0;s[o+4>>2]=t;s[o>>2]=16816;r[o+8>>0]=0;s[o+12>>2]=0;s[o+12>>2]=xD[s[(s[t>>2]|0)+12>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0;r[o+8>>0]=1;c=e;return o|0}function EA(e){e=e|0;return}function SA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function xA(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;e=c;n=s[t>>2]|0;n=DD[s[(s[n>>2]|0)+56>>2]&31](n,8)|0;if((n|0)==0){r=0;c=e;return r|0}s[n+4>>2]=s[t>>2];s[n>>2]=12904;r=n;c=e;return r|0}function TA(e){e=e|0;return}function NA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function CA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,44)|0;if((o|0)==0){o=0;c=e;return o|0}s[o+4>>2]=s[t>>2];s[o>>2]=18040;r[o+24>>0]=1;s[o+20>>2]=0;s[o+12>>2]=0;s[o+16>>2]=0;r[o+28>>0]=1;s[o+32>>2]=s[t+4>>2];r[o+36>>0]=0;s[o+40>>2]=s[(s[i+4>>2]|0)+68>>2];BT(o,n,i);c=e;return o|0}function kA(e){e=e|0;return}function LA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function AA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,f=0,l=0,h=0,p=0;u=c;e=s[t>>2]|0;e=DD[s[(s[e>>2]|0)+56>>2]&31](e,48)|0;if((e|0)==0){h=0;c=u;return h|0}s[e+4>>2]=s[t>>2];s[e>>2]=18208;r[e+28>>0]=1;s[e+24>>2]=0;s[e+16>>2]=0;s[e+20>>2]=0;s[e+32>>2]=s[t+4>>2];r[e+36>>0]=0;s[5004]=(s[5004]|0)+1;t=cM(87)|0;if((t|0)!=0?(o=t+19&-16,s[o+ -4>>2]=t,(t+19&-16|0)!=0):0){s[(t+19&-16)>>2]=19600;r[o+20>>0]=1;s[o+16>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;r[o+24>>0]=0;r[o+44>>0]=1;s[o+40>>2]=0;s[o+32>>2]=0;s[o+36>>2]=0;r[o+64>>0]=1;s[o+60>>2]=0;s[o+52>>2]=0;s[o+56>>2]=0;s[5004]=(s[5004]|0)+1;a=cM(43)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}f=s[o+8>>2]|0;if((f|0)>0){l=0;do{h=a+(l*12|0)|0;if((h|0)!=0){p=(s[o+16>>2]|0)+(l*12|0)|0;s[h+0>>2]=s[p+0>>2];s[h+4>>2]=s[p+4>>2];s[h+8>>2]=s[p+8>>2]}l=l+1|0}while((l|0)!=(f|0))}f=s[o+16>>2]|0;if((f|0)!=0){if((r[o+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[f+ -4>>2]|0)}s[o+16>>2]=0}r[o+20>>0]=1;s[o+16>>2]=a;s[o+12>>2]=2;QN(t+19&-16);o=t+19&-16}else o=0;s[e+8>>2]=o;s[e+40>>2]=s[(s[n+4>>2]|0)+68>>2];s[e+44>>2]=s[(s[i+4>>2]|0)+68>>2];p=e;c=u;return p|0}function OA(e){e=e|0;return}function MA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function _A(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,44)|0;if((o|0)==0){o=0;c=e;return o|0}s[o+4>>2]=s[t>>2];s[o>>2]=18040;r[o+24>>0]=1;s[o+20>>2]=0;s[o+12>>2]=0;s[o+16>>2]=0;r[o+28>>0]=0;s[o+32>>2]=s[t+4>>2];r[o+36>>0]=0;s[o+40>>2]=s[(s[n+4>>2]|0)+68>>2];BT(o,n,i);c=e;return o|0}function DA(e){e=e|0;return}function PA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function HA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,80)|0;if((o|0)==0){o=0;c=e;return o|0}s[o+4>>2]=s[t>>2];s[o>>2]=18432;r[o+8>>0]=1;t=s[t>>2]|0;s[o+12>>2]=18464;s[o+60>>2]=t;s[o+64>>2]=0;s[o+16>>2]=i;s[o+20>>2]=n;n=xD[s[(s[t>>2]|0)+12>>2]&31](t,s[i+8>>2]|0,s[n+8>>2]|0)|0;s[o+76>>2]=n;i=s[o+60>>2]|0;hD[s[(s[i>>2]|0)+20>>2]&127](i,n);c=e;return o|0}function BA(e){e=e|0;return}function jA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function FA(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0;e=c;o=s[t>>2]|0;o=DD[s[(s[o>>2]|0)+56>>2]&31](o,80)|0;if((o|0)==0){o=0;c=e;return o|0}s[o+4>>2]=s[t>>2];s[o>>2]=18432;r[o+8>>0]=0;t=s[t>>2]|0;s[o+12>>2]=18464;s[o+60>>2]=t;s[o+64>>2]=0;s[o+16>>2]=n;s[o+20>>2]=i;i=xD[s[(s[t>>2]|0)+12>>2]&31](t,s[n+8>>2]|0,s[i+8>>2]|0)|0;s[o+76>>2]=i;n=s[o+60>>2]|0;hD[s[(s[n>>2]|0)+20>>2]&127](n,i);c=e;return o|0}function IA(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return}function qA(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return 1}function RA(e){e=e|0;return}function UA(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function zA(e,t){e=e|0;t=t|0;return}function WA(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=13008;n=s[e+276>>2]|0;if((n|0)==0){r[e+280>>0]=1;s[e+276>>2]=0;s[e+268>>2]=0;s[e+272>>2]=0}else{if((r[e+280>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}r[e+280>>0]=1;s[e+276>>2]=0;s[e+268>>2]=0;s[e+272>>2]=0}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function XA(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=13008;n=s[e+276>>2]|0;if((n|0)!=0){if((r[e+280>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+276>>2]=0}r[e+280>>0]=1;s[e+276>>2]=0;s[e+268>>2]=0;s[e+272>>2]=0;c=t;return}function VA(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0;n=c;t=s[t>>2]|0;u=s[e+268>>2]|0;e:do if((u|0)>0){f=s[e+276>>2]|0;a=0;while(1){o=a+1|0;if((s[f+(a<<2)>>2]|0)==(t|0))break;if((o|0)<(u|0))a=o;else break e}if((a|0)!=(u|0)){c=n;return}}while(0);if((u|0)==(s[e+272>>2]|0)?(i=(u|0)==0?1:u<<1,(u|0)<(i|0)):0){if((i|0)==0)o=0;else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[e+268>>2]|0}if((u|0)>0){f=0;do{a=o+(f<<2)|0;if((a|0)!=0)s[a>>2]=s[(s[e+276>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(u|0))}a=s[e+276>>2]|0;if((a|0)!=0){if((r[e+280>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[e+268>>2]|0}s[e+276>>2]=0}r[e+280>>0]=1;s[e+276>>2]=o;s[e+272>>2]=i}i=(s[e+276>>2]|0)+(u<<2)|0;if((i|0)!=0)s[i>>2]=t;s[e+268>>2]=u+1;c=n;return}function $A(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,f=0;r=c;t=s[t>>2]|0;u=s[e+268>>2]|0;if((u|0)<=0){c=r;return}f=s[e+276>>2]|0;a=0;while(1){o=f+(a<<2)|0;n=a+1|0;if((s[o>>2]|0)==(t|0))break;if((n|0)<(u|0))a=n;else{i=7;break}}if((i|0)==7){c=r;return}if((a|0)>=(u|0)){c=r;return}s[o>>2]=s[f+(u+ -1<<2)>>2];s[e+268>>2]=u+ -1;c=r;return}function JA(e){e=e|0;var t=0;t=c;KA(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function KA(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=13056;n=s[e+284>>2]|0;lD[s[s[n>>2]>>2]&511](n);n=s[e+284>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e>>2]=13008;n=s[e+276>>2]|0;if((n|0)==0){r[e+280>>0]=1;s[e+276>>2]=0;s[e+268>>2]=0;n=e+272|0;s[n>>2]=0;c=t;return}if((r[e+280>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+276>>2]=0;r[e+280>>0]=1;s[e+276>>2]=0;s[e+268>>2]=0;n=e+272|0;s[n>>2]=0;c=t;return}function QA(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0;i=c;if((n|0)==0)n=s[e+188>>2]|0;o=s[t>>2]|0;f=s[e+268>>2]|0;e:do if((f|0)>0){h=s[e+276>>2]|0;a=0;while(1){l=a+1|0;if((s[h+(a<<2)>>2]|0)==(o|0))break;if((l|0)<(f|0))a=l;else break e}if((a|0)!=(f|0)){c=i;return}}while(0);if((f|0)==(s[e+272>>2]|0)?(u=(f|0)==0?1:f<<1,(f|0)<(u|0)):0){if((u|0)==0)a=0;else{s[5004]=(s[5004]|0)+1;a=cM((u<<2|3)+16|0)|0;if((a|0)==0)a=0;else{s[(a+19&-16)+ -4>>2]=a;a=a+19&-16}f=s[e+268>>2]|0}if((f|0)>0){h=0;do{l=a+(h<<2)|0;if((l|0)!=0)s[l>>2]=s[(s[e+276>>2]|0)+(h<<2)>>2];h=h+1|0}while((h|0)!=(f|0))}l=s[e+276>>2]|0;if((l|0)!=0){if((r[e+280>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[l+ -4>>2]|0);f=s[e+268>>2]|0}s[e+276>>2]=0}r[e+280>>0]=1;s[e+276>>2]=a;s[e+272>>2]=u}u=(s[e+276>>2]|0)+(f<<2)|0;if((u|0)!=0)s[u>>2]=o;s[e+268>>2]=f+1;h=s[e+284>>2]|0;xD[s[(s[h>>2]|0)+8>>2]&31](h,n,t)|0;c=i;return}function GA(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;u=c;i=s[t>>2]|0;if((r|0)==0)r=s[e+188>>2]|0;f=s[e+268>>2]|0;if((f|0)<=0){c=u;return}l=s[e+276>>2]|0;h=0;while(1){p=l+(h<<2)|0;a=h+1|0;if((s[p>>2]|0)==(i|0))break;if((a|0)<(f|0))h=a;else{o=9;break}}if((o|0)==9){c=u;return}if((h|0)>=(f|0)){c=u;return}s[p>>2]=s[l+(f+ -1<<2)>>2];s[e+268>>2]=f+ -1;p=s[e+284>>2]|0;yD[s[(s[p>>2]|0)+12>>2]&31](p,r,t,n)|0;c=u;return}function YA(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=+o;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0;T=c;c=c+320|0;s[T+176>>2]=s[n+0>>2];s[T+180>>2]=s[n+4>>2];s[T+184>>2]=s[n+8>>2];s[T+188>>2]=s[n+12>>2];s[T+192>>2]=s[n+16>>2];s[T+196>>2]=s[n+20>>2];s[T+200>>2]=s[n+24>>2];s[T+204>>2]=s[n+28>>2];s[T+208>>2]=s[n+32>>2];s[T+212>>2]=s[n+36>>2];s[T+216>>2]=s[n+40>>2];s[T+220>>2]=s[n+44>>2];s[T+224>>2]=s[n+48>>2];s[T+228>>2]=s[n+52>>2];s[T+232>>2]=s[n+56>>2];s[T+236>>2]=s[n+60>>2];s[T+112>>2]=s[r+0>>2];s[T+116>>2]=s[r+4>>2];s[T+120>>2]=s[r+8>>2];s[T+124>>2]=s[r+12>>2];s[T+128>>2]=s[r+16>>2];s[T+132>>2]=s[r+20>>2];s[T+136>>2]=s[r+24>>2];s[T+140>>2]=s[r+28>>2];s[T+144>>2]=s[r+32>>2];s[T+148>>2]=s[r+36>>2];s[T+152>>2]=s[r+40>>2];s[T+156>>2]=s[r+44>>2];s[T+160>>2]=s[r+48>>2];s[T+164>>2]=s[r+52>>2];s[T+168>>2]=s[r+56>>2];s[T+172>>2]=s[r+60>>2];D=+f[T+164>>2]- +f[T+228>>2];F=+f[T+168>>2]- +f[T+232>>2];f[T+64>>2]=+f[T+160>>2]- +f[T+224>>2];f[T+68>>2]=D;f[T+72>>2]=F;f[T+76>>2]=0;zd(T+176|0,T+112|0,T+248|0,T+240|0);F=+f[T+240>>2];D=F*+f[T+252>>2];M=F*+f[T+256>>2];f[T+48>>2]=+f[T+248>>2]*F;f[T+52>>2]=D;f[T+56>>2]=M;f[T+60>>2]=0;f[T+248>>2]=1;A=T+252|0;s[A+0>>2]=0;s[A+4>>2]=0;s[A+8>>2]=0;s[A+12>>2]=0;f[T+268>>2]=1;O=T+272|0;s[O+0>>2]=0;s[O+4>>2]=0;s[O+8>>2]=0;s[O+12>>2]=0;f[T+288>>2]=1;H=T+292|0;s[H+0>>2]=0;s[H+4>>2]=0;s[H+8>>2]=0;s[H+12>>2]=0;s[H+16>>2]=0;Qn(T+176|0,T+32|0);M=+f[T+32>>2];D=+f[T+36>>2];F=+f[T+40>>2];B=+f[T+44>>2];_=M*(2/(M*M+D*D+F*F+B*B));P=D*(2/(M*M+D*D+F*F+B*B));j=F*(2/(M*M+D*D+F*F+B*B));f[T+248>>2]=1-(D*P+F*j);f[A>>2]=M*P-B*j;f[T+256>>2]=M*j+B*P;f[T+260>>2]=0;f[T+264>>2]=M*P+B*j;f[T+268>>2]=1-(M*_+F*j);f[O>>2]=D*j-B*_;f[T+276>>2]=0;f[T+280>>2]=M*j-B*P;f[T+284>>2]=D*j+B*_;f[T+288>>2]=1-(M*_+D*P);f[H>>2]=0;ey(t,T+248|0,T+64|0,T+48|0,T+96|0,T+80|0);if((s[e+268>>2]|0)<=0){c=T;return}k=0;do{L=s[(s[e+276>>2]|0)+(k<<2)>>2]|0;if(DD[s[(s[i>>2]|0)+8>>2]&31](i,s[L+188>>2]|0)|0?(y=s[L+192>>2]|0,JD[s[(s[y>>2]|0)+8>>2]&127](y,L+4|0,T+16|0,T),N=+f[T+16>>2]+ +f[T+96>>2],E=+f[T+20>>2]+ +f[T+100>>2],v=+f[T+24>>2]+ +f[T+104>>2],f[T+16>>2]=N,f[T+20>>2]=E,f[T+24>>2]=v,f[T+28>>2]=0,u=+f[T>>2]+ +f[T+80>>2],w=+f[T+4>>2]+ +f[T+84>>2],d=+f[T+8>>2]+ +f[T+88>>2],f[T>>2]=u,f[T+4>>2]=w,f[T+8>>2]=d,f[T+12>>2]=0,x=+f[n+48>>2]-(u+N)*.5,b=+f[n+52>>2]-(w+E)*.5,p=+f[n+56>>2]-(d+v)*.5,C=+f[r+48>>2]-(u+N)*.5,S=+f[r+52>>2]-(w+E)*.5,m=+f[r+56>>2]-(d+v)*.5,y=x<-((u-N)*.5)|(x>(u-N)*.5?8:0)|(b>(w-E)*.5?16:0)|(b<-((w-E)*.5)?2:0)|(p>(d-v)*.5?32:0)|(p<-((d-v)*.5)?4:0),g=C<-((u-N)*.5)|(C>(u-N)*.5?8:0)|(S>(w-E)*.5?16:0)|(S<-((w-E)*.5)?2:0)|(m>(d-v)*.5?32:0)|(m<-((d-v)*.5)?4:0),(y&g|0)==0):0){_=1;A=1;O=0;D=0;M=1;while(1){if((A&y|0)==0){if((A&g|0)!=0?(h=(-x-M*(u-N)*.5)/(C-x),h<_):0)_=h}else{P=(-x-M*(u-N)*.5)/(C-x);if(D<=P)D=P}H=A<<1;if((H&y|0)==0){if((H&g|0)!=0?(l=(-b-M*(w-E)*.5)/(S-b),l<_):0)_=l}else{P=(-b-M*(w-E)*.5)/(S-b);if(D<=P)D=P}H=A<<2;if((H&y|0)==0){if((H&g|0)!=0?(a=(-p-M*(d-v)*.5)/(m-p),a<_):0)_=a}else{M=(-p-M*(d-v)*.5)/(m-p);if(D<=M)D=M}O=O+1|0;if((O|0)==2)break;else{A=A<<3;M=-1}}if(D<=_){H=s[L+192>>2]|0;s[T+248>>2]=0;s[T+252>>2]=H;s[T+256>>2]=L;s[T+260>>2]=L+4;s[T+264>>2]=-1;s[T+268>>2]=-1;dy(t,T+176|0,T+112|0,T+248|0,i,o)}}k=k+1|0}while((k|0)<(s[e+268>>2]|0));c=T;return}function ZA(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0;a=c;c=c+288|0;w=s[e+4>>2]|0;r[w+312>>0]=0;s[w>>2]=0;r[w+356>>0]=1;f[w+292>>2]=0xde0b6b000000000;f[w+296>>2]=0xde0b6b000000000;f[w+300>>2]=0xde0b6b000000000;f[w+304>>2]=0;s[w+336>>2]=0;s[w+340>>2]=0;s[w+344>>2]=0;s[w+348>>2]=0;r[w+352>>0]=0;r[w+332>>0]=r[w+332>>0]&-16;p=+f[n+48>>2]- +f[t+48>>2]-(+f[o+48>>2]- +f[i+48>>2]);h=+f[n+52>>2]- +f[t+52>>2]-(+f[o+52>>2]- +f[i+52>>2]);l=+f[n+56>>2]- +f[t+56>>2]-(+f[o+56>>2]- +f[i+56>>2]);s[a+216>>2]=10224;f[a+252>>2]=0xde0b6b000000000;r[a+256>>0]=0;w=s[e+8>>2]|0;b=s[e+12>>2]|0;e=s[e+4>>2]|0;s[a+136>>2]=13392;f[a+140>>2]=0;f[a+144>>2]=1;f[a+148>>2]=0;f[a+152>>2]=0;s[a+156>>2]=0;s[a+160>>2]=e;s[a+164>>2]=w;s[a+168>>2]=b;s[a+172>>2]=s[w+4>>2];s[a+176>>2]=s[b+4>>2];f[a+180>>2]=+CD[s[(s[w>>2]|0)+48>>2]&15](w);f[a+184>>2]=+CD[s[(s[b>>2]|0)+48>>2]&15](b);r[a+188>>0]=0;s[a+196>>2]=-1;s[a+208>>2]=1;s[a+212>>2]=1;f[a+128>>2]=0xde0b6b000000000;s[a+0>>2]=s[t+0>>2];s[a+4>>2]=s[t+4>>2];s[a+8>>2]=s[t+8>>2];s[a+12>>2]=s[t+12>>2];s[a+16>>2]=s[t+16>>2];s[a+20>>2]=s[t+20>>2];s[a+24>>2]=s[t+24>>2];s[a+28>>2]=s[t+28>>2];s[a+32>>2]=s[t+32>>2];s[a+36>>2]=s[t+36>>2];s[a+40>>2]=s[t+40>>2];s[a+44>>2]=s[t+44>>2];s[a+48>>2]=s[t+48>>2];s[a+52>>2]=s[t+52>>2];s[a+56>>2]=s[t+56>>2];s[a+60>>2]=s[t+60>>2];s[a+64>>2]=s[i+0>>2];s[a+68>>2]=s[i+4>>2];s[a+72>>2]=s[i+8>>2];s[a+76>>2]=s[i+12>>2];s[a+80>>2]=s[i+16>>2];s[a+84>>2]=s[i+20>>2];s[a+88>>2]=s[i+24>>2];s[a+92>>2]=s[i+28>>2];s[a+96>>2]=s[i+32>>2];s[a+100>>2]=s[i+36>>2];s[a+104>>2]=s[i+40>>2];s[a+108>>2]=s[i+44>>2];s[a+112>>2]=s[i+48>>2];s[a+116>>2]=s[i+52>>2];s[a+120>>2]=s[i+56>>2];s[a+124>>2]=s[i+60>>2];rO(a+136|0,a,a+216|0,0,0);b=(r[a+256>>0]|0)==0;e=a+236|0;s[a+264>>2]=s[e+0>>2];s[a+268>>2]=s[e+4>>2];s[a+272>>2]=s[e+8>>2];s[a+276>>2]=s[e+12>>2];if(b){w=0;c=a;return w|0}m=+f[a+252>>2];d=+f[a+220>>2];v=+f[a+224>>2];g=+f[a+228>>2];y=+f[a+232>>2];do if(m>.0010000000474974513){y=m;m=0;b=1;while(1){if((b|0)>32){u=0;n=13;break}E=m;m=m-y/(l*g+(h*v+p*d));if(!(!(m<0)&!(m>1)&!(m<=E))){u=0;n=13;break}fD[s[s[u>>2]>>2]&31](u,m);E=1-m;f[a+48>>2]=E*+f[t+48>>2]+m*+f[n+48>>2];f[a+52>>2]=E*+f[t+52>>2]+m*+f[n+52>>2];f[a+56>>2]=E*+f[t+56>>2]+m*+f[n+56>>2];f[a+112>>2]=E*+f[i+48>>2]+m*+f[o+48>>2];f[a+116>>2]=E*+f[i+52>>2]+m*+f[o+52>>2];f[a+120>>2]=E*+f[i+56>>2]+m*+f[o+56>>2];rO(a+136|0,a,a+216|0,0,0);if((r[a+256>>0]|0)==0){u=0;n=13;break}y=+f[a+252>>2];if(y<0){n=8;break}s[a+264>>2]=s[e+0>>2];s[a+268>>2]=s[e+4>>2];s[a+272>>2]=s[e+8>>2];s[a+276>>2]=s[e+12>>2];d=+f[a+220>>2];v=+f[a+224>>2];g=+f[a+228>>2];if(!(y>.0010000000474974513)){n=10;break}else b=b+1|0}if((n|0)==8){f[u+164>>2]=m;g=+f[a+224>>2];y=+f[a+228>>2];E=+f[a+232>>2];f[u+132>>2]=+f[a+220>>2];f[u+136>>2]=g;f[u+140>>2]=y;f[u+144>>2]=E;s[u+148>>2]=s[e+0>>2];s[u+152>>2]=s[e+4>>2];s[u+156>>2]=s[e+8>>2];s[u+160>>2]=s[e+12>>2];w=1;c=a;return w|0}else if((n|0)==10){y=+f[a+232>>2];break}else if((n|0)==13){c=a;return u|0}}else m=0;while(0);if(l*g+(h*v+p*d)>=-+f[u+172>>2]){w=0;c=a;return w|0}f[u+164>>2]=m;f[u+132>>2]=d;f[u+136>>2]=v;f[u+140>>2]=g;f[u+144>>2]=y;s[u+148>>2]=s[a+264>>2];s[u+152>>2]=s[a+268>>2];s[u+156>>2]=s[a+272>>2];s[u+160>>2]=s[a+276>>2];w=1;c=a;return w|0}function eO(e){e=e|0;return}function tO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function nO(e,t,n,i,u,a,l,h,p,d){e=e|0;t=t|0;n=n|0;i=i|0;u=u|0;a=a|0;l=l|0;h=h|0;p=p|0;d=d|0;var v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0,z=0,W=0,V=0,$=0,J=0,K=0,Q=0;e=c;c=c+10240|0;V=+f[a+52>>2]- +f[u+52>>2];D=+f[a+56>>2]- +f[u+56>>2];f[e>>2]=+f[a+48>>2]- +f[u+48>>2];f[e+4>>2]=V;f[e+8>>2]=D;f[e+12>>2]=0;s[e+10088>>2]=n;s[e+10092>>2]=i;D=+f[a>>2];V=+f[u>>2];_=+f[a+16>>2];T=+f[u+16>>2];k=+f[a+32>>2];$=+f[u+32>>2];j=+f[u+4>>2];J=+f[u+20>>2];F=+f[u+36>>2];E=+f[u+8>>2];B=+f[u+24>>2];P=+f[u+40>>2];W=+f[a+4>>2];z=+f[a+20>>2];U=+f[a+36>>2];R=+f[a+8>>2];q=+f[a+24>>2];I=+f[a+40>>2];f[e+10096>>2]=D*V+_*T+k*$;f[e+10100>>2]=D*j+_*J+k*F;f[e+10104>>2]=D*E+_*B+k*P;f[e+10108>>2]=0;f[e+10112>>2]=V*W+T*z+$*U;f[e+10116>>2]=j*W+J*z+F*U;f[e+10120>>2]=E*W+B*z+P*U;f[e+10124>>2]=0;f[e+10128>>2]=V*R+T*q+$*I;f[e+10132>>2]=j*R+J*q+F*I;f[e+10136>>2]=E*R+B*q+P*I;f[e+10140>>2]=0;P=+f[a+48>>2]- +f[u+48>>2];B=+f[a+52>>2]- +f[u+52>>2];E=+f[a+56>>2]- +f[u+56>>2];F=+f[u>>2];J=+f[a>>2];j=+f[u+16>>2];$=+f[a+16>>2];T=+f[u+32>>2];V=+f[a+32>>2];k=+f[u+4>>2];_=+f[u+20>>2];D=+f[u+36>>2];H=+f[u+8>>2];S=+f[u+24>>2];w=+f[u+40>>2];f[e+10144>>2]=F*J+j*$+T*V;f[e+10148>>2]=F*W+j*z+T*U;f[e+10152>>2]=F*R+j*q+T*I;f[e+10156>>2]=0;f[e+10160>>2]=J*k+$*_+V*D;f[e+10164>>2]=W*k+z*_+U*D;f[e+10168>>2]=R*k+q*_+I*D;f[e+10172>>2]=0;f[e+10176>>2]=J*H+$*S+V*w;f[e+10180>>2]=W*H+z*S+U*w;f[e+10184>>2]=R*H+q*S+I*w;f[e+10188>>2]=0;f[e+10192>>2]=P*F+B*j+E*T;f[e+10196>>2]=P*k+B*_+E*D;f[e+10200>>2]=P*H+B*S+E*w;f[e+10204>>2]=0;s[e+10208>>2]=70;s[e+10212>>2]=0;s[e+10072>>2]=0;s[e+9836>>2]=0;s[e+9840>>2]=0;s[e+9844>>2]=0;s[e+9848>>2]=0;s[e+10084>>2]=2;s[e+10076>>2]=0;f[e+9852>>2]=0;w=+f[e>>2];E=+f[e+4>>2];S=+f[e+8>>2];f[e+9328>>2]=-w;f[e+9332>>2]=-E;f[e+9336>>2]=-S;f[e+9340>>2]=0;do if((UN(e+9708|0,e+10088|0,e+9328|0)|0)==1){t=e+9296|0;g=e+9304|0;m=e+9308|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;s[e+16>>2]=9;d=e+56|0;s[e+9292>>2]=0;s[d+0>>2]=0;s[d+4>>2]=0;s[d+8>>2]=0;s[d+12>>2]=0;s[d+16>>2]=0;y=0;do{b=128-y+ -1|0;s[e+16+(b*56|0)+2152>>2]=0;x=s[g>>2]|0;s[e+16+(b*56|0)+2156>>2]=x;if((x|0)!=0)s[x+44>>2]=e+16+(b*56|0)+2108;s[g>>2]=e+16+(b*56|0)+2108;s[m>>2]=(s[m>>2]|0)+1;y=y+1|0}while((y|0)!=128);y=s[e+10080>>2]|0;if((s[y+32>>2]|0)>>>0>1?zN(e+9708|0)|0:0){b=s[t>>2]|0;if((b|0)!=0){N=s[e+9300>>2]|0;x=s[m>>2]|0;do{L=b+48|0;A=s[L>>2]|0;C=b+44|0;if((A|0)!=0)s[A+44>>2]=s[C>>2];A=s[C>>2]|0;if((A|0)!=0)s[A+48>>2]=s[L>>2];if((s[t>>2]|0)==(b|0))s[t>>2]=s[L>>2];N=N+ -1|0;s[C>>2]=0;s[L>>2]=s[g>>2];C=s[g>>2]|0;if((C|0)!=0)s[C+44>>2]=b;s[g>>2]=b;x=x+1|0;b=s[t>>2]|0}while((b|0)!=0);s[e+9300>>2]=N;s[m>>2]=x}s[e+16>>2]=0;s[e+9292>>2]=0;N=s[y>>2]|0;C=s[y+12>>2]|0;J=+f[C+16>>2];I=+f[N+16>>2]-J;R=+f[C+20>>2];U=+f[N+20>>2]-R;W=+f[C+24>>2];V=+f[N+24>>2]-W;C=s[y+4>>2]|0;z=+f[C+16>>2]-J;$=+f[C+20>>2]-R;q=+f[C+24>>2]-W;x=s[y+8>>2]|0;J=+f[x+16>>2]-J;R=+f[x+20>>2]-R;W=+f[x+24>>2]-W;if(I*$*W+(U*q*J+V*z*R-I*q*R-U*z*W)-V*$*J<0){s[y>>2]=C;s[y+4>>2]=N;J=+f[y+16>>2];f[y+16>>2]=+f[y+20>>2];f[y+20>>2]=J;b=C}else{b=N;N=C}b=WN(e+16|0,b,N,x,1)|0;x=WN(e+16|0,s[y+4>>2]|0,s[y>>2]|0,s[y+12>>2]|0,1)|0;N=WN(e+16|0,s[y+8>>2]|0,s[y+4>>2]|0,s[y+12>>2]|0,1)|0;C=WN(e+16|0,s[y>>2]|0,s[y+8>>2]|0,s[y+12>>2]|0,1)|0;if((s[e+9300>>2]|0)==4){L=s[t>>2]|0;k=+f[L+16>>2];y=s[L+48>>2]|0;if((y|0)!=0){w=k*k;while(1){E=+f[y+16>>2];A=E*E<w;L=A?y:L;y=s[y+48>>2]|0;if((y|0)==0)break;else w=A?E*E:w}k=+f[L+16>>2]}T=+f[L>>2];S=+f[L+4>>2];w=+f[L+8>>2];E=+f[L+12>>2];O=s[L+20>>2]|0;M=s[L+24>>2]|0;y=s[L+28>>2]|0;r[b+52>>0]=0;s[b+32>>2]=x;r[x+52>>0]=0;s[x+32>>2]=b;r[b+53>>0]=0;s[b+36>>2]=N;r[N+52>>0]=1;s[N+32>>2]=b;r[b+54>>0]=0;s[b+40>>2]=C;r[C+52>>0]=2;s[C+32>>2]=b;r[x+53>>0]=2;s[x+36>>2]=C;r[C+54>>0]=1;s[C+40>>2]=x;r[x+54>>0]=1;s[x+40>>2]=N;r[N+53>>0]=2;s[N+36>>2]=x;r[N+54>>0]=1;s[N+40>>2]=C;r[C+53>>0]=2;s[C+36>>2]=N;s[e+16>>2]=0;C=O;N=M;x=y;b=0;y=1;while(1){A=s[e+9292>>2]|0;if(!(A>>>0<64)){v=48;break}s[e+10216>>2]=0;s[e+10220>>2]=0;s[e+10224>>2]=0;s[e+9292>>2]=A+1;r[L+55>>0]=y;O=L+4|0;M=L+8|0;XN(e+9708|0,+f[L>>2],+f[O>>2],+f[M>>2],e+16+(A<<5)+60|0);if(+f[L>>2]*+f[e+16+(A<<5)+76>>2]+ +f[O>>2]*+f[e+16+(A<<5)+80>>2]+ +f[M>>2]*+f[e+16+(A<<5)+84>>2]- +f[L+16>>2]>9999999747378752e-20){O=0;M=1}else{v=47;break}do{M=M&(VN(e+16|0,y,e+16+(A<<5)+60|0,s[L+(O<<2)+32>>2]|0,o[L+O+52>>0]|0,e+10216|0)|0);O=O+1|0}while(!(O>>>0>2|M^1));if(!M){v=46;break}if(!((s[e+10224>>2]|0)>>>0>2)){v=46;break}C=s[e+10216>>2]|0;N=s[e+10220>>2]|0;r[C+53>>0]=2;s[C+36>>2]=N;r[N+54>>0]=1;s[N+40>>2]=C;N=L+48|0;C=s[N>>2]|0;x=L+44|0;if((C|0)!=0)s[C+44>>2]=s[x>>2];C=s[x>>2]|0;if((C|0)!=0)s[C+48>>2]=s[N>>2];if((s[t>>2]|0)==(L|0))s[t>>2]=s[N>>2];s[e+9300>>2]=(s[e+9300>>2]|0)+ -1;s[x>>2]=0;s[N>>2]=s[g>>2];x=s[g>>2]|0;if((x|0)!=0)s[x+44>>2]=L;s[g>>2]=L;s[m>>2]=(s[m>>2]|0)+1;L=s[t>>2]|0;k=+f[L+16>>2];x=s[L+48>>2]|0;if((x|0)!=0){w=k*k;while(1){E=+f[x+16>>2];N=E*E<w;L=N?x:L;x=s[x+48>>2]|0;if((x|0)==0)break;else w=N?E*E:w}k=+f[L+16>>2]}T=+f[L>>2];S=+f[L+4>>2];w=+f[L+8>>2];E=+f[L+12>>2];C=s[L+20>>2]|0;N=s[L+24>>2]|0;x=s[L+28>>2]|0;b=b+1|0;if(!(b>>>0<255))break;else y=y+1|0}if((v|0)==46)s[e+16>>2]=4;else if((v|0)==47)s[e+16>>2]=7;else if((v|0)==48)s[e+16>>2]=6;z=k*T;R=k*S;V=k*w;f[d>>2]=T;f[e+60>>2]=S;f[e+64>>2]=w;f[e+68>>2]=E;f[e+72>>2]=k;s[e+52>>2]=3;s[e+20>>2]=C;s[e+24>>2]=N;s[e+28>>2]=x;A=N+16|0;W=+f[A>>2]-z;O=N+20|0;I=+f[O>>2]-R;M=N+24|0;U=+f[M>>2]-V;L=x+16|0;F=+f[L>>2]-z;N=x+20|0;q=+f[N>>2]-R;x=x+24|0;$=+f[x>>2]-V;$=+X(+((W*q-I*F)*(W*q-I*F)+((I*$-U*q)*(I*$-U*q)+(U*F-W*$)*(U*F-W*$))));f[e+36>>2]=$;W=+f[L>>2]-z;F=+f[N>>2]-R;U=+f[x>>2]-V;x=C+16|0;q=+f[x>>2]-z;N=C+20|0;I=+f[N>>2]-R;L=C+24|0;J=+f[L>>2]-V;J=+X(+((W*I-F*q)*(W*I-F*q)+((F*J-U*I)*(F*J-U*I)+(U*q-W*J)*(U*q-W*J))));f[e+40>>2]=J;W=+f[x>>2]-z;q=+f[N>>2]-R;U=+f[L>>2]-V;z=+f[A>>2]-z;R=+f[O>>2]-R;V=+f[M>>2]-V;V=+X(+((W*R-q*z)*(W*R-q*z)+((q*V-U*R)*(q*V-U*R)+(U*z-W*V)*(U*z-W*V))));f[e+36>>2]=$/(V+($+J));f[e+40>>2]=J/(V+($+J));f[e+44>>2]=V/(V+($+J));if((s[e+16>>2]|0)==9){d=0;w=0;E=0;S=0;k=0;D=0;P=0;H=0;_=0;T=0;break}if((s[e+52>>2]|0)==0){T=0;k=0;S=0}else{t=e+52|0;v=54}}else v=49}else v=49;if((v|0)==49){s[e+16>>2]=8;f[d>>2]=w;f[e+60>>2]=E;f[e+64>>2]=S;f[e+68>>2]=0;T=+X(+(w*w+E*E+S*S));if(T>0){S=1/T*S;E=1/T*E;w=1/T*w}else{S=0;E=0;w=1}f[d>>2]=w;f[e+60>>2]=E;f[e+64>>2]=S;f[e+68>>2]=0;f[e+72>>2]=0;s[e+52>>2]=1;s[e+20>>2]=s[y>>2];f[e+36>>2]=1;t=e+52|0;v=54}if((v|0)==54){S=0;w=0;E=0;v=0;do{g=s[e+10208>>2]|0;M=s[e+10212>>2]|0;m=(s[e+10088>>2]|0)+(M>>1)|0;if((M&1|0)!=0)g=s[(s[m>>2]|0)+g>>2]|0;WD[g&127](e+9312|0,m,s[e+16+(v<<2)+4>>2]|0);J=+f[e+16+(v<<2)+20>>2];S=S+ +f[e+9312>>2]*J;w=w+J*+f[e+9316>>2];E=E+J*+f[e+9320>>2];v=v+1|0}while(v>>>0<(s[t>>2]|0)>>>0);T=E;k=w}Q=+f[u>>2];K=+f[u+4>>2];B=+f[u+8>>2];F=+f[u+16>>2];I=+f[u+20>>2];q=+f[u+24>>2];U=+f[u+32>>2];W=+f[u+36>>2];$=+f[u+40>>2];j=+f[u+48>>2];D=+f[u+52>>2];P=+f[u+56>>2];H=+f[d>>2];V=+f[e+72>>2];_=+f[e+60>>2];J=+f[e+64>>2];R=S-H*V;z=k-V*_;V=T-V*J;d=1;w=S*Q+k*K+T*B+j;E=S*F+k*I+T*q+D;S=S*U+k*W+T*$+P;k=R*Q+z*K+V*B+j;D=R*F+z*I+V*q+D;P=R*U+z*W+V*$+P;H=-H;_=-_;T=-J}else{d=0;w=0;E=0;S=0;k=0;D=0;P=0;H=0;_=0;T=0}while(0);if(d){f[h>>2]=w;f[h+4>>2]=E;f[h+8>>2]=S;f[h+12>>2]=0;f[p>>2]=k;f[p+4>>2]=D;f[p+8>>2]=P;f[p+12>>2]=0;f[l>>2]=H;f[l+4>>2]=_;f[l+8>>2]=T;f[l+12>>2]=0;M=1;c=e;return M|0}s[e+9708>>2]=n;s[e+9712>>2]=i;S=+f[a>>2];F=+f[u>>2];T=+f[a+16>>2];I=+f[u+16>>2];k=+f[a+32>>2];q=+f[u+32>>2];R=+f[u+4>>2];U=+f[u+20>>2];z=+f[u+36>>2];V=+f[u+8>>2];J=+f[u+24>>2];Q=+f[u+40>>2];_=+f[a+4>>2];D=+f[a+20>>2];P=+f[a+36>>2];H=+f[a+8>>2];B=+f[a+24>>2];j=+f[a+40>>2];f[e+9716>>2]=S*F+T*I+k*q;f[e+9720>>2]=S*R+T*U+k*z;f[e+9724>>2]=S*V+T*J+k*Q;f[e+9728>>2]=0;f[e+9732>>2]=F*_+I*D+q*P;f[e+9736>>2]=R*_+U*D+z*P;f[e+9740>>2]=V*_+J*D+Q*P;f[e+9744>>2]=0;f[e+9748>>2]=F*H+I*B+q*j;f[e+9752>>2]=R*H+U*B+z*j;f[e+9756>>2]=V*H+J*B+Q*j;f[e+9760>>2]=0;W=+f[a+48>>2]- +f[u+48>>2];$=+f[a+52>>2]- +f[u+52>>2];K=+f[a+56>>2]- +f[u+56>>2];f[e+9764>>2]=S*F+T*I+k*q;f[e+9768>>2]=F*_+I*D+q*P;f[e+9772>>2]=F*H+I*B+q*j;f[e+9776>>2]=0;f[e+9780>>2]=S*R+T*U+k*z;f[e+9784>>2]=R*_+U*D+z*P;f[e+9788>>2]=R*H+U*B+z*j;f[e+9792>>2]=0;f[e+9796>>2]=S*V+T*J+k*Q;f[e+9800>>2]=V*_+J*D+Q*P;f[e+9804>>2]=V*H+J*B+Q*j;f[e+9808>>2]=0;f[e+9812>>2]=W*F+$*I+K*q;f[e+9816>>2]=W*R+$*U+K*z;f[e+9820>>2]=W*V+$*J+K*Q;f[e+9824>>2]=0;s[e+9828>>2]=71;s[e+9832>>2]=0;s[e+9692>>2]=0;s[e+9456>>2]=0;s[e+9460>>2]=0;s[e+9464>>2]=0;s[e+9468>>2]=0;s[e+9704>>2]=2;s[e+9696>>2]=0;f[e+9472>>2]=0;if((UN(e+9328|0,e+9708|0,e)|0)!=0){M=0;c=e;return M|0}a=s[e+9700>>2]|0;if((s[a+32>>2]|0)==0){D=0;_=0;k=0;w=0;E=0;T=0}else{k=0;_=0;D=0;T=0;E=0;w=0;n=0;do{S=+f[a+(n<<2)+16>>2];d=s[e+9828>>2]|0;M=s[e+9832>>2]|0;i=(s[e+9708>>2]|0)+(M>>1)|0;if((M&1|0)!=0)d=s[(s[i>>2]|0)+d>>2]|0;WD[d&127](e+9312|0,i,s[a+(n<<2)>>2]|0);k=k+S*+f[e+9312>>2];_=_+S*+f[e+9316>>2];D=D+S*+f[e+9320>>2];i=s[(s[e+9700>>2]|0)+(n<<2)>>2]|0;P=-+f[i>>2];H=-+f[i+4>>2];B=-+f[i+8>>2];i=s[e+9828>>2]|0;M=s[e+9832>>2]|0;a=(s[e+9712>>2]|0)+(M>>1)|0;if((M&1|0)!=0)i=s[(s[a>>2]|0)+i>>2]|0;K=+f[e+9732>>2]*P+ +f[e+9736>>2]*H+ +f[e+9740>>2]*B;J=+f[e+9748>>2]*P+ +f[e+9752>>2]*H+ +f[e+9756>>2]*B;f[e+10088>>2]=+f[e+9716>>2]*P+ +f[e+9720>>2]*H+ +f[e+9724>>2]*B;f[e+10092>>2]=K;f[e+10096>>2]=J;f[e+10100>>2]=0;WD[i&127](e+10216|0,a,e+10088|0);J=+f[e+10216>>2];K=+f[e+10220>>2];Q=+f[e+10224>>2];T=T+S*(J*+f[e+9764>>2]+K*+f[e+9768>>2]+Q*+f[e+9772>>2]+ +f[e+9812>>2]);E=E+S*(J*+f[e+9780>>2]+K*+f[e+9784>>2]+Q*+f[e+9788>>2]+ +f[e+9816>>2]);w=w+S*(J*+f[e+9796>>2]+K*+f[e+9800>>2]+Q*+f[e+9804>>2]+ +f[e+9820>>2]);n=n+1|0;a=s[e+9700>>2]|0}while(n>>>0<(s[a+32>>2]|0)>>>0)}P=+f[u>>2];H=+f[u+4>>2];B=+f[u+8>>2];F=+f[u+16>>2];I=+f[u+20>>2];q=+f[u+24>>2];U=+f[u+32>>2];z=+f[u+36>>2];W=+f[u+40>>2];j=+f[u+48>>2];R=+f[u+52>>2];V=+f[u+56>>2];$=k-T;J=_-E;Q=D-w;K=+X(+($*$+J*J+Q*Q));K=1/(K>9999999747378752e-20?K:1);f[h>>2]=k*P+_*H+D*B+j;f[h+4>>2]=k*F+_*I+D*q+R;f[h+8>>2]=k*U+_*z+D*W+V;f[h+12>>2]=0;f[p>>2]=T*P+E*H+w*B+j;f[p+4>>2]=T*F+E*I+w*q+R;f[p+8>>2]=T*U+E*z+w*W+V;f[p+12>>2]=0;f[l>>2]=K*$;f[l+4>>2]=K*J;f[l+8>>2]=K*Q;f[l+12>>2]=0;M=0;c=e;return M|0}function rO(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=0,U=0;o=c;c=c+288|0;f[e+56>>2]=0;v=o+276|0;m=o+280|0;s[o+272>>2]=0;s[o+276>>2]=0;s[o+280>>2]=0;s[o+284>>2]=0;s[o+208>>2]=s[t+0>>2];s[o+212>>2]=s[t+4>>2];s[o+216>>2]=s[t+8>>2];s[o+220>>2]=s[t+12>>2];s[o+224>>2]=s[t+16>>2];s[o+228>>2]=s[t+20>>2];s[o+232>>2]=s[t+24>>2];s[o+236>>2]=s[t+28>>2];s[o+240>>2]=s[t+32>>2];s[o+244>>2]=s[t+36>>2];s[o+248>>2]=s[t+40>>2];s[o+252>>2]=s[t+44>>2];I=o+256|0;s[I+0>>2]=s[t+48>>2];s[I+4>>2]=s[t+52>>2];s[I+8>>2]=s[t+56>>2];s[I+12>>2]=s[t+60>>2];s[o+144>>2]=s[t+64>>2];s[o+148>>2]=s[t+68>>2];s[o+152>>2]=s[t+72>>2];s[o+156>>2]=s[t+76>>2];s[o+160>>2]=s[t+80>>2];s[o+164>>2]=s[t+84>>2];s[o+168>>2]=s[t+88>>2];s[o+172>>2]=s[t+92>>2];s[o+176>>2]=s[t+96>>2];s[o+180>>2]=s[t+100>>2];s[o+184>>2]=s[t+104>>2];s[o+188>>2]=s[t+108>>2];q=o+192|0;s[q+0>>2]=s[t+112>>2];s[q+4>>2]=s[t+116>>2];s[q+8>>2]=s[t+120>>2];s[q+12>>2]=s[t+124>>2];g=+f[I>>2];y=+f[q>>2];b=+f[o+260>>2];w=+f[o+196>>2];p=+f[o+264>>2];d=+f[o+200>>2];f[I>>2]=g-(g+y)*.5;f[o+260>>2]=b-(b+w)*.5;f[o+264>>2]=p-(p+d)*.5;f[q>>2]=y-(g+y)*.5;f[o+196>>2]=w-(b+w)*.5;f[o+200>>2]=d-(p+d)*.5;if(((s[(s[e+28>>2]|0)+4>>2]|0)+ -17|0)>>>0<2)T=((s[(s[e+32>>2]|0)+4>>2]|0)+ -17|0)>>>0<2;else T=0;S=+f[e+44>>2];E=+f[e+48>>2];s[3344]=(s[3344]|0)+1;q=(r[e+52>>0]|0)==0;E=q?E:0;s[e+64>>2]=0;f[e+4>>2]=0;f[e+8>>2]=1;f[e+12>>2]=0;f[e+16>>2]=0;s[e+68>>2]=0;s[e+60>>2]=-1;S=(q?S:0)+E;q=s[e+24>>2]|0;r[q+312>>0]=0;s[q>>2]=0;r[q+356>>0]=1;f[q+292>>2]=0xde0b6b000000000;f[q+296>>2]=0xde0b6b000000000;f[q+300>>2]=0xde0b6b000000000;f[q+304>>2]=0;s[q+336>>2]=0;s[q+340>>2]=0;s[q+344>>2]=0;s[q+348>>2]=0;r[q+352>>0]=0;r[q+332>>0]=r[q+332>>0]&-16;C=+f[e+4>>2];k=+f[e+8>>2];M=+f[e+12>>2];e:do if(T){N=0xde0b6b000000000;while(1){B=-C;j=-k;L=-M;F=+f[t+4>>2]*B+ +f[t+20>>2]*j+ +f[t+36>>2]*L;O=+f[t+8>>2]*B+ +f[t+24>>2]*j+ +f[t+40>>2]*L;f[o+128>>2]=+f[t>>2]*B+ +f[t+16>>2]*j+ +f[t+32>>2]*L;f[o+132>>2]=F;f[o+136>>2]=O;f[o+140>>2]=0;O=C*+f[t+68>>2]+k*+f[t+84>>2]+M*+f[t+100>>2];F=C*+f[t+72>>2]+k*+f[t+88>>2]+M*+f[t+104>>2];f[o+112>>2]=+f[t+64>>2]*C+ +f[t+80>>2]*k+ +f[t+96>>2]*M;f[o+116>>2]=O;f[o+120>>2]=F;f[o+124>>2]=0;Ok(o+96|0,s[e+28>>2]|0,o+128|0);Ok(o+80|0,s[e+32>>2]|0,o+112|0);M=+f[o+96>>2];F=+f[o+100>>2];k=+f[o+104>>2];O=M*+f[o+208>>2]+F*+f[o+212>>2]+k*+f[o+216>>2]+ +f[o+256>>2];k=M*+f[o+224>>2]+F*+f[o+228>>2]+k*+f[o+232>>2]+ +f[o+260>>2];F=+f[o+80>>2];M=+f[o+84>>2];L=+f[o+88>>2];C=F*+f[o+144>>2]+M*+f[o+148>>2]+L*+f[o+152>>2]+ +f[o+192>>2];L=F*+f[o+160>>2]+M*+f[o+164>>2]+L*+f[o+168>>2]+ +f[o+196>>2];M=+f[e+4>>2]*(O-C)+ +f[e+8>>2]*(k-L)+ +f[e+12>>2]*0;if(M>0?M*M>N*+f[t+128>>2]:0){u=22;break e}T=s[e+24>>2]|0;A=s[T>>2]|0;if((A|0)>0){_=+f[T+308>>2];q=0;I=0;do{B=O-C- +f[T+(I<<4)+4>>2];j=k-L- +f[T+(I<<4)+8>>2];F=0- +f[T+(I<<4)+12>>2];q=q|B*B+j*j+F*F<=_;I=I+1|0}while((I|0)!=(A|0))}else q=0;if((+f[T+304>>2]==0?+f[T+300>>2]==0:0)?k-L==+f[T+296>>2]:0)I=O-C==+f[T+292>>2];else I=0;if(I|q){u=31;break e}D=N-M;if(D<=N*9.999999974752427e-7){u=33;break e}f[T+292>>2]=O-C;f[T+296>>2]=k-L;f[T+300>>2]=0;f[T+304>>2]=0;r[T+356>>0]=1;f[T+(A<<4)+4>>2]=O-C;f[T+(A<<4)+8>>2]=k-L;f[T+(A<<4)+12>>2]=0;f[T+(A<<4)+16>>2]=0;I=s[T>>2]|0;f[T+(I<<4)+84>>2]=O;f[T+(I<<4)+88>>2]=k;f[T+(I<<4)+92>>2]=0;f[T+(I<<4)+96>>2]=0;I=s[T>>2]|0;f[T+(I<<4)+164>>2]=C;f[T+(I<<4)+168>>2]=L;f[T+(I<<4)+172>>2]=0;f[T+(I<<4)+176>>2]=0;s[T>>2]=(s[T>>2]|0)+1;I=s[e+24>>2]|0;q=xT(I)|0;C=+f[I+276>>2];k=+f[I+280>>2];M=+f[I+284>>2];O=+f[I+288>>2];if(!q){u=35;break e}L=N;N=C*C+k*k+M*M;if(N<9.999999974752427e-7){N=L;u=37;break e}if(L-N<=L*1.1920928955078125e-7){u=39;break e}f[e+4>>2]=C;f[e+8>>2]=k;f[e+12>>2]=M;f[e+16>>2]=O;q=s[e+64>>2]|0;s[e+64>>2]=q+1;if((q|0)>1e3){N=0;T=0;C=0;k=0;L=0;break e}if((s[s[e+24>>2]>>2]|0)==4){u=42;break}}}else{N=0xde0b6b000000000;while(1){_=-C;O=-k;L=-M;D=+f[t+4>>2]*_+ +f[t+20>>2]*O+ +f[t+36>>2]*L;F=+f[t+8>>2]*_+ +f[t+24>>2]*O+ +f[t+40>>2]*L;f[o+128>>2]=+f[t>>2]*_+ +f[t+16>>2]*O+ +f[t+32>>2]*L;f[o+132>>2]=D;f[o+136>>2]=F;f[o+140>>2]=0;F=C*+f[t+68>>2]+k*+f[t+84>>2]+M*+f[t+100>>2];D=C*+f[t+72>>2]+k*+f[t+88>>2]+M*+f[t+104>>2];f[o+112>>2]=+f[t+64>>2]*C+ +f[t+80>>2]*k+ +f[t+96>>2]*M;f[o+116>>2]=F;f[o+120>>2]=D;f[o+124>>2]=0;Ok(o+96|0,s[e+28>>2]|0,o+128|0);Ok(o+80|0,s[e+32>>2]|0,o+112|0);D=+f[o+96>>2];F=+f[o+100>>2];M=+f[o+104>>2];k=D*+f[o+208>>2]+F*+f[o+212>>2]+M*+f[o+216>>2]+ +f[o+256>>2];L=D*+f[o+224>>2]+F*+f[o+228>>2]+M*+f[o+232>>2]+ +f[o+260>>2];M=D*+f[o+240>>2]+F*+f[o+244>>2]+M*+f[o+248>>2]+ +f[o+264>>2];F=+f[o+80>>2];D=+f[o+84>>2];O=+f[o+88>>2];C=F*+f[o+144>>2]+D*+f[o+148>>2]+O*+f[o+152>>2]+ +f[o+192>>2];_=F*+f[o+160>>2]+D*+f[o+164>>2]+O*+f[o+168>>2]+ +f[o+196>>2];O=F*+f[o+176>>2]+D*+f[o+180>>2]+O*+f[o+184>>2]+ +f[o+200>>2];D=+f[e+4>>2]*(k-C)+ +f[e+8>>2]*(L-_)+ +f[e+12>>2]*(M-O);if(D>0?D*D>N*+f[t+128>>2]:0){u=22;break e}A=s[e+24>>2]|0;T=s[A>>2]|0;if((T|0)>0){P=+f[A+308>>2];q=0;I=0;do{B=k-C- +f[A+(I<<4)+4>>2];j=L-_- +f[A+(I<<4)+8>>2];F=M-O- +f[A+(I<<4)+12>>2];q=q|B*B+j*j+F*F<=P;I=I+1|0}while((I|0)!=(T|0))}else q=0;if((+f[A+304>>2]==0?M-O==+f[A+300>>2]:0)?L-_==+f[A+296>>2]:0)I=k-C==+f[A+292>>2];else I=0;if(I|q){u=31;break e}D=N-D;if(D<=N*9.999999974752427e-7){u=33;break e}f[A+292>>2]=k-C;f[A+296>>2]=L-_;f[A+300>>2]=M-O;f[A+304>>2]=0;r[A+356>>0]=1;f[A+(T<<4)+4>>2]=k-C;f[A+(T<<4)+8>>2]=L-_;f[A+(T<<4)+12>>2]=M-O;f[A+(T<<4)+16>>2]=0;I=s[A>>2]|0;f[A+(I<<4)+84>>2]=k;f[A+(I<<4)+88>>2]=L;f[A+(I<<4)+92>>2]=M;f[A+(I<<4)+96>>2]=0;I=s[A>>2]|0;f[A+(I<<4)+164>>2]=C;f[A+(I<<4)+168>>2]=_;f[A+(I<<4)+172>>2]=O;f[A+(I<<4)+176>>2]=0;s[A>>2]=(s[A>>2]|0)+1;I=s[e+24>>2]|0;q=xT(I)|0;C=+f[I+276>>2];k=+f[I+280>>2];M=+f[I+284>>2];O=+f[I+288>>2];if(!q){u=35;break e}L=N;N=C*C+k*k+M*M;if(N<9.999999974752427e-7){N=L;u=37;break e}if(L-N<=L*1.1920928955078125e-7){u=39;break e}f[e+4>>2]=C;f[e+8>>2]=k;f[e+12>>2]=M;f[e+16>>2]=O;q=s[e+64>>2]|0;s[e+64>>2]=q+1;if((q|0)>1e3){N=0;T=0;C=0;k=0;L=0;break e}if((s[s[e+24>>2]>>2]|0)==4){u=42;break}}}while(0);if((u|0)==22){s[e+68>>2]=10;u=43}else if((u|0)==31){s[e+68>>2]=1;u=43}else if((u|0)==33){s[e+68>>2]=!(D<=0)?11:2;u=43}else if((u|0)==35){s[e+68>>2]=3;u=43}else if((u|0)==37){f[e+4>>2]=C;f[e+8>>2]=k;f[e+12>>2]=M;f[e+16>>2]=O;s[e+68>>2]=6;u=43}else if((u|0)==39){s[e+68>>2]=12;u=43}else if((u|0)==42){s[e+68>>2]=13;N=0;T=0;C=0;k=0;L=0}do if((u|0)==43){q=s[e+24>>2]|0;xT(q)|0;C=+f[q+260>>2];k=+f[q+264>>2];L=+f[q+268>>2];s[o+272>>2]=s[e+4>>2];s[o+276>>2]=s[e+8>>2];s[o+280>>2]=s[e+12>>2];s[o+284>>2]=s[e+16>>2];_=+f[e+4>>2];M=+f[e+8>>2];O=+f[e+12>>2];if(_*_+M*M+O*O<1e-4)s[e+68>>2]=5;if(_*_+M*M+O*O>1.4210854715202004e-14){j=1/+X(+(_*_+M*M+O*O));f[o+272>>2]=j*+f[o+272>>2];f[v>>2]=j*+f[v>>2];f[m>>2]=j*+f[m>>2];F=E/+X(+N);s[e+60>>2]=1;N=1/j-S;T=1;C=F*_+C;k=F*M+k;L=F*O+L;break}else{s[e+60>>2]=2;N=0;T=0;break}}while(0);if(((s[e+72>>2]|0)!=0?(s[e+20>>2]|0)!=0:0)?(s[e+68>>2]|0)!=0:0)I=S+N<.01;else I=0;A=T^1;do if(I|A?(x=s[e+20>>2]|0,(x|0)!=0):0){s[3342]=(s[3342]|0)+1;s[e+4>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[e+16>>2]=0;if(!(pD[s[(s[x>>2]|0)+8>>2]&3](x,s[e+24>>2]|0,s[e+28>>2]|0,s[e+32>>2]|0,o+208|0,o+144|0,e+4|0,o+64|0,o+48|0,i)|0)){P=+f[e+4>>2];D=+f[e+8>>2];O=+f[e+12>>2];if(!(P*P+D*D+O*O>0)){u=66;break}H=+f[o+48>>2];B=+f[o+64>>2]-H;_=+f[o+52>>2];j=+f[o+68>>2]-_;M=+f[o+56>>2];F=+f[o+72>>2]-M;S=+X(+(B*B+j*j+F*F))-S;if(S<N|A){s[o+272>>2]=s[e+4>>2];s[o+276>>2]=s[e+8>>2];s[o+280>>2]=s[e+12>>2];s[o+284>>2]=s[e+16>>2];L=+f[o+272>>2];k=+f[v>>2];C=+f[m>>2];N=1/+X(+(L*L+k*k+C*C));f[o+272>>2]=L*N;f[v>>2]=k*N;f[m>>2]=C*N;s[e+60>>2]=6;N=S;C=E*P+H;k=E*D+_;L=E*O+M;break}s[e+60>>2]=5;if(T)break;c=o;return}O=+f[o+48>>2];j=+f[o+64>>2];S=+f[o+52>>2];B=+f[o+68>>2];E=+f[o+56>>2];H=+f[o+72>>2];if(!((O-j)*(O-j)+(S-B)*(S-B)+(E-H)*(E-H)<=1.4210854715202004e-14)){D=E-H;_=S-B;P=O-j;M=0;F=(O-j)*(O-j)+(S-B)*(S-B)+(E-H)*(E-H)}else{U=+f[e+4>>2];R=+f[e+8>>2];F=+f[e+12>>2];D=F;_=R;P=U;M=+f[e+16>>2];F=U*U+R*R+F*F}if(!(F>1.4210854715202004e-14)){s[e+60>>2]=9;if(T)break;c=o;return}F=1/+X(+F);H=-+X(+((j-O)*(j-O)+(B-S)*(B-S)+(H-E)*(H-E)));if(N>H|A){f[o+272>>2]=P*F;f[v>>2]=_*F;f[m>>2]=D*F;f[o+284>>2]=M;s[e+60>>2]=3;N=H;C=O;k=S;L=E;break}s[e+60>>2]=8;if(!T){c=o;return}}else u=66;while(0);if((u|0)==66)if(!T){c=o;return}if(!(N<0)?!(N*N<+f[t+128>>2]):0){c=o;return}if((s[e+76>>2]|0)!=0?(q=s[e+28>>2]|0,JD[s[(s[q>>2]|0)+8>>2]&127](q,o+208|0,o+32|0,o+16|0),F=(+f[o+16>>2]+ +f[o+32>>2])*.5,R=(+f[o+20>>2]+ +f[o+36>>2])*.5,U=(+f[o+24>>2]+ +f[o+40>>2])*.5,q=s[e+32>>2]|0,JD[s[(s[q>>2]|0)+8>>2]&127](q,o+144|0,o+32|0,o+16|0),a=+f[o+272>>2],l=+f[v>>2],h=+f[m>>2],(F-(+f[o+32>>2]+ +f[o+16>>2])*.5)*a+(R-(+f[o+36>>2]+ +f[o+20>>2])*.5)*l+(U-(+f[o+40>>2]+ +f[o+24>>2])*.5)*h<0):0){f[o+272>>2]=a*-1;f[v>>2]=l*-1;f[m>>2]=h*-1}s[e+4>>2]=s[o+272>>2];s[e+8>>2]=s[o+276>>2];s[e+12>>2]=s[o+280>>2];s[e+16>>2]=s[o+284>>2];f[e+56>>2]=N;q=s[(s[n>>2]|0)+16>>2]|0;f[o>>2]=(g+y)*.5+C;f[o+4>>2]=(b+w)*.5+k;f[o+8>>2]=(p+d)*.5+L;f[o+12>>2]=0;zD[q&15](n,o+272|0,o,N);c=o;return}function iO(e){e=e|0;return}function sO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function oO(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0;l=c;c=c+192|0;o=s[e+4>>2]|0;if(+f[o+752>>2]<i){c=l;return}u=s[o+740>>2]|0;h=(s[e+8>>2]|0)+8|0;a=s[h>>2]|0;m=+f[n>>2];b=+f[t>>2]*i+m;d=+f[n+4>>2];g=+f[t+4>>2]*i+d;v=+f[n+8>>2];y=+f[t+8>>2]*i+v;if((u|0)!=(a|0)){p=s[e+12>>2]|0;T=s[p+8>>2]|0;k=b- +f[T+52>>2];E=g- +f[T+56>>2];S=y- +f[T+60>>2];C=m- +f[a+52>>2];N=d- +f[a+56>>2];w=v- +f[a+60>>2];m=k*+f[T+4>>2]+E*+f[T+20>>2]+S*+f[T+36>>2];d=k*+f[T+8>>2]+E*+f[T+24>>2]+S*+f[T+40>>2];v=k*+f[T+12>>2]+E*+f[T+28>>2]+S*+f[T+44>>2];S=C*+f[a+4>>2]+N*+f[a+20>>2]+w*+f[a+36>>2];E=C*+f[a+8>>2]+N*+f[a+24>>2]+w*+f[a+40>>2];w=C*+f[a+12>>2]+N*+f[a+28>>2]+w*+f[a+44>>2]}else{N=b- +f[u+52>>2];E=g- +f[u+56>>2];S=y- +f[u+60>>2];p=s[e+12>>2]|0;T=s[p+8>>2]|0;C=m- +f[T+52>>2];k=d- +f[T+56>>2];w=v- +f[T+60>>2];m=N*+f[u+4>>2]+E*+f[u+20>>2]+S*+f[u+36>>2];d=N*+f[u+8>>2]+E*+f[u+24>>2]+S*+f[u+40>>2];v=N*+f[u+12>>2]+E*+f[u+28>>2]+S*+f[u+44>>2];S=C*+f[T+4>>2]+k*+f[T+20>>2]+w*+f[T+36>>2];E=C*+f[T+8>>2]+k*+f[T+24>>2]+w*+f[T+40>>2];w=C*+f[T+12>>2]+k*+f[T+28>>2]+w*+f[T+44>>2]}f[l>>2]=m;f[l+4>>2]=d;f[l+8>>2]=v;f[l+12>>2]=0;f[l+16>>2]=S;f[l+20>>2]=E;f[l+24>>2]=w;f[l+28>>2]=0;s[l+64>>2]=s[t+0>>2];s[l+68>>2]=s[t+4>>2];s[l+72>>2]=s[t+8>>2];s[l+76>>2]=s[t+12>>2];f[l+80>>2]=i;f[l+84>>2]=0;f[l+88>>2]=0;f[l+92>>2]=0;s[l+112>>2]=0;r[l+116>>0]=0;s[l+120>>2]=0;s[l+124>>2]=0;s[l+128>>2]=0;s[l+132>>2]=0;s[l+136>>2]=0;s[l+140>>2]=0;s[l+144>>2]=0;s[l+148>>2]=0;f[l+48>>2]=b;f[l+52>>2]=g;f[l+56>>2]=y;f[l+60>>2]=0;s[l+32>>2]=s[n+0>>2];s[l+36>>2]=s[n+4>>2];s[l+40>>2]=s[n+8>>2];s[l+44>>2]=s[n+12>>2];g=+f[o+752>>2];t=s[o+748>>2]|0;if((t|0)>0){n=0;T=-1;i=g*g;while(1){g=+f[o+(n*184|0)+4>>2]-m;y=+f[o+(n*184|0)+8>>2]-d;b=+f[o+(n*184|0)+12>>2]-v;x=g*g+y*y+b*b<i;T=x?n:T;n=n+1|0;if((n|0)==(t|0))break;else i=x?g*g+y*y+b*b:i}}else T=-1;t=s[h>>2]|0;x=s[p+8>>2]|0;d=+f[t+224>>2]*+f[x+224>>2];d=d<-10?-10:d;f[l+84>>2]=d>10?10:d;f[l+92>>2]=+f[t+228>>2]*+f[x+228>>2];d=+f[t+232>>2]*+f[x+232>>2];d=d<-10?-10:d;f[l+88>>2]=d>10?10:d;d=+f[l+72>>2];if(+W(+d)>.7071067690849304){N=+f[l+68>>2];k=1/+X(+(d*d+N*N));f[l+152>>2]=0;f[l+156>>2]=-(k*d);f[l+160>>2]=k*N;f[l+168>>2]=(d*d+N*N)*k;C=+f[l+64>>2];f[l+172>>2]=-(C*k*N);f[l+176>>2]=C*-(k*d)}else{N=+f[l+64>>2];C=+f[l+68>>2];k=1/+X(+(N*N+C*C));f[l+152>>2]=-(C*k);f[l+156>>2]=k*N;f[l+160>>2]=0;f[l+168>>2]=-(d*k*N);f[l+172>>2]=d*-(C*k);f[l+176>>2]=(N*N+C*C)*k}if((u|0)!=(a|0)){s[l+96>>2]=s[e+20>>2];s[l+100>>2]=s[e+16>>2];s[l+104>>2]=s[e+28>>2];s[l+108>>2]=s[e+24>>2]}else{s[l+96>>2]=s[e+16>>2];s[l+100>>2]=s[e+20>>2];s[l+104>>2]=s[e+24>>2];s[l+108>>2]=s[e+28>>2]}if((T|0)>-1){x=o+(T*184|0)+152|0;t=s[x>>2]|0;h=o+(T*184|0)+124|0;N=+f[h>>2];p=o+(T*184|0)+128|0;C=+f[p>>2];n=o+(T*184|0)+132|0;k=+f[n>>2];a=o+(T*184|0)+116|0;u=s[a>>2]|0;yM(o+(T*184|0)+4|0,l|0,184)|0;s[a>>2]=u;f[h>>2]=N;f[p>>2]=C;f[n>>2]=k;s[x>>2]=t;c=l;return}else{ZO(o,l)|0;c=l;return}}function uO(e,t,n,i,o,u,a,l,h,p){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;a=a|0;l=l|0;h=h|0;p=p|0;var d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0;e=c;c=c+4256|0;if(((s[n+4>>2]|0)+ -17|0)>>>0<2)g=((s[i+4>>2]|0)+ -17|0)>>>0<2;else g=0;d=0;do{aO();E=+f[13568+(d<<4)>>2];S=+f[13572+(d<<4)>>2];x=+f[13576+(d<<4)>>2];N=+f[o+4>>2]*-E+ +f[o+20>>2]*-S+ +f[o+36>>2]*-x;T=+f[o+8>>2]*-E+ +f[o+24>>2]*-S+ +f[o+40>>2]*-x;f[e+1280+(d<<4)>>2]=+f[o>>2]*-E+ +f[o+16>>2]*-S+ +f[o+32>>2]*-x;f[e+1280+(d<<4)+4>>2]=N;f[e+1280+(d<<4)+8>>2]=T;f[e+1280+(d<<4)+12>>2]=0;T=E*+f[u+4>>2]+S*+f[u+20>>2]+x*+f[u+36>>2];N=E*+f[u+8>>2]+S*+f[u+24>>2]+x*+f[u+40>>2];f[e+288+(d<<4)>>2]=E*+f[u>>2]+S*+f[u+16>>2]+x*+f[u+32>>2];f[e+288+(d<<4)+4>>2]=T;f[e+288+(d<<4)+8>>2]=N;f[e+288+(d<<4)+12>>2]=0;d=d+1|0}while((d|0)!=42);C=dD[s[(s[n>>2]|0)+84>>2]&127](n)|0;if((C|0)>0){k=0;d=42;while(1){WD[s[(s[n>>2]|0)+88>>2]&127](n,k,e+272|0);T=+f[e+272>>2];N=+f[e+276>>2];x=+f[e+280>>2];S=T*+f[o+16>>2]+N*+f[o+20>>2]+x*+f[o+24>>2];E=T*+f[o+32>>2]+N*+f[o+36>>2]+x*+f[o+40>>2];f[e+272>>2]=+f[o>>2]*T+ +f[o+4>>2]*N+ +f[o+8>>2]*x;f[e+276>>2]=S;f[e+280>>2]=E;f[e+284>>2]=0;aO();L=13568+(d<<4)|0;s[L+0>>2]=s[e+272>>2];s[L+4>>2]=s[e+276>>2];s[L+8>>2]=s[e+280>>2];s[L+12>>2]=s[e+284>>2];E=+f[e+272>>2];S=+f[e+276>>2];x=+f[e+280>>2];N=+f[o+4>>2]*-E+ +f[o+20>>2]*-S+ +f[o+36>>2]*-x;T=+f[o+8>>2]*-E+ +f[o+24>>2]*-S+ +f[o+40>>2]*-x;f[e+1280+(d<<4)>>2]=+f[o>>2]*-E+ +f[o+16>>2]*-S+ +f[o+32>>2]*-x;f[e+1280+(d<<4)+4>>2]=N;f[e+1280+(d<<4)+8>>2]=T;f[e+1280+(d<<4)+12>>2]=0;T=E*+f[u+4>>2]+S*+f[u+20>>2]+x*+f[u+36>>2];N=E*+f[u+8>>2]+S*+f[u+24>>2]+x*+f[u+40>>2];f[e+288+(d<<4)>>2]=+f[u>>2]*E+ +f[u+16>>2]*S+ +f[u+32>>2]*x;f[e+288+(d<<4)+4>>2]=T;f[e+288+(d<<4)+8>>2]=N;f[e+288+(d<<4)+12>>2]=0;k=k+1|0;if((k|0)==(C|0))break;else d=d+1|0}d=C+42|0}else d=42;L=dD[s[(s[i>>2]|0)+84>>2]&127](i)|0;if((L|0)>0){k=0;C=d;while(1){WD[s[(s[i>>2]|0)+88>>2]&127](i,k,e+256|0);T=+f[e+256>>2];N=+f[e+260>>2];x=+f[e+264>>2];S=T*+f[u+16>>2]+N*+f[u+20>>2]+x*+f[u+24>>2];E=T*+f[u+32>>2]+N*+f[u+36>>2]+x*+f[u+40>>2];f[e+256>>2]=+f[u>>2]*T+ +f[u+4>>2]*N+ +f[u+8>>2]*x;f[e+260>>2]=S;f[e+264>>2]=E;f[e+268>>2]=0;aO();A=13568+(C<<4)|0;s[A+0>>2]=s[e+256>>2];s[A+4>>2]=s[e+260>>2];s[A+8>>2]=s[e+264>>2];s[A+12>>2]=s[e+268>>2];E=+f[e+256>>2];S=+f[e+260>>2];x=+f[e+264>>2];N=+f[o+4>>2]*-E+ +f[o+20>>2]*-S+ +f[o+36>>2]*-x;T=+f[o+8>>2]*-E+ +f[o+24>>2]*-S+ +f[o+40>>2]*-x;f[e+1280+(C<<4)>>2]=+f[o>>2]*-E+ +f[o+16>>2]*-S+ +f[o+32>>2]*-x;f[e+1280+(C<<4)+4>>2]=N;f[e+1280+(C<<4)+8>>2]=T;f[e+1280+(C<<4)+12>>2]=0;T=E*+f[u+4>>2]+S*+f[u+20>>2]+x*+f[u+36>>2];N=E*+f[u+8>>2]+S*+f[u+24>>2]+x*+f[u+40>>2];f[e+288+(C<<4)>>2]=+f[u>>2]*E+ +f[u+16>>2]*S+ +f[u+32>>2]*x;f[e+288+(C<<4)+4>>2]=T;f[e+288+(C<<4)+8>>2]=N;f[e+288+(C<<4)+12>>2]=0;k=k+1|0;if((k|0)==(L|0))break;else C=C+1|0}d=L+d|0}JD[s[(s[n>>2]|0)+76>>2]&127](n,e+1280|0,e+3264|0,d);JD[s[(s[i>>2]|0)+76>>2]&127](i,e+288|0,e+2272|0,d);if((d|0)>0)if(g){E=0;S=0;x=0;g=0;y=0xde0b6b000000000;while(1){aO();b=+f[13568+(g<<4)>>2];w=+f[13572+(g<<4)>>2];v=+f[13580+(g<<4)>>2];if(b*b+w*w+0>.01?(T=+f[e+3264+(g<<4)>>2],N=+f[e+3264+(g<<4)+4>>2],m=+f[e+3264+(g<<4)+8>>2],_=+f[e+2272+(g<<4)>>2],M=+f[e+2272+(g<<4)+4>>2],O=+f[e+2272+(g<<4)+8>>2],m=b*(_*+f[u>>2]+M*+f[u+4>>2]+O*+f[u+8>>2]+ +f[u+48>>2]-(T*+f[o>>2]+N*+f[o+4>>2]+m*+f[o+8>>2]+ +f[o+48>>2]))+w*(_*+f[u+16>>2]+M*+f[u+20>>2]+O*+f[u+24>>2]+ +f[u+52>>2]-(T*+f[o+16>>2]+N*+f[o+20>>2]+m*+f[o+24>>2]+ +f[o+52>>2]))+0,m<y):0)y=m;else{v=x;w=S;b=E}g=g+1|0;if((g|0)==(d|0)){m=0;break}else{E=b;S=w;x=v}}}else{b=0;x=0;T=0;N=0;g=0;y=0xde0b6b000000000;while(1){aO();E=+f[13568+(g<<4)>>2];w=+f[13572+(g<<4)>>2];m=+f[13576+(g<<4)>>2];S=+f[13580+(g<<4)>>2];if(E*E+w*w+m*m>.01?(M=+f[e+3264+(g<<4)>>2],_=+f[e+3264+(g<<4)+4>>2],v=+f[e+3264+(g<<4)+8>>2],P=+f[e+2272+(g<<4)>>2],D=+f[e+2272+(g<<4)+4>>2],O=+f[e+2272+(g<<4)+8>>2],v=E*(P*+f[u>>2]+D*+f[u+4>>2]+O*+f[u+8>>2]+ +f[u+48>>2]-(M*+f[o>>2]+_*+f[o+4>>2]+v*+f[o+8>>2]+ +f[o+48>>2]))+w*(P*+f[u+16>>2]+D*+f[u+20>>2]+O*+f[u+24>>2]+ +f[u+52>>2]-(M*+f[o+16>>2]+_*+f[o+20>>2]+v*+f[o+24>>2]+ +f[o+52>>2]))+m*(P*+f[u+32>>2]+D*+f[u+36>>2]+O*+f[u+40>>2]+ +f[u+56>>2]-(M*+f[o+32>>2]+_*+f[o+36>>2]+v*+f[o+40>>2]+ +f[o+56>>2])),v<y):0){b=E;y=v}else{S=N;m=T;w=x}g=g+1|0;if((g|0)==(d|0)){v=S;break}else{x=w;T=m;N=S}}}else{v=0;m=0;w=0;b=0;y=0xde0b6b000000000}switch(s[n+4>>2]|0){case 4:case 5:case 10:case 11:case 13:case 1:case 0:case 8:break;default:+CD[s[(s[n>>2]|0)+48>>2]&15](n)}switch(s[i+4>>2]|0){case 4:case 5:case 10:case 11:case 13:case 1:case 0:case 8:break;default:+CD[s[(s[i>>2]|0)+48>>2]&15](i)}if(y<0){A=0;c=e;return A|0}switch(s[n+4>>2]|0){case 8:{E=+f[n+28>>2]*+f[n+12>>2];break};case 0:{E=+f[n+44>>2];break};case 1:{E=+f[n+44>>2];break};case 13:{E=+f[n+44>>2];break};case 11:{E=+f[n+44>>2];break};case 10:{E=+f[n+44>>2];break};case 4:case 5:{E=+f[n+44>>2];break};default:E=+CD[s[(s[n>>2]|0)+48>>2]&15](n)}d=s[i+4>>2]|0;switch(d|0){case 8:{S=+f[i+28>>2]*+f[i+12>>2];d=8;break};case 0:{S=+f[i+44>>2];d=0;break};case 1:{S=+f[i+44>>2];d=1;break};case 13:{S=+f[i+44>>2];d=13;break};case 11:{S=+f[i+44>>2];d=11;break};case 10:{S=+f[i+44>>2];d=10;break};case 4:case 5:{S=+f[i+44>>2];break};default:{S=+CD[s[(s[i>>2]|0)+48>>2]&15](i);d=s[i+4>>2]|0}}y=y+(E+S+.5);s[e+176>>2]=13392;f[e+180>>2]=0;f[e+184>>2]=1;f[e+188>>2]=0;f[e+192>>2]=0;s[e+196>>2]=0;s[e+200>>2]=t;s[e+204>>2]=n;s[e+208>>2]=i;s[e+212>>2]=s[n+4>>2];s[e+216>>2]=d;f[e+220>>2]=+CD[s[(s[n>>2]|0)+48>>2]&15](n);f[e+224>>2]=+CD[s[(s[i>>2]|0)+48>>2]&15](i);r[e+228>>0]=0;s[e+236>>2]=-1;s[e+248>>2]=1;s[e+252>>2]=1;_=+f[o+48>>2]+b*y;D=w*y+ +f[o+52>>2];P=m*y+ +f[o+56>>2];s[e+44>>2]=s[o+0>>2];s[e+48>>2]=s[o+4>>2];s[e+52>>2]=s[o+8>>2];s[e+56>>2]=s[o+12>>2];s[e+60>>2]=s[o+16>>2];s[e+64>>2]=s[o+20>>2];s[e+68>>2]=s[o+24>>2];s[e+72>>2]=s[o+28>>2];s[e+76>>2]=s[o+32>>2];s[e+80>>2]=s[o+36>>2];s[e+84>>2]=s[o+40>>2];s[e+88>>2]=s[o+44>>2];f[e+92>>2]=_;f[e+96>>2]=D;f[e+100>>2]=P;f[e+104>>2]=0;s[e+108>>2]=s[u+0>>2];s[e+112>>2]=s[u+4>>2];s[e+116>>2]=s[u+8>>2];s[e+120>>2]=s[u+12>>2];s[e+124>>2]=s[u+16>>2];s[e+128>>2]=s[u+20>>2];s[e+132>>2]=s[u+24>>2];s[e+136>>2]=s[u+28>>2];s[e+140>>2]=s[u+32>>2];s[e+144>>2]=s[u+36>>2];s[e+148>>2]=s[u+40>>2];s[e+152>>2]=s[u+44>>2];s[e+156>>2]=s[u+48>>2];s[e+160>>2]=s[u+52>>2];s[e+164>>2]=s[u+56>>2];s[e+168>>2]=s[u+60>>2];f[e+172>>2]=0xde0b6b000000000;s[e>>2]=14656;r[e+40>>0]=0;f[e+180>>2]=-b;f[e+184>>2]=-w;f[e+188>>2]=-m;f[e+192>>2]=0;rO(e+176|0,e+44|0,e,p,0);y=y- +f[e+36>>2];i=r[e+40>>0]|0;if(!(i<<24>>24==0)){D=+f[e+24>>2]-w*y;P=+f[e+28>>2]-m*y;f[l>>2]=+f[e+20>>2]-b*y;f[l+4>>2]=D;f[l+8>>2]=P;f[l+12>>2]=0;s[h+0>>2]=s[e+20>>2];s[h+4>>2]=s[e+24>>2];s[h+8>>2]=s[e+28>>2];s[h+12>>2]=s[e+32>>2];f[a>>2]=b;f[a+4>>2]=w;f[a+8>>2]=m;f[a+12>>2]=v}A=i<<24>>24!=0;c=e;return A|0}function aO(){var e=0;e=c;if((r[14560]|0)!=0){c=e;return}if((Zt(14560)|0)==0){c=e;return}f[3392]=0;f[3393]=-0;f[3394]=-1;f[3395]=0;f[3396]=.7236080169677734;f[3397]=-.5257250070571899;f[3398]=-.44721901416778564;f[3399]=0;f[3400]=-.2763879895210266;f[3401]=-.8506489992141724;f[3402]=-.44721901416778564;f[3403]=0;f[3404]=-.8944259881973267;f[3405]=-0;f[3406]=-.4472160041332245;f[3407]=0;f[3408]=-.2763879895210266;f[3409]=.8506489992141724;f[3410]=-.44721999764442444;f[3411]=0;f[3412]=.7236080169677734;f[3413]=.5257250070571899;f[3414]=-.44721901416778564;f[3415]=0;f[3416]=.2763879895210266;f[3417]=-.8506489992141724;f[3418]=.44721999764442444;f[3419]=0;f[3420]=-.7236080169677734;f[3421]=-.5257250070571899;f[3422]=.44721901416778564;f[3423]=0;f[3424]=-.7236080169677734;f[3425]=.5257250070571899;f[3426]=.44721901416778564;f[3427]=0;f[3428]=.2763879895210266;f[3429]=.8506489992141724;f[3430]=.44721901416778564;f[3431]=0;f[3432]=.8944259881973267;f[3433]=0;f[3434]=.4472160041332245;f[3435]=0;f[3436]=-0;f[3437]=0;f[3438]=1;f[3439]=0;f[3440]=.4253230094909668;f[3441]=-.3090110123157501;f[3442]=-.8506540060043335;f[3443]=0;f[3444]=-.16245600581169128;f[3445]=-.49999499320983887;f[3446]=-.8506540060043335;f[3447]=0;f[3448]=.2628690004348755;f[3449]=-.8090119957923889;f[3450]=-.525738000869751;f[3451]=0;f[3452]=.4253230094909668;f[3453]=.3090110123157501;f[3454]=-.8506540060043335;f[3455]=0;f[3456]=.8506479859352112;f[3457]=-0;f[3458]=-.5257359743118286;f[3459]=0;f[3460]=-.5257300138473511;f[3461]=-0;f[3462]=-.8506519794464111;f[3463]=0;f[3464]=-.6881899833679199;f[3465]=-.49999698996543884;f[3466]=-.5257359743118286;f[3467]=0;f[3468]=-.16245600581169128;f[3469]=.49999499320983887;f[3470]=-.8506540060043335;f[3471]=0;f[3472]=-.6881899833679199;f[3473]=.49999698996543884;f[3474]=-.5257359743118286;f[3475]=0;f[3476]=.2628690004348755;f[3477]=.8090119957923889;f[3478]=-.525738000869751;f[3479]=0;f[3480]=.9510579705238342;f[3481]=.3090130090713501;f[3482]=0;f[3483]=0;f[3484]=.9510579705238342;f[3485]=-.3090130090713501;f[3486]=0;f[3487]=0;f[3488]=.5877860188484192;f[3489]=-.80901700258255;f[3490]=0;f[3491]=0;f[3492]=0;f[3493]=-1;f[3494]=0;f[3495]=0;f[3496]=-.5877860188484192;f[3497]=-.80901700258255;f[3498]=0;f[3499]=0;f[3500]=-.9510579705238342;f[3501]=-.3090130090713501;f[3502]=-0;f[3503]=0;f[3504]=-.9510579705238342;f[3505]=.3090130090713501;f[3506]=-0;f[3507]=0;f[3508]=-.5877860188484192;f[3509]=.80901700258255;f[3510]=-0;f[3511]=0;f[3512]=-0;f[3513]=1;f[3514]=-0;f[3515]=0;f[3516]=.5877860188484192;f[3517]=.80901700258255;f[3518]=-0;f[3519]=0;f[3520]=.6881899833679199;f[3521]=-.49999698996543884;f[3522]=.5257359743118286;f[3523]=0;f[3524]=-.2628690004348755;f[3525]=-.8090119957923889;f[3526]=.525738000869751;f[3527]=0;f[3528]=-.8506479859352112;f[3529]=0;f[3530]=.5257359743118286;f[3531]=0;f[3532]=-.2628690004348755;f[3533]=.8090119957923889;f[3534]=.525738000869751;f[3535]=0;f[3536]=.6881899833679199;f[3537]=.49999698996543884;f[3538]=.5257359743118286;f[3539]=0;f[3540]=.5257300138473511;f[3541]=0;f[3542]=.8506519794464111;f[3543]=0;f[3544]=.16245600581169128;f[3545]=-.49999499320983887;f[3546]=.8506540060043335;f[3547]=0;f[3548]=-.4253230094909668;f[3549]=-.3090110123157501;f[3550]=.8506540060043335;f[3551]=0;f[3552]=-.4253230094909668;f[3553]=.3090110123157501;f[3554]=.8506540060043335;f[3555]=0;f[3556]=.16245600581169128;f[3557]=.49999499320983887;f[3558]=.8506540060043335;f[3559]=0;sn(14560);c=e;return}function fO(e){e=e|0;return}function lO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function cO(e){e=e|0;return}function hO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function pO(e,t,n){e=e|0;t=t|0;n=n|0;return}function dO(e,t,n){e=e|0;t=t|0;n=n|0;return}function vO(e,t,n,i){e=e|0;t=t|0;n=n|0;i=+i;var o=0;o=c;s[e+4>>2]=s[t+0>>2];s[e+8>>2]=s[t+4>>2];s[e+12>>2]=s[t+8>>2];s[e+16>>2]=s[t+12>>2];s[e+20>>2]=s[n+0>>2];s[e+24>>2]=s[n+4>>2];s[e+28>>2]=s[n+8>>2];s[e+32>>2]=s[n+12>>2];f[e+36>>2]=i;r[e+40>>0]=1;c=o;return}function mO(e){e=e|0;var t=0;t=c;qS(e);if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function gO(e){e=e|0;var t=0;t=c;qS(e);c=t;return}function yO(e,t,n,o,u){e=e|0;t=t|0;n=n|0;o=o|0;u=u|0;var a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0;a=c;c=c+176|0;r[e+60>>0]=n&1;if(n){b=+f[o>>2]+ -1;m=+f[o+4>>2]+ -1;g=+f[o+8>>2]+ -1;f[e+4>>2]=b;f[e+8>>2]=m;f[e+12>>2]=g;f[e+16>>2]=0;d=+f[u>>2]+1;h=+f[u+4>>2]+1;l=+f[u+8>>2]+1;f[e+20>>2]=d;f[e+24>>2]=h;f[e+28>>2]=l;f[e+32>>2]=0;f[e+36>>2]=65533/(d-b);f[e+40>>2]=65533/(h-m);f[e+44>>2]=65533/(l-g);f[e+48>>2]=0;r[e+60>>0]=1;p=b+ +(~~((b-b)*(65533/(d-b)))&65534)/(65533/(d-b))+ -1;v=m+ +(~~((m-m)*(65533/(h-m)))&65534)/(65533/(h-m))+ -1;y=g+ +(~~((g-g)*(65533/(l-g)))&65534)/(65533/(l-g))+ -1;if(p<b)f[e+4>>2]=p;else p=b;if(v<m)f[e+8>>2]=v;else v=m;if(y<g)f[e+12>>2]=y;else y=g;w=p+ +((~~((d-p)*(65533/(d-b))+1)&65535|1)&65535)/(65533/(d-b))+1;b=v+ +((~~((h-v)*(65533/(h-m))+1)&65535|1)&65535)/(65533/(h-m))+1;m=y+ +((~~((l-y)*(65533/(l-g))+1)&65535|1)&65535)/(65533/(l-g))+1;if(d<w){f[e+20>>2]=w;d=w}if(h<b){f[e+24>>2]=b;h=b}if(l<m){f[e+28>>2]=m;l=m}f[e+36>>2]=65533/(d-p);f[e+40>>2]=65533/(h-v);f[e+44>>2]=65533/(l-y);f[e+48>>2]=0;s[a+152>>2]=15096;s[a+156>>2]=e+104;s[a+160>>2]=e;JD[s[(s[t>>2]|0)+8>>2]&127](t,a+152|0,e+4|0,e+20|0);t=s[e+108>>2]|0;s[a+136>>2]=0;s[a+140>>2]=0;s[a+144>>2]=0;s[a+148>>2]=0;u=s[e+128>>2]|0;if((u|0)<(t<<1|0)){if((s[e+132>>2]|0)<(t<<1|0)){if((t|0)==0){o=0;E=u}else{s[5004]=(s[5004]|0)+1;o=cM(t<<5|19)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}E=s[e+128>>2]|0}if((E|0)>0){n=0;do{T=o+(n<<4)|0;x=(s[e+136>>2]|0)+(n<<4)|0;s[T+0>>2]=s[x+0>>2];s[T+4>>2]=s[x+4>>2];s[T+8>>2]=s[x+8>>2];s[T+12>>2]=s[x+12>>2];n=n+1|0}while((n|0)!=(E|0))}n=s[e+136>>2]|0;if((n|0)!=0){if((r[e+140>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+136>>2]=0}r[e+140>>0]=1;s[e+136>>2]=o;s[e+132>>2]=t<<1;o=e+136|0}else o=e+136|0;do{T=(s[o>>2]|0)+(u<<4)|0;s[T+0>>2]=s[a+136>>2];s[T+4>>2]=s[a+140>>2];s[T+8>>2]=s[a+144>>2];s[T+12>>2]=s[a+148>>2];u=u+1|0}while((u|0)!=(t<<1|0))}s[e+128>>2]=t<<1}else{s[a+128>>2]=14960;s[a+132>>2]=e+64;f[a+112>>2]=-0xde0b6b000000000;f[a+116>>2]=-0xde0b6b000000000;f[a+120>>2]=-0xde0b6b000000000;f[a+124>>2]=0;f[a+96>>2]=0xde0b6b000000000;f[a+100>>2]=0xde0b6b000000000;f[a+104>>2]=0xde0b6b000000000;f[a+108>>2]=0;JD[s[(s[t>>2]|0)+8>>2]&127](t,a+128|0,a+112|0,a+96|0);t=s[e+68>>2]|0;o=a+32|0;E=o+64|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(E|0));u=s[e+88>>2]|0;if((u|0)<(t<<1|0)){if((s[e+92>>2]|0)<(t<<1|0)){if((t|0)==0){S=0;x=u}else{s[5004]=(s[5004]|0)+1;o=cM(t<<7|19)|0;if((o|0)==0)S=0;else{s[(o+19&-16)+ -4>>2]=o;S=o+19&-16}x=s[e+88>>2]|0}if((x|0)>0){T=0;do{o=S+(T<<6)+0|0;n=(s[e+96>>2]|0)+(T<<6)+0|0;E=o+64|0;do{s[o>>2]=s[n>>2];o=o+4|0;n=n+4|0}while((o|0)<(E|0));T=T+1|0}while((T|0)!=(x|0))}o=s[e+96>>2]|0;if((o|0)!=0){if((r[e+100>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[o+ -4>>2]|0)}s[e+96>>2]=0}r[e+100>>0]=1;s[e+96>>2]=S;s[e+92>>2]=t<<1;S=e+96|0}else S=e+96|0;do{o=(s[S>>2]|0)+(u<<6)+0|0;n=a+32|0;E=o+64|0;do{s[o>>2]=s[n>>2];o=o+4|0;n=n+4|0}while((o|0)<(E|0));u=u+1|0}while((u|0)!=(t<<1|0))}s[e+88>>2]=t<<1}s[e+56>>2]=0;FS(e,0,t);if((r[e+60>>0]|0)!=0?(s[e+152>>2]|0)==0:0){if((s[e+156>>2]|0)==0){s[5004]=(s[5004]|0)+1;t=cM(51)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}o=s[e+152>>2]|0;if((o|0)>0){u=0;do{T=t+(u<<5)|0;x=(s[e+160>>2]|0)+(u<<5)|0;s[T+0>>2]=s[x+0>>2];s[T+4>>2]=s[x+4>>2];s[T+8>>2]=s[x+8>>2];s[T+12>>2]=s[x+12>>2];s[T+16>>2]=s[x+16>>2];s[T+20>>2]=s[x+20>>2];s[T+24>>2]=s[x+24>>2];s[T+28>>2]=s[x+28>>2];u=u+1|0}while((u|0)!=(o|0))}u=s[e+160>>2]|0;if((u|0)!=0){if((r[e+164>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+160>>2]=0}r[e+164>>0]=1;s[e+160>>2]=t;s[e+156>>2]=1;u=(s[e+152>>2]|0)+1|0}else{u=1;t=s[e+160>>2]|0}s[e+152>>2]=u;s[t+0>>2]=s[a+0>>2];s[t+4>>2]=s[a+4>>2];s[t+8>>2]=s[a+8>>2];s[t+12>>2]=s[a+12>>2];s[t+16>>2]=s[a+16>>2];s[t+20>>2]=s[a+20>>2];s[t+24>>2]=s[a+24>>2];s[t+28>>2]=s[a+28>>2];T=s[e+160>>2]|0;x=s[e+136>>2]|0;i[T>>1]=i[x>>1]|0;i[T+2>>1]=i[x+2>>1]|0;i[T+4>>1]=i[x+4>>1]|0;i[T+6>>1]=i[x+6>>1]|0;i[T+8>>1]=i[x+8>>1]|0;i[T+10>>1]=i[x+10>>1]|0;s[T+12>>2]=0;x=s[x+12>>2]|0;s[T+16>>2]=(x|0)>-1?1:0-x|0}s[e+168>>2]=s[e+152>>2];t=s[e+116>>2]|0;if((t|0)!=0){if((r[e+120>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[e+116>>2]=0}r[e+120>>0]=1;s[e+116>>2]=0;s[e+108>>2]=0;s[e+112>>2]=0;t=s[e+76>>2]|0;if((t|0)==0){r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;T=e+72|0;s[T>>2]=0;c=a;return}if((r[e+80>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[e+76>>2]=0;r[e+80>>0]=1;s[e+76>>2]=0;s[e+68>>2]=0;T=e+72|0;s[T>>2]=0;c=a;return}function bO(e){e=e|0;return 84}function wO(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;WS(e,t,n,r)|0;c=i;return 1}function EO(e){e=e|0;return}function SO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function xO(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0;l=c;c=c+32|0;h=+f[t>>2];o=h<0xde0b6b000000000?h:0xde0b6b000000000;p=+f[t+4>>2];u=p<0xde0b6b000000000?p:0xde0b6b000000000;d=+f[t+8>>2];a=d<0xde0b6b000000000?d:0xde0b6b000000000;v=+f[t+12>>2];g=v<0?v:0;h=h>-0xde0b6b000000000?h:-0xde0b6b000000000;p=p>-0xde0b6b000000000?p:-0xde0b6b000000000;d=d>-0xde0b6b000000000?d:-0xde0b6b000000000;v=v>0?v:0;x=+f[t+16>>2];o=x<o?x:o;T=+f[t+20>>2];u=T<u?T:u;N=+f[t+24>>2];a=N<a?N:a;C=+f[t+28>>2];g=C<g?C:g;h=h<x?x:h;p=p<T?T:p;d=d<N?N:d;v=v<C?C:v;C=+f[t+32>>2];o=C<o?C:o;N=+f[t+36>>2];u=N<u?N:u;T=+f[t+40>>2];a=T<a?T:a;x=+f[t+44>>2];g=x<g?x:g;h=h<C?C:h;p=p<N?N:p;d=d<T?T:d;v=v<x?x:v;e=s[e+4>>2]|0;E=s[e+4>>2]|0;if((E|0)==(s[e+8>>2]|0)?(m=(E|0)==0?1:E<<1,(E|0)<(m|0)):0){if((m|0)==0)t=0;else{s[5004]=(s[5004]|0)+1;t=cM(m<<6|19)|0;if((t|0)==0)t=0;else{s[(t+19&-16)+ -4>>2]=t;t=t+19&-16}E=s[e+4>>2]|0}if((E|0)>0){S=0;do{y=t+(S<<6)+0|0;b=(s[e+12>>2]|0)+(S<<6)+0|0;w=y+64|0;do{s[y>>2]=s[b>>2];y=y+4|0;b=b+4|0}while((y|0)<(w|0));S=S+1|0}while((S|0)!=(E|0))}y=s[e+12>>2]|0;if((y|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[y+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=t;s[e+8>>2]=m;E=s[e+4>>2]|0}S=s[e+12>>2]|0;f[S+(E<<6)>>2]=o;f[S+(E<<6)+4>>2]=u;f[S+(E<<6)+8>>2]=a;f[S+(E<<6)+12>>2]=g;f[S+(E<<6)+16>>2]=h;f[S+(E<<6)+20>>2]=p;f[S+(E<<6)+24>>2]=d;f[S+(E<<6)+28>>2]=v;s[S+(E<<6)+32>>2]=-1;s[S+(E<<6)+36>>2]=n;s[S+(E<<6)+40>>2]=i;S=S+(E<<6)+44|0;s[S+0>>2]=s[l+0>>2];s[S+4>>2]=s[l+4>>2];s[S+8>>2]=s[l+8>>2];s[S+12>>2]=s[l+12>>2];s[S+16>>2]=s[l+16>>2];s[e+4>>2]=(s[e+4>>2]|0)+1;c=l;return}function TO(e){e=e|0;return}function NO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function CO(e,t,n,o){e=e|0;t=t|0;n=n|0;o=o|0;var u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;u=c;m=+f[t>>2];E=m<0xde0b6b000000000?m:0xde0b6b000000000;g=+f[t+4>>2];S=g<0xde0b6b000000000?g:0xde0b6b000000000;y=+f[t+8>>2];w=y<0xde0b6b000000000?y:0xde0b6b000000000;m=m>-0xde0b6b000000000?m:-0xde0b6b000000000;g=g>-0xde0b6b000000000?g:-0xde0b6b000000000;y=y>-0xde0b6b000000000?y:-0xde0b6b000000000;N=+f[t+16>>2];E=N<E?N:E;C=+f[t+20>>2];S=C<S?C:S;k=+f[t+24>>2];w=k<w?k:w;m=m<N?N:m;g=g<C?C:g;y=y<k?k:y;k=+f[t+32>>2];E=k<E?k:E;C=+f[t+36>>2];S=C<S?C:S;N=+f[t+40>>2];w=N<w?N:w;m=m<k?k:m;g=g<C?C:g;y=y<N?N:y;if(m-E<.0020000000949949026){m=m+.0010000000474974513;E=E+ -.0010000000474974513}if(g-S<.0020000000949949026){g=g+.0010000000474974513;S=S+ -.0010000000474974513}if(y-w<.0020000000949949026){y=y+.0010000000474974513;w=w+ -.0010000000474974513}t=s[e+8>>2]|0;O=+f[t+4>>2];L=+f[t+8>>2];C=+f[t+12>>2];A=+f[t+36>>2];N=+f[t+40>>2];k=+f[t+44>>2];t=~~((E-O)*A)&65534;l=~~((S-L)*N)&65534;h=~~((w-C)*k)&65534;p=(~~((m-O)*A+1)&65535|1)&65535;d=(~~((g-L)*N+1)&65535|1)&65535;v=(~~((y-C)*k+1)&65535|1)&65535;e=s[e+4>>2]|0;T=s[e+4>>2]|0;if((T|0)==(s[e+8>>2]|0)?(a=(T|0)==0?1:T<<1,(T|0)<(a|0)):0){if((a|0)==0)b=0;else{s[5004]=(s[5004]|0)+1;b=cM((a<<4|3)+16|0)|0;if((b|0)==0)b=0;else{s[(b+19&-16)+ -4>>2]=b;b=b+19&-16}T=s[e+4>>2]|0}if((T|0)>0){x=0;do{M=b+(x<<4)|0;_=(s[e+12>>2]|0)+(x<<4)|0;s[M+0>>2]=s[_+0>>2];s[M+4>>2]=s[_+4>>2];s[M+8>>2]=s[_+8>>2];s[M+12>>2]=s[_+12>>2];x=x+1|0}while((x|0)!=(T|0))}x=s[e+12>>2]|0;if((x|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[x+ -4>>2]|0)}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=b;s[e+8>>2]=a;T=s[e+4>>2]|0}_=s[e+12>>2]|0;i[_+(T<<4)>>1]=t;i[_+(T<<4)+2>>1]=l;i[_+(T<<4)+4>>1]=h;i[_+(T<<4)+6>>1]=p;i[_+(T<<4)+8>>1]=d;i[_+(T<<4)+10>>1]=v;s[_+(T<<4)+12>>2]=n<<21|o;s[e+4>>2]=(s[e+4>>2]|0)+1;c=u;return}function kO(e){e=e|0;var t=0,n=0,i=0,o=0,u=0;t=c;s[e>>2]=15272;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;s[e+12>>2]=0;s[e+24>>2]=0;r[e+28>>0]=0;r[e+48>>0]=1;s[e+44>>2]=0;s[e+36>>2]=0;s[e+40>>2]=0;r[e+68>>0]=1;s[e+64>>2]=0;s[e+56>>2]=0;s[e+60>>2]=0;s[e+72>>2]=0;s[5004]=(s[5004]|0)+1;n=cM(51)|0;if((n|0)==0)n=0;else{s[(n+19&-16)+ -4>>2]=n;n=n+19&-16}i=s[e+8>>2]|0;if((i|0)>0){o=0;do{u=s[e+16>>2]|0;s[n+(o<<4)>>2]=s[u+(o<<4)>>2];s[n+(o<<4)+4>>2]=s[u+(o<<4)+4>>2];s[n+(o<<4)+8>>2]=s[u+(o<<4)+8>>2];s[n+(o<<4)+12>>2]=s[u+(o<<4)+12>>2];o=o+1|0}while((o|0)!=(i|0))}i=s[e+16>>2]|0;if((i|0)==0){r[e+20>>0]=1;s[e+16>>2]=n;s[e+12>>2]=2;LO(e);c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[i+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=n;s[e+12>>2]=2;LO(e);c=t;return}function LO(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,f=0,l=0;n=c;i=s[e+12>>2]|0;t=s[e+36>>2]|0;if((t|0)>=(i|0)){c=n;return}if((t|0)<=(i|0)){if((s[e+40>>2]|0)<(i|0)){if((i|0)==0){o=0;a=t}else{s[5004]=(s[5004]|0)+1;o=cM((i<<2|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}a=s[e+36>>2]|0}if((a|0)>0){u=0;do{f=o+(u<<2)|0;if((f|0)!=0)s[f>>2]=s[(s[e+44>>2]|0)+(u<<2)>>2];u=u+1|0}while((u|0)!=(a|0))}u=s[e+44>>2]|0;if((u|0)!=0){if((r[e+48>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[u+ -4>>2]|0)}s[e+44>>2]=0}r[e+48>>0]=1;s[e+44>>2]=o;s[e+40>>2]=i}else o=s[e+44>>2]|0;u=t;do{a=o+(u<<2)|0;if((a|0)!=0)s[a>>2]=0;u=u+1|0}while((u|0)!=(i|0))}s[e+36>>2]=i;o=s[e+56>>2]|0;if((o|0)<(i|0)){if((s[e+60>>2]|0)<(i|0)){if((i|0)==0){u=0;a=o}else{s[5004]=(s[5004]|0)+1;u=cM((i<<2|3)+16|0)|0;if((u|0)==0)u=0;else{s[(u+19&-16)+ -4>>2]=u;u=u+19&-16}a=s[e+56>>2]|0}if((a|0)>0){f=0;do{l=u+(f<<2)|0;if((l|0)!=0)s[l>>2]=s[(s[e+64>>2]|0)+(f<<2)>>2];f=f+1|0}while((f|0)!=(a|0))}a=s[e+64>>2]|0;if((a|0)!=0){if((r[e+68>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0)}s[e+64>>2]=0}r[e+68>>0]=1;s[e+64>>2]=u;s[e+60>>2]=i}else u=s[e+64>>2]|0;do{a=u+(o<<2)|0;if((a|0)!=0)s[a>>2]=0;o=o+1|0}while((o|0)!=(i|0))}s[e+56>>2]=i;if((i|0)>0){vM(s[e+44>>2]|0,-1,i<<2|0)|0;vM(s[e+64>>2]|0,-1,i<<2|0)|0}if((t|0)<=0){c=n;return}u=s[e+16>>2]|0;o=s[e+44>>2]|0;i=s[e+64>>2]|0;a=0;do{l=s[(s[u+(a<<4)+4>>2]|0)+12>>2]<<16|s[(s[u+(a<<4)>>2]|0)+12>>2];l=(l+~(l<<15)>>10^l+~(l<<15))*9|0;l=o+((((l>>6^l)+~((l>>6^l)<<11)>>16^(l>>6^l)+~((l>>6^l)<<11))&(s[e+12>>2]|0)+ -1)<<2)|0;s[i+(a<<2)>>2]=s[l>>2];s[l>>2]=a;a=a+1|0}while((a|0)!=(t|0));c=n;return}function AO(e){e=e|0;var t=0;t=c;OO(e);hM(e);c=t;return}function OO(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15272;n=s[e+64>>2]|0;if((n|0)!=0){if((r[e+68>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+64>>2]=0}r[e+68>>0]=1;s[e+64>>2]=0;s[e+56>>2]=0;s[e+60>>2]=0;n=s[e+44>>2]|0;if((n|0)!=0){if((r[e+48>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+44>>2]=0}r[e+48>>0]=1;s[e+44>>2]=0;s[e+36>>2]=0;s[e+40>>2]=0;n=s[e+16>>2]|0;if((n|0)==0){r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}if((r[e+20>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}s[e+16>>2]=0;r[e+20>>0]=1;s[e+16>>2]=0;s[e+8>>2]=0;n=e+12|0;s[n>>2]=0;c=t;return}function MO(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;e=c;r=s[t+8>>2]|0;if((r|0)==0|(n|0)==0){c=e;return}lD[s[s[r>>2]>>2]&511](r);hD[s[(s[n>>2]|0)+60>>2]&127](n,s[t+8>>2]|0);s[t+8>>2]=0;c=e;return}function _O(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;c=c+16|0;s[r>>2]=15576;s[r+4>>2]=t;s[r+8>>2]=e;s[r+12>>2]=n;WD[s[(s[e>>2]|0)+48>>2]&127](e,r,n);c=r;return}function DO(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;c=c+16|0;s[r>>2]=15400;s[r+4>>2]=t;WD[s[(s[e>>2]|0)+48>>2]&127](e,r,n);c=r;return}function PO(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0;i=c;s[3814]=(s[3814]|0)+1;u=(s[t+12>>2]|0)>(s[n+12>>2]|0);o=s[(u?n:t)+12>>2]|0;t=s[(u?t:n)+12>>2]|0;n=((t<<16|o)+~((t<<16|o)<<15)>>10^(t<<16|o)+~((t<<16|o)<<15))*9|0;n=((n>>6^n)+~((n>>6^n)<<11)>>16^(n>>6^n)+~((n>>6^n)<<11))&(s[e+12>>2]|0)+ -1;if((n|0)>=(s[e+36>>2]|0)){u=0;c=i;return u|0}u=s[(s[e+44>>2]|0)+(n<<2)>>2]|0;if((u|0)==-1){u=0;c=i;return u|0}n=s[e+16>>2]|0;while(1){if((s[(s[n+(u<<4)>>2]|0)+12>>2]|0)==(o|0)?(s[(s[n+(u<<4)+4>>2]|0)+12>>2]|0)==(t|0):0)break;u=s[(s[e+64>>2]|0)+(u<<2)>>2]|0;if((u|0)==-1){o=0;r=8;break}}if((r|0)==8){c=i;return o|0}u=n+(u<<4)|0;c=i;return u|0}function HO(e){e=e|0;var t=0,n=0,i=0,o=0,u=0,a=0,f=0;i=c;t=s[e+4>>2]|0;if((t|0)!=(s[e+8>>2]|0)){a=t;a=a+1|0;s[e+4>>2]=a;a=e+12|0;a=s[a>>2]|0;a=a+(t<<4)|0;c=i;return a|0}n=(t|0)==0?1:t<<1;if((t|0)>=(n|0)){a=t;a=a+1|0;s[e+4>>2]=a;a=e+12|0;a=s[a>>2]|0;a=a+(t<<4)|0;c=i;return a|0}if((n|0)==0){o=0;u=t}else{s[5004]=(s[5004]|0)+1;o=cM((n<<4|3)+16|0)|0;if((o|0)==0)o=0;else{s[(o+19&-16)+ -4>>2]=o;o=o+19&-16}u=s[e+4>>2]|0}if((u|0)>0){a=0;do{f=s[e+12>>2]|0;s[o+(a<<4)>>2]=s[f+(a<<4)>>2];s[o+(a<<4)+4>>2]=s[f+(a<<4)+4>>2];s[o+(a<<4)+8>>2]=s[f+(a<<4)+8>>2];s[o+(a<<4)+12>>2]=s[f+(a<<4)+12>>2];a=a+1|0}while((a|0)!=(u|0))}a=s[e+12>>2]|0;if((a|0)!=0){if((r[e+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[a+ -4>>2]|0);u=s[e+4>>2]|0}s[e+12>>2]=0}r[e+16>>0]=1;s[e+12>>2]=o;s[e+8>>2]=n;f=u;f=f+1|0;s[e+4>>2]=f;f=e+12|0;f=s[f>>2]|0;f=f+(t<<4)|0;c=i;return f|0}function BO(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0;o=c;s[3810]=(s[3810]|0)+1;a=(s[t+12>>2]|0)>(s[n+12>>2]|0);u=a?n:t;a=a?t:n;l=s[u+12>>2]|0;n=s[a+12>>2]|0;f=((n<<16|l)+~((n<<16|l)<<15)>>10^(n<<16|l)+~((n<<16|l)<<15))*9|0;f=((f>>6^f)+~((f>>6^f)<<11)>>16^(f>>6^f)+~((f>>6^f)<<11))&(s[e+12>>2]|0)+ -1;h=s[(s[e+44>>2]|0)+(f<<2)>>2]|0;if((h|0)==-1){d=0;c=o;return d|0}t=s[e+16>>2]|0;while(1){if((s[(s[t+(h<<4)>>2]|0)+12>>2]|0)==(l|0)?(s[(s[t+(h<<4)+4>>2]|0)+12>>2]|0)==(n|0):0)break;h=s[(s[e+64>>2]|0)+(h<<2)>>2]|0;if((h|0)==-1){e=0;i=24;break}}if((i|0)==24){c=o;return e|0}n=t+(h<<4)|0;if((n|0)==0){d=0;c=o;return d|0}WD[s[(s[e>>2]|0)+32>>2]&127](e,n,r);t=s[t+(h<<4)+12>>2]|0;n=n-(s[e+16>>2]|0)>>4;f=(s[e+44>>2]|0)+(f<<2)|0;l=s[f>>2]|0;h=s[e+64>>2]|0;if((l|0)!=(n|0)){while(1){p=h+(l<<2)|0;d=s[p>>2]|0;if((d|0)==(n|0))break;else l=d}h=s[h+(n<<2)>>2]|0;if((l|0)==-1)i=12;else s[p>>2]=h}else{h=s[h+(n<<2)>>2]|0;i=12}if((i|0)==12)s[f>>2]=h;f=(s[e+8>>2]|0)+ -1|0;l=s[e+72>>2]|0;if((l|0)!=0)yD[s[(s[l>>2]|0)+12>>2]&31](l,u,a,r)|0;if((f|0)==(n|0)){s[e+8>>2]=(s[e+8>>2]|0)+ -1;d=t;c=o;return d|0}a=s[e+16>>2]|0;u=s[(s[a+(f<<4)+4>>2]|0)+12>>2]<<16|s[(s[a+(f<<4)>>2]|0)+12>>2];u=(u+~(u<<15)>>10^u+~(u<<15))*9|0;u=((u>>6^u)+~((u>>6^u)<<11)>>16^(u>>6^u)+~((u>>6^u)<<11))&(s[e+12>>2]|0)+ -1;r=(s[e+44>>2]|0)+(u<<2)|0;h=s[r>>2]|0;p=s[e+64>>2]|0;if((h|0)!=(f|0)){while(1){l=p+(h<<2)|0;d=s[l>>2]|0;if((d|0)==(f|0))break;else h=d}p=s[p+(f<<2)>>2]|0;if((h|0)==-1)i=22;else s[l>>2]=p}else{p=s[p+(f<<2)>>2]|0;i=22}if((i|0)==22)s[r>>2]=p;s[a+(n<<4)+0>>2]=s[a+(f<<4)+0>>2];s[a+(n<<4)+4>>2]=s[a+(f<<4)+4>>2];s[a+(n<<4)+8>>2]=s[a+(f<<4)+8>>2];s[a+(n<<4)+12>>2]=s[a+(f<<4)+12>>2];d=(s[e+44>>2]|0)+(u<<2)|0;s[(s[e+64>>2]|0)+(n<<2)>>2]=s[d>>2];s[d>>2]=n;s[e+8>>2]=(s[e+8>>2]|0)+ -1;d=t;c=o;return d|0}function jO(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,i=0,o=0,u=0;r=c;if((s[e+8>>2]|0)<=0){c=r;return}i=0;e:while(1){while(1){u=s[e+16>>2]|0;o=u+(i<<4)|0;if(!(DD[s[(s[t>>2]|0)+8>>2]&31](t,o)|0))break;yD[s[(s[e>>2]|0)+12>>2]&31](e,s[o>>2]|0,s[u+(i<<4)+4>>2]|0,n)|0;s[3808]=(s[3808]|0)+ -1;if((i|0)>=(s[e+8>>2]|0)){e=7;break e}}i=i+1|0;if((i|0)>=(s[e+8>>2]|0)){e=7;break}}if((e|0)==7){c=r;return}}function FO(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0;n=c;c=c+32|0;r[n+16>>0]=1;s[n+12>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;h=s[e+8>>2]|0;if((h|0)>0){f=0;i=0;l=0;o=0;while(1){u=s[e+16>>2]|0;if((i|0)==(l|0)){a=(l|0)==0?1:l<<1;if((l|0)<(a|0)){if((a|0)!=0){s[5004]=(s[5004]|0)+1;f=cM((a<<4|3)+16|0)|0;if((f|0)==0){f=0;l=i}else{s[(f+19&-16)+ -4>>2]=f;f=f+19&-16;l=i}}else f=0;if((l|0)>0){h=0;do{p=s[n+12>>2]|0;s[f+(h<<4)>>2]=s[p+(h<<4)>>2];s[f+(h<<4)+4>>2]=s[p+(h<<4)+4>>2];s[f+(h<<4)+8>>2]=s[p+(h<<4)+8>>2];s[f+(h<<4)+12>>2]=s[p+(h<<4)+12>>2];h=h+1|0}while((h|0)!=(l|0))}h=s[n+12>>2]|0;if((h|0)==0)i=l;else{s[5006]=(s[5006]|0)+1;hM(s[h+ -4>>2]|0);s[n+12>>2]=0}r[n+16>>0]=1;s[n+12>>2]=f;s[n+8>>2]=a;h=s[e+8>>2]|0;l=i}else a=l}else{a=l;l=i}s[f+(l<<4)>>2]=s[u+(o<<4)>>2];s[f+(l<<4)+4>>2]=s[u+(o<<4)+4>>2];s[f+(l<<4)+8>>2]=s[u+(o<<4)+8>>2];s[f+(l<<4)+12>>2]=s[u+(o<<4)+12>>2];i=l+1|0;o=o+1|0;if((o|0)>=(h|0))break;else l=a}s[n+4>>2]=i;if((l|0)>-1){o=0;do{yD[s[(s[e>>2]|0)+12>>2]&31](e,s[f+(o<<4)>>2]|0,s[f+(o<<4)+4>>2]|0,t)|0;o=o+1|0}while((o|0)<(i|0))}}else i=0;if((s[e+56>>2]|0)>0){t=s[e+64>>2]|0;o=0;do{s[t+(o<<2)>>2]=-1;o=o+1|0}while((o|0)<(s[e+56>>2]|0))}if((i|0)>1){Vv(n,0,i+ -1|0);i=s[n+4>>2]|0}if((i|0)>0){t=s[n+12>>2]|0;o=0;do{xD[s[(s[e>>2]|0)+8>>2]&31](e,s[t+(o<<4)>>2]|0,s[t+(o<<4)+4>>2]|0)|0;o=o+1|0}while((o|0)<(i|0))}else t=s[n+12>>2]|0;if((t|0)==0){c=n;return}if((r[n+16>>0]|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[t+ -4>>2]|0)}s[n+12>>2]=0;c=n;return}function IO(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,u=0,a=0,f=0,l=0,h=0;r=c;s[3812]=(s[3812]|0)+1;o=s[e+24>>2]|0;if((o|0)==0){if((i[n+6>>1]&i[t+4>>1])<<16>>16==0){h=0;c=r;return h|0}if((i[t+6>>1]&i[n+4>>1])<<16>>16==0){h=0;c=r;return h|0}}else if(!(xD[s[(s[o>>2]|0)+8>>2]&31](o,t,n)|0)){h=0;c=r;return h|0}a=(s[t+12>>2]|0)>(s[n+12>>2]|0);o=a?n:t;n=a?t:n;a=s[o+12>>2]|0;l=s[n+12>>2]|0;t=((l<<16|a)+~((l<<16|a)<<15)>>10^(l<<16|a)+~((l<<16|a)<<15))*9|0;t=(t>>6^t)+~((t>>6^t)<<11)>>16^(t>>6^t)+~((t>>6^t)<<11);u=s[e+12>>2]|0;h=s[(s[e+44>>2]|0)+((t&u+ -1)<<2)>>2]|0;e:do if(!((h|0)==-1)){f=s[e+16>>2]|0;while(1){if((s[(s[f+(h<<4)>>2]|0)+12>>2]|0)==(a|0)?(s[(s[f+(h<<4)+4>>2]|0)+12>>2]|0)==(l|0):0)break;h=s[(s[e+64>>2]|0)+(h<<2)>>2]|0;if((h|0)==-1)break e}a=f+(h<<4)|0;if((a|0)!=0){h=a;c=r;return h|0}}while(0);f=s[e+8>>2]|0;a=HO(e+4|0)|0;l=s[e+72>>2]|0;if((l|0)!=0)xD[s[(s[l>>2]|0)+8>>2]&31](l,o,n)|0;if((u|0)<(s[e+12>>2]|0)){LO(e);t=(s[e+12>>2]|0)+ -1&t}else t=t&u+ -1;if((s[o+12>>2]|0)<(s[n+12>>2]|0)){s[a>>2]=o;s[a+4>>2]=n}else{s[a>>2]=n;s[a+4>>2]=o}s[a+8>>2]=0;s[a+12>>2]=0;h=(s[e+44>>2]|0)+(t<<2)|0;s[(s[e+64>>2]|0)+(f<<2)>>2]=s[h>>2];s[h>>2]=f;h=a;c=r;return h|0}function qO(e){e=e|0;return s[e+16>>2]|0}function RO(e){e=e|0;return s[e+16>>2]|0}function UO(e){e=e|0;return e+4|0}function zO(e){e=e|0;return s[e+8>>2]|0}function WO(e,t){e=e|0;t=t|0;s[e+24>>2]=t;return}function XO(e){e=e|0;return 0}function VO(e,t){e=e|0;t=t|0;s[e+72>>2]=t;return}function $O(e){e=e|0;return}function JO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function KO(e,t){e=e|0;t=t|0;var n=0;n=c;e=s[e+4>>2]|0;if((s[t>>2]|0)==(e|0)){e=1;c=n;return e|0}e=(s[t+4>>2]|0)==(e|0);c=n;return e|0}function QO(e){e=e|0;return}function GO(e){e=e|0;var t=0;t=c;hM(e);c=t;return}function YO(e,t){e=e|0;t=t|0;var n=0,r=0;n=c;r=s[e+4>>2]|0;if((s[t>>2]|0)!=(r|0)?(s[t+4>>2]|0)!=(r|0):0){c=n;return 0}r=s[e+8>>2]|0;WD[s[(s[r>>2]|0)+32>>2]&127](r,t,s[e+12>>2]|0);c=n;return 0}function ZO(e,t){e=e|0;t=t|0;var n=0,r=0,i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0;n=c;i=s[e+748>>2]|0;if((i|0)!=4){s[e+748>>2]=i+1;N=i;l=(N|0)<0;N=l?0:N;l=e+(N*184|0)+4|0;yM(l|0,t|0,184)|0;c=n;return N|0}r=+f[t+80>>2];T=+f[e+84>>2];x=T<r?T:r;S=+f[e+268>>2];E=S<x?S:x;w=+f[e+452>>2];l=+f[e+636>>2]<(w<E?w:E);N=l?3:w<E?2:S<x?1:(T<r^1)<<31>>31;r=+f[t>>2];if((N|0)!=0){h=+f[e+188>>2];v=+f[t+4>>2];p=+f[e+192>>2];a=+f[t+8>>2];d=+f[e+196>>2];w=+f[e+556>>2];b=+f[e+372>>2];S=+f[e+560>>2];E=+f[e+376>>2];m=+f[e+564>>2];y=+f[e+380>>2];o=((r-h)*(S-E)-(v-p)*(w-b))*((r-h)*(S-E)-(v-p)*(w-b))+(((v-p)*(m-y)-(a-d)*(S-E))*((v-p)*(m-y)-(a-d)*(S-E))+((a-d)*(w-b)-(r-h)*(m-y))*((a-d)*(w-b)-(r-h)*(m-y)));if((N|0)==1){u=+f[e+12>>2];T=m;m=0;g=+f[e+4>>2];x=+f[e+8>>2];i=7}else{T=m;i=6}}else{h=+f[e+188>>2];p=+f[e+192>>2];d=+f[e+196>>2];o=0;v=+f[t+4>>2];a=+f[t+8>>2];b=+f[e+372>>2];w=+f[e+556>>2];E=+f[e+376>>2];S=+f[e+560>>2];y=+f[e+380>>2];T=+f[e+564>>2];i=6}if((i|0)==6){g=+f[e+4>>2];x=+f[e+8>>2];A=v-x;u=+f[e+12>>2];k=a-u;C=w-b;L=S-E;m=T-y;m=((r-g)*L-A*C)*((r-g)*L-A*C)+((A*m-k*L)*(A*m-k*L)+(k*C-(r-g)*m)*(k*C-(r-g)*m));if((N|0)==2){w=x;S=0;i=8}else i=7}if((i|0)==7){A=r-g;O=v-x;k=a-u;L=w-h;C=S-p;S=T-d;S=(A*C-O*L)*(A*C-O*L)+((O*S-k*C)*(O*S-k*C)+(k*L-A*S)*(k*L-A*S));if(l)r=0;else{w=x;i=8}}if((i|0)==8){O=r-g;C=v-w;L=a-u;A=b-h;k=E-p;r=y-d;r=(O*k-C*A)*(O*k-C*A)+((C*r-L*k)*(C*r-L*k)+(L*A-O*r)*(L*A-O*r))}O=+W(+o);L=+W(+m);C=+W(+S);T=+W(+r);A=O>-0xde0b6b000000000?O:-0xde0b6b000000000;k=L>A?L:A;N=T>(C>k?C:k)?3:C>k?2:L>A?1:(O>-0xde0b6b000000000^1)<<31>>31;l=(N|0)<0;N=l?0:N;l=e+(N*184|0)+4|0;yM(l|0,t|0,184)|0;c=n;return N|0}function eM(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0,a=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0;i=c;o=s[e+748>>2]|0;if((o|0)<=0){c=i;return}do{o=o+ -1|0;m=+f[e+(o*184|0)+4>>2];g=+f[e+(o*184|0)+8>>2];u=+f[e+(o*184|0)+12>>2];v=m*+f[t>>2]+g*+f[t+4>>2]+u*+f[t+8>>2]+ +f[t+48>>2];p=m*+f[t+16>>2]+g*+f[t+20>>2]+u*+f[t+24>>2]+ +f[t+52>>2];u=m*+f[t+32>>2]+g*+f[t+36>>2]+u*+f[t+40>>2]+ +f[t+56>>2];f[e+(o*184|0)+52>>2]=v;f[e+(o*184|0)+56>>2]=p;f[e+(o*184|0)+60>>2]=u;f[e+(o*184|0)+64>>2]=0;g=+f[e+(o*184|0)+20>>2];m=+f[e+(o*184|0)+24>>2];a=+f[e+(o*184|0)+28>>2];d=g*+f[n>>2]+m*+f[n+4>>2]+a*+f[n+8>>2]+ +f[n+48>>2];h=g*+f[n+16>>2]+m*+f[n+20>>2]+a*+f[n+24>>2]+ +f[n+52>>2];a=g*+f[n+32>>2]+m*+f[n+36>>2]+a*+f[n+40>>2]+ +f[n+56>>2];f[e+(o*184|0)+36>>2]=d;f[e+(o*184|0)+40>>2]=h;f[e+(o*184|0)+44>>2]=a;f[e+(o*184|0)+48>>2]=0;f[e+(o*184|0)+84>>2]=(v-d)*+f[e+(o*184|0)+68>>2]+(p-h)*+f[e+(o*184|0)+72>>2]+(u-a)*+f[e+(o*184|0)+76>>2];l=e+(o*184|0)+152|0;s[l>>2]=(s[l>>2]|0)+1}while((o|0)>0);t=s[e+748>>2]|0;if((t|0)<=0){c=i;return}n=t;do{t=t+ -1|0;o=e+(t*184|0)+4|0;a=+f[e+(t*184|0)+84>>2];u=+f[e+752>>2];if(a<=u){v=+f[e+(t*184|0)+36>>2]-(+f[e+(t*184|0)+52>>2]- +f[e+(t*184|0)+68>>2]*a);m=+f[e+(t*184|0)+40>>2]-(+f[e+(t*184|0)+56>>2]-a*+f[e+(t*184|0)+72>>2]);g=+f[e+(t*184|0)+44>>2]-(+f[e+(t*184|0)+60>>2]-a*+f[e+(t*184|0)+76>>2]);if(v*v+m*m+g*g>u*u){l=n+ -1|0;if((l|0)!=(t|0)){yM(o|0,e+(l*184|0)+4|0,184)|0;s[e+(l*184|0)+116>>2]=0;f[e+(l*184|0)+124>>2]=0;r[e+(l*184|0)+120>>0]=0;f[e+(l*184|0)+128>>2]=0;f[e+(l*184|0)+132>>2]=0;s[e+(l*184|0)+152>>2]=0;n=s[e+748>>2]|0}n=n+ -1|0;s[e+748>>2]=n}}else{l=n+ -1|0;if((l|0)!=(t|0)){yM(o|0,e+(l*184|0)+4|0,184)|0;s[e+(l*184|0)+116>>2]=0;f[e+(l*184|0)+124>>2]=0;r[e+(l*184|0)+120>>0]=0;f[e+(l*184|0)+128>>2]=0;f[e+(l*184|0)+132>>2]=0;s[e+(l*184|0)+152>>2]=0;n=s[e+748>>2]|0}n=n+ -1|0;s[e+748>>2]=n}}while((t|0)>0);c=i;return}function tM(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)!=0){lD[s[s[n>>2]>>2]&511](n);n=s[e+52>>2]|0;if((n|0)!=0){s[5006]=(s[5006]|0)+1;hM(s[n+ -4>>2]|0)}if((e|0)==0){c=t;return}}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function nM(e){e=e|0;var t=0,n=0;t=c;s[e>>2]=15736;n=s[e+52>>2]|0;if((n|0)==0){c=t;return}lD[s[s[n>>2]>>2]&511](n);e=s[e+52>>2]|0;if((e|0)==0){c=t;return}s[5006]=(s[5006]|0)+1;hM(s[e+ -4>>2]|0);c=t;return}function rM(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0;o=c;u=s[e+4>>2]|0;if((u&1|0)==0)a=u>>8;else a=s[(s[n>>2]|0)+(u>>8)>>2]|0;e=s[e>>2]|0;aD[s[(s[e>>2]|0)+24>>2]&31](e,t,n+a|0,(u&2|0)!=0?r:2,i);c=o;return}function iM(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;var u=0,a=0;u=c;if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)!=(n|0)){c=u;return}if((s[t+28>>2]|0)==1){c=u;return}s[t+28>>2]=i;c=u;return}if((e|0)!=(s[t>>2]|0)){e=s[e+8>>2]|0;aD[s[(s[e>>2]|0)+24>>2]&31](e,t,n,i,o);c=u;return}if((s[t+16>>2]|0)!=(n|0)?(s[t+20>>2]|0)!=(n|0):0){s[t+32>>2]=i;if((s[t+44>>2]|0)==4){c=u;return}r[t+52>>0]=0;r[t+53>>0]=0;e=s[e+8>>2]|0;TD[s[(s[e>>2]|0)+20>>2]&7](e,t,n,n,1,o);if((r[t+53>>0]|0)!=0){if((r[t+52>>0]|0)==0){i=1;a=13}}else{i=0;a=13}do if((a|0)==13){s[t+20>>2]=n;s[t+40>>2]=(s[t+40>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0){r[t+54>>0]=1;if(i)break}else a=16;if((a|0)==16?i:0)break;s[t+44>>2]=4;c=u;return}while(0);s[t+44>>2]=3;c=u;return}if((i|0)!=1){c=u;return}s[t+32>>2]=1;c=u;return}function sM(e,t,n,i,o){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;o=c;if((s[t+8>>2]|0)==(e|0)){if((s[t+4>>2]|0)!=(n|0)){c=o;return}if((s[t+28>>2]|0)==1){c=o;return}s[t+28>>2]=i;c=o;return}if((s[t>>2]|0)!=(e|0)){c=o;return}if((s[t+16>>2]|0)!=(n|0)?(s[t+20>>2]|0)!=(n|0):0){s[t+32>>2]=i;s[t+20>>2]=n;s[t+40>>2]=(s[t+40>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0)r[t+54>>0]=1;s[t+44>>2]=4;c=o;return}if((i|0)!=1){c=o;return}s[t+32>>2]=1;c=o;return}function oM(e,t,n,i,o,u){e=e|0;t=t|0;n=n|0;i=i|0;o=o|0;u=u|0;var a=0,f=0,l=0,h=0,p=0;a=c;if((e|0)==(s[t+8>>2]|0)){QC(t,n,i,o);c=a;return}f=r[t+52>>0]|0;l=r[t+53>>0]|0;h=s[e+12>>2]|0;r[t+52>>0]=0;r[t+53>>0]=0;YC(e+16|0,t,n,i,o,u);e:do if((h|0)>1){p=e+24|0;do{if((r[t+54>>0]|0)!=0)break e;if((r[t+52>>0]|0)==0){if((r[t+53>>0]|0)!=0?(s[e+8>>2]&1|0)==0:0)break e}else{if((s[t+24>>2]|0)==1)break e;if((s[e+8>>2]&2|0)==0)break e}r[t+52>>0]=0;r[t+53>>0]=0;YC(p,t,n,i,o,u);p=p+8|0}while(p>>>0<(e+(h<<3)+16|0)>>>0)}while(0);r[t+52>>0]=f;r[t+53>>0]=l;c=a;return}function uM(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;var u=0;u=c;if((e|0)==(s[t+8>>2]|0)){QC(t,n,r,i);c=u;return}else{e=s[e+8>>2]|0;TD[s[(s[e>>2]|0)+20>>2]&7](e,t,n,r,i,o);c=u;return}}function aM(e,t,n,r,i,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;o=o|0;o=c;if((s[t+8>>2]|0)!=(e|0)){c=o;return}QC(t,n,r,i);c=o;return}function fM(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;r=c;c=c+16|0;s[r>>2]=s[n>>2];t=xD[s[(s[e>>2]|0)+16>>2]&31](e,t,r)|0;if(!t){c=r;return t&1|0}s[n>>2]=s[r>>2];c=r;return t&1|0}function lM(e){e=e|0;var t=0;t=c;if((e|0)==0)e=0;else e=(KC(e,20896)|0)!=0;c=t;return e&1|0}function cM(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O=0;t=c;do if(e>>>0<245){if(e>>>0<11)d=16;else d=e+11&-8;w=d>>>3;v=s[5286]|0;if((v>>>w&3|0)!=0){r=s[21184+(((v>>>w&1^1)+w<<1)+2<<2)>>2]|0;n=s[r+8>>2]|0;do if((21184+((v>>>w&1^1)+w<<1<<2)|0)!=(n|0)){if(n>>>0<(s[5290]|0)>>>0)An();if((s[n+12>>2]|0)==(r|0)){s[n+12>>2]=21184+((v>>>w&1^1)+w<<1<<2);s[21184+(((v>>>w&1^1)+w<<1)+2<<2)>>2]=n;break}else An()}else s[5286]=v&~(1<<(v>>>w&1^1)+w);while(0);s[r+4>>2]=(v>>>w&1^1)+w<<3|3;s[r+((v>>>w&1^1)+w<<3|4)>>2]=s[r+((v>>>w&1^1)+w<<3|4)>>2]|1;O=r+8|0;c=t;return O|0}if(d>>>0>(s[5288]|0)>>>0){if((v>>>w|0)!=0){r=(v>>>w<<w&(2<<w|0-(2<<w))&0-(v>>>w<<w&(2<<w|0-(2<<w))))+ -1|0;n=r>>>(r>>>12&16)>>>(r>>>(r>>>12&16)>>>5&8);o=n>>>(n>>>2&4)>>>(n>>>(n>>>2&4)>>>1&2);o=(r>>>(r>>>12&16)>>>5&8|r>>>12&16|n>>>2&4|n>>>(n>>>2&4)>>>1&2|o>>>1&1)+(o>>>(o>>>1&1))|0;n=s[21184+((o<<1)+2<<2)>>2]|0;r=s[n+8>>2]|0;do if((21184+(o<<1<<2)|0)!=(r|0)){if(r>>>0<(s[5290]|0)>>>0)An();if((s[r+12>>2]|0)==(n|0)){s[r+12>>2]=21184+(o<<1<<2);s[21184+((o<<1)+2<<2)>>2]=r;break}else An()}else s[5286]=v&~(1<<o);while(0);i=(o<<3)-d|0;s[n+4>>2]=d|3;r=n+d|0;s[n+(d|4)>>2]=i|1;s[n+(o<<3)>>2]=i;u=s[5288]|0;if((u|0)!=0){o=s[5291]|0;a=s[5286]|0;if((a&1<<(u>>>3)|0)!=0){a=s[21184+((u>>>3<<1)+2<<2)>>2]|0;if(a>>>0<(s[5290]|0)>>>0)An();else{L=21184+((u>>>3<<1)+2<<2)|0;k=a}}else{s[5286]=a|1<<(u>>>3);L=21184+((u>>>3<<1)+2<<2)|0;k=21184+(u>>>3<<1<<2)|0}s[L>>2]=o;s[k+12>>2]=o;s[o+8>>2]=k;s[o+12>>2]=21184+(u>>>3<<1<<2)}s[5288]=i;s[5291]=r;O=n+8|0;c=t;return O|0}v=s[5287]|0;if((v|0)!=0){r=((v&0-v)+ -1|0)>>>(((v&0-v)+ -1|0)>>>12&16);n=r>>>(r>>>5&8)>>>(r>>>(r>>>5&8)>>>2&4);n=s[21448+((r>>>5&8|((v&0-v)+ -1|0)>>>12&16|r>>>(r>>>5&8)>>>2&4|n>>>1&2|n>>>(n>>>1&2)>>>1&1)+(n>>>(n>>>1&2)>>>(n>>>(n>>>1&2)>>>1&1))<<2)>>2]|0;r=(s[n+4>>2]&-8)-d|0;i=n;while(1){o=s[i+16>>2]|0;if((o|0)==0){o=s[i+20>>2]|0;if((o|0)==0)break}i=(s[o+4>>2]&-8)-d|0;O=i>>>0<r>>>0;r=O?i:r;i=o;n=O?o:n}u=s[5290]|0;if(n>>>0<u>>>0)An();i=n+d|0;if(!(n>>>0<i>>>0))An();o=s[n+24>>2]|0;a=s[n+12>>2]|0;do if((a|0)==(n|0)){f=n+20|0;a=s[f>>2]|0;if((a|0)==0){f=n+16|0;a=s[f>>2]|0;if((a|0)==0){C=0;break}}while(1){l=a+20|0;h=s[l>>2]|0;if((h|0)!=0){a=h;f=l;continue}h=a+16|0;l=s[h>>2]|0;if((l|0)==0)break;else{a=l;f=h}}if(f>>>0<u>>>0)An();else{s[f>>2]=0;C=a;break}}else{f=s[n+8>>2]|0;if(f>>>0<u>>>0)An();if((s[f+12>>2]|0)!=(n|0))An();if((s[a+8>>2]|0)==(n|0)){s[f+12>>2]=a;s[a+8>>2]=f;C=a;break}else An()}while(0);do if((o|0)!=0){u=s[n+28>>2]|0;if((n|0)==(s[21448+(u<<2)>>2]|0)){s[21448+(u<<2)>>2]=C;if((C|0)==0){s[5287]=s[5287]&~(1<<u);break}}else{if(o>>>0<(s[5290]|0)>>>0)An();if((s[o+16>>2]|0)==(n|0))s[o+16>>2]=C;else s[o+20>>2]=C;if((C|0)==0)break}if(C>>>0<(s[5290]|0)>>>0)An();s[C+24>>2]=o;o=s[n+16>>2]|0;do if((o|0)!=0)if(o>>>0<(s[5290]|0)>>>0)An();else{s[C+16>>2]=o;s[o+24>>2]=C;break}while(0);o=s[n+20>>2]|0;if((o|0)!=0)if(o>>>0<(s[5290]|0)>>>0)An();else{s[C+20>>2]=o;s[o+24>>2]=C;break}}while(0);if(r>>>0<16){O=r+d|0;s[n+4>>2]=O|3;O=n+(O+4)|0;s[O>>2]=s[O>>2]|1}else{s[n+4>>2]=d|3;s[n+(d|4)>>2]=r|1;s[n+(r+d)>>2]=r;o=s[5288]|0;if((o|0)!=0){u=s[5291]|0;a=s[5286]|0;if((a&1<<(o>>>3)|0)!=0){a=s[21184+((o>>>3<<1)+2<<2)>>2]|0;if(a>>>0<(s[5290]|0)>>>0)An();else{N=21184+((o>>>3<<1)+2<<2)|0;T=a}}else{s[5286]=a|1<<(o>>>3);N=21184+((o>>>3<<1)+2<<2)|0;T=21184+(o>>>3<<1<<2)|0}s[N>>2]=u;s[T+12>>2]=u;s[u+8>>2]=T;s[u+12>>2]=21184+(o>>>3<<1<<2)}s[5288]=r;s[5291]=i}O=n+8|0;c=t;return O|0}}}else if(!(e>>>0>4294967231)){d=e+11&-8;C=s[5287]|0;if((C|0)!=0){if(((e+11|0)>>>8|0)!=0)if(d>>>0>16777215)k=31;else{k=(e+11|0)>>>8<<((((e+11|0)>>>8)+1048320|0)>>>16&8);k=14-((k+520192|0)>>>16&4|(((e+11|0)>>>8)+1048320|0)>>>16&8|((k<<((k+520192|0)>>>16&4))+245760|0)>>>16&2)+(k<<((k+520192|0)>>>16&4)<<(((k<<((k+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;k=d>>>(k+7|0)&1|k<<1}else k=0;L=s[21448+(k<<2)>>2]|0;e:do if((L|0)==0){N=0-d|0;e=0;T=0}else{if((k|0)==31)T=0;else T=25-(k>>>1)|0;N=0-d|0;e=0;A=d<<T;T=0;while(1){O=s[L+4>>2]&-8;if((O-d|0)>>>0<N>>>0)if((O|0)==(d|0)){N=O-d|0;e=L;T=L;break e}else{N=O-d|0;T=L}O=s[L+20>>2]|0;L=s[L+(A>>>31<<2)+16>>2]|0;e=(O|0)==0|(O|0)==(L|0)?e:O;if((L|0)==0)break;else A=A<<1}}while(0);if((e|0)==0&(T|0)==0){k=2<<k;if((C&(k|0-k)|0)==0)break;A=(C&(k|0-k)&0-(C&(k|0-k)))+ -1|0;O=A>>>(A>>>12&16)>>>(A>>>(A>>>12&16)>>>5&8);e=O>>>(O>>>2&4)>>>(O>>>(O>>>2&4)>>>1&2);e=s[21448+((A>>>(A>>>12&16)>>>5&8|A>>>12&16|O>>>2&4|O>>>(O>>>2&4)>>>1&2|e>>>1&1)+(e>>>(e>>>1&1))<<2)>>2]|0}if((e|0)!=0)while(1){O=(s[e+4>>2]&-8)-d|0;C=O>>>0<N>>>0;N=C?O:N;T=C?e:T;C=s[e+16>>2]|0;if((C|0)!=0){e=C;continue}e=s[e+20>>2]|0;if((e|0)==0)break}if((T|0)!=0?N>>>0<((s[5288]|0)-d|0)>>>0:0){i=s[5290]|0;if(T>>>0<i>>>0)An();n=T+d|0;if(!(T>>>0<n>>>0))An();r=s[T+24>>2]|0;o=s[T+12>>2]|0;do if((o|0)==(T|0)){u=T+20|0;o=s[u>>2]|0;if((o|0)==0){u=T+16|0;o=s[u>>2]|0;if((o|0)==0){x=0;break}}while(1){f=o+20|0;a=s[f>>2]|0;if((a|0)!=0){o=a;u=f;continue}f=o+16|0;a=s[f>>2]|0;if((a|0)==0)break;else{o=a;u=f}}if(u>>>0<i>>>0)An();else{s[u>>2]=0;x=o;break}}else{u=s[T+8>>2]|0;if(u>>>0<i>>>0)An();if((s[u+12>>2]|0)!=(T|0))An();if((s[o+8>>2]|0)==(T|0)){s[u+12>>2]=o;s[o+8>>2]=u;x=o;break}else An()}while(0);do if((r|0)!=0){i=s[T+28>>2]|0;if((T|0)==(s[21448+(i<<2)>>2]|0)){s[21448+(i<<2)>>2]=x;if((x|0)==0){s[5287]=s[5287]&~(1<<i);break}}else{if(r>>>0<(s[5290]|0)>>>0)An();if((s[r+16>>2]|0)==(T|0))s[r+16>>2]=x;else s[r+20>>2]=x;if((x|0)==0)break}if(x>>>0<(s[5290]|0)>>>0)An();s[x+24>>2]=r;r=s[T+16>>2]|0;do if((r|0)!=0)if(r>>>0<(s[5290]|0)>>>0)An();else{s[x+16>>2]=r;s[r+24>>2]=x;break}while(0);r=s[T+20>>2]|0;if((r|0)!=0)if(r>>>0<(s[5290]|0)>>>0)An();else{s[x+20>>2]=r;s[r+24>>2]=x;break}}while(0);t:do if(!(N>>>0<16)){s[T+4>>2]=d|3;s[T+(d|4)>>2]=N|1;s[T+(N+d)>>2]=N;r=N>>>3;if(N>>>0<256){i=s[5286]|0;do if((i&1<<r|0)==0){s[5286]=i|1<<r;E=21184+((r<<1)+2<<2)|0;w=21184+(r<<1<<2)|0}else{i=s[21184+((r<<1)+2<<2)>>2]|0;if(!(i>>>0<(s[5290]|0)>>>0)){E=21184+((r<<1)+2<<2)|0;w=i;break}An()}while(0);s[E>>2]=n;s[w+12>>2]=n;s[T+(d+8)>>2]=w;s[T+(d+12)>>2]=21184+(r<<1<<2);break}r=N>>>8;if((r|0)!=0)if(N>>>0>16777215)r=31;else{O=r<<((r+1048320|0)>>>16&8)<<(((r<<((r+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((r<<((r+1048320|0)>>>16&8))+520192|0)>>>16&4|(r+1048320|0)>>>16&8|(O+245760|0)>>>16&2)+(O<<((O+245760|0)>>>16&2)>>>15)|0;r=N>>>(r+7|0)&1|r<<1}else r=0;i=21448+(r<<2)|0;s[T+(d+28)>>2]=r;s[T+(d+20)>>2]=0;s[T+(d+16)>>2]=0;u=s[5287]|0;o=1<<r;if((u&o|0)==0){s[5287]=u|o;s[i>>2]=n;s[T+(d+24)>>2]=i;s[T+(d+12)>>2]=n;s[T+(d+8)>>2]=n;break}i=s[i>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;n:do if((s[i+4>>2]&-8|0)!=(N|0)){r=N<<r;while(1){o=i+(r>>>31<<2)+16|0;u=s[o>>2]|0;if((u|0)==0)break;if((s[u+4>>2]&-8|0)==(N|0)){v=u;break n}else{r=r<<1;i=u}}if(o>>>0<(s[5290]|0)>>>0)An();else{s[o>>2]=n;s[T+(d+24)>>2]=i;s[T+(d+12)>>2]=n;s[T+(d+8)>>2]=n;break t}}else v=i;while(0);r=v+8|0;i=s[r>>2]|0;o=s[5290]|0;if(v>>>0<o>>>0)An();if(i>>>0<o>>>0)An();else{s[i+12>>2]=n;s[r>>2]=n;s[T+(d+8)>>2]=i;s[T+(d+12)>>2]=v;s[T+(d+24)>>2]=0;break}}else{O=N+d|0;s[T+4>>2]=O|3;O=T+(O+4)|0;s[O>>2]=s[O>>2]|1}while(0);O=T+8|0;c=t;return O|0}}}else d=-1;while(0);v=s[5288]|0;if(!(d>>>0>v>>>0)){n=v-d|0;r=s[5291]|0;if(n>>>0>15){s[5291]=r+d;s[5288]=n;s[r+(d+4)>>2]=n|1;s[r+v>>2]=n;s[r+4>>2]=d|3}else{s[5288]=0;s[5291]=0;s[r+4>>2]=v|3;s[r+(v+4)>>2]=s[r+(v+4)>>2]|1}O=r+8|0;c=t;return O|0}v=s[5289]|0;if(d>>>0<v>>>0){A=v-d|0;s[5289]=A;O=s[5292]|0;s[5292]=O+d;s[O+(d+4)>>2]=A|1;s[O+4>>2]=d|3;O=O+8|0;c=t;return O|0}do if((s[5404]|0)==0){v=gn(30)|0;if((v+ -1&v|0)==0){s[5406]=v;s[5405]=v;s[5407]=-1;s[5408]=-1;s[5409]=0;s[5397]=0;s[5404]=(_n(0)|0)&-16^1431655768;break}else An()}while(0);E=d+48|0;v=s[5406]|0;x=d+47|0;w=v+x&0-v;if(!(w>>>0>d>>>0)){O=0;c=t;return O|0}T=s[5396]|0;if((T|0)!=0?(O=s[5394]|0,(O+w|0)>>>0<=O>>>0|(O+w|0)>>>0>T>>>0):0){O=0;c=t;return O|0}r:do if((s[5397]&4|0)==0){T=s[5292]|0;i:do if((T|0)!=0){N=21592|0;while(1){C=s[N>>2]|0;if(!(C>>>0>T>>>0)?(S=N+4|0,(C+(s[S>>2]|0)|0)>>>0>T>>>0):0)break;N=s[N+8>>2]|0;if((N|0)==0){p=182;break i}}if((N|0)!=0){C=v+x-(s[5289]|0)&0-v;if(C>>>0<2147483647){v=ln(C|0)|0;N=(v|0)==((s[N>>2]|0)+(s[S>>2]|0)|0);S=v;T=C;v=N?v:-1;N=N?C:0;p=191}else N=0}else p=182}else p=182;while(0);do if((p|0)==182){N=ln(0)|0;if((N|0)!=(-1|0)){v=s[5405]|0;if((v+ -1&N|0)==0)C=w;else C=w-N+(v+ -1+N&0-v)|0;S=s[5394]|0;v=S+C|0;if(C>>>0>d>>>0&C>>>0<2147483647){O=s[5396]|0;if((O|0)!=0?v>>>0<=S>>>0|v>>>0>O>>>0:0){N=0;break}p=ln(C|0)|0;S=p;T=C;v=(p|0)==(N|0)?N:-1;N=(p|0)==(N|0)?C:0;p=191}else N=0}else N=0}while(0);s:do if((p|0)==191){p=0-T|0;if((v|0)!=(-1|0)){m=N;p=202;break r}do if((S|0)!=(-1|0)&T>>>0<2147483647&T>>>0<E>>>0?(b=s[5406]|0,b=x-T+b&0-b,b>>>0<2147483647):0)if((ln(b|0)|0)==(-1|0)){ln(p|0)|0;break s}else{T=b+T|0;break}while(0);if((S|0)!=(-1|0)){v=S;m=T;p=202;break r}}while(0);s[5397]=s[5397]|4;p=199}else{N=0;p=199}while(0);if((((p|0)==199?w>>>0<2147483647:0)?(y=ln(w|0)|0,g=ln(0)|0,(g|0)!=(-1|0)&(y|0)!=(-1|0)&y>>>0<g>>>0):0)?(m=(g-y|0)>>>0>(d+40|0)>>>0,m):0){v=y;m=m?g-y|0:N;p=202}if((p|0)==202){g=(s[5394]|0)+m|0;s[5394]=g;if(g>>>0>(s[5395]|0)>>>0)s[5395]=g;g=s[5292]|0;o:do if((g|0)!=0){S=21592|0;while(1){b=s[S>>2]|0;w=S+4|0;E=s[w>>2]|0;if((v|0)==(b+E|0)){p=214;break}y=s[S+8>>2]|0;if((y|0)==0)break;else S=y}if(((p|0)==214?(s[S+12>>2]&8|0)==0:0)?g>>>0>=b>>>0&g>>>0<v>>>0:0){s[w>>2]=E+m;r=(s[5289]|0)+m|0;if((g+8&7|0)==0)n=0;else n=0-(g+8)&7;O=r-n|0;s[5292]=g+n;s[5289]=O;s[g+(n+4)>>2]=O|1;s[g+(r+4)>>2]=40;s[5293]=s[5408];break}if(v>>>0<(s[5290]|0)>>>0)s[5290]=v;b=v+m|0;y=21592|0;while(1){if((s[y>>2]|0)==(b|0)){p=224;break}w=s[y+8>>2]|0;if((w|0)==0)break;else y=w}if((p|0)==224?(s[y+12>>2]&8|0)==0:0){s[y>>2]=v;u=y+4|0;s[u>>2]=(s[u>>2]|0)+m;u=v+8|0;if((u&7|0)==0)u=0;else u=0-u&7;f=v+(m+8)|0;if((f&7|0)==0)g=0;else g=0-f&7;y=v+(g+m)|0;f=u+d|0;l=v+f|0;h=y-(v+u)-d|0;s[v+(u+4)>>2]=d|3;u:do if((y|0)!=(s[5292]|0)){if((y|0)==(s[5291]|0)){O=(s[5288]|0)+h|0;s[5288]=O;s[5291]=l;s[v+(f+4)>>2]=O|1;s[v+(O+f)>>2]=O;break}d=m+4|0;p=s[v+(d+g)>>2]|0;if((p&3|0)==1){a:do if(!(p>>>0<256)){a=s[v+((g|24)+m)>>2]|0;w=s[v+(m+12+g)>>2]|0;do if((w|0)==(y|0)){E=g|16;w=v+(d+E)|0;b=s[w>>2]|0;if((b|0)==0){w=v+(E+m)|0;b=s[w>>2]|0;if((b|0)==0){o=0;break}}while(1){E=b+20|0;S=s[E>>2]|0;if((S|0)!=0){b=S;w=E;continue}E=b+16|0;S=s[E>>2]|0;if((S|0)==0)break;else{b=S;w=E}}if(w>>>0<(s[5290]|0)>>>0)An();else{s[w>>2]=0;o=b;break}}else{b=s[v+((g|8)+m)>>2]|0;if(b>>>0<(s[5290]|0)>>>0)An();if((s[b+12>>2]|0)!=(y|0))An();if((s[w+8>>2]|0)==(y|0)){s[b+12>>2]=w;s[w+8>>2]=b;o=w;break}else An()}while(0);if((a|0)==0)break;b=s[v+(m+28+g)>>2]|0;do if((y|0)!=(s[21448+(b<<2)>>2]|0)){if(a>>>0<(s[5290]|0)>>>0)An();if((s[a+16>>2]|0)==(y|0))s[a+16>>2]=o;else s[a+20>>2]=o;if((o|0)==0)break a}else{s[21448+(b<<2)>>2]=o;if((o|0)!=0)break;s[5287]=s[5287]&~(1<<b);break a}while(0);if(o>>>0<(s[5290]|0)>>>0)An();s[o+24>>2]=a;a=g|16;y=s[v+(a+m)>>2]|0;do if((y|0)!=0)if(y>>>0<(s[5290]|0)>>>0)An();else{s[o+16>>2]=y;s[y+24>>2]=o;break}while(0);a=s[v+(d+a)>>2]|0;if((a|0)==0)break;if(a>>>0<(s[5290]|0)>>>0)An();else{s[o+20>>2]=a;s[a+24>>2]=o;break}}else{o=s[v+((g|8)+m)>>2]|0;d=s[v+(m+12+g)>>2]|0;do if((o|0)!=(21184+(p>>>3<<1<<2)|0)){if(o>>>0<(s[5290]|0)>>>0)An();if((s[o+12>>2]|0)==(y|0))break;An()}while(0);if((d|0)==(o|0)){s[5286]=s[5286]&~(1<<(p>>>3));break}do if((d|0)==(21184+(p>>>3<<1<<2)|0))a=d+8|0;else{if(d>>>0<(s[5290]|0)>>>0)An();if((s[d+8>>2]|0)==(y|0)){a=d+8|0;break}An()}while(0);s[o+12>>2]=d;s[a>>2]=o}while(0);y=v+((p&-8|g)+m)|0;h=(p&-8)+h|0}o=y+4|0;s[o>>2]=s[o>>2]&-2;s[v+(f+4)>>2]=h|1;s[v+(h+f)>>2]=h;o=h>>>3;if(h>>>0<256){n=s[5286]|0;do if((n&1<<o|0)==0){s[5286]=n|1<<o;i=21184+((o<<1)+2<<2)|0;r=21184+(o<<1<<2)|0}else{n=s[21184+((o<<1)+2<<2)>>2]|0;if(!(n>>>0<(s[5290]|0)>>>0)){i=21184+((o<<1)+2<<2)|0;r=n;break}An()}while(0);s[i>>2]=l;s[r+12>>2]=l;s[v+(f+8)>>2]=r;s[v+(f+12)>>2]=21184+(o<<1<<2);break}r=h>>>8;do if((r|0)==0)r=0;else{if(h>>>0>16777215){r=31;break}O=r<<((r+1048320|0)>>>16&8)<<(((r<<((r+1048320|0)>>>16&8))+520192|0)>>>16&4);r=14-(((r<<((r+1048320|0)>>>16&8))+520192|0)>>>16&4|(r+1048320|0)>>>16&8|(O+245760|0)>>>16&2)+(O<<((O+245760|0)>>>16&2)>>>15)|0;r=h>>>(r+7|0)&1|r<<1}while(0);a=21448+(r<<2)|0;s[v+(f+28)>>2]=r;s[v+(f+20)>>2]=0;s[v+(f+16)>>2]=0;i=s[5287]|0;o=1<<r;if((i&o|0)==0){s[5287]=i|o;s[a>>2]=l;s[v+(f+24)>>2]=a;s[v+(f+12)>>2]=l;s[v+(f+8)>>2]=l;break}i=s[a>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;f:do if((s[i+4>>2]&-8|0)!=(h|0)){r=h<<r;while(1){o=i+(r>>>31<<2)+16|0;a=s[o>>2]|0;if((a|0)==0)break;if((s[a+4>>2]&-8|0)==(h|0)){n=a;break f}else{r=r<<1;i=a}}if(o>>>0<(s[5290]|0)>>>0)An();else{s[o>>2]=l;s[v+(f+24)>>2]=i;s[v+(f+12)>>2]=l;s[v+(f+8)>>2]=l;break u}}else n=i;while(0);i=n+8|0;r=s[i>>2]|0;o=s[5290]|0;if(n>>>0<o>>>0)An();if(r>>>0<o>>>0)An();else{s[r+12>>2]=l;s[i>>2]=l;s[v+(f+8)>>2]=r;s[v+(f+12)>>2]=n;s[v+(f+24)>>2]=0;break}}else{O=(s[5289]|0)+h|0;s[5289]=O;s[5292]=l;s[v+(f+4)>>2]=O|1}while(0);O=v+(u|8)|0;c=t;return O|0}n=21592|0;while(1){r=s[n>>2]|0;if(!(r>>>0>g>>>0)?(h=s[n+4>>2]|0,(r+h|0)>>>0>g>>>0):0)break;n=s[n+8>>2]|0}if((r+(h+ -39)&7|0)==0)n=0;else n=0-(r+(h+ -39))&7;n=r+(h+ -47+n)|0;n=n>>>0<(g+16|0)>>>0?g:n;i=v+8|0;if((i&7|0)==0)i=0;else i=0-i&7;O=m+ -40-i|0;s[5292]=v+i;s[5289]=O;s[v+(i+4)>>2]=O|1;s[v+(m+ -36)>>2]=40;s[5293]=s[5408];s[n+4>>2]=27;s[n+8>>2]=s[5398];s[n+12>>2]=s[5399];s[n+16>>2]=s[5400];s[n+20>>2]=s[5401];s[5398]=v;s[5399]=m;s[5401]=0;s[5400]=n+8;s[n+28>>2]=7;if((n+32|0)>>>0<(r+h|0)>>>0){i=n+28|0;do{O=i;i=i+4|0;s[i>>2]=7}while((O+8|0)>>>0<(r+h|0)>>>0)}if((n|0)!=(g|0)){s[g+(n-g+4)>>2]=s[g+(n-g+4)>>2]&-2;s[g+4>>2]=n-g|1;s[g+(n-g)>>2]=n-g;if((n-g|0)>>>0<256){r=s[5286]|0;do if((r&1<<((n-g|0)>>>3)|0)==0){s[5286]=r|1<<((n-g|0)>>>3);l=21184+(((n-g|0)>>>3<<1)+2<<2)|0;f=21184+((n-g|0)>>>3<<1<<2)|0}else{r=s[21184+(((n-g|0)>>>3<<1)+2<<2)>>2]|0;if(!(r>>>0<(s[5290]|0)>>>0)){l=21184+(((n-g|0)>>>3<<1)+2<<2)|0;f=r;break}An()}while(0);s[l>>2]=g;s[f+12>>2]=g;s[g+8>>2]=f;s[g+12>>2]=21184+((n-g|0)>>>3<<1<<2);break}if(((n-g|0)>>>8|0)!=0)if((n-g|0)>>>0>16777215)r=31;else{r=(n-g|0)>>>8<<((((n-g|0)>>>8)+1048320|0)>>>16&8);r=14-((r+520192|0)>>>16&4|(((n-g|0)>>>8)+1048320|0)>>>16&8|((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)+(r<<((r+520192|0)>>>16&4)<<(((r<<((r+520192|0)>>>16&4))+245760|0)>>>16&2)>>>15)|0;r=(n-g|0)>>>(r+7|0)&1|r<<1}else r=0;a=21448+(r<<2)|0;s[g+28>>2]=r;s[g+20>>2]=0;s[g+16>>2]=0;i=s[5287]|0;o=1<<r;if((i&o|0)==0){s[5287]=i|o;s[a>>2]=g;s[g+24>>2]=a;s[g+12>>2]=g;s[g+8>>2]=g;break}o=s[a>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;l:do if((s[o+4>>2]&-8|0)!=(n-g|0)){r=n-g<<r;while(1){i=o+(r>>>31<<2)+16|0;a=s[i>>2]|0;if((a|0)==0)break;if((s[a+4>>2]&-8|0)==(n-g|0)){u=a;break l}else{r=r<<1;o=a}}if(i>>>0<(s[5290]|0)>>>0)An();else{s[i>>2]=g;s[g+24>>2]=o;s[g+12>>2]=g;s[g+8>>2]=g;break o}}else u=o;while(0);r=u+8|0;n=s[r>>2]|0;i=s[5290]|0;if(u>>>0<i>>>0)An();if(n>>>0<i>>>0)An();else{s[n+12>>2]=g;s[r>>2]=g;s[g+8>>2]=n;s[g+12>>2]=u;s[g+24>>2]=0;break}}}else{O=s[5290]|0;if((O|0)==0|v>>>0<O>>>0)s[5290]=v;s[5398]=v;s[5399]=m;s[5401]=0;s[5295]=s[5404];s[5294]=-1;n=0;do{O=n<<1;s[21184+(O+3<<2)>>2]=21184+(O<<2);s[21184+(O+2<<2)>>2]=21184+(O<<2);n=n+1|0}while((n|0)!=32);n=v+8|0;if((n&7|0)==0)n=0;else n=0-n&7;O=m+ -40-n|0;s[5292]=v+n;s[5289]=O;s[v+(n+4)>>2]=O|1;s[v+(m+ -36)>>2]=40;s[5293]=s[5408]}while(0);n=s[5289]|0;if(n>>>0>d>>>0){A=n-d|0;s[5289]=A;O=s[5292]|0;s[5292]=O+d;s[O+(d+4)>>2]=A|1;s[O+4>>2]=d|3;O=O+8|0;c=t;return O|0}}s[(Nn()|0)>>2]=12;O=0;c=t;return O|0}function hM(e){e=e|0;var t=0,n=0,r=0,i=0,o=0,u=0,a=0,f=0,l=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0;t=c;if((e|0)==0){c=t;return}g=s[5290]|0;if((e+ -8|0)>>>0<g>>>0)An();u=s[e+ -4>>2]|0;if((u&3|0)==1)An();f=e+((u&-8)+ -8)|0;do if((u&1|0)==0){d=s[e+ -8>>2]|0;if((u&3|0)==0){c=t;return}h=e+(-8-d)|0;p=d+(u&-8)|0;if(h>>>0<g>>>0)An();if((h|0)==(s[5291]|0)){if((s[e+((u&-8)+ -4)>>2]&3|0)!=3){n=h;v=p;break}s[5288]=p;s[e+((u&-8)+ -4)>>2]=s[e+((u&-8)+ -4)>>2]&-2;s[e+(-8-d+4)>>2]=p|1;s[f>>2]=p;c=t;return}if(d>>>0<256){v=s[e+(-8-d+8)>>2]|0;n=s[e+(-8-d+12)>>2]|0;if((v|0)!=(21184+(d>>>3<<1<<2)|0)){if(v>>>0<g>>>0)An();if((s[v+12>>2]|0)!=(h|0))An()}if((n|0)==(v|0)){s[5286]=s[5286]&~(1<<(d>>>3));n=h;v=p;break}if((n|0)!=(21184+(d>>>3<<1<<2)|0)){if(n>>>0<g>>>0)An();if((s[n+8>>2]|0)!=(h|0))An();else y=n+8|0}else y=n+8|0;s[v+12>>2]=n;s[y>>2]=v;n=h;v=p;break}y=s[e+(-8-d+24)>>2]|0;w=s[e+(-8-d+12)>>2]|0;do if((w|0)==(h|0)){w=s[e+(-8-d+20)>>2]|0;if((w|0)==0){w=s[e+(-8-d+16)>>2]|0;if((w|0)==0){m=0;break}else b=e+(-8-d+16)|0}else b=e+(-8-d+20)|0;while(1){S=w+20|0;E=s[S>>2]|0;if((E|0)!=0){w=E;b=S;continue}S=w+16|0;E=s[S>>2]|0;if((E|0)==0)break;else{w=E;b=S}}if(b>>>0<g>>>0)An();else{s[b>>2]=0;m=w;break}}else{b=s[e+(-8-d+8)>>2]|0;if(b>>>0<g>>>0)An();if((s[b+12>>2]|0)!=(h|0))An();if((s[w+8>>2]|0)==(h|0)){s[b+12>>2]=w;s[w+8>>2]=b;m=w;break}else An()}while(0);if((y|0)!=0){g=s[e+(-8-d+28)>>2]|0;if((h|0)==(s[21448+(g<<2)>>2]|0)){s[21448+(g<<2)>>2]=m;if((m|0)==0){s[5287]=s[5287]&~(1<<g);n=h;v=p;break}}else{if(y>>>0<(s[5290]|0)>>>0)An();if((s[y+16>>2]|0)==(h|0))s[y+16>>2]=m;else s[y+20>>2]=m;if((m|0)==0){n=h;v=p;break}}if(m>>>0<(s[5290]|0)>>>0)An();s[m+24>>2]=y;g=s[e+(-8-d+16)>>2]|0;do if((g|0)!=0)if(g>>>0<(s[5290]|0)>>>0)An();else{s[m+16>>2]=g;s[g+24>>2]=m;break}while(0);d=s[e+(-8-d+20)>>2]|0;if((d|0)!=0)if(d>>>0<(s[5290]|0)>>>0)An();else{s[m+20>>2]=d;s[d+24>>2]=m;n=h;v=p;break}else{n=h;v=p}}else{n=h;v=p}}else{n=e+ -8|0;v=u&-8}while(0);if(!(n>>>0<f>>>0))An();h=s[e+((u&-8)+ -4)>>2]|0;if((h&1|0)==0)An();if((h&2|0)==0){if((f|0)==(s[5292]|0)){S=(s[5289]|0)+v|0;s[5289]=S;s[5292]=n;s[n+4>>2]=S|1;if((n|0)!=(s[5291]|0)){c=t;return}s[5291]=0;s[5288]=0;c=t;return}if((f|0)==(s[5291]|0)){S=(s[5288]|0)+v|0;s[5288]=S;s[5291]=n;s[n+4>>2]=S|1;s[n+S>>2]=S;c=t;return}v=(h&-8)+v|0;do if(!(h>>>0<256)){l=s[e+((u&-8)+16)>>2]|0;p=s[e+(u&-8|4)>>2]|0;do if((p|0)==(f|0)){p=s[e+((u&-8)+12)>>2]|0;if((p|0)==0){p=s[e+((u&-8)+8)>>2]|0;if((p|0)==0){a=0;break}else h=e+((u&-8)+8)|0}else h=e+((u&-8)+12)|0;while(1){d=p+20|0;m=s[d>>2]|0;if((m|0)!=0){p=m;h=d;continue}d=p+16|0;m=s[d>>2]|0;if((m|0)==0)break;else{p=m;h=d}}if(h>>>0<(s[5290]|0)>>>0)An();else{s[h>>2]=0;a=p;break}}else{h=s[e+(u&-8)>>2]|0;if(h>>>0<(s[5290]|0)>>>0)An();if((s[h+12>>2]|0)!=(f|0))An();if((s[p+8>>2]|0)==(f|0)){s[h+12>>2]=p;s[p+8>>2]=h;a=p;break}else An()}while(0);if((l|0)!=0){h=s[e+((u&-8)+20)>>2]|0;if((f|0)==(s[21448+(h<<2)>>2]|0)){s[21448+(h<<2)>>2]=a;if((a|0)==0){s[5287]=s[5287]&~(1<<h);break}}else{if(l>>>0<(s[5290]|0)>>>0)An();if((s[l+16>>2]|0)==(f|0))s[l+16>>2]=a;else s[l+20>>2]=a;if((a|0)==0)break}if(a>>>0<(s[5290]|0)>>>0)An();s[a+24>>2]=l;f=s[e+((u&-8)+8)>>2]|0;do if((f|0)!=0)if(f>>>0<(s[5290]|0)>>>0)An();else{s[a+16>>2]=f;s[f+24>>2]=a;break}while(0);u=s[e+((u&-8)+12)>>2]|0;if((u|0)!=0)if(u>>>0<(s[5290]|0)>>>0)An();else{s[a+20>>2]=u;s[u+24>>2]=a;break}}}else{a=s[e+(u&-8)>>2]|0;u=s[e+(u&-8|4)>>2]|0;if((a|0)!=(21184+(h>>>3<<1<<2)|0)){if(a>>>0<(s[5290]|0)>>>0)An();if((s[a+12>>2]|0)!=(f|0))An()}if((u|0)==(a|0)){s[5286]=s[5286]&~(1<<(h>>>3));break}if((u|0)!=(21184+(h>>>3<<1<<2)|0)){if(u>>>0<(s[5290]|0)>>>0)An();if((s[u+8>>2]|0)!=(f|0))An();else l=u+8|0}else l=u+8|0;s[a+12>>2]=u;s[l>>2]=a}while(0);s[n+4>>2]=v|1;s[n+v>>2]=v;if((n|0)==(s[5291]|0)){s[5288]=v;c=t;return}}else{s[e+((u&-8)+ -4)>>2]=h&-2;s[n+4>>2]=v|1;s[n+v>>2]=v}u=v>>>3;if(v>>>0<256){r=s[5286]|0;if((r&1<<u|0)!=0){r=s[21184+((u<<1)+2<<2)>>2]|0;if(r>>>0<(s[5290]|0)>>>0)An();else{i=21184+((u<<1)+2<<2)|0;o=r}}else{s[5286]=r|1<<u;i=21184+((u<<1)+2<<2)|0;o=21184+(u<<1<<2)|0}s[i>>2]=n;s[o+12>>2]=n;s[n+8>>2]=o;s[n+12>>2]=21184+(u<<1<<2);c=t;return}i=v>>>8;if((i|0)!=0)if(v>>>0>16777215)i=31;else{S=i<<((i+1048320|0)>>>16&8)<<(((i<<((i+1048320|0)>>>16&8))+520192|0)>>>16&4);i=14-(((i<<((i+1048320|0)>>>16&8))+520192|0)>>>16&4|(i+1048320|0)>>>16&8|(S+245760|0)>>>16&2)+(S<<((S+245760|0)>>>16&2)>>>15)|0;i=v>>>(i+7|0)&1|i<<1}else i=0;o=21448+(i<<2)|0;s[n+28>>2]=i;s[n+20>>2]=0;s[n+16>>2]=0;e=s[5287]|0;u=1<<i;e:do if((e&u|0)!=0){o=s[o>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;t:do if((s[o+4>>2]&-8|0)!=(v|0)){i=v<<i;u=o;while(1){e=u+(i>>>31<<2)+16|0;o=s[e>>2]|0;if((o|0)==0)break;if((s[o+4>>2]&-8|0)==(v|0)){r=o;break t}else{i=i<<1;u=o}}if(e>>>0<(s[5290]|0)>>>0)An();else{s[e>>2]=n;s[n+24>>2]=u;s[n+12>>2]=n;s[n+8>>2]=n;break e}}else r=o;while(0);i=r+8|0;u=s[i>>2]|0;o=s[5290]|0;if(r>>>0<o>>>0)An();if(u>>>0<o>>>0)An();else{s[u+12>>2]=n;s[i>>2]=n;s[n+8>>2]=u;s[n+12>>2]=r;s[n+24>>2]=0;break}}else{s[5287]=e|u;s[o>>2]=n;s[n+24>>2]=o;s[n+12>>2]=n;s[n+8>>2]=n}while(0);S=(s[5294]|0)+ -1|0;s[5294]=S;if((S|0)==0)n=21600|0;else{c=t;return}while(1){n=s[n>>2]|0;if((n|0)==0)break;else n=n+8|0}s[5294]=-1;c=t;return}function pM(){}function dM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;t=t-r-(n>>>0>e>>>0|0)>>>0;return(D=t,e-n>>>0|0)|0}function vM(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,o=0,u=0;i=e+n|0;if((n|0)>=20){t=t&255;u=e&3;o=t|t<<8|t<<16|t<<24;if(u){u=e+4-u|0;while((e|0)<(u|0)){r[e>>0]=t;e=e+1|0}}while((e|0)<(i&~3|0)){s[e>>2]=o;e=e+4|0}}while((e|0)<(i|0)){r[e>>0]=t;e=e+1|0}return e-n|0}function mM(e){e=e|0;var t=0;t=e;while(r[t>>0]|0)t=t+1|0;return t-e|0}function gM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return(D=t+r+(e+n>>>0>>>0<e>>>0|0)>>>0,e+n>>>0|0)|0}function yM(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;if((n|0)>=4096)return En(e|0,t|0,n|0)|0;i=e|0;if((e&3)==(t&3)){while(e&3){if((n|0)==0)return i|0;r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}while((n|0)>=4){s[e>>2]=s[t>>2];e=e+4|0;t=t+4|0;n=n-4|0}}while((n|0)>0){r[e>>0]=r[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}return i|0}function bM(e,t,n){e=e|0;t=t|0;n=n|0;var i=0;if((t|0)<(e|0)&(e|0)<(t+n|0)){i=e;t=t+n|0;e=e+n|0;while((n|0)>0){e=e-1|0;t=t-1|0;n=n-1|0;r[e>>0]=r[t>>0]|0}e=i}else yM(e,t,n)|0;return e|0}function wM(e){e=e|0;return(e&255)<<24|(e>>8&255)<<16|(e>>16&255)<<8|e>>>24|0}function EM(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){D=t<<n|(e&(1<<n)-1<<32-n)>>>32-n;return e<<n}D=e<<n-32;return 0}function SM(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){D=t>>>n;return e>>>n|(t&(1<<n)-1)<<32-n}D=0;return t>>>n-32|0}function xM(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){D=t>>n;return e>>>n|(t&(1<<n)-1)<<32-n}D=(t|0)<0?-1:0;return t>>n-32|0}function TM(e){e=e|0;var t=0;t=r[m+(e>>>24)>>0]|0;if((t|0)<8)return t|0;t=r[m+(e>>16&255)>>0]|0;if((t|0)<8)return t+8|0;t=r[m+(e>>8&255)>>0]|0;if((t|0)<8)return t+16|0;return(r[m+(e&255)>>0]|0)+24|0}function NM(e){e=e|0;var t=0;t=r[v+(e&255)>>0]|0;if((t|0)<8)return t|0;t=r[v+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=r[v+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(r[v+(e>>>24)>>0]|0)+24|0}function CM(e,t){e=e|0;t=t|0;var n=0,r=0,i=0;n=rt(t&65535,e&65535)|0;i=(n>>>16)+(rt(t&65535,e>>>16)|0)|0;r=rt(t>>>16,e&65535)|0;return(D=(i>>>16)+(rt(t>>>16,e>>>16)|0)+(((i&65535)+r|0)>>>16)|0,i+r<<16|n&65535|0)|0}function kM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0,o=0,u=0;o=t>>31|((t|0)<0?-1:0)<<1;i=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;u=r>>31|((r|0)<0?-1:0)<<1;s=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;t=dM(o^e,i^t,o,i)|0;e=D;e=dM((_M(t,e,dM(u^n,s^r,u,s)|0,D,0)|0)^(u^o),D^(s^i),u^o,s^i)|0;return e|0}function LM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,o=0,u=0,a=0,f=0;i=c;c=c+8|0;u=t>>31|((t|0)<0?-1:0)<<1;o=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;f=r>>31|((r|0)<0?-1:0)<<1;a=((r|0)<0?-1:0)>>31|((r|0)<0?-1:0)<<1;t=dM(u^e,o^t,u,o)|0;e=D;_M(t,e,dM(f^n,a^r,f,a)|0,D,i|0)|0;e=dM(s[i>>2]^u,s[i+4>>2]^o,u,o)|0;t=D;c=i;return(D=t,e)|0}function AM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0,s=0;i=CM(e,n)|0;s=D;return(D=(rt(t,n)|0)+(rt(r,e)|0)+s|s&0,i|0|0)|0}function OM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;e=_M(e,t,n,r,0)|0;return e|0}function MM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var i=0;i=c;c=c+8|0;_M(e,t,n,r,i|0)|0;c=i;return(D=s[i+4>>2]|0,s[i>>2]|0)|0}function _M(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;var o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0;if((t|0)==0)if((r|0)==0){if((i|0)!=0){s[i>>2]=(e>>>0)%(n>>>0);s[i+4>>2]=0}l=0;c=(e>>>0)/(n>>>0)>>>0;return(D=l,c)|0}else{if((i|0)==0){l=0;c=0;return(D=l,c)|0}s[i>>2]=e|0;s[i+4>>2]=t&0;l=0;c=0;return(D=l,c)|0}do if((n|0)!=0){if((r|0)!=0){l=(TM(r|0)|0)-(TM(t|0)|0)|0;if(l>>>0<=31){a=l+1|0;o=e>>>((l+1|0)>>>0)&l-31>>31|t<<31-l;u=t>>>((l+1|0)>>>0)&l-31>>31;f=0;c=e<<31-l;break}if((i|0)==0){l=0;c=0;return(D=l,c)|0}s[i>>2]=e|0;s[i+4>>2]=t|t&0;l=0;c=0;return(D=l,c)|0}if((n-1&n|0)!=0){c=(TM(n|0)|0)+33-(TM(t|0)|0)|0;a=c;o=32-c-1>>31&t>>>((c-32|0)>>>0)|(t<<32-c|e>>>(c>>>0))&c-32>>31;u=c-32>>31&t>>>(c>>>0);f=e<<64-c&32-c>>31;c=(t<<64-c|e>>>((c-32|0)>>>0))&32-c>>31|e<<32-c&c-33>>31;break}if((i|0)!=0){s[i>>2]=n-1&e;s[i+4>>2]=0}if((n|0)==1){l=t|t&0;c=e|0|0;return(D=l,c)|0}else{c=NM(n|0)|0;l=t>>>(c>>>0)|0;c=t<<32-c|e>>>(c>>>0)|0;return(D=l,c)|0}}else{if((r|0)==0){if((i|0)!=0){s[i>>2]=(t>>>0)%(n>>>0);s[i+4>>2]=0}l=0;c=(t>>>0)/(n>>>0)>>>0;return(D=l,c)|0}if((e|0)==0){if((i|0)!=0){s[i>>2]=0;s[i+4>>2]=(t>>>0)%(r>>>0)}l=0;c=(t>>>0)/(r>>>0)>>>0;return(D=l,c)|0}if((r-1&r|0)==0){if((i|0)!=0){s[i>>2]=e|0;s[i+4>>2]=r-1&t|t&0}l=0;c=t>>>((NM(r|0)|0)>>>0);return(D=l,c)|0}l=(TM(r|0)|0)-(TM(t|0)|0)|0;if(l>>>0<=30){a=l+1|0;o=t<<31-l|e>>>((l+1|0)>>>0);u=t>>>((l+1|0)>>>0);f=0;c=e<<31-l;break}if((i|0)==0){l=0;c=0;return(D=l,c)|0}s[i>>2]=e|0;s[i+4>>2]=t|t&0;l=0;c=0;return(D=l,c)|0}while(0);if((a|0)==0){r=c;l=f;n=0;f=0}else{e=gM(n|0|0,r|r&0,-1,-1)|0;t=D;l=f;f=0;do{v=c;c=l>>>31|c<<1;l=f|l<<1;v=o<<1|v>>>31|0;d=o>>>31|u<<1|0;dM(e,t,v,d)|0;h=D;p=h>>31|((h|0)<0?-1:0)<<1;f=p&1;o=dM(v,d,p&(n|0),(((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1)&(r|r&0))|0;u=D;a=a-1|0}while((a|0)!=0);r=c;n=0}if((i|0)!=0){s[i>>2]=o;s[i+4>>2]=u}d=(l|0)>>>31|r<<1|(0<<1|l>>>31)&0|n;v=(l<<1|0>>>31)&-2|f;return(D=d,v)|0}function DM(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;aD[e&31](t|0,n|0,r|0,i|0,s|0)}function PM(e,t,n){e=e|0;t=t|0;n=+n;fD[e&31](t|0,+n)}function HM(e,t){e=e|0;t=t|0;lD[e&511](t|0)}function BM(e,t,n,r,i,s,o){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;s=s|0;o=o|0;cD[e&0](t|0,n|0,r|0,+i,s|0,o|0)}function jM(e,t,n){e=e|0;t=t|0;n=n|0;hD[e&127](t|0,n|0)}function FM(e,t,n,r,i,s,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;return pD[e&3](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0,l|0)|0}function IM(e,t){e=e|0;t=t|0;return dD[e&127](t|0)|0}function qM(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;vD[e&7](t|0,n|0,+r,i|0)}function RM(e,t,n,r,i,s,o){e=e|0;t=t|0;n=+n;r=+r;i=i|0;s=s|0;o=o|0;mD[e&0](t|0,+n,+r,i|0,s|0,o|0)}function UM(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=i|0;gD[e&0](t|0,+n,r|0,i|0)}function zM(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return yD[e&31](t|0,n|0,r|0,i|0)|0}function WM(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;bD[e&15](t|0,+n,r|0)}function XM(e,t,n,r,i,s,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;return+wD[e&1](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0)}function VM(e,t,n,r,i,s,o,u,a,f,l,c){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;o=+o;u=+u;a=+a;f=f|0;l=l|0;c=+c;ED[e&0](t|0,n|0,r|0,i|0,+s,+o,+u,+a,f|0,l|0,+c)}function $M(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;return+SD[e&15](t|0,n|0,r|0,i|0,s|0)}function JM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return xD[e&31](t|0,n|0,r|0)|0}function KM(e,t,n,r,i,s,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;TD[e&7](t|0,n|0,r|0,i|0,s|0,o|0)}function QM(e,t,n,r){e=e|0;t=t|0;n=n|0;r=+r;return ND[e&7](t|0,n|0,+r)|0}function GM(e,t){e=e|0;t=t|0;return+CD[e&15](t|0)}function YM(e,t,n,r,i,s,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;return kD[e&3](t|0,n|0,r|0,i|0,s|0,o|0)|0}function ZM(e,t,n,r,i,s,o){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;s=s|0;o=o|0;return+LD[e&3](t|0,n|0,r|0,+i,s|0,o|0)}function e_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;s=s|0;AD[e&0](t|0,n|0,+r,i|0,s|0)}function t_(e,t,n,r,i,s,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;OD[e&1](t|0,n|0,r|0,i|0,s|0,o|0,u|0)}function n_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;MD[e&1](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0)}function r_(e,t,n,r,i,s,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;_D[e&3](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0,l|0)}function i_(e,t,n){e=e|0;t=t|0;n=n|0;return DD[e&31](t|0,n|0)|0}function s_(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;return+PD[e&15](t|0,n|0,r|0)}function o_(e,t,n,r,i,s,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;l=l|0;return+HD[e&3](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0,l|0)}function u_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;BD[e&1](t|0,n|0,r|0,i|0,+s)}function a_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;return+jD[e&3](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0)}function f_(e,t,n){e=e|0;t=t|0;n=+n;return+FD[e&1](t|0,+n)}function l_(e,t,n,r,i,s,o,u,a,f,l,c,h){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=+s;o=+o;u=+u;a=+a;f=+f;l=l|0;c=+c;h=h|0;ID[e&0](t|0,n|0,r|0,i|0,+s,+o,+u,+a,+f,l|0,+c,h|0)}function c_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;s=s|0;return+qD[e&3](t|0,n|0,+r,i|0,s|0)}function h_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;return+RD[e&1](t|0,n|0,r|0,i|0)}function p_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;return UD[e&3](t|0,n|0,r|0,i|0,s|0,o|0,u|0,a|0,f|0)|0}function d_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;zD[e&15](t|0,n|0,r|0,+i)}function v_(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;WD[e&127](t|0,n|0,r|0)}function m_(e){e=e|0;XD[e&3]()}function g_(e,t,n,r){e=e|0;t=t|0;n=n|0;r=+r;VD[e&7](t|0,n|0,+r)}function y_(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=+i;return $D[e&1](t|0,+n,r|0,+i)|0}function b_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;JD[e&127](t|0,n|0,r|0,i|0)}function w_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;it(0)}function E_(e,t){e=e|0;t=+t;it(1)}function S_(e){e=e|0;it(2)}function x_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;s=s|0;it(3)}function T_(e,t){e=e|0;t=t|0;it(4)}function N_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;it(5);return 0}function C_(e){e=e|0;it(6);return 0}function k_(e,t,n,r){e=e|0;t=t|0;n=+n;r=r|0;it(7)}function L_(e,t,n,r,i,s){e=e|0;t=+t;n=+n;r=r|0;i=i|0;s=s|0;it(8)}function A_(e,t,n,r){e=e|0;t=+t;n=n|0;r=r|0;it(9)}function O_(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;it(10);return 0}function M_(e,t,n){e=e|0;t=+t;n=n|0;it(11)}function __(e,t,n,r,i,s,o,u){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;it(12);return 0}function D_(e,t,n,r,i,s,o,u,a,f,l){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;s=+s;o=+o;u=+u;a=a|0;f=f|0;l=+l;it(13)}function P_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;it(14);return 0}function H_(e,t,n){e=e|0;t=t|0;n=n|0;it(15);return 0}function B_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;it(16)}function j_(e,t,n){e=e|0;t=t|0;n=+n;it(17);return 0}function F_(e){e=e|0;it(18);return 0}function I_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;it(19);return 0}function q_(e,t,n,r,i,s){e=e|0;t=t|0;n=n|0;r=+r;i=i|0;s=s|0;it(20);return 0}function R_(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=i|0;it(21)}function U_(e,t,n,r,i,s,o){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;it(22)}function z_(e,t,n,r,i,s,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;it(23)}function W_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;it(24)}function X_(e,t){e=e|0;t=t|0;it(25);return 0}function V_(e,t,n){e=e|0;t=t|0;n=n|0;it(26);return 0}function $_(e,t,n,r,i,s,o,u,a,f){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;f=f|0;it(27);return 0}function J_(e,t,n,r,i){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;it(28)}function K_(e,t,n,r,i,s,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;it(29);return 0}function Q_(e,t){e=e|0;t=+t;it(30);return 0}function G_(e,t,n,r,i,s,o,u,a,f,l,c){e=e|0;t=t|0;n=n|0;r=r|0;i=+i;s=+s;o=+o;u=+u;a=+a;f=f|0;l=+l;c=c|0;it(31)}function Y_(e,t,n,r,i){e=e|0;t=t|0;n=+n;r=r|0;i=i|0;it(32);return 0}function Z_(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;it(33);return 0}function eD(e,t,n,r,i,s,o,u,a){e=e|0;t=t|0;n=n|0;r=r|0;i=i|0;s=s|0;o=o|0;u=u|0;a=a|0;it(34);return 0}function tD(e,t,n,r){e=e|0;t=t|0;n=n|0;r=+r;it(35)}function nD(e,t,n){e=e|0;t=t|0;n=n|0;it(36)}function rD(){it(37)}function iD(){jn()}function sD(e,t,n){e=e|0;t=t|0;n=+n;it(38)}function oD(e,t,n,r){e=e|0;t=+t;n=n|0;r=+r;it(39);return 0}function uD(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;it(40)}var r=new e.Int8Array(n);var i=new e.Int16Array(n);var s=new e.Int32Array(n);var o=new e.Uint8Array(n);var u=new e.Uint16Array(n);var a=new e.Uint32Array(n);var f=new e.Float32Array(n);var l=new e.Float64Array(n);var c=t.STACKTOP|0;var h=t.STACK_MAX|0;var p=t.tempDoublePtr|0;var d=t.ABORT|0;var v=t.cttz_i8|0;var m=t.ctlz_i8|0;var g=t._stderr|0;var y=0;var b=0;var w=0;var E=0;var S=+t.NaN,x=+t.Infinity;var T=0,N=0,C=0,k=0,L=0,A=0,O=0,M=0,_=0;var D=0;var P=0;var H=0;var B=0;var j=0;var F=0;var I=0;var q=0;var R=0;var U=0;var z=e.Math.floor;var W=e.Math.abs;var X=e.Math.sqrt;var V=e.Math.pow;var $=e.Math.cos;var J=e.Math.sin;var K=e.Math.tan;var Q=e.Math.acos;var G=e.Math.asin;var Y=e.Math.atan;var Z=e.Math.atan2;var et=e.Math.exp;var tt=e.Math.log;var nt=e.Math.ceil;var rt=e.Math.imul;var it=t.abort;var st=t.assert;var ot=t.min;var ut=t.invoke_viiiii;var at=t.invoke_vid;var ft=t.invoke_vi;var lt=t.invoke_viiidii;var ct=t.invoke_vii;var ht=t.invoke_iiiiiiiiiii;var pt=t.invoke_ii;var dt=t.invoke_viidi;var vt=t.invoke_viddiii;var mt=t.invoke_vidii;var gt=t.invoke_iiiii;var yt=t.invoke_vidi;var bt=t.invoke_diiiiiiii;var wt=t.invoke_viiiiddddiid;var Et=t.invoke_diiiii;var St=t.invoke_iiii;var xt=t.invoke_viiiiii;var Tt=t.invoke_iiid;var Nt=t.invoke_di;var Ct=t.invoke_iiiiiii;var kt=t.invoke_diiidii;var Lt=t.invoke_viidii;var At=t.invoke_viiiiiii;var Ot=t.invoke_viiiiiiiii;var Mt=t.invoke_viiiiiiiiii;var _t=t.invoke_iii;var Dt=t.invoke_diii;var Pt=t.invoke_diiiiiiiiii;var Ht=t.invoke_viiiid;var Bt=t.invoke_diiiiiiiii;var jt=t.invoke_did;var Ft=t.invoke_viiiidddddidi;var It=t.invoke_diidii;var qt=t.invoke_diiii;var Rt=t.invoke_iiiiiiiiii;var Ut=t.invoke_viiid;var zt=t.invoke_viii;var Wt=t.invoke_v;var Xt=t.invoke_viid;var Vt=t.invoke_iidid;var $t=t.invoke_viiii;var Jt=t._emscripten_asm_const_double;var Kt=t._cosf;var Qt=t._send;var Gt=t._sqrtf;var Yt=t._fmod;var Zt=t.___cxa_guard_acquire;var en=t.___setErrNo;var tn=t._vfprintf;var nn=t._atan2f;var rn=t._fmodf;var sn=t.___cxa_guard_release;var on=t._pwrite;var un=t._acosf;var an=t._asinf;var fn=t._fabsf;var ln=t._sbrk;var cn=t._llvm_pow_f32;var hn=t.___cxa_begin_catch;var pn=t._sinf;var dn=t._fileno;var vn=t.___resumeException;var mn=t.___cxa_find_matching_catch;var gn=t._sysconf;var yn=t.__reallyNegative;var bn=t._pthread_getspecific;var wn=t.__ZSt18uncaught_exceptionv;var En=t._emscripten_memcpy_big;var Sn=t._pthread_once;var xn=t._pthread_key_create;var Tn=t._write;var Nn=t.___errno_location;var Cn=t._pthread_setspecific;var kn=t._fputc;var Ln=t.___cxa_throw;var An=t._abort;var On=t.___cxa_allocate_exception;var Mn=t._fwrite;var _n=t._time;var Dn=t._fprintf;var Pn=t._gettimeofday;var Hn=t.__formatString;var Bn=t._llvm_trap;var jn=t.___cxa_pure_virtual;var Fn=0;var aD=[w_,Hv,Ak,RL,IA,rO,kx,_x,NT,OT,DT,IT,KT,uN,mN,HN,sM,iM,GC,w_,w_,w_,w_,w_,w_,w_,w_,w_,w_,w_,w_,w_];var fD=[E_,pw,hw,uv,Zd,$d,Tw,GE,YE,Sm,Vm,dg,db,Ab,zb,lL,Ow,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_,E_];var lD=[S_,Zp,ed,td,id,sd,ld,cd,vd,md,wd,Ed,Td,Nd,Id,qd,Md,Vd,Xd,uy,ay,Jd,fy,Gd,Kd,fw,Qd,cw,Bw,Iw,qw,rE,iE,Jw,eE,vE,mE,fE,wE,bE,OE,EE,HE,UE,zE,jE,JE,$E,rS,iS,VE,sS,gS,mS,vv,Tv,Nv,Mv,_v,Wv,Gv,Yv,Zv,em,ym,bm,Im,Fm,Qm,Gm,Zm,eg,ng,rg,ag,fg,gg,yg,wg,Eg,Cg,Ng,Pg,Ug,sy,iy,Ty,xy,Ay,Ly,_y,Ey,Py,by,By,gy,Fy,qy,Ry,Wy,Xy,$y,Jy,Yy,Zy,Gy,nb,ab,fb,cb,hb,hy,gb,wb,bb,Sb,jb,Fb,Vb,$b,Qb,Gb,nk,rk,tk,ik,Sk,xk,Xk,Vk,Dk,Jk,sL,oL,vL,mL,bL,wL,OL,AL,JL,qL,KL,FL,GL,DL,ZL,iA,rA,fA,lA,hA,pA,vA,mA,yA,bA,EA,SA,TA,NA,kA,LA,OA,MA,DA,PA,BA,jA,RA,UA,XA,WA,KA,JA,eO,tO,vy,Qy,iO,sO,Tg,Wg,fO,lO,cO,hO,gO,mO,EO,SO,TO,NO,OO,AO,$O,JO,QO,GO,nM,tM,qS,IS,GS,YS,QS,ZS,mx,vx,lw,Cw,Cx,Nx,Mx,Ox,Bx,Hx,Vx,$x,Zx,eT,uT,oT,dT,mT,yT,bT,CT,kT,AT,LT,PT,HT,FT,jT,RT,WT,$T,VT,QT,YT,nN,tN,sN,iN,fN,lN,pN,hN,vN,dN,gN,EN,TN,NN,xN,AN,PN,DN,IN,FN,YN,GN,aC,uC,DC,_C,jC,qC,FC,IC,RC,UC,MC,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_,S_];var cD=[x_];var hD=[T_,gd,yd,Ld,Od,ww,rv,bw,ew,tw,nw,ev,tv,sv,iv,dw,rw,iw,sw,ow,uw,xw,Kw,Qw,lE,cE,_E,xE,NE,CE,kE,DE,FE,IE,ZE,oS,vS,wv,Ev,Iv,zv,lm,dm,vm,wm,Aw,ny,Rm,zm,Wm,cg,pg,Ag,Lg,Bg,ly,Cy,ib,vb,Nb,Eb,Bb,Ub,Kb,Zb,ak,zk,uL,fL,zL,$L,QL,YL,tA,zA,Jg,XS,VS,WO,VO,FO,Ck,yx,Ax,Px,qx,tT,nT,Gx,Yx,fT,_T,zT,XT,JT,eN,rN,bN,jN,dC,vC,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_,T_];var pD=[N_,nO,uO,N_];var dD=[C_,$n,Rd,Ew,vw,mw,Sw,sE,gE,AE,ME,WE,pS,yv,Cv,qv,Rv,im,sm,om,am,pm,kw,Em,_w,km,Am,Om,Dm,lT,Xm,Jm,hg,vg,Pw,bg,Sg,jg,Ig,qg,Rg,kb,Lb,Mb,Rb,Wb,Jb,Yb,Tk,Nk,pk,dk,gk,Wk,$k,Bk,jk,qk,aL,cL,gL,EL,WL,XL,oA,uA,aA,Qg,bO,qO,RO,UO,zO,XO,nx,sx,ux,ax,cx,Lw,Rx,Ux,zx,rT,cC,iT,vT,ry,nC,PC,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_,C_];var vD=[k_,Bd,tE,pE,qE,Sv,k_,k_];var mD=[L_];var gD=[A_];var yD=[O_,ud,eS,nm,Og,cA,dA,gA,wA,xA,CA,AA,_A,HA,FA,WS,wO,BO,wN,O_,O_,O_,O_,O_,O_,O_,O_,O_,O_,O_,O_,O_];var bD=[M_,gm,hT,ug,Tb,qb,MS,Yk,tx,Tx,Ix,M_,M_,M_,M_,M_];var wD=[__,kd];var ED=[D_];var SD=[P_,qA,Lx,Dx,MT,UT,GT,aN,yN,BN,P_,P_,P_,P_,P_,P_];var xD=[H_,Av,od,Ud,oE,yE,XE,dS,kv,tm,hm,Dw,Um,mg,kg,_g,Mg,Cb,Xb,wk,hL,sA,$g,$S,IO,PO,Wx,oC,ty,eC,tC,zC];var TD=[B_,Rw,jv,BL,aM,uM,oM,B_];var ND=[j_,Hm,bk,Uk,px,j_,j_,j_];var CD=[F_,Zg,xm,$m,Ob,dL,yL,SL,Mw,F_,F_,F_,F_,F_,F_,F_];var kD=[I_,ek,ZA,Xx];var LD=[q_,Vy,Ky,q_];var AD=[R_];var OD=[U_,Ek];var MD=[z_,cv];var _D=[W_,fC,lC,W_];var DD=[X_,hd,Sd,Cd,gw,yw,jw,cS,LS,Fg,Hg,zg,jy,Iy,Uy,eb,ob,ub,Kg,KO,YO,X_,X_,X_,X_,X_,X_,X_,X_,X_,X_,X_];var PD=[V_,pd,xd,jd,Fw,nE,dE,BE,RE,xv,zy,tb,V_,V_,V_,V_];var HD=[$_,dv,lv,$_];var BD=[J_,nd];var jD=[K_,fv,hv,K_];var FD=[Q_,Yg];var ID=[G_];var qD=[Y_,lb,pb,Y_];var RD=[Z_,pv];var UD=[eD,Dv,ML,eD];var zD=[tD,rd,_d,Hy,uk,oO,vO,SN,LN,_N,tD,tD,tD,tD,tD,tD];var WD=[nD,ad,Fd,av,mv,gv,Pv,Uv,rm,um,fm,cm,Gg,Tm,Nm,Lm,_m,Bm,pT,Km,Ym,tg,ig,Lk,sg,Hw,Xg,Vg,rb,mb,Hb,Db,sk,ok,hk,lk,mk,Hk,_k,Ik,pL,tL,Zk,eL,PL,VL,eA,VA,QA,pO,dO,DO,MO,_O,jO,AS,rx,ox,lx,gx,Sx,wx,hC,pC,ZT,CN,kN,ON,MN,xg,Mk,Ok,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD,nD];var XD=[rD,iD,AC,OC];var VD=[sD,PE,TE,LE,tS,sb,sD,sD];var $D=[oD,Yd];var JD=[uD,Sy,my,nv,ov,nS,kS,Bv,Fv,mm,Cm,kk,Mm,Pm,aT,qm,lg,og,Dg,oy,Oy,My,Dy,KS,JS,xb,Ib,Pb,DS,ck,vk,yk,Pk,Fk,Rk,Kk,Gk,nL,iL,rL,HL,IL,$A,GA,xO,CO,OS,ex,ix,fx,hx,dx,xx,Ex,jx,Fx,sC,cT,gT,wT,oN,cN,XC,VC,JC,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD,uD];return{_emscripten_bind_btCylinderShape___destroy___0:Jp,_strlen:mM,_emscripten_bind_btDispatcherInfo_set_m_useContinuous_1:Er,_emscripten_bind_btCollisionObject_isActive_0:us,_emscripten_bind_btVehicleTuning_set_m_frictionSlip_1:Bu,_emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4:gs,_emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0:_a,_emscripten_bind_btQuaternion_setX_1:lf,_emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0:yr,_emscripten_bind_btQuaternion_setZ_1:hf,_emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0:dh,_emscripten_bind_btKinematicCharacterController_setMaxSlope_1:kl,_emscripten_bind_btQuadWord_z_0:Fp,_emscripten_bind_btTransform_setIdentity_0:gp,_emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0:Hf,_emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0:Af,_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0:di,_emscripten_bind_btCollisionDispatcher___destroy___0:Nu,_emscripten_bind_btRigidBody_applyCentralImpulse_1:Hh,_emscripten_bind_btDefaultMotionState_getWorldTransform_1:pa,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1:Cs,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3:Ls,_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2:ks,_emscripten_bind_btVector3_op_mul_1:Ql,_emscripten_bind_btDynamicsWorld_rayTest_3:za,_emscripten_bind_btRaycastVehicle_updateWheelTransform_2:th,_emscripten_bind_btQuadWord_x_0:Bp,_emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0:mh,_emscripten_bind_btCollisionObject_isKinematicObject_0:as,_emscripten_bind_ConvexResultCallback___destroy___0:Zs,_emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1:Yu,_emscripten_bind_btRigidBody_getCenterOfMassTransform_0:xh,_emscripten_bind_btGhostObject_isKinematicObject_0:Bc,_emscripten_bind_btCapsuleShape___destroy___0:Fr,_emscripten_bind_btCollisionObject_activate_1:os,_emscripten_bind_btCollisionObject_activate_0:ss,_emscripten_bind_btKinematicCharacterController_setUpAxis_1:dl,_emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1:br,_emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1:Su,_emscripten_bind_btVector3_setX_1:Vl,_emscripten_bind_btCollisionConfiguration___destroy___0:Ir,_emscripten_bind_btQuaternion_btQuaternion_4:rf,_emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1:Wi,_emscripten_bind_btManifoldPoint_set_m_localPointB_1:Ui,_emscripten_bind_btVector3_setZ_1:Jl,_emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0:$f,_emscripten_bind_btQuaternion_setValue_4:sf,_emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1:gr,_emscripten_bind_LocalShapeInfo___destroy___0:Kc,_emscripten_bind_btQuadWord_setY_1:Rp,_emscripten_bind_btRigidBody_isKinematicObject_0:Yh,_emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1:Ei,_emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0:va,_emscripten_bind_btConeTwistConstraint_setDamping_1:Co,_emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0:Xr,_emscripten_bind_btCollisionWorld___destroy___0:Hp,_emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0:Sf,_emscripten_bind_btBoxShape_btBoxShape_1:yu,_emscripten_bind_btPersistentManifold_getBody1_0:du,_emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1:Ia,_emscripten_bind_btKinematicCharacterController_setGravity_1:Nl,_emscripten_bind_btConstraintSetting_set_m_impulseClamp_1:Tc,_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5:Gi,_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3:Qi,_emscripten_bind_LocalShapeInfo_get_m_shapePart_0:Xc,_emscripten_bind_btWheelInfo_get_m_rollInfluence_0:Df,_emscripten_bind_btVector4_setValue_4:nl,_emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1:ir,_emscripten_bind_btDynamicsWorld_getDispatchInfo_0:Xa,_emscripten_bind_btVector3_length_0:Ul,_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2:Us,_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1:Rs,_emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1:ea,_emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1:Nf,_emscripten_bind_btPairCachingGhostObject___destroy___0:fi,_emscripten_bind_btPairCachingGhostObject_activate_0:Qr,_emscripten_bind_btPairCachingGhostObject_activate_1:Gr,_emscripten_bind_btPairCachingGhostObject_forceActivationState_1:Kr,_emscripten_bind_btDefaultMotionState___destroy___0:ga,_emscripten_bind_btDispatcherInfo_get_m_stepCount_0:dr,_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1:vi,_emscripten_bind_btQuadWord_setW_1:zp,_emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0:mi,_emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2:Za,_emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0:Xf,_emscripten_bind_btRigidBody_setLinearFactor_1:Lh,_emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1:Mr,_emscripten_bind_btRaycastVehicle_setSteeringValue_2:Zc,_emscripten_bind_btPoint2PointConstraint___destroy___0:fo,_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2:Ts,_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1:xs,_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1:Ni,_malloc:cM,_emscripten_bind_btDispatcherInfo_get_m_useEpa_0:Cr,_emscripten_bind_btTransform_btTransform_2:mp,_emscripten_bind_btTransform_btTransform_0:vp,_emscripten_bind_btWheelInfo_set_m_wheelsRadius_1:Ff,_emscripten_bind_btDispatcherInfo_set_m_enableSPU_1:Nr,_emscripten_bind_btRaycastVehicle_setCoordinateSystem_3:uh,_emscripten_bind_btCollisionObject_setActivationState_1:rs,_emscripten_bind_btPersistentManifold___destroy___0:gu,_emscripten_bind_btConstraintSetting_get_m_impulseClamp_0:xc,_emscripten_bind_btCylinderShapeZ___destroy___0:dp,_emscripten_bind_btMatrix3x3___destroy___0:Gn,_emscripten_bind_ConvexResultCallback_hasHit_0:Vs,_emscripten_bind_btCollisionShape_calculateLocalInertia_2:mc,_emscripten_bind_btCollisionWorld_convexSweepTest_5:Dp,_emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1:Da,_emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2:tf,_emscripten_bind_btConstraintSetting_set_m_damping_1:Sc,_emscripten_bind_btVehicleRaycaster___destroy___0:Yl,_emscripten_bind_btRigidBody_applyForce_2:Oh,_emscripten_bind_btConeShapeZ_calculateLocalInertia_2:Jo,_emscripten_bind_btConstraintSetting_set_m_tau_1:wc,_emscripten_bind_btConvexHullShape_calculateLocalInertia_2:lu,_emscripten_bind_btSphereShape_calculateLocalInertia_2:tc,_emscripten_bind_btPoint2PointConstraint_get_m_setting_0:uo,_emscripten_bind_LocalConvexResult_LocalConvexResult_5:fh,_emscripten_bind_btGhostObject_setFriction_1:Fc,_emscripten_bind_btPairCachingGhostObject_getWorldTransform_0:ni,_emscripten_bind_btRigidBody_setFriction_1:ep,_emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1:gh,_emscripten_bind_btGhostObject_setWorldTransform_1:Uc,_emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1:Ss,_emscripten_bind_btConvexHullShape___destroy___0:cu,_emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0:Bs,_emscripten_bind_btVector4_setX_1:ul,_emscripten_bind_btKinematicCharacterController_jump_0:Tl,_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1:Ao,_emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1:zs,_emscripten_bind_btRigidBody_upcast_1:Wh,_emscripten_bind_btCollisionObject_getWorldTransform_0:cs,_emscripten_bind_btVector4_setZ_1:fl,_emscripten_bind_btQuadWord_y_0:jp,___cxa_can_catch:fM,_emscripten_bind_btTransform_getBasis_0:xp,_emscripten_bind_btPairCachingGhostObject_setFriction_1:ti,_emscripten_bind_btDispatcherInfo_set_m_useEpa_1:kr,_emscripten_bind_btCollisionDispatcher_getNumManifolds_0:xu,_emscripten_bind_ClosestRayResultCallback___destroy___0:qa,_emscripten_bind_btQuadWord_w_0:Ip,_emscripten_bind_btCompoundShape___destroy___0:Wu,_emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2:sr,_emscripten_bind_btGhostObject_btGhostObject_0:Cc,_emscripten_bind_btConeShape_btConeShape_2:Po,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1:Hi,_emscripten_bind_btManifoldPoint_set_m_localPointA_1:qi,_emscripten_bind_btCollisionObject_setCollisionShape_1:vs,_emscripten_bind_btWheelInfo___destroy___0:Kf,_emscripten_bind_btTransform_setRotation_1:wp,_emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0:ui,_emscripten_bind_btPoint2PointConstraint_enableFeedback_1:oo,_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1:Ha,_emscripten_bind_btAxisSweep3_btAxisSweep3_2:qr,_emscripten_bind_btAxisSweep3_btAxisSweep3_3:Rr,_emscripten_bind_btBoxShape_calculateLocalInertia_2:wu,_emscripten_bind_btVector3_setY_1:$l,_emscripten_bind_btAxisSweep3_btAxisSweep3_4:Ur,_emscripten_bind_btAxisSweep3_btAxisSweep3_5:zr,_emscripten_bind_btQuadWord_setX_1:qp,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0:Oi,_emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1:Lu,_emscripten_bind_btOverlappingPairCache___destroy___0:Il,_emscripten_bind_btConstraintSetting___destroy___0:Nc,_emscripten_bind_RayResultCallback___destroy___0:Lf,_emscripten_bind_btPersistentManifold_getBody0_0:pu,_emscripten_bind_btConeShapeX_btConeShapeX_2:Qo,_emscripten_bind_btConeTwistConstraint_enableFeedback_1:_o,_emscripten_bind_btCapsuleShapeZ_setLocalScaling_1:mf,_emscripten_bind_btRigidBody_applyTorque_1:Ah,_emscripten_bind_btSliderConstraint_setUpperLinLimit_1:go,_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2:So,_emscripten_bind_btConcaveShape___destroy___0:Yf,_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4:xo,_emscripten_bind_btQuaternion_x_0:of,_emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1:vh,_emscripten_bind_btConcaveShape_setLocalScaling_1:Qf,_emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0:_s,_emscripten_bind_btConeShapeX_setLocalScaling_1:Go,_emscripten_bind_btQuaternion_z_0:af,_emscripten_bind_btConvexHullShape_btConvexHullShape_0:ou,_emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1:Vf,_emscripten_bind_btConstraintSetting_get_m_damping_0:Ec,_emscripten_bind_btGhostObject___destroy___0:Wc,_emscripten_bind_btGhostObject_setContactProcessingThreshold_1:Oc,_emscripten_bind_btRigidBody_applyCentralForce_1:Mh,_emscripten_bind_btQuaternion___destroy___0:df,_emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1:Tu,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_2:ha,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_0:aa,_emscripten_bind_btDefaultMotionState_btDefaultMotionState_1:ca,_emscripten_bind_btKinematicCharacterController_canJump_0:xl,_emscripten_bind_btRigidBody_isActive_0:Gh,_emscripten_bind_btRaycastVehicle_btRaycastVehicle_3:Gc,_emscripten_bind_btMotionState_setWorldTransform_1:co,_emscripten_bind_btCylinderShape_setLocalScaling_1:Vp,_emscripten_bind_btCollisionWorld_rayTest_3:Cp,_emscripten_bind_btCompoundShape_calculateLocalInertia_2:zu,_emscripten_bind_btCollisionWorld_getDispatchInfo_0:Lp,_emscripten_bind_btRigidBody_setCollisionShape_1:sp,_emscripten_bind_btConeShapeX___destroy___0:Zo,_emscripten_bind_btCollisionObject_getCollisionFlags_0:hs,_emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1:xr,_emscripten_bind_btConeTwistConstraint_enableMotor_1:ko,_emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1:qf,_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4:pl,_emscripten_bind_btPairCachingGhostObject_setRestitution_1:ei,_emscripten_bind_btBroadphaseInterface___destroy___0:es,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1:Ai,_emscripten_bind_btCollisionObject_setContactProcessingThreshold_1:ns,_emscripten_bind_btPersistentManifold_getNumContacts_0:vu,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0:Pi,_emscripten_bind_LocalConvexResult___destroy___0:wh,_emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0:cr,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1:Mi,_emscripten_bind_btCollisionWorld_addCollisionObject_3:Mp,_emscripten_bind_btRigidBody_getCollisionFlags_0:np,_emscripten_bind_btCollisionShape_setLocalScaling_1:vc,_emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0:sa,_emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0:lh,_emscripten_bind_btMatrix3x3_setEulerZYX_3:Jn,_emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0:_r,_emscripten_bind_btConvexHullShape_setLocalScaling_1:fu,_emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0:Tf,_emscripten_bind_btCollisionWorld_getDispatcher_0:Np,_emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1:xf,_emscripten_bind_btTriangleMesh_btTriangleMesh_1:tu,_i64Subtract:dM,_emscripten_bind_btRaycastVehicle_getWheelTransformWS_1:eh,_emscripten_bind_btRigidBody_setDamping_2:Ch,_emscripten_bind_btDynamicsWorld_getDispatcher_0:Ua,_emscripten_bind_btGhostObject_setCollisionFlags_1:Rc,_emscripten_bind_btMatrix3x3_getRotation_1:Kn,_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1:Lo,_emscripten_bind_btCylinderShapeX_setLocalScaling_1:ap,_emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0:ur,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0:Ci,_emscripten_bind_btCompoundShape_setLocalScaling_1:Uu,_emscripten_bind_btOverlappingPairCallback___destroy___0:Eh,_emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0:zi,_emscripten_bind_btVector4_setY_1:al,_emscripten_bind_btRigidBody_setContactProcessingThreshold_1:Vh,_emscripten_bind_btRigidBody_getLinearVelocity_0:Fh,_emscripten_bind_btRigidBody_applyImpulse_2:Dh,_emscripten_bind_btConcaveShape_calculateLocalInertia_2:Gf,_emscripten_bind_btRigidBody_setWorldTransform_1:ip,_emscripten_bind_btRigidBody_setAngularVelocity_1:Rh,_emscripten_bind_btConvexShape_setLocalScaling_1:Fo,_emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2:ba,_free:hM,_emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1:$r,_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0:Ba,_emscripten_bind_RayResultCallback_hasHit_0:Ef,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0:_i,_emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0:Ku,_emscripten_bind_btWheelInfo_get_m_frictionSlip_0:Mf,_emscripten_bind_btConeShapeZ_setLocalScaling_1:$o,_emscripten_bind_btPairCachingGhostObject_setActivationState_1:Jr,_emscripten_bind_btConvexTriangleMeshShape___destroy___0:Xs,_emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1:Pu,_emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1:cp,_emscripten_bind_btRigidBody_getAngularVelocity_0:Ih,_emscripten_bind_btCompoundShape_btCompoundShape_0:Iu,_emscripten_bind_btCompoundShape_btCompoundShape_1:qu,_emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1:Fl,_emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2:Dl,_emscripten_bind_btDispatcherInfo_get_m_useContinuous_0:wr,_emscripten_bind_btRigidBody_updateInertiaTensor_0:jh,_emscripten_bind_btTransform_setOrigin_1:bp,_emscripten_bind_ClosestRayResultCallback_hasHit_0:Na,_emscripten_bind_btCompoundShape_addChildShape_2:Ru,_emscripten_bind_btDispatcher___destroy___0:xa,_emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0:Au,_emscripten_bind_btDiscreteDynamicsWorld___destroy___0:qs,_emscripten_bind_btConvexShape___destroy___0:qo,_memmove:bM,_emscripten_bind_btCapsuleShapeX_setLocalScaling_1:ef,_emscripten_bind_btCollisionObject_setRestitution_1:fs,_emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0:If,_emscripten_bind_LocalConvexResult_get_m_hitFraction_0:yh,_emscripten_bind_btDispatcherInfo_get_m_enableSPU_0:Tr,_emscripten_bind_btQuaternion_w_0:ff,_emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0:$s,_emscripten_bind_btTransform_getRotation_0:Sp,_emscripten_bind_btHingeConstraint_btHingeConstraint_6:fc,_emscripten_bind_btHingeConstraint_btHingeConstraint_7:lc,_emscripten_bind_btHingeConstraint_btHingeConstraint_4:uc,_emscripten_bind_btHingeConstraint_btHingeConstraint_5:ac,_emscripten_bind_btHingeConstraint_btHingeConstraint_2:sc,_emscripten_bind_btHingeConstraint_btHingeConstraint_3:oc,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1:Di,_emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0:Gu,_emscripten_bind_btTypedConstraint___destroy___0:Yp,_emscripten_bind_btCylinderShapeX_btCylinderShapeX_1:up,_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3:Es,_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1:ws,_emscripten_bind_btVector3_z_0:Xl,_emscripten_bind_btSphereShape_btSphereShape_1:Zl,_emscripten_bind_btQuaternion_y_0:uf,_emscripten_bind_btCollisionWorld_addCollisionObject_1:Ap,_emscripten_bind_btCollisionWorld_addCollisionObject_2:Op,_emscripten_bind_btRigidBody_setRestitution_1:Zh,_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1:na,_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0:ta,_emscripten_bind_btRigidBody_getMotionState_0:Uh,_emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1:bf,_emscripten_bind_ConcreteContactResultCallback_addSingleResult_7:Zn,_emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0:lr,_emscripten_bind_btActionInterface___destroy___0:jl,_emscripten_bind_btDefaultMotionState_setWorldTransform_1:da,_emscripten_bind_btDefaultVehicleRaycaster___destroy___0:wf,_emscripten_bind_RayResultCallback_get_m_collisionObject_0:Cf,_emscripten_bind_btPoint2PointConstraint_getPivotInA_0:io,_emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0:$u,_emscripten_bind_btCylinderShape_calculateLocalInertia_2:$p,_emscripten_bind_btGhostObject_setRestitution_1:jc,_emscripten_bind_btDynamicsWorld_addCollisionObject_1:Va,_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0:ra,_emscripten_bind_btDynamicsWorld_addCollisionObject_3:Ja,_emscripten_bind_btDynamicsWorld_addCollisionObject_2:$a,_emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0:As,_emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1:Ol,_emscripten_bind_btVector4_op_mul_1:ll,_emscripten_bind_btCylinderShape_btCylinderShape_1:Xp,_emscripten_bind_btVector3___destroy___0:Gl,_emscripten_bind_btRigidBody_setAngularFactor_1:zh,_emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2:pp,_emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1:Jc,_emscripten_bind_btMotionState_getWorldTransform_1:lo,_emscripten_bind_btDynamicsWorld_getBroadphase_0:Ka,_emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1:Dr,_emscripten_bind_btVector3_x_0:zl,___cxa_is_pointer_type:lM,_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3:li,_emscripten_bind_btCollisionObject_getCollisionShape_0:ts,_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4:ci,_emscripten_bind_btManifoldPoint___destroy___0:Ki,_emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1:bi,_emscripten_bind_btVector4_length_0:rl,_emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1:ma,_emscripten_bind_btCylinderShapeZ_setLocalScaling_1:hp,_emscripten_bind_ClosestConvexResultCallback___destroy___0:ua,_emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0:ic,_emscripten_bind_btCollisionObject_setFriction_1:ls,_emscripten_bind_btDefaultCollisionConfiguration___destroy___0:zo,_emscripten_bind_btRigidBody_setMassProps_2:kh,_emscripten_bind_btVector3_setValue_3:Kl,_emscripten_bind_btGhostObject_getCollisionFlags_0:qc,_emscripten_bind_btCapsuleShapeX___destroy___0:nf,_emscripten_bind_btHingeConstraint_setLimit_4:cc,_emscripten_bind_btHingeConstraint_setLimit_5:hc,_emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1:Jf,_emscripten_bind_btConeShape_setLocalScaling_1:Ho,_emscripten_bind_btGhostObject_getNumOverlappingObjects_0:kc,_emscripten_bind_btGhostObject_getCollisionShape_0:Ac,_emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1:gi,_emscripten_bind_btPersistentManifold_getContactPoint_1:mu,_emscripten_bind_btConeShapeX_calculateLocalInertia_2:Yo,_emscripten_bind_btGhostObject_activate_0:Dc,_emscripten_bind_btGhostObject_activate_1:Pc,_emscripten_bind_btManifoldPoint_getPositionWorldOnB_0:Fi,_emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0:Xi,_emscripten_bind_btConeShapeZ_btConeShapeZ_2:Vo,_emscripten_bind_btSphereShape___destroy___0:nc,_emscripten_bind_btSliderConstraint_setUpperAngLimit_1:bo,_emscripten_bind_btDynamicsWorld_contactPairTest_3:Ga,_emscripten_bind_btCollisionWorld_getPairCache_0:kp,_emscripten_bind_btConeTwistConstraint_setMotorTarget_1:Oo,_emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1:Ju,_emscripten_bind_btWheelInfo_set_m_rollInfluence_1:Pf,_emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0:rc,_emscripten_bind_btGhostObject_forceActivationState_1:_c,_emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0:Yn,_emscripten_bind_VoidPtr___destroy___0:fr,_emscripten_bind_btSliderConstraint_setLowerAngLimit_1:yo,_emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2:Xu,_emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0:Ca,_emscripten_bind_btRaycastVehicle_getRigidBody_0:ih,_emscripten_bind_btWheelInfo_get_m_steering_0:zf,_emscripten_bind_btConstraintSetting_get_m_tau_0:bc,_emscripten_bind_btSliderConstraint___destroy___0:Eo,_emscripten_bind_btCollisionShape___destroy___0:gc,_emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0:Gs,_emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0:mr,_emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0:yi,_emscripten_bind_btPairCachingGhostObject_setCollisionShape_1:oi,_emscripten_bind_btKinematicCharacterController_warp_1:gl,_emscripten_bind_btAxisSweep3___destroy___0:Wr,_emscripten_bind_btTriangleMesh___destroy___0:su,_emscripten_bind_btKinematicCharacterController_preStep_1:yl,_emscripten_bind_btRaycastVehicle_applyEngineForce_2:Yc,_emscripten_bind_btRaycastVehicle_setBrake_2:oh,_emscripten_bind_ConcreteContactResultCallback___destroy___0:er,_emscripten_bind_btCollisionObject___destroy___0:ms,_emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1:_u,_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1:xi,_emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1:Mo,_emscripten_bind_btDispatcherInfo_set_m_timeStep_1:pr,_emscripten_bind_btVector3_btVector3_3:Rl,_emscripten_bind_btVector3_btVector3_0:ql,_emscripten_bind_btBoxShape___destroy___0:Eu,_emscripten_bind_btDiscreteDynamicsWorld_getGravity_0:bs,_emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0:Zu,_emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0:Mu,_emscripten_bind_btConeTwistConstraint___destroy___0:Do,_emscripten_bind_btQuadWord___destroy___0:Wp,_emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1:ka,_emscripten_bind_btRigidBody_setCenterOfMassTransform_1:Th,_emscripten_bind_btConstraintSolver___destroy___0:Qc,_emscripten_bind_btDbvtBroadphase___destroy___0:ar,_emscripten_bind_btCapsuleShape_btCapsuleShape_2:Hr,_emscripten_bind_btTypedConstraint_enableFeedback_1:Gp,_emscripten_bind_btQuadWord_setZ_1:Up,_emscripten_bind_btCapsuleShape_setLocalScaling_1:Br,_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0:Li,_emscripten_bind_btTriangleMeshShape_setLocalScaling_1:ya,_emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1:Ys,_emscripten_bind_btPersistentManifold_btPersistentManifold_0:hu,_emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0:Ks,_emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2:Ta,_emscripten_bind_btVector4___destroy___0:cl,_emscripten_bind_btPairCachingGhostObject_isKinematicObject_0:Zr,_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1:ja,_i64Add:gM,_emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2:Hl,_emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1:Fu,_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0:Ro,_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1:Uo,_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_3:hl,_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0:Ti,_emscripten_bind_btPoint2PointConstraint_getPivotInB_0:so,_emscripten_bind_btKinematicCharacterController_playerStep_2:bl,_emscripten_bind_btDispatcherInfo___destroy___0:Pr,_emscripten_bind_btStaticPlaneShape_setLocalScaling_1:Pl,_emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2:Ws,_emscripten_bind_ContactResultCallback_addSingleResult_7:Wo,_emscripten_bind_btGhostObject_getWorldTransform_0:Ic,_emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0:Ms,_emscripten_bind_LocalConvexResult_set_m_hitFraction_1:bh,_emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2:gf,_emscripten_bind_btDispatcherInfo_get_m_timeStep_0:hr,_emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1:Ou,_emscripten_bind_btDynamicsWorld___destroy___0:Ya,_emscripten_bind_btMotionState___destroy___0:ho,_emscripten_bind_btCollisionObject_setCollisionFlags_1:ps,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1:Ds,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2:Ps,_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3:Hs,_emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1:Of,_emscripten_bind_btRaycastVehicle_getNumWheels_0:rh,_emscripten_bind_btDispatcher_getManifoldByIndexInternal_1:Sa,_emscripten_bind_btWheelInfo_set_m_steering_1:Wf,_emscripten_bind_btPairCachingGhostObject_setWorldTransform_1:si,_emscripten_bind_btConeTwistConstraint_setAngularOnly_1:No,_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4:to,_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2:eo,_emscripten_bind_btKinematicCharacterController_setJumpSpeed_1:El,_emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1:Js,_emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1:ai,_emscripten_bind_btRigidBodyConstructionInfo___destroy___0:Bi,_emscripten_bind_btRigidBody_getWorldTransform_0:tp,_emscripten_bind_btPoint2PointConstraint_setPivotA_1:no,_emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1:Qu,_memcpy:yM,_emscripten_bind_btCapsuleShape_calculateLocalInertia_2:jr,_emscripten_bind_btVector3_y_0:Wl,_emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0:ju,_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2:tr,_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3:rr,_emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0:$c,_emscripten_bind_btGhostObject_setCollisionShape_1:zc,_emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1:Ar,_emscripten_bind_btQuaternion_setW_1:pf,_emscripten_bind_btDiscreteDynamicsWorld_setGravity_1:ys,_emscripten_bind_btGhostObject_isActive_0:Hc,_emscripten_bind_btVector4_z_0:ol,_emscripten_bind_btCollisionObject_forceActivationState_1:is,_emscripten_bind_btKinematicCharacterController_onGround_0:Ml,_emscripten_bind_btRaycastVehicle_getWheelInfo_1:sh,_emscripten_bind_btConeTwistConstraint_setLimit_2:To,_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1:ia,_emscripten_bind_btRigidBody___destroy___0:op,_emscripten_bind_btStridingMeshInterface___destroy___0:Zi,_emscripten_bind_btRigidBody_setSleepingThresholds_2:Nh,_emscripten_bind_btCollisionObject_setWorldTransform_1:ds,_emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0:hh,_emscripten_bind_btManifoldPoint_get_m_localPointA_0:Ii,_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0:hi,_emscripten_bind_btCollisionWorld_getBroadphase_0:_p,_emscripten_bind_btDispatcher_getNumManifolds_0:Ea,_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0:Si,_emscripten_bind_btRigidBody_activate_1:Qh,_emscripten_bind_btRigidBody_activate_0:Kh,_emscripten_bind_btRaycastVehicle___destroy___0:ah,_emscripten_bind_btGhostObject_setActivationState_1:Mc,_emscripten_bind_btCollisionWorld_contactPairTest_3:Pp,_emscripten_bind_btCylinderShapeX___destroy___0:lp,_emscripten_bind_btManifoldPoint_getPositionWorldOnA_0:ji,_emscripten_bind_ContactResultCallback___destroy___0:Xo,_emscripten_bind_btDispatcherInfo_set_m_stepCount_1:vr,_emscripten_bind_btVector4_x_0:il,_emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1:ii,_emscripten_bind_btKinematicCharacterController_getGhostObject_0:Al,_emscripten_bind_btRigidBody_btRigidBody_1:Sh,_emscripten_bind_btTriangleMeshShape___destroy___0:wa,_emscripten_bind_btKinematicCharacterController_setWalkDirection_1:vl,_emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0:wi,_emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0:ku,_emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1:Ji,_emscripten_bind_btKinematicCharacterController_getGravity_0:Cl,_emscripten_bind_btDiscreteDynamicsWorld_addAction_1:Is,_emscripten_bind_btQuaternion_setY_1:cf,_emscripten_bind_btConeShape_calculateLocalInertia_2:Bo,_emscripten_bind_btCylinderShapeX_calculateLocalInertia_2:fp,_emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1:Qs,_llvm_bswap_i32:wM,_emscripten_bind_btSphereShape_setLocalScaling_1:ec,_emscripten_bind_btVector4_w_0:tl,_emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0:$i,_emscripten_bind_btBvhTriangleMeshShape___destroy___0:or,_emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0:La,_emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1:oa,_emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1:Ns,_emscripten_bind_btVector4_y_0:sl,_emscripten_bind_btGeneric6DofConstraint___destroy___0:Yi,_emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0:Du,_emscripten_bind_btConvexHullShape_addPoint_1:uu,_emscripten_bind_btConvexHullShape_addPoint_2:au,_emscripten_bind_btTransform_getOrigin_0:Ep,_emscripten_bind_btHingeConstraint___destroy___0:dc,_emscripten_bind_btHingeConstraint_enableFeedback_1:pc,_emscripten_bind_btConvexShape_calculateLocalInertia_2:Io,_memset:vM,_emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0:Oa,_emscripten_bind_btTriangleMesh_btTriangleMesh_0:eu,_emscripten_bind_btPairCachingGhostObject_getCollisionShape_0:Vr,_emscripten_bind_btTriangleMesh_btTriangleMesh_2:nu,_emscripten_bind_btTransform___destroy___0:Tp,_emscripten_bind_btWheelInfo_set_m_frictionSlip_1:_f,_emscripten_bind_btRigidBody_getCollisionShape_0:Xh,_emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1:Vi,_emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0:Rf,_emscripten_bind_btManifoldPoint_get_m_localPointB_0:Ri,_emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3:Fs,_emscripten_bind_btSliderConstraint_setLowerLinLimit_1:mo,_emscripten_bind_btPoint2PointConstraint_set_m_setting_1:ao,_emscripten_bind_btWheelInfo_get_m_wheelsRadius_0:jf,_emscripten_bind_btRigidBody_setLinearVelocity_1:qh,_emscripten_bind_btVehicleTuning_btVehicleTuning_0:Cu,_emscripten_bind_RayResultCallback_set_m_collisionObject_1:kf,_emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1:Aa,_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0:Pa,_emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1:Uf,_emscripten_bind_btDynamicsWorld_addAction_1:Ra,_emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0:ri,_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1:pi,_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1:ki,_emscripten_bind_btKinematicCharacterController_setFallSpeed_1:wl,_emscripten_bind_btRigidBody_setActivationState_1:$h,_emscripten_bind_ClosestConvexResultCallback_hasHit_0:Vu,_emscripten_bind_btCapsuleShapeZ___destroy___0:yf,_emscripten_bind_LocalShapeInfo_set_m_shapePart_1:Vc,_emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0:Fa,_emscripten_bind_btTriangleMesh_addTriangle_3:ru,_emscripten_bind_btGhostObject_getOverlappingObject_1:Lc,_emscripten_bind_btTriangleMesh_addTriangle_4:iu,_emscripten_bind_btRigidBody_applyTorqueImpulse_1:_h,_emscripten_bind_btRigidBody_setCollisionFlags_1:rp,_emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1:Bf,_emscripten_bind_btConeShape___destroy___0:jo,_emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2:vf,_emscripten_bind_btSliderConstraint_btSliderConstraint_5:vo,_emscripten_bind_btSliderConstraint_btSliderConstraint_3:po,_emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0:Lr,_emscripten_bind_btDynamicsWorld_convexSweepTest_5:Qa,_emscripten_bind_btRigidBody_forceActivationState_1:Jh,_emscripten_bind_btPoint2PointConstraint_setPivotB_1:ro,_emscripten_bind_btGhostPairCallback___destroy___0:Qp,_emscripten_bind_btKinematicCharacterController_getMaxSlope_0:Ll,_emscripten_bind_btSliderConstraint_enableFeedback_1:wo,_emscripten_bind_btRaycastVehicle_addWheel_7:nh,_emscripten_bind_btPairCachingGhostObject_isActive_0:Yr,_emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1:ph,_emscripten_bind_btStaticPlaneShape___destroy___0:Bl,_emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0:Or,_emscripten_bind_btBoxShape_setLocalScaling_1:bu,_emscripten_bind_btConeShapeZ___destroy___0:Ko,_emscripten_bind_btDynamicsWorld_getPairCache_0:Wa,_emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5:js,_emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2:ml,_emscripten_bind_btVector4_btVector4_0:Zf,_emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0:Sr,_emscripten_bind_btVector4_btVector4_4:el,_emscripten_bind_btKinematicCharacterController___destroy___0:_l,_emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1:ch,_emscripten_bind_btConstraintSetting_btConstraintSetting_0:yc,_emscripten_bind_btDiscreteDynamicsWorld_rayTest_3:Os,_emscripten_bind_btGhostPairCallback_btGhostPairCallback_0:Kp,_emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1:Sl,_emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1:Ma,_emscripten_bind_btVehicleTuning_get_m_frictionSlip_0:Hu,__GLOBAL__I_a:kC,runPostSets:pM,stackAlloc:In,stackSave:qn,stackRestore:Rn,setThrew:Un,setTempRet0:Xn,getTempRet0:Vn,dynCall_viiiii:DM,dynCall_vid:PM,dynCall_vi:HM,dynCall_viiidii:BM,dynCall_vii:jM,dynCall_iiiiiiiiiii:FM,dynCall_ii:IM,dynCall_viidi:qM,dynCall_viddiii:RM,dynCall_vidii:UM,dynCall_iiiii:zM,dynCall_vidi:WM,dynCall_diiiiiiii:XM,dynCall_viiiiddddiid:VM,dynCall_diiiii:$M,dynCall_iiii:JM,dynCall_viiiiii:KM,dynCall_iiid:QM,dynCall_di:GM,dynCall_iiiiiii:YM,dynCall_diiidii:ZM,dynCall_viidii:e_,dynCall_viiiiiii:t_,dynCall_viiiiiiiii:n_,dynCall_viiiiiiiiii:r_,dynCall_iii:i_,dynCall_diii:s_,dynCall_diiiiiiiiii:o_,dynCall_viiiid:u_,dynCall_diiiiiiiii:a_,dynCall_did:f_,dynCall_viiiidddddidi:l_,dynCall_diidii:c_,dynCall_diiii:h_,dynCall_iiiiiiiiii:p_,dynCall_viiid:d_,dynCall_viii:v_,dynCall_v:m_,dynCall_viid:g_,dynCall_iidid:y_,dynCall_viiii:b_}}({Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},{abort:Cm,assert:R,min:Sn,invoke_viiiii:Dr,invoke_vid:Pr,invoke_vi:Hr,invoke_viiidii:Br,invoke_vii:jr,invoke_iiiiiiiiiii:Fr,invoke_ii:Ir,invoke_viidi:qr,invoke_viddiii:Rr,invoke_vidii:Ur,invoke_iiiii:zr,invoke_vidi:Wr,invoke_diiiiiiii:Xr,invoke_viiiiddddiid:Vr,invoke_diiiii:$r,invoke_iiii:Jr,invoke_viiiiii:Kr,invoke_iiid:Qr,invoke_di:Gr,invoke_iiiiiii:Yr,invoke_diiidii:Zr,invoke_viidii:ei,invoke_viiiiiii:ti,invoke_viiiiiiiii:ni,invoke_viiiiiiiiii:ri,invoke_iii:ii,invoke_diii:si,invoke_diiiiiiiiii:oi,invoke_viiiid:ui,invoke_diiiiiiiii:ai,invoke_did:fi,invoke_viiiidddddidi:li,invoke_diidii:ci,invoke_diiii:hi,invoke_iiiiiiiiii:pi,invoke_viiid:di,invoke_viii:vi,invoke_v:mi,invoke_viid:gi,invoke_iidid:yi,invoke_viiii:bi,_emscripten_asm_const_double:dr,_cosf:_n,_send:Kn,_sqrtf:Vn,_fmod:sr,___cxa_guard_acquire:hr,___setErrNo:Hn,_vfprintf:Ar,_atan2f:ar,_fmodf:or,___cxa_guard_release:lr,_pwrite:Qn,_acosf:Xn,_asinf:cr,_fabsf:Dn,_sbrk:yr,_llvm_pow_f32:ir,___cxa_begin_catch:vr,_sinf:mr,_fileno:Yn,___resumeException:qn,___cxa_find_matching_catch:Rn,_sysconf:jn,__reallyNegative:Cr,_pthread_getspecific:tr,__ZSt18uncaught_exceptionv:Fn,_emscripten_memcpy_big:gr,_pthread_once:Wn,_pthread_key_create:rr,_write:Gn,___errno_location:Er,_pthread_setspecific:ur,_fputc:Zn,___cxa_throw:Un,_abort:zn,___cxa_allocate_exception:wr,_fwrite:Nr,_time:xr,_fprintf:Lr,_gettimeofday:pr,__formatString:kr,_llvm_trap:Sr,___cxa_pure_virtual:fr,STACKTOP:Tt,STACK_MAX:Nt,tempDoublePtr:An,ABORT:p,cttz_i8:_r,ctlz_i8:Mr,NaN:NaN,Infinity:Infinity,_stderr:Or},Dt);var Ei=e["_emscripten_bind_btCylinderShape___destroy___0"]=wi["_emscripten_bind_btCylinderShape___destroy___0"];var Si=e["_strlen"]=wi["_strlen"];var xi=e["_emscripten_bind_btDispatcherInfo_set_m_useContinuous_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_useContinuous_1"];var Ti=e["_emscripten_bind_btCollisionObject_isActive_0"]=wi["_emscripten_bind_btCollisionObject_isActive_0"];var Ni=e["_emscripten_bind_btVehicleTuning_set_m_frictionSlip_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_frictionSlip_1"];var Ci=e["_emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4"];var ki=e["_emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0"];var Li=e["_emscripten_bind_btQuaternion_setX_1"]=wi["_emscripten_bind_btQuaternion_setX_1"];var Ai=e["_emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0"];var Oi=e["_emscripten_bind_btQuaternion_setZ_1"]=wi["_emscripten_bind_btQuaternion_setZ_1"];var Mi=e["_emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0"]=wi["_emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0"];var _i=e["_emscripten_bind_btKinematicCharacterController_setMaxSlope_1"]=wi["_emscripten_bind_btKinematicCharacterController_setMaxSlope_1"];var Di=e["_emscripten_bind_btQuadWord_z_0"]=wi["_emscripten_bind_btQuadWord_z_0"];var Pi=e["_emscripten_bind_btTransform_setIdentity_0"]=wi["_emscripten_bind_btTransform_setIdentity_0"];var Hi=e["_emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0"]=wi["_emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0"];var Bi=e["_emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0"]=wi["_emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0"];var ji=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0"];var Fi=e["_emscripten_bind_btCollisionDispatcher___destroy___0"]=wi["_emscripten_bind_btCollisionDispatcher___destroy___0"];var Ii=e["_emscripten_bind_btRigidBody_applyCentralImpulse_1"]=wi["_emscripten_bind_btRigidBody_applyCentralImpulse_1"];var qi=e["_emscripten_bind_btDefaultMotionState_getWorldTransform_1"]=wi["_emscripten_bind_btDefaultMotionState_getWorldTransform_1"];var Ri=e["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1"];var Ui=e["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3"];var zi=e["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2"];var Wi=e["_emscripten_bind_btVector3_op_mul_1"]=wi["_emscripten_bind_btVector3_op_mul_1"];var Xi=e["_emscripten_bind_btDynamicsWorld_rayTest_3"]=wi["_emscripten_bind_btDynamicsWorld_rayTest_3"];var Vi=e["_emscripten_bind_btRaycastVehicle_updateWheelTransform_2"]=wi["_emscripten_bind_btRaycastVehicle_updateWheelTransform_2"];var $i=e["_emscripten_bind_btQuadWord_x_0"]=wi["_emscripten_bind_btQuadWord_x_0"];var Ji=e["_emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0"]=wi["_emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0"];var Ki=e["_emscripten_bind_btCollisionObject_isKinematicObject_0"]=wi["_emscripten_bind_btCollisionObject_isKinematicObject_0"];var Qi=e["_emscripten_bind_ConvexResultCallback___destroy___0"]=wi["_emscripten_bind_ConvexResultCallback___destroy___0"];var Gi=e["_emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1"];var Yi=e["_emscripten_bind_btRigidBody_getCenterOfMassTransform_0"]=wi["_emscripten_bind_btRigidBody_getCenterOfMassTransform_0"];var Zi=e["_emscripten_bind_btGhostObject_isKinematicObject_0"]=wi["_emscripten_bind_btGhostObject_isKinematicObject_0"];var es=e["_emscripten_bind_btCapsuleShape___destroy___0"]=wi["_emscripten_bind_btCapsuleShape___destroy___0"];var ts=e["_emscripten_bind_btCollisionObject_activate_1"]=wi["_emscripten_bind_btCollisionObject_activate_1"];var ns=e["_emscripten_bind_btCollisionObject_activate_0"]=wi["_emscripten_bind_btCollisionObject_activate_0"];var rs=e["_emscripten_bind_btKinematicCharacterController_setUpAxis_1"]=wi["_emscripten_bind_btKinematicCharacterController_setUpAxis_1"];var is=e["_emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1"];var ss=e["_emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1"]=wi["_emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1"];var os=e["_emscripten_bind_btVector3_setX_1"]=wi["_emscripten_bind_btVector3_setX_1"];var us=e["_emscripten_bind_btCollisionConfiguration___destroy___0"]=wi["_emscripten_bind_btCollisionConfiguration___destroy___0"];var as=e["_emscripten_bind_btQuaternion_btQuaternion_4"]=wi["_emscripten_bind_btQuaternion_btQuaternion_4"];var fs=e["_emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1"]=wi["_emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1"];var ls=e["_emscripten_bind_btManifoldPoint_set_m_localPointB_1"]=wi["_emscripten_bind_btManifoldPoint_set_m_localPointB_1"];var cs=e["_emscripten_bind_btVector3_setZ_1"]=wi["_emscripten_bind_btVector3_setZ_1"];var hs=e["_emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0"]=wi["_emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0"];var ps=e["_emscripten_bind_btQuaternion_setValue_4"]=wi["_emscripten_bind_btQuaternion_setValue_4"];var ds=e["_emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1"];var vs=e["_emscripten_bind_LocalShapeInfo___destroy___0"]=wi["_emscripten_bind_LocalShapeInfo___destroy___0"];var ms=e["_emscripten_bind_btQuadWord_setY_1"]=wi["_emscripten_bind_btQuadWord_setY_1"];var gs=e["_emscripten_bind_btRigidBody_isKinematicObject_0"]=wi["_emscripten_bind_btRigidBody_isKinematicObject_0"];var ys=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1"];var bs=e["_emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0"]=wi["_emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0"];var ws=e["_emscripten_bind_btConeTwistConstraint_setDamping_1"]=wi["_emscripten_bind_btConeTwistConstraint_setDamping_1"];var Es=e["_emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0"]=wi["_emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0"];var Ss=e["_emscripten_bind_btCollisionWorld___destroy___0"]=wi["_emscripten_bind_btCollisionWorld___destroy___0"];var xs=e["_emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0"]=wi["_emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0"];var Ts=e["_emscripten_bind_btBoxShape_btBoxShape_1"]=wi["_emscripten_bind_btBoxShape_btBoxShape_1"];var Ns=e["_emscripten_bind_btPersistentManifold_getBody1_0"]=wi["_emscripten_bind_btPersistentManifold_getBody1_0"];var Cs=e["_emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1"];var ks=e["_emscripten_bind_btKinematicCharacterController_setGravity_1"]=wi["_emscripten_bind_btKinematicCharacterController_setGravity_1"];var Ls=e["_emscripten_bind_btConstraintSetting_set_m_impulseClamp_1"]=wi["_emscripten_bind_btConstraintSetting_set_m_impulseClamp_1"];var As=e["_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5"]=wi["_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5"];var Os=e["_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3"]=wi["_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3"];var Ms=e["_emscripten_bind_LocalShapeInfo_get_m_shapePart_0"]=wi["_emscripten_bind_LocalShapeInfo_get_m_shapePart_0"];var _s=e["_emscripten_bind_btWheelInfo_get_m_rollInfluence_0"]=wi["_emscripten_bind_btWheelInfo_get_m_rollInfluence_0"];var Ds=e["_emscripten_bind_btVector4_setValue_4"]=wi["_emscripten_bind_btVector4_setValue_4"];var Ps=e["_emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1"]=wi["_emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1"];var Hs=e["_emscripten_bind_btDynamicsWorld_getDispatchInfo_0"]=wi["_emscripten_bind_btDynamicsWorld_getDispatchInfo_0"];var Bs=e["_emscripten_bind_btVector3_length_0"]=wi["_emscripten_bind_btVector3_length_0"];var js=e["_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2"]=wi["_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2"];var Fs=e["_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1"]=wi["_emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1"];var Is=e["_emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1"];var qs=e["_emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1"]=wi["_emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1"];var Rs=e["_emscripten_bind_btPairCachingGhostObject___destroy___0"]=wi["_emscripten_bind_btPairCachingGhostObject___destroy___0"];var Us=e["_emscripten_bind_btPairCachingGhostObject_activate_0"]=wi["_emscripten_bind_btPairCachingGhostObject_activate_0"];var zs=e["_emscripten_bind_btPairCachingGhostObject_activate_1"]=wi["_emscripten_bind_btPairCachingGhostObject_activate_1"];var Ws=e["_emscripten_bind_btPairCachingGhostObject_forceActivationState_1"]=wi["_emscripten_bind_btPairCachingGhostObject_forceActivationState_1"];var Xs=e["_emscripten_bind_btDefaultMotionState___destroy___0"]=wi["_emscripten_bind_btDefaultMotionState___destroy___0"];var Vs=e["_emscripten_bind_btDispatcherInfo_get_m_stepCount_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_stepCount_0"];var $s=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1"];var Js=e["_emscripten_bind_btQuadWord_setW_1"]=wi["_emscripten_bind_btQuadWord_setW_1"];var Ks=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0"];var Qs=e["_emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2"]=wi["_emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2"];var Gs=e["_emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0"]=wi["_emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0"];var Ys=e["_emscripten_bind_btRigidBody_setLinearFactor_1"]=wi["_emscripten_bind_btRigidBody_setLinearFactor_1"];var Zs=e["_emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1"];var eo=e["_emscripten_bind_btRaycastVehicle_setSteeringValue_2"]=wi["_emscripten_bind_btRaycastVehicle_setSteeringValue_2"];var to=e["_emscripten_bind_btPoint2PointConstraint___destroy___0"]=wi["_emscripten_bind_btPoint2PointConstraint___destroy___0"];var no=e["_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2"];var ro=e["_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1"];var io=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1"];var br=e["_malloc"]=wi["_malloc"];var so=e["_emscripten_bind_btDispatcherInfo_get_m_useEpa_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_useEpa_0"];var oo=e["_emscripten_bind_btTransform_btTransform_2"]=wi["_emscripten_bind_btTransform_btTransform_2"];var uo=e["_emscripten_bind_btTransform_btTransform_0"]=wi["_emscripten_bind_btTransform_btTransform_0"];var ao=e["_emscripten_bind_btWheelInfo_set_m_wheelsRadius_1"]=wi["_emscripten_bind_btWheelInfo_set_m_wheelsRadius_1"];var fo=e["_emscripten_bind_btDispatcherInfo_set_m_enableSPU_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_enableSPU_1"];var lo=e["_emscripten_bind_btRaycastVehicle_setCoordinateSystem_3"]=wi["_emscripten_bind_btRaycastVehicle_setCoordinateSystem_3"];var co=e["_emscripten_bind_btCollisionObject_setActivationState_1"]=wi["_emscripten_bind_btCollisionObject_setActivationState_1"];var ho=e["_emscripten_bind_btPersistentManifold___destroy___0"]=wi["_emscripten_bind_btPersistentManifold___destroy___0"];var po=e["_emscripten_bind_btConstraintSetting_get_m_impulseClamp_0"]=wi["_emscripten_bind_btConstraintSetting_get_m_impulseClamp_0"];var vo=e["_emscripten_bind_btCylinderShapeZ___destroy___0"]=wi["_emscripten_bind_btCylinderShapeZ___destroy___0"];var mo=e["_emscripten_bind_btMatrix3x3___destroy___0"]=wi["_emscripten_bind_btMatrix3x3___destroy___0"];var go=e["_emscripten_bind_ConvexResultCallback_hasHit_0"]=wi["_emscripten_bind_ConvexResultCallback_hasHit_0"];var yo=e["_emscripten_bind_btCollisionShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btCollisionShape_calculateLocalInertia_2"];var bo=e["_emscripten_bind_btCollisionWorld_convexSweepTest_5"]=wi["_emscripten_bind_btCollisionWorld_convexSweepTest_5"];var wo=e["_emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1"];var Eo=e["_emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2"]=wi["_emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2"];var So=e["_emscripten_bind_btConstraintSetting_set_m_damping_1"]=wi["_emscripten_bind_btConstraintSetting_set_m_damping_1"];var xo=e["_emscripten_bind_btVehicleRaycaster___destroy___0"]=wi["_emscripten_bind_btVehicleRaycaster___destroy___0"];var To=e["_emscripten_bind_btRigidBody_applyForce_2"]=wi["_emscripten_bind_btRigidBody_applyForce_2"];var No=e["_emscripten_bind_btConeShapeZ_calculateLocalInertia_2"]=wi["_emscripten_bind_btConeShapeZ_calculateLocalInertia_2"];var Co=e["_emscripten_bind_btConstraintSetting_set_m_tau_1"]=wi["_emscripten_bind_btConstraintSetting_set_m_tau_1"];var ko=e["_emscripten_bind_btConvexHullShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btConvexHullShape_calculateLocalInertia_2"];var Lo=e["_emscripten_bind_btSphereShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btSphereShape_calculateLocalInertia_2"];var Ao=e["_emscripten_bind_btPoint2PointConstraint_get_m_setting_0"]=wi["_emscripten_bind_btPoint2PointConstraint_get_m_setting_0"];var Oo=e["_emscripten_bind_LocalConvexResult_LocalConvexResult_5"]=wi["_emscripten_bind_LocalConvexResult_LocalConvexResult_5"];var Mo=e["_emscripten_bind_btGhostObject_setFriction_1"]=wi["_emscripten_bind_btGhostObject_setFriction_1"];var _o=e["_emscripten_bind_btPairCachingGhostObject_getWorldTransform_0"]=wi["_emscripten_bind_btPairCachingGhostObject_getWorldTransform_0"];var Do=e["_emscripten_bind_btRigidBody_setFriction_1"]=wi["_emscripten_bind_btRigidBody_setFriction_1"];var Po=e["_emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1"]=wi["_emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1"];var Ho=e["_emscripten_bind_btGhostObject_setWorldTransform_1"]=wi["_emscripten_bind_btGhostObject_setWorldTransform_1"];var Bo=e["_emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1"];var jo=e["_emscripten_bind_btConvexHullShape___destroy___0"]=wi["_emscripten_bind_btConvexHullShape___destroy___0"];var Fo=e["_emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0"];var Io=e["_emscripten_bind_btVector4_setX_1"]=wi["_emscripten_bind_btVector4_setX_1"];var qo=e["_emscripten_bind_btKinematicCharacterController_jump_0"]=wi["_emscripten_bind_btKinematicCharacterController_jump_0"];var Ro=e["_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1"]=wi["_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1"];var Uo=e["_emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1"]=wi["_emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1"];var zo=e["_emscripten_bind_btRigidBody_upcast_1"]=wi["_emscripten_bind_btRigidBody_upcast_1"];var Wo=e["_emscripten_bind_btCollisionObject_getWorldTransform_0"]=wi["_emscripten_bind_btCollisionObject_getWorldTransform_0"];var Xo=e["_emscripten_bind_btVector4_setZ_1"]=wi["_emscripten_bind_btVector4_setZ_1"];var Vo=e["_emscripten_bind_btQuadWord_y_0"]=wi["_emscripten_bind_btQuadWord_y_0"];var $o=e["___cxa_can_catch"]=wi["___cxa_can_catch"];var Jo=e["_emscripten_bind_btTransform_getBasis_0"]=wi["_emscripten_bind_btTransform_getBasis_0"];var Ko=e["_emscripten_bind_btPairCachingGhostObject_setFriction_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setFriction_1"];var Qo=e["_emscripten_bind_btDispatcherInfo_set_m_useEpa_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_useEpa_1"];var Go=e["_emscripten_bind_btCollisionDispatcher_getNumManifolds_0"]=wi["_emscripten_bind_btCollisionDispatcher_getNumManifolds_0"];var Yo=e["_emscripten_bind_ClosestRayResultCallback___destroy___0"]=wi["_emscripten_bind_ClosestRayResultCallback___destroy___0"];var Zo=e["_emscripten_bind_btQuadWord_w_0"]=wi["_emscripten_bind_btQuadWord_w_0"];var eu=e["_emscripten_bind_btCompoundShape___destroy___0"]=wi["_emscripten_bind_btCompoundShape___destroy___0"];var tu=e["_emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2"];var nu=e["_emscripten_bind_btGhostObject_btGhostObject_0"]=wi["_emscripten_bind_btGhostObject_btGhostObject_0"];var ru=e["_emscripten_bind_btConeShape_btConeShape_2"]=wi["_emscripten_bind_btConeShape_btConeShape_2"];var iu=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1"];var su=e["_emscripten_bind_btManifoldPoint_set_m_localPointA_1"]=wi["_emscripten_bind_btManifoldPoint_set_m_localPointA_1"];var ou=e["_emscripten_bind_btCollisionObject_setCollisionShape_1"]=wi["_emscripten_bind_btCollisionObject_setCollisionShape_1"];var uu=e["_emscripten_bind_btWheelInfo___destroy___0"]=wi["_emscripten_bind_btWheelInfo___destroy___0"];var au=e["_emscripten_bind_btTransform_setRotation_1"]=wi["_emscripten_bind_btTransform_setRotation_1"];var fu=e["_emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0"]=wi["_emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0"];var lu=e["_emscripten_bind_btPoint2PointConstraint_enableFeedback_1"]=wi["_emscripten_bind_btPoint2PointConstraint_enableFeedback_1"];var cu=e["_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1"];var hu=e["_emscripten_bind_btAxisSweep3_btAxisSweep3_2"]=wi["_emscripten_bind_btAxisSweep3_btAxisSweep3_2"];var pu=e["_emscripten_bind_btAxisSweep3_btAxisSweep3_3"]=wi["_emscripten_bind_btAxisSweep3_btAxisSweep3_3"];var du=e["_emscripten_bind_btBoxShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btBoxShape_calculateLocalInertia_2"];var vu=e["_emscripten_bind_btVector3_setY_1"]=wi["_emscripten_bind_btVector3_setY_1"];var mu=e["_emscripten_bind_btAxisSweep3_btAxisSweep3_4"]=wi["_emscripten_bind_btAxisSweep3_btAxisSweep3_4"];var gu=e["_emscripten_bind_btAxisSweep3_btAxisSweep3_5"]=wi["_emscripten_bind_btAxisSweep3_btAxisSweep3_5"];var yu=e["_emscripten_bind_btQuadWord_setX_1"]=wi["_emscripten_bind_btQuadWord_setX_1"];var bu=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0"];var wu=e["_emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1"];var Eu=e["_emscripten_bind_btOverlappingPairCache___destroy___0"]=wi["_emscripten_bind_btOverlappingPairCache___destroy___0"];var Su=e["_emscripten_bind_btConstraintSetting___destroy___0"]=wi["_emscripten_bind_btConstraintSetting___destroy___0"];var xu=e["_emscripten_bind_RayResultCallback___destroy___0"]=wi["_emscripten_bind_RayResultCallback___destroy___0"];var Tu=e["_emscripten_bind_btPersistentManifold_getBody0_0"]=wi["_emscripten_bind_btPersistentManifold_getBody0_0"];var Nu=e["_emscripten_bind_btConeShapeX_btConeShapeX_2"]=wi["_emscripten_bind_btConeShapeX_btConeShapeX_2"];var Cu=e["_emscripten_bind_btConeTwistConstraint_enableFeedback_1"]=wi["_emscripten_bind_btConeTwistConstraint_enableFeedback_1"];var ku=e["_emscripten_bind_btCapsuleShapeZ_setLocalScaling_1"]=wi["_emscripten_bind_btCapsuleShapeZ_setLocalScaling_1"];var Lu=e["_emscripten_bind_btRigidBody_applyTorque_1"]=wi["_emscripten_bind_btRigidBody_applyTorque_1"];var Au=e["_emscripten_bind_btSliderConstraint_setUpperLinLimit_1"]=wi["_emscripten_bind_btSliderConstraint_setUpperLinLimit_1"];var Ou=e["_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2"]=wi["_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2"];var Mu=e["_emscripten_bind_btConcaveShape___destroy___0"]=wi["_emscripten_bind_btConcaveShape___destroy___0"];var _u=e["_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4"]=wi["_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4"];var Du=e["_emscripten_bind_btQuaternion_x_0"]=wi["_emscripten_bind_btQuaternion_x_0"];var Pu=e["_emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1"]=wi["_emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1"];var Hu=e["_emscripten_bind_btConcaveShape_setLocalScaling_1"]=wi["_emscripten_bind_btConcaveShape_setLocalScaling_1"];var Bu=e["_emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0"];var ju=e["_emscripten_bind_btConeShapeX_setLocalScaling_1"]=wi["_emscripten_bind_btConeShapeX_setLocalScaling_1"];var Fu=e["_emscripten_bind_btQuaternion_z_0"]=wi["_emscripten_bind_btQuaternion_z_0"];var Iu=e["_emscripten_bind_btConvexHullShape_btConvexHullShape_0"]=wi["_emscripten_bind_btConvexHullShape_btConvexHullShape_0"];var qu=e["_emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1"]=wi["_emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1"];var Ru=e["_emscripten_bind_btConstraintSetting_get_m_damping_0"]=wi["_emscripten_bind_btConstraintSetting_get_m_damping_0"];var Uu=e["_emscripten_bind_btGhostObject___destroy___0"]=wi["_emscripten_bind_btGhostObject___destroy___0"];var zu=e["_emscripten_bind_btGhostObject_setContactProcessingThreshold_1"]=wi["_emscripten_bind_btGhostObject_setContactProcessingThreshold_1"];var Wu=e["_emscripten_bind_btRigidBody_applyCentralForce_1"]=wi["_emscripten_bind_btRigidBody_applyCentralForce_1"];var Xu=e["_emscripten_bind_btQuaternion___destroy___0"]=wi["_emscripten_bind_btQuaternion___destroy___0"];var Vu=e["_emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1"]=wi["_emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1"];var $u=e["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_2"]=wi["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_2"];var Ju=e["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_0"]=wi["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_0"];var Ku=e["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_1"]=wi["_emscripten_bind_btDefaultMotionState_btDefaultMotionState_1"];var Qu=e["_emscripten_bind_btKinematicCharacterController_canJump_0"]=wi["_emscripten_bind_btKinematicCharacterController_canJump_0"];var Gu=e["_emscripten_bind_btRigidBody_isActive_0"]=wi["_emscripten_bind_btRigidBody_isActive_0"];var Yu=e["_emscripten_bind_btRaycastVehicle_btRaycastVehicle_3"]=wi["_emscripten_bind_btRaycastVehicle_btRaycastVehicle_3"];var Zu=e["_emscripten_bind_btMotionState_setWorldTransform_1"]=wi["_emscripten_bind_btMotionState_setWorldTransform_1"];var ea=e["_emscripten_bind_btCylinderShape_setLocalScaling_1"]=wi["_emscripten_bind_btCylinderShape_setLocalScaling_1"];var ta=e["_emscripten_bind_btCollisionWorld_rayTest_3"]=wi["_emscripten_bind_btCollisionWorld_rayTest_3"];var na=e["_emscripten_bind_btCompoundShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btCompoundShape_calculateLocalInertia_2"];var ra=e["_emscripten_bind_btCollisionWorld_getDispatchInfo_0"]=wi["_emscripten_bind_btCollisionWorld_getDispatchInfo_0"];var ia=e["_emscripten_bind_btRigidBody_setCollisionShape_1"]=wi["_emscripten_bind_btRigidBody_setCollisionShape_1"];var sa=e["_emscripten_bind_btConeShapeX___destroy___0"]=wi["_emscripten_bind_btConeShapeX___destroy___0"];var oa=e["_emscripten_bind_btCollisionObject_getCollisionFlags_0"]=wi["_emscripten_bind_btCollisionObject_getCollisionFlags_0"];var ua=e["_emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1"];var aa=e["_emscripten_bind_btConeTwistConstraint_enableMotor_1"]=wi["_emscripten_bind_btConeTwistConstraint_enableMotor_1"];var fa=e["_emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1"]=wi["_emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1"];var la=e["_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4"]=wi["_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4"];var ca=e["_emscripten_bind_btPairCachingGhostObject_setRestitution_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setRestitution_1"];var ha=e["_emscripten_bind_btBroadphaseInterface___destroy___0"]=wi["_emscripten_bind_btBroadphaseInterface___destroy___0"];var pa=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1"];var da=e["_emscripten_bind_btCollisionObject_setContactProcessingThreshold_1"]=wi["_emscripten_bind_btCollisionObject_setContactProcessingThreshold_1"];var va=e["_emscripten_bind_btPersistentManifold_getNumContacts_0"]=wi["_emscripten_bind_btPersistentManifold_getNumContacts_0"];var ma=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0"];var ga=e["_emscripten_bind_LocalConvexResult___destroy___0"]=wi["_emscripten_bind_LocalConvexResult___destroy___0"];var ya=e["_emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0"]=wi["_emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0"];var ba=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1"];var wa=e["_emscripten_bind_btCollisionWorld_addCollisionObject_3"]=wi["_emscripten_bind_btCollisionWorld_addCollisionObject_3"];var Ea=e["_emscripten_bind_btRigidBody_getCollisionFlags_0"]=wi["_emscripten_bind_btRigidBody_getCollisionFlags_0"];var Sa=e["_emscripten_bind_btCollisionShape_setLocalScaling_1"]=wi["_emscripten_bind_btCollisionShape_setLocalScaling_1"];var xa=e["_emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0"];var Ta=e["_emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0"]=wi["_emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0"];var Na=e["_emscripten_bind_btMatrix3x3_setEulerZYX_3"]=wi["_emscripten_bind_btMatrix3x3_setEulerZYX_3"];var Ca=e["_emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0"];var ka=e["_emscripten_bind_btConvexHullShape_setLocalScaling_1"]=wi["_emscripten_bind_btConvexHullShape_setLocalScaling_1"];var La=e["_emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0"]=wi["_emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0"];var Aa=e["_emscripten_bind_btCollisionWorld_getDispatcher_0"]=wi["_emscripten_bind_btCollisionWorld_getDispatcher_0"];var Oa=e["_emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1"]=wi["_emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1"];var Ma=e["_emscripten_bind_btTriangleMesh_btTriangleMesh_1"]=wi["_emscripten_bind_btTriangleMesh_btTriangleMesh_1"];var _a=e["_i64Subtract"]=wi["_i64Subtract"];var Da=e["_emscripten_bind_btRaycastVehicle_getWheelTransformWS_1"]=wi["_emscripten_bind_btRaycastVehicle_getWheelTransformWS_1"];var Pa=e["_emscripten_bind_btRigidBody_setDamping_2"]=wi["_emscripten_bind_btRigidBody_setDamping_2"];var Ha=e["_emscripten_bind_btDynamicsWorld_getDispatcher_0"]=wi["_emscripten_bind_btDynamicsWorld_getDispatcher_0"];var Ba=e["_emscripten_bind_btGhostObject_setCollisionFlags_1"]=wi["_emscripten_bind_btGhostObject_setCollisionFlags_1"];var ja=e["_emscripten_bind_btMatrix3x3_getRotation_1"]=wi["_emscripten_bind_btMatrix3x3_getRotation_1"];var Fa=e["_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1"]=wi["_emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1"];var Ia=e["_emscripten_bind_btCylinderShapeX_setLocalScaling_1"]=wi["_emscripten_bind_btCylinderShapeX_setLocalScaling_1"];var qa=e["_emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0"]=wi["_emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0"];var Ra=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0"];var Ua=e["_emscripten_bind_btCompoundShape_setLocalScaling_1"]=wi["_emscripten_bind_btCompoundShape_setLocalScaling_1"];var za=e["_emscripten_bind_btOverlappingPairCallback___destroy___0"]=wi["_emscripten_bind_btOverlappingPairCallback___destroy___0"];var Wa=e["_emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0"]=wi["_emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0"];var Xa=e["_emscripten_bind_btVector4_setY_1"]=wi["_emscripten_bind_btVector4_setY_1"];var Va=e["_emscripten_bind_btRigidBody_setContactProcessingThreshold_1"]=wi["_emscripten_bind_btRigidBody_setContactProcessingThreshold_1"];var $a=e["_emscripten_bind_btRigidBody_getLinearVelocity_0"]=wi["_emscripten_bind_btRigidBody_getLinearVelocity_0"];var Ja=e["_emscripten_bind_btRigidBody_applyImpulse_2"]=wi["_emscripten_bind_btRigidBody_applyImpulse_2"];var Ka=e["_emscripten_bind_btConcaveShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btConcaveShape_calculateLocalInertia_2"];var Qa=e["_emscripten_bind_btRigidBody_setWorldTransform_1"]=wi["_emscripten_bind_btRigidBody_setWorldTransform_1"];var Ga=e["_emscripten_bind_btRigidBody_setAngularVelocity_1"]=wi["_emscripten_bind_btRigidBody_setAngularVelocity_1"];var Ya=e["_emscripten_bind_btConvexShape_setLocalScaling_1"]=wi["_emscripten_bind_btConvexShape_setLocalScaling_1"];var Za=e["_emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2"];var ef=e["_free"]=wi["_free"];var tf=e["_emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1"];var nf=e["_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0"];var rf=e["_emscripten_bind_RayResultCallback_hasHit_0"]=wi["_emscripten_bind_RayResultCallback_hasHit_0"];var sf=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0"];var of=e["_emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0"];var uf=e["_emscripten_bind_btWheelInfo_get_m_frictionSlip_0"]=wi["_emscripten_bind_btWheelInfo_get_m_frictionSlip_0"];var af=e["_emscripten_bind_btConeShapeZ_setLocalScaling_1"]=wi["_emscripten_bind_btConeShapeZ_setLocalScaling_1"];var ff=e["_emscripten_bind_btPairCachingGhostObject_setActivationState_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setActivationState_1"];var lf=e["_emscripten_bind_btConvexTriangleMeshShape___destroy___0"]=wi["_emscripten_bind_btConvexTriangleMeshShape___destroy___0"];var cf=e["_emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1"];var hf=e["_emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1"]=wi["_emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1"];var pf=e["_emscripten_bind_btRigidBody_getAngularVelocity_0"]=wi["_emscripten_bind_btRigidBody_getAngularVelocity_0"];var df=e["_emscripten_bind_btCompoundShape_btCompoundShape_0"]=wi["_emscripten_bind_btCompoundShape_btCompoundShape_0"];var vf=e["_emscripten_bind_btCompoundShape_btCompoundShape_1"]=wi["_emscripten_bind_btCompoundShape_btCompoundShape_1"];var mf=e["_emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1"]=wi["_emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1"];var gf=e["_emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2"]=wi["_emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2"];var yf=e["_emscripten_bind_btDispatcherInfo_get_m_useContinuous_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_useContinuous_0"];var bf=e["_emscripten_bind_btRigidBody_updateInertiaTensor_0"]=wi["_emscripten_bind_btRigidBody_updateInertiaTensor_0"];var wf=e["_emscripten_bind_btTransform_setOrigin_1"]=wi["_emscripten_bind_btTransform_setOrigin_1"];var Ef=e["_emscripten_bind_ClosestRayResultCallback_hasHit_0"]=wi["_emscripten_bind_ClosestRayResultCallback_hasHit_0"];var Sf=e["_emscripten_bind_btCompoundShape_addChildShape_2"]=wi["_emscripten_bind_btCompoundShape_addChildShape_2"];var xf=e["_emscripten_bind_btDispatcher___destroy___0"]=wi["_emscripten_bind_btDispatcher___destroy___0"];var Tf=e["_emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0"];var Nf=e["_emscripten_bind_btDiscreteDynamicsWorld___destroy___0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld___destroy___0"];var Cf=e["_emscripten_bind_btConvexShape___destroy___0"]=wi["_emscripten_bind_btConvexShape___destroy___0"];var kf=e["_memmove"]=wi["_memmove"];var Lf=e["_emscripten_bind_btCapsuleShapeX_setLocalScaling_1"]=wi["_emscripten_bind_btCapsuleShapeX_setLocalScaling_1"];var Af=e["_emscripten_bind_btCollisionObject_setRestitution_1"]=wi["_emscripten_bind_btCollisionObject_setRestitution_1"];var Of=e["_emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0"]=wi["_emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0"];var Mf=e["_emscripten_bind_LocalConvexResult_get_m_hitFraction_0"]=wi["_emscripten_bind_LocalConvexResult_get_m_hitFraction_0"];var _f=e["_emscripten_bind_btDispatcherInfo_get_m_enableSPU_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_enableSPU_0"];var Df=e["_emscripten_bind_btQuaternion_w_0"]=wi["_emscripten_bind_btQuaternion_w_0"];var Pf=e["_emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0"]=wi["_emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0"];var Hf=e["_emscripten_bind_btTransform_getRotation_0"]=wi["_emscripten_bind_btTransform_getRotation_0"];var Bf=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_6"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_6"];var jf=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_7"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_7"];var Ff=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_4"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_4"];var If=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_5"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_5"];var qf=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_2"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_2"];var Rf=e["_emscripten_bind_btHingeConstraint_btHingeConstraint_3"]=wi["_emscripten_bind_btHingeConstraint_btHingeConstraint_3"];var Uf=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1"];var zf=e["_emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0"];var Wf=e["_emscripten_bind_btTypedConstraint___destroy___0"]=wi["_emscripten_bind_btTypedConstraint___destroy___0"];var Xf=e["_emscripten_bind_btCylinderShapeX_btCylinderShapeX_1"]=wi["_emscripten_bind_btCylinderShapeX_btCylinderShapeX_1"];var Vf=e["_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3"];var $f=e["_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1"];var Jf=e["_emscripten_bind_btVector3_z_0"]=wi["_emscripten_bind_btVector3_z_0"];var Kf=e["_emscripten_bind_btSphereShape_btSphereShape_1"]=wi["_emscripten_bind_btSphereShape_btSphereShape_1"];var Qf=e["_emscripten_bind_btQuaternion_y_0"]=wi["_emscripten_bind_btQuaternion_y_0"];var Gf=e["_emscripten_bind_btCollisionWorld_addCollisionObject_1"]=wi["_emscripten_bind_btCollisionWorld_addCollisionObject_1"];var Yf=e["_emscripten_bind_btCollisionWorld_addCollisionObject_2"]=wi["_emscripten_bind_btCollisionWorld_addCollisionObject_2"];var Zf=e["_emscripten_bind_btRigidBody_setRestitution_1"]=wi["_emscripten_bind_btRigidBody_setRestitution_1"];var el=e["_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1"];var tl=e["_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0"];var nl=e["_emscripten_bind_btRigidBody_getMotionState_0"]=wi["_emscripten_bind_btRigidBody_getMotionState_0"];var rl=e["_emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1"]=wi["_emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1"];var il=e["_emscripten_bind_ConcreteContactResultCallback_addSingleResult_7"]=wi["_emscripten_bind_ConcreteContactResultCallback_addSingleResult_7"];var sl=e["_emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0"]=wi["_emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0"];var ol=e["_emscripten_bind_btActionInterface___destroy___0"]=wi["_emscripten_bind_btActionInterface___destroy___0"];var ul=e["_emscripten_bind_btDefaultMotionState_setWorldTransform_1"]=wi["_emscripten_bind_btDefaultMotionState_setWorldTransform_1"];var al=e["_emscripten_bind_btDefaultVehicleRaycaster___destroy___0"]=wi["_emscripten_bind_btDefaultVehicleRaycaster___destroy___0"];var fl=e["_emscripten_bind_RayResultCallback_get_m_collisionObject_0"]=wi["_emscripten_bind_RayResultCallback_get_m_collisionObject_0"];var ll=e["_emscripten_bind_btPoint2PointConstraint_getPivotInA_0"]=wi["_emscripten_bind_btPoint2PointConstraint_getPivotInA_0"];var cl=e["_emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0"];var hl=e["_emscripten_bind_btCylinderShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btCylinderShape_calculateLocalInertia_2"];var pl=e["_emscripten_bind_btGhostObject_setRestitution_1"]=wi["_emscripten_bind_btGhostObject_setRestitution_1"];var dl=e["_emscripten_bind_btDynamicsWorld_addCollisionObject_1"]=wi["_emscripten_bind_btDynamicsWorld_addCollisionObject_1"];var vl=e["_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0"];var ml=e["_emscripten_bind_btDynamicsWorld_addCollisionObject_3"]=wi["_emscripten_bind_btDynamicsWorld_addCollisionObject_3"];var gl=e["_emscripten_bind_btDynamicsWorld_addCollisionObject_2"]=wi["_emscripten_bind_btDynamicsWorld_addCollisionObject_2"];var yl=e["_emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0"];var bl=e["_emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1"]=wi["_emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1"];var wl=e["_emscripten_bind_btVector4_op_mul_1"]=wi["_emscripten_bind_btVector4_op_mul_1"];var El=e["_emscripten_bind_btCylinderShape_btCylinderShape_1"]=wi["_emscripten_bind_btCylinderShape_btCylinderShape_1"];var Sl=e["_emscripten_bind_btVector3___destroy___0"]=wi["_emscripten_bind_btVector3___destroy___0"];var xl=e["_emscripten_bind_btRigidBody_setAngularFactor_1"]=wi["_emscripten_bind_btRigidBody_setAngularFactor_1"];var Tl=e["_emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2"]=wi["_emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2"];var Nl=e["_emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1"]=wi["_emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1"];var Cl=e["_emscripten_bind_btMotionState_getWorldTransform_1"]=wi["_emscripten_bind_btMotionState_getWorldTransform_1"];var kl=e["_emscripten_bind_btDynamicsWorld_getBroadphase_0"]=wi["_emscripten_bind_btDynamicsWorld_getBroadphase_0"];var Ll=e["_emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1"];var Al=e["_emscripten_bind_btVector3_x_0"]=wi["_emscripten_bind_btVector3_x_0"];var Ol=e["___cxa_is_pointer_type"]=wi["___cxa_is_pointer_type"];var Ml=e["_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3"];var _l=e["_emscripten_bind_btCollisionObject_getCollisionShape_0"]=wi["_emscripten_bind_btCollisionObject_getCollisionShape_0"];var Dl=e["_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4"];var Pl=e["_emscripten_bind_btManifoldPoint___destroy___0"]=wi["_emscripten_bind_btManifoldPoint___destroy___0"];var Hl=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1"];var Bl=e["_emscripten_bind_btVector4_length_0"]=wi["_emscripten_bind_btVector4_length_0"];var jl=e["_emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1"]=wi["_emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1"];var Fl=e["_emscripten_bind_btCylinderShapeZ_setLocalScaling_1"]=wi["_emscripten_bind_btCylinderShapeZ_setLocalScaling_1"];var Il=e["_emscripten_bind_ClosestConvexResultCallback___destroy___0"]=wi["_emscripten_bind_ClosestConvexResultCallback___destroy___0"];var ql=e["_emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0"]=wi["_emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0"];var Rl=e["_emscripten_bind_btCollisionObject_setFriction_1"]=wi["_emscripten_bind_btCollisionObject_setFriction_1"];var Ul=e["_emscripten_bind_btDefaultCollisionConfiguration___destroy___0"]=wi["_emscripten_bind_btDefaultCollisionConfiguration___destroy___0"];var zl=e["_emscripten_bind_btRigidBody_setMassProps_2"]=wi["_emscripten_bind_btRigidBody_setMassProps_2"];var Wl=e["_emscripten_bind_btVector3_setValue_3"]=wi["_emscripten_bind_btVector3_setValue_3"];var Xl=e["_emscripten_bind_btGhostObject_getCollisionFlags_0"]=wi["_emscripten_bind_btGhostObject_getCollisionFlags_0"];var Vl=e["_emscripten_bind_btCapsuleShapeX___destroy___0"]=wi["_emscripten_bind_btCapsuleShapeX___destroy___0"];var $l=e["_emscripten_bind_btHingeConstraint_setLimit_4"]=wi["_emscripten_bind_btHingeConstraint_setLimit_4"];var Jl=e["_emscripten_bind_btHingeConstraint_setLimit_5"]=wi["_emscripten_bind_btHingeConstraint_setLimit_5"];var Kl=e["_emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1"]=wi["_emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1"];var Ql=e["_emscripten_bind_btConeShape_setLocalScaling_1"]=wi["_emscripten_bind_btConeShape_setLocalScaling_1"];var Gl=e["_emscripten_bind_btGhostObject_getNumOverlappingObjects_0"]=wi["_emscripten_bind_btGhostObject_getNumOverlappingObjects_0"];var Yl=e["_emscripten_bind_btGhostObject_getCollisionShape_0"]=wi["_emscripten_bind_btGhostObject_getCollisionShape_0"];var Zl=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1"];var ec=e["_emscripten_bind_btPersistentManifold_getContactPoint_1"]=wi["_emscripten_bind_btPersistentManifold_getContactPoint_1"];var tc=e["_emscripten_bind_btConeShapeX_calculateLocalInertia_2"]=wi["_emscripten_bind_btConeShapeX_calculateLocalInertia_2"];var nc=e["_emscripten_bind_btGhostObject_activate_0"]=wi["_emscripten_bind_btGhostObject_activate_0"];var rc=e["_emscripten_bind_btGhostObject_activate_1"]=wi["_emscripten_bind_btGhostObject_activate_1"];var ic=e["_emscripten_bind_btManifoldPoint_getPositionWorldOnB_0"]=wi["_emscripten_bind_btManifoldPoint_getPositionWorldOnB_0"];var sc=e["_emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0"]=wi["_emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0"];var oc=e["_emscripten_bind_btConeShapeZ_btConeShapeZ_2"]=wi["_emscripten_bind_btConeShapeZ_btConeShapeZ_2"];var uc=e["_emscripten_bind_btSphereShape___destroy___0"]=wi["_emscripten_bind_btSphereShape___destroy___0"];var ac=e["_emscripten_bind_btSliderConstraint_setUpperAngLimit_1"]=wi["_emscripten_bind_btSliderConstraint_setUpperAngLimit_1"];var fc=e["_emscripten_bind_btDynamicsWorld_contactPairTest_3"]=wi["_emscripten_bind_btDynamicsWorld_contactPairTest_3"];var lc=e["_emscripten_bind_btCollisionWorld_getPairCache_0"]=wi["_emscripten_bind_btCollisionWorld_getPairCache_0"];var cc=e["_emscripten_bind_btConeTwistConstraint_setMotorTarget_1"]=wi["_emscripten_bind_btConeTwistConstraint_setMotorTarget_1"];var hc=e["_emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1"];var pc=e["_emscripten_bind_btWheelInfo_set_m_rollInfluence_1"]=wi["_emscripten_bind_btWheelInfo_set_m_rollInfluence_1"];var dc=e["_emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0"]=wi["_emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0"];var vc=e["_emscripten_bind_btGhostObject_forceActivationState_1"]=wi["_emscripten_bind_btGhostObject_forceActivationState_1"];var mc=e["_emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0"]=wi["_emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0"];var gc=e["_emscripten_bind_VoidPtr___destroy___0"]=wi["_emscripten_bind_VoidPtr___destroy___0"];var yc=e["_emscripten_bind_btSliderConstraint_setLowerAngLimit_1"]=wi["_emscripten_bind_btSliderConstraint_setLowerAngLimit_1"];var bc=e["_emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2"]=wi["_emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2"];var wc=e["_emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0"];var Ec=e["_emscripten_bind_btRaycastVehicle_getRigidBody_0"]=wi["_emscripten_bind_btRaycastVehicle_getRigidBody_0"];var Sc=e["_emscripten_bind_btWheelInfo_get_m_steering_0"]=wi["_emscripten_bind_btWheelInfo_get_m_steering_0"];var xc=e["_emscripten_bind_btConstraintSetting_get_m_tau_0"]=wi["_emscripten_bind_btConstraintSetting_get_m_tau_0"];var Tc=e["_emscripten_bind_btSliderConstraint___destroy___0"]=wi["_emscripten_bind_btSliderConstraint___destroy___0"];var Nc=e["_emscripten_bind_btCollisionShape___destroy___0"]=wi["_emscripten_bind_btCollisionShape___destroy___0"];var Cc=e["_emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0"]=wi["_emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0"];var kc=e["_emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0"];var Lc=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0"];var Ac=e["_emscripten_bind_btPairCachingGhostObject_setCollisionShape_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setCollisionShape_1"];var Oc=e["_emscripten_bind_btKinematicCharacterController_warp_1"]=wi["_emscripten_bind_btKinematicCharacterController_warp_1"];var Mc=e["_emscripten_bind_btAxisSweep3___destroy___0"]=wi["_emscripten_bind_btAxisSweep3___destroy___0"];var _c=e["_emscripten_bind_btTriangleMesh___destroy___0"]=wi["_emscripten_bind_btTriangleMesh___destroy___0"];var Dc=e["_emscripten_bind_btKinematicCharacterController_preStep_1"]=wi["_emscripten_bind_btKinematicCharacterController_preStep_1"];var Pc=e["_emscripten_bind_btRaycastVehicle_applyEngineForce_2"]=wi["_emscripten_bind_btRaycastVehicle_applyEngineForce_2"];var Hc=e["_emscripten_bind_btRaycastVehicle_setBrake_2"]=wi["_emscripten_bind_btRaycastVehicle_setBrake_2"];var Bc=e["_emscripten_bind_ConcreteContactResultCallback___destroy___0"]=wi["_emscripten_bind_ConcreteContactResultCallback___destroy___0"];var jc=e["_emscripten_bind_btCollisionObject___destroy___0"]=wi["_emscripten_bind_btCollisionObject___destroy___0"];var Fc=e["_emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1"];var Ic=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1"];var qc=e["_emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1"]=wi["_emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1"];var Rc=e["_emscripten_bind_btDispatcherInfo_set_m_timeStep_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_timeStep_1"];var Uc=e["_emscripten_bind_btVector3_btVector3_3"]=wi["_emscripten_bind_btVector3_btVector3_3"];var zc=e["_emscripten_bind_btVector3_btVector3_0"]=wi["_emscripten_bind_btVector3_btVector3_0"];var Wc=e["_emscripten_bind_btBoxShape___destroy___0"]=wi["_emscripten_bind_btBoxShape___destroy___0"];var Xc=e["_emscripten_bind_btDiscreteDynamicsWorld_getGravity_0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_getGravity_0"];var Vc=e["_emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0"];var $c=e["_emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0"];var Jc=e["_emscripten_bind_btConeTwistConstraint___destroy___0"]=wi["_emscripten_bind_btConeTwistConstraint___destroy___0"];var Kc=e["_emscripten_bind_btQuadWord___destroy___0"]=wi["_emscripten_bind_btQuadWord___destroy___0"];var Qc=e["_emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1"];var Gc=e["_emscripten_bind_btRigidBody_setCenterOfMassTransform_1"]=wi["_emscripten_bind_btRigidBody_setCenterOfMassTransform_1"];var Yc=e["_emscripten_bind_btConstraintSolver___destroy___0"]=wi["_emscripten_bind_btConstraintSolver___destroy___0"];var Zc=e["_emscripten_bind_btDbvtBroadphase___destroy___0"]=wi["_emscripten_bind_btDbvtBroadphase___destroy___0"];var eh=e["_emscripten_bind_btCapsuleShape_btCapsuleShape_2"]=wi["_emscripten_bind_btCapsuleShape_btCapsuleShape_2"];var th=e["_emscripten_bind_btTypedConstraint_enableFeedback_1"]=wi["_emscripten_bind_btTypedConstraint_enableFeedback_1"];var nh=e["_emscripten_bind_btQuadWord_setZ_1"]=wi["_emscripten_bind_btQuadWord_setZ_1"];var rh=e["_emscripten_bind_btCapsuleShape_setLocalScaling_1"]=wi["_emscripten_bind_btCapsuleShape_setLocalScaling_1"];var ih=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0"];var sh=e["_emscripten_bind_btTriangleMeshShape_setLocalScaling_1"]=wi["_emscripten_bind_btTriangleMeshShape_setLocalScaling_1"];var oh=e["_emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1"]=wi["_emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1"];var uh=e["_emscripten_bind_btPersistentManifold_btPersistentManifold_0"]=wi["_emscripten_bind_btPersistentManifold_btPersistentManifold_0"];var ah=e["_emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0"]=wi["_emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0"];var fh=e["_emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2"]=wi["_emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2"];var lh=e["_emscripten_bind_btVector4___destroy___0"]=wi["_emscripten_bind_btVector4___destroy___0"];var ch=e["_emscripten_bind_btPairCachingGhostObject_isKinematicObject_0"]=wi["_emscripten_bind_btPairCachingGhostObject_isKinematicObject_0"];var hh=e["_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1"];var ph=e["_i64Add"]=wi["_i64Add"];var dh=e["_emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2"];var vh=e["_emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1"];var mh=e["_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0"]=wi["_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0"];var gh=e["_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1"]=wi["_emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1"];var yh=e["_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_3"]=wi["_emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_3"];var bh=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0"];var wh=e["_emscripten_bind_btPoint2PointConstraint_getPivotInB_0"]=wi["_emscripten_bind_btPoint2PointConstraint_getPivotInB_0"];var Eh=e["_emscripten_bind_btKinematicCharacterController_playerStep_2"]=wi["_emscripten_bind_btKinematicCharacterController_playerStep_2"];var Sh=e["_emscripten_bind_btDispatcherInfo___destroy___0"]=wi["_emscripten_bind_btDispatcherInfo___destroy___0"];var xh=e["_emscripten_bind_btStaticPlaneShape_setLocalScaling_1"]=wi["_emscripten_bind_btStaticPlaneShape_setLocalScaling_1"];var Th=e["_emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2"];var Nh=e["_emscripten_bind_ContactResultCallback_addSingleResult_7"]=wi["_emscripten_bind_ContactResultCallback_addSingleResult_7"];var Ch=e["_emscripten_bind_btGhostObject_getWorldTransform_0"]=wi["_emscripten_bind_btGhostObject_getWorldTransform_0"];var kh=e["_emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0"];var Lh=e["_emscripten_bind_LocalConvexResult_set_m_hitFraction_1"]=wi["_emscripten_bind_LocalConvexResult_set_m_hitFraction_1"];var Ah=e["_emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2"]=wi["_emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2"];var Oh=e["_emscripten_bind_btDispatcherInfo_get_m_timeStep_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_timeStep_0"];var Mh=e["_emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1"]=wi["_emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1"];var _h=e["_emscripten_bind_btDynamicsWorld___destroy___0"]=wi["_emscripten_bind_btDynamicsWorld___destroy___0"];var Dh=e["_emscripten_bind_btMotionState___destroy___0"]=wi["_emscripten_bind_btMotionState___destroy___0"];var Ph=e["_emscripten_bind_btCollisionObject_setCollisionFlags_1"]=wi["_emscripten_bind_btCollisionObject_setCollisionFlags_1"];var Hh=e["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1"];var Bh=e["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2"];var jh=e["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3"];var Fh=e["_emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1"]=wi["_emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1"];var Ih=e["_emscripten_bind_btRaycastVehicle_getNumWheels_0"]=wi["_emscripten_bind_btRaycastVehicle_getNumWheels_0"];var qh=e["_emscripten_bind_btDispatcher_getManifoldByIndexInternal_1"]=wi["_emscripten_bind_btDispatcher_getManifoldByIndexInternal_1"];var Rh=e["_emscripten_bind_btWheelInfo_set_m_steering_1"]=wi["_emscripten_bind_btWheelInfo_set_m_steering_1"];var Uh=e["_emscripten_bind_btPairCachingGhostObject_setWorldTransform_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setWorldTransform_1"];var zh=e["_emscripten_bind_btConeTwistConstraint_setAngularOnly_1"]=wi["_emscripten_bind_btConeTwistConstraint_setAngularOnly_1"];var Wh=e["_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4"]=wi["_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4"];var Xh=e["_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2"]=wi["_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2"];var Vh=e["_emscripten_bind_btKinematicCharacterController_setJumpSpeed_1"]=wi["_emscripten_bind_btKinematicCharacterController_setJumpSpeed_1"];var $h=e["_emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1"]=wi["_emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1"];var Jh=e["_emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1"]=wi["_emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1"];var Kh=e["_emscripten_bind_btRigidBodyConstructionInfo___destroy___0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo___destroy___0"];var Qh=e["_emscripten_bind_btRigidBody_getWorldTransform_0"]=wi["_emscripten_bind_btRigidBody_getWorldTransform_0"];var Gh=e["_emscripten_bind_btPoint2PointConstraint_setPivotA_1"]=wi["_emscripten_bind_btPoint2PointConstraint_setPivotA_1"];var Yh=e["_emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1"];var Zh=e["_memcpy"]=wi["_memcpy"];var ep=e["_emscripten_bind_btCapsuleShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btCapsuleShape_calculateLocalInertia_2"];var tp=e["_emscripten_bind_btVector3_y_0"]=wi["_emscripten_bind_btVector3_y_0"];var np=e["_emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0"];var rp=e["_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2"]=wi["_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2"];var ip=e["_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3"]=wi["_emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3"];var sp=e["_emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0"]=wi["_emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0"];var op=e["_emscripten_bind_btGhostObject_setCollisionShape_1"]=wi["_emscripten_bind_btGhostObject_setCollisionShape_1"];var up=e["_emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1"];var ap=e["_emscripten_bind_btQuaternion_setW_1"]=wi["_emscripten_bind_btQuaternion_setW_1"];var fp=e["_emscripten_bind_btDiscreteDynamicsWorld_setGravity_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_setGravity_1"];var lp=e["_emscripten_bind_btGhostObject_isActive_0"]=wi["_emscripten_bind_btGhostObject_isActive_0"];var cp=e["_emscripten_bind_btVector4_z_0"]=wi["_emscripten_bind_btVector4_z_0"];var hp=e["_emscripten_bind_btCollisionObject_forceActivationState_1"]=wi["_emscripten_bind_btCollisionObject_forceActivationState_1"];var pp=e["_emscripten_bind_btKinematicCharacterController_onGround_0"]=wi["_emscripten_bind_btKinematicCharacterController_onGround_0"];var dp=e["_emscripten_bind_btRaycastVehicle_getWheelInfo_1"]=wi["_emscripten_bind_btRaycastVehicle_getWheelInfo_1"];var vp=e["_emscripten_bind_btConeTwistConstraint_setLimit_2"]=wi["_emscripten_bind_btConeTwistConstraint_setLimit_2"];var mp=e["_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1"];var gp=e["_emscripten_bind_btRigidBody___destroy___0"]=wi["_emscripten_bind_btRigidBody___destroy___0"];var yp=e["_emscripten_bind_btStridingMeshInterface___destroy___0"]=wi["_emscripten_bind_btStridingMeshInterface___destroy___0"];var bp=e["_emscripten_bind_btRigidBody_setSleepingThresholds_2"]=wi["_emscripten_bind_btRigidBody_setSleepingThresholds_2"];var wp=e["_emscripten_bind_btCollisionObject_setWorldTransform_1"]=wi["_emscripten_bind_btCollisionObject_setWorldTransform_1"];var Ep=e["_emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0"]=wi["_emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0"];var Sp=e["_emscripten_bind_btManifoldPoint_get_m_localPointA_0"]=wi["_emscripten_bind_btManifoldPoint_get_m_localPointA_0"];var xp=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0"];var Tp=e["_emscripten_bind_btCollisionWorld_getBroadphase_0"]=wi["_emscripten_bind_btCollisionWorld_getBroadphase_0"];var Np=e["_emscripten_bind_btDispatcher_getNumManifolds_0"]=wi["_emscripten_bind_btDispatcher_getNumManifolds_0"];var Cp=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0"];var kp=e["_emscripten_bind_btRigidBody_activate_1"]=wi["_emscripten_bind_btRigidBody_activate_1"];var Lp=e["_emscripten_bind_btRigidBody_activate_0"]=wi["_emscripten_bind_btRigidBody_activate_0"];var Ap=e["_emscripten_bind_btRaycastVehicle___destroy___0"]=wi["_emscripten_bind_btRaycastVehicle___destroy___0"];var Op=e["_emscripten_bind_btGhostObject_setActivationState_1"]=wi["_emscripten_bind_btGhostObject_setActivationState_1"];var Mp=e["_emscripten_bind_btCollisionWorld_contactPairTest_3"]=wi["_emscripten_bind_btCollisionWorld_contactPairTest_3"];var _p=e["_emscripten_bind_btCylinderShapeX___destroy___0"]=wi["_emscripten_bind_btCylinderShapeX___destroy___0"];var Dp=e["_emscripten_bind_btManifoldPoint_getPositionWorldOnA_0"]=wi["_emscripten_bind_btManifoldPoint_getPositionWorldOnA_0"];var Pp=e["_emscripten_bind_ContactResultCallback___destroy___0"]=wi["_emscripten_bind_ContactResultCallback___destroy___0"];var Hp=e["_emscripten_bind_btDispatcherInfo_set_m_stepCount_1"]=wi["_emscripten_bind_btDispatcherInfo_set_m_stepCount_1"];var Bp=e["_emscripten_bind_btVector4_x_0"]=wi["_emscripten_bind_btVector4_x_0"];var jp=e["_emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1"]=wi["_emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1"];var Fp=e["_emscripten_bind_btKinematicCharacterController_getGhostObject_0"]=wi["_emscripten_bind_btKinematicCharacterController_getGhostObject_0"];var Ip=e["_emscripten_bind_btRigidBody_btRigidBody_1"]=wi["_emscripten_bind_btRigidBody_btRigidBody_1"];var qp=e["_emscripten_bind_btTriangleMeshShape___destroy___0"]=wi["_emscripten_bind_btTriangleMeshShape___destroy___0"];var Rp=e["_emscripten_bind_btKinematicCharacterController_setWalkDirection_1"]=wi["_emscripten_bind_btKinematicCharacterController_setWalkDirection_1"];var Up=e["_emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0"];var zp=e["_emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0"];var Wp=e["_emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1"]=wi["_emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1"];var Xp=e["_emscripten_bind_btKinematicCharacterController_getGravity_0"]=wi["_emscripten_bind_btKinematicCharacterController_getGravity_0"];var Vp=e["_emscripten_bind_btDiscreteDynamicsWorld_addAction_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_addAction_1"];var $p=e["_emscripten_bind_btQuaternion_setY_1"]=wi["_emscripten_bind_btQuaternion_setY_1"];var Jp=e["_emscripten_bind_btConeShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btConeShape_calculateLocalInertia_2"];var Kp=e["_emscripten_bind_btCylinderShapeX_calculateLocalInertia_2"]=wi["_emscripten_bind_btCylinderShapeX_calculateLocalInertia_2"];var Qp=e["_emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1"]=wi["_emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1"];var Gp=e["_llvm_bswap_i32"]=wi["_llvm_bswap_i32"];var Yp=e["_emscripten_bind_btSphereShape_setLocalScaling_1"]=wi["_emscripten_bind_btSphereShape_setLocalScaling_1"];var Zp=e["_emscripten_bind_btVector4_w_0"]=wi["_emscripten_bind_btVector4_w_0"];var ed=e["_emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0"]=wi["_emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0"];var td=e["_emscripten_bind_btBvhTriangleMeshShape___destroy___0"]=wi["_emscripten_bind_btBvhTriangleMeshShape___destroy___0"];var nd=e["_emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0"];var rd=e["_emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1"]=wi["_emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1"];var id=e["_emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1"];var sd=e["_emscripten_bind_btVector4_y_0"]=wi["_emscripten_bind_btVector4_y_0"];var od=e["_emscripten_bind_btGeneric6DofConstraint___destroy___0"]=wi["_emscripten_bind_btGeneric6DofConstraint___destroy___0"];var ud=e["_emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0"];var ad=e["_emscripten_bind_btConvexHullShape_addPoint_1"]=wi["_emscripten_bind_btConvexHullShape_addPoint_1"];var fd=e["_emscripten_bind_btConvexHullShape_addPoint_2"]=wi["_emscripten_bind_btConvexHullShape_addPoint_2"];var ld=e["_emscripten_bind_btTransform_getOrigin_0"]=wi["_emscripten_bind_btTransform_getOrigin_0"];var cd=e["_emscripten_bind_btHingeConstraint___destroy___0"]=wi["_emscripten_bind_btHingeConstraint___destroy___0"];var hd=e["_emscripten_bind_btHingeConstraint_enableFeedback_1"]=wi["_emscripten_bind_btHingeConstraint_enableFeedback_1"];var pd=e["_emscripten_bind_btConvexShape_calculateLocalInertia_2"]=wi["_emscripten_bind_btConvexShape_calculateLocalInertia_2"];var dd=e["_memset"]=wi["_memset"];var vd=e["_emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0"];var md=e["_emscripten_bind_btTriangleMesh_btTriangleMesh_0"]=wi["_emscripten_bind_btTriangleMesh_btTriangleMesh_0"];var gd=e["_emscripten_bind_btPairCachingGhostObject_getCollisionShape_0"]=wi["_emscripten_bind_btPairCachingGhostObject_getCollisionShape_0"];var yd=e["_emscripten_bind_btTriangleMesh_btTriangleMesh_2"]=wi["_emscripten_bind_btTriangleMesh_btTriangleMesh_2"];var bd=e["_emscripten_bind_btTransform___destroy___0"]=wi["_emscripten_bind_btTransform___destroy___0"];var wd=e["_emscripten_bind_btWheelInfo_set_m_frictionSlip_1"]=wi["_emscripten_bind_btWheelInfo_set_m_frictionSlip_1"];var Ed=e["_emscripten_bind_btRigidBody_getCollisionShape_0"]=wi["_emscripten_bind_btRigidBody_getCollisionShape_0"];var Sd=e["_emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1"]=wi["_emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1"];var xd=e["_emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0"]=wi["_emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0"];var Td=e["_emscripten_bind_btManifoldPoint_get_m_localPointB_0"]=wi["_emscripten_bind_btManifoldPoint_get_m_localPointB_0"];var Nd=e["_emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3"];var Cd=e["_emscripten_bind_btSliderConstraint_setLowerLinLimit_1"]=wi["_emscripten_bind_btSliderConstraint_setLowerLinLimit_1"];var kd=e["_emscripten_bind_btPoint2PointConstraint_set_m_setting_1"]=wi["_emscripten_bind_btPoint2PointConstraint_set_m_setting_1"];var Ld=e["_emscripten_bind_btWheelInfo_get_m_wheelsRadius_0"]=wi["_emscripten_bind_btWheelInfo_get_m_wheelsRadius_0"];var Ad=e["_emscripten_bind_btRigidBody_setLinearVelocity_1"]=wi["_emscripten_bind_btRigidBody_setLinearVelocity_1"];var Od=e["_emscripten_bind_btVehicleTuning_btVehicleTuning_0"]=wi["_emscripten_bind_btVehicleTuning_btVehicleTuning_0"];var Md=e["_emscripten_bind_RayResultCallback_set_m_collisionObject_1"]=wi["_emscripten_bind_RayResultCallback_set_m_collisionObject_1"];var _d=e["_emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1"];var Dd=e["_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0"];var Pd=e["_emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1"]=wi["_emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1"];var Hd=e["_emscripten_bind_btDynamicsWorld_addAction_1"]=wi["_emscripten_bind_btDynamicsWorld_addAction_1"];var Bd=e["_emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0"]=wi["_emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0"];var jd=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1"];var Fd=e["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1"]=wi["_emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1"];var Id=e["_emscripten_bind_btKinematicCharacterController_setFallSpeed_1"]=wi["_emscripten_bind_btKinematicCharacterController_setFallSpeed_1"];var qd=e["_emscripten_bind_btRigidBody_setActivationState_1"]=wi["_emscripten_bind_btRigidBody_setActivationState_1"];var Rd=e["_emscripten_bind_ClosestConvexResultCallback_hasHit_0"]=wi["_emscripten_bind_ClosestConvexResultCallback_hasHit_0"];var Ud=e["_emscripten_bind_btCapsuleShapeZ___destroy___0"]=wi["_emscripten_bind_btCapsuleShapeZ___destroy___0"];var zd=e["_emscripten_bind_LocalShapeInfo_set_m_shapePart_1"]=wi["_emscripten_bind_LocalShapeInfo_set_m_shapePart_1"];var Wd=e["_emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0"]=wi["_emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0"];var Xd=e["_emscripten_bind_btTriangleMesh_addTriangle_3"]=wi["_emscripten_bind_btTriangleMesh_addTriangle_3"];var Vd=e["_emscripten_bind_btGhostObject_getOverlappingObject_1"]=wi["_emscripten_bind_btGhostObject_getOverlappingObject_1"];var $d=e["_emscripten_bind_btTriangleMesh_addTriangle_4"]=wi["_emscripten_bind_btTriangleMesh_addTriangle_4"];var Jd=e["_emscripten_bind_btRigidBody_applyTorqueImpulse_1"]=wi["_emscripten_bind_btRigidBody_applyTorqueImpulse_1"];var Kd=e["_emscripten_bind_btRigidBody_setCollisionFlags_1"]=wi["_emscripten_bind_btRigidBody_setCollisionFlags_1"];var Qd=e["_emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1"]=wi["_emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1"];var Gd=e["_emscripten_bind_btConeShape___destroy___0"]=wi["_emscripten_bind_btConeShape___destroy___0"];var Yd=e["_emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2"]=wi["_emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2"];var Zd=e["_emscripten_bind_btSliderConstraint_btSliderConstraint_5"]=wi["_emscripten_bind_btSliderConstraint_btSliderConstraint_5"];var ev=e["_emscripten_bind_btSliderConstraint_btSliderConstraint_3"]=wi["_emscripten_bind_btSliderConstraint_btSliderConstraint_3"];var tv=e["_emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0"];var nv=e["_emscripten_bind_btDynamicsWorld_convexSweepTest_5"]=wi["_emscripten_bind_btDynamicsWorld_convexSweepTest_5"];var rv=e["_emscripten_bind_btRigidBody_forceActivationState_1"]=wi["_emscripten_bind_btRigidBody_forceActivationState_1"];var iv=e["_emscripten_bind_btPoint2PointConstraint_setPivotB_1"]=wi["_emscripten_bind_btPoint2PointConstraint_setPivotB_1"];var sv=e["_emscripten_bind_btGhostPairCallback___destroy___0"]=wi["_emscripten_bind_btGhostPairCallback___destroy___0"];var ov=e["_emscripten_bind_btKinematicCharacterController_getMaxSlope_0"]=wi["_emscripten_bind_btKinematicCharacterController_getMaxSlope_0"];var uv=e["_emscripten_bind_btSliderConstraint_enableFeedback_1"]=wi["_emscripten_bind_btSliderConstraint_enableFeedback_1"];var av=e["_emscripten_bind_btRaycastVehicle_addWheel_7"]=wi["_emscripten_bind_btRaycastVehicle_addWheel_7"];var fv=e["_emscripten_bind_btPairCachingGhostObject_isActive_0"]=wi["_emscripten_bind_btPairCachingGhostObject_isActive_0"];var lv=e["_emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1"]=wi["_emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1"];var cv=e["_emscripten_bind_btStaticPlaneShape___destroy___0"]=wi["_emscripten_bind_btStaticPlaneShape___destroy___0"];var hv=e["_emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0"];var pv=e["_emscripten_bind_btBoxShape_setLocalScaling_1"]=wi["_emscripten_bind_btBoxShape_setLocalScaling_1"];var dv=e["_emscripten_bind_btConeShapeZ___destroy___0"]=wi["_emscripten_bind_btConeShapeZ___destroy___0"];var vv=e["_emscripten_bind_btDynamicsWorld_getPairCache_0"]=wi["_emscripten_bind_btDynamicsWorld_getPairCache_0"];var mv=e["_emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5"];var gv=e["_emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2"]=wi["_emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2"];var yv=e["_emscripten_bind_btVector4_btVector4_0"]=wi["_emscripten_bind_btVector4_btVector4_0"];var bv=e["_emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0"]=wi["_emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0"];var wv=e["_emscripten_bind_btVector4_btVector4_4"]=wi["_emscripten_bind_btVector4_btVector4_4"];var Ev=e["_emscripten_bind_btKinematicCharacterController___destroy___0"]=wi["_emscripten_bind_btKinematicCharacterController___destroy___0"];var Sv=e["_emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1"]=wi["_emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1"];var xv=e["_emscripten_bind_btConstraintSetting_btConstraintSetting_0"]=wi["_emscripten_bind_btConstraintSetting_btConstraintSetting_0"];var Tv=e["_emscripten_bind_btDiscreteDynamicsWorld_rayTest_3"]=wi["_emscripten_bind_btDiscreteDynamicsWorld_rayTest_3"];var Nv=e["_emscripten_bind_btGhostPairCallback_btGhostPairCallback_0"]=wi["_emscripten_bind_btGhostPairCallback_btGhostPairCallback_0"];var Cv=e["_emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1"]=wi["_emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1"];var kv=e["_emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1"]=wi["_emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1"];var Lv=e["_emscripten_bind_btVehicleTuning_get_m_frictionSlip_0"]=wi["_emscripten_bind_btVehicleTuning_get_m_frictionSlip_0"];var Av=e["__GLOBAL__I_a"]=wi["__GLOBAL__I_a"];var Ov=e["runPostSets"]=wi["runPostSets"];var Mv=e["dynCall_viiiii"]=wi["dynCall_viiiii"];var _v=e["dynCall_vid"]=wi["dynCall_vid"];var Dv=e["dynCall_vi"]=wi["dynCall_vi"];var Pv=e["dynCall_viiidii"]=wi["dynCall_viiidii"];var Hv=e["dynCall_vii"]=wi["dynCall_vii"];var Bv=e["dynCall_iiiiiiiiiii"]=wi["dynCall_iiiiiiiiiii"];var jv=e["dynCall_ii"]=wi["dynCall_ii"];var Fv=e["dynCall_viidi"]=wi["dynCall_viidi"];var Iv=e["dynCall_viddiii"]=wi["dynCall_viddiii"];var qv=e["dynCall_vidii"]=wi["dynCall_vidii"];var Rv=e["dynCall_iiiii"]=wi["dynCall_iiiii"];var Uv=e["dynCall_vidi"]=wi["dynCall_vidi"];var zv=e["dynCall_diiiiiiii"]=wi["dynCall_diiiiiiii"];var Wv=e["dynCall_viiiiddddiid"]=wi["dynCall_viiiiddddiid"];var Xv=e["dynCall_diiiii"]=wi["dynCall_diiiii"];var Vv=e["dynCall_iiii"]=wi["dynCall_iiii"];var $v=e["dynCall_viiiiii"]=wi["dynCall_viiiiii"];var Jv=e["dynCall_iiid"]=wi["dynCall_iiid"];var Kv=e["dynCall_di"]=wi["dynCall_di"];var Qv=e["dynCall_iiiiiii"]=wi["dynCall_iiiiiii"];var Gv=e["dynCall_diiidii"]=wi["dynCall_diiidii"];var Yv=e["dynCall_viidii"]=wi["dynCall_viidii"];var Zv=e["dynCall_viiiiiii"]=wi["dynCall_viiiiiii"];var em=e["dynCall_viiiiiiiii"]=wi["dynCall_viiiiiiiii"];var tm=e["dynCall_viiiiiiiiii"]=wi["dynCall_viiiiiiiiii"];var nm=e["dynCall_iii"]=wi["dynCall_iii"];var rm=e["dynCall_diii"]=wi["dynCall_diii"];var im=e["dynCall_diiiiiiiiii"]=wi["dynCall_diiiiiiiiii"];var sm=e["dynCall_viiiid"]=wi["dynCall_viiiid"];var om=e["dynCall_diiiiiiiii"]=wi["dynCall_diiiiiiiii"];var um=e["dynCall_did"]=wi["dynCall_did"];var am=e["dynCall_viiiidddddidi"]=wi["dynCall_viiiidddddidi"];var fm=e["dynCall_diidii"]=wi["dynCall_diidii"];var lm=e["dynCall_diiii"]=wi["dynCall_diiii"];var cm=e["dynCall_iiiiiiiiii"]=wi["dynCall_iiiiiiiiii"];var hm=e["dynCall_viiid"]=wi["dynCall_viiid"];var pm=e["dynCall_viii"]=wi["dynCall_viii"];var dm=e["dynCall_v"]=wi["dynCall_v"];var vm=e["dynCall_viid"]=wi["dynCall_viid"];var mm=e["dynCall_iidid"]=wi["dynCall_iidid"];var gm=e["dynCall_viiii"]=wi["dynCall_viiii"];c.stackAlloc=wi["stackAlloc"];c.stackSave=wi["stackSave"];c.stackRestore=wi["stackRestore"];c.setTempRet0=wi["setTempRet0"];c.getTempRet0=wi["getTempRet0"];var ym=function(){function s(e,t,n){if(e!=null)if("number"==typeof e)this.fromNumber(e,t,n);else if(t==null&&"string"!=typeof e)this.fromString(e,256);else this.fromString(e,t)}function o(){return new s(null)}function u(e,t,n,r,i,s){while(--s>=0){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864);n[r++]=o&67108863}return i}function a(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this[e]&32767;var f=this[e++]>>15;var l=u*a+f*o;a=o*a+((l&32767)<<15)+n[r]+(i&1073741823);i=(a>>>30)+(l>>>15)+u*f+(i>>>30);n[r++]=a&1073741823}return i}function f(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this[e]&16383;var f=this[e++]>>14;var l=u*a+f*o;a=o*a+((l&16383)<<14)+n[r]+i;i=(a>>28)+(l>>14)+u*f;n[r++]=a&268435455}return i}function v(e){return c.charAt(e)}function m(e,t){var n=h[e.charCodeAt(t)];return n==null?-1:n}function g(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t;e.s=this.s}function y(e){this.t=1;this.s=e<0?-1:0;if(e>0)this[0]=e;else if(e<-1)this[0]=e+DV;else this.t=0}function b(e){var t=o();t.fromInt(e);return t}function w(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0;this.s=0;var r=e.length,i=false,o=0;while(--r>=0){var u=n==8?e[r]&255:m(e,r);if(u<0){if(e.charAt(r)=="-")i=true;continue}i=false;if(o==0)this[this.t++]=u;else if(o+n>this.DB){this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o;this[this.t++]=u>>this.DB-o}else this[this.t-1]|=u<<o;o+=n;if(o>=this.DB)o-=this.DB}if(n==8&&(e[0]&128)!=0){this.s=-1;if(o>0)this[this.t-1]|=(1<<this.DB-o)-1<<o}this.clamp();if(i)s.ZERO.subTo(this,this)}function E(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function S(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=false,s="",o=this.t;var u=this.DB-o*this.DB%t;if(o-->0){if(u<this.DB&&(r=this[o]>>u)>0){i=true;s=v(r)}while(o>=0){if(u<t){r=(this[o]&(1<<u)-1)<<t-u;r|=this[--o]>>(u+=this.DB-t)}else{r=this[o]>>(u-=t)&n;if(u<=0){u+=this.DB;--o}}if(r>0)i=true;if(i)s+=v(r)}}return i?s:"0"}function x(){var e=o();s.ZERO.subTo(this,e);return e}function T(){return this.s<0?this.negate():this}function N(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this[n]-e[n])!=0)return t;return 0}function C(e){var t=1,n;if((n=e>>>16)!=0){e=n;t+=16}if((n=e>>8)!=0){e=n;t+=8}if((n=e>>4)!=0){e=n;t+=4}if((n=e>>2)!=0){e=n;t+=2}if((n=e>>1)!=0){e=n;t+=1}return t}function k(){if(this.t<=0)return 0;return this.DB*(this.t-1)+C(this[this.t-1]^this.s&this.DM)}function L(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e;t.s=this.s}function A(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0);t.s=this.s}function O(e,t){var n=e%this.DB;var r=this.DB-n;var i=(1<<r)-1;var s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u){t[u+s+1]=this[u]>>r|o;o=(this[u]&i)<<n}for(u=s-1;u>=0;--u)t[u]=0;t[s]=o;t.t=this.t+s+1;t.s=this.s;t.clamp()}function M(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB;var i=this.DB-r;var s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o){t[o-n-1]|=(this[o]&s)<<i;t[o-n]=this[o]>>r}if(r>0)t[this.t-n-1]|=(this.s&s)<<i;t.t=this.t-n;t.clamp()}function _(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i){r+=this[n]-e[n];t[n++]=r&this.DM;r>>=this.DB}if(e.t<this.t){r-=e.s;while(n<this.t){r+=this[n];t[n++]=r&this.DM;r>>=this.DB}r+=this.s}else{r+=this.s;while(n<e.t){r-=e[n];t[n++]=r&this.DM;r>>=this.DB}r-=e.s}t.s=r<0?-1:0;if(r<-1)t[n++]=this.DV+r;else if(r>0)t[n++]=r;t.t=n;t.clamp()}function D(e,t){var n=this.abs(),r=e.abs();var i=n.t;t.t=i+r.t;while(--i>=0)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0;t.clamp();if(this.s!=e.s)s.ZERO.subTo(t,t)}function P(e){var t=this.abs();var n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);if((e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV){e[n+t.t]-=t.DV;e[n+t.t+1]=1}}if(e.t>0)e[e.t-1]+=t.am(n,t[n],e,2*n,0,1);e.s=0;e.clamp()}function H(e,t,n){var r=e.abs();if(r.t<=0)return;var i=this.abs();if(i.t<r.t){if(t!=null)t.fromInt(0);if(n!=null)this.copyTo(n);return}if(n==null)n=o();var u=o(),a=this.s,f=e.s;var l=this.DB-C(r[r.t-1]);if(l>0){r.lShiftTo(l,u);i.lShiftTo(l,n)}else{r.copyTo(u);i.copyTo(n)}var c=u.t;var h=u[c-1];if(h==0)return;var p=h*(1<<this.F1)+(c>1?u[c-2]>>this.F2:0);var d=this.FV/p,v=(1<<this.F1)/p,m=1<<this.F2;var g=n.t,y=g-c,b=t==null?o():t;u.dlShiftTo(y,b);if(n.compareTo(b)>=0){n[n.t++]=1;n.subTo(b,n)}s.ONE.dlShiftTo(c,b);b.subTo(u,u);while(u.t<c)u[u.t++]=0;while(--y>=0){var w=n[--g]==h?this.DM:Math.floor(n[g]*d+(n[g-1]+m)*v);if((n[g]+=u.am(0,w,n,y,0,c))<w){u.dlShiftTo(y,b);n.subTo(b,n);while(n[g]<--w)n.subTo(b,n)}}if(t!=null){n.drShiftTo(c,t);if(a!=f)s.ZERO.subTo(t,t)}n.t=c;n.clamp();if(l>0)n.rShiftTo(l,n);if(a<0)s.ZERO.subTo(n,n)}function B(e){var t=o();this.abs().divRemTo(e,null,t);if(this.s<0&&t.compareTo(s.ZERO)>0)e.subTo(t,t);return t}function j(e){this.m=e}function F(e){if(e.s<0||e.compareTo(this.m)>=0)return e.mod(this.m);else return e}function I(e){return e}function q(e){e.divRemTo(this.m,null,e)}function R(e,t,n){e.multiplyTo(t,n);this.reduce(n)}function U(e,t){e.squareTo(t);this.reduce(t)}function z(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;t=t*(2-(e&15)*t)&15;t=t*(2-(e&255)*t)&255;t=t*(2-((e&65535)*t&65535))&65535;t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function W(e){this.m=e;this.mp=e.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<e.DB-15)-1;this.mt2=2*e.t}function X(e){var t=o();e.abs().dlShiftTo(this.m.t,t);t.divRemTo(this.m,null,t);if(e.s<0&&t.compareTo(s.ZERO)>0)this.m.subTo(t,t);return t}function V(e){var t=o();e.copyTo(t);this.reduce(t);return t}function $(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767;var r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t;e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV){e[n]-=e.DV;e[++n]++}}e.clamp();e.drShiftTo(this.m.t,e);if(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function J(e,t){e.squareTo(t);this.reduce(t)}function K(e,t,n){e.multiplyTo(t,n);this.reduce(n)}function Q(){return(this.t>0?this[0]&1:this.s)==0}function G(e,t){if(e>4294967295||e<1)return s.ONE;var n=o(),r=o(),i=t.convert(this),u=C(e)-1;i.copyTo(n);while(--u>=0){t.sqrTo(n,r);if((e&1<<u)>0)t.mulTo(r,i,n);else{var a=n;n=r;r=a}}return t.revert(n)}function Y(e,t){var n;if(e<256||t.isEven())n=new j(t);else n=new W(t);return this.exp(e,n)}function Z(e,t){this.fromInt(0);if(t==null)t=10;var n=this.chunkSize(t);var r=Math.pow(t,n),i=false,o=0,u=0;for(var a=0;a<e.length;++a){var f=m(e,a);if(f<0){if(e.charAt(a)=="-"&&this.signum()==0)i=true;continue}u=t*u+f;if(++o>=n){this.dMultiply(r);this.dAddOffset(u,0);o=0;u=0}}if(o>0){this.dMultiply(Math.pow(t,o));this.dAddOffset(u,0)}if(i)s.ZERO.subTo(this,this)}function et(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function tt(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function nt(e){this[this.t]=this.am(0,e-1,this,0,0,this.t);++this.t;this.clamp()}function rt(e,t){if(e==0)return;while(this.t<=t)this[this.t++]=0;this[t]+=e;while(this[t]>=this.DV){this[t]-=this.DV;if(++t>=this.t)this[this.t++]=0;++this[t]}}function it(e){if(e==null)e=10;if(this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e);var n=Math.pow(e,t);var r=b(n),i=o(),s=o(),u="";this.divRemTo(r,i,s);while(i.signum()>0){u=(n+s.intValue()).toString(e).substr(1)+u;i.divRemTo(r,i,s)}return s.intValue().toString(e)+u}function st(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ot(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i){r+=this[n]+e[n];t[n++]=r&this.DM;r>>=this.DB}if(e.t<this.t){r+=e.s;while(n<this.t){r+=this[n];t[n++]=r&this.DM;r>>=this.DB}r+=this.s}else{r+=this.s;while(n<e.t){r+=e[n];t[n++]=r&this.DM;r>>=this.DB}r+=e.s}t.s=r<0?-1:0;if(r>0)t[n++]=r;else if(r<-1)t[n++]=this.DV+r;t.t=n;t.clamp()}var e={math:{}};e.math.Long=function(e,t){this.low_=e|0;this.high_=t|0};e.math.Long.IntCache_={};e.math.Long.fromInt=function(t){if(-128<=t&&t<128){var n=e.math.Long.IntCache_[t];if(n){return n}}var r=new e.math.Long(t|0,t<0?-1:0);if(-128<=t&&t<128){e.math.Long.IntCache_[t]=r}return r};e.math.Long.fromNumber=function(t){if(isNaN(t)||!isFinite(t)){return e.math.Long.ZERO}else if(t<=-e.math.Long.TWO_PWR_63_DBL_){return e.math.Long.MIN_VALUE}else if(t+1>=e.math.Long.TWO_PWR_63_DBL_){return e.math.Long.MAX_VALUE}else if(t<0){return e.math.Long.fromNumber(-t).negate()}else{return new e.math.Long(t%e.math.Long.TWO_PWR_32_DBL_|0,t/e.math.Long.TWO_PWR_32_DBL_|0)}};e.math.Long.fromBits=function(t,n){return new e.math.Long(t,n)};e.math.Long.fromString=function(t,n){if(t.length==0){throw Error("number format error: empty string")}var r=n||10;if(r<2||36<r){throw Error("radix out of range: "+r)}if(t.charAt(0)=="-"){return e.math.Long.fromString(t.substring(1),r).negate()}else if(t.indexOf("-")>=0){throw Error('number format error: interior "-" character: '+t)}var i=e.math.Long.fromNumber(Math.pow(r,8));var s=e.math.Long.ZERO;for(var o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o);var a=parseInt(t.substring(o,o+u),r);if(u<8){var f=e.math.Long.fromNumber(Math.pow(r,u));s=s.multiply(f).add(e.math.Long.fromNumber(a))}else{s=s.multiply(i);s=s.add(e.math.Long.fromNumber(a))}}return s};e.math.Long.TWO_PWR_16_DBL_=1<<16;e.math.Long.TWO_PWR_24_DBL_=1<<24;e.math.Long.TWO_PWR_32_DBL_=e.math.Long.TWO_PWR_16_DBL_*e.math.Long.TWO_PWR_16_DBL_;e.math.Long.TWO_PWR_31_DBL_=e.math.Long.TWO_PWR_32_DBL_/2;e.math.Long.TWO_PWR_48_DBL_=e.math.Long.TWO_PWR_32_DBL_*e.math.Long.TWO_PWR_16_DBL_;e.math.Long.TWO_PWR_64_DBL_=e.math.Long.TWO_PWR_32_DBL_*e.math.Long.TWO_PWR_32_DBL_;e.math.Long.TWO_PWR_63_DBL_=e.math.Long.TWO_PWR_64_DBL_/2;e.math.Long.ZERO=e.math.Long.fromInt(0);e.math.Long.ONE=e.math.Long.fromInt(1);e.math.Long.NEG_ONE=e.math.Long.fromInt(-1);e.math.Long.MAX_VALUE=e.math.Long.fromBits(4294967295|0,2147483647|0);e.math.Long.MIN_VALUE=e.math.Long.fromBits(0,2147483648|0);e.math.Long.TWO_PWR_24_=e.math.Long.fromInt(1<<24);e.math.Long.prototype.toInt=function(){return this.low_};e.math.Long.prototype.toNumber=function(){return this.high_*e.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};e.math.Long.prototype.toString=function(t){var n=t||10;if(n<2||36<n){throw Error("radix out of range: "+n)}if(this.isZero()){return"0"}if(this.isNegative()){if(this.equals(e.math.Long.MIN_VALUE)){var r=e.math.Long.fromNumber(n);var i=this.div(r);var s=i.multiply(r).subtract(this);return i.toString(n)+s.toInt().toString(n)}else{return"-"+this.negate().toString(n)}}var o=e.math.Long.fromNumber(Math.pow(n,6));var s=this;var u="";while(true){var a=s.div(o);var f=s.subtract(a.multiply(o)).toInt();var l=f.toString(n);s=a;if(s.isZero()){return l+u}else{while(l.length<6){l="0"+l}u=""+l+u}}};e.math.Long.prototype.getHighBits=function(){return this.high_};e.math.Long.prototype.getLowBits=function(){return this.low_};e.math.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:e.math.Long.TWO_PWR_32_DBL_+this.low_};e.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative()){if(this.equals(e.math.Long.MIN_VALUE)){return 64}else{return this.negate().getNumBitsAbs()}}else{var t=this.high_!=0?this.high_:this.low_;for(var n=31;n>0;n--){if((t&1<<n)!=0){break}}return this.high_!=0?n+33:n+1}};e.math.Long.prototype.isZero=function(){return this.high_==0&&this.low_==0};e.math.Long.prototype.isNegative=function(){return this.high_<0};e.math.Long.prototype.isOdd=function(){return(this.low_&1)==1};e.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_};e.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_};e.math.Long.prototype.lessThan=function(e){return this.compare(e)<0};e.math.Long.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0};e.math.Long.prototype.greaterThan=function(e){return this.compare(e)>0};e.math.Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0};e.math.Long.prototype.compare=function(e){if(this.equals(e)){return 0}var t=this.isNegative();var n=e.isNegative();if(t&&!n){return-1}if(!t&&n){return 1}if(this.subtract(e).isNegative()){return-1}else{return 1}};e.math.Long.prototype.negate=function(){if(this.equals(e.math.Long.MIN_VALUE)){return e.math.Long.MIN_VALUE}else{return this.not().add(e.math.Long.ONE)}};e.math.Long.prototype.add=function(t){var n=this.high_>>>16;var r=this.high_&65535;var i=this.low_>>>16;var s=this.low_&65535;var o=t.high_>>>16;var u=t.high_&65535;var a=t.low_>>>16;var f=t.low_&65535;var l=0,c=0,h=0,p=0;p+=s+f;h+=p>>>16;p&=65535;h+=i+a;c+=h>>>16;h&=65535;c+=r+u;l+=c>>>16;c&=65535;l+=n+o;l&=65535;return e.math.Long.fromBits(h<<16|p,l<<16|c)};e.math.Long.prototype.subtract=function(e){return this.add(e.negate())};e.math.Long.prototype.multiply=function(t){if(this.isZero()){return e.math.Long.ZERO}else if(t.isZero()){return e.math.Long.ZERO}if(this.equals(e.math.Long.MIN_VALUE)){return t.isOdd()?e.math.Long.MIN_VALUE:e.math.Long.ZERO}else if(t.equals(e.math.Long.MIN_VALUE)){return this.isOdd()?e.math.Long.MIN_VALUE:e.math.Long.ZERO}if(this.isNegative()){if(t.isNegative()){return this.negate().multiply(t.negate())}else{return this.negate().multiply(t).negate()}}else if(t.isNegative()){return this.multiply(t.negate()).negate()}if(this.lessThan(e.math.Long.TWO_PWR_24_)&&t.lessThan(e.math.Long.TWO_PWR_24_)){return e.math.Long.fromNumber(this.toNumber()*t.toNumber())}var n=this.high_>>>16;var r=this.high_&65535;var i=this.low_>>>16;var s=this.low_&65535;var o=t.high_>>>16;var u=t.high_&65535;var a=t.low_>>>16;var f=t.low_&65535;var l=0,c=0,h=0,p=0;p+=s*f;h+=p>>>16;p&=65535;h+=i*f;c+=h>>>16;h&=65535;h+=s*a;c+=h>>>16;h&=65535;c+=r*f;l+=c>>>16;c&=65535;c+=i*a;l+=c>>>16;c&=65535;c+=s*u;l+=c>>>16;c&=65535;l+=n*f+r*a+i*u+s*o;l&=65535;return e.math.Long.fromBits(h<<16|p,l<<16|c)};e.math.Long.prototype.div=function(t){if(t.isZero()){throw Error("division by zero")}else if(this.isZero()){return e.math.Long.ZERO}if(this.equals(e.math.Long.MIN_VALUE)){if(t.equals(e.math.Long.ONE)||t.equals(e.math.Long.NEG_ONE)){return e.math.Long.MIN_VALUE}else if(t.equals(e.math.Long.MIN_VALUE)){return e.math.Long.ONE}else{var n=this.shiftRight(1);var r=n.div(t).shiftLeft(1);if(r.equals(e.math.Long.ZERO)){return t.isNegative()?e.math.Long.ONE:e.math.Long.NEG_ONE}else{var i=this.subtract(t.multiply(r));var s=r.add(i.div(t));return s}}}else if(t.equals(e.math.Long.MIN_VALUE)){return e.math.Long.ZERO}if(this.isNegative()){if(t.isNegative()){return this.negate().div(t.negate())}else{return this.negate().div(t).negate()}}else if(t.isNegative()){return this.div(t.negate()).negate()}var o=e.math.Long.ZERO;var i=this;while(i.greaterThanOrEqual(t)){var r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));var u=Math.ceil(Math.log(r)/Math.LN2);var a=u<=48?1:Math.pow(2,u-48);var f=e.math.Long.fromNumber(r);var l=f.multiply(t);while(l.isNegative()||l.greaterThan(i)){r-=a;f=e.math.Long.fromNumber(r);l=f.multiply(t)}if(f.isZero()){f=e.math.Long.ONE}o=o.add(f);i=i.subtract(l)}return o};e.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))};e.math.Long.prototype.not=function(){return e.math.Long.fromBits(~this.low_,~this.high_)};e.math.Long.prototype.and=function(t){return e.math.Long.fromBits(this.low_&t.low_,this.high_&t.high_)};e.math.Long.prototype.or=function(t){return e.math.Long.fromBits(this.low_|t.low_,this.high_|t.high_)};e.math.Long.prototype.xor=function(t){return e.math.Long.fromBits(this.low_^t.low_,this.high_^t.high_)};e.math.Long.prototype.shiftLeft=function(t){t&=63;if(t==0){return this}else{var n=this.low_;if(t<32){var r=this.high_;return e.math.Long.fromBits(n<<t,r<<t|n>>>32-t)}else{return e.math.Long.fromBits(0,n<<t-32)}}};e.math.Long.prototype.shiftRight=function(t){t&=63;if(t==0){return this}else{var n=this.high_;if(t<32){var r=this.low_;return e.math.Long.fromBits(r>>>t|n<<32-t,n>>t)}else{return e.math.Long.fromBits(n>>t-32,n>=0?0:-1)}}};e.math.Long.prototype.shiftRightUnsigned=function(t){t&=63;if(t==0){return this}else{var n=this.high_;if(t<32){var r=this.low_;return e.math.Long.fromBits(r>>>t|n<<32-t,n>>>t)}else if(t==32){return e.math.Long.fromBits(n,0)}else{return e.math.Long.fromBits(n>>>t-32,0)}}};var t={appName:"Modern Browser"};var n;var r=0xdeadbeefcafe;var i=(r&16777215)==15715070;if(i&&t.appName=="Microsoft Internet Explorer"){s.prototype.am=a;n=30}else if(i&&t.appName!="Netscape"){s.prototype.am=u;n=26}else{s.prototype.am=f;n=28}s.prototype.DB=n;s.prototype.DM=(1<<n)-1;s.prototype.DV=1<<n;var l=52;s.prototype.FV=Math.pow(2,l);s.prototype.F1=l-n;s.prototype.F2=2*n-l;var c="0123456789abcdefghijklmnopqrstuvwxyz";var h=new Array;var p,d;p="0".charCodeAt(0);for(d=0;d<=9;++d)h[p++]=d;p="a".charCodeAt(0);for(d=10;d<36;++d)h[p++]=d;p="A".charCodeAt(0);for(d=10;d<36;++d)h[p++]=d;j.prototype.convert=F;j.prototype.revert=I;j.prototype.reduce=q;j.prototype.mulTo=R;j.prototype.sqrTo=U;W.prototype.convert=X;W.prototype.revert=V;W.prototype.reduce=$;W.prototype.mulTo=K;W.prototype.sqrTo=J;s.prototype.copyTo=g;s.prototype.fromInt=y;s.prototype.fromString=w;s.prototype.clamp=E;s.prototype.dlShiftTo=L;s.prototype.drShiftTo=A;s.prototype.lShiftTo=O;s.prototype.rShiftTo=M;s.prototype.subTo=_;s.prototype.multiplyTo=D;s.prototype.squareTo=P;s.prototype.divRemTo=H;s.prototype.invDigit=z;s.prototype.isEven=Q;s.prototype.exp=G;s.prototype.toString=S;s.prototype.negate=x;s.prototype.abs=T;s.prototype.compareTo=N;s.prototype.bitLength=k;s.prototype.mod=B;s.prototype.modPowInt=Y;s.ZERO=b(0);s.ONE=b(1);s.prototype.fromRadix=Z;s.prototype.chunkSize=et;s.prototype.signum=tt;s.prototype.dMultiply=nt;s.prototype.dAddOffset=rt;s.prototype.toRadix=it;s.prototype.intValue=st;s.prototype.addTo=ot;var ut={abs:function(t,n){var r=new e.math.Long(t,n);var i;if(r.isNegative()){i=r.negate()}else{i=r}mt[An>>2]=i.low_;mt[An+4>>2]=i.high_},ensureTemps:function(){if(ut.ensuredTemps)return;ut.ensuredTemps=true;ut.two32=new s;ut.two32.fromString("4294967296",10);ut.two64=new s;ut.two64.fromString("18446744073709551616",10);ut.temp1=new s;ut.temp2=new s},lh2bignum:function(e,t){var n=new s;n.fromString(t.toString(),10);var r=new s;n.multiplyTo(ut.two32,r);var i=new s;i.fromString(e.toString(),10);var o=new s;i.addTo(r,o);return o},stringify:function(t,n,r){var i=(new e.math.Long(t,n)).toString();if(r&&i[0]=="-"){ut.ensureTemps();var o=new s;o.fromString(i,10);i=new s;ut.two64.addTo(o,i);i=i.toString(10)}return i},fromString:function(t,n,r,i,o){ut.ensureTemps();var u=new s;u.fromString(t,n);var a=new s;a.fromString(r,10);var f=new s;f.fromString(i,10);if(o&&u.compareTo(s.ZERO)<0){var l=new s;u.addTo(ut.two64,l);u=l}var c=false;if(u.compareTo(a)<0){u=a;c=true}else if(u.compareTo(f)>0){u=f;c=true}var h=e.math.Long.fromString(u.toString());mt[An>>2]=h.low_;mt[An+4>>2]=h.high_;if(c)throw"range error"}};return ut}();if(Ln){if(typeof e["locateFile"]==="function"){Ln=e["locateFile"](Ln)}else if(e["memoryInitializerPrefixURL"]){Ln=e["memoryInitializerPrefixURL"]+Ln}if(r||o){var bm=e["readBinary"](Ln);pt.set(bm,wt)}else{Cn("memory initializer");Browser.asyncLoad(Ln,function(e){pt.set(e,wt);kn("memory initializer")},function(e){throw"could not load memory initializer "+Ln})}}wm.prototype=new Error;wm.prototype.constructor=wm;var Em;var Sm=null;var xm=false;Nn=function uy(){if(!e["calledRun"]&&km)Tm();if(!e["calledRun"])Nn=uy};e["callMain"]=e.callMain=function(n){function i(){for(var e=0;e<4-1;e++){s.push(0)}}R(xn==0,"cannot call main when async dependencies remain! (listen on __ATMAIN__)");R(Ht.length==0,"cannot call main when preRun functions remain to be called");n=n||[];zt();var r=n.length+1;var s=[Z(Yt(e["thisProgram"]),"i8",J)];i();for(var o=0;o<r-1;o=o+1){s.push(Z(Yt(n[o]),"i8",J));i()}s.push(0);s=Z(s,"i32",J);Em=Tt;try{var u=e["_main"](r,s,0);Nm(u)}catch(a){if(a instanceof wm){return}else if(a=="SimulateInfiniteLoop"){e["noExitRuntime"]=true;return}else{if(a&&typeof a==="object"&&a.stack)e.printErr("exception thrown: "+[a,a.stack]);throw a}}finally{xm=true}};e["run"]=e.run=Tm;e["exit"]=e.exit=Nm;e["abort"]=e.abort=Cm;if(e["preInit"]){if(typeof e["preInit"]=="function")e["preInit"]=[e["preInit"]];while(e["preInit"].length>0){e["preInit"].pop()()}}var km=true;if(e["noInitialRun"]){km=false}e["noExitRuntime"]=true;Tm();Lm.prototype=Object.create(Lm.prototype);Lm.prototype.constructor=Lm;Lm.prototype.__class__=Lm;Lm.__cache__={};e["WrapperObject"]=Lm;e["getCache"]=Am;e["wrapPointer"]=Om;e["castObject"]=Mm;e["NULL"]=Om(0);e["destroy"]=_m;e["compare"]=Dm;e["getPointer"]=Pm;e["getClass"]=Hm;jm.prototype=Object.create(Lm.prototype);jm.prototype.constructor=jm;jm.prototype.__class__=jm;jm.__cache__={};e["btMatrix3x3"]=jm;jm.prototype["setEulerZYX"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Na(r,e,t,n)};jm.prototype["getRotation"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ja(t,e)};jm.prototype["__destroy__"]=function(){var e=this.ptr;mo(e)};Fm.prototype=Object.create(lg.prototype);Fm.prototype.constructor=Fm;Fm.prototype.__class__=Fm;Fm.__cache__={};e["ConcreteContactResultCallback"]=Fm;Fm.prototype["addSingleResult"]=function(e,t,n,r,i,s,o){var u=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(s&&typeof s==="object")s=s.ptr;else s=Bm(s);if(o&&typeof o==="object")o=o.ptr;else o=Bm(o);return il(u,e,t,n,r,i,s,o)};Fm.prototype["__destroy__"]=function(){var e=this.ptr;Bc(e)};Im.prototype=Object.create(xg.prototype);Im.prototype.constructor=Im;Im.prototype.__class__=Im;Im.__cache__={};e["btBvhTriangleMeshShape"]=Im;Im.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ps(t,e)};Im.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);tu(n,e,t)};Im.prototype["__destroy__"]=function(){var e=this.ptr;td(e)};qm.prototype=Object.create(Lm.prototype);qm.prototype.constructor=qm;qm.prototype.__class__=qm;qm.__cache__={};e["btDbvtBroadphase"]=qm;qm.prototype["__destroy__"]=function(){var e=this.ptr;Zc(e)};Rm.prototype=Object.create(Lm.prototype);Rm.prototype.constructor=Rm;Rm.prototype.__class__=Rm;Rm.__cache__={};e["VoidPtr"]=Rm;Rm.prototype["__destroy__"]=function(){var e=this.ptr;gc(e)};Um.prototype=Object.create(Lm.prototype);Um.prototype.constructor=Um;Um.prototype.__class__=Um;Um.__cache__={};e["btSequentialImpulseConstraintSolver"]=Um;Um.prototype["__destroy__"]=function(){var e=this.ptr;ya(e)};zm.prototype=Object.create(Lm.prototype);zm.prototype.constructor=zm;zm.prototype.__class__=zm;zm.__cache__={};e["btDispatcherInfo"]=zm;zm.prototype["get_m_timeStep"]=function(){var e=this.ptr;return Oh(e)};zm.prototype["set_m_timeStep"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Rc(t,e)};zm.prototype["get_m_stepCount"]=function(){var e=this.ptr;return Vs(e)};zm.prototype["set_m_stepCount"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Hp(t,e)};zm.prototype["get_m_dispatchFunc"]=function(){var e=this.ptr;return kc(e)};zm.prototype["set_m_dispatchFunc"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ds(t,e)};zm.prototype["get_m_timeOfImpact"]=function(){var e=this.ptr;return Ai(e)};zm.prototype["set_m_timeOfImpact"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);is(t,e)};zm.prototype["get_m_useContinuous"]=function(){var e=this.ptr;return yf(e)};zm.prototype["set_m_useContinuous"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);xi(t,e)};zm.prototype["get_m_enableSatConvex"]=function(){var e=this.ptr;return bv(e)};zm.prototype["set_m_enableSatConvex"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ua(t,e)};zm.prototype["get_m_enableSPU"]=function(){var e=this.ptr;return _f(e)};zm.prototype["set_m_enableSPU"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);fo(t,e)};zm.prototype["get_m_useEpa"]=function(){var e=this.ptr;return so(e)};zm.prototype["set_m_useEpa"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Qo(t,e)};zm.prototype["get_m_allowedCcdPenetration"]=function(){var e=this.ptr;return tv(e)};zm.prototype["set_m_allowedCcdPenetration"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);up(t,e)};zm.prototype["get_m_useConvexConservativeDistanceUtil"]=function(){var e=this.ptr;return hv(e)};zm.prototype["set_m_useConvexConservativeDistanceUtil"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Zs(t,e)};zm.prototype["get_m_convexConservativeDistanceThreshold"]=function(){var e=this.ptr;return Ca(e)};zm.prototype["set_m_convexConservativeDistanceThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ll(t,e)};zm.prototype["__destroy__"]=function(){var e=this.ptr;Sh(e)};Wm.prototype=Object.create(Wg.prototype);Wm.prototype.constructor=Wm;Wm.prototype.__class__=Wm;Wm.__cache__={};e["btCapsuleShape"]=Wm;Wm.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);rh(t,e)};Wm.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);ep(n,e,t)};Wm.prototype["__destroy__"]=function(){var e=this.ptr;es(e)};Xm.prototype=Object.create(Lm.prototype);Xm.prototype.constructor=Xm;Xm.prototype.__class__=Xm;Xm.__cache__={};e["btCollisionConfiguration"]=Xm;Xm.prototype["__destroy__"]=function(){var e=this.ptr;us(e)};Vm.prototype=Object.create(Lm.prototype);Vm.prototype.constructor=Vm;Vm.prototype.__class__=Vm;Vm.__cache__={};e["btAxisSweep3"]=Vm;Vm.prototype["__destroy__"]=function(){var e=this.ptr;Mc(e)};$m.prototype=Object.create(Vg.prototype);$m.prototype.constructor=$m;$m.prototype.__class__=$m;$m.__cache__={};e["btPairCachingGhostObject"]=$m;$m.prototype["getCollisionShape"]=function(){var e=this.ptr;return Om(gd(e),Wg)};$m.prototype["setContactProcessingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);tf(t,e)};$m.prototype["setActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ff(t,e)};$m.prototype["forceActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ws(t,e)};$m.prototype["activate"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){Us(t);return}zs(t,e)};$m.prototype["isActive"]=function(){var e=this.ptr;return fv(e)};$m.prototype["isKinematicObject"]=function(){var e=this.ptr;return ch(e)};$m.prototype["setRestitution"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ca(t,e)};$m.prototype["setFriction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ko(t,e)};$m.prototype["getWorldTransform"]=function(){var e=this.ptr;return Om(_o(e),ty)};$m.prototype["getCollisionFlags"]=function(){var e=this.ptr;return Bd(e)};$m.prototype["setCollisionFlags"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);jp(t,e)};$m.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Uh(t,e)};$m.prototype["setCollisionShape"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ac(t,e)};$m.prototype["getNumOverlappingObjects"]=function(){var e=this.ptr;return fu(e)};$m.prototype["getOverlappingObject"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(Jh(t,e),Zm)};$m.prototype["__destroy__"]=function(){var e=this.ptr;Rs(e)};Jm.prototype=Object.create(Lm.prototype);Jm.prototype.constructor=Jm;Jm.prototype.__class__=Jm;Jm.__cache__={};e["btRigidBodyConstructionInfo"]=Jm;Jm.prototype["get_m_linearDamping"]=function(){var e=this.ptr;return xp(e)};Jm.prototype["set_m_linearDamping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);jd(t,e)};Jm.prototype["get_m_angularDamping"]=function(){var e=this.ptr;return ji(e)};Jm.prototype["set_m_angularDamping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);$s(t,e)};Jm.prototype["get_m_friction"]=function(){var e=this.ptr;return Ks(e)};Jm.prototype["set_m_friction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Zl(t,e)};Jm.prototype["get_m_rollingFriction"]=function(){var e=this.ptr;return Lc(e)};Jm.prototype["set_m_rollingFriction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Hl(t,e)};Jm.prototype["get_m_restitution"]=function(){var e=this.ptr;return Up(e)};Jm.prototype["set_m_restitution"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ys(t,e)};Jm.prototype["get_m_linearSleepingThreshold"]=function(){var e=this.ptr;return Cp(e)};Jm.prototype["set_m_linearSleepingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ic(t,e)};Jm.prototype["get_m_angularSleepingThreshold"]=function(){var e=this.ptr;return bh(e)};Jm.prototype["set_m_angularSleepingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);io(t,e)};Jm.prototype["get_m_additionalDamping"]=function(){var e=this.ptr;return Ra(e)};Jm.prototype["set_m_additionalDamping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Fd(t,e)};Jm.prototype["get_m_additionalDampingFactor"]=function(){var e=this.ptr;return ih(e)};Jm.prototype["set_m_additionalDampingFactor"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);pa(t,e)};Jm.prototype["get_m_additionalLinearDampingThresholdSqr"]=function(){var e=this.ptr;return bu(e)};Jm.prototype["set_m_additionalLinearDampingThresholdSqr"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ba(t,e)};Jm.prototype["get_m_additionalAngularDampingThresholdSqr"]=function(){var e=this.ptr;return sf(e)};Jm.prototype["set_m_additionalAngularDampingThresholdSqr"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Uf(t,e)};Jm.prototype["get_m_additionalAngularDampingFactor"]=function(){var e=this.ptr;return ma(e)};Jm.prototype["set_m_additionalAngularDampingFactor"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);iu(t,e)};Jm.prototype["__destroy__"]=function(){var e=this.ptr;Kh(e)};Km.prototype=Object.create(Lm.prototype);Km.prototype.constructor=Km;Km.prototype.__class__=Km;Km.__cache__={};e["btManifoldPoint"]=Km;Km.prototype["getPositionWorldOnA"]=function(){var e=this.ptr;return Om(Dp(e),Ig)};Km.prototype["getPositionWorldOnB"]=function(){var e=this.ptr;return Om(ic(e),Ig)};Km.prototype["get_m_localPointA"]=function(){var e=this.ptr;return Om(Sp(e),Ig)};Km.prototype["set_m_localPointA"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);su(t,e)};Km.prototype["get_m_localPointB"]=function(){var e=this.ptr;return Om(Td(e),Ig)};Km.prototype["set_m_localPointB"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ls(t,e)};Km.prototype["get_m_positionWorldOnB"]=function(){var e=this.ptr;return Om(Wa(e),Ig)};Km.prototype["set_m_positionWorldOnB"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);fs(t,e)};Km.prototype["get_m_positionWorldOnA"]=function(){var e=this.ptr;return Om(sc(e),Ig)};Km.prototype["set_m_positionWorldOnA"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Sd(t,e)};Km.prototype["get_m_normalWorldOnB"]=function(){var e=this.ptr;return Om(ed(e),Ig)};Km.prototype["set_m_normalWorldOnB"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Wp(t,e)};Km.prototype["__destroy__"]=function(){var e=this.ptr;Pl(e)};Qm.prototype=Object.create(Lm.prototype);Qm.prototype.constructor=Qm;Qm.prototype.__class__=Qm;Qm.__cache__={};e["btGeneric6DofConstraint"]=Qm;Qm.prototype["__destroy__"]=function(){var e=this.ptr;od(e)};Gm.prototype=Object.create(Lm.prototype);Gm.prototype.constructor=Gm;Gm.prototype.__class__=Gm;Gm.__cache__={};e["btStridingMeshInterface"]=Gm;Gm.prototype["__destroy__"]=function(){var e=this.ptr;yp(e)};Ym.prototype=Object.create(Lm.prototype);Ym.prototype.constructor=Ym;Ym.prototype.__class__=Ym;Ym.__cache__={};e["btBroadphaseInterface"]=Ym;Ym.prototype["__destroy__"]=function(){var e=this.ptr;ha(e)};Zm.prototype=Object.create(Lm.prototype);Zm.prototype.constructor=Zm;Zm.prototype.__class__=Zm;Zm.__cache__={};e["btCollisionObject"]=Zm;Zm.prototype["getCollisionShape"]=function(){var e=this.ptr;return Om(_l(e),Wg)};Zm.prototype["setContactProcessingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);da(t,e)};Zm.prototype["setActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);co(t,e)};Zm.prototype["forceActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);hp(t,e)};Zm.prototype["activate"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){ns(t);return}ts(t,e)};Zm.prototype["isActive"]=function(){var e=this.ptr;return Ti(e)};Zm.prototype["isKinematicObject"]=function(){var e=this.ptr;return Ki(e)};Zm.prototype["setRestitution"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Af(t,e)};Zm.prototype["setFriction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Rl(t,e)};Zm.prototype["getWorldTransform"]=function(){var e=this.ptr;return Om(Wo(e),ty)};Zm.prototype["getCollisionFlags"]=function(){var e=this.ptr;return oa(e)};Zm.prototype["setCollisionFlags"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ph(t,e)};Zm.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);wp(t,e)};Zm.prototype["setCollisionShape"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ou(t,e)};Zm.prototype["__destroy__"]=function(){var e=this.ptr;jc(e)};eg.prototype=Object.create(Cg.prototype);eg.prototype.constructor=eg;eg.prototype.__class__=eg;eg.__cache__={};e["btDiscreteDynamicsWorld"]=eg;eg.prototype["setGravity"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);fp(t,e)};eg.prototype["getGravity"]=function(){var e=this.ptr;return Om(Xc(e),Ig)};eg.prototype["addRigidBody"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(t===undefined){$f(r,e);return}if(n===undefined){_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_2(r,e,t);return}Vf(r,e,t,n)};eg.prototype["removeRigidBody"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Bo(t,e)};eg.prototype["addConstraint"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(t===undefined){ro(n,e);return}no(n,e,t)};eg.prototype["removeConstraint"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);id(t,e)};eg.prototype["stepSimulation"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(t===undefined){return Ri(r,e)}if(n===undefined){return zi(r,e,t)}return Ui(r,e,t,n)};eg.prototype["getDispatcher"]=function(){var e=this.ptr;return Om(yl(e),Tg)};eg.prototype["rayTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Tv(r,e,t,n)};eg.prototype["getPairCache"]=function(){var e=this.ptr;return Om(kh(e),Fg)};eg.prototype["getDispatchInfo"]=function(){var e=this.ptr;return Om(Bu(e),zm)};eg.prototype["addCollisionObject"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(t===undefined){Hh(r,e);return}if(n===undefined){Bh(r,e,t);return}jh(r,e,t,n)};eg.prototype["getBroadphase"]=function(){var e=this.ptr;return Om(Fo(e),Ym)};eg.prototype["convexSweepTest"]=function(e,t,n,r,i){var s=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);mv(s,e,t,n,r,i)};eg.prototype["contactPairTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Nd(r,e,t,n)};eg.prototype["addAction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Vp(t,e)};eg.prototype["__destroy__"]=function(){var e=this.ptr;Nf(e)};tg.prototype=Object.create(ag.prototype);tg.prototype.constructor=tg;tg.prototype.__class__=tg;tg.__cache__={};e["btConvexTriangleMeshShape"]=tg;tg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Uo(t,e)};tg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Th(n,e,t)};tg.prototype["__destroy__"]=function(){var e=this.ptr;lf(e)};ng.prototype=Object.create(Lm.prototype);ng.prototype.constructor=ng;ng.prototype.__class__=ng;ng.__cache__={};e["ConvexResultCallback"]=ng;ng.prototype["hasHit"]=function(){var e=this.ptr;return go(e)};ng.prototype["get_m_collisionFilterGroup"]=function(){var e=this.ptr;return Pf(e)};ng.prototype["set_m_collisionFilterGroup"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);$h(t,e)};ng.prototype["get_m_collisionFilterMask"]=function(){var e=this.ptr;return ah(e)};ng.prototype["set_m_collisionFilterMask"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Qp(t,e)};ng.prototype["get_m_closestHitFraction"]=function(){var e=this.ptr;return Cc(e)};ng.prototype["set_m_closestHitFraction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);oh(t,e)};ng.prototype["__destroy__"]=function(){var e=this.ptr;Qi(e)};rg.prototype=Object.create(oy.prototype);rg.prototype.constructor=rg;rg.prototype.__class__=rg;rg.__cache__={};e["btPoint2PointConstraint"]=rg;rg.prototype["setPivotA"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Gh(t,e)};rg.prototype["setPivotB"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);iv(t,e)};rg.prototype["getPivotInA"]=function(){var e=this.ptr;return Om(ll(e),Ig)};rg.prototype["getPivotInB"]=function(){var e=this.ptr;return Om(wh(e),Ig)};rg.prototype["enableFeedback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);lu(t,e)};rg.prototype["get_m_setting"]=function(){var e=this.ptr;return Om(Ao(e),Xg)};rg.prototype["set_m_setting"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);kd(t,e)};rg.prototype["__destroy__"]=function(){var e=this.ptr;to(e)};ig.prototype=Object.create(Lm.prototype);ig.prototype.constructor=ig;ig.prototype.__class__=ig;ig.__cache__={};e["btMotionState"]=ig;ig.prototype["getWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Cl(t,e)};ig.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Zu(t,e)};ig.prototype["__destroy__"]=function(){var e=this.ptr;Dh(e)};sg.prototype=Object.create(oy.prototype);sg.prototype.constructor=sg;sg.prototype.__class__=sg;sg.__cache__={};e["btSliderConstraint"]=sg;sg.prototype["setLowerLinLimit"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Cd(t,e)};sg.prototype["setUpperLinLimit"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Au(t,e)};sg.prototype["setLowerAngLimit"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);yc(t,e)};sg.prototype["setUpperAngLimit"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ac(t,e)};sg.prototype["enableFeedback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);uv(t,e)};sg.prototype["__destroy__"]=function(){var e=this.ptr;Tc(e)};og.prototype=Object.create(oy.prototype);og.prototype.constructor=og;og.prototype.__class__=og;og.__cache__={};e["btConeTwistConstraint"]=og;og.prototype["setLimit"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);vp(n,e,t)};og.prototype["setAngularOnly"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);zh(t,e)};og.prototype["setDamping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ws(t,e)};og.prototype["enableMotor"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);aa(t,e)};og.prototype["setMaxMotorImpulse"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Fa(t,e)};og.prototype["setMaxMotorImpulseNormalized"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ro(t,e)};og.prototype["setMotorTarget"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);cc(t,e)};og.prototype["setMotorTargetInConstraintSpace"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);qc(t,e)};og.prototype["enableFeedback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Cu(t,e)};og.prototype["__destroy__"]=function(){var e=this.ptr;Jc(e)};ug.prototype=Object.create(Wg.prototype);ug.prototype.constructor=ug;ug.prototype.__class__=ug;ug.__cache__={};e["btConeShape"]=ug;ug.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ql(t,e)};ug.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Jp(n,e,t)};ug.prototype["__destroy__"]=function(){var e=this.ptr;Gd(e)};ag.prototype=Object.create(Wg.prototype);ag.prototype.constructor=ag;ag.prototype.__class__=ag;ag.__cache__={};e["btConvexShape"]=ag;ag.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ya(t,e)};ag.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);pd(n,e,t)};ag.prototype["__destroy__"]=function(){var e=this.ptr;Cf(e)};fg.prototype=Object.create(Lm.prototype);fg.prototype.constructor=fg;fg.prototype.__class__=fg;fg.__cache__={};e["btDefaultCollisionConfiguration"]=fg;fg.prototype["__destroy__"]=function(){var e=this.ptr;Ul(e)};lg.prototype=Object.create(Lm.prototype);lg.prototype.constructor=lg;lg.prototype.__class__=lg;lg.__cache__={};e["ContactResultCallback"]=lg;lg.prototype["addSingleResult"]=function(e,t,n,r,i,s,o){var u=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(s&&typeof s==="object")s=s.ptr;else s=Bm(s);if(o&&typeof o==="object")o=o.ptr;else o=Bm(o);return Nh(u,e,t,n,r,i,s,o)};lg.prototype["__destroy__"]=function(){var e=this.ptr;Pp(e)};cg.prototype=Object.create(ug.prototype);cg.prototype.constructor=cg;cg.prototype.__class__=cg;cg.__cache__={};e["btConeShapeZ"]=cg;cg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);af(t,e)};cg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);No(n,e,t)};cg.prototype["__destroy__"]=function(){var e=this.ptr;dv(e)};hg.prototype=Object.create(ug.prototype);hg.prototype.constructor=hg;hg.prototype.__class__=hg;hg.__cache__={};e["btConeShapeX"]=hg;hg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ju(t,e)};hg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);tc(n,e,t)};hg.prototype["__destroy__"]=function(){var e=this.ptr;sa(e)};pg.prototype=Object.create(Gm.prototype);pg.prototype.constructor=pg;pg.prototype.__class__=pg;pg.__cache__={};e["btTriangleMesh"]=pg;pg.prototype["addTriangle"]=function(e,t,n,r){var i=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(r===undefined){Xd(i,e,t,n);return}$d(i,e,t,n,r)};pg.prototype["__destroy__"]=function(){var e=this.ptr;_c(e)};dg.prototype=Object.create(Wg.prototype);dg.prototype.constructor=dg;dg.prototype.__class__=dg;dg.__cache__={};e["btConvexHullShape"]=dg;dg.prototype["addPoint"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(t===undefined){ad(n,e);return}fd(n,e,t)};dg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ka(t,e)};dg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);ko(n,e,t)};dg.prototype["__destroy__"]=function(){var e=this.ptr;jo(e)};vg.prototype=Object.create(Lm.prototype);vg.prototype.constructor=vg;vg.prototype.__class__=vg;vg.__cache__={};e["btPersistentManifold"]=vg;vg.prototype["getBody0"]=function(){var e=this.ptr;return Om(Tu(e),Zm)};vg.prototype["getBody1"]=function(){var e=this.ptr;return Om(Ns(e),Zm)};vg.prototype["getNumContacts"]=function(){var e=this.ptr;return va(e)};vg.prototype["getContactPoint"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(ec(t,e),Km)};vg.prototype["__destroy__"]=function(){var e=this.ptr;ho(e)};mg.prototype=Object.create(Wg.prototype);mg.prototype.constructor=mg;mg.prototype.__class__=mg;mg.__cache__={};e["btBoxShape"]=mg;mg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);pv(t,e)};mg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);du(n,e,t)};mg.prototype["__destroy__"]=function(){var e=this.ptr;Wc(e)};gg.prototype=Object.create(Tg.prototype);gg.prototype.constructor=gg;gg.prototype.__class__=gg;gg.__cache__={};e["btCollisionDispatcher"]=gg;gg.prototype["getNumManifolds"]=function(){var e=this.ptr;return Go(e)};gg.prototype["getManifoldByIndexInternal"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(Vu(t,e),vg)};gg.prototype["__destroy__"]=function(){var e=this.ptr;Fi(e)};yg.prototype=Object.create(Lm.prototype);yg.prototype.constructor=yg;yg.prototype.__class__=yg;yg.__cache__={};e["btVehicleTuning"]=yg;yg.prototype["get_m_suspensionStiffness"]=function(){var e=this.ptr;return zp(e)};yg.prototype["set_m_suspensionStiffness"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);wu(t,e)};yg.prototype["get_m_suspensionCompression"]=function(){var e=this.ptr;return Tf(e)};yg.prototype["set_m_suspensionCompression"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Mh(t,e)};yg.prototype["get_m_suspensionDamping"]=function(){var e=this.ptr;return $c(e)};yg.prototype["set_m_suspensionDamping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Fc(t,e)};yg.prototype["get_m_maxSuspensionTravelCm"]=function(){var e=this.ptr;return ud(e)};yg.prototype["set_m_maxSuspensionTravelCm"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);cf(t,e)};yg.prototype["get_m_frictionSlip"]=function(){var e=this.ptr;return Lv(e)};yg.prototype["set_m_frictionSlip"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ni(t,e)};yg.prototype["get_m_maxSuspensionForce"]=function(){var e=this.ptr;return np(e)};yg.prototype["set_m_maxSuspensionForce"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);vh(t,e)};bg.prototype=Object.create(Wg.prototype);bg.prototype.constructor=bg;bg.prototype.__class__=bg;bg.__cache__={};e["btCompoundShape"]=bg;bg.prototype["addChildShape"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Sf(n,e,t)};bg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ua(t,e)};bg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);na(n,e,t)};bg.prototype["__destroy__"]=function(){var e=this.ptr;eu(e)};wg.prototype=Object.create(Lm.prototype);wg.prototype.constructor=wg;wg.prototype.__class__=wg;wg.__cache__={};e["btCollisionObjectWrapper"]=wg;Eg.prototype=Object.create(ng.prototype);Eg.prototype.constructor=Eg;Eg.prototype.__class__=Eg;Eg.__cache__={};e["ClosestConvexResultCallback"]=Eg;Eg.prototype["hasHit"]=function(){var e=this.ptr;return Rd(e)};Eg.prototype["get_m_convexFromWorld"]=function(){var e=this.ptr;return Om(cl(e),Ig)};Eg.prototype["set_m_convexFromWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);hc(t,e)};Eg.prototype["get_m_convexToWorld"]=function(){var e=this.ptr;return Om(of(e),Ig)};Eg.prototype["set_m_convexToWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Yh(t,e)};Eg.prototype["get_m_hitNormalWorld"]=function(){var e=this.ptr;return Om(zf(e),Ig)};Eg.prototype["set_m_hitNormalWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Gi(t,e)};Eg.prototype["get_m_hitPointWorld"]=function(){var e=this.ptr;return Om(Vc(e),Ig)};Eg.prototype["set_m_hitPointWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Is(t,e)};Eg.prototype["get_m_collisionFilterGroup"]=function(){var e=this.ptr;return tl(e)};Eg.prototype["set_m_collisionFilterGroup"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);el(t,e)};Eg.prototype["get_m_collisionFilterMask"]=function(){var e=this.ptr;return vl(e)};Eg.prototype["set_m_collisionFilterMask"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);mp(t,e)};Eg.prototype["get_m_closestHitFraction"]=function(){var e=this.ptr;return xa(e)};Eg.prototype["set_m_closestHitFraction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);rd(t,e)};Eg.prototype["__destroy__"]=function(){var e=this.ptr;Il(e)};Sg.prototype=Object.create(ig.prototype);Sg.prototype.constructor=Sg;Sg.prototype.__class__=Sg;Sg.__cache__={};e["btDefaultMotionState"]=Sg;Sg.prototype["getWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);qi(t,e)};Sg.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ul(t,e)};Sg.prototype["get_m_graphicsWorldTrans"]=function(){var e=this.ptr;return Om(bs(e),ty)};Sg.prototype["set_m_graphicsWorldTrans"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);jl(t,e)};Sg.prototype["__destroy__"]=function(){var e=this.ptr;Xs(e)};xg.prototype=Object.create(Dg.prototype);xg.prototype.constructor=xg;xg.prototype.__class__=xg;xg.__cache__={};e["btTriangleMeshShape"]=xg;xg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);sh(t,e)};xg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Za(n,e,t)};xg.prototype["__destroy__"]=function(){var e=this.ptr;qp(e)};Tg.prototype=Object.create(Lm.prototype);Tg.prototype.constructor=Tg;Tg.prototype.__class__=Tg;Tg.__cache__={};e["btDispatcher"]=Tg;Tg.prototype["getNumManifolds"]=function(){var e=this.ptr;return Np(e)};Tg.prototype["getManifoldByIndexInternal"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(qh(t,e),vg)};Tg.prototype["__destroy__"]=function(){var e=this.ptr;xf(e)};Ng.prototype=Object.create(Mg.prototype);Ng.prototype.constructor=Ng;Ng.prototype.__class__=Ng;Ng.__cache__={};e["ClosestRayResultCallback"]=Ng;Ng.prototype["hasHit"]=function(){var e=this.ptr;return Ef(e)};Ng.prototype["get_m_rayFromWorld"]=function(){var e=this.ptr;return Om(wc(e),Ig)};Ng.prototype["set_m_rayFromWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Qc(t,e)};Ng.prototype["get_m_rayToWorld"]=function(){var e=this.ptr;return Om(nd(e),Ig)};Ng.prototype["set_m_rayToWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);_d(t,e)};Ng.prototype["get_m_hitNormalWorld"]=function(){var e=this.ptr;return Om(vd(e),Ig)};Ng.prototype["set_m_hitNormalWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);kv(t,e)};Ng.prototype["get_m_hitPointWorld"]=function(){var e=this.ptr;return Om(ki(e),Ig)};Ng.prototype["set_m_hitPointWorld"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);wo(t,e)};Ng.prototype["get_m_collisionFilterGroup"]=function(){var e=this.ptr;return Dd(e)};Ng.prototype["set_m_collisionFilterGroup"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);cu(t,e)};Ng.prototype["get_m_collisionFilterMask"]=function(){var e=this.ptr;return nf(e)};Ng.prototype["set_m_collisionFilterMask"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);hh(t,e)};Ng.prototype["get_m_collisionObject"]=function(){var e=this.ptr;return Om(Wd(e),Zm)};Ng.prototype["set_m_collisionObject"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Cs(t,e)};Ng.prototype["__destroy__"]=function(){var e=this.ptr;Yo(e)};Cg.prototype=Object.create(ny.prototype);Cg.prototype.constructor=Cg;Cg.prototype.__class__=Cg;Cg.__cache__={};e["btDynamicsWorld"]=Cg;Cg.prototype["addAction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Hd(t,e)};Cg.prototype["getDispatcher"]=function(){var e=this.ptr;return Om(Ha(e),Tg)};Cg.prototype["rayTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Xi(r,e,t,n)};Cg.prototype["getPairCache"]=function(){var e=this.ptr;return Om(vv(e),Fg)};Cg.prototype["getDispatchInfo"]=function(){var e=this.ptr;return Om(Hs(e),zm)};Cg.prototype["addCollisionObject"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(t===undefined){dl(r,e);return}if(n===undefined){gl(r,e,t);return}ml(r,e,t,n)};Cg.prototype["getBroadphase"]=function(){var e=this.ptr;return Om(kl(e),Ym)};Cg.prototype["convexSweepTest"]=function(e,t,n,r,i){var s=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);nv(s,e,t,n,r,i)};Cg.prototype["contactPairTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);fc(r,e,t,n)};Cg.prototype["__destroy__"]=function(){var e=this.ptr;_h(e)};kg.prototype=Object.create(Wm.prototype);kg.prototype.constructor=kg;kg.prototype.__class__=kg;kg.__cache__={};e["btCapsuleShapeX"]=kg;kg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Lf(t,e)};kg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Eo(n,e,t)};kg.prototype["__destroy__"]=function(){var e=this.ptr;Vl(e)};Lg.prototype=Object.create(ry.prototype);Lg.prototype.constructor=Lg;Lg.prototype.__class__=Lg;Lg.__cache__={};e["btQuaternion"]=Lg;Lg.prototype["setValue"]=function(e,t,n,r){var i=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);ps(i,e,t,n,r)};Lg.prototype["x"]=function(){var e=this.ptr;return Du(e)};Lg.prototype["y"]=function(){var e=this.ptr;return Qf(e)};Lg.prototype["z"]=function(){var e=this.ptr;return Fu(e)};Lg.prototype["w"]=function(){var e=this.ptr;return Df(e)};Lg.prototype["setX"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Li(t,e)};Lg.prototype["setY"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);$p(t,e)};Lg.prototype["setZ"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Oi(t,e)};Lg.prototype["setW"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ap(t,e)};Lg.prototype["__destroy__"]=function(){var e=this.ptr;Xu(e)};Ag.prototype=Object.create(Wm.prototype);Ag.prototype.constructor=Ag;Ag.prototype.__class__=Ag;Ag.__cache__={};e["btCapsuleShapeZ"]=Ag;Ag.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ku(t,e)};Ag.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Ah(n,e,t)};Ag.prototype["__destroy__"]=function(){var e=this.ptr;Ud(e)};Og.prototype=Object.create(qg.prototype);Og.prototype.constructor=Og;Og.prototype.__class__=Og;Og.__cache__={};e["btDefaultVehicleRaycaster"]=Og;Og.prototype["__destroy__"]=function(){var e=this.ptr;al(e)};Mg.prototype=Object.create(Lm.prototype);Mg.prototype.constructor=Mg;Mg.prototype.__class__=Mg;Mg.__cache__={};e["RayResultCallback"]=Mg;Mg.prototype["hasHit"]=function(){var e=this.ptr;return rf(e)};Mg.prototype["get_m_collisionFilterGroup"]=function(){var e=this.ptr;return xs(e)};Mg.prototype["set_m_collisionFilterGroup"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Oa(t,e)};Mg.prototype["get_m_collisionFilterMask"]=function(){var e=this.ptr;return La(e)};Mg.prototype["set_m_collisionFilterMask"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);qs(t,e)};Mg.prototype["get_m_collisionObject"]=function(){var e=this.ptr;return Om(fl(e),Zm)};Mg.prototype["set_m_collisionObject"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Md(t,e)};Mg.prototype["__destroy__"]=function(){var e=this.ptr;xu(e)};_g.prototype=Object.create(Lm.prototype);_g.prototype.constructor=_g;_g.prototype.__class__=_g;_g.__cache__={};e["btWheelInfo"]=_g;_g.prototype["get_m_suspensionStiffness"]=function(){var e=this.ptr;return Bi(e)};_g.prototype["set_m_suspensionStiffness"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Fh(t,e)};_g.prototype["get_m_frictionSlip"]=function(){var e=this.ptr;return uf(e)};_g.prototype["set_m_frictionSlip"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);wd(t,e)};_g.prototype["get_m_rollInfluence"]=function(){var e=this.ptr;return _s(e)};_g.prototype["set_m_rollInfluence"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);pc(t,e)};_g.prototype["get_m_suspensionRestLength1"]=function(){var e=this.ptr;return Hi(e)};_g.prototype["set_m_suspensionRestLength1"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Qd(t,e)};_g.prototype["get_m_wheelsRadius"]=function(){var e=this.ptr;return Ld(e)};_g.prototype["set_m_wheelsRadius"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ao(t,e)};_g.prototype["get_m_wheelsDampingCompression"]=function(){var e=this.ptr;return Of(e)};_g.prototype["set_m_wheelsDampingCompression"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);fa(t,e)};_g.prototype["get_m_wheelsDampingRelaxation"]=function(){var e=this.ptr;return xd(e)};_g.prototype["set_m_wheelsDampingRelaxation"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Pd(t,e)};_g.prototype["get_m_steering"]=function(){var e=this.ptr;return Sc(e)};_g.prototype["set_m_steering"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Rh(t,e)};_g.prototype["get_m_maxSuspensionForce"]=function(){var e=this.ptr;return Gs(e)};_g.prototype["set_m_maxSuspensionForce"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);qu(t,e)};_g.prototype["get_m_maxSuspensionTravelCm"]=function(){var e=this.ptr;return hs(e)};_g.prototype["set_m_maxSuspensionTravelCm"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Kl(t,e)};_g.prototype["__destroy__"]=function(){var e=this.ptr;uu(e)};Dg.prototype=Object.create(Wg.prototype);Dg.prototype.constructor=Dg;Dg.prototype.__class__=Dg;Dg.__cache__={};e["btConcaveShape"]=Dg;Dg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Hu(t,e)};Dg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Ka(n,e,t)};Dg.prototype["__destroy__"]=function(){var e=this.ptr;Mu(e)};Pg.prototype=Object.create(Ig.prototype);Pg.prototype.constructor=Pg;Pg.prototype.__class__=Pg;Pg.__cache__={};e["btVector4"]=Pg;Pg.prototype["w"]=function(){var e=this.ptr;return Zp(e)};Pg.prototype["setValue"]=function(e,t,n,r){var i=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);Ds(i,e,t,n,r)};Pg.prototype["length"]=function(){var e=this.ptr;return Bl(e)};Pg.prototype["x"]=function(){var e=this.ptr;return Bp(e)};Pg.prototype["y"]=function(){var e=this.ptr;return sd(e)};Pg.prototype["z"]=function(){var e=this.ptr;return cp(e)};Pg.prototype["setX"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Io(t,e)};Pg.prototype["setY"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Xa(t,e)};Pg.prototype["setZ"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Xo(t,e)};Pg.prototype["op_mul"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(wl(t,e),Ig)};Pg.prototype["__destroy__"]=function(){var e=this.ptr;lh(e)};Hg.prototype=Object.create(jg.prototype);Hg.prototype.constructor=Hg;Hg.prototype.__class__=Hg;Hg.__cache__={};e["btKinematicCharacterController"]=Hg;Hg.prototype["setUpAxis"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);rs(t,e)};Hg.prototype["setWalkDirection"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Rp(t,e)};Hg.prototype["setVelocityForTimeInterval"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);gv(n,e,t)};Hg.prototype["warp"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Oc(t,e)};Hg.prototype["preStep"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Dc(t,e)};Hg.prototype["playerStep"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Eh(n,e,t)};Hg.prototype["setFallSpeed"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Id(t,e)};Hg.prototype["setJumpSpeed"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Vh(t,e)};Hg.prototype["setMaxJumpHeight"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Cv(t,e)};Hg.prototype["canJump"]=function(){var e=this.ptr;return Qu(e)};Hg.prototype["jump"]=function(){var e=this.ptr;qo(e)};Hg.prototype["setGravity"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ks(t,e)};Hg.prototype["getGravity"]=function(){var e=this.ptr;return Xp(e)};Hg.prototype["setMaxSlope"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);_i(t,e)};Hg.prototype["getMaxSlope"]=function(){var e=this.ptr;return ov(e)};Hg.prototype["getGhostObject"]=function(){var e=this.ptr;return Om(Fp(e),$m)};Hg.prototype["setUseGhostSweepTest"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);bl(t,e)};Hg.prototype["onGround"]=function(){var e=this.ptr;return pp(e)};Hg.prototype["__destroy__"]=function(){var e=this.ptr;Ev(e)};Bg.prototype=Object.create(Dg.prototype);Bg.prototype.constructor=Bg;Bg.prototype.__class__=Bg;Bg.__cache__={};e["btStaticPlaneShape"]=Bg;Bg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);xh(t,e)};Bg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);dh(n,e,t)};Bg.prototype["__destroy__"]=function(){var e=this.ptr;cv(e)};jg.prototype=Object.create(Lm.prototype);jg.prototype.constructor=jg;jg.prototype.__class__=jg;jg.__cache__={};e["btActionInterface"]=jg;jg.prototype["__destroy__"]=function(){var e=this.ptr;ol(e)};Fg.prototype=Object.create(Lm.prototype);Fg.prototype.constructor=Fg;Fg.prototype.__class__=Fg;Fg.__cache__={};e["btOverlappingPairCache"]=Fg;Fg.prototype["setInternalGhostPairCallback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);mf(t,e)};Fg.prototype["__destroy__"]=function(){var e=this.ptr;Eu(e)};Ig.prototype=Object.create(Lm.prototype);Ig.prototype.constructor=Ig;Ig.prototype.__class__=Ig;Ig.__cache__={};e["btVector3"]=Ig;Ig.prototype["length"]=function(){var e=this.ptr;return Bs(e)};Ig.prototype["x"]=function(){var e=this.ptr;return Al(e)};Ig.prototype["y"]=function(){var e=this.ptr;return tp(e)};Ig.prototype["z"]=function(){var e=this.ptr;return Jf(e)};Ig.prototype["setX"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);os(t,e)};Ig.prototype["setY"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);vu(t,e)};Ig.prototype["setZ"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);cs(t,e)};Ig.prototype["setValue"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Wl(r,e,t,n)};Ig.prototype["op_mul"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(Wi(t,e),Ig)};Ig.prototype["__destroy__"]=function(){var e=this.ptr;Sl(e)};qg.prototype=Object.create(Lm.prototype);qg.prototype.constructor=qg;qg.prototype.__class__=qg;qg.__cache__={};e["btVehicleRaycaster"]=qg;qg.prototype["__destroy__"]=function(){var e=this.ptr;xo(e)};Rg.prototype=Object.create(Wg.prototype);Rg.prototype.constructor=Rg;Rg.prototype.__class__=Rg;Rg.__cache__={};e["btSphereShape"]=Rg;Rg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Yp(t,e)};Rg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Lo(n,e,t)};Rg.prototype["__destroy__"]=function(){var e=this.ptr;uc(e)};Ug.prototype=Object.create(Lm.prototype);Ug.prototype.constructor=Ug;Ug.prototype.__class__=Ug;Ug.__cache__={};e["btDefaultCollisionConstructionInfo"]=Ug;Ug.prototype["__destroy__"]=function(){var e=this.ptr;ql(e)};zg.prototype=Object.create(oy.prototype);zg.prototype.constructor=zg;zg.prototype.__class__=zg;zg.__cache__={};e["btHingeConstraint"]=zg;zg.prototype["setLimit"]=function(e,t,n,r,i){var s=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(i===undefined){$l(s,e,t,n,r);return}Jl(s,e,t,n,r,i)};zg.prototype["enableFeedback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);hd(t,e)};zg.prototype["__destroy__"]=function(){var e=this.ptr;cd(e)};Wg.prototype=Object.create(Lm.prototype);Wg.prototype.constructor=Wg;Wg.prototype.__class__=Wg;Wg.__cache__={};e["btCollisionShape"]=Wg;Wg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Sa(t,e)};Wg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);yo(n,e,t)};Wg.prototype["__destroy__"]=function(){var e=this.ptr;Nc(e)};Xg.prototype=Object.create(Lm.prototype);Xg.prototype.constructor=Xg;Xg.prototype.__class__=Xg;Xg.__cache__={};e["btConstraintSetting"]=Xg;Xg.prototype["get_m_tau"]=function(){var e=this.ptr;return xc(e)};Xg.prototype["set_m_tau"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Co(t,e)};Xg.prototype["get_m_damping"]=function(){var e=this.ptr;return Ru(e)};Xg.prototype["set_m_damping"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);So(t,e)};Xg.prototype["get_m_impulseClamp"]=function(){var e=this.ptr;return po(e)};Xg.prototype["set_m_impulseClamp"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ls(t,e)};Xg.prototype["__destroy__"]=function(){var e=this.ptr;Su(e)};Vg.prototype=Object.create(Zm.prototype);Vg.prototype.constructor=Vg;Vg.prototype.__class__=Vg;Vg.__cache__={};e["btGhostObject"]=Vg;Vg.prototype["getNumOverlappingObjects"]=function(){var e=this.ptr;return Gl(e)};Vg.prototype["getOverlappingObject"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(Vd(t,e),Zm)};Vg.prototype["getCollisionShape"]=function(){var e=this.ptr;return Om(Yl(e),Wg)};Vg.prototype["setContactProcessingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);zu(t,e)};Vg.prototype["setActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Op(t,e)};Vg.prototype["forceActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);vc(t,e)};Vg.prototype["activate"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){nc(t);return}rc(t,e)};Vg.prototype["isActive"]=function(){var e=this.ptr;return lp(e)};Vg.prototype["isKinematicObject"]=function(){var e=this.ptr;return Zi(e)};Vg.prototype["setRestitution"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);pl(t,e)};Vg.prototype["setFriction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Mo(t,e)};Vg.prototype["getWorldTransform"]=function(){var e=this.ptr;return Om(Ch(e),ty)};Vg.prototype["getCollisionFlags"]=function(){var e=this.ptr;return Xl(e)};Vg.prototype["setCollisionFlags"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ba(t,e)};Vg.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ho(t,e)};Vg.prototype["setCollisionShape"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);op(t,e)};Vg.prototype["__destroy__"]=function(){var e=this.ptr;Uu(e)};$g.prototype=Object.create(Lm.prototype);$g.prototype.constructor=$g;$g.prototype.__class__=$g;$g.__cache__={};e["LocalShapeInfo"]=$g;$g.prototype["get_m_shapePart"]=function(){var e=this.ptr;return Ms(e)};$g.prototype["set_m_shapePart"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);zd(t,e)};$g.prototype["get_m_triangleIndex"]=function(){var e=this.ptr;return sp(e)};$g.prototype["set_m_triangleIndex"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Nl(t,e)};$g.prototype["__destroy__"]=function(){var e=this.ptr;vs(e)};Jg.prototype=Object.create(Lm.prototype);Jg.prototype.constructor=Jg;Jg.prototype.__class__=Jg;Jg.__cache__={};e["btConstraintSolver"]=Jg;Jg.prototype["__destroy__"]=function(){var e=this.ptr;Yc(e)};Kg.prototype=Object.create(jg.prototype);Kg.prototype.constructor=Kg;Kg.prototype.__class__=Kg;Kg.__cache__={};e["btRaycastVehicle"]=Kg;Kg.prototype["applyEngineForce"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Pc(n,e,t)};Kg.prototype["setSteeringValue"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);eo(n,e,t)};Kg.prototype["getWheelTransformWS"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(Da(t,e),ty)};Kg.prototype["updateWheelTransform"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Vi(n,e,t)};Kg.prototype["addWheel"]=function(e,t,n,r,i,s,o){var u=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);if(s&&typeof s==="object")s=s.ptr;else s=Bm(s);if(o&&typeof o==="object")o=o.ptr;else o=Bm(o);return Om(av(u,e,t,n,r,i,s,o),_g)};Kg.prototype["getNumWheels"]=function(){var e=this.ptr;return Ih(e)};Kg.prototype["getRigidBody"]=function(){var e=this.ptr;return Om(Ec(e),Yg)};Kg.prototype["getWheelInfo"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(dp(t,e),_g)};Kg.prototype["setBrake"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Hc(n,e,t)};Kg.prototype["setCoordinateSystem"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);lo(r,e,t,n)};Kg.prototype["__destroy__"]=function(){var e=this.ptr;Ap(e)};Qg.prototype=Object.create(Lm.prototype);Qg.prototype.constructor=Qg;Qg.prototype.__class__=Qg;Qg.__cache__={};e["LocalConvexResult"]=Qg;Qg.prototype["get_m_hitCollisionObject"]=function(){var e=this.ptr;return Om(Ta(e),Zm)};Qg.prototype["set_m_hitCollisionObject"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Sv(t,e)};Qg.prototype["get_m_localShapeInfo"]=function(){var e=this.ptr;return Om(Ep(e),$g)};Qg.prototype["set_m_localShapeInfo"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);lv(t,e)};Qg.prototype["get_m_hitNormalLocal"]=function(){var e=this.ptr;return Om(Mi(e),Ig)};Qg.prototype["set_m_hitNormalLocal"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Pu(t,e)};Qg.prototype["get_m_hitPointLocal"]=function(){var e=this.ptr;return Om(Ji(e),Ig)};Qg.prototype["set_m_hitPointLocal"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Po(t,e)};Qg.prototype["get_m_hitFraction"]=function(){var e=this.ptr;return Mf(e)};Qg.prototype["set_m_hitFraction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Lh(t,e)};Qg.prototype["__destroy__"]=function(){var e=this.ptr;ga(e)};Gg.prototype=Object.create(Lm.prototype);Gg.prototype.constructor=Gg;Gg.prototype.__class__=Gg;Gg.__cache__={};e["btOverlappingPairCallback"]=Gg;Gg.prototype["__destroy__"]=function(){var e=this.ptr;za(e)};Yg.prototype=Object.create(Zm.prototype);Yg.prototype.constructor=Yg;Yg.prototype.__class__=Yg;Yg.__cache__={};e["btRigidBody"]=Yg;Yg.prototype["getCenterOfMassTransform"]=function(){var e=this.ptr;return Om(Yi(e),ty)};Yg.prototype["setCenterOfMassTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Gc(t,e)};Yg.prototype["setSleepingThresholds"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);bp(n,e,t)};Yg.prototype["setDamping"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Pa(n,e,t)};Yg.prototype["setMassProps"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);zl(n,e,t)};Yg.prototype["setLinearFactor"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ys(t,e)};Yg.prototype["applyTorque"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Lu(t,e)};Yg.prototype["applyForce"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);To(n,e,t)};Yg.prototype["applyCentralForce"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Wu(t,e)};Yg.prototype["applyTorqueImpulse"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Jd(t,e)};Yg.prototype["applyImpulse"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Ja(n,e,t)};Yg.prototype["applyCentralImpulse"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ii(t,e)};Yg.prototype["updateInertiaTensor"]=function(){var e=this.ptr;bf(e)};Yg.prototype["getLinearVelocity"]=function(){var e=this.ptr;return Om($a(e),Ig)};Yg.prototype["getAngularVelocity"]=function(){var e=this.ptr;return Om(pf(e),Ig)};Yg.prototype["setLinearVelocity"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ad(t,e)};Yg.prototype["setAngularVelocity"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ga(t,e)};Yg.prototype["getMotionState"]=function(){var e=this.ptr;return Om(nl(e),ig)};Yg.prototype["setAngularFactor"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);xl(t,e)};Yg.prototype["upcast"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);return Om(zo(t,e),Yg)};Yg.prototype["getCollisionShape"]=function(){var e=this.ptr;return Om(Ed(e),Wg)};Yg.prototype["setContactProcessingThreshold"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Va(t,e)};Yg.prototype["setActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);qd(t,e)};Yg.prototype["forceActivationState"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);rv(t,e)};Yg.prototype["activate"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(e===undefined){Lp(t);return}kp(t,e)};Yg.prototype["isActive"]=function(){var e=this.ptr;return Gu(e)};Yg.prototype["isKinematicObject"]=function(){var e=this.ptr;return gs(e)};Yg.prototype["setRestitution"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Zf(t,e)};Yg.prototype["setFriction"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Do(t,e)};Yg.prototype["getWorldTransform"]=function(){var e=this.ptr;return Om(Qh(e),ty)};Yg.prototype["getCollisionFlags"]=function(){var e=this.ptr;return Ea(e)};Yg.prototype["setCollisionFlags"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Kd(t,e)};Yg.prototype["setWorldTransform"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Qa(t,e)};Yg.prototype["setCollisionShape"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ia(t,e)};Yg.prototype["__destroy__"]=function(){var e=this.ptr;gp(e)};Zg.prototype=Object.create(iy.prototype);Zg.prototype.constructor=Zg;Zg.prototype.__class__=Zg;Zg.__cache__={};e["btCylinderShapeX"]=Zg;Zg.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Ia(t,e)};Zg.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Kp(n,e,t)};Zg.prototype["__destroy__"]=function(){var e=this.ptr;_p(e)};ey.prototype=Object.create(iy.prototype);ey.prototype.constructor=ey;ey.prototype.__class__=ey;ey.__cache__={};e["btCylinderShapeZ"]=ey;ey.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Fl(t,e)};ey.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);Tl(n,e,t)};ey.prototype["__destroy__"]=function(){var e=this.ptr;vo(e)};ty.prototype=Object.create(Lm.prototype);ty.prototype.constructor=ty;ty.prototype.__class__=ty;ty.__cache__={};e["btTransform"]=ty;ty.prototype["setIdentity"]=function(){var e=this.ptr;Pi(e)};ty.prototype["setOrigin"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);wf(t,e)};ty.prototype["setRotation"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);au(t,e)};ty.prototype["getOrigin"]=function(){var e=this.ptr;return Om(ld(e),Ig)};ty.prototype["getRotation"]=function(){var e=this.ptr;return Om(Hf(e),Lg)};ty.prototype["getBasis"]=function(){var e=this.ptr;return Om(Jo(e),jm)};ty.prototype["__destroy__"]=function(){var e=this.ptr;bd(e)};ny.prototype=Object.create(Lm.prototype);ny.prototype.constructor=ny;ny.prototype.__class__=ny;ny.__cache__={};e["btCollisionWorld"]=ny;ny.prototype["getDispatcher"]=function(){var e=this.ptr;return Om(Aa(e),Tg)};ny.prototype["rayTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);ta(r,e,t,n)};ny.prototype["getPairCache"]=function(){var e=this.ptr;return Om(lc(e),Fg)};ny.prototype["getDispatchInfo"]=function(){var e=this.ptr;return Om(ra(e),zm)};ny.prototype["addCollisionObject"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(t===undefined){Gf(r,e);return}if(n===undefined){Yf(r,e,t);return}wa(r,e,t,n)};ny.prototype["getBroadphase"]=function(){var e=this.ptr;return Om(Tp(e),Ym)};ny.prototype["convexSweepTest"]=function(e,t,n,r,i){var s=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);if(r&&typeof r==="object")r=r.ptr;else r=Bm(r);if(i&&typeof i==="object")i=i.ptr;else i=Bm(i);bo(s,e,t,n,r,i)};ny.prototype["contactPairTest"]=function(e,t,n){var r=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);if(n&&typeof n==="object")n=n.ptr;else n=Bm(n);Mp(r,e,t,n)};ny.prototype["__destroy__"]=function(){var e=this.ptr;Ss(e)};ry.prototype=Object.create(Lm.prototype);ry.prototype.constructor=ry;ry.prototype.__class__=ry;ry.__cache__={};e["btQuadWord"]=ry;ry.prototype["x"]=function(){var e=this.ptr;return $i(e)};ry.prototype["y"]=function(){var e=this.ptr;return Vo(e)};ry.prototype["z"]=function(){var e=this.ptr;return Di(e)};ry.prototype["w"]=function(){var e=this.ptr;return Zo(e)};ry.prototype["setX"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);yu(t,e)};ry.prototype["setY"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ms(t,e)};ry.prototype["setZ"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);nh(t,e)};ry.prototype["setW"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);Js(t,e)};ry.prototype["__destroy__"]=function(){var e=this.ptr;Kc(e)};iy.prototype=Object.create(Wg.prototype);iy.prototype.constructor=iy;iy.prototype.__class__=iy;iy.__cache__={};e["btCylinderShape"]=iy;iy.prototype["setLocalScaling"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);ea(t,e)};iy.prototype["calculateLocalInertia"]=function(e,t){var n=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);if(t&&typeof t==="object")t=t.ptr;else t=Bm(t);hl(n,e,t)};iy.prototype["__destroy__"]=function(){var e=this.ptr;Ei(e)};sy.prototype=Object.create(Lm.prototype);sy.prototype.constructor=sy;sy.prototype.__class__=sy;sy.__cache__={};e["btGhostPairCallback"]=sy;sy.prototype["__destroy__"]=function(){var e=this.ptr;sv(e)};oy.prototype=Object.create(Lm.prototype);oy.prototype.constructor=oy;oy.prototype.__class__=oy;oy.__cache__={};e["btTypedConstraint"]=oy;oy.prototype["enableFeedback"]=function(e){var t=this.ptr;if(e&&typeof e==="object")e=e.ptr;else e=Bm(e);th(t,e)};oy.prototype["__destroy__"]=function(){var e=this.ptr;Wf(e)};this["Ammo"]=e;return this}.call({})